<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Cachewolf-svn] r1563 - in	experiments/engywuck/hist-test/src/cachewolf: . utils
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cachewolf-svn/2008-October/index.html" >
   <LINK REL="made" HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r1563%20-%20in%0A%09experiments/engywuck/hist-test/src/cachewolf%3A%20.%20utils&In-Reply-To=%3C200810261400.m9QE0BCH003996%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001456.html">
   <LINK REL="Next"  HREF="001458.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cachewolf-svn] r1563 - in	experiments/engywuck/hist-test/src/cachewolf: . utils</H1>
    <B>engywuck at mail.berlios.de</B> 
    <A HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r1563%20-%20in%0A%09experiments/engywuck/hist-test/src/cachewolf%3A%20.%20utils&In-Reply-To=%3C200810261400.m9QE0BCH003996%40sheep.berlios.de%3E"
       TITLE="[Cachewolf-svn] r1563 - in	experiments/engywuck/hist-test/src/cachewolf: . utils">engywuck at mail.berlios.de
       </A><BR>
    <I>Sun Oct 26 15:00:11 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001456.html">[Cachewolf-svn] r1562 - in experiments/engywuck/hist-test/lib: .	lib-folder/HTML lib-folder/HTML/Tmpl	lib-folder/HTML/Tmpl/Element lib-folder/HTML/Tmpl/Parsers	lib-folder/com/bbn/openmap lib-folder/com/bbn/openmap/proj	lib-folder/com/bbn/openmap/proj/coords	lib-folder/com/bbn/openmap/util lib-folder/com/stevesoft/eve_pat	lib-folder/com/stevesoft/eve_pat/wrap lib-folder/ewesoft/xml	lib-folder/ewesoft/xml/sax
</A></li>
        <LI>Next message: <A HREF="001458.html">[Cachewolf-svn] r1564 - in	experiments/engywuck/hist-test/src/cachewolf: . imp utils
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1457">[ date ]</a>
              <a href="thread.html#1457">[ thread ]</a>
              <a href="subject.html#1457">[ subject ]</a>
              <a href="author.html#1457">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: engywuck
Date: 2008-10-26 14:59:52 +0100 (Sun, 26 Oct 2008)
New Revision: 1563

Added:
   experiments/engywuck/hist-test/src/cachewolf/utils/Common.java
   experiments/engywuck/hist-test/src/cachewolf/utils/DateFormat.java
   experiments/engywuck/hist-test/src/cachewolf/utils/Extractor.java
   experiments/engywuck/hist-test/src/cachewolf/utils/Matrix.java
   experiments/engywuck/hist-test/src/cachewolf/utils/ParseLatLon.java
   experiments/engywuck/hist-test/src/cachewolf/utils/STRreplace.java
   experiments/engywuck/hist-test/src/cachewolf/utils/SafeXML.java
Removed:
   experiments/engywuck/hist-test/src/cachewolf/Common.java
   experiments/engywuck/hist-test/src/cachewolf/DateFormat.java
   experiments/engywuck/hist-test/src/cachewolf/Extractor.java
   experiments/engywuck/hist-test/src/cachewolf/Matrix.java
   experiments/engywuck/hist-test/src/cachewolf/ParseLatLon.java
   experiments/engywuck/hist-test/src/cachewolf/STRreplace.java
   experiments/engywuck/hist-test/src/cachewolf/SafeXML.java
Log:
Moving some files to new location

Deleted: experiments/engywuck/hist-test/src/cachewolf/Common.java
===================================================================
--- experiments/engywuck/hist-test/src/cachewolf/Common.java	2008-10-26 13:41:21 UTC (rev 1562)
+++ experiments/engywuck/hist-test/src/cachewolf/Common.java	2008-10-26 13:59:52 UTC (rev 1563)
@@ -1,147 +0,0 @@
-package CacheWolf;
-
-import utils.FileBugfix;
-import ewe.io.Base64Codec;
-import ewe.io.File;
-import ewe.io.IOException;
-import ewe.sys.Convert;
-import ewe.util.ByteArray;
-import ewe.io.JavaUtf8Codec;
-
-public final class Common {
-
-	private static char digSep=MyLocale.getDigSeparator().charAt(0);
-	private static char notDigSep=MyLocale.getDigSeparator().charAt(0)=='.'?',':'.';
-	
-	/**
-	 * get double value from string. It interpretes &quot;.&quot; and &quot;,&quot; as decimal separator
-	 * when the string cannot be interpreted, return 0.
-	 * @param value
-	 * @return
-	 */
-	public static double parseDouble(String value){
-		// returns 0 for invalid arguments
-		try {
-			return parseDoubleException (value);
-		} catch (Exception e) {
-			return 0.0;
-		}
-	}
-
-	/**
-	 * throws some exception if the string could not be converted to double
-	 * @param value
-	 * @return
-	 */
-	public static double parseDoubleException (String value) {
-			return java.lang.Double.parseDouble(value.replace(notDigSep,digSep));
-	}
-	
-	public static int parseInt(String value){
-		try {
-			return java.lang.Integer.parseInt(value);
-		} catch (Exception e) {
-			return 0;
-		}
-	}
-
-	/**
-	 * (De)codes the given text with rot13.
-	 * Text in [] won't be (de)coded.
-	 * @param text will be (de)coded in rot13
-	 * @return rot13 of text
-	 */
-	public static String rot13(String text) {
-		char[] dummy = new char[text.length()];
-		boolean convert = true;
-		char c;
-		for (int i = 0; i &lt; text.length(); i++) {
-			c = text.charAt(i);
-
-			if (convert &amp;&amp; ((c &gt;= 'a' &amp;&amp; c &lt;= 'm') || (c &gt;= 'A' &amp;&amp; c &lt;= 'M'))) {
-				dummy[i] = (char) (c + 13);
-			} 
-			else if (convert &amp;&amp; ((c &gt;= 'n' &amp;&amp; c &lt;= 'z') || (c &gt;= 'N' &amp;&amp; c &lt;= 'Z'))) {
-				dummy[i] = (char) (c - 13);
-			} 
-			else if (c == '[') {
-				convert = false;
-				dummy[i] = '[';
-			} 
-			else if (c == ']') {
-				convert = true;
-				dummy[i] = ']';
-			} 
-			else {
-				dummy[i] = c;
-			}
-		}// for
-		return new String(dummy);
-	}
-	
-	public static String stringToHex(String str){
-		StringBuffer strBuf = new StringBuffer();
-		StringBuffer strHex = new StringBuffer();
-		StringBuffer strTxt = new StringBuffer();
-		for (int i = 0; i &lt; str.length(); i++) {
-			strHex.append(Convert.longToHexString(str.charAt(i)) + &quot; &quot;);
-			strTxt.append(str.charAt(i)+ &quot;  &quot;);
-		}
-		strBuf.append(strTxt);
-		strBuf.append(&quot;\n&quot;);
-		strBuf.append(strHex);
-		return strBuf.toString();
-	}
-	
-	public static String ClearForFileName(String str) {
-		String ret = str.replace('?', '_');
-		ret = ret.replace(' ', '-');
-		ret = ret.replace(':', '-');
-		return ret;
-	}
-	
-	/**
-	 * finds the correct (existing) extension to an image filename
-	 * @param filename without extension
-	 * @return filename with extension 
-	 */
-	static public String getImageName(String name) {
-		String fileName;
-		File tmp;
-		String[] t = {&quot;.png&quot;, &quot;.gif&quot;, &quot;.jpg&quot;, &quot;.bmp&quot;};
-		int i;
-		for (i = 0; i&lt;t.length; i++) {
-			tmp = new FileBugfix(name+t[i]);
-			if (tmp.exists()) break;
-		}
-		if (i &gt;=t.length) fileName = null;
-		else fileName = name+t[i];
-		return fileName;
-	}
-	/** get the extension of a filename, including &quot;.&quot;
-	 * remark: ewe.io.File.getFileExtension return name + extension
-	 * @param fn
-	 * @return
-	 */
-	public static String getFilenameExtension (String fn) {
-		if (fn == null || fn.length() == 0) return &quot;&quot;;
-		int dot = fn.lastIndexOf(&quot;.&quot;);
-		if (dot &lt; 0) return &quot;&quot;;
-		return fn.substring(dot, fn.length());
-	}
-	
-	public static String DoubleToString(double d, int decimalplaces) {
-		ewe.sys.Double e = new ewe.sys.Double();
-		e.set(d);
-		e.decimalPlaces = decimalplaces;
-		return e.toString().replace(',', '.');
-
-	}
-	
-	public static String fixSerialPortName(String name) {
-		if (name.startsWith(&quot;/&quot;)) return new String(&quot;..&quot;+name); // on linux (*nix) machines it is quite usual to give the complete file path to the serial port, but ewe expects only &quot;ttyS0&quot; or similar
-		else                      return name;
-	}
-
-
-}

Deleted: experiments/engywuck/hist-test/src/cachewolf/DateFormat.java
===================================================================
--- experiments/engywuck/hist-test/src/cachewolf/DateFormat.java	2008-10-26 13:41:21 UTC (rev 1562)
+++ experiments/engywuck/hist-test/src/cachewolf/DateFormat.java	2008-10-26 13:59:52 UTC (rev 1563)
@@ -1,53 +0,0 @@
-package CacheWolf;
-/* Several date formats are used by GC.COM
- *    2/27/2004   - Hidden dates are in format mm/dd/yyyy (=US style)
- *    February 27 - Found dates which happened this year
- *    February 27, 2004 - Found date in previous year
- * The internal standard is sortable:
- *    2004-02-27    - YYYY-MM-DD   
- */
-import ewe.sys.*;
-
-public class DateFormat {
-
-/** Convert the US Format into a sortable format */
-static String MDY2YMD(String date) {
-	// Dates are in format M/D/Y
-	int p1,p2=-1;
-	p1=date.indexOf(&quot;/&quot;);
-	if (p1&gt;0) p2=date.indexOf(&quot;/&quot;,p1+1);
-	if (p1&gt;0 &amp;&amp; p2&gt;0) {
-		return date.substring(p2+1)+&quot;-&quot;+
-		        (p1==1?&quot;0&quot;:&quot;&quot;)+date.substring(0,p1)+&quot;-&quot;+
-		        (p1+2==p2?&quot;0&quot;:&quot;&quot;)+date.substring(p1+1,p2);
-	} else
-		return date;
-}
-
-/* Convert the sortable date into a US date */
-//static String YMD2MDY(String date) {
-//	return date.substring(4,6)+&quot;/&quot;+date.substring(6,8)+&quot;/&quot;+date.substring(0,4);
-//}
-
-/** Convert the log format into a sortable format */
-static String logdate2YMD(String logdate) {
-   String monthNames[]={&quot;January&quot;,&quot;February&quot;,&quot;March&quot;,&quot;April&quot;,&quot;May&quot;,&quot;June&quot;,&quot;July&quot;,&quot;August&quot;,&quot;September&quot;,&quot;October&quot;,&quot;November&quot;,&quot;December&quot;};
-   Time t=new Time();
-   String year,month,day;
-   int i,m;
-   logdate+=&quot;, &quot;+t.year; // If logdate already has a year, this one is ignored
-   i=logdate.indexOf(',');
-   year=logdate.substring(i+2,i+6);
-   for (m=0; m&lt;12; m++) {
-	   if (logdate.startsWith(monthNames[m])) {
-		   month=(m&lt;9?&quot;0&quot;:&quot;&quot;)+Convert.formatInt(m+1);
-		   day=logdate.substring(monthNames[m].length()+1,i);
-		   if (day.length()==1)day=&quot;0&quot;+day;
-		   return year+&quot;-&quot;+month+&quot;-&quot;+day;
-	   }
-   }
-   return &quot;&quot;;
-}
-
-
-}

Deleted: experiments/engywuck/hist-test/src/cachewolf/Extractor.java
===================================================================
--- experiments/engywuck/hist-test/src/cachewolf/Extractor.java	2008-10-26 13:41:21 UTC (rev 1562)
+++ experiments/engywuck/hist-test/src/cachewolf/Extractor.java	2008-10-26 13:59:52 UTC (rev 1563)
@@ -1,83 +0,0 @@
-package CacheWolf;
-
-
-/**
-*	This is a powerfull class that is used very often. It is quicker than
-*	XML parsing and should be used whenever possible to find and extract
-*	parts of a string in a string.
-*/
-public class Extractor  {
-		int startOffset; // No initialisation needed, done in constructor
-		String searchText;
-		String start;
-		String end;
-		String tst;
-		boolean betweenonly;
-		public static boolean INCLUDESTARTEND = false;
-		public static boolean EXCLUDESTARTEND = true;
-		/**
-		*	Create an extractor.
-		*	sTxt = The string to search through.&lt;br&gt;
-		*	st = The string that denotes the start of the string to extract&lt;br&gt;
-		*	e = The string that denotes the end of the string to extract&lt;br&gt;
-		*	sOff = The beginning offset from which to start the search in sTxt&lt;br&gt;
-		*	only = if false the string returned will inlcude st and e; if true
-		*	it will not include st and e.
-		*
-		*/
-		public Extractor(String sTxt, String st, String e, int sOff, boolean only){
-			startOffset = sOff;
-			searchText = sTxt;
-			//Vm.debug(&quot;Start &quot; + st);
-			end = e;
-			//Vm.debug(&quot;End: &quot; + e);
-			start = st;
-			betweenonly = only;
-		}
-		
-		/**
-		 * Mehtod to set the source text to be searched through
-		 * 
-		 */
-		public void setSource(String sTxt){
-			searchText = sTxt;
-			//Vm.debug(&quot;Searchtext: &quot; + searchText);
-			startOffset = 0;
-		}
-		
-		/**
-		* Method that informs if the search has encountered the end of the string
-		* that is being searched through.
-		*/
-		public boolean endOfSearch(){
-			if(searchText == null || startOffset &gt;= searchText.length()) return true;
-			else return false;
-		}
-		
-		/**
-		*	Method to find the next occurance of a string that is enclosed by
-		*	that start (st) and end string (e). if end is not found the string
-		*	is returned til it's end.
-		*/
-		public String findNext(){
-			if (searchText == null) return new String(); //maby null should 
-			int idxStart = searchText.indexOf(start,startOffset);
-			int idxEnd = searchText.indexOf(end, idxStart+start.length());
-			////Vm.debug(&quot;Start: &quot; + Convert.toString(idxStart) + &quot; End: &quot; + Convert.toString(idxEnd));
-			if(idxEnd == -1) idxEnd = searchText.length(); //index counts from zero length from 1 but the last char is not included in substr and substr accepts length +1 (but not length+2)
-			startOffset = idxEnd;
-			tst = new String();
-			if(idxStart &gt; -1){
-				if(betweenonly == false){
-					if (idxEnd+end.length() &gt;= searchText.length()) 
-						 tst = searchText.substring(idxStart);
-					else tst = searchText.substring(idxStart,idxEnd+end.length());
-				}else{ 
-					tst = searchText.substring(idxStart+start.length(),idxEnd);
-				}
-			} else {
-				startOffset = searchText.length();
-			}
-			return tst;
-		}
-}

Deleted: experiments/engywuck/hist-test/src/cachewolf/Matrix.java
===================================================================
--- experiments/engywuck/hist-test/src/cachewolf/Matrix.java	2008-10-26 13:41:21 UTC (rev 1562)
+++ experiments/engywuck/hist-test/src/cachewolf/Matrix.java	2008-10-26 13:59:52 UTC (rev 1563)
@@ -1,278 +0,0 @@
-package CacheWolf;
-
-import ewe.sys.*;
-
-public class Matrix{
-	int iDF = 0;
-	
-	public double matrix[][] = new double[0][0];
-	
-	public Matrix (int rows, int cols){
-		matrix = new double[rows][cols];
-	}
-	
-	public Matrix (Matrix srcMatrix){
-		matrix = new double[srcMatrix.matrix.length][srcMatrix.matrix[0].length];
-		for (int i = 0; i &lt; srcMatrix.matrix.length; i++)
-			for (int j = 0; j &lt; srcMatrix.matrix[i].length; j++)
-				matrix[i][j] = srcMatrix.matrix[i][j];
-	}
-	
-	/**
-	*	Method to multiply this matrix with another matrix.
-	*	The result is stored in this matrix!
-	*/
-	public void Multiply(Matrix srcMatrix){
-		double m[][] = new double[matrix.length][srcMatrix.matrix[0].length];
-		for (int i = 0; i &lt; m.length; i++)
-			for (int j = 0; j &lt; m[i].length; j++){
-				//Vm.debug(&quot;i: &quot; + i + &quot; j: &quot; + j);
-				m[i][j] = calculateRowColumnProduct(matrix,i,srcMatrix.matrix,j);
-			}
-		
-		matrix = new double[m.length][m[0].length];
-		for (int i = 0; i &lt; m.length; i++)
-			for (int j = 0; j &lt; m[i].length; j++)
-				matrix[i][j] = m[i][j];
-	}
-	
-	/**
-	*	Method to calculate the row column product of two matrices.
-	*	Is used by the Multiply method.
-	*/
-	private double calculateRowColumnProduct(double[][] A, int row, double[][] B, int col){
-		double product = 0;
-		for(int i = 0; i &lt; A[row].length; i++){
-			//Vm.debug(&quot;i = &quot; + i + &quot; row = &quot; + row + &quot; col = &quot; + col);
-			product +=A[row][i]*B[i][col];
-		}
-		return product;
-	}
-	
-	public void MultiplyByScalar (double f) {
-		for (int i = 0; i &lt; matrix.length; i++)
-			for (int j = 0; j &lt; matrix[0].length; j++)
-				matrix[i][j] = matrix[i][j] * f;
-	}
-	
-	public void add (Matrix a) {
-		for (int i = 0; i &lt; matrix.length; i++)
-			for (int j = 0; j &lt; matrix[0].length; j++)
-				matrix[i][j] = matrix[i][j] + a.matrix[i][j];
-	}
-	
-	/**
-	*	Method to transpose a matrix
-	*	example:	| 1 2 |
-	*			| 3 4 |
-	*			| 5 6 |
-	*	would become:	|1 3 5 |
-	*			|2 4 6 |
-	*/
-	public void Transpose(){
-		
-		double m[][] = new double[matrix[0].length][matrix.length];
-		for (int i = 0; i &lt; matrix.length; i++)
-			for (int j = 0; j &lt; matrix[i].length; j++)
-				m[j][i] = matrix[i][j];
-			
-		matrix = new double[m.length][m[0].length];
-		for (int i = 0; i &lt; m.length; i++)
-			for (int j = 0; j &lt; m[i].length; j++)
-				matrix[i][j] = m[i][j];
-	}
-	
-	/**
-	*	private version of the Transpose method.
-	*	used internally in this class
-	*/
-	private double[][] Transpose2(double[][] a) {
-		
-		double m[][] = new double[a[0].length][a.length];
-
-		for (int i = 0; i &lt; a.length; i++)
-			for (int j = 0; j &lt; a[i].length; j++)
-				m[j][i] = a[i][j];
-		return m;
-	}
-	
-	/**
-	*	Method to display the contents of a matrix.
-	*/
-	public void DumpMatrix(){
-		for (int i = 0; i &lt; matrix.length; i++)
-			for (int j = 0; j &lt; matrix[i].length; j++)
-				Vm.debug(&quot;[ &quot;+i+ &quot; &quot; + j + &quot; ] &quot; + matrix[i][j]);
-	}
-	
-	/**
-	*	Method used to help calculate determinate
-	*/
-	private double[][] UpperTriangle(double[][] m) {
-		double f1 = 0;
-		double temp = 0;
-		int tms = m.length; // get This Matrix Size (could be smaller than
-							// global)
-		int v = 1;
-		iDF = 1;
-
-		for (int col = 0; col &lt; tms - 1; col++) {
-			for (int row = col + 1; row &lt; tms; row++) {
-				v = 1;
-				outahere: while (m[col][col] == 0) // check if 0 in diagonal
-				{ // if so switch until not
-					if (col + v &gt;= tms) // check if switched all rows
-					{
-						iDF = 0;
-						break outahere;
-					} else {
-						for (int c = 0; c &lt; tms; c++) {
-							temp = m[col][c];
-							m[col][c] = m[col + v][c]; // switch rows
-							m[col + v][c] = temp;
-						}
-						v++; // count row switchs
-						iDF = iDF * -1; // each switch changes determinant
-										// factor
-					}
-				}
-				if (m[col][col] != 0) {
-					try {
-						f1 = (-1) * m[row][col] / m[col][col];
-						for (int i = col; i &lt; tms; i++) {
-							m[row][i] = f1 * m[col][i] + m[row][i];
-						}
-					} catch (Exception e) {
-						Vm.debug(&quot;Still Here!!!&quot;);
-					}
-				}
-			}
-		}
-		return m;
-	}
-	
-	/**
-	*	Method to calculate the determinate of a matrix
-	*/
-	public double Determinant(double[][] matrix) {
-		int tms = matrix.length;
-		double det = 1;
-		matrix = UpperTriangle(matrix);
-		for (int i = 0; i &lt; tms; i++) {
-			det = det * matrix[i][i];
-		} // multiply down diagonal
-		det = det * iDF; // adjust w/ determinant factor
-		return det;
-	}
-	
-	
-	
-	/**
-	*	Method to calculate the inverse of this matrix.
-	*	The result is stored in this matrix!
-	*/
-	public void Inverse() {
-		// Formula used to Calculate Inverse:
-		// inv(A) = 1/det(A) * adj(A)
-		
-		int tms = matrix.length;
-
-		double m[][] = new double[tms][tms];
-		double mm[][] = Adjoint(matrix);
-
-		double det = Determinant(matrix);
-		double dd = 0;
-
-		if (det == 0) {
-			Vm.debug(&quot;Determinant Equals 0, Not Invertible.&quot;);
-		} else {
-			dd = 1 / det;
-		}
-		for (int i = 0; i &lt; tms; i++)
-			for (int j = 0; j &lt; tms; j++) {
-				m[i][j] = dd * mm[i][j];
-			}
-			
-		//Store back results
-		matrix = new double[m.length][m[0].length];
-		for (int i = 0; i &lt; m.length; i++)
-			for (int j = 0; j &lt; m[i].length; j++)
-				matrix[i][j] = m[i][j];
-	}
-	
-	/**
-	*	Method to calculate the adjoint of a matrix.
-	*	Required to calculate the inverse of a matrix.
-	*/
-	private double[][] Adjoint(double[][] a) {
-		int tms = a.length;
-
-		double m[][] = new double[tms][tms];
-
-		int ii, jj, ia, ja;
-		double det;
-
-		for (int i = 0; i &lt; tms; i++)
-			for (int j = 0; j &lt; tms; j++) {
-				ia = ja = 0;
-				double ap[][] = new double[tms - 1][tms - 1];
-				for (ii = 0; ii &lt; tms; ii++) {
-					for (jj = 0; jj &lt; tms; jj++) {
-						if ((ii != i) &amp;&amp; (jj != j)) {
-							ap[ia][ja] = a[ii][jj];
-							ja++;
-						}
-					}
-					if ((ii != i) &amp;&amp; (jj != j)) {
-						ia++;
-					}
-					ja = 0;
-				}
-				det = Determinant(ap);
-				m[i][j] = java.lang.Math.pow(-1, i + j) * det;
-			}
-		m = Transpose2(m);
-		return m;
-	}
-	
-	/**
-	*	&quot;Old&quot; helper method used by some other classes in cachewolf.
-	*	@deprecated Do not use when coding new classes!
-	*/
-	public static double dot(double p1, double p2, double q1, double q2, double x1, double x2){
-		double dt,AB0,AB1,BC0,BC1 = 0;
-		AB0 = q1 - p1;
-		AB1 = q2 - p2;
-		BC0 = x1-q1;
-		BC1 = x2-q2;
-		dt = AB0 * BC0 + AB1 * BC1;
-		return dt;
-	}
-	
-	/**
-	*	&quot;Old&quot; helper method used by some other classes in cachewolf.
-	*	@deprecated Do not use when coding new classes!
-	*/
-	public static double cross(double p1, double p2, double q1, double q2, double x1, double x2){
-		double cr,AB0,AB1,AC0,AC1 = 0;
-		AB0 = q1 - p1;
-		AB1 = q2 - p2;
-		AC0 = x1-p1;
-		AC1 = x2-p2;
-		cr= AB0 * AC1 - AB1 * AC0;
-		return cr;
-	}
-	
-	/**
-	*	&quot;Old&quot; helper method used by some other classes in cachewolf.
-	*	@deprecated Do not use when coding new classes!
-	*/
-	public static double dist(double p1, double p2, double q1, double q2){
-		double d1, d2,dt = 0;
-		d1 = p1 - q1;
-		d2 = p2 - q2;
-		dt = d1 * d1 + d2 * d2;
-		dt = java.lang.Math.sqrt(dt);
-		return dt;
-	}
-}
\ No newline at end of file

Deleted: experiments/engywuck/hist-test/src/cachewolf/ParseLatLon.java
===================================================================
--- experiments/engywuck/hist-test/src/cachewolf/ParseLatLon.java	2008-10-26 13:41:21 UTC (rev 1562)
+++ experiments/engywuck/hist-test/src/cachewolf/ParseLatLon.java	2008-10-26 13:59:52 UTC (rev 1563)
@@ -1,89 +0,0 @@
-package CacheWolf;
-
-import ewe.sys.*;
-
-/**
-*	This class parses a string representation of longitude and latitude.
-*	The result is a double value representing longitude and another representing
-*	latitude (DD.dddd)
-*/
-public class ParseLatLon {
-	
-	String latlon;	
-	/**
-	*	After a calling the method parse()
-	*	this variable holds the double value of latitude
-	*/
-	public double lat2;
-	/**
-	*	After a calling the method parse()
-	*	this variable holds the double value of longitude
-	*/
-	public double lon2;
-
-	private char digSep;
-
-	/**
-	*	Constructor to parse a lat lon string like:
-	*	N 49 33.167 E 011 21.608
-	*/
-	public ParseLatLon (String ll){
-		latlon = ll;
-		digSep=MyLocale.getDigSeparator().charAt(0);
-	}
-	
-	/**
-	*	Constructor to parse a lat lon string like:
-	*	N 49 33.167 E 011 21.608.
-	*	Additionally you may pass the decimal symbol, i.e. &quot;.&quot; or &quot;,&quot;
-	*/
-	public ParseLatLon (String ll, String tr){
-		latlon = ll;
-		digSep=MyLocale.getDigSeparator().charAt(0);
-	}
-	
-	private int start;
-	private int end;
-	
-	/** Get the next non-blank part of the latlon String */
-	String getNext() {
-        start=end;
-		while (latlon.charAt(start)==' ')start++; // skip blanks
-        end=start;
-        while (latlon.charAt(end)!=' ') end++; // collect non-blanks
-		return latlon.substring(start,end);
-	}
-	
-	/**
-	* Parse a string that contains lat lon into it's lat and lon doubles. Class
-	* variable latlon must have been set befor you call this method.
-	*/
-	public void parse() throws NumberFormatException {
-		if (digSep==',') 
-			latlon = latlon.replace('.', ',')+&quot; &quot;;
-		else
-			latlon = latlon.replace(',', '.')+&quot; &quot;;
-		try {
-			end=0;
-			String latNS=getNext();
-			String latDeg=getNext();
-			String latMin=getNext();
-			String lonEW=getNext();
-			String lonDeg=getNext();
-			String lonMin=getNext();
-			if (lonDeg.endsWith(&quot;&#176;&quot;)){
-				lonDeg = lonDeg.substring(0,lonDeg.length()-1); // remove &#176;
-			}
-			if (latDeg.endsWith(&quot;&#176;&quot;)){
-				latDeg = latDeg.substring(0,latDeg.length()-1);// remove &#176;
-			}
-			lat2 = Convert.parseDouble(latDeg) + Convert.parseDouble(latMin)/60.0;
-			if(latNS.charAt(0)=='S') lat2= -lat2 ;
-			lon2 = Convert.parseDouble(lonDeg) + Convert.parseDouble(lonMin)/60.0;
-			if(lonEW.charAt(0)=='W') lon2 = -lon2;
-		} catch (Exception e) { 
-			throw new NumberFormatException(&quot;Coordinates must be entered in the format N DD MM.MMM E DDD MM.MMM&quot;); 
-		}
-
-	}
-}

Deleted: experiments/engywuck/hist-test/src/cachewolf/STRreplace.java
===================================================================
--- experiments/engywuck/hist-test/src/cachewolf/STRreplace.java	2008-10-26 13:41:21 UTC (rev 1562)
+++ experiments/engywuck/hist-test/src/cachewolf/STRreplace.java	2008-10-26 13:59:52 UTC (rev 1563)
@@ -1,31 +0,0 @@
-package CacheWolf;
-
-public class STRreplace{
-		/* Replace all instances of a String in a String.
-		 *   @param  s  String to alter.
-		 *   @param  f  String to look for.
-		 *   @param  r  String to replace it with, or null to just remove it.
-		 */ 
-		public static String replace( String s, String f, String r )
-		{
-		   if (s == null)  return s;
-		   if (f == null)  return s;
-		   if (r == null)  r = &quot;&quot;;
-		
-		   int index01 = s.indexOf( f );
-		   int index02 = 0;
-		   StringBuffer sb = new StringBuffer();
-		   while (index01 != -1)
-		   {
-			   sb.append(s.substring(index02,index01)).append(r);			   
-			   index02 = index01 + f.length();
-			   index01 = s.indexOf( f, index02 );
-			  /* original impl.
-			  s = s.substring(0,index01) + r + s.substring(index01+f.length());
-			  index01 += r.length();
-			  index01 = s.indexOf( f, index01 );
-			  */
-		   }
-		   return sb.append(s.substring(index02)).toString();
-		}
-}

Deleted: experiments/engywuck/hist-test/src/cachewolf/SafeXML.java
===================================================================
--- experiments/engywuck/hist-test/src/cachewolf/SafeXML.java	2008-10-26 13:41:21 UTC (rev 1562)
+++ experiments/engywuck/hist-test/src/cachewolf/SafeXML.java	2008-10-26 13:59:52 UTC (rev 1563)
@@ -1,522 +0,0 @@
-package CacheWolf;
-
-/**
-*	A class to replace unsafe XML characters with characters that a user
-*	&quot;can read&quot;, and vice versa
-* 20061222: skg Modified cleanback to speed up the new index.xml reader
-*/
-
-import ewe.util.Hashtable;
-
-public class SafeXML{
-	private static final char ENTITY_START = '&amp;';
-	private static final char ENTITY_END = ';';
-	
-	private static Hashtable iso2htmlMappings = new Hashtable(300);
-	static {
-		String[] mappingArray = new String[] {
-				&quot;&apos;&quot;,   &quot;'&quot;,		// Added 20061227 - not a valid HTML entity but sometimes used
-				&quot;&quot;&quot;,   &quot;\&quot;&quot;,
-				&quot;&amp;&quot;,    &quot;&amp;&quot;,
-				&quot;&lt;&quot;,     &quot;&lt;&quot;,
-				&quot;&gt;&quot;,     &quot;&gt;&quot;,
-				&quot;&nbsp;&quot;,   &quot; &quot;,
-				&quot;&iexcl;&quot;,  &quot;&#161;&quot;,
-				&quot;&cent;&quot;,   &quot;&#162;&quot;,
-				&quot;&pound;&quot;,  &quot;&#163;&quot;,
-				&quot;&curren;&quot;, &quot;&#164;&quot;,
-				&quot;&yen;&quot;,    &quot;&#165;&quot;,
-				&quot;&brvbar;&quot;, &quot;&#166;&quot;,
-				&quot;&sect;&quot;,   &quot;&#167;&quot;,
-				&quot;&uml;&quot;,    &quot;&#168;&quot;,
-				&quot;&copy;&quot;,   &quot;&#169;&quot;,
-				&quot;&ordf;&quot;,   &quot;&#170;&quot;,
-				&quot;&laquo;&quot;,  &quot;&#171;&quot;,
-				&quot;&not;&quot;,    &quot;&#172;&quot;,
-				&quot;&shy;&quot;,    &quot;&#173;&quot;,
-				&quot;&reg;&quot;,    &quot;&#174;&quot;,
-				&quot;&macr;&quot;,   &quot;&#175;&quot;,
-				&quot;&deg;&quot;,    &quot;&#176;&quot;,
-				&quot;&plusmn;&quot;, &quot;&#177;&quot;,
-				&quot;&amp;sup2;&quot;,   &quot;&#178;&quot;,
-				&quot;&amp;sup3;&quot;,   &quot;&#179;&quot;,
-				&quot;&acute;&quot;,  &quot;&#180;&quot;,
-				&quot;&micro;&quot;,  &quot;&#181;&quot;,
-				&quot;&para;&quot;,   &quot;&#182;&quot;,
-				&quot;&middot;&quot;, &quot;&#183;&quot;,
-				&quot;&cedil;&quot;,  &quot;&#184;&quot;,
-				&quot;&amp;sup1;&quot;,   &quot;&#185;&quot;,
-				&quot;&ordm;&quot;,   &quot;&#186;&quot;,
-				&quot;&raquo;&quot;,  &quot;&#187;&quot;,
-				&quot;&amp;frac14;&quot;, &quot;&#188;&quot;,
-				&quot;&amp;frac12;&quot;, &quot;&#189;&quot;,
-				&quot;&amp;frac34;&quot;, &quot;&#190;&quot;,
-				&quot;&iquest;&quot;, &quot;&#191;&quot;,
-				&quot;&Agrave;&quot;, &quot;&#192;&quot;,
-				&quot;&Aacute;&quot;, &quot;&#193;&quot;,
-				&quot;&Acirc;&quot;,  &quot;&#194;&quot;,
-				&quot;&Atilde;&quot;, &quot;&#195;&quot;,
-				&quot;&Auml;&quot;,   &quot;&#196;&quot;,
-				&quot;&Aring;&quot;,  &quot;&#197;&quot;,
-				&quot;&AElig;&quot;,  &quot;&#198;&quot;,
-				&quot;&Ccedil;&quot;, &quot;&#199;&quot;,
-				&quot;&Egrave;&quot;, &quot;&#200;&quot;,
-				&quot;&Eacute;&quot;, &quot;&#201;&quot;,
-				&quot;&Ecirc;&quot;,  &quot;&#202;&quot;,
-				&quot;&Euml;&quot;,   &quot;&#203;&quot;,
-				&quot;&Igrave;&quot;, &quot;&#204;&quot;,
-				&quot;&Iacute;&quot;, &quot;&#205;&quot;,
-				&quot;&Icirc;&quot;,  &quot;&#206;&quot;,
-				&quot;&Iuml;&quot;,   &quot;&#207;&quot;,
-				&quot;&ETH;&quot;,    &quot;&#208;&quot;,
-				&quot;&Ntilde;&quot;, &quot;&#209;&quot;,
-				&quot;&Ograve;&quot;, &quot;&#210;&quot;,
-				&quot;&Oacute;&quot;, &quot;&#211;&quot;,
-				&quot;&Ocirc;&quot;,  &quot;&#212;&quot;,
-				&quot;&Otilde;&quot;, &quot;&#213;&quot;,
-				&quot;&Ouml;&quot;,   &quot;&#214;&quot;,
-				&quot;&times;&quot;,  &quot;&#215;&quot;,
-				&quot;&Oslash;&quot;, &quot;&#216;&quot;,
-				&quot;&Ugrave;&quot;, &quot;&#217;&quot;,
-				&quot;&Uacute;&quot;, &quot;&#218;&quot;,
-				&quot;&Ucirc;&quot;,  &quot;&#219;&quot;,
-				&quot;&Uuml;&quot;,   &quot;&#220;&quot;,
-				&quot;&Yacute;&quot;, &quot;&#221;&quot;,
-				&quot;&THORN;&quot;,  &quot;&#222;&quot;,
-				&quot;&szlig;&quot;,  &quot;&#223;&quot;,
-				&quot;&agrave;&quot;, &quot;&#224;&quot;,
-				&quot;&aacute;&quot;, &quot;&#225;&quot;,
-				&quot;&acirc;&quot;,  &quot;&#226;&quot;,
-				&quot;&atilde;&quot;, &quot;&#227;&quot;,
-				&quot;&auml;&quot;,   &quot;&#228;&quot;,
-				&quot;&aring;&quot;,  &quot;&#229;&quot;,
-				&quot;&aelig;&quot;,  &quot;&#230;&quot;,
-				&quot;&ccedil;&quot;, &quot;&#231;&quot;,
-				&quot;&egrave;&quot;, &quot;&#232;&quot;,
-				&quot;&eacute;&quot;, &quot;&#233;&quot;,
-				&quot;&ecirc;&quot;,  &quot;&#234;&quot;,
-				&quot;&euml;&quot;,   &quot;&#235;&quot;,
-				&quot;&igrave;&quot;, &quot;&#236;&quot;,
-				&quot;&iacute;&quot;, &quot;&#237;&quot;,
-				&quot;&icirc;&quot;,  &quot;&#238;&quot;,
-				&quot;&iuml;&quot;,   &quot;&#239;&quot;,
-				&quot;&eth;&quot;,    &quot;&#240;&quot;,
-				&quot;&ntilde;&quot;, &quot;&#241;&quot;,
-				&quot;&ograve;&quot;, &quot;&#242;&quot;,
-				&quot;&oacute;&quot;, &quot;&#243;&quot;,
-				&quot;&ocirc;&quot;,  &quot;&#244;&quot;,
-				&quot;&otilde;&quot;, &quot;&#245;&quot;,
-				&quot;&ouml;&quot;,   &quot;&#246;&quot;,
-				&quot;&divide;&quot;, &quot;&#247;&quot;,
-				&quot;&oslash;&quot;, &quot;&#248;&quot;,
-				&quot;&ugrave;&quot;, &quot;&#249;&quot;,
-				&quot;&uacute;&quot;, &quot;&#250;&quot;,
-				&quot;&ucirc;&quot;,  &quot;&#251;&quot;,
-				&quot;&uuml;&quot;,   &quot;&#252;&quot;,
-				&quot;&yacute;&quot;, &quot;&#253;&quot;,
-				&quot;&thorn;&quot;,  &quot;&#254;&quot;,
-				&quot;&yuml;&quot;,   &quot;&#255;&quot;,
-				
-				&quot;&#34;&quot;,  &quot;\&quot;&quot;,
-				&quot;&#38;&quot;,  &quot;&amp;&quot;,
-				&quot;&#60;&quot;,  &quot;&lt;&quot;,
-				&quot;&#62;&quot;,  &quot;&gt;&quot;,
-				&quot;&#160;&quot;, &quot; &quot;,
-				&quot;&#161;&quot;, &quot;&#161;&quot;,
-				&quot;&#162;&quot;, &quot;&#162;&quot;,
-				&quot;&#163;&quot;, &quot;&#163;&quot;,
-				&quot;&#164;&quot;, &quot;&#164;&quot;,
-				&quot;&#165;&quot;, &quot;&#165;&quot;,
-				&quot;&#166;&quot;, &quot;&#166;&quot;,
-				&quot;&#167;&quot;, &quot;&#167;&quot;,
-				&quot;&#168;&quot;, &quot;&#168;&quot;,
-				&quot;&#169;&quot;, &quot;&#169;&quot;,
-				&quot;&#170;&quot;, &quot;&#170;&quot;,
-				&quot;&#171;&quot;, &quot;&#171;&quot;,
-				&quot;&#172;&quot;, &quot;&#172;&quot;,
-				&quot;&#173;&quot;, &quot;&#173;&quot;,
-				&quot;&#174;&quot;, &quot;&#174;&quot;,
-				&quot;&#175;&quot;, &quot;&#175;&quot;,
-				&quot;&#176;&quot;, &quot;&#176;&quot;,
-				&quot;&#177;&quot;, &quot;&#177;&quot;,
-				&quot;&#178;&quot;, &quot;&#178;&quot;,
-				&quot;&#179;&quot;, &quot;&#179;&quot;,
-				&quot;&#180;&quot;, &quot;&#180;&quot;,
-				&quot;&#181;&quot;, &quot;&#181;&quot;,
-				&quot;&#182;&quot;, &quot;&#182;&quot;,
-				&quot;&#183;&quot;, &quot;&#183;&quot;,
-				&quot;&#184;&quot;, &quot;&#184;&quot;,
-				&quot;&#185;&quot;, &quot;&#185;&quot;,
-				&quot;&#186;&quot;, &quot;&#186;&quot;,
-				&quot;&#187;&quot;, &quot;&#187;&quot;,
-				&quot;&#188;&quot;, &quot;&#188;&quot;,
-				&quot;&#189;&quot;, &quot;&#189;&quot;,
-				&quot;&#190;&quot;, &quot;&#190;&quot;,
-				&quot;&#191;&quot;, &quot;&#191;&quot;,
-				&quot;&#192;&quot;, &quot;&#192;&quot;,
-				&quot;&#193;&quot;, &quot;&#193;&quot;,
-				&quot;&#194;&quot;, &quot;&#194;&quot;,
-				&quot;&#195;&quot;, &quot;&#195;&quot;,
-				&quot;&#196;&quot;, &quot;&#196;&quot;,
-				&quot;&#197;&quot;, &quot;&#197;&quot;,
-				&quot;&#198;&quot;, &quot;&#198;&quot;,
-				&quot;&#199;&quot;, &quot;&#199;&quot;,
-				&quot;&#200;&quot;, &quot;&#200;&quot;,
-				&quot;&#201;&quot;, &quot;&#201;&quot;,
-				&quot;&#202;&quot;, &quot;&#202;&quot;,
-				&quot;&#203;&quot;, &quot;&#203;&quot;,
-				&quot;&#204;&quot;, &quot;&#204;&quot;,
-				&quot;&#205;&quot;, &quot;&#205;&quot;,
-				&quot;&#206;&quot;, &quot;&#206;&quot;,
-				&quot;&#207;&quot;, &quot;&#207;&quot;,
-				&quot;&#208;&quot;, &quot;&#208;&quot;,
-				&quot;&#209;&quot;, &quot;&#209;&quot;,
-				&quot;&#210;&quot;, &quot;&#210;&quot;,
-				&quot;&#211;&quot;, &quot;&#211;&quot;,
-				&quot;&#212;&quot;, &quot;&#212;&quot;,
-				&quot;&#213;&quot;, &quot;&#213;&quot;,
-				&quot;&#214;&quot;, &quot;&#214;&quot;,
-				&quot;&#215;&quot;, &quot;&#215;&quot;,
-				&quot;&#216;&quot;, &quot;&#216;&quot;,
-				&quot;&#217;&quot;, &quot;&#217;&quot;,
-				&quot;&#218;&quot;, &quot;&#218;&quot;,
-				&quot;&#219;&quot;, &quot;&#219;&quot;,
-				&quot;&#220;&quot;, &quot;&#220;&quot;,
-				&quot;&#221;&quot;, &quot;&#221;&quot;,
-				&quot;&#222;&quot;, &quot;&#222;&quot;,
-				&quot;&#223;&quot;, &quot;&#223;&quot;,
-				&quot;&#224;&quot;, &quot;&#224;&quot;,
-				&quot;&#225;&quot;, &quot;&#225;&quot;,
-				&quot;&#226;&quot;, &quot;&#226;&quot;,
-				&quot;&#227;&quot;, &quot;&#227;&quot;,
-				&quot;&#228;&quot;, &quot;&#228;&quot;,
-				&quot;&#229;&quot;, &quot;&#229;&quot;,
-				&quot;&#230;&quot;, &quot;&#230;&quot;,
-				&quot;&#231;&quot;, &quot;&#231;&quot;,
-				&quot;&#232;&quot;, &quot;&#232;&quot;,
-				&quot;&#233;&quot;, &quot;&#233;&quot;,
-				&quot;&#234;&quot;, &quot;&#234;&quot;,
-				&quot;&#235;&quot;, &quot;&#235;&quot;,
-				&quot;&#236;&quot;, &quot;&#236;&quot;,
-				&quot;&#237;&quot;, &quot;&#237;&quot;,
-				&quot;&#238;&quot;, &quot;&#238;&quot;,
-				&quot;&#239;&quot;, &quot;&#239;&quot;,
-				&quot;&#240;&quot;, &quot;&#240;&quot;,
-				&quot;&#241;&quot;, &quot;&#241;&quot;,
-				&quot;&#242;&quot;, &quot;&#242;&quot;,
-				&quot;&#243;&quot;, &quot;&#243;&quot;,
-				&quot;&#244;&quot;, &quot;&#244;&quot;,
-				&quot;&#245;&quot;, &quot;&#245;&quot;,
-				&quot;&#246;&quot;, &quot;&#246;&quot;,
-				&quot;&#247;&quot;, &quot;&#247;&quot;,
-				&quot;&#248;&quot;, &quot;&#248;&quot;,
-				&quot;&#249;&quot;, &quot;&#249;&quot;,
-				&quot;&#250;&quot;, &quot;&#250;&quot;,
-				&quot;&#251;&quot;, &quot;&#251;&quot;,
-				&quot;&#252;&quot;, &quot;&#252;&quot;,
-				&quot;&#253;&quot;, &quot;&#253;&quot;,
-				&quot;&#254;&quot;, &quot;&#254;&quot;,
-				&quot;&#255;&quot;, &quot;&#255;&quot;,
-				&quot;&#8208;&quot;, &quot;-&quot;,
-				&quot;&#8209;&quot;, &quot;-&quot;,
-				&quot;&#8210;&quot;, &quot;-&quot;,
-				&quot;&#8211;&quot;, &quot;-&quot;,
-				&quot;&#8212;&quot;, &quot;-&quot;,
-				&quot;&#8213;&quot;, &quot;-&quot;,
-				&quot;&#8216;&quot;, &quot;'&quot;,
-				&quot;&#8217;&quot;, &quot;'&quot;,
-				&quot;&#8218;&quot;, &quot;'&quot;,
-				&quot;&#8219;&quot;, &quot;'&quot;,
-				&quot;&#8220;&quot;, &quot;\&quot;&quot;,
-				&quot;&#8221;&quot;, &quot;\&quot;&quot;,
-				&quot;&#8222;&quot;, &quot;\&quot;&quot;,
-				&quot;&#8223;&quot;, &quot;\&quot;&quot;,
-				&quot;&#8226;&quot;, &quot;&#149;&quot;,
-				&quot;&#8242;&quot;, &quot;'&quot;,
-				&quot;&#8243;&quot;, &quot;\&quot;&quot;
-				};
-		for (int i = 0; i &lt; mappingArray.length; i = i + 2) {
-			iso2htmlMappings.put( mappingArray[i], mappingArray[i+1]);
-		}
-	}
-		
-	
-	
-	/**
-	 * Converts a &lt;code&gt;String&lt;/code&gt; containing HTML entities to
-	 * a &lt;code&gt;String&lt;/code&gt; containing only ISO8859-1 characters.
-	 * 
-	 * Uses &lt;a href=&quot;<A HREF="http://www.ramsch.org/martin/uni/fmi-hp/iso8859-1.html">http://www.ramsch.org/martin/uni/fmi-hp/iso8859-1.html</A>&quot;&gt;ISO
-	 * 8859-1 table by Martin Ramsch&lt;/a&gt;.
-	 * 
-	 * @author &lt;a href=&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">ey at inweb.de</A>&quot;&gt;Christian Ey&lt;/a&gt;
-	 *
-	 * @version 1.0
-	 * @param htmlString The &lt;code&gt;String&lt;/code&gt; containing HTML
-	 * 	entities
-	 * @return A &lt;code&gt;String&lt;/code&gt; containing only ISO8859-1
-	 * 	characters
-	 */
-	public static String cleanback( String htmlString) {
-		int indexStart;
-		// return immediately if string is null or does not contain &amp;
-		if (htmlString != null &amp;&amp; (indexStart = htmlString.indexOf( ENTITY_START))&gt;=0) {
-			// copy everything from the beginning to entity start into buffer
-			StringBuffer isoBuffer = new StringBuffer( htmlString.substring( 0, indexStart));
-			while (indexStart &gt;= 0) {
-				int indexEnd = htmlString.indexOf( ENTITY_END, indexStart + 1);
-				if (indexEnd &gt;= 0) {
-					int alternativeStart = htmlString.indexOf( ENTITY_START, indexStart + 1);
-					if ((alternativeStart &gt; indexStart) &amp;&amp; (alternativeStart &lt; indexEnd)) {
-						// a second index start is found inbetween current index start
-						// and index end
-						
-						// flush the html string inbetween
-						isoBuffer.append( htmlString.substring( indexStart, alternativeStart));
-						
-						// use the second index start and loop again
-						indexStart = alternativeStart;
-					} else {
-						String entity = htmlString.substring( indexStart, indexEnd + 1);
-						String isoCharacter = (String) iso2htmlMappings.get( entity);
-						if (isoCharacter != null) {
-							// insert iso character instead of html entity
-							isoBuffer.append( isoCharacter);
-						} else {
-							// illegal entity detected, ignore gracefully
-							isoBuffer.append( entity);
-						}
-						indexStart = htmlString.indexOf( ENTITY_START, indexEnd + 1);
-						if (indexStart &gt;= 0) {
-							// another entity start detected, flush the html string inbetween
-							isoBuffer.append( htmlString.substring( indexEnd + 1, indexStart));
-						} else {
-							// no further entity start detected, flush rest of html string
-							isoBuffer.append( htmlString.substring( indexEnd + 1));
-						}
-					}
-				} else {
-					// entity start without matching entity end detected, ignore gracefully
-					isoBuffer.append( htmlString.substring( indexStart));
-					break;
-				}
-			}
-			return isoBuffer.toString();
-		} else {
-			// nothing to do
-			return htmlString;
-		}
-	}
-
-	/**
-     * convert a single char to its equivalent HTML entity. Ordinary chars are
-     * not changed. 160 -&gt; &nbsp;
-     *
-     * @param c Char to convert
-     *
-     * @return equivalent string eg. &amp;, null means leave char as is.
-     */
-    protected static String charToEntity( char c )
-        {
-        switch ( c ) {
-	        case 34 : return &quot;&quot;&quot;;
-	        case 38 : return &quot;&amp;&quot;;
-	        case 60 : return &quot;&lt;&quot;;
-	        case 62 : return &quot;&gt;&quot;;
-            default :
-                if ( c &lt; 127 ) {
-                    // leave alone as equivalent string.
-                    return null;
-                    // faster than String.valueOf( c ).intern();
-                } else {
-                    // use the &amp;#nnn; form
-                    return &quot;&amp;#&quot; + Integer.toString( c ) + &quot;;&quot;;
-                }
-            } // end switch
-        } // end charToEntity
-
-    /**
-     * Converts text to HTML by quoting dangerous characters. Text must not
-     * already contain entities. e.g. &quot; ==&gt; &quot; &lt; ==&gt; &lt; ordinary text
-     * passes unchanged. Does not convert space to &nbsp;
-     *
-     * @param text raw text to be processed. Must not be null.
-     *
-     * @return translated text, or null if input is null.
-     */
-    public static String clean( String text ) {
-        if ( text == null ) return null;
-        int originalTextLength = text.length();
-        StringBuffer sb = new StringBuffer( originalTextLength * 110 / 100 );
-        int charsToAppend = 0;
-        for ( int i = 0; i &lt; originalTextLength; i++ ) {
-            char c = text.charAt( i );
-            String entity = charToEntity( c );
-            if ( entity == null ) {
-                // we could sb.append( c ), but that would be slower
-                // than saving them up for a big append.
-                charsToAppend++;
-            } else {
-                if ( charsToAppend != 0 ) {
-                    sb.append( text.substring( i - charsToAppend, i ) );
-                    charsToAppend = 0;
-                }
-                sb.append( entity );
-            }
-        } // end for
-        // append chars to the right of the last entity.
-        if ( charsToAppend != 0 ) {
-            sb.append( text.substring( originalTextLength - charsToAppend,
-                                       originalTextLength ) );
-        }
-
-        // if result is not longer, we did not do anything. Save RAM.
-        return ( sb.length() == originalTextLength ) ? text : sb.toString();
-    } // end insertEntities
-	
-	
-	public static String cleanGPX(String str){
-		String dummy = new String();
-		
-		dummy = STRreplace.replace(str, &quot;&amp;&quot;,&quot;&amp;&quot;);
-		dummy = STRreplace.replace(dummy, &quot;&lt;&quot;, &quot;&lt;&quot;);
-		dummy = STRreplace.replace(dummy, &quot;&gt;&quot;, &quot;&gt;&quot;);
-		//dummy = replace(dummy, &quot;&nbsp;&quot;, &quot;&amp;nbsp;&quot;);
-		dummy = STRreplace.replace(dummy, &quot;\&quot;&quot;, &quot;&quot;&quot;);
-		dummy = STRreplace.replace(dummy, &quot;'&quot;,&quot;&apos;&quot;);
-		dummy = STRreplace.replace(dummy, &quot;]]&gt;&quot;,&quot;]] &gt;&quot;);
-
-		return dummy;
-	}
-
-	/**
-	 * Converts a data string to something that is safe to use inside
-	 * an XML file (like prefs.xml) - entities like &amp; are *NOT*
-	 * valid XML unless declared specially, so we must use the numerical
-	 * values here.
-	 *
-	 * @param src (String) raw text to be processed
-	 *
-	 * @return (String) translated text, or null if input is null
-	 */
-	public static String strxmlencode(boolean src) {
-		/* bools are always safe */
-		return (src ? &quot;true&quot; : &quot;false&quot;);
-	}
-	public static String strxmlencode(int src) {
-		/* numbers are always safe */
-		return (Integer.toString(src));
-	}
-	public static String strxmlencode(String src) {
-		int i, slen;
-		char tmp[];
-		StringBuffer dst;
-
-		if (src == null)
-			return (null);
-
-		slen = src.length();
-		dst = new StringBuffer(slen);
-		tmp = new char[slen];
-		src.getChars(0, slen, tmp, 0);
-		for (i = 0; i &lt; slen; ++i)
-			if (tmp[i] == '&amp;' || tmp[i] == '&lt;' ||
-			    tmp[i] == '&gt;' || tmp[i] &gt; 0x7E) {
-				dst.append(&quot;&amp;#&quot;);
-				dst.append((int)tmp[i]);
-				dst.append(';');
-			} else
-				dst.append(tmp[i]);
-		return (dst.toString());
-	}
-
-	/**
-	 * Converts a string that is safe to use inside an XML file (like
-	 * prefs.xml) back to a data string - entities like &amp; are *NOT*
-	 * valid XML unless declared specially, so we must use the numerical
-	 * values here. We also try to decode non-standard entities.
-	 *
-	 * @param src (String) translated text to be processed
-	 *
-	 * @return (String) raw text, or null if input is null
-	 */
-	public static String strxmldecode(String src) {
-		int i, j, slen;
-		char ch, tmp[];
-		StringBuffer dst;
-		boolean isinval;
-
-		if (src == null)
-			return (null);
-
-		slen = src.length();
-		dst = new StringBuffer(slen);
-		tmp = new char[slen];
-		src.getChars(0, slen, tmp, 0);
-		i = 0;
-		while (i &lt; slen)
-			if (tmp[i] == '&amp;') {
-				/* first scan if we have a trailing ; */
-				if (src.indexOf(';', i) == -1) {
-					/* no - ignore and proceed */
-					i++;
-					dst.append(0xFFFD);
-				} else if (tmp[++i] == '#') {
-					/* yes - numerical value? */
-					i++;
-					ch = 0;
-					isinval = false;
-					if (tmp[i] == 'x' || tmp[i] == 'X') {
-						/* hexadecimal numeric */
-						i++;
-						while ((j = tmp[i++]) != ';') {
-							ch *= 16;
-							if (j &lt; 0x30)
-								isinval = true;
-							else if (j &lt; 0x3A)
-								ch += j - 0x30;
-							else if (j &lt; 0x41)
-								isinval = true;
-							else if (j &lt; 0x47)
-								ch += j - 0x37;
-							else if (j &lt; 0x61)
-								isinval = true;
-							else if (j &lt; 0x67)
-								ch += j - 0x57;
-							else
-								isinval = true;
-						}
-					} else
-						/* decimal numeric */
-						while ((j = tmp[i++]) != ';') {
-							ch *= 10;
-							if (j &lt; 0x30)
-								isinval = true;
-							else if (j &lt; 0x3A)
-								ch += j - 0x30;
-							else
-								isinval = true;
-						}
-					if (isinval)
-						ch = 0xFFFD;
-					dst.append(ch);
-				} else {
-					/* yes - string value */
-					StringBuffer tconv = new StringBuffer(&quot;#&quot;);
-					String tc;
-
-					do {
-						tconv.append(tmp[i]);
-					} while (tmp[i++] != ';');
-
-					if ((tc = (String)iso2htmlMappings.get(tconv)) == null)
-						/* invalid entity, just retain it */
-						dst.append(tconv);
-					else
-						dst.append(tc);
-				}
-			} else
-				dst.append(tmp[i++]);
-		return (dst.toString());
-	}
-}

Copied: experiments/engywuck/hist-test/src/cachewolf/utils/Common.java (from rev 1559, experiments/engywuck/hist-test/src/cachewolf/Common.java)


Property changes on: experiments/engywuck/hist-test/src/cachewolf/utils/Common.java
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: experiments/engywuck/hist-test/src/cachewolf/utils/DateFormat.java (from rev 1559, experiments/engywuck/hist-test/src/cachewolf/DateFormat.java)


Property changes on: experiments/engywuck/hist-test/src/cachewolf/utils/DateFormat.java
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: experiments/engywuck/hist-test/src/cachewolf/utils/Extractor.java (from rev 1559, experiments/engywuck/hist-test/src/cachewolf/Extractor.java)


Property changes on: experiments/engywuck/hist-test/src/cachewolf/utils/Extractor.java
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: experiments/engywuck/hist-test/src/cachewolf/utils/Matrix.java (from rev 1559, experiments/engywuck/hist-test/src/cachewolf/Matrix.java)


Property changes on: experiments/engywuck/hist-test/src/cachewolf/utils/Matrix.java
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: experiments/engywuck/hist-test/src/cachewolf/utils/ParseLatLon.java (from rev 1559, experiments/engywuck/hist-test/src/cachewolf/ParseLatLon.java)


Property changes on: experiments/engywuck/hist-test/src/cachewolf/utils/ParseLatLon.java
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: experiments/engywuck/hist-test/src/cachewolf/utils/STRreplace.java (from rev 1559, experiments/engywuck/hist-test/src/cachewolf/STRreplace.java)


Property changes on: experiments/engywuck/hist-test/src/cachewolf/utils/STRreplace.java
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: experiments/engywuck/hist-test/src/cachewolf/utils/SafeXML.java (from rev 1559, experiments/engywuck/hist-test/src/cachewolf/SafeXML.java)


Property changes on: experiments/engywuck/hist-test/src/cachewolf/utils/SafeXML.java
___________________________________________________________________
Name: svn:mergeinfo
   + 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001456.html">[Cachewolf-svn] r1562 - in experiments/engywuck/hist-test/lib: .	lib-folder/HTML lib-folder/HTML/Tmpl	lib-folder/HTML/Tmpl/Element lib-folder/HTML/Tmpl/Parsers	lib-folder/com/bbn/openmap lib-folder/com/bbn/openmap/proj	lib-folder/com/bbn/openmap/proj/coords	lib-folder/com/bbn/openmap/util lib-folder/com/stevesoft/eve_pat	lib-folder/com/stevesoft/eve_pat/wrap lib-folder/ewesoft/xml	lib-folder/ewesoft/xml/sax
</A></li>
	<LI>Next message: <A HREF="001458.html">[Cachewolf-svn] r1564 - in	experiments/engywuck/hist-test/src/cachewolf: . imp utils
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1457">[ date ]</a>
              <a href="thread.html#1457">[ thread ]</a>
              <a href="subject.html#1457">[ subject ]</a>
              <a href="author.html#1457">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">More information about the Cachewolf-svn
mailing list</a><br>
</body></html>
