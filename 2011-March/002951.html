<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Cachewolf-svn] r2960 - in trunk/src/CacheWolf: imp navi	navi/touchControls
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cachewolf-svn/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r2960%20-%20in%20trunk/src/CacheWolf%3A%20imp%20navi%0A%09navi/touchControls&In-Reply-To=%3C20110319154534.DE8444801E2%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002950.html">
   <LINK REL="Next"  HREF="002952.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cachewolf-svn] r2960 - in trunk/src/CacheWolf: imp navi	navi/touchControls</H1>
    <B>apreisser at mail.berlios.de</B> 
    <A HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r2960%20-%20in%20trunk/src/CacheWolf%3A%20imp%20navi%0A%09navi/touchControls&In-Reply-To=%3C20110319154534.DE8444801E2%40sheep.berlios.de%3E"
       TITLE="[Cachewolf-svn] r2960 - in trunk/src/CacheWolf: imp navi	navi/touchControls">apreisser at mail.berlios.de
       </A><BR>
    <I>Sat Mar 19 04:45:34 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002950.html">[Cachewolf-svn] r2959 - trunk/src/CacheWolf/exp
</A></li>
        <LI>Next message: <A HREF="002952.html">[Cachewolf-svn] r2961 - trunk/res_noewe/webmapservices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2951">[ date ]</a>
              <a href="thread.html#2951">[ thread ]</a>
              <a href="subject.html#2951">[ subject ]</a>
              <a href="author.html#2951">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: apreisser
Date: 2011-03-19 16:45:34 +0100 (Sat, 19 Mar 2011)
New Revision: 2960

Modified:
   trunk/src/CacheWolf/imp/SpiderGC.java
   trunk/src/CacheWolf/navi/Area.java
   trunk/src/CacheWolf/navi/AreaList.java
   trunk/src/CacheWolf/navi/MapInfoObject.java
   trunk/src/CacheWolf/navi/MapLoader.java
   trunk/src/CacheWolf/navi/MapLoaderGui.java
   trunk/src/CacheWolf/navi/MapsList.java
   trunk/src/CacheWolf/navi/MovingMap.java
   trunk/src/CacheWolf/navi/TransformCoordinates.java
   trunk/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java
Log:
Typo in fieldname corrected

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2011-03-15 08:11:00 UTC (rev 2959)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2011-03-19 15:45:34 UTC (rev 2960)
@@ -418,7 +418,7 @@
 			if (nextPos != null) {
 				sq = getSquare(startPos, lateralDistance);
 				getCaches(sq.topleft.latDec, sq.topleft.lonDec,
-						sq.buttomright.latDec, sq.buttomright.lonDec, complete);
+						sq.bottomright.latDec, sq.bottomright.lonDec, complete);
 				// pref.log(&quot;next WP = &quot; + startPos.toString(), null);
 
 				double degrees = startPos.getBearing(nextPos);
@@ -431,7 +431,7 @@
 					origin = nextCheckPoint;
 					sq = getSquare(origin, lateralDistance);
 					getCaches(sq.topleft.latDec, sq.topleft.lonDec,
-							sq.buttomright.latDec, sq.buttomright.lonDec, complete);
+							sq.bottomright.latDec, sq.bottomright.lonDec, complete);
 					// pref.log(&quot;next CP = &quot; + origin.toString(), null);
 					if (infB.isClosed) {
 						break;
@@ -444,8 +444,8 @@
 			}
 		}
 		sq = getSquare(startPos, lateralDistance);
-		getCaches(sq.topleft.latDec, sq.topleft.lonDec, sq.buttomright.latDec,
-				sq.buttomright.lonDec, complete);
+		getCaches(sq.topleft.latDec, sq.topleft.lonDec, sq.bottomright.latDec,
+				sq.bottomright.lonDec, complete);
 		// pref.log(&quot;last WP = &quot; + startPos.toString(), null);
 		if (infB.isClosed) {
 			Vm.showWait(false);
@@ -534,10 +534,10 @@
 		ret.topleft.shift(halfSideLength, north);
 		ret.topleft.shift(halfSideLength, west);
 
-		ret.buttomright.latDec = centre.latDec;
-		ret.buttomright.lonDec = centre.lonDec;
-		ret.buttomright.shift(halfSideLength, south);
-		ret.buttomright.shift(halfSideLength, east);
+		ret.bottomright.latDec = centre.latDec;
+		ret.bottomright.lonDec = centre.lonDec;
+		ret.bottomright.shift(halfSideLength, south);
+		ret.bottomright.shift(halfSideLength, east);
 
 		return ret;
 	}
@@ -581,8 +581,8 @@
 		num_added = 0;
 
 		Area sq = getSquare(origin, halfSideLength);
-		getCaches(sq.topleft.latDec, sq.topleft.lonDec, sq.buttomright.latDec,
-				sq.buttomright.lonDec, false);
+		getCaches(sq.topleft.latDec, sq.topleft.lonDec, sq.bottomright.latDec,
+				sq.bottomright.lonDec, false);
 
 		if (!infB.isClosed)
 			infB.close(0);

Modified: trunk/src/CacheWolf/navi/Area.java
===================================================================
--- trunk/src/CacheWolf/navi/Area.java	2011-03-15 08:11:00 UTC (rev 2959)
+++ trunk/src/CacheWolf/navi/Area.java	2011-03-19 15:45:34 UTC (rev 2960)
@@ -31,37 +31,37 @@
 	 public final static int NOT_ON_EDGE = -1;
 	 public final static int AT_TOP_EDGE = 1;
 	 public final static int AT_RIGHT_EDGE = 2;
-	 public final static int AT_BUTTOM_EDGE = 3;
+	 public final static int AT_BOTTOM_EDGE = 3;
 	 public final static int AT_LEFT_EDGE = 4;
 	 public static double edgeTolerance = 3 * 360/40000000; // approx 3m will be seen as the same
 */
 	 public CWPoint topleft;
-	 public CWPoint buttomright;
+	 public CWPoint bottomright;
 	 
 	 public Area() {
 		 topleft = new CWPoint();
-		 buttomright = new CWPoint();
+		 bottomright = new CWPoint();
 	 }
 
 	 public Area(TrackPoint tl, TrackPoint br){
 		 topleft = new CWPoint(tl);
-		 buttomright = new CWPoint(br);
+		 bottomright = new CWPoint(br);
 	 }
 	 
 	 public Area(CWPoint tl, CWPoint br) {
 		 topleft = tl;
-		 buttomright = br;
+		 bottomright = br;
 	 }
 
 	 public final boolean isInBound(TrackPoint p) {
 		 if (topleft.latDec &gt;= p.latDec &amp;&amp; topleft.lonDec &lt;= p.lonDec 
-				 &amp;&amp; buttomright.latDec &lt;= p.latDec &amp;&amp; buttomright.lonDec &gt;= p.lonDec) return true;
+				 &amp;&amp; bottomright.latDec &lt;= p.latDec &amp;&amp; bottomright.lonDec &gt;= p.lonDec) return true;
 		 else return false;
 	 }
 		
 	 public final boolean isInBound(double lat, double lon) {
 		 if (topleft.latDec &gt;= lat &amp;&amp; topleft.lonDec &lt;= lon
-				 &amp;&amp; buttomright.latDec &lt;= lat &amp;&amp; buttomright.lonDec &gt;= lon) return true;
+				 &amp;&amp; bottomright.latDec &lt;= lat &amp;&amp; bottomright.lonDec &gt;= lon) return true;
 		 else return false;
 	 }
 
@@ -71,24 +71,24 @@
 	 * @return
 	 */
 	 public final boolean isInBound(Area a) {
-		 return (isInBound(a.topleft) &amp;&amp; isInBound(a.buttomright));
+		 return (isInBound(a.topleft) &amp;&amp; isInBound(a.bottomright));
 	 }
 	 
 	 
 	 public final boolean isOverlapping(Area a) {
 		 return ! ( // test if not overlapping and invert the result, see <A HREF="http://www.geoclub.de/viewtopic.php?f=40&amp;t=38364&amp;p=607033#p607033">http://www.geoclub.de/viewtopic.php?f=40&amp;t=38364&amp;p=607033#p607033</A>
-				    this.buttomright.latDec &gt; a.topleft.latDec
-				 || this.topleft.latDec     &lt; a.buttomright.latDec
-				 || this.buttomright.lonDec &lt; a.topleft.lonDec
-				 || this.topleft.lonDec     &gt; a.buttomright.lonDec);
+				    this.bottomright.latDec &gt; a.topleft.latDec
+				 || this.topleft.latDec     &lt; a.bottomright.latDec
+				 || this.bottomright.lonDec &lt; a.topleft.lonDec
+				 || this.topleft.lonDec     &gt; a.bottomright.lonDec);
 	 }
 	 
 	 /* not used at the moment
 	  public boolean equals(Area a) {
 		 if(java.lang.Math.abs(topleft.latDec - a.topleft.latDec) &lt; edgeTolerance 
 				 &amp;&amp; java.lang.Math.abs(topleft.lonDec - a.topleft.lonDec) &lt; edgeTolerance
-				 &amp;&amp; java.lang.Math.abs(buttomright.latDec - a.buttomright.latDec) &lt; edgeTolerance
-				 &amp;&amp; java.lang.Math.abs(buttomright.lonDec - a.buttomright.lonDec) &lt; edgeTolerance )
+				 &amp;&amp; java.lang.Math.abs(bottomright.latDec - a.bottomright.latDec) &lt; edgeTolerance
+				 &amp;&amp; java.lang.Math.abs(bottomright.lonDec - a.bottomright.lonDec) &lt; edgeTolerance )
 			 return true;
 		 else return false;
 	 }
@@ -98,19 +98,19 @@
 	 public int getEdge(CWPoint tl, CWPoint br) {
 		 if (java.lang.Math.abs(topleft.latDec - br.latDec) &lt; edgeTolerance 
 				 &amp;&amp; java.lang.Math.abs(topleft.lonDec - tl.lonDec) &lt; edgeTolerance 
-				 &amp;&amp; java.lang.Math.abs(buttomright.lonDec - br.lonDec) &lt; edgeTolerance)
+				 &amp;&amp; java.lang.Math.abs(bottomright.lonDec - br.lonDec) &lt; edgeTolerance)
 			 return AT_TOP_EDGE;
 			 if (java.lang.Math.abs(topleft.latDec - tl.latDec) &lt; edgeTolerance 
-					 &amp;&amp; java.lang.Math.abs(buttomright.lonDec - tl.lonDec) &lt; edgeTolerance 
-					 &amp;&amp; java.lang.Math.abs(buttomright.latDec - br.latDec) &lt; edgeTolerance)
+					 &amp;&amp; java.lang.Math.abs(bottomright.lonDec - tl.lonDec) &lt; edgeTolerance 
+					 &amp;&amp; java.lang.Math.abs(bottomright.latDec - br.latDec) &lt; edgeTolerance)
 				 return AT_RIGHT_EDGE;
 			 if (java.lang.Math.abs(topleft.lonDec - tl.lonDec) &lt; edgeTolerance 
-					 &amp;&amp; java.lang.Math.abs(buttomright.latDec - tl.latDec) &lt; edgeTolerance 
-					 &amp;&amp; java.lang.Math.abs(buttomright.lonDec - br.lonDec) &lt; edgeTolerance)
-				 return AT_BUTTOM_EDGE;
+					 &amp;&amp; java.lang.Math.abs(bottomright.latDec - tl.latDec) &lt; edgeTolerance 
+					 &amp;&amp; java.lang.Math.abs(bottomright.lonDec - br.lonDec) &lt; edgeTolerance)
+				 return AT_BOTTOM_EDGE;
 			 if (java.lang.Math.abs(topleft.latDec - tl.latDec) &lt; edgeTolerance 
 					 &amp;&amp; java.lang.Math.abs(topleft.lonDec - br.lonDec) &lt; edgeTolerance 
-					 &amp;&amp; java.lang.Math.abs(buttomright.latDec - br.latDec) &lt; edgeTolerance)
+					 &amp;&amp; java.lang.Math.abs(bottomright.latDec - br.latDec) &lt; edgeTolerance)
 				 return AT_LEFT_EDGE;
 			 return NOT_ON_EDGE;
 	 }
@@ -122,7 +122,7 @@
 	  */
 	 public final String getEasyFindString() {
 		 String ul = getEasyFindString(topleft, 30);
-		 String br = getEasyFindString(buttomright, 30);
+		 String br = getEasyFindString(bottomright, 30);
 		 int i;
 		 for (i=0; i&lt;br.length(); i++ ) {
 			 if (ul.charAt(i) != br.charAt(i)) break;
@@ -158,10 +158,10 @@
 	 }
 	 
 	 public String toString() {
-		 return topleft.toString() + &quot;, &quot; + buttomright.toString();
+		 return topleft.toString() + &quot;, &quot; + bottomright.toString();
 	 }
 	 
 	 public final CWPoint getCenter() {
-		 return new CWPoint((topleft.latDec + buttomright.latDec)/2, (topleft.lonDec + buttomright.lonDec)/2);
+		 return new CWPoint((topleft.latDec + bottomright.latDec)/2, (topleft.lonDec + bottomright.lonDec)/2);
 	 }
 }

Modified: trunk/src/CacheWolf/navi/AreaList.java
===================================================================
--- trunk/src/CacheWolf/navi/AreaList.java	2011-03-15 08:11:00 UTC (rev 2959)
+++ trunk/src/CacheWolf/navi/AreaList.java	2011-03-19 15:45:34 UTC (rev 2960)
@@ -38,28 +38,28 @@
 /*
 	 public AreaList(int s) {super(s);}
 
-	 public void addArea(CWPoint topleft, CWPoint buttomright) {
+	 public void addArea(CWPoint topleft, CWPoint bottomright) {
 		 Area tp = getArea(topleft);
-		 if (tp != null &amp;&amp; tp.isInBound(buttomright)) return; // area already completly in list
-		 int edge = tp.getEdge(topleft, buttomright);
+		 if (tp != null &amp;&amp; tp.isInBound(bottomright)) return; // area already completly in list
+		 int edge = tp.getEdge(topleft, bottomright);
 		 switch (edge) {
 		 case Area.AT_TOP_EDGE: tp.topleft.latDec = topleft.latDec; break;
-		 case Area.AT_RIGHT_EDGE: tp.buttomright.lonDec = buttomright.lonDec; break;
-		 case Area.AT_BUTTOM_EDGE: tp.buttomright.latDec = buttomright.latDec; break;
+		 case Area.AT_RIGHT_EDGE: tp.bottomright.lonDec = bottomright.lonDec; break;
+		 case Area.AT_BOTTOM_EDGE: tp.bottomright.latDec = bottomright.latDec; break;
 		 case Area.AT_LEFT_EDGE: tp.topleft.lonDec = topleft.lonDec; break;
-		 case Area.NOT_ON_EDGE: addAreaUnconditionally(new Area(topleft, buttomright));
+		 case Area.NOT_ON_EDGE: addAreaUnconditionally(new Area(topleft, bottomright));
 		 }
 	 }
 
-	 public boolean AreaIsCovered(CWPoint topleft, CWPoint buttomright) {
+	 public boolean AreaIsCovered(CWPoint topleft, CWPoint bottomright) {
 		 Area tp = getArea(topleft);
-		 if (tp != null &amp;&amp; tp.isInBound(buttomright)) return true; // area already completly in list
+		 if (tp != null &amp;&amp; tp.isInBound(bottomright)) return true; // area already completly in list
 		 else return false;
 
 	 }
 
 	 public void addArea(Area a) {
-		 addArea(a.topleft, a.buttomright);
+		 addArea(a.topleft, a.bottomright);
 	 }
 
 	 public static AreaList joinAreas(AreaList al){

Modified: trunk/src/CacheWolf/navi/MapInfoObject.java
===================================================================
--- trunk/src/CacheWolf/navi/MapInfoObject.java	2011-03-15 08:11:00 UTC (rev 2959)
+++ trunk/src/CacheWolf/navi/MapInfoObject.java	2011-03-19 15:45:34 UTC (rev 2960)
@@ -83,7 +83,7 @@
 	}
 
 	public MapInfoObject(MapInfoObject map) {
-		super (map.topleft, map.buttomright);
+		super (map.topleft, map.bottomright);
 		mapName = map.mapName;
 		affine[0] = map.affine[0];
 		affine[1] = map.affine[1];
@@ -115,8 +115,8 @@
 		affine[3]=0; //y2lon
 		topleft.latDec=1; //top
 		topleft.lonDec=0; //left
-		buttomright.latDec = 0; //buttom
-		buttomright.lonDec = 1; //right
+		bottomright.latDec = 0; //bottom
+		bottomright.lonDec = 1; //right
 		affineTopleft.set(topleft);
 		doCalculations();
 		origAffineUpperLeft = new CWPoint(affineTopleft);
@@ -140,8 +140,8 @@
 		topleft.latDec=center.latDec + hight / 2 *pixel2deg; //top
 		topleft.lonDec=center.lonDec - width / 2 *pixel2deghorizontal; //left
 		affineTopleft.set(topleft);
-		buttomright.latDec = center.latDec - hight / 2 *pixel2deg; //buttom
-		buttomright.lonDec = center.lonDec + width / 2 *pixel2deghorizontal; //right
+		bottomright.latDec = center.latDec - hight / 2 *pixel2deg; //bottom
+		bottomright.lonDec = center.lonDec + width / 2 *pixel2deghorizontal; //right
 		fileNameWFL = name;
 		origAffineUpperLeft = new CWPoint(affineTopleft);
 		doCalculations();
@@ -198,9 +198,9 @@
 			line = in.readLine();
 			affineTopleft.lonDec = Common.parseDoubleException(line);
 			line = in.readLine();
-			buttomright.latDec = Common.parseDoubleException(line);
+			bottomright.latDec = Common.parseDoubleException(line);
 			line = in.readLine();
-			buttomright.lonDec = Common.parseDoubleException(line);
+			bottomright.lonDec = Common.parseDoubleException(line);
 			line = in.readLine(); // readLine returns null, if End of File reached
 			if (line != null) coordTrans = Common.parseInt(line);
 			else coordTrans = 0;
@@ -208,7 +208,7 @@
 //			fileName = &quot;&quot;; //mapsPath + thisMap + &quot;.png&quot;;
 			mapName = thisMap;
 			in.close();
-			if( !buttomright.isValid() ) {
+			if( !bottomright.isValid() ) {
 				affine[0] = 0; affine[1] = 0; affine[2] = 0; affine[3] = 0; 
 				topleft.makeInvalid();
 				throw (new IOException(MyLocale.getMsg(4301, &quot;Lat/Lon out of range while reading &quot;)+mapsPath + thisMap + &quot;.wfl&quot;));
@@ -279,7 +279,7 @@
 		affine[3] = beta.matrix[2][0];
 		affineTopleft.lonDec = beta.matrix[0][0];
 		coordTrans = epsg_code;
-		buttomright = calcLatLon(imageWidth, imageHeight);
+		bottomright = calcLatLon(imageWidth, imageHeight);
 		doCalculations();
 	}
 
@@ -291,8 +291,8 @@
 	private void doCalculations() throws ArithmeticException {
 		try {
 			topleft.set(calcLatLon(0, 0));
-			center.set((buttomright.latDec + topleft.latDec)/2,(buttomright.lonDec + topleft.lonDec)/2);
-			sizeKm = java.lang.Math.abs((float)center.getDistance(buttomright)) *2;
+			center.set((bottomright.latDec + topleft.latDec)/2,(bottomright.lonDec + topleft.lonDec)/2);
+			sizeKm = java.lang.Math.abs((float)center.getDistance(bottomright)) *2;
 
 			//calculate reverse affine
 			double nenner=(-affine[1]*affine[2]+affine[0]*affine[3]);
@@ -338,8 +338,8 @@
 		towriteB.append(Convert.toString(affine[3])).append(&quot;\n&quot;);
 		towriteB.append(Convert.toString(affineTopleft.latDec)).append(&quot;\n&quot;);
 		towriteB.append(Convert.toString(affineTopleft.lonDec)).append(&quot;\n&quot;);
-		towriteB.append(Convert.toString(buttomright.latDec)).append(&quot;\n&quot;);
-		towriteB.append(Convert.toString(buttomright.lonDec)).append(&quot;\n&quot;);
+		towriteB.append(Convert.toString(bottomright.latDec)).append(&quot;\n&quot;);
+		towriteB.append(Convert.toString(bottomright.lonDec)).append(&quot;\n&quot;);
 		towriteB.append(((coordTrans == 0 || coordTrans == TransformCoordinates.EPSG_WGS84) ? &quot;&quot; : Convert.toString(coordTrans)+&quot;\n&quot;));
 		String towrite = towriteB.toString();
 		if (digSep.equals(&quot;,&quot;)) towrite=towrite.replace(',', '.');

Modified: trunk/src/CacheWolf/navi/MapLoader.java
===================================================================
--- trunk/src/CacheWolf/navi/MapLoader.java	2011-03-15 08:11:00 UTC (rev 2959)
+++ trunk/src/CacheWolf/navi/MapLoader.java	2011-03-19 15:45:34 UTC (rev 2960)
@@ -78,7 +78,7 @@
 	double latinc;
 	double loninc;
 	CWPoint topleft;
-	CWPoint buttomright;
+	CWPoint bottomright;
 	Point tilesSize;
 	float tileScale;
 	boolean fetchOnlyMapWithCache=false;
@@ -173,24 +173,24 @@
 		double metersPerLat = (1000*(new CWPoint(0,0)).getDistance(new CWPoint(1,0)));
 		double metersPerLon = metersPerLat * java.lang.Math.cos(center.latDec/180*java.lang.Math.PI);
 		topleft = new CWPoint(center.latDec + (radius / metersPerLat), center.lonDec - (radius / metersPerLon));
-		buttomright = new CWPoint(center.latDec - (radius / metersPerLat), center.lonDec + (radius / metersPerLon));
+		bottomright = new CWPoint(center.latDec - (radius / metersPerLat), center.lonDec + (radius / metersPerLon));
 
-		this.setTiles(topleft, buttomright, scale, size, overlapping);
+		this.setTiles(topleft, bottomright, scale, size, overlapping);
 	}
 
-	public void setTiles(CWPoint toplefti, CWPoint buttomrighti, float scale, Point size, int overlapping) {
-		//if (toplefti.latDec &lt;= buttomrighti.latDec || toplefti.lonDec &gt;= toplefti.lonDec) throw new IllegalArgumentException(&quot;topleft must be left and above buttom right&quot;);
+	public void setTiles(CWPoint toplefti, CWPoint bottomrighti, float scale, Point size, int overlapping) {
+		//if (toplefti.latDec &lt;= bottomrighti.latDec || toplefti.lonDec &gt;= toplefti.lonDec) throw new IllegalArgumentException(&quot;topleft must be left and above bottom right&quot;);
 		topleft = new CWPoint(toplefti);
-		buttomright = new CWPoint(buttomrighti);
+		bottomright = new CWPoint(bottomrighti);
 		double metersPerLat = (1000*(new CWPoint(0,0)).getDistance(new CWPoint(1,0)));
-		double metersPerLon = metersPerLat * java.lang.Math.cos((toplefti.latDec + buttomright.latDec)/2/180*java.lang.Math.PI);
+		double metersPerLon = metersPerLat * java.lang.Math.cos((toplefti.latDec + bottomright.latDec)/2/180*java.lang.Math.PI);
 		double metersperpixel = currentOnlineMapService.getMetersPerPixel(scale);
 		double pixelsPerLat = metersPerLat / metersperpixel;
 		double pixelsPerLon = metersPerLon / metersperpixel;
 
 		//over all pixelsize without borders
-		double pixelsY = (topleft.latDec - buttomright.latDec) * pixelsPerLat;
-		double pixelsX = -(topleft.lonDec - buttomright.lonDec) * pixelsPerLon ;
+		double pixelsY = (topleft.latDec - bottomright.latDec) * pixelsPerLat;
+		double pixelsX = -(topleft.lonDec - bottomright.lonDec) * pixelsPerLon ;
 
 		//border sizes around given area and overlapping between tiles
 		//int borderX = (int) java.lang.Math.round((float)size.x * (overlapping - 1.0));
@@ -295,8 +295,8 @@
 				}
 				else {
 					Area maparea = wms.CenterScaleToArea(center, scale, pixelsize);
-					CWPoint buttomleft = new CWPoint (maparea.buttomright.latDec, maparea.topleft.lonDec);
-					CWPoint topright = new CWPoint (maparea.topleft.latDec, maparea.buttomright.lonDec);
+					CWPoint bottomleft = new CWPoint (maparea.bottomright.latDec, maparea.topleft.lonDec);
+					CWPoint topright = new CWPoint (maparea.topleft.latDec, maparea.bottomright.lonDec);
 
 					String mapProgramPath = wms.versionUrlPart+&quot;/&quot;;
 					mapProgramPath = mapProgramPath.replace('/', FileBase.separatorChar);
@@ -316,7 +316,7 @@
 							&quot; \&quot;&quot;+FileBase.getProgramDirectory().replace('/',File.separatorChar)+&quot;\\&quot;+wms.serviceTypeUrlPart+&quot;\&quot;&quot;+
 							&quot; \&quot;&quot;+path.replace('/', File.separatorChar)+imagename+imagetype+&quot;\&quot;&quot;+
 							&quot; -mb &quot; +
-							buttomleft.toString(TransformCoordinates.LAT_LON).replace(',',' ') + &quot; &quot; +
+							bottomleft.toString(TransformCoordinates.LAT_LON).replace(',',' ') + &quot; &quot; +
 							topright.toString(TransformCoordinates.LAT_LON).replace(',',' ') +
 							&quot; -w &quot;+pixelsize.x;				
 						Vm.exec(mapProgram, mapProgramParams, 0, true);				
@@ -350,7 +350,7 @@
 								// implicit does apply-ruleset
 							}
 							
-							String koords = buttomleft.toString(TransformCoordinates.LON_LAT) + &quot;,&quot; + topright.toString(TransformCoordinates.LON_LAT);
+							String koords = bottomleft.toString(TransformCoordinates.LON_LAT) + &quot;,&quot; + topright.toString(TransformCoordinates.LON_LAT);
 							outp.println(&quot;bounds-set &quot;+koords);
 							outp.println(&quot;zoom-bounds&quot;);
 							if ( path.indexOf(':') == 1) {
@@ -621,7 +621,7 @@
 		Area bbox = new Area();
 		double halfdiagonal = Math.sqrt(pixelsize.x * pixelsize.x + pixelsize.y * pixelsize.y)/2 * scale / 1000;
 		bbox.topleft = center.project(-45, halfdiagonal);
-		bbox.buttomright = center.project(135, halfdiagonal);
+		bbox.bottomright = center.project(135, halfdiagonal);
 		return bbox;
 	}
 
@@ -700,12 +700,17 @@
 		imageFormatUrlPart = wms.getProperty(&quot;ImageFormatUrlPart&quot;, &quot;&quot;).trim();
 		stylesUrlPart = wms.getProperty(&quot;StylesUrlPart&quot;, &quot;&quot;).trim();
 		String topleftS = wms.getProperty(&quot;BoundingBoxTopLeftWGS84&quot;, &quot;&quot;).trim();
-		String buttomrightS = wms.getProperty(&quot;BoundingBoxButtomRightWGS84&quot;, &quot;&quot;).trim();
+		String bottomrightS = wms.getProperty(&quot;BoundingBoxBottomRightWGS84&quot;);
+		//To be backward-compatible with mispelled property-name: Don't remove these lines until all wms-Files has been changed
+		if (bottomrightS == null){
+		    bottomrightS = wms.getProperty(&quot;BoundingBoxButtomRightWGS84&quot;, &quot;&quot;);
+		}
+		bottomrightS.trim();
 		CWPoint topleft = new CWPoint(topleftS);
-		CWPoint buttomright = new CWPoint(buttomrightS);
+		CWPoint bottomright = new CWPoint(bottomrightS);
 		if (!topleft.isValid()) topleft.set(90, -180);
-		if (!buttomright.isValid()) buttomright.set(-90, 180);
-		boundingBox = new Area (topleft, buttomright);
+		if (!bottomright.isValid()) bottomright.set(-90, 180);
+		boundingBox = new Area (topleft, bottomright);
 		minscaleWMS = Common.parseDouble(wms.getProperty(&quot;MinScale&quot;, &quot;0&quot;).trim());
 		maxscaleWMS = Common.parseDouble(wms.getProperty(&quot;MaxScale&quot;, Convert.toString(java.lang.Double.MAX_VALUE)).trim());
 		minscale = minscaleWMS / Math.sqrt(2); // in WMS scale is measured diagonal while in CacheWolf it is measured vertical
@@ -731,29 +736,29 @@
 	}
 
 	private static final int TOPLEFT_INDEX = 0;
-	private static final int BUTTOMRIGHT_INDEX = 1;
+	private static final int BOTTOMRIGHT_INDEX = 1;
 	private static final int TOPRIGHT_INDEX = 2;
-	private static final int BUTTOMLEFT_INDEX = 3;
+	private static final int BOTTOMLEFT_INDEX = 3;
 	/**
 	 *
 	 * @param maparea
-	 * @return [0] = topleft, [1] = buttomright, [2] = topright, [3] = buttomleft
+	 * @return [0] = topleft, [1] = bottomright, [2] = topright, [3] = bottomleft
 	 */
 	private ProjectedPoint[] getGkArea(Area maparea) {
 		ProjectedPoint[] ret = new ProjectedPoint[4];
-	//	CWPoint topright = new CWPoint(maparea.topleft.latDec, maparea.buttomright.lonDec);
-	//	CWPoint buttomleft = new CWPoint(maparea.buttomright.latDec, maparea.topleft.lonDec);
+	//	CWPoint topright = new CWPoint(maparea.topleft.latDec, maparea.bottomright.lonDec);
+	//	CWPoint bottomleft = new CWPoint(maparea.bottomright.latDec, maparea.topleft.lonDec);
 		int crs = getCrs(maparea.getCenter());
 		// FIXME region is never read. Needed?
 		// int region = TransformCoordinates.getLocalProjectionSystem(coordinateReferenceSystem[crs]);
 		ret[TOPLEFT_INDEX] = TransformCoordinates.wgs84ToEpsg(maparea.topleft, coordinateReferenceSystem[crs]);
-		ret[BUTTOMRIGHT_INDEX] = TransformCoordinates.wgs84ToEpsg(maparea.buttomright, coordinateReferenceSystem[crs]);
-		ret[TOPRIGHT_INDEX] =  ret[BUTTOMRIGHT_INDEX].cloneIt();
-		ret[TOPRIGHT_INDEX].shift(ret[TOPLEFT_INDEX].getNorthing() - ret[BUTTOMRIGHT_INDEX].getNorthing(), 0); // was: new GkPoint(ret[BUTTOMRIGHT_INDEX].getEasting(region), ret[TOPLEFT_INDEX].northing, ret[TOPLEFT_INDEX].stripewidth, ret[TOPLEFT_INDEX].lengthOfStripe0);
-		ret[BUTTOMLEFT_INDEX] = ret[BUTTOMRIGHT_INDEX].cloneIt();
-		ret[BUTTOMLEFT_INDEX].shift(ret[TOPLEFT_INDEX].getEasting() - ret[BUTTOMRIGHT_INDEX].getEasting(), 1); // was: new GkPoint(ret[TOPLEFT_INDEX].getEasting(region), ret[BUTTOMRIGHT_INDEX].northing, ret[TOPLEFT_INDEX].stripewidth, ret[TOPLEFT_INDEX].lengthOfStripe0);
+		ret[BOTTOMRIGHT_INDEX] = TransformCoordinates.wgs84ToEpsg(maparea.bottomright, coordinateReferenceSystem[crs]);
+		ret[TOPRIGHT_INDEX] =  ret[BOTTOMRIGHT_INDEX].cloneIt();
+		ret[TOPRIGHT_INDEX].shift(ret[TOPLEFT_INDEX].getNorthing() - ret[BOTTOMRIGHT_INDEX].getNorthing(), 0); // was: new GkPoint(ret[BUTTOMRIGHT_INDEX].getEasting(region), ret[TOPLEFT_INDEX].northing, ret[TOPLEFT_INDEX].stripewidth, ret[TOPLEFT_INDEX].lengthOfStripe0);
+		ret[BOTTOMLEFT_INDEX] = ret[BOTTOMRIGHT_INDEX].cloneIt();
+		ret[BOTTOMLEFT_INDEX].shift(ret[TOPLEFT_INDEX].getEasting() - ret[BOTTOMRIGHT_INDEX].getEasting(), 1); // was: new GkPoint(ret[TOPLEFT_INDEX].getEasting(region), ret[BUTTOMRIGHT_INDEX].northing, ret[TOPLEFT_INDEX].stripewidth, ret[TOPLEFT_INDEX].lengthOfStripe0);
 		//ret[2] = TransformCoordinates.wgs84ToGermanGk(topright, coordinateReferenceSystem[crs]);
-		//ret[3] = TransformCoordinates.wgs84ToGermanGk(buttomleft, coordinateReferenceSystem[crs]);
+		//ret[3] = TransformCoordinates.wgs84ToGermanGk(bottomleft, coordinateReferenceSystem[crs]);
 		return ret;
 	}
 	public Area CenterScaleToArea(CWPoint center, float scale, Point pixelsize) {
@@ -769,7 +774,7 @@
 			brgk.shift(pixelsize.x * scale / 2, 1);
 			brgk.shift(-pixelsize.y * scale / 2, 0);
 			bbox.topleft = TransformCoordinates.ProjectedEpsgToWgs84(tlgk, epsg); // old: (tlgk, region);
-			bbox.buttomright = TransformCoordinates.ProjectedEpsgToWgs84(brgk, epsg); // TransformCoordinates.GkToWgs84(brgk, region);
+			bbox.bottomright = TransformCoordinates.ProjectedEpsgToWgs84(brgk, epsg); // TransformCoordinates.GkToWgs84(brgk, region);
 		} else {
 			switch (coordinateReferenceSystem[0]) {
 			case TransformCoordinates.EPSG_ETRS89:
@@ -777,9 +782,9 @@
 				bbox.topleft.set(center);
 				bbox.topleft.shift(-pixelsize.x * scale / 2, 1);
 				bbox.topleft.shift(pixelsize.y * scale / 2, 0);
-				bbox.buttomright.set(center);
-				bbox.buttomright.shift(pixelsize.x * scale / 2, 1);
-				bbox.buttomright.shift(-pixelsize.y * scale / 2, 0);
+				bbox.bottomright.set(center);
+				bbox.bottomright.shift(pixelsize.x * scale / 2, 1);
+				bbox.bottomright.shift(-pixelsize.y * scale / 2, 0);
 				break;
 			default: throw new IllegalArgumentException(&quot;CenterScaleToArea: epsg: &quot; + coordinateReferenceSystem[0] + &quot; not supported&quot;);
 			}
@@ -790,9 +795,9 @@
 	protected String getUrlForBoundingBoxInternal(Area maparea, Point pixelsize) {
 		if (!boundingBox.isOverlapping(maparea)) throw new IllegalArgumentException(MyLocale.getMsg(4822, &quot;area:&quot;)+&quot; &quot; + maparea.toString() + MyLocale.getMsg(4823, &quot; not covered by service:&quot;)+&quot; &quot; + name + MyLocale.getMsg(4824, &quot;, service area:&quot;)+&quot; &quot; + boundingBox.toString());
 		// <A HREF="http://www.geoserver.nrw.de/GeoOgcWms1.3/servlet/TK25?SERVICE=WMS&amp;VERSION=1.1.0&amp;REQUEST=GetMap&amp;SRS=EPSG:31466&amp;BBOX=2577567.0149,5607721.7566,2578567.0077,5608721.7602&amp;WIDTH=500&amp;HEIGHT=500&amp;LAYERS=Raster:TK25_KMF:Farbkombination&amp;STYLES=&amp;FORMAT=image/png">http://www.geoserver.nrw.de/GeoOgcWms1.3/servlet/TK25?SERVICE=WMS&amp;VERSION=1.1.0&amp;REQUEST=GetMap&amp;SRS=EPSG:31466&amp;BBOX=2577567.0149,5607721.7566,2578567.0077,5608721.7602&amp;WIDTH=500&amp;HEIGHT=500&amp;LAYERS=Raster:TK25_KMF:Farbkombination&amp;STYLES=&amp;FORMAT=image/png</A>
-		CWPoint buttomleft = new CWPoint (maparea.buttomright.latDec, maparea.topleft.lonDec);
-		CWPoint topright = new CWPoint (maparea.topleft.latDec, maparea.buttomright.lonDec);
-		double scaleh = maparea.buttomright.getDistance(buttomleft) * 1000 / pixelsize.x;
+		CWPoint bottomleft = new CWPoint (maparea.bottomright.latDec, maparea.topleft.lonDec);
+		CWPoint topright = new CWPoint (maparea.topleft.latDec, maparea.bottomright.lonDec);
+		double scaleh = maparea.bottomright.getDistance(bottomleft) * 1000 / pixelsize.x;
 		double scalev = maparea.topleft.getDistance(topright) * 1000 / pixelsize.y;
 		double scale = Math.sqrt(scaleh * scaleh + scalev * scalev); // meters per pixel measured diagonal
 		if ( scale &lt; minscaleWMS || scale &gt; maxscaleWMS ) throw new IllegalArgumentException(MyLocale.getMsg(4825, &quot;scale&quot;)+&quot; &quot; + scale / Math.sqrt(2)+ MyLocale.getMsg(4826, &quot; not supported by online map service, supported scale range:&quot;)+&quot; &quot; + minscale + &quot; - &quot; + maxscale + MyLocale.getMsg(4827, &quot; (measured in meters per pixel vertically)&quot;));
@@ -802,18 +807,18 @@
 		if (localsystem &gt; 0) {
 			crs = getCrs(maparea.getCenter());
 			ProjectedPoint[] gk = getGkArea(maparea);
-			buttomleft = TransformCoordinates.ProjectedEpsgToWgs84(gk[BUTTOMLEFT_INDEX], coordinateReferenceSystem[crs]);
+			bottomleft = TransformCoordinates.ProjectedEpsgToWgs84(gk[BOTTOMLEFT_INDEX], coordinateReferenceSystem[crs]);
 			topright = TransformCoordinates.ProjectedEpsgToWgs84(gk[TOPRIGHT_INDEX], coordinateReferenceSystem[crs]);
-			bbox += TransformCoordinates.wgs84ToEpsg(buttomleft, coordinateReferenceSystem[crs]).toString(2, &quot;&quot;, &quot;,&quot;);
+			bbox += TransformCoordinates.wgs84ToEpsg(bottomleft, coordinateReferenceSystem[crs]).toString(2, &quot;&quot;, &quot;,&quot;);
 			bbox += &quot;,&quot; + TransformCoordinates.wgs84ToEpsg(topright, coordinateReferenceSystem[crs]).toString(2, &quot;&quot;, &quot;,&quot;);
 		} else if (coordinateReferenceSystem[0] == TransformCoordinates.EPSG_WGS84)
-			bbox += buttomleft.toString(TransformCoordinates.LON_LAT)  + &quot;,&quot; + topright.toString(TransformCoordinates.LON_LAT);
+			bbox += bottomleft.toString(TransformCoordinates.LON_LAT)  + &quot;,&quot; + topright.toString(TransformCoordinates.LON_LAT);
 		else throw new IllegalArgumentException(MyLocale.getMsg(4828, &quot;Coordinate system not supported by cachewolf:&quot;)+&quot; &quot; + coordinateReferenceSystem.toString());
 		String ret = MainUrl + &quot;SERVICE=WMS&quot; + &quot;&amp;&quot;+ versionUrlPart + &quot;&amp;&quot; + requestUrlPart + &quot;&amp;&quot; +
 		coordinateReferenceSystemUrlPart[crs] + &quot;&amp;&quot; + bbox +
 		&quot;&amp;WIDTH=&quot; + pixelsize.x + &quot;&amp;HEIGHT=&quot; + pixelsize.y + &quot;&amp;&quot; +
 		layersUrlPart + &quot;&amp;&quot; + stylesUrlPart + &quot;&amp;&quot; + imageFormatUrlPart;
-		Global.getPref().log(ret + &quot; WGS84: Buttom left: &quot; + buttomleft.toString(TransformCoordinates.DD) + &quot;top right: &quot; + topright.toString(TransformCoordinates.DD));
+		Global.getPref().log(ret + &quot; WGS84: Bottom left: &quot; + bottomleft.toString(TransformCoordinates.DD) + &quot;top right: &quot; + topright.toString(TransformCoordinates.DD));
 		return ret;
 	}
 
@@ -829,7 +834,7 @@
 		int crsindex = 0;
 		if (coordinateReferenceSystem.length &gt; 1) {
 			int ls = TransformCoordinates.getLocalProjectionSystem(coordinateReferenceSystem[0]);
-			ProjectedPoint gkbl = TransformCoordinates.wgs84ToLocalsystem(p, ls); // TODO: think / read about what to do if buttom left and top right are not in the same Gau&#223;-Kr&#252;ger stripe?
+			ProjectedPoint gkbl = TransformCoordinates.wgs84ToLocalsystem(p, ls); // TODO: think / read about what to do if bottom left and top right are not in the same Gau&#223;-Kr&#252;ger stripe?
 			int wantepsg = gkbl.getEpsgCode();
 			for (crsindex = 0; crsindex &lt; coordinateReferenceSystem.length; crsindex++) {
 				if (coordinateReferenceSystem[crsindex] == wantepsg) break;
@@ -851,42 +856,42 @@
 		Vector georef = new Vector(4);
 
 		// calculate a rectangle in the according coordinate reference system
-		CWPoint buttomleft = new CWPoint (maparea.buttomright.latDec, maparea.topleft.lonDec);
-		CWPoint topright = new CWPoint (maparea.topleft.latDec, maparea.buttomright.lonDec);
+		CWPoint bottomleft = new CWPoint (maparea.bottomright.latDec, maparea.topleft.lonDec);
+		CWPoint topright = new CWPoint (maparea.topleft.latDec, maparea.bottomright.lonDec);
 		CWPoint topleft = new CWPoint(maparea.topleft);
-		CWPoint buttomright = new CWPoint(maparea.buttomright);
-		double metersperpixalhorizontal = ( buttomright.getDistance(buttomleft) + topleft.getDistance(topright))/2 * 1000 / pixelsize.x;
-		double metersperpixalvertical = ( buttomright.getDistance(topright) + topleft.getDistance(buttomleft))/2 * 1000 / pixelsize.y;
+		CWPoint bottomright = new CWPoint(maparea.bottomright);
+		double metersperpixalhorizontal = ( bottomright.getDistance(bottomleft) + topleft.getDistance(topright))/2 * 1000 / pixelsize.x;
+		double metersperpixalvertical = ( bottomright.getDistance(topright) + topleft.getDistance(bottomleft))/2 * 1000 / pixelsize.y;
 		int region = TransformCoordinates.getLocalProjectionSystem(coordinateReferenceSystem[0]);
 		if ( region &gt; 0) {
 			ProjectedPoint[] gk = getGkArea(maparea);
 			// bounding box in WMS is defined around the pixels, not exactly on the pixels --&gt; the bounding box must be reduced on all edges by half a pixel
 			gk[TOPLEFT_INDEX].shift(metersperpixalhorizontal / 2, 1);
 			gk[TOPLEFT_INDEX].shift(-metersperpixalvertical / 2, 0);
-			gk[BUTTOMRIGHT_INDEX].shift(-metersperpixalhorizontal / 2, 1);
-			gk[BUTTOMRIGHT_INDEX].shift(metersperpixalvertical / 2, 0);
+			gk[BOTTOMRIGHT_INDEX].shift(-metersperpixalhorizontal / 2, 1);
+			gk[BOTTOMRIGHT_INDEX].shift(metersperpixalvertical / 2, 0);
 			gk[TOPRIGHT_INDEX].shift(-metersperpixalhorizontal / 2, 1);
 			gk[TOPRIGHT_INDEX].shift(-metersperpixalvertical / 2, 0);
-			gk[BUTTOMLEFT_INDEX].shift(metersperpixalhorizontal / 2, 1);
-			gk[BUTTOMLEFT_INDEX].shift(metersperpixalvertical / 2, 0);
+			gk[BOTTOMLEFT_INDEX].shift(metersperpixalhorizontal / 2, 1);
+			gk[BOTTOMLEFT_INDEX].shift(metersperpixalvertical / 2, 0);
 
 			topleft.set(gk[TOPLEFT_INDEX].getNorthing(), gk[TOPLEFT_INDEX].getEasting());
-			buttomright.set(gk[BUTTOMRIGHT_INDEX].getNorthing(), gk[BUTTOMRIGHT_INDEX].getEasting());
+			bottomright.set(gk[BOTTOMRIGHT_INDEX].getNorthing(), gk[BOTTOMRIGHT_INDEX].getEasting());
 			topright.set(gk[TOPRIGHT_INDEX].getNorthing(), gk[TOPRIGHT_INDEX].getEasting());
-			buttomleft.set(gk[BUTTOMLEFT_INDEX].getNorthing(), gk[BUTTOMLEFT_INDEX].getEasting());
+			bottomleft.set(gk[BOTTOMLEFT_INDEX].getNorthing(), gk[BOTTOMLEFT_INDEX].getEasting());
 		} else if (coordinateReferenceSystem[0] == TransformCoordinates.EPSG_WGS84) {
 			// bounding box in WMS is defined around the pixels, not exactly on the pixels --&gt; the bounding box must be reduced on all edges by half a pixel
 			topleft.shift(metersperpixalhorizontal / 2, 1);
 			topleft.shift(-metersperpixalvertical / 2, 0);
-			buttomright.shift(-metersperpixalhorizontal, 1);
-			buttomright.shift(metersperpixalhorizontal, 0);
-			topright = new CWPoint (topleft.latDec, buttomright.lonDec);
-			buttomleft = new CWPoint (buttomright.latDec, topleft.lonDec);
+			bottomright.shift(-metersperpixalhorizontal, 1);
+			bottomright.shift(metersperpixalhorizontal, 0);
+			topright = new CWPoint (topleft.latDec, bottomright.lonDec);
+			bottomleft = new CWPoint (bottomright.latDec, topleft.lonDec);
 		} else throw new IllegalArgumentException(MyLocale.getMsg(4831, &quot;getMapInfoObject: Coordinate system not supported by cachewolf:&quot;)+&quot; &quot; + coordinateReferenceSystem);
 		georef.add(new GCPoint(topleft, new Point(0, 0)));
-		georef.add(new GCPoint(buttomright, new Point(pixelsize.x, pixelsize.y)));
+		georef.add(new GCPoint(bottomright, new Point(pixelsize.x, pixelsize.y)));
 		georef.add(new GCPoint(topright, new Point(pixelsize.x, 0)));
-		georef.add(new GCPoint(buttomleft, new Point(0, pixelsize.y)));
+		georef.add(new GCPoint(bottomleft, new Point(0, pixelsize.y)));
 
 		MapInfoObject ret = new MapInfoObject();
 		ret.evalGCP(georef, pixelsize.x, pixelsize.y, coordinateReferenceSystem[getCrs(maparea.getCenter())]);

Modified: trunk/src/CacheWolf/navi/MapLoaderGui.java
===================================================================
--- trunk/src/CacheWolf/navi/MapLoaderGui.java	2011-03-15 08:11:00 UTC (rev 2959)
+++ trunk/src/CacheWolf/navi/MapLoaderGui.java	2011-03-19 15:45:34 UTC (rev 2960)
@@ -328,7 +328,7 @@
 				progressBox.close(0);
 				return;
 			}
-			mapLoader.setTiles(surArea.topleft, surArea.buttomright, scale, size, overlapping );
+			mapLoader.setTiles(surArea.topleft, surArea.bottomright, scale, size, overlapping );
 		} else
 		{ // calculate from centre point an radius
 			mapLoader.setTiles(center, radius * 1000, scale, size, overlapping);

Modified: trunk/src/CacheWolf/navi/MapsList.java
===================================================================
--- trunk/src/CacheWolf/navi/MapsList.java	2011-03-15 08:11:00 UTC (rev 2959)
+++ trunk/src/CacheWolf/navi/MapsList.java	2011-03-19 15:45:34 UTC (rev 2960)
@@ -300,8 +300,8 @@
 	 * if no map includes both it returns null
 	 * @param if more than one map includes topleft and bottomright than the one will
 	 * be returned which has its center nearest to topleft. If you have gps-pos and goto-pos
-	 * as topleft and buttomright use gps as topleft.
-	 * if topleft is really topleft or if it is buttomright is not relevant.
+	 * as topleft and bottomright use gps as topleft.
+	 * if topleft is really topleft or if it is bottomright is not relevant.
 	 */
 
 	public final MapInfoObject getMapForArea(CWPoint topleft, CWPoint bottomright){
@@ -527,9 +527,9 @@
 	}
 */
 	/** for determining if a new map should be downloaded
-	public boolean isInAmap(CWPoint topleft, CWPoint buttomright) {
-		if (!latRangeList.isInRange(topleft.latDec) || !latRangeList.isInRange(buttomright.latDec)) ||
-			!lonRangeList.inInRange(topleft.lonDec) || !lonRangeList.isInRange(buttomright.lonDec)
+	public boolean isInAmap(CWPoint topleft, CWPoint bottomright) {
+		if (!latRangeList.isInRange(topleft.latDec) || !latRangeList.isInRange(bottomright.latDec)) ||
+			!lonRangeList.inInRange(topleft.lonDec) || !lonRangeList.isInRange(boxsttomright.lonDec)
 			return false;
 	}
 	 */

Modified: trunk/src/CacheWolf/navi/MovingMap.java
===================================================================
--- trunk/src/CacheWolf/navi/MovingMap.java	2011-03-15 08:11:00 UTC (rev 2959)
+++ trunk/src/CacheWolf/navi/MovingMap.java	2011-03-19 15:45:34 UTC (rev 2960)
@@ -1201,10 +1201,10 @@
 			return;
 		}
 		//A map was found, but it does not contain the previously calculated center
-		if (!(bestMap.buttomright.latDec &lt;= centerPoint.latDec &amp;&amp; centerPoint.latDec &lt;= bestMap.topleft.latDec)){
+		if (!(bestMap.bottomright.latDec &lt;= centerPoint.latDec &amp;&amp; centerPoint.latDec &lt;= bestMap.topleft.latDec)){
 			return;
 		}
-		if (!(bestMap.topleft.lonDec &lt;= centerPoint.lonDec &amp;&amp; centerPoint.lonDec &lt;= bestMap.buttomright.lonDec)){
+		if (!(bestMap.topleft.lonDec &lt;= centerPoint.lonDec &amp;&amp; centerPoint.lonDec &lt;= bestMap.bottomright.lonDec)){
 			return;
 		}
 		//Pfeffer got an NPE in the following if-statement. I think the image-filename has got not the correct extension.
@@ -1223,7 +1223,7 @@
 				Point mapposint = bestMap.calcMapXY(posCircle.where);
 				mapPos.x = posCircleX - mapposint.x;
 				mapPos.y = posCircleY - mapposint.y;
-				Point mapDimension = bestMap.calcMapXY(bestMap.buttomright);
+				Point mapDimension = bestMap.calcMapXY(bestMap.bottomright);
 				blackArea = new Rect (mapPos.x, mapPos.y, mapDimension.x, mapDimension.y);
 				//Are there any white areas left?
 				calculateRectangles(blackArea, r, rectangles);
@@ -1582,7 +1582,7 @@
 			(new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4215, &quot;Keine  Caches mit H&#239;&#191;&#189;ckchen ausgew&#239;&#191;&#189;hlt&quot;), FormBase.OKB)).execute();
 			return;
 		}
-		MapInfoObject newmap = maps.getMapForArea(sur.topleft, sur.buttomright);
+		MapInfoObject newmap = maps.getMapForArea(sur.topleft, sur.bottomright);
 		if (newmap == null ) { // no map that includs all caches is available -&gt; load map with lowest resolution
 			Object [] s = getRectForMapChange(posCircle.where);
 			CWPoint cll = (CWPoint) s[0];
@@ -1594,8 +1594,8 @@
 				Object [] s = getRectForMapChange(posCircle.where);
 			//	CWPoint cll = (CWPoint) s[0];
 				Rect screen = (Rect) s[1];
-				float neededscalex = (float) (sur.topleft.getDistance(sur.topleft.latDec, sur.buttomright.lonDec) * 1000 / (screen.width-15)); // 15 for the size of the cache image
-				float neededscaley = (float) (sur.topleft.getDistance(sur.buttomright.latDec, sur.topleft.lonDec) * 1000 / (screen.height-15)); // 15 for the size of the cache image
+				float neededscalex = (float) (sur.topleft.getDistance(sur.topleft.latDec, sur.bottomright.lonDec) * 1000 / (screen.width-15)); // 15 for the size of the cache image
+				float neededscaley = (float) (sur.topleft.getDistance(sur.bottomright.latDec, sur.topleft.lonDec) * 1000 / (screen.height-15)); // 15 for the size of the cache image
 				newmap = ((MapListEntry)maps.elementAt(maps.getCount() - 4)).getMap(); // beware: &quot;-4&quot; only works if the empty maps were added last see MapsList.addEmptyMaps
 				newmap.zoom(newmap.scale * newmap.zoomFactor / (neededscalex &gt; neededscaley ? neededscalex : neededscaley), 0, 0);
 				forceMapLoad = true;

Modified: trunk/src/CacheWolf/navi/TransformCoordinates.java
===================================================================
--- trunk/src/CacheWolf/navi/TransformCoordinates.java	2011-03-15 08:11:00 UTC (rev 2959)
+++ trunk/src/CacheWolf/navi/TransformCoordinates.java	2011-03-19 15:45:34 UTC (rev 2960)
@@ -162,12 +162,12 @@
 	private static final TransformParameters GB_ITALIAN_SARDINIA_TO_WGS84 =  new TransformParameters(-168.6, -34.0, 38.6, 0.374, 0.679, 1.379, 9.48, HAYFORD1909);
 	private static final Area ITALY_SARDINIA = new Area(new CWPoint(42, 6), new CWPoint(38, 11));
 	private static final Area ITALY_SARDINIA_GK = new Area(wgs84ToEpsg(ITALY_SARDINIA.topleft, EPSG_ITALIAN_GB_EW1).toTrackPoint(TransformCoordinates.LOCALSYSTEM_ITALIAN_GB),
-			wgs84ToEpsg(ITALY_SARDINIA.buttomright, EPSG_ITALIAN_GB_EW1).toTrackPoint(TransformCoordinates.LOCALSYSTEM_ITALIAN_GB));
+			wgs84ToEpsg(ITALY_SARDINIA.bottomright, EPSG_ITALIAN_GB_EW1).toTrackPoint(TransformCoordinates.LOCALSYSTEM_ITALIAN_GB));
 
 	private static final TransformParameters GB_ITALIAN_SICILIA_TO_WGS84 =  new TransformParameters(-50.2, -50.4, 84.8, 0.690, 2.012, -0.459, 28.08, HAYFORD1909);
 	private static final Area ITALY_SICILIA = new Area(new CWPoint(39, 12), new CWPoint(36.3, 15.6));
 	private static final Area ITALY_SICILIA_GK = new Area(wgs84ToEpsg(ITALY_SICILIA.topleft, EPSG_ITALIAN_GB_EW2).toTrackPoint(TransformCoordinates.LOCALSYSTEM_ITALIAN_GB),
-			wgs84ToEpsg(ITALY_SICILIA.buttomright, EPSG_ITALIAN_GB_EW2).toTrackPoint(TransformCoordinates.LOCALSYSTEM_ITALIAN_GB));
+			wgs84ToEpsg(ITALY_SICILIA.bottomright, EPSG_ITALIAN_GB_EW2).toTrackPoint(TransformCoordinates.LOCALSYSTEM_ITALIAN_GB));
 
 	// see also <A HREF="http://hal.gis.univie.ac.at/karto/lehr/fachbereiche/geoinfo/givi0304/tutorials/ersteschritte/projectionen.htm#ParMGIWGS84">http://hal.gis.univie.ac.at/karto/lehr/fachbereiche/geoinfo/givi0304/tutorials/ersteschritte/projectionen.htm#ParMGIWGS84</A> 
 	// taken from taken from <A HREF="http://www.crs-geo.eu/crseu/EN/Home/homepage__node.html?__nnn=true">http://www.crs-geo.eu/crseu/EN/Home/homepage__node.html?__nnn=true</A> click on &quot;national CRS&quot; -&gt; Austria -&gt; AT (translation *-1 as of 11-8-2009)

Modified: trunk/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java
===================================================================
--- trunk/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java	2011-03-15 08:11:00 UTC (rev 2959)
+++ trunk/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java	2011-03-19 15:45:34 UTC (rev 2960)
@@ -84,7 +84,7 @@
 	public static final String BUTTON_ATTR_FROM_BOTTOM = &quot;fromBottom&quot;;
 	/**
 	 * define when this button is visible. Contains a list of rolenames. Delimiter is '+'. If the role name starts with
-	 * '!' the buttom is shown if this role is inactive [(!)String+(!)String...] Example visibleIf=&quot;menu+!zoom&quot; button
+	 * '!' the button is shown if this role is inactive [(!)String+(!)String...] Example visibleIf=&quot;menu+!zoom&quot; button
 	 * is visible if role &quot;menu&quot; is active and role &quot;zoom&quot; is inactive.
 	 */
 	public static final String BUTTON_ATTR_VISIBILITY = &quot;visibleIf&quot;;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002950.html">[Cachewolf-svn] r2959 - trunk/src/CacheWolf/exp
</A></li>
	<LI>Next message: <A HREF="002952.html">[Cachewolf-svn] r2961 - trunk/res_noewe/webmapservices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2951">[ date ]</a>
              <a href="thread.html#2951">[ thread ]</a>
              <a href="subject.html#2951">[ subject ]</a>
              <a href="author.html#2951">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">More information about the Cachewolf-svn
mailing list</a><br>
</body></html>
