<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Cachewolf-svn] r2998 - in trunk/src/CacheWolf: . imp
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cachewolf-svn/2011-May/index.html" >
   <LINK REL="made" HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r2998%20-%20in%20trunk/src/CacheWolf%3A%20.%20imp&In-Reply-To=%3C20110511123729.3B00E481374%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002988.html">
   <LINK REL="Next"  HREF="002990.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cachewolf-svn] r2998 - in trunk/src/CacheWolf: . imp</H1>
    <B>araber95 at mail.berlios.de</B> 
    <A HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r2998%20-%20in%20trunk/src/CacheWolf%3A%20.%20imp&In-Reply-To=%3C20110511123729.3B00E481374%40sheep.berlios.de%3E"
       TITLE="[Cachewolf-svn] r2998 - in trunk/src/CacheWolf: . imp">araber95 at mail.berlios.de
       </A><BR>
    <I>Wed May 11 02:37:28 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002988.html">[Cachewolf-svn] r2997 - in trunk: res_noewe/attributes	res_noewe/languages src/CacheWolf src/CacheWolf/imp
</A></li>
        <LI>Next message: <A HREF="002990.html">[Cachewolf-svn] r2999 - trunk/res_noewe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2989">[ date ]</a>
              <a href="thread.html#2989">[ thread ]</a>
              <a href="subject.html#2989">[ subject ]</a>
              <a href="author.html#2989">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: araber95
Date: 2011-05-11 14:37:28 +0200 (Wed, 11 May 2011)
New Revision: 2998

Modified:
   trunk/src/CacheWolf/LogList.java
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
1.  no quick import of finds and own for PM
2.  no Code Change for LogList.java

Modified: trunk/src/CacheWolf/LogList.java
===================================================================
--- trunk/src/CacheWolf/LogList.java	2011-05-10 21:54:53 UTC (rev 2997)
+++ trunk/src/CacheWolf/LogList.java	2011-05-11 12:37:28 UTC (rev 2998)
@@ -1,55 +1,56 @@
-    /*
-    GNU General Public License
-    CacheWolf is a software for PocketPC, Win and Linux that
-    enables paperless caching.
-    It supports the sites geocaching.com and opencaching.de
+/*
+GNU General Public License
+CacheWolf is a software for PocketPC, Win and Linux that
+enables paperless caching.
+It supports the sites geocaching.com and opencaching.de
 
-    Copyright (C) 2006  CacheWolf development team
-    See <A HREF="http://developer.berlios.de/projects/cachewolf/">http://developer.berlios.de/projects/cachewolf/</A>
-    for more information.
-    Contact: 	<A HREF="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">bilbowolf at users.berlios.de</A>
-    			<A HREF="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">kalli at users.berlios.de</A>
+Copyright (C) 2006  CacheWolf development team
+See <A HREF="http://developer.berlios.de/projects/cachewolf/">http://developer.berlios.de/projects/cachewolf/</A>
+for more information.
+Contact: 	<A HREF="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">bilbowolf at users.berlios.de</A>
+			<A HREF="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">kalli at users.berlios.de</A>
 
-    This program is free software; you can redistribute it and/or modify
-    it under the terms of the GNU General Public License as published by
-    the Free Software Foundation; version 2 of the License.
+This program is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; version 2 of the License.
 
-    This program is distributed in the hope that it will be useful,
-    but WITHOUT ANY WARRANTY; without even the implied warranty of
-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-    GNU General Public License for more details.
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
 
-    You should have received a copy of the GNU General Public License
-    along with this program; if not, write to the Free Software
-    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
-    */
+You should have received a copy of the GNU General Public License
+along with this program; if not, write to the Free Software
+Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+ */
 package CacheWolf;
 
 import ewe.util.Vector;
 
 public class LogList {
-	/** The Vector containing the Log objects 
-	 * The list is always sorted in descending order */
-	private Vector logList=new Vector(10);
+	/**
+	 * The Vector containing the Log objects The list is always sorted in descending order
+	 */
+	private Vector logList = new Vector(10);
 	private static final StringBuffer buffer = new StringBuffer();
 
 	/** Construct an empty Log list */
 	public LogList() { // Public constructor
 	}
-	
+
 	/** Get the Log at a certain position in the list */
 	public Log getLog(int i) {
-		if (logList.size()&gt;i) {
-			return (Log) logList.elementAt(i);			
-		}
-		else return null;
+		if (logList.size() &gt; i) {
+			return (Log) logList.elementAt(i);
+		} else
+			return null;
 	}
-	
+
 	/** Return the size of the list */
 	public int size() {
 		return logList.size();
 	}
-	
+
 	/** Clear the Log list */
 	public void clear() {
 		logList.clear();
@@ -57,9 +58,10 @@
 
 	/** Add a Log to the list */
 	public void add(Log log) {
-		if (log.getIcon()!=null) logList.add(log); // Don't add invalid logs
+		if (log.getIcon() != null)
+			logList.add(log); // Don't add invalid logs
 	}
-	
+
 	/** Remove a Log from the list */
 	public void remove(int i) {
 		logList.removeElementAt(i);
@@ -69,47 +71,49 @@
 	public void replace(int i, Log log) {
 		logList.set(i, log);
 	}
-	
-	/** Merge a log into the list at the appropriate position
+
+	/**
+	 * Merge a log into the list at the appropriate position
+	 * 
 	 * @param newLog
 	 * @return the position where the log was placed or -1 if it is already in the list
-	 */ 
-	 
+	 */
+
 	public int merge(Log newLog) {
-		String newDate=newLog.getDate();
-		int size=size();
+		String newDate = newLog.getDate();
+		int size = size();
 		int i;
-		for (i=0; i&lt;size; i++) {
-			 int comp=newDate.compareTo(((Log) logList.elementAt(i)).getDate());
-			 if (comp&gt;0) {
-				 logList.insertElementAt(newLog, i);
-				 return i;
-			 }
-			 if (comp==0) break;
+		for (i = 0; i &lt; size; i++) {
+			int comp = newDate.compareTo(((Log) logList.elementAt(i)).getDate());
+			if (comp &gt; 0) {
+				logList.insertElementAt(newLog, i);
+				return i;
+			}
+			if (comp == 0)
+				break;
 		}
 		// Now i points to the first log with same date as the new log or i==size()
-		if (i==size) {
+		if (i == size) {
 			add(newLog);
 			return size;
 		}
-		int firstLog=i;
+		int firstLog = i;
 		// Check whether we have any logs with same date by same user
-		String newLogger=newLog.getLogger();
-		String newIcon=newLog.getIcon();
-		while (i&lt;size &amp;&amp;  newDate.equals(((Log) logList.elementAt(i)).getDate())) {
-			Log log=(Log) logList.elementAt(i);
-			if (log.getLogger().equals(newLogger) &amp;&amp;
-				log.getIcon().equals(newIcon)) {
+		String newLogger = newLog.getLogger();
+		String newIcon = newLog.getIcon();
+		while (i &lt; size &amp;&amp; newDate.equals(((Log) logList.elementAt(i)).getDate())) {
+			Log log = (Log) logList.elementAt(i);
+			if (log.getLogger().equals(newLogger) &amp;&amp; log.getIcon().equals(newIcon)) {
 				// Has the log message changed vs. the one we have in cache.xml?
 				if (!log.getMessage().equals(newLog.getMessage())) {
-					replace(i,newLog);
+					replace(i, newLog);
 					return i;
 				} else
 					return -1; // Log already in list
 			}
 			i++;
 		}
-		if (i==size) {
+		if (i == size) {
 			add(newLog);
 			return i;
 		} else {
@@ -118,20 +122,18 @@
 		}
 	}
 
-	 /**
-	  *  Count the number of not-found logs
-	  */
+	/**
+	 * Count the number of not-found logs
+	 */
 	public byte countNotFoundLogs() {
 		byte countNoFoundLogs = 0;
 		int currentLog = 0;
 		String currentIcon;
-		while(currentLog &lt; size() &amp;&amp; countNoFoundLogs &lt; 5){
+		while (currentLog &lt; size() &amp;&amp; countNoFoundLogs &lt; 5) {
 			currentIcon = getLog(currentLog).getIcon();
-			if(currentIcon.startsWith(&quot;icon_sad&quot;)) {
+			if (currentIcon.startsWith(&quot;icon_sad&quot;)) {
 				countNoFoundLogs++;
-			}else if (currentIcon.startsWith(&quot;icon_smile&quot;) || currentIcon.startsWith(&quot;icon_camera&quot;)
-             || currentIcon.startsWith(&quot;icon_attended&quot;) || currentIcon.startsWith(&quot;icon_rsvp&quot;)
-             || currentIcon.startsWith(&quot;icon_maint&quot;)) {
+			} else if (currentIcon.startsWith(&quot;icon_smile&quot;) || currentIcon.startsWith(&quot;icon_camera&quot;) || currentIcon.startsWith(&quot;icon_attended&quot;) || currentIcon.startsWith(&quot;icon_rsvp&quot;) || currentIcon.startsWith(&quot;icon_maint&quot;)) {
 				break;
 			}
 			currentLog++;
@@ -139,51 +141,57 @@
 		return countNoFoundLogs;
 	}
 
-	 /** only valid after calling calcRecommendations() */
-	 int numRecommended = 0;
-	 /** only valid after calling calcRecommendations() */
-	 int foundsSinceRecommendation = 0;
-	 /** only valid after calling calcRecommendations() */
-	 int recommendationRating = 0;
-	 
-	 /**
-	  * call this to 
-	  *
-	  */
-	 public void calcRecommendations() {
-		 numRecommended = 0;
-		 foundsSinceRecommendation = 0;
-		 Log l;
-		 int s = size();
-		 int i;
-		 for (i= 0 ; i &lt; s; i++){
-			 l = getLog(i);
-			 if (l.getDate().compareTo(&quot;2007-01-14&quot;) &lt; 0) break; // this is the date when the recommendation system was introdueced in opencaching.de see: <A HREF="http://www.geoclub.de/viewtopic.php?t=14901&amp;highlight=formel">http://www.geoclub.de/viewtopic.php?t=14901&amp;highlight=formel</A>
-			 if (l.isRecomended()) numRecommended++;
-			 if (l.isFoundLog()) foundsSinceRecommendation++; 
-		 }
-		 recommendationRating = getScore(numRecommended, foundsSinceRecommendation);
-	 }
-	 
-	 public static int getScore(int numrecommends, int numfoundlogs) {
-		 return Math.round((((float)numrecommends * (float)numrecommends +1f ) / (numfoundlogs / 10f +1f))*100f);
-	 }
-	 
-	 /**
-	  * Returns a simple concatenation of all Log texts of the list. Intended for text search in 
-	  * Logs.
+	/** only valid after calling calcRecommendations() */
+	int numRecommended = 0;
+	/** only valid after calling calcRecommendations() */
+	int foundsSinceRecommendation = 0;
+	/** only valid after calling calcRecommendations() */
+	int recommendationRating = 0;
+
+	/**
+	 * call this to
+	 * 
+	 */
+	public void calcRecommendations() {
+		numRecommended = 0;
+		foundsSinceRecommendation = 0;
+		Log l;
+		int s = size();
+		int i;
+		for (i = 0; i &lt; s; i++) {
+			l = getLog(i);
+			// 2007-01-14 is the date when the recommendation system was introdueced in opencaching.de see:
+			// <A HREF="http://www.geoclub.de/viewtopic.php?t=14901&amp;highlight=formel">http://www.geoclub.de/viewtopic.php?t=14901&amp;highlight=formel</A>
+			if (l.getDate().compareTo(&quot;2007-01-14&quot;) &lt; 0)
+				break;
+			if (l.isRecomended())
+				numRecommended++;
+			if (l.isFoundLog())
+				foundsSinceRecommendation++;
+		}
+		recommendationRating = getScore(numRecommended, foundsSinceRecommendation);
+	}
+
+	public static int getScore(int numrecommends, int numfoundlogs) {
+		return Math.round((((float) numrecommends * (float) numrecommends + 1f) / (numfoundlogs / 10f + 1f)) * 100f);
+	}
+
+	/**
+	 * Returns a simple concatenation of all Log texts of the list. Intended for text search in Logs.
+	 * 
 	 * @return All log messages
 	 */
 	public String allMessages() {
-		 buffer.setLength(0);
-		 for (int i=0; i&lt;logList.size(); i++) {
-			 buffer.append(((Log)logList.get(i)).getMessage());
-		 }
-		 return buffer.toString();
-	 }
+		buffer.setLength(0);
+		for (int i = 0; i &lt; logList.size(); i++) {
+			buffer.append(((Log) logList.get(i)).getMessage());
+		}
+		return buffer.toString();
+	}
 
 	/**
 	 * trim down number of log to maximum number user wants to keep in database
+	 * 
 	 * @return number of removed logs
 	 */
 	public int purgeLogs() {
@@ -191,12 +199,12 @@
 		boolean keepOwn = Global.getPref().alwaysKeepOwnLogs;
 		int purgedLogs = 0;
 		for (int i = logList.size(); i &gt; maxKeep; i--) {
-			if (!(keepOwn &amp;&amp; getLog(i-1).isOwnLog())) {
-				this.remove(i-1);
+			if (!(keepOwn &amp;&amp; getLog(i - 1).isOwnLog())) {
+				this.remove(i - 1);
 				purgedLogs++;
 			}
 		}
 		return purgedLogs;
 	}
-	
+
 }

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2011-05-10 21:54:53 UTC (rev 2997)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2011-05-11 12:37:28 UTC (rev 2998)
@@ -1676,6 +1676,10 @@
 		try {
 			page_number++;
 			url = &quot;<A HREF="http://www.geocaching.com/map/beta/map.info?">http://www.geocaching.com/map/beta/map.info?</A>&quot; + &quot;x=&quot; + strLon + &quot;&amp;y=&quot; + strLat + &quot;&amp;z=&quot; + scale + &quot;&amp;k=&quot; + userToken + &quot;&amp;st=&quot; + sessionToken + &quot;&amp;ep=1&quot;;
+			if (doNotgetFound) {
+				url = url + &quot;&amp;hf=1&quot;; // do not get finds
+			}
+			url = url + &quot;&amp;hh=1&quot;; // do not get own
 			UrlFetcher.setRequestorProperty(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;);
 			ret = UrlFetcher.fetch(url);
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002988.html">[Cachewolf-svn] r2997 - in trunk: res_noewe/attributes	res_noewe/languages src/CacheWolf src/CacheWolf/imp
</A></li>
	<LI>Next message: <A HREF="002990.html">[Cachewolf-svn] r2999 - trunk/res_noewe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2989">[ date ]</a>
              <a href="thread.html#2989">[ thread ]</a>
              <a href="subject.html#2989">[ subject ]</a>
              <a href="author.html#2989">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">More information about the Cachewolf-svn
mailing list</a><br>
</body></html>
