<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Cachewolf-svn] r2632 - trunk/src/CacheWolf/navi
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cachewolf-svn/2010-June/index.html" >
   <LINK REL="made" HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r2632%20-%20trunk/src/CacheWolf/navi&In-Reply-To=%3C201006191353.o5JDrwSv030167%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002587.html">
   <LINK REL="Next"  HREF="002589.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cachewolf-svn] r2632 - trunk/src/CacheWolf/navi</H1>
    <B>salzkammergut at mail.berlios.de</B> 
    <A HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r2632%20-%20trunk/src/CacheWolf/navi&In-Reply-To=%3C201006191353.o5JDrwSv030167%40sheep.berlios.de%3E"
       TITLE="[Cachewolf-svn] r2632 - trunk/src/CacheWolf/navi">salzkammergut at mail.berlios.de
       </A><BR>
    <I>Sat Jun 19 15:53:58 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002587.html">[Cachewolf-svn] r2631 - in trunk: . res_noewe/mmc/pda_vga
</A></li>
        <LI>Next message: <A HREF="002589.html">[Cachewolf-svn] r2633 - in trunk/src/CacheWolf: exp imp navi
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2588">[ date ]</a>
              <a href="thread.html#2588">[ thread ]</a>
              <a href="subject.html#2588">[ subject ]</a>
              <a href="author.html#2588">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: salzkammergut
Date: 2010-06-19 15:53:56 +0200 (Sat, 19 Jun 2010)
New Revision: 2632

Modified:
   trunk/src/CacheWolf/navi/CWGPSPoint.java
Log:
CWGPSPoint - Removed some redundant code

Modified: trunk/src/CacheWolf/navi/CWGPSPoint.java
===================================================================
--- trunk/src/CacheWolf/navi/CWGPSPoint.java	2010-06-17 22:47:20 UTC (rev 2631)
+++ trunk/src/CacheWolf/navi/CWGPSPoint.java	2010-06-19 13:53:56 UTC (rev 2632)
@@ -5,7 +5,7 @@
  * Window - Preferences - Java - Code Style - Code Templates
  */
 package CacheWolf.navi;
-import com.stevesoft.ewe_pat.Regex;
+//import com.stevesoft.ewe_pat.Regex;
 
 import CacheWolf.CWPoint;
 import CacheWolf.Common;
@@ -42,9 +42,9 @@
 	boolean writeLog = false;
 	boolean doLogging = false;
 	FileWriter logFile;
-	String lastStrExamined = new String();
+	String lastStrExamined = &quot;&quot;;
 
-	Regex numberMatcher = new Regex(&quot;\\-?\\d+&quot;);
+	//Regex numberMatcher = new Regex(&quot;\\-?\\d+&quot;);
 
 	public CWGPSPoint()
 	{
@@ -114,7 +114,7 @@
 	}
 
 	/**
-	 * 
+	 *
 	 * @param logFileDir directory for logfile
 	 * @param seconds	 intervall for writing to logfile
 	 * @param flag		 level of logging
@@ -132,7 +132,7 @@
 		} catch (IOException e) {
 			Vm.debug(&quot;Error creating LogFile &quot; + logFileName);
 			return -1;
-		} 
+		}
 		// start timer
 		logTimer = Vm.requestTimer(this, 1000 * seconds);
 		logFlag = flag;
@@ -177,28 +177,28 @@
 	 * @param NMEA	string with data to examine
 	 * @return true if some data could be interpreted false otherwise
 	 */
-	public boolean examine(String NMEA){ 
+	public boolean examine(String NMEA){
 		boolean interpreted = false;
 		boolean logWritten = false;
 		try {
 			int i, start, end;
-			String latDeg=&quot;0&quot;, latMin=&quot;0&quot;, latNS=&quot;N&quot;; 
+			String latDeg=&quot;0&quot;, latMin=&quot;0&quot;, latNS=&quot;N&quot;;
 			String lonDeg=&quot;0&quot;, lonMin=&quot;0&quot;, lonEW=&quot;E&quot;;
 			String currToken;
 			end = 0;
 			lastStrExamined = NMEA;
 			//Vm.debug(NMEA);
-/*			if (writeLog &amp;&amp; (logFlag &amp; LOGRAW) &gt; 0){ 
+/*			if (writeLog &amp;&amp; (logFlag &amp; LOGRAW) &gt; 0){
 				try {
 					logFile.write(NMEA);
 					writeLog = false;
 				} catch (IOException e) {}
 			}
 */			while(true){
-				start = NMEA.indexOf(&quot;$GP&quot;, end);  
+				start = NMEA.indexOf(&quot;$GP&quot;, end);
 				if (start == -1) break;
-				end = NMEA.indexOf(&quot;*&quot;, start);  
-				if ((end == -1)||(end+3 &gt; NMEA.length())) break;  
+				end = NMEA.indexOf(&quot;*&quot;, start);
+				if ((end == -1)||(end+3 &gt; NMEA.length())) break;
 
 
 				//Vm.debug(NMEA.substring(start,end+3));
@@ -206,8 +206,8 @@
 					//Vm.debug(&quot;checksum wrong&quot;);
 					continue;
 				}
-				// Write log after finding valid NMEA sequence 
-				if (writeLog &amp;&amp; (logFlag &amp; LOGRAW) &gt; 0){ 
+				// Write log after finding valid NMEA sequence
+				if (writeLog &amp;&amp; (logFlag &amp; LOGRAW) &gt; 0){
 					try {
 						logFile.write(NMEA.substring(start,end+3)+&quot;\n&quot;);
 						logWritten = true;
@@ -242,13 +242,13 @@
 						break;
 						case 5: lonEW = currToken;
 						break;
-						case 6: 
+						case 6:
 							if (!latlonerror) {
-								this.Fix = Convert.toInt(currToken); 
-								interpreted = true; 
+								this.Fix = Convert.toInt(currToken);
+								interpreted = true;
 								break;
 							} else {
-								this.Fix = 0; 
+								this.Fix = 0;
 								break;
 							}
 						case 7: this.numSat = Convert.toInt(currToken); interpreted = true; break;
@@ -278,7 +278,7 @@
 						break;
 						case 7: try { this.Speed = Common.parseDouble(currToken); interpreted = true; } catch (NumberFormatException e) {
 							Global.getPref().log(&quot;Ignored Exception&quot;, e, true);
-						} 
+						}
 						break;
 						} // switch
 					} // while
@@ -301,7 +301,7 @@
 						//Vm.debug(currToken);
 						switch (i){
 						case 1: this.Time = currToken; interpreted = true; break;
-						case 2: status = currToken; 
+						case 2: status = currToken;
 						if (status.equals(&quot;A&quot;)) this.Fix = 1;
 						else this.Fix = 0;
 						interpreted = true;
@@ -326,7 +326,7 @@
 						break;
 						case 7: if (status.equals(&quot;A&quot;)){
 							try {this.Speed = Common.parseDouble(currToken)*1.854;
-							interpreted = true; } catch (NumberFormatException e) { 
+							interpreted = true; } catch (NumberFormatException e) {
 								Global.getPref().log(&quot;Ignored Exception&quot;, e, true);
 							}
 						}
@@ -340,7 +340,7 @@
 						break;
 						case 9: if (status.equals(&quot;A&quot;) &amp;&amp; currToken.length()&gt; 0){
 							try {this.Date = currToken;
-							interpreted = true; } catch (NumberFormatException e) { 
+							interpreted = true; } catch (NumberFormatException e) {
 								Global.getPref().log(&quot;Ignored Exception&quot;, e, true);
 							}
 						}
@@ -351,7 +351,7 @@
 					else {
 						if (status.equals(&quot;A&quot;)){
 							this.set(latNS, latDeg, latMin, &quot;0&quot;,
-									lonEW, lonDeg, lonMin, &quot;0&quot;, TransformCoordinates.DMM);				
+									lonEW, lonDeg, lonMin, &quot;0&quot;, TransformCoordinates.DMM);
 						}
 					}
 				} // if
@@ -368,7 +368,7 @@
 						} // switch
 					} // while
 				} // if
-				
+
 				//Vm.debug(&quot;End of examine&quot;);
 			} //while
 		} catch (Exception e) {
@@ -382,11 +382,11 @@
 		return interpreted;
 	}
 
-	
+
 	/**
 	 * Sets the attributes from a GPSD string
 	 * @param gps	GPSD string with data to examine
-	 *              Format: GPSD,key=value,... 
+	 *              Format: GPSD,key=value,...
 	 * @return true if some data could be interpreted false otherwise
 	 */
 	public boolean examineGpsd(String gps){
@@ -397,12 +397,12 @@
 		while(!ex.endOfSearch()){
 			String part = ex.findNext();
 			if(part.startsWith(&quot;A=&quot;) &amp;&amp; part.indexOf('?')&lt;0){
-				// The current altitude as &quot;A=%f&quot;, meters above mean sea level. 
+				// The current altitude as &quot;A=%f&quot;, meters above mean sea level.
 				this.Alt=Common.parseDouble(part.substring(2));
 				valid = true;
 			}else if(part.startsWith(&quot;D=&quot;) &amp;&amp; part.indexOf('?')&lt;0){
 				// Returns the UTC time in the ISO 8601 format, &quot;D=yyyy-mm-ddThh:mm:ss.ssZ&quot;
-				//                                               0000000000111111111122 
+				//                                               0000000000111111111122
 				//                                               0123456789012345678901
 				String year = part.substring(2,6);
 				String month = part.substring(7,9);
@@ -414,7 +414,7 @@
 				this.Time=hour+min+sec;
 				valid = true;
 			}else if(part.startsWith(&quot;P=&quot;)){
-				// Returns the current position in the form &quot;P=%f %f&quot;; numbers are in degrees, latitude first. 
+				// Returns the current position in the form &quot;P=%f %f&quot;; numbers are in degrees, latitude first.
 				if(part.indexOf('?')&lt;0){
 					this.Fix = 1;
 					int spacepos=part.indexOf(' ');
@@ -431,7 +431,7 @@
 				valid = true;
 			}else if(part.startsWith(&quot;Q=&quot;)){
 				// Returns &quot;Q=%d %f %f %f %f %f&quot;: a count of satellites used in the last fix,
-				// and five dimensionless dilution-of-precision (DOP) numbers -- 
+				// and five dimensionless dilution-of-precision (DOP) numbers --
 				// spherical, horizontal, vertical, time, and total geometric.
 				int spacepos=part.indexOf(' ');
 				if(part.indexOf('?')&lt;0 &amp;&amp; spacepos&gt;=3){
@@ -454,7 +454,7 @@
 		}
 		return valid;
 	}
-		
+
 	private boolean checkSumOK(String nmea){
 		int startPos = 1; // begin after $
 		int endPos = nmea.length() - 3;// without * an two checksum chars


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002587.html">[Cachewolf-svn] r2631 - in trunk: . res_noewe/mmc/pda_vga
</A></li>
	<LI>Next message: <A HREF="002589.html">[Cachewolf-svn] r2633 - in trunk/src/CacheWolf: exp imp navi
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2588">[ date ]</a>
              <a href="thread.html#2588">[ thread ]</a>
              <a href="subject.html#2588">[ subject ]</a>
              <a href="author.html#2588">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">More information about the Cachewolf-svn
mailing list</a><br>
</body></html>
