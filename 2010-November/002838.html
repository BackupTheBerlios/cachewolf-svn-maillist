<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Cachewolf-svn] r2850 - in trunk: res_noewe/languages	src/CacheWolf/imp
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cachewolf-svn/2010-November/index.html" >
   <LINK REL="made" HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r2850%20-%20in%20trunk%3A%20res_noewe/languages%0A%09src/CacheWolf/imp&In-Reply-To=%3C20101107145845.A05BA480F1B%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002837.html">
   <LINK REL="Next"  HREF="002839.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cachewolf-svn] r2850 - in trunk: res_noewe/languages	src/CacheWolf/imp</H1>
    <B>araber95 at mail.berlios.de</B> 
    <A HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r2850%20-%20in%20trunk%3A%20res_noewe/languages%0A%09src/CacheWolf/imp&In-Reply-To=%3C20101107145845.A05BA480F1B%40sheep.berlios.de%3E"
       TITLE="[Cachewolf-svn] r2850 - in trunk: res_noewe/languages	src/CacheWolf/imp">araber95 at mail.berlios.de
       </A><BR>
    <I>Sun Nov  7 03:58:45 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002837.html">[Cachewolf-svn] r2849 - branches/r1.2/src/CacheWolf
</A></li>
        <LI>Next message: <A HREF="002839.html">[Cachewolf-svn] r2851 - trunk/res_noewe/webmapservices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2838">[ date ]</a>
              <a href="thread.html#2838">[ thread ]</a>
              <a href="subject.html#2838">[ subject ]</a>
              <a href="author.html#2838">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: araber95
Date: 2010-11-07 15:58:45 +0100 (Sun, 07 Nov 2010)
New Revision: 2850

Modified:
   trunk/res_noewe/languages/DE.cfg
   trunk/res_noewe/languages/EN.cfg
   trunk/res_noewe/languages/FR.cfg
   trunk/res_noewe/languages/NL.cfg
   trunk/res_noewe/languages/PL.cfg
   trunk/res_noewe/languages/SV.cfg
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
download : check for update now reflects presence of trackables (if they should be loaded).

Modified: trunk/res_noewe/languages/DE.cfg
===================================================================
--- trunk/res_noewe/languages/DE.cfg	2010-11-07 12:02:39 UTC (rev 2849)
+++ trunk/res_noewe/languages/DE.cfg	2010-11-07 14:58:45 UTC (rev 2850)
@@ -979,7 +979,7 @@
 5511=Gefunden+
 5512=\nneue / zu aktualisierende Caches
 5513=Laden von:+
-5514=Travelbug:+
+5514=\nTravelbug:+
 5515=Fehler beim Laden des Caches.\nBitte &#252;berpr&#252;fen Sie Ihre Internetverbindung und ob als Sprache bei GC.com English ausgew&#228;hlt ist.\nNoch einmal versuchen?
 5516=+Cachebeschreibungen\nkonnten nicht geladen werden.
 5517=Aktualisierungen importieren?

Modified: trunk/res_noewe/languages/EN.cfg
===================================================================
--- trunk/res_noewe/languages/EN.cfg	2010-11-07 12:02:39 UTC (rev 2849)
+++ trunk/res_noewe/languages/EN.cfg	2010-11-07 14:58:45 UTC (rev 2850)
@@ -979,7 +979,7 @@
 5511=Found+
 5512=\nnew / update caches
 5513=Loading:+
-5514=Getting bug:+
+5514=\nGetting bug:+
 5515=Failed to load cache.\nPlease check your internet connection.\nRetry?
 5516=+cache descriptions\ncould not be loaded.
 5517=Spider updates?

Modified: trunk/res_noewe/languages/FR.cfg
===================================================================
--- trunk/res_noewe/languages/FR.cfg	2010-11-07 12:02:39 UTC (rev 2849)
+++ trunk/res_noewe/languages/FR.cfg	2010-11-07 14:58:45 UTC (rev 2850)
@@ -979,7 +979,7 @@
 5511=Trouv&#233;e+
 5512=\nnouveau / mettre &#224; jour Caches
 5513=Chargeant:+
-5514=Travel Bug:+
+5514=\nTravel Bug:+
 5515=Erreur en chargeant la cache.\nMerci de v&#233;rifier votre connexion internet et si vous avez language englais chez gc.com..\nContinuer d'essayer?
 5516=+descriptions cache\nne pouvait pas &#234;tre charg&#233;.
 5517=Spider mises &#224; jour?

Modified: trunk/res_noewe/languages/NL.cfg
===================================================================
--- trunk/res_noewe/languages/NL.cfg	2010-11-07 12:02:39 UTC (rev 2849)
+++ trunk/res_noewe/languages/NL.cfg	2010-11-07 14:58:45 UTC (rev 2850)
@@ -979,7 +979,7 @@
 5511=Gevonden+
 5512=\nniew / update caches
 5513=Bezig met laden:+
-5514=Travelbug
+5514=\nTravelbug:+
 5515=Failed to load-cache.\nPlease Controleer je internetverbinding.\nRetry?
 5516=+cache beschrijvingen\ncould niet worden geladen.
 5517=Spider updates?

Modified: trunk/res_noewe/languages/PL.cfg
===================================================================
--- trunk/res_noewe/languages/PL.cfg	2010-11-07 12:02:39 UTC (rev 2849)
+++ trunk/res_noewe/languages/PL.cfg	2010-11-07 14:58:45 UTC (rev 2850)
@@ -979,7 +979,7 @@
 5511=Znaleziona+
 5512=\nnowy / aktualizacja skrzynki
 5513=Wczytuje:+
-5514=Pobieram bugi:+
+5514=\nPobieram bugi:+
 5515=Nie mozna zaladowac skrzynki.\nProsze sprawdzic polaczenie z netem.\nSprobowac ponownie?
 5516=+Nie mozna zaladowac\nopisu skrzynek.
 5517=Spider updates?

Modified: trunk/res_noewe/languages/SV.cfg
===================================================================
--- trunk/res_noewe/languages/SV.cfg	2010-11-07 12:02:39 UTC (rev 2849)
+++ trunk/res_noewe/languages/SV.cfg	2010-11-07 14:58:45 UTC (rev 2850)
@@ -93,7 +93,7 @@
 161=Visa Blacklist
 162=Ladda kalibrerad
 170=V&#228;lj databas
-171=profil finns inte: +
+171=profil finns inte:+
 172=Fel: kan inte skapa kartor katalog:
 173=gpsbabel:
 174=korta namn
@@ -131,8 +131,8 @@
 207=** oanv&#228;nda **
 208=Rebuild index
 209=Rebuilding index
-210=cachar utg&#229;: +
-211=Caches till: +
+210=cachar utg&#229;:+
+211=Caches till:+
 212=Ta bort alla. XML-filer inte index.xml och tillh&#246;rande bilder
 213=bort f&#246;r&#228;ldral&#246;sa
 214=Ny v&#228;gpunkt
@@ -394,8 +394,8 @@
 1026=# Rec
 1027=OC-Index
 1028=)?
-1029=Det finns waypoints som &#228;r markerade men osynligt.\n (Main cachar: +
-1030=, ytterligare Waypoints: +
+1029=Det finns waypoints som &#228;r markerade men osynligt.\n (Main cachar:+
+1030=, ytterligare Waypoints:+
 1031=Ta bort dem ocks&#229;?
 1032=S&#246;kv&#228;g till webbl&#228;sare:
 1033=&#228;r felaktigt!
@@ -502,10 +502,10 @@
 1614=Fel vid unzipping udpate fil
 1615=Fel vid analys uppdaterad fil, ange:
 1616=Fel: Kunde inte h&#228;mta udpate fil fr&#229;n opencaching.de
-1617=Ignorera fel i html-Cache-Beskrivning: &quot;&lt;img&quot; utan &quot;src =&quot; i cache +
-1618=Ignorera fel i Cache: +
-1619=: kunde inte ladda ner bild fr&#229;n URL: +
-1620=h&#228;mta inb&#228;ddade bilder: +
+1617=Ignorera fel i html-Cache-Beskrivning: &quot;&lt;img&quot; utan &quot;src =&quot; i cache+
+1618=Ignorera fel i Cache:+
+1619=: kunde inte ladda ner bild fr&#229;n URL:+
+1620=h&#228;mta inb&#228;ddade bilder:+
 1621=Fel vid tolkning av data\n fr&#229;n Opencaching.de, &#228;r\nThis troligen ett fel p&#229; Opencaching.de\nRetry senare\n Status:
 1622=Uteslut hittade cachar
 1623=Importera upto:
@@ -530,7 +530,7 @@
 1710=Kan inte r&#228;kna tom str&#228;ng
 1711=Ers&#228;ttning tecken str&#228;ngar m&#229;ste vara lika l&#229;nga
 1712=Ogiltig samordna:
-1713=Ogiltigt samordna format. Till&#229;tna &#228;r cw / dd / DMM / DMS / +
+1713=Ogiltigt samordna format. Till&#229;tna &#228;r cw / dd / DMM / DMS /+
 1714=G&#229; till: Waypoint finns inte:
 1715=Instr: Startposition inte i str&#228;ng
 1716=MID: Integer argument v&#228;ntat
@@ -802,24 +802,24 @@
 4109=Laddar kartor ...
 4110=laddning
 4111=Koordinater m&#229;ste anges i formatet N XX XX.XXX E XXX XX.XXX
-4112=IO-Fel vid kopiering bild fr&#229;n: +
+4112=IO-Fel vid kopiering bild fr&#229;n:+
 4113=+till:+
 4114=+error:+
-4115=Fel: Kunde inte avkoda bild: +
+4115=Fel: Kunde inte avkoda bild:+
 4116=+- bild inte kopieras
-4117=Fel vid import. Map-fil: +
+4117=Fel vid import. Map-fil:+
 4118=IO-Fel vid l&#228;sning eller skrivning kalibrering fil
-4119=Ingen kalibrering fil hittades f&#246;r: +
+4119=Ingen kalibrering fil hittades f&#246;r:+
 4120=gjort.
 4200=V&#228;lj karta katalog
 4201=Information
 4203=Lastspecifikationers av kartor ...
 4204=Ingen georefererade kartan tillg&#228;nglig\n V&#228;lj en skala\n att visa sp&#229;ret och cachar. \n Du kan f&#229; en av menyn: Application / Kartor / download kalibrerad
-4206=Dist: +
+4206=Dist:+
 4207=Fel
-4208=Bug:\nillegal mapChangeModus: +
+4208=Bug:\nillegal mapChangeModus:+
 4210=Flytta kartan kan inte k&#246;ras utan en karta - v&#228;lj ett. \n Du kan v&#228;lja en tom karta
-4211=No +
+4211=No+
 4212=mindre
 4213=mer
 4214=+detaljerad karta finns
@@ -829,7 +829,7 @@
 4218=Kunde inte l&#228;sa kartan:
 4219=Inte tillr&#228;ckligt med minne f&#246;r att l&#228;sa kartan:
 4220=Du kan prova att st&#228;nga\n alla prgrams och 0A&#156;tarta CacheWolf
-4221=inte tillr&#228;ckligt med resurser f&#246;r att ladda kartan: +
+4221=inte tillr&#228;ckligt med resurser f&#246;r att ladda kartan:+
 4222=Out of memory error
 4230=G&#229; hit$g
 4231=G&#229; hit
@@ -890,8 +890,8 @@
 4296=detailing
 4300=tom 1 pixel=+
 4301=+meter
-4302=Lat / Lon r&#228;ckh&#229;ll n&#228;r du l&#228;ser +
-4303=inte tillr&#228;ckligt rader i filen +
+4302=Lat / Lon r&#228;ckh&#229;ll n&#228;r du l&#228;ser+
+4303=inte tillr&#228;ckligt rader i filen+
 4304=inte tillr&#228;ckligt med po&#228;ng f&#246;r att kalibrera kartan
 4305=Ej till&#229;tet v&#228;rden i affine\n (matris kan inte inverteras)\n i filen
 4306=map inte kalibreras
@@ -952,11 +952,11 @@
 4830=Inga matchande Gau&#157;F-Kr&#159;cger-rand i EPSG-kodlistan p&#229;. WMS
 4831=getMapInfoObject: Koordinatsystem inte st&#246;ds av Cachewolf:
 4900=+&#228;r inte en tysk Gauss-Krueger samordna
-4920=EPSG kod +
+4920=EPSG kod+
 4921=+st&#246;ds
-4922=EPSG kod saknas i: +
-4923=fromWgs84: EPSG kod +
-4924=ToWgs84: EPSG kod +
+4922=EPSG kod saknas i:+
+4923=fromWgs84: EPSG kod+
+4924=ToWgs84: EPSG kod+
 5000=Load Cachelist
 5001=Kan inte spindel ytterligare waypoint direkt.\nPlease kolla viktigaste cache.
 5002=: F&#246;r n&#228;rvarande &#228;r denna funktion endast tillg&#228;nglig f&#246;r geocaching.com och opencaching. (CZ, DE, org.uk, pl).
@@ -976,17 +976,17 @@
 5508=Loggar in ..
 5509=Koordinater f&#246;r centrum m&#229;ste st&#228;llas
 5510=Spider Options
-5511=Found +
+5511=Found+
 5512=\nnya / uppdatering cachar
-5513=Laddar: +
-5514=Getting bug: +
+5513=Laddar:+
+5514=\nGetting bug:+
 5515=Kunde inte ladda cache.\nPlease kontrollera din Internetanslutning.\nRetry?
 5516=+cache beskrivningar\ncould inte laddas.
 5517=Spider uppdateringar?
 5518=+cachar i databasen beh&#246;ver uppdateras. Uppdatera nu?
 5519=Information
 5520=Endast ges maximalt cachar lastades.\nRepeat spidering senare att l&#228;sa mer cachar.\nNo redan existerande cachar har uppdaterats.
-5521=Sida +
+5521=Sida+
 5522=S&#246;k &#228;ldre xml-filer (utan &lt;CACHE... /&gt;)?
 6000=Guid
 6001=Namn
@@ -1007,7 +1007,7 @@
 6019=Sp&#229;rningsnummer
 6020=Travelbug hittades inte.
 6021=Mer &#228;n en travelbug hittades. Ange namn mer exakt.
-6022=: Aktuella cache: +
+6022=: Aktuella cache:+
 6025=Namn:
 6026=Sp&#229;rningsnummer:
 6027=Id / GUID:
@@ -1052,7 +1052,7 @@
 7013=fel
 7020=rekommenderade versionen typ
 7021=typ av denna version
-7022=detta +
+7022=detta+
 7023=nedladdning Fel nuvarande version information
 7100=Serial Port Options
 7101=Uppdatera Ports$u
@@ -1062,11 +1062,11 @@
 7105=Forward GPS-data att vara v&#228;rd
 7106=Alla data fr&#229;n GPS kommer att skickas till TCP-port 23\n och kan omf&#246;rdelas det till en seriell port\n av
 7107=Intervall i sekunder f&#246;r avverkning
-7108=Fel: Kunde inte &#246;ppna serieport: +
+7108=Fel: Kunde inte &#246;ppna serieport:+
 7109=Fel: Kunde inte h&#228;mta lista &#246;ver tillg&#228;ngliga seriella portar
 7110=GPS hittades inte
-7111=Trying +
-7112=at +
+7111=Trying+
+7112=at+
 7113=- fick en del data
 7114=GPS Port hittades
 7115=- Ingen GPS data tag hittades

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-11-07 12:02:39 UTC (rev 2849)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-11-07 14:58:45 UTC (rev 2850)
@@ -1659,6 +1659,9 @@
 			numLogUpdates++;
 			ret = true;
 		}
+		if (!ret &amp;&amp; TBchanged(ch, CacheDescription)) {
+			ret = true;
+		}
 		if (save)
 			ch.save();
 		return ret;
@@ -1858,7 +1861,7 @@
 	 * 
 	 * @return boolean newLogExists
 	 */
-	private boolean newFoundExists(CacheHolder ch, String cacheDescrition) {
+	private boolean newFoundExists(CacheHolder ch, String cacheDescription) {
 		if (!pref.checkLog)
 			return false;
 		Time lastLogCW = new Time();
@@ -1877,12 +1880,12 @@
 		lastLogGC.millis = 0;
 		String[] SDate;
 		String stmp = &quot;&quot;;
-		RexPropLogDate.search(cacheDescrition);
+		RexPropLogDate.search(cacheDescription);
 		if (RexPropLogDate.didMatch()) {
 			stmp = RexPropLogDate.stringMatched(1);
 		} else {
 			pref.log(&quot;check logDateRex in spider.def&quot; 
-					+ Preferences.NEWLINE + cacheDescrition);
+					+ Preferences.NEWLINE + cacheDescription);
 			return false;
 		}
 		if (stmp.indexOf(&quot;day&quot;) &gt; 0) {
@@ -1911,6 +1914,15 @@
 		boolean ret = lastLogCW.compareTo(lastLogGC) &lt; 0;
 		return ret;
 	}
+	private boolean TBchanged(CacheHolder ch, String cacheDescription) {
+		// simplified Version: only presence is checked 
+		if (pref.downloadTBs) {
+			boolean hasCoin=cacheDescription.indexOf(&quot;Geocoin&quot;) &gt; -1;
+			boolean hasTB=cacheDescription.indexOf(&quot;Travel Bug Dog Tag&quot;) &gt; -1;						
+			return (ch.has_bugs() != (hasCoin || hasTB));
+		}
+		return false;
+	}
 
 	/**
 	 * Read a complete cachepage from geocaching.com including all logs. This is


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002837.html">[Cachewolf-svn] r2849 - branches/r1.2/src/CacheWolf
</A></li>
	<LI>Next message: <A HREF="002839.html">[Cachewolf-svn] r2851 - trunk/res_noewe/webmapservices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2838">[ date ]</a>
              <a href="thread.html#2838">[ thread ]</a>
              <a href="subject.html#2838">[ subject ]</a>
              <a href="author.html#2838">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">More information about the Cachewolf-svn
mailing list</a><br>
</body></html>
