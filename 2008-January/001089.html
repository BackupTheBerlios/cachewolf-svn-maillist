<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Cachewolf-svn] r1195 - in trunk: res_noewe/languages	src/CacheWolf/navi
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cachewolf-svn/2008-January/index.html" >
   <LINK REL="made" HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r1195%20-%20in%20trunk%3A%20res_noewe/languages%0A%09src/CacheWolf/navi&In-Reply-To=%3C200801251948.m0PJmiYR031954%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001088.html">
   <LINK REL="Next"  HREF="001090.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cachewolf-svn] r1195 - in trunk: res_noewe/languages	src/CacheWolf/navi</H1>
    <B>pfeffer at mail.berlios.de</B> 
    <A HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r1195%20-%20in%20trunk%3A%20res_noewe/languages%0A%09src/CacheWolf/navi&In-Reply-To=%3C200801251948.m0PJmiYR031954%40sheep.berlios.de%3E"
       TITLE="[Cachewolf-svn] r1195 - in trunk: res_noewe/languages	src/CacheWolf/navi">pfeffer at mail.berlios.de
       </A><BR>
    <I>Fri Jan 25 20:48:44 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001088.html">[Cachewolf-svn] r1194 - trunk/res_noewe
</A></li>
        <LI>Next message: <A HREF="001090.html">[Cachewolf-svn] r1196 - trunk/src/CacheWolf/navi
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1089">[ date ]</a>
              <a href="thread.html#1089">[ thread ]</a>
              <a href="subject.html#1089">[ subject ]</a>
              <a href="author.html#1089">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: pfeffer
Date: 2008-01-25 20:48:22 +0100 (Fri, 25 Jan 2008)
New Revision: 1195

Modified:
   trunk/res_noewe/languages/DE.cfg
   trunk/res_noewe/languages/EN.cfg
   trunk/src/CacheWolf/navi/MapImporter.java
   trunk/src/CacheWolf/navi/MapInfoObject.java
Log:
Localisation fpr MapImport and MapInfoObject

Modified: trunk/res_noewe/languages/DE.cfg
===================================================================
--- trunk/res_noewe/languages/DE.cfg	2008-01-24 23:04:58 UTC (rev 1194)
+++ trunk/res_noewe/languages/DE.cfg	2008-01-25 19:48:22 UTC (rev 1195)
@@ -491,7 +491,23 @@
 		4109=Lade Karten...
 		4110=Lade
 		4111=Koordinaten m%fcssen in dem Format N XX XX,XXX E XXX XX,XXX eingegeben werden
+		4112=E/A-Fehler beim Kopieren von:+
+		4113=+nach:+
+		4114=+Fehler:+
+		4115=Fehler: Kann Bild nicht dekodieren:+
+		4116=+-+Bild nicht kopiert
+		4117=Fehler beim Importieren der .map-Datei:+
+		4118=E/A-Fehler beim Lesen oder Schreiben der Kalibrierungsdatei
+		4119=Keine Kalibrierungsdatei gefunden f&#252;r:+
+		4120=Fertig.
 		4200=Kartenverzeichnis w%e4hlen
+		4300=Leer 1 Punkt =+
+		4301=+meter
+		4302=Breite/L%e4nge au&#223;erhalb des zul%e4ssigen Bereiches beim Lesen von+
+		4303=Zu wenig Zeilen in Datei+
+		4304=Zu wenig Punkte, um die Karte zu kalibrieren
+		4305=Ung&#252;ltige Transformationsparameter%0a (Matrix kann nicht invertiert werden)%0a in der Datei %0a
+		4306=Karte ist nicht georeferenziert
 		4500=Ges:
 		4501=Gez:
 		4502=Gef:

Modified: trunk/res_noewe/languages/EN.cfg
===================================================================
--- trunk/res_noewe/languages/EN.cfg	2008-01-24 23:04:58 UTC (rev 1194)
+++ trunk/res_noewe/languages/EN.cfg	2008-01-25 19:48:22 UTC (rev 1195)
@@ -485,7 +485,23 @@
 		4109=Loading maps...
 		4110=loading
 		4111=Coordinates must be entered in the format N XX XX.XXX E XXX XX.XXX
+		4112=IO-Error while copying image from:+
+		4113=to:+
+		4114=+error:+
+		4115=Error: could not decode image:+
+		4116=+-+image not copied
+		4117=Error while importing .map-file:+
+		4118=IO-Error while reading or writing calibration file
+		4119=No calibration file found for:+
+		4120=done.
 		4200=Choose map directory
+		4300=empty 1 Pixel =+
+		4301=+meters
+		4302=Lat/Lon out of range while reading+
+		4303=not enough lines in file+
+		4304=not enough points to calibrate the map
+		4305=Not allowed values in affine%0a (matrix cannot be inverted)%0a in file %0a
+		4306=map not calibrated
 		4500=Tot:
 		4501=Vis:
 		4502=Fnd:

Modified: trunk/src/CacheWolf/navi/MapImporter.java
===================================================================
--- trunk/src/CacheWolf/navi/MapImporter.java	2008-01-24 23:04:58 UTC (rev 1194)
+++ trunk/src/CacheWolf/navi/MapImporter.java	2008-01-25 19:48:22 UTC (rev 1195)
@@ -180,10 +180,10 @@
 				}
 			} catch(IOException ex){
 				imageerror = true;
-				inf.addWarning(&quot;\nIO-Error while copying image from: &quot; + curInFullPath + &quot; to: &quot; + curOutFullPath + &quot; error: &quot; + ex.getMessage());
+				inf.addWarning(&quot;\n&quot;+MyLocale.getMsg(4112, &quot;IO-Error while copying image from: &quot;) + curInFullPath + MyLocale.getMsg(4113, &quot; to: &quot;) + curOutFullPath + MyLocale.getMsg(4114, &quot; error: &quot;) + ex.getMessage());
 			} catch (IllegalArgumentException e) { // thrown from Image.getImageInfo when it could not interprete the header (e.g. bmp with 32 bits per pixel)
 				imageerror = true;
-				inf.addWarning(&quot;\nError: could not decode image: &quot; + curInFullPath + &quot; - image not copied&quot;);
+				inf.addWarning(&quot;\n&quot;+MyLocale.getMsg(4115, &quot;Error: could not decode image: &quot;) + curInFullPath + MyLocale.getMsg(4116, &quot; - image not copied&quot;));
 			} finally {
 				try {
 					if (in != null) in.close();
@@ -297,16 +297,16 @@
 					} // while
 					if (inMap != null)	inMap.close();
 				} catch(IllegalArgumentException ex){ // is thrown from Convert.toDouble and saveWFL if affine[0-5]==0 NumberFormatException is a subclass of IllegalArgumentExepction
-					inf.addWarning(&quot;\nError while importing .map-file: &quot;+ex.getMessage());
+					inf.addWarning(&quot;\n&quot;+MyLocale.getMsg(4117, &quot;Error while importing .map-file: &quot;)+ex.getMessage());
 				} catch(IOException ex){
-					inf.addWarning(&quot;\nIO-Error while reading or writing calibration file\n&quot; + ex.getMessage());
+					inf.addWarning(&quot;\n&quot;+MyLocale.getMsg(4118, &quot;IO-Error while reading or writing calibration file&quot;)+&quot;\n&quot; + ex.getMessage());
 				} 
 			} else { // if map file.exists
-				if (!imageerror) inf.addWarning(&quot;\nNo calibration file found for: &quot; + currfile + &quot; - you can calibrate it manually&quot;);
+				if (!imageerror) inf.addWarning(&quot;\n&quot;+MyLocale.getMsg(4119, &quot;No calibration file found for: &quot;) + currfile + &quot; - you can calibrate it manually&quot;);
 			}
 		} // for file
 		Vm.showWait(this, false);
-		inf.addText(&quot;\ndone.&quot;);
+		inf.addText(&quot;\n&quot;+MyLocale.getMsg(4120, &quot;done.&quot;));
 		inf.addOkButton();
 		//inf.addOkButton(); doesn't work
 		if(Global.mainTab.mm != null) Global.mainTab.mm.mapsloaded = false; 

Modified: trunk/src/CacheWolf/navi/MapInfoObject.java
===================================================================
--- trunk/src/CacheWolf/navi/MapInfoObject.java	2008-01-24 23:04:58 UTC (rev 1194)
+++ trunk/src/CacheWolf/navi/MapInfoObject.java	2008-01-25 19:48:22 UTC (rev 1195)
@@ -25,7 +25,9 @@
 
 
 /**
- * class to read, save and do the calculations for calibrated and calibrating maps
+ * class to read, save and do the calculations for calibrated and 
+ * calibrating maps
+ * start offset for language file: 4300
  * @author pfeffer
  *
  */
@@ -89,7 +91,7 @@
 	 */
 	public MapInfoObject(double scalei, double lat) {
 		super(new CWPoint(1,0), new CWPoint(0,1));
-		mapName=&quot;empty 1 Pixel = &quot;+scalei+&quot;meters&quot;;
+		mapName=MyLocale.getMsg(4300, &quot;empty 1 Pixel = &quot;) + scalei + MyLocale.getMsg(4301,&quot;meters&quot;);
 		double meters2deg = 1/(1000*(new CWPoint(0,0)).getDistance(new CWPoint(1,0)));
 		double pixel2deg = meters2deg * scalei;
 		affine[0]=0; //x2lat
@@ -197,10 +199,10 @@
 			if( !buttomright.isValid() ) {
 				affine[0] = 0; affine[1] = 0; affine[2] = 0; affine[3] = 0; 
 				topleft.makeInvalid();
-				throw (new IOException(&quot;Lat/Lon out of range while reading &quot;+mapsPath + thisMap + &quot;.wfl&quot;));
+				throw (new IOException(MyLocale.getMsg(4301, &quot;Lat/Lon out of range while reading &quot;)+mapsPath + thisMap + &quot;.wfl&quot;));
 			}
 		} catch (NullPointerException e) { // in.readline liefert null zur&#252;ck, wenn keine Daten mehr vorhanden sind
-			throw (new IOException(&quot;not enough lines in file &quot;+mapsPath + thisMap + &quot;.wfl&quot;));
+			throw (new IOException(MyLocale.getMsg(4303, &quot;not enough lines in file &quot;)+mapsPath + thisMap + &quot;.wfl&quot;));
 		}
 		doCalculations();
 		origAffineUpperLeft = new CWPoint(affineTopleft);
@@ -219,7 +221,7 @@
 		//N 48 16.000 E 11 32.000
 		//N 48 16.000 E 11 50.000
 		//N 48 9.000 E 11 32.000
-		if (GCPs.size() &lt; 3 ) throw new IllegalArgumentException(&quot;not enough points to calibrate the map&quot;);
+		if (GCPs.size() &lt; 3 ) throw new IllegalArgumentException(MyLocale.getMsg(4304, &quot;not enough points to calibrate the map&quot;));
 		GCPoint gcp = new GCPoint();
 		//Calculate parameters for latitutde affine transformation (affine 0,2,4)
 		Matrix X = new Matrix(GCPs.size(),3);
@@ -311,12 +313,12 @@
 			// double metersPerLat = 1000*(new CWPoint(0,0)).getDistance(new CWPoint(1,0));
 			CWPoint buttomleftimage = topleft.project(rotationRad * 180 / Math.PI + 180, heightkm);
 			CWPoint buttomleftimage2 = calcLatLon(0, heightpixel);
-			double kw = buttomleftimage.getDistance(buttomleftimage2);
-			double kw2 = buttomleftimage.getBearing(buttomleftimage2);
-			Vm.debug(&quot;project test: &quot; + buttomleftimage.getDistance(topleft));
+			//double kw = buttomleftimage.getDistance(buttomleftimage2);
+			//double kw2 = buttomleftimage.getBearing(buttomleftimage2);
+			//Vm.debug(&quot;project test: &quot; + buttomleftimage.getDistance(topleft));
 			// double heightpixel = calcMapXY(buttomleftimage).y / Math.cos(rotationRad); 
 			scale = (float) (heightkm * 1000 / heightpixel); 
-		} catch (ArithmeticException ex) { throw new ArithmeticException(&quot;Not allowed values in affine\n (matrix cannot be inverted)\n in file \n&quot; + fileNameWFL); }
+		} catch (ArithmeticException ex) { throw new ArithmeticException(MyLocale.getMsg(4305, &quot;Not allowed values in affine\n (matrix cannot be inverted)\n in file \n&quot;) + fileNameWFL); }
 	}
 
 	public void saveWFL() throws IOException, IllegalArgumentException {
@@ -334,17 +336,19 @@
 	 */
 	public void saveWFL(String mapsPath, String mapFileName) throws IOException, IllegalArgumentException {
 		if (affine[0]==0 &amp;&amp; affine[1]==0 &amp;&amp; affine[2]==0 &amp;&amp; affine[3]==0 &amp;&amp; 
-				!topleft.isValid()) throw (new IllegalArgumentException(&quot;map not calibrated&quot;));
+				!topleft.isValid()) throw (new IllegalArgumentException(MyLocale.getMsg(4306, &quot;map not calibrated&quot;)));
 		PrintWriter outp =  new PrintWriter(new BufferedWriter(new FileWriter(mapsPath + &quot;/&quot; + mapFileName + &quot;.wfl&quot;)));
-		String towrite=Convert.toString(affine[0])+&quot;\n&quot; +
-		Convert.toString(affine[1])+&quot;\n&quot; +
-		Convert.toString(affine[2])+&quot;\n&quot; + 
-		Convert.toString(affine[3])+&quot;\n&quot; + 
-		Convert.toString(affineTopleft.latDec)+&quot;\n&quot; +
-		Convert.toString(affineTopleft.lonDec)+&quot;\n&quot; +
-		Convert.toString(buttomright.latDec)+&quot;\n&quot; +
-		Convert.toString(buttomright.lonDec)+&quot;\n&quot; + 
-		((coordTrans == 0 || coordTrans == TransformCoordinates.EPSG_WGS84) ? &quot;&quot; : Convert.toString(coordTrans)+&quot;\n&quot;);
+		StringBuffer towriteB=new StringBuffer(400);
+		towriteB.append(Convert.toString(affine[0])).append(&quot;\n&quot;);
+		towriteB.append(Convert.toString(affine[1])).append(&quot;\n&quot;);
+		towriteB.append(Convert.toString(affine[2])).append(&quot;\n&quot;);
+		towriteB.append(Convert.toString(affine[3])).append(&quot;\n&quot;);
+		towriteB.append(Convert.toString(affineTopleft.latDec)).append(&quot;\n&quot;);
+		towriteB.append(Convert.toString(affineTopleft.lonDec)).append(&quot;\n&quot;);
+		towriteB.append(Convert.toString(buttomright.latDec)).append(&quot;\n&quot;);
+		towriteB.append(Convert.toString(buttomright.lonDec)).append(&quot;\n&quot;);
+		towriteB.append(((coordTrans == 0 || coordTrans == TransformCoordinates.EPSG_WGS84) ? &quot;&quot; : Convert.toString(coordTrans)+&quot;\n&quot;));
+		String towrite = towriteB.toString();
 		if (digSep.equals(&quot;,&quot;)) towrite=towrite.replace(',', '.');
 		outp.print(towrite);
 		outp.close();


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001088.html">[Cachewolf-svn] r1194 - trunk/res_noewe
</A></li>
	<LI>Next message: <A HREF="001090.html">[Cachewolf-svn] r1196 - trunk/src/CacheWolf/navi
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1089">[ date ]</a>
              <a href="thread.html#1089">[ thread ]</a>
              <a href="subject.html#1089">[ subject ]</a>
              <a href="author.html#1089">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">More information about the Cachewolf-svn
mailing list</a><br>
</body></html>
