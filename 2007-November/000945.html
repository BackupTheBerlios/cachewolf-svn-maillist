<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Cachewolf-svn] r1052 - in trunk: resources src/CacheWolf
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cachewolf-svn/2007-November/index.html" >
   <LINK REL="made" HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r1052%20-%20in%20trunk%3A%20resources%20src/CacheWolf&In-Reply-To=%3C200711102119.lAALJOZj011555%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000944.html">
   <LINK REL="Next"  HREF="000946.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cachewolf-svn] r1052 - in trunk: resources src/CacheWolf</H1>
    <B>salzkammergut at mail.berlios.de</B> 
    <A HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r1052%20-%20in%20trunk%3A%20resources%20src/CacheWolf&In-Reply-To=%3C200711102119.lAALJOZj011555%40sheep.berlios.de%3E"
       TITLE="[Cachewolf-svn] r1052 - in trunk: resources src/CacheWolf">salzkammergut at mail.berlios.de
       </A><BR>
    <I>Sat Nov 10 22:19:24 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000944.html">[Cachewolf-svn] r1051 - trunk/src/CacheWolf
</A></li>
        <LI>Next message: <A HREF="000946.html">[Cachewolf-svn] r1053 - trunk/src/CacheWolf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#945">[ date ]</a>
              <a href="thread.html#945">[ thread ]</a>
              <a href="subject.html#945">[ subject ]</a>
              <a href="author.html#945">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: salzkammergut
Date: 2007-11-10 22:19:09 +0100 (Sat, 10 Nov 2007)
New Revision: 1052

Added:
   trunk/resources/sizeLarge.png
   trunk/resources/sizeMicro.png
   trunk/resources/sizeReg.png
   trunk/resources/sizeSmall.png
   trunk/resources/sizeVLarge.png
Modified:
   trunk/resources/cachewolf.Languages.cfg
   trunk/src/CacheWolf/PreferencesScreen.java
   trunk/src/CacheWolf/TableColumnChooser.java
   trunk/src/CacheWolf/TravelbugJourneyScreen.java
   trunk/src/CacheWolf/myTableModel.java
Log:
New feature: Size of cache can be displayed in list view (needs to be configured in preferences screen)

Modified: trunk/resources/cachewolf.Languages.cfg
===================================================================
--- trunk/resources/cachewolf.Languages.cfg	2007-11-10 17:24:09 UTC (rev 1051)
+++ trunk/resources/cachewolf.Languages.cfg	2007-11-10 21:19:09 UTC (rev 1052)
@@ -182,6 +182,7 @@
 		632=Mehr
 		633=Max. logs spidern
 		634=Proxy verwenden
+		635=Gr%f6%dfe
 		700=Filter setzen
 		701=Entfernung
 		702=Schwierigkeit
@@ -257,6 +258,7 @@
 		1014=Markierte aktualisieren
 		1015=Alle w%e4hlen
 		1016=Alle abw%e4hlen
+		1017=G
 		1018=Im Browser offline %f6ffnen
 		1019=Diesen als Zentrum setzen
 		1020=Im Browser online %f6ffnen
@@ -733,6 +735,7 @@
 		632=More
 		633=Max. logs to spider
 		634=use Proxy
+		635=Size
 		700=Set filter
 		701=Distance
 		702=Difficulty
@@ -808,6 +811,7 @@
 		1014=Update cache data
 		1015=Select all
 		1016=Deselect all
+		1017=S
 		1018=Open offline in Browser
 		1019=Set this as centre
 		1020=Open online in Browser

Added: trunk/resources/sizeLarge.png
===================================================================
(Binary files differ)


Property changes on: trunk/resources/sizeLarge.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/resources/sizeMicro.png
===================================================================
(Binary files differ)


Property changes on: trunk/resources/sizeMicro.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/resources/sizeReg.png
===================================================================
(Binary files differ)


Property changes on: trunk/resources/sizeReg.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/resources/sizeSmall.png
===================================================================
(Binary files differ)


Property changes on: trunk/resources/sizeSmall.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/resources/sizeVLarge.png
===================================================================
(Binary files differ)


Property changes on: trunk/resources/sizeVLarge.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/src/CacheWolf/PreferencesScreen.java
===================================================================
--- trunk/src/CacheWolf/PreferencesScreen.java	2007-11-10 17:24:09 UTC (rev 1051)
+++ trunk/src/CacheWolf/PreferencesScreen.java	2007-11-10 21:19:09 UTC (rev 1052)
@@ -187,7 +187,8 @@
 				MyLocale.getMsg(610,&quot;Hidden&quot;),
 				MyLocale.getMsg(611,&quot;Status&quot;),
 				MyLocale.getMsg(612,&quot;Distance&quot;),
-				MyLocale.getMsg(613,&quot;Bearing&quot;)},pref.listColMap),MyLocale.getMsg(595,&quot;List&quot;),null);
+				MyLocale.getMsg(613,&quot;Bearing&quot;),
+				MyLocale.getMsg(635,&quot;Size&quot;)},pref.listColMap),MyLocale.getMsg(595,&quot;List&quot;),null);
 
 		Card c=mTab.addCard(tccBugs=new TableColumnChooser(new String[] {
 				MyLocale.getMsg(6000,&quot;Guid&quot;),

Modified: trunk/src/CacheWolf/TableColumnChooser.java
===================================================================
--- trunk/src/CacheWolf/TableColumnChooser.java	2007-11-10 17:24:09 UTC (rev 1051)
+++ trunk/src/CacheWolf/TableColumnChooser.java	2007-11-10 21:19:09 UTC (rev 1052)
@@ -11,8 +11,8 @@
 public class TableColumnChooser extends CellPanel {
 
 	String [] colNames;
-	Vector shownCols=new Vector(13);
-	Vector hiddenCols=new Vector(13);
+	Vector shownCols=new Vector(14);
+	Vector hiddenCols=new Vector(14);
 	private mButton btnDown,btnUp,btnLeft,btnRight;
 	private myList lstShown,lstHidden;
 	
@@ -187,17 +187,19 @@
 	 * Converts a comma delimited string into an integer array.
 	 * Each value is checked and has to be between min and max, If not it is
 	 * replaced with default
+	 * @param minSize TODO
 	 */ 
-	public static int[] str2Array(String configString, int min, int max, int def) {
+	public static int[] str2Array(String configString, int min, int max, int def, int minSize) {
 		Vector strConfigVector=new Vector(14);
 		SubString.split(configString,',',strConfigVector);
 		int i;
 		int nElem=strConfigVector.size();
-		int []res=new int[nElem];
+		int []res=new int[nElem&gt;minSize?nElem:minSize];
 		for (i=0; i&lt;nElem; i++) {
 			res[i]=Common.parseInt((String)strConfigVector.elementAt(i));
 			if (res[i]&lt;min || res[i]&gt;max) res[i]=def;
 		}
+		for (i=nElem+1; i&lt;minSize; i++) res[i]=def;
 		return res;
 	}
 	

Modified: trunk/src/CacheWolf/TravelbugJourneyScreen.java
===================================================================
--- trunk/src/CacheWolf/TravelbugJourneyScreen.java	2007-11-10 17:24:09 UTC (rev 1051)
+++ trunk/src/CacheWolf/TravelbugJourneyScreen.java	2007-11-10 21:19:09 UTC (rev 1052)
@@ -159,9 +159,9 @@
 		modTbJourneyList.numRows=tblMyTravelbugJourneys.size();
 		// Get the columns to display and their widths from preferences
 		modTbJourneyList.columnMap=
-			TableColumnChooser.str2Array(Global.getPref().travelbugColMap,0,11,0);
+			TableColumnChooser.str2Array(Global.getPref().travelbugColMap,0,11,0, -1);
 		modTbJourneyList.colWidth=
-			TableColumnChooser.str2Array(Global.getPref().travelbugColWidth,10,1024,50);
+			TableColumnChooser.str2Array(Global.getPref().travelbugColWidth,10,1024,50, -1);
 		modTbJourneyList.numCols=modTbJourneyList.columnMap.length;
 		
 		modTbJourneyList.select(0,12,true);

Modified: trunk/src/CacheWolf/myTableModel.java
===================================================================
--- trunk/src/CacheWolf/myTableModel.java	2007-11-10 17:24:09 UTC (rev 1051)
+++ trunk/src/CacheWolf/myTableModel.java	2007-11-10 21:19:09 UTC (rev 1052)
@@ -30,12 +30,12 @@
 	/** How the columns are mapped onto the list view. If colMap[i]=j, it means that
 	 * the element j (as per the list below) is visible in column i. 
 	 * [0]TickBox, [1]Type, [2]Distance, [3]Terrain, [4]waypoint, [5]name, [6]coordinates, 
-	 * [7]owner, [8]datehidden, [9]status, [10]distance, [11]bearing
+	 * [7]owner, [8]datehidden, [9]status, [10]distance, [11]bearing, [12] Size
 	 */
 	private int[] colMap;
 	/** The column widths corresponding to the list of columns above */
 	private int[] colWidth;
-	private String [] colName = {&quot; &quot;,&quot;?&quot;,MyLocale.getMsg(1000,&quot;D&quot;),MyLocale.getMsg(1001,&quot;T&quot;),MyLocale.getMsg(1002,&quot;Waypoint&quot;),&quot;Name&quot;,MyLocale.getMsg(1004,&quot;Location&quot;),MyLocale.getMsg(1005,&quot;Owner&quot;),MyLocale.getMsg(1006,&quot;Hidden&quot;),MyLocale.getMsg(1007,&quot;Status&quot;),MyLocale.getMsg(1008,&quot;Dist&quot;),MyLocale.getMsg(1009,&quot;Bear&quot;)};
+	private String [] colName = {&quot; &quot;,&quot;?&quot;,MyLocale.getMsg(1000,&quot;D&quot;),MyLocale.getMsg(1001,&quot;T&quot;),MyLocale.getMsg(1002,&quot;Waypoint&quot;),&quot;Name&quot;,MyLocale.getMsg(1004,&quot;Location&quot;),MyLocale.getMsg(1005,&quot;Owner&quot;),MyLocale.getMsg(1006,&quot;Hidden&quot;),MyLocale.getMsg(1007,&quot;Status&quot;),MyLocale.getMsg(1008,&quot;Dist&quot;),MyLocale.getMsg(1009,&quot;Bear&quot;),MyLocale.getMsg(1017,&quot;S&quot;)};//TODO
 	
 	public static Image cacheImages[] = new Image[454]; // Images are used by TableControl
 	private static Image noFindLogs[] = new Image[4];
@@ -45,6 +45,7 @@
 	private boolean sortAsc = false;
 	private int sortedBy = -1;
 	private FontMetrics fm;
+	private mImage picSizeMicro,picSizeSmall,picSizeReg,picSizeLarge,picSizeVLarge;
 	/** This is the modifier (Shift &amp; Control key status) for Pen Events
 	 * it is set in myTableControl.onEvent */
 	public int penEventModifiers; 
@@ -99,6 +100,11 @@
 		bug = new mImage(&quot;bug.png&quot;);bug.transparentColor=Color.DarkBlue;
 		checkboxTicked = new Image(&quot;checkboxTicked.png&quot;);
 		checkboxUnticked= new Image(&quot;checkboxUnticked.png&quot;);
+		picSizeMicro=new mImage(&quot;sizeMicro.png&quot;); picSizeMicro.transparentColor=Color.White;
+		picSizeSmall=new mImage(&quot;sizeSmall.png&quot;); picSizeSmall.transparentColor=Color.White;
+		picSizeReg=new mImage(&quot;sizeReg.png&quot;); picSizeReg.transparentColor=Color.White;
+		picSizeLarge=new mImage(&quot;sizeLarge.png&quot;); picSizeLarge.transparentColor=Color.White;
+		picSizeVLarge=new mImage(&quot;sizeVLarge.png&quot;); picSizeVLarge.transparentColor=Color.White;
 		updateRows();
 	}
 	
@@ -107,8 +113,8 @@
 	 *
 	 */
 	public void setColumnNamesAndWidths() {
-		colMap=TableColumnChooser.str2Array(Global.getPref().listColMap,0,11,0);
-		colWidth=TableColumnChooser.str2Array(Global.getPref().listColWidth,10,1024,50);
+		colMap=TableColumnChooser.str2Array(Global.getPref().listColMap,0,12,0, -1);
+		colWidth=TableColumnChooser.str2Array(Global.getPref().listColWidth,10,1024,50, colMap.length);
 		numCols=colMap.length;
 		clearCellAdjustments();
 		// If the displayed columns include the checkbox, we use the full menu
@@ -277,6 +283,15 @@
 							return (String)ch.distance;
 						case 11: // Bearing
 							return (String)ch.bearing;
+						case 12: // Size
+							switch (ch.CacheSize.charAt(0)) {
+								case 'M': return picSizeMicro;
+								case 'S': return picSizeSmall;
+								case 'R': return picSizeReg;
+								case 'L': return picSizeLarge;
+								case 'V': return picSizeVLarge;
+								default: return &quot;?&quot;;
+							}
 					} // Switch
 				} // if
 			} catch (Exception e) { return null; }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000944.html">[Cachewolf-svn] r1051 - trunk/src/CacheWolf
</A></li>
	<LI>Next message: <A HREF="000946.html">[Cachewolf-svn] r1053 - trunk/src/CacheWolf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#945">[ date ]</a>
              <a href="thread.html#945">[ thread ]</a>
              <a href="subject.html#945">[ subject ]</a>
              <a href="author.html#945">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">More information about the Cachewolf-svn
mailing list</a><br>
</body></html>
