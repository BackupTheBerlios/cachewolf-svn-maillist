<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Cachewolf-svn] r1294 - in trunk/src: CacheWolf CacheWolf/imp	CacheWolf/navi exp utils
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cachewolf-svn/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r1294%20-%20in%20trunk/src%3A%20CacheWolf%20CacheWolf/imp%0A%09CacheWolf/navi%20exp%20utils&In-Reply-To=%3C200803261705.m2QH5QSQ007338%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001187.html">
   <LINK REL="Next"  HREF="001189.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cachewolf-svn] r1294 - in trunk/src: CacheWolf CacheWolf/imp	CacheWolf/navi exp utils</H1>
    <B>engywuck at mail.berlios.de</B> 
    <A HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r1294%20-%20in%20trunk/src%3A%20CacheWolf%20CacheWolf/imp%0A%09CacheWolf/navi%20exp%20utils&In-Reply-To=%3C200803261705.m2QH5QSQ007338%40sheep.berlios.de%3E"
       TITLE="[Cachewolf-svn] r1294 - in trunk/src: CacheWolf CacheWolf/imp	CacheWolf/navi exp utils">engywuck at mail.berlios.de
       </A><BR>
    <I>Wed Mar 26 18:05:26 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001187.html">[Cachewolf-svn] r1293 - trunk/docs
</A></li>
        <LI>Next message: <A HREF="001189.html">[Cachewolf-svn] r1295 - trunk/res_noewe/languages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1188">[ date ]</a>
              <a href="thread.html#1188">[ thread ]</a>
              <a href="subject.html#1188">[ subject ]</a>
              <a href="author.html#1188">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: engywuck
Date: 2008-03-26 18:04:12 +0100 (Wed, 26 Mar 2008)
New Revision: 1294

Modified:
   trunk/src/CacheWolf/Attribute.java
   trunk/src/CacheWolf/Attributes.java
   trunk/src/CacheWolf/AttributesSelector.java
   trunk/src/CacheWolf/AttributesViewer.java
   trunk/src/CacheWolf/CWPoint.java
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/CacheHolderDetail.java
   trunk/src/CacheWolf/CacheList.java
   trunk/src/CacheWolf/CacheType.java
   trunk/src/CacheWolf/CacheWolf.java
   trunk/src/CacheWolf/CalcPanel.java
   trunk/src/CacheWolf/CoordsScreen.java
   trunk/src/CacheWolf/DBStats.java
   trunk/src/CacheWolf/DataMover.java
   trunk/src/CacheWolf/DateTimeChooser.java
   trunk/src/CacheWolf/DetailsPanel.java
   trunk/src/CacheWolf/Filter.java
   trunk/src/CacheWolf/FilterScreen.java
   trunk/src/CacheWolf/GPSPortOptions.java
   trunk/src/CacheWolf/GPXImporter.java
   trunk/src/CacheWolf/Global.java
   trunk/src/CacheWolf/HintLogPanel.java
   trunk/src/CacheWolf/HttpConnection.java
   trunk/src/CacheWolf/ImageDetailForm.java
   trunk/src/CacheWolf/ImageInteractivePanel.java
   trunk/src/CacheWolf/ImagePanel.java
   trunk/src/CacheWolf/InfoBox.java
   trunk/src/CacheWolf/InfoScreen.java
   trunk/src/CacheWolf/LOCXMLImporter.java
   trunk/src/CacheWolf/LogList.java
   trunk/src/CacheWolf/MainForm.java
   trunk/src/CacheWolf/MainMenu.java
   trunk/src/CacheWolf/MainTab.java
   trunk/src/CacheWolf/Matrix.java
   trunk/src/CacheWolf/MyComparer.java
   trunk/src/CacheWolf/MyLocale.java
   trunk/src/CacheWolf/MyScrollBarPanel.java
   trunk/src/CacheWolf/NewProfileForm.java
   trunk/src/CacheWolf/NotesScreen.java
   trunk/src/CacheWolf/OCXMLImporter.java
   trunk/src/CacheWolf/OCXMLImporterScreen.java
   trunk/src/CacheWolf/ParseLatLon.java
   trunk/src/CacheWolf/Preferences.java
   trunk/src/CacheWolf/PreferencesScreen.java
   trunk/src/CacheWolf/Profile.java
   trunk/src/CacheWolf/ProfileDataForm.java
   trunk/src/CacheWolf/ProfilesForm.java
   trunk/src/CacheWolf/RadarPanel.java
   trunk/src/CacheWolf/Rebuild.java
   trunk/src/CacheWolf/Reducer.java
   trunk/src/CacheWolf/STRreplace.java
   trunk/src/CacheWolf/SafeXML.java
   trunk/src/CacheWolf/SearchCache.java
   trunk/src/CacheWolf/ShowCacheInBrowser.java
   trunk/src/CacheWolf/SolverPanel.java
   trunk/src/CacheWolf/SpiderGC.java
   trunk/src/CacheWolf/StatusBar.java
   trunk/src/CacheWolf/TableColumnChooser.java
   trunk/src/CacheWolf/TableForm.java
   trunk/src/CacheWolf/TablePanel.java
   trunk/src/CacheWolf/Test.java
   trunk/src/CacheWolf/TravelbugJourneyScreen.java
   trunk/src/CacheWolf/TravelbugScreen.java
   trunk/src/CacheWolf/UrlFetcher.java
   trunk/src/CacheWolf/Version.java
   trunk/src/CacheWolf/imp/KMLImporter.java
   trunk/src/CacheWolf/myInteractivePanel.java
   trunk/src/CacheWolf/myTableControl.java
   trunk/src/CacheWolf/myTableModel.java
   trunk/src/CacheWolf/navi/Area.java
   trunk/src/CacheWolf/navi/CWGPSPoint.java
   trunk/src/CacheWolf/navi/GotoPanel.java
   trunk/src/CacheWolf/navi/MapImage.java
   trunk/src/CacheWolf/navi/MapImporter.java
   trunk/src/CacheWolf/navi/MapInfoObject.java
   trunk/src/CacheWolf/navi/MapLoader.java
   trunk/src/CacheWolf/navi/MapLoaderGui.java
   trunk/src/CacheWolf/navi/MapSymbol.java
   trunk/src/CacheWolf/navi/MapsList.java
   trunk/src/CacheWolf/navi/MovingMap.java
   trunk/src/CacheWolf/navi/Navigate.java
   trunk/src/CacheWolf/navi/SelectMap.java
   trunk/src/CacheWolf/navi/SkyOrientation.java
   trunk/src/CacheWolf/navi/TrackOverlay.java
   trunk/src/CacheWolf/navi/TrackPoint.java
   trunk/src/CacheWolf/navi/TransformCoordinates.java
   trunk/src/exp/Exporter.java
   trunk/src/exp/GPXExporter.java
   trunk/src/exp/HTMLExporter.java
   trunk/src/exp/KMLExporter.java
   trunk/src/exp/LocExporter.java
   trunk/src/exp/MagellanExporter.java
   trunk/src/exp/PCX5Exporter.java
   trunk/src/exp/TPLExporter.java
   trunk/src/exp/TomTomExporter.java
   trunk/src/exp/TomTomExporterScreen.java
   trunk/src/utils/CWWrapper.java
   trunk/src/utils/FileBugfix.java
Log:
Elimination of a few hundred compiler warnings.

Modified: trunk/src/CacheWolf/Attribute.java
===================================================================
--- trunk/src/CacheWolf/Attribute.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/Attribute.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,7 +1,7 @@
 package CacheWolf;
 
 import ewe.fx.mImage;
-import ewe.io.File;
+import ewe.io.FileBase;
 
 /**
  * This class represents a single attribute
@@ -113,7 +113,7 @@
 			&quot;firstaid-yes.gif&quot;              //88 needs maintenance
 	};
 	private static mImage [] attributeImages=new mImage[89];
-	private static String IMAGEDIR=File.getProgramDirectory()+&quot;/attributes/&quot;;
+	private static String IMAGEDIR=FileBase.getProgramDirectory()+&quot;/attributes/&quot;;
 	
 	public static String getImageDir() {
 		return IMAGEDIR; 

Modified: trunk/src/CacheWolf/Attributes.java
===================================================================
--- trunk/src/CacheWolf/Attributes.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/Attributes.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,9 +1,6 @@
 package CacheWolf;
 
-import ewe.ui.*;
 import ewe.fx.*;
-import ewe.graphics.*;
-import ewe.util.*;
 
 public class Attributes {
 	public final static int MAXATTRIBS=12;
@@ -83,9 +80,9 @@
 			Attribute attr = new Attribute(attributeName);
 			attribs[count++] = attr;
 			if (attributeName.endsWith(&quot;-yes.gif&quot;))
-				attributesYes |= (1l &lt;&lt; ( (long)(Math.ceil((long)attr.getAttrNr() / 2.0) - 1.0) ) );
+				attributesYes |= (1l &lt;&lt; ( (long)(Math.ceil(attr.getAttrNr() / 2.0) - 1.0) ) );
 			else
-				attributesNo |= (1l &lt;&lt; ( (long)(Math.ceil((long)attr.getAttrNr() / 2.0) - 1.0) ) );
+				attributesNo |= (1l &lt;&lt; ( (long)(Math.ceil(attr.getAttrNr() / 2.0) - 1.0) ) );
 		}
     }
 

Modified: trunk/src/CacheWolf/AttributesSelector.java
===================================================================
--- trunk/src/CacheWolf/AttributesSelector.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/AttributesSelector.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -2,7 +2,6 @@
 
 import ewe.fx.*;
 import ewe.graphics.*;
-import ewe.sys.*;
 import ewe.ui.*;
 
 public class AttributesSelector extends Panel {
@@ -92,7 +91,6 @@
 	public void showAttributePalette() {
 		iap.images.clear();
 		int width = 170;
-		int height = 180;
 		int x = 2; int y = 2;
 		long bitMask = 0;
 		String attrName;
@@ -100,7 +98,7 @@
 		for (int i=0; i &lt; Attribute.attributeNames.length; ++i) {
 			if (Attribute.attributeNames[i].endsWith(&quot;-yes.gif&quot;)) {
 				attrName = Attribute.attributeNames[i].substring(0,Attribute.attributeNames[i].length()-8);
-				bitMask = ( 1l &lt;&lt; ( (long)(java.lang.Math.ceil((long)i / 2.0) - 1.0) ) );
+				bitMask = ( 1l &lt;&lt; ( (long)(java.lang.Math.ceil(i / 2.0) - 1.0) ) );
 				if ( (selectionMaskYes &amp; bitMask) != 0 )
 					value = &quot;-yes.gif&quot;;
 				else if ( (selectionMaskNo &amp; bitMask) != 0 )

Modified: trunk/src/CacheWolf/AttributesViewer.java
===================================================================
--- trunk/src/CacheWolf/AttributesViewer.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/AttributesViewer.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -2,7 +2,6 @@
 
 import ewe.fx.*;
 import ewe.graphics.*;
-import ewe.sys.*;
 import ewe.ui.*;
 
 public class AttributesViewer extends CellPanel {

Modified: trunk/src/CacheWolf/CWPoint.java
===================================================================
--- trunk/src/CacheWolf/CWPoint.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/CWPoint.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,7 +1,5 @@
 package CacheWolf;
 
-import ewe.sys.Double;
-import ewe.sys.Locale;
 import ewe.sys.Convert;
 import CacheWolf.navi.TrackPoint;
 import CacheWolf.navi.GkPoint;
@@ -12,8 +10,6 @@
 import com.bbn.openmap.*;
 import com.stevesoft.ewe_pat.Regex;
 
-import ewe.sys.Vm;
-
 /**
  * Class for getting an setting coords in different formats
  * and for doing projection and calculation of bearing and

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/CacheHolder.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -2,7 +2,7 @@
 
 import ewe.io.IOException;
 import ewe.sys.Convert;
-import ewe.sys.Vm;
+import ewe.ui.FormBase;
 import ewe.ui.MessageBox;
 import ewe.util.Vector;
 
@@ -472,7 +472,7 @@
 		} catch (IOException e) {
 			if (maybenew) details.update(this);
 			else {
-				if (alarmuser) (new MessageBox(&quot;Error&quot;, &quot;Could not read cache details for cache: &quot;+this.wayPoint, MessageBox.OKB)).execute();
+				if (alarmuser) (new MessageBox(&quot;Error&quot;, &quot;Could not read cache details for cache: &quot;+this.wayPoint, FormBase.OKB)).execute();
 				return null;
 			} 
 		}

Modified: trunk/src/CacheWolf/CacheHolderDetail.java
===================================================================
--- trunk/src/CacheWolf/CacheHolderDetail.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/CacheHolderDetail.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,13 +1,14 @@
 package CacheWolf;
 
 import ewe.filechooser.FileChooser;
+import ewe.filechooser.FileChooserBase;
 import ewe.io.BufferedWriter;
 import ewe.io.File;
 import ewe.io.FileReader;
 import ewe.io.FileWriter;
 import ewe.io.IOException;
 import ewe.io.PrintWriter;
-import ewe.sys.Vm;
+import ewe.ui.FormBase;
 import ewe.ui.InputBox;
 import ewe.util.Vector;
 
@@ -115,9 +116,9 @@
 		  String imgDesc, imgDestName;
 		  
 		  //Get Image and description
-			FileChooser fc = new FileChooser(FileChooser.OPEN, profile.dataDir);
+			FileChooser fc = new FileChooser(FileChooserBase.OPEN, profile.dataDir);
 			fc.setTitle(&quot;Select image file:&quot;);
-			if(fc.execute() != FileChooser.IDCANCEL){
+			if(fc.execute() != FormBase.IDCANCEL){
 				imgFile = fc.getChosenFile();
 				imgDesc = new InputBox(&quot;Description&quot;).input(&quot;&quot;,10);
 				//Create Destination Filename

Modified: trunk/src/CacheWolf/CacheList.java
===================================================================
--- trunk/src/CacheWolf/CacheList.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/CacheList.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,6 +1,7 @@
 package CacheWolf;
 
 import ewe.filechooser.FileChooser;
+import ewe.filechooser.FileChooserBase;
 import ewe.fx.*;
 import ewe.io.*;
 import ewe.sys.*;
@@ -91,7 +92,7 @@
 				 CacheHolder ch=(CacheHolder)cacheList.get(idx);
 				 wayPoint=ch.wayPoint;
 				 IconAndText imgDrag=new IconAndText();
-				 imgDrag.addColumn((IImage) CacheType.cache2Img(ch.type));
+				 imgDrag.addColumn(CacheType.cache2Img(ch.type));
 				 imgDrag.addColumn(ch.wayPoint);
 				 dc.dragData=dc.startImageDrag(imgDrag,new Point(8,8),this);
 			 } 
@@ -125,7 +126,7 @@
 			 * the key event needs to go.
 			 */
 			if (needsInit &amp;&amp; ev.target==this) {
-				Gui.takeFocus(Global.mainTab.tbP.tc, Control.ByKeyboard);
+				Gui.takeFocus(Global.mainTab.tbP.tc, ControlConstants.ByKeyboard);
 				ev.target=Global.mainTab.tbP.tc;
 				postEvent(ev);
 			}
@@ -191,23 +192,23 @@
 			if (ev.target==btnNew) { 
 				newCacheList();
 			} else if(ev.target == btnLoad){
-				FileChooser fc = new FileChooser(FileChooser.OPEN, Global.getProfile().dataDir);
+				FileChooser fc = new FileChooser(FileChooserBase.OPEN, Global.getProfile().dataDir);
 				//fc.addMask(currCh.wayPoint + &quot;.wl&quot;);
 				fc.addMask(&quot;*.&quot;+EXTENSION);
 				fc.addMask(&quot;*.*&quot;);
 				fc.setTitle(MyLocale.getMsg(191,&quot;Select File&quot;));
-				if(fc.execute() != FileChooser.IDCANCEL){
+				if(fc.execute() != FormBase.IDCANCEL){
 					currFile = fc.getChosen();
 					readFromFile(currFile);
 				}
 			} else if((ev.target == btnSave) &amp;&amp; (currFile != null)){
 				saveToFile(currFile);
 			} else if((ev.target == btnSaveAs)||((ev.target == btnSave) &amp;&amp; (currFile == null))){
-				FileChooser fc = new FileChooser(FileChooser.SAVE, Global.getProfile().dataDir);
+				FileChooser fc = new FileChooser(FileChooserBase.SAVE, Global.getProfile().dataDir);
 				//fc.addMask(currCh.wayPoint + &quot;.wl&quot;);
 				fc.addMask(&quot;*.&quot;+EXTENSION);
 				fc.setTitle(MyLocale.getMsg(191,&quot;Select File&quot;));
-				if(fc.execute() != FileChooser.IDCANCEL){
+				if(fc.execute() != FormBase.IDCANCEL){
 					currFile = fc.getChosen();
 					if (currFile.indexOf('.')==0 || !currFile.toUpperCase().endsWith(&quot;.&quot;+EXTENSION)) currFile+=&quot;.&quot;+EXTENSION;
 					saveToFile(currFile);
@@ -289,7 +290,7 @@
 		Global.getProfile().hasUnsavedChanges=true;
 		updateScreen(cacheList.size()-wrongBlackStatus);
 		if (wrongBlackStatus&gt;0)
-			(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;),MyLocale.getMsg(4600,&quot;Some cache(s) cannot be shown because of wrong blacklist status&quot;), MessageBox.OKB)).execute();
+			(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;),MyLocale.getMsg(4600,&quot;Some cache(s) cannot be shown because of wrong blacklist status&quot;), FormBase.OKB)).execute();
 
 	}
 	
@@ -326,7 +327,7 @@
 			// Add cache reference to hidden list
 			cacheList.add(ch);
 			// Add Cache and cache icon to visible list
-			lstCaches.addItem((new MenuItem()).iconize(ch.wayPoint+&quot;   &quot;+ch.CacheName,(IImage) CacheType.cache2Img(ch.type),true));
+			lstCaches.addItem((new MenuItem()).iconize(ch.wayPoint+&quot;   &quot;+ch.CacheName,CacheType.cache2Img(ch.type),true));
 		    dirty=true;
 			return true;
 		} else
@@ -351,14 +352,14 @@
 	/** Check if there are any unsaved changes and ask user if he wants to save */
 	public void saveIfDirty() {
 		if (dirty) {
-			if ((new MessageBox(MyLocale.getMsg(144,&quot;Warning&quot;),MyLocale.getMsg(192,&quot;Save changes&quot;),MessageBox.MBYESNO)).execute()==MessageBox.IDYES) {
+			if ((new MessageBox(MyLocale.getMsg(144,&quot;Warning&quot;),MyLocale.getMsg(192,&quot;Save changes&quot;),FormBase.MBYESNO)).execute()==FormBase.IDYES) {
 				if (currFile!=null)
 					saveToFile(currFile);
 				else {
-					FileChooser fc = new FileChooser(FileChooser.SAVE, Global.getProfile().dataDir);
+					FileChooser fc = new FileChooser(FileChooserBase.SAVE, Global.getProfile().dataDir);
 					fc.addMask(&quot;*.&quot;+EXTENSION);
 					fc.setTitle(MyLocale.getMsg(191,&quot;Select File&quot;));
-					if(fc.execute() != FileChooser.IDCANCEL){
+					if(fc.execute() != FormBase.IDCANCEL){
 						currFile = fc.getChosen();
 						saveToFile(currFile);
 					}

Modified: trunk/src/CacheWolf/CacheType.java
===================================================================
--- trunk/src/CacheWolf/CacheType.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/CacheType.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -3,7 +3,6 @@
  */
 package CacheWolf;
 
-import ewe.fx.IImage;
 import ewe.fx.Image;
 import ewe.sys.Convert;
 import ewe.sys.Vm;

Modified: trunk/src/CacheWolf/CacheWolf.java
===================================================================
--- trunk/src/CacheWolf/CacheWolf.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/CacheWolf.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,220 +1,6 @@
 package CacheWolf;
 
 import ewe.ui.*;
-import ewe.fx.*;
-
-////////////////////////////////////////////////////////////////////////////////
-//*  Feature: Uhrzeit / Datum Button zum einf&#252;gen in dem Feld &quot;Notizen&quot;
-//*  Bugfix:  (canceled!) Bilder von externen Quellen (nicht gc.com) herunterladen 
-//*  Feature: (cancelled!) Umkreissuche auf Anzahl Caches oder Entfernung erweitern
-//*  Feature: (cancelled!) Bei der Umkreissuche (optional) werden gefundene nicht geladen
-//j   Update: Filterverhalten &#228;ndern --&gt; es wird nur das angezeigt, was ausgew&#228;hlt wurde
-//j   Update:  Vollst&#228;ndige Dokumentation auf Deutsch vorhanden
-//j   Feature: (naja) CacheWolf hat nun ein eigenes Icon
-//j  Bugfix:  Archivierte werden nicht mehr mit &quot;An error...&quot; angezeigt sondern sind tief dunkelrot unterlegt
-//j  Feature: Bildnamen bleiben erhalten und werden in der Thumbnail - &#220;bersicht angezeigt
-//j  Feature: Uhrzeit anzeigen
-//j  Feature: Blacklist einf&#252;hren
-//j  Feature: Native Destinator export
-//j  Feature: Markieren in der Listenansicht und anwenden von &quot;irgendeiner&quot; Aktion
-//j  Update:  Filter nach &quot;Archiviert&quot;
-//j  Update:  Filtern nach zuletzt gefunden
-//j  Update:  HTML export enth&#228;lt Bilder
-//k  Feature: Hinterlegen von Karten im Radar
-//k  Feature: Georeferenzieren von Karten
-//k  Feature: Beliebiges zoomen im Radar
-//k  Feature: Navigation zum Cache
-//   Feature: Log eines Caches mit den Informationen im Notizen-Feld
-//   Feature: Statistiken:
-//            *) aktivste Cacher im Umkreis,
-//	      *) aktivste letzten x Tage
-//   Bugfix:  Sortierung sollte nach Filter aufheben gleich bleiben
-//   Feature: use GPS Babel to further enhance export capabilities
-//   Feature: Wetterprognose von wetter.com holen
-//   Feature: Wolflanguage UTM konversionen und projektionen
-//l  Feature: Korridorsuche
-//l  Feature: CacheAttributes werden angezeigt
-//l  Feature: Man kann nach CacheAttributes filtern
-//   Feature: CacheIcons werden angezeigt
-//   Feature: Man kann nach CacheIcons filtern
-//   Feature: Statistikseite
-//l  Feature: Filter &#252;ber Fl&#228;che (Vielvieleck!)
-//   Update:  Dokumentation auf Englisch vorhanden
-//   Feature: Ad hoc erstellen einer HTML Seite und im Pocketexplorer anzeigen
-//            lassen
-////////////////////////////////////////////////////////////////////////////////
-
-////////////////////////////////////////////////////////////////////////////////
-// 0.9i
-// * Feature: System Infoscreen vorhanden
-// * Feature: CW per Kommandozeile starten lassen:
-//            Beispiel: cachewolf spider n --&gt; spider= aktualisiere und hole neue
-//						      daten
-//					      n = umkreis (eine Zahl) von den 
-//						  Koordinaten in den
-//					          Pr&#228;ferenzen
-// * Feature: Spidern abbrechen k&#246;nnen
-// * Feature: Wenn Cache gefunden und temp. offline: gr&#252;ner Hintergrund mit 
-//	      roter Schrift
-// * Feature: Travelbugs mitsamt Beschreibung werden gespidert
-// * Feature: Cachedaten in ein anderes Verzeichnis verschieben. Existierende
-//	      index.xml Datei wird verwendet. Alle Daten werden im 
-//	      Ursprungsverzeichnis werden gel&#246;scht.
-// * Feature: GPX import nun vorhanden
-// * Kosmetisch: Zeilenh&#246;he in der Listenansicht verringert
-// * Kosmetisch:  Punktgrafiken in der Zeilenansicht verkleinert
-// * Bugfix:  Profile speichern nun die richtigen Koordinaten
-// * Bugfix:  Selektierter Cache bleibt nach sortierung selektiert
-// * Bugfix:  Beim HTML export werden (nur) die richtigen Logs zum Cache 
-//            exportiert
-// * Bugfix:  Spaltenbreite bleibt nun erhalten, wenn man zwischen
-//	      Ansichten hin und her springt
-// * Bugfix:  Laden von locationless caches geht wieder
-// * Bugfix:  Kleiner Bugfix im GPX Exporter
-// * Bugfix:  Absturz beim Laden von Seiten, die Bilder mit PHP anzeigen, ist
-//	      behoben
-// * Bugfix:  Cache wird als found angezeigt obwohl es ein DNF Eintrag ist
-////////////////////////////////////////////////////////////////////////////////
-
-////////////////////////////////////////////////////////////////////////////////
-// 0.9h
-// * Feature: Nur logbilder der neuesten N logs laden!
-//	      N ist durch den Anwender einstellbar
-// * Feature: Karten zu einzelnen Caches laden
-// * Update:  Existierende Cacheinformationen werden nicht aktuallisiert, wenn
-//	      neue Caches per LOC oder LIST(E) geladen werden
-// * Update:  Thumbnails werden nicht verzerrt dargestellt
-// * Update:  Log- und Cachebilder lassen sich klein und gro&#223; anschauen
-// * Update:  Speichern ohne beenden
-// * Bugfix:  Multipunkt Umkreissuche (CW hatte sich vollkommen abgeschossen!)
-// * Update:  Erkennen von neuen Logs ersteinmal deaktiviert!
-////////////////////////////////////////////////////////////////////////////////
-
-////////////////////////////////////////////////////////////////////////////////
-// 0.9g
-// * Bugfix:  L&#246;ser funktioniert wieder
-// * Bugfix:  Profile speichern auch die aktuellen Koordinaten
-// * Feature: Export direkt in das TomTom Format
-// * Feature: Anzeige von neuen Caches (gelber stern)
-// * Feature: Anzeige von updates zur Cachebeschreibung (roter stern),
-//	      bzw. Logs wird angezeigt (blauer stern)
-// * Bugfix:  CW h&#228;ngt nicht mehr bei der Multipunkt Umkreissuche, wenn der letzte
-//            Eintrag nicht mit &quot;;&quot; abgeschlossen wird
-// * Feature: relative Pfadnamen zu den Cacheverzeichnissen; 
-//            hiermit leichter transportierbar, z.B. USB Stick
-// * Update:  Das Statusfenster beim spidern der Caches nervt nicht mehr
-// * Update:  Sanduhr wird beim filtern angezeigt
-// * Update:  Filter ignoriert Gro&#223;- und Kleinschreibung
-// * Update:  CacheRadar nun zentriert
-// * Update:  Reiter nun ebenfalls &quot;eingedeutscht&quot;
-// * Feature: Es k&#246;nnen &quot;profile&quot; angelegt werden
-// * Feature: Export zu CacheMate PDB Datei (mit cmconvert)
-// * Feature: Export direkt zum Garmin (mit gpsbabel)
-// * Bugfix:  L&#246;schen einzelner Caches wieder m&#246;glich
-////////////////////////////////////////////////////////////////////////////////
-
-////////////////////
-// 0.9f B2
-// * Update: Hints and Logs: Tastatur unterdr&#252;cken
-// * Bugifx: Koordinaten unter Preferenzen: Eingabe von Komma und Punkt bei Minuten m&#246;glich
-// * Update: Ein und ausschalten von Spalten ist m&#246;glich ohne Neustart
-// * Bugfix: &quot;Found&quot; nicht als Standard, wenn kein Alias eingetragen ist
-// * Bugfix: Status l&#228;&#223;t sich auf &quot;Leer&quot; zur&#252;cksetzen
-////////////////////
-
-////////////////////
-// 0.9f
-// * Feature: Multipunkt Umkreissuche
-// * Bugfix:  Einige Bilder werden nicht richtig heruntergeladen
-// * Update:  Spidern sollte nun sp&#252;rbar schneller funktionieren
-// * Update:  Sanduhr wird w&#228;hrend Sortierung und an anderen Stellen angezeigt
-// * Update:  Status nun mit vordefinierten Werten belegt
-// * Update:  Status wird mit dem Laden des Caches gesetzt
-// * Bugfix:  Sortieren mit eingeschaltetem Filter erzeugt kein M&#252;ll mehr
-// * Bugfix:  '&quot;', ''', '&#180;' in Cachenamen werden richtig erkannt
-// * Bugfix:  Weitere Kleinigkeiten mit Umlauten bereinigt
-// * Bugfix:  Bilderanzeig h&#228;ngt nicht mehr, wenn bestimmte Bilder nicht geladen
-//	      werden k&#246;nnen
-// * Feature: Alle Angaben in den Details sind ver&#228;nderbar
-// * Feature: Deutsch / Englisch Programmversion; theoretisch mehr m&#246;glich.
-// * Feature: &#196;nderm&#246;glichkeit f&#252;r alle Felder in den Details
-// * Update:  Suche filtert alle nicht zutreffenden Caches aus der Liste. Besser
-//            als nur gelb anzeigen
-////////////////////
-
-/////////////////
-// 0.9e
-// * Bugfix:  Umkreissuche funktioniert nun auch ohne Proxy
-// * Feature: Filterfunktionalit&#228;t um Filterumkehr erweitert
-// * Update:  HTML export templates sch&#246;ner gemacht
-// * Update:  In den Logs erscheinen die Bildbeschreibungen 
-//            (allerdings noch nicht bei den Bildern selbst)
-// * Update:  Es werden immer nur 5 logs gezeigt. Performancegewinn bei der 
-//            Anzeige auf PocketPC!
-// * Update:  SIP nervt nicht mehr &quot;die dritte&quot;, bzw. auf PocketPC wird die
-//			  SIP Bar f&#252;r die Men&#252;s genutzt.
-// * Update:  Formatierung bei PCX export angepasst
-// * Update:  Es werden nun die Originalbilder (Logs, originalgr&#246;&#223;e) gespidert
-// * Feature: Noch ein klick auf ein Bild zeigt es in Originalgr&#246;sse
-// * Bugfix:  Cachegr&#246;&#223;e small wird erkannt
-// * Bugfix:  TOP50 (OVL) export richtiggestellt
-// * Bugfix:  Fehlermeldung, bei Umkreissuche, wenn keine Koordinaten
-//            in den Preferenzen gesetzt sind
-// * Bugfix:  PCX5 Export sollte nun gefundene mit offener Cachebox versehen
-// * Feature: Export zu TomTom ASC
-// * Feature: Export zu MS AutoRoute CSV
-// * Bugfix:  Einige Korrekturen in den Entfernungs- und Kursberechnungen.
-/////////////////
-
-/////////////////
-// 0.9d
-// * Bugfix:  Erkennen von &#196;nderungen in den Preferenzen, ohne Neustart
-// * Bugfix:  Darstellung Cachenamen im Radar auf PPC entg&#252;ltig richtiggestellt.
-// * Update:  Sanduhr wird dargestellt, wenn der Wolf Bilder, Beschreibung und Hints &amp; Logs aufbaut.
-// * Bugfix:  SIP nervt nicht mehr 2ter Versuch
-// * Bugfix:  &quot;&amp;&quot; wird nun richtig verarbeitet
-// * Bugfix:  CITO wird nun erkannt
-// * Update:  Icons im Radarpanel werden genauer positioniert
-/////////////////
-
-/////////////////
-// 0.9c
-//	* Bugfix: OVL export enth&#228;lt text (GC - Name)
-//	* Update: Erkennen von Earthcaches
-//	* Bugfix: Nicht erkannte Caches sollten nicht mehr zum Absturz f&#252;hren.
-//	* Bugfix: Zu viele &lt;SPAN&gt; tags werden erkannt
-//	* Bugfix: Darstellung in Radar auf dem PPC
-//	* Bugfix: SIP nervt nicht mehr auf PDA
-//	* Bugfix: CacheWolf h&#228;ngt sich nicht mehr auf, wenn man ein letzten Cache l&#246;scht!
-//	* Update: Export zu GPX nun m&#246;glich
-//	* Update: Member Only Caches werden erkannt und nicht geladen
-/////////////////
-
-
-/////////////////
-//	0.9b 
-//	* Update: Spider LOCs
-//	* Bugfix: &#196;,&#214;,&#220; werden erkannt
-//  * Sortieren nach Status bugfix
-//	* Tooltips bei den Reitern
-//	* Filter ok f&#252;r &quot;found by&quot; (Namen m&#252;&#223;en durch &quot;,&quot; getrennt werden)
-//	* Update: &#220;bernahme von &quot;Status&quot;!
-//	* Bugfix: Nach einem filter funktionierte das sortieren nicht mehr
-//	* Update: Spider Liste (Caches m&#252;&#223;en mit ',' getrennt werden)
-//	* Bugfix: Solver und Zahlenformate
-/////////////////
-
-/**
-*	This is the application starter class.
-*	It startes the Ewe VM and creates the main form that displays
-*	the user interface.
-*	@param 	null	no parameters required.
-*	@return null	does not return any return codes
-*	@see			MainForm
-*	@author	 Marc Schnitzler
-*	@version version of this class, Date: date of release of the version of the class 
-*/
-
 import ewe.sys.*;
 
 public class CacheWolf extends Editor{

Modified: trunk/src/CacheWolf/CalcPanel.java
===================================================================
--- trunk/src/CacheWolf/CalcPanel.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/CalcPanel.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -98,7 +98,7 @@
 		// Output 
 		txtOutput = new TextDisplay(3,1); // Need to limit size for small screens
 		ScrollBarPanel sbp = new MyScrollBarPanel(txtOutput);
-		BottomP.addLast(sbp.setTag(Control.SPAN, new Dimension(4,1)),CellConstants.STRETCH, (CellConstants.FILL|CellConstants.WEST));
+		BottomP.addLast(sbp.setTag(CellConstants.SPAN, new Dimension(4,1)),CellConstants.STRETCH, (CellConstants.FILL|CellConstants.WEST));
 		
 		//add Panels
 		this.addLast(TopP,CellConstants.HSTRETCH, CellConstants.WEST);//.setTag(SPAN,new Dimension(4,1));
@@ -201,7 +201,7 @@
 				CoordsScreen cs = new CoordsScreen();
 				readFields(coordInp, bd, currFormat);
 				cs.setFields(coordInp,currFormat);
-				if (cs.execute()== CoordsScreen.IDOK){
+				if (cs.execute()== FormBase.IDOK){
 					btnChangeLatLon.setText(cs.getCoords().toString(currFormat));
 					coordInp.set(cs.getCoords());
 				}

Modified: trunk/src/CacheWolf/CoordsScreen.java
===================================================================
--- trunk/src/CacheWolf/CoordsScreen.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/CoordsScreen.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -86,7 +86,7 @@
 		chcNS.exitKeys=exitKeys; chcEW.exitKeys=exitKeys;
 		//add Panels
 		this.addLast(mainPanel,CellConstants.DONTSTRETCH, CellConstants.WEST);
-		chcNS.takeFocus(Control.ByKeyboard);
+		chcNS.takeFocus(ControlConstants.ByKeyboard);
 	}
 	
 	public void activateFields(int format){
@@ -200,15 +200,15 @@
 		// For input fields we use the wantReturn field
 		if(ev instanceof ControlEvent &amp;&amp; ev.type == ControlEvent.EXITED){
 			if (((ControlEvent)ev).target==chkDD || ((ControlEvent)ev).target==chkDMM ||
-			    ((ControlEvent)ev).target==chkDMS) Gui.takeFocus(chcNS,Control.ByKeyboard);	
-			if (((ControlEvent)ev).target==chkUTM) Gui.takeFocus(inpUTMZone,Control.ByKeyboard);
-			if (((ControlEvent)ev).target==chkGK) Gui.takeFocus(inpUTMEasting,Control.ByKeyboard);
-			if (((ControlEvent)ev).target==chcNS) Gui.takeFocus(inpNSDeg,Control.ByKeyboard);
-			if (((ControlEvent)ev).target==chcEW) Gui.takeFocus(inpEWDeg,Control.ByKeyboard);
+			    ((ControlEvent)ev).target==chkDMS) Gui.takeFocus(chcNS,ControlConstants.ByKeyboard);	
+			if (((ControlEvent)ev).target==chkUTM) Gui.takeFocus(inpUTMZone,ControlConstants.ByKeyboard);
+			if (((ControlEvent)ev).target==chkGK) Gui.takeFocus(inpUTMEasting,ControlConstants.ByKeyboard);
+			if (((ControlEvent)ev).target==chcNS) Gui.takeFocus(inpNSDeg,ControlConstants.ByKeyboard);
+			if (((ControlEvent)ev).target==chcEW) Gui.takeFocus(inpEWDeg,ControlConstants.ByKeyboard);
 		}
 		if(ev instanceof ControlEvent &amp;&amp; ev.type == ControlEvent.PRESSED){
 			if (((ControlEvent)ev).target==inpEWDeg || ((ControlEvent)ev).target==inpEWm ||
-					((ControlEvent)ev).target==inpEWs || ((ControlEvent)ev).target==inpUTMNorthing) Gui.takeFocus(btnApply,Control.ByKeyboard);	
+					((ControlEvent)ev).target==inpEWs || ((ControlEvent)ev).target==inpUTMNorthing) Gui.takeFocus(btnApply,ControlConstants.ByKeyboard);	
 			if (ev.target == chkFormat){
 				readFields(coordInp, currFormat);
 				currFormat = chkFormat.getSelectedIndex();
@@ -225,7 +225,7 @@
 				currFormat = chkFormat.getSelectedIndex();
 				readFields(coordInp, currFormat);
 				if (coordInp.isValid()) this.close(IDOK);
-				else (new MessageBox(&quot;Error&quot;, &quot;Please enter valid coordinates&quot;, MessageBox.OKB)).execute();
+				else (new MessageBox(&quot;Error&quot;, &quot;Please enter valid coordinates&quot;, FormBase.OKB)).execute();
 			}
 			
 			if (ev.target == btnPaste){
@@ -249,7 +249,7 @@
 					coord = new CWPoint(inp);
 				}
 				if (coord.latDec == -91 &amp;&amp; coord.lonDec == -361){
-					MessageBox tmpMB = new MessageBox(MyLocale.getMsg(312,&quot;Error&quot;), MyLocale.getMsg(4111,&quot;Coordinates must be entered in the format N DD MM.MMM E DDD MM.MMM&quot;), MessageBox.OKB);
+					MessageBox tmpMB = new MessageBox(MyLocale.getMsg(312,&quot;Error&quot;), MyLocale.getMsg(4111,&quot;Coordinates must be entered in the format N DD MM.MMM E DDD MM.MMM&quot;), FormBase.OKB);
 					tmpMB.exec();
 				}else {
 					currFormat = chkFormat.getSelectedIndex();

Modified: trunk/src/CacheWolf/DBStats.java
===================================================================
--- trunk/src/CacheWolf/DBStats.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/DBStats.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,6 +1,5 @@
 package CacheWolf;
 import ewe.util.*;
-import ewe.sys.*;
 
 /**
  * @author Marc

Modified: trunk/src/CacheWolf/DataMover.java
===================================================================
--- trunk/src/CacheWolf/DataMover.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/DataMover.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,8 +1,8 @@
 package CacheWolf;
 
-import CacheWolf.myTableControl.myProgressBarForm;
 import utils.FileBugfix;
 import ewe.filechooser.FileChooser;
+import ewe.filechooser.FileChooserBase;
 import ewe.io.*;
 import ewe.ui.*;
 import ewe.util.Vector;
@@ -26,8 +26,8 @@
 	}
 	public void deleteCaches(){
 		
-		MessageBox mBox = new MessageBox (MyLocale.getMsg(144,&quot;Warning&quot;),MyLocale.getMsg(145,&quot;Cachedata of ALL VISIBLE caches will be deleted! Continue?&quot;), MessageBox.IDYES |MessageBox.IDNO);
-		if (mBox.execute() != MessageBox.IDOK){
+		MessageBox mBox = new MessageBox (MyLocale.getMsg(144,&quot;Warning&quot;),MyLocale.getMsg(145,&quot;Cachedata of ALL VISIBLE caches will be deleted! Continue?&quot;), FormBase.IDYES |FormBase.IDNO);
+		if (mBox.execute() != FormBase.IDOK){
 			return;
 		}
 		processCaches(new Deleter(MyLocale.getMsg(143, &quot;Delete&quot;)));
@@ -36,14 +36,13 @@
 	}
 
 	public void copyCaches(){
-		int dstPos;
 		Profile dstProfile=new Profile();
 		
 		dstProfile.dataDir=selectTargetDir();
 		if (dstProfile.dataDir.equals(profile.dataDir) ||
 			dstProfile.dataDir.equals(&quot;&quot;)) return;
-		MessageBox mBox = new MessageBox (MyLocale.getMsg(144,&quot;Warning&quot;),MyLocale.getMsg(146,&quot;Cachedata of ALL VISIBLE caches will be copied! Continue?&quot;), MessageBox.IDYES |MessageBox.IDNO);
-		if (mBox.execute() != MessageBox.IDOK){
+		MessageBox mBox = new MessageBox (MyLocale.getMsg(144,&quot;Warning&quot;),MyLocale.getMsg(146,&quot;Cachedata of ALL VISIBLE caches will be copied! Continue?&quot;), FormBase.IDYES |FormBase.IDNO);
+		if (mBox.execute() != FormBase.IDOK){
 			return;
 		}
 		
@@ -59,15 +58,13 @@
 	
 	public void moveCaches() {
 		Profile dstProfile=new Profile();
-		int dstPos;
-		
 		// Select destination directory
 		dstProfile.dataDir=selectTargetDir();
 		if (dstProfile.dataDir.equals(profile.dataDir) ||
 			dstProfile.dataDir.equals(&quot;&quot;)) return;
 		
-		MessageBox mBox = new MessageBox (MyLocale.getMsg(144,&quot;Warning&quot;),MyLocale.getMsg(147,&quot;Cachedata of ALL VISIBLE caches will be moved! Continue?&quot;), MessageBox.IDYES |MessageBox.IDNO);
-		if (mBox.execute() != MessageBox.IDOK){
+		MessageBox mBox = new MessageBox (MyLocale.getMsg(144,&quot;Warning&quot;),MyLocale.getMsg(147,&quot;Cachedata of ALL VISIBLE caches will be moved! Continue?&quot;), FormBase.IDYES |FormBase.IDNO);
+		if (mBox.execute() != FormBase.IDOK){
 			return;
 		}
 		
@@ -128,7 +125,7 @@
 	
 	public String selectTargetDir() {
 		// Select destination directory
-		FileChooser fc = new FileChooser(FileChooser.DIRECTORY_SELECT, pref.baseDir);
+		FileChooser fc = new FileChooser(FileChooserBase.DIRECTORY_SELECT, pref.baseDir);
 		fc.setTitle(MyLocale.getMsg(148,&quot;Select Target directory&quot;));
 		if(fc.execute() != FormBase.IDCANCEL){
 			return fc.getChosen() + &quot;/&quot;;

Modified: trunk/src/CacheWolf/DateTimeChooser.java
===================================================================
--- trunk/src/CacheWolf/DateTimeChooser.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/DateTimeChooser.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -206,7 +206,7 @@
 	public void setDate(Time t) {
 		dateSet = t;
 		if (!t.isValid()) t = new Time();
-		String s = Time.toString(t,t instanceof TimeOfDay ? t.getFormat() : locale.getString(Locale.SHORT_DATE_FORMAT,0,0),locale);
+		Time.toString(t,t instanceof TimeOfDay ? t.getFormat() : locale.getString(Locale.SHORT_DATE_FORMAT,0,0),locale);
 		day = t.day; month = t.month; year = t.year; hour=t.hour; minute=t.minute;
 		time=MyLocale.formatLong(hour,&quot;00&quot;)+&quot;:&quot;+MyLocale.formatLong(minute,&quot;00&quot;);
 		monthName = locale.getString(Locale.SHORT_MONTH,t.month,0);
@@ -472,7 +472,7 @@
 	}
 
 	public Object getCellData(int row,int col) {
-		return (String)getCellText(row,col);
+		return getCellText(row,col);
 	}
 
 	public TableCellAttributes getCellAttributes(int row,int col,boolean isSelected,TableCellAttributes ta) {

Modified: trunk/src/CacheWolf/DetailsPanel.java
===================================================================
--- trunk/src/CacheWolf/DetailsPanel.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/DetailsPanel.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -98,37 +98,37 @@
 		CellPanel line1Panel = new CellPanel();
 		line1Panel.addNext(chcType,CellConstants.HSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
 		line1Panel.addLast(lblDiff=new mLabel(MyLocale.getMsg(1000,&quot;D&quot;)+&quot;: 5.5&quot;),CellConstants.DONTSTRETCH,(CellConstants.DONTFILL|CellConstants.EAST));
-		this.addLast(line1Panel,DONTSTRETCH,HFILL).setTag(Control.SPAN, new Dimension(2,1));
+		this.addLast(line1Panel,DONTSTRETCH,HFILL).setTag(CellConstants.SPAN, new Dimension(2,1));
 		
 		this.addNext(new mLabel(MyLocale.getMsg(301,&quot;Size:&quot;)),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
 		CellPanel line2Panel = new CellPanel();
 		line2Panel.addNext(chcSize,CellConstants.HSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
 		line2Panel.addLast(lblTerr=new mLabel(MyLocale.getMsg(1001,&quot;T&quot;)+&quot;: 5.5&quot;),CellConstants.DONTSTRETCH,(CellConstants.DONTFILL|CellConstants.EAST));
-		this.addLast(line2Panel,DONTSTRETCH,HFILL).setTag(Control.SPAN, new Dimension(2,1));
+		this.addLast(line2Panel,DONTSTRETCH,HFILL).setTag(CellConstants.SPAN, new Dimension(2,1));
 		
 		this.addNext(new mLabel(MyLocale.getMsg(302,&quot;Waypoint:&quot;)),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
-		this.addLast(inpWaypoint.setTag(Control.SPAN, new Dimension(2,1)),CellConstants.DONTSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
+		this.addLast(inpWaypoint.setTag(CellConstants.SPAN, new Dimension(2,1)),CellConstants.DONTSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
 		
 		this.addNext(new mLabel(MyLocale.getMsg(303,&quot;Name:&quot;)),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
-		this.addLast(inpName.setTag(Control.SPAN, new Dimension(2,1)),CellConstants.DONTSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
+		this.addLast(inpName.setTag(CellConstants.SPAN, new Dimension(2,1)),CellConstants.DONTSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
 		
 		this.addNext(new mLabel(MyLocale.getMsg(304,&quot;Location:&quot;)),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
-		this.addLast(btnWayLoc.setTag(Control.SPAN, new Dimension(2,1)),CellConstants.HSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
+		this.addLast(btnWayLoc.setTag(CellConstants.SPAN, new Dimension(2,1)),CellConstants.HSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
 		
 		this.addNext(new mLabel(MyLocale.getMsg(307,&quot;Status:&quot;)),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
 		CellPanel cp=new CellPanel();
 		cp.addNext(chcStatus,CellConstants.HSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
 		cp.addLast(btnFoundDate=new mButton(new mImage(&quot;calendar&quot;+imagesize+&quot;.png&quot;)),DONTSTRETCH,DONTFILL);
-		this.addLast(cp,DONTSTRETCH,HFILL).setTag(Control.SPAN, new Dimension(2,1));
+		this.addLast(cp,DONTSTRETCH,HFILL).setTag(CellConstants.SPAN, new Dimension(2,1));
 		
 		this.addNext(new mLabel(MyLocale.getMsg(306,&quot;Owner:&quot;)),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
-		this.addLast(inpOwner.setTag(Control.SPAN, new Dimension(2,1)),CellConstants.DONTSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
+		this.addLast(inpOwner.setTag(CellConstants.SPAN, new Dimension(2,1)),CellConstants.DONTSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
 		
 		this.addNext(new mLabel(MyLocale.getMsg(305,&quot;Hidden on:&quot;)),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
 		CellPanel ip=new CellPanel();
 		ip.addNext(inpHidden,CellConstants.HSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
 		ip.addLast(btnHiddenDate=new mButton(new mImage(&quot;calendar&quot;+imagesize+&quot;.png&quot;)),DONTSTRETCH,DONTFILL);
-		this.addLast(ip,DONTSTRETCH,HFILL).setTag(Control.SPAN, new Dimension(2,1));
+		this.addLast(ip,DONTSTRETCH,HFILL).setTag(CellConstants.SPAN, new Dimension(2,1));
 		inpHidden.modifyAll(DisplayOnly,0);
 		
 		//btnNotes = new mButton(&quot;Notes&quot;);
@@ -342,7 +342,7 @@
 			else if (ev.target == btnCenter){
 				CWPoint cp=new CWPoint(thisCache.LatLon);
 				if (!cp.isValid()){
-					MessageBox tmpMB = new MessageBox(MyLocale.getMsg(312,&quot;Error&quot;), MyLocale.getMsg(4111,&quot;Coordinates must be entered in the format N DD MM.MMM E DDD MM.MMM&quot;), MessageBox.OKB);
+					MessageBox tmpMB = new MessageBox(MyLocale.getMsg(312,&quot;Error&quot;), MyLocale.getMsg(4111,&quot;Coordinates must be entered in the format N DD MM.MMM E DDD MM.MMM&quot;), FormBase.OKB);
 					tmpMB.exec();
 				} else {				
 					pref.curCentrePt.set(cp);
@@ -390,7 +390,7 @@
 				CWPoint coords = new CWPoint(btnWayLoc.getText(),CWPoint.CW);
 				CoordsScreen cs = new CoordsScreen();
 				cs.setFields(coords, CWPoint.CW);
-				if (cs.execute()== CoordsScreen.IDOK){
+				if (cs.execute()== FormBase.IDOK){
 					dirty_details=true;
 					coords = cs.getCoords();
 					thisCache.pos.set(coords);
@@ -529,7 +529,7 @@
 			this.setTitle(title);
 			this.setPreferredSize(pref.myAppWidth, pref.myAppHeight);
 			disp.setHtml(text);
-			ScrollBarPanel sbp = new MyScrollBarPanel(disp, ScrollBarPanel.NeverShowHorizontalScrollers);
+			ScrollBarPanel sbp = new MyScrollBarPanel(disp, ScrollablePanel.NeverShowHorizontalScrollers);
 			this.addLast(sbp);
 			this.addLast(btCancel = new mButton(MyLocale.getMsg(3000,&quot;Close&quot;)),CellConstants.DONTSTRETCH, CellConstants.FILL);
 		}

Modified: trunk/src/CacheWolf/Filter.java
===================================================================
--- trunk/src/CacheWolf/Filter.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/Filter.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,4 +1,5 @@
 package CacheWolf;
+import ewe.ui.FormBase;
 import ewe.ui.MessageBox;
 import ewe.util.*;
 import ewe.sys.*;
@@ -192,9 +193,9 @@
 				if(ch.is_filtered == false &amp;&amp; ch.in_range == false) ch.is_filtered = true;
 			}
 		}catch(FileNotFoundException fnex){
-			(new MessageBox(&quot;Error&quot;, &quot;File not found&quot;, MessageBox.OKB)).execute();
+			(new MessageBox(&quot;Error&quot;, &quot;File not found&quot;, FormBase.OKB)).execute();
 		}catch(IOException ioex){
-			(new MessageBox(&quot;Error&quot;, &quot;Problem reading file!&quot;, MessageBox.OKB)).execute();
+			(new MessageBox(&quot;Error&quot;, &quot;Problem reading file!&quot;, FormBase.OKB)).execute();
 		}
 	}
 	

Modified: trunk/src/CacheWolf/FilterScreen.java
===================================================================
--- trunk/src/CacheWolf/FilterScreen.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/FilterScreen.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,9 +1,7 @@
 package CacheWolf;
 import ewe.ui.*;
 import ewe.io.*;
-import ewe.graphics.*;
 import ewe.fx.*;
-import ewe.util.*;
 import ewe.sys.*;
 import ewe.filechooser.*;
 
@@ -260,7 +258,7 @@
 		mLabel lblInfo; 
 		frmScreen.addLast(lblInfo=new mLabel(MyLocale.getMsg(725,&quot;Note: Filters are additive, active filter=green&quot;))).setTag(SPAN,new Dimension(2,1));
 		lblInfo.setTag(INSETS,new Insets(0,0,2,0));
-		frmScreen.borderStyle=CellPanel.BDR_RAISEDOUTER|CellPanel.BDR_SUNKENINNER|CellPanel.BF_BOTTOM;
+		frmScreen.borderStyle=UIConstants.BDR_RAISEDOUTER|UIConstants.BDR_SUNKENINNER|UIConstants.BF_BOTTOM;
 		this.addLast(frmScreen,HSTRETCH,HFILL);
 		
 		CellPanel pnlButtons=new CellPanel();
@@ -290,8 +288,8 @@
 		btPanel.addNext(btnCancel = new mButton(MyLocale.getMsg(708,&quot;Cancel&quot;)),CellConstants.STRETCH, CellConstants.FILL);
 		btPanel.addNext(btnApply = new mButton(MyLocale.getMsg(709,&quot;Apply&quot;)),CellConstants.STRETCH, CellConstants.FILL);
 		btPanel.addLast(btnRoute = new mButton(&quot;Route&quot;),CellConstants.STRETCH, CellConstants.FILL);
-		btnRoute.modify(Control.Disabled,0);
-		addLast(btPanel.setTag(Control.SPAN, new Dimension(3,1)), CellConstants.STRETCH, CellConstants.FILL);
+		btnRoute.modify(ControlConstants.Disabled,0);
+		addLast(btPanel.setTag(CellConstants.SPAN, new Dimension(3,1)), CellConstants.STRETCH, CellConstants.FILL);
 		int sw = MyLocale.getScreenWidth(); int sh = MyLocale.getScreenHeight(); 
 		Preferences pref = Global.getPref();int fs = pref.fontSize;
 		int psx; int psy;
@@ -561,7 +559,7 @@
 			else if (ev.target == btnRoute){
 				
 				File datei;
-				FileChooser fc = new FileChooser(FileChooser.OPEN, Global.getProfile().dataDir);
+				FileChooser fc = new FileChooser(FileChooserBase.OPEN, Global.getProfile().dataDir);
 				fc.setTitle(MyLocale.getMsg(712,&quot;Select route file&quot;));
 				if(fc.execute() != FormBase.IDCANCEL) {
 					datei = fc.getChosenFile();

Modified: trunk/src/CacheWolf/GPSPortOptions.java
===================================================================
--- trunk/src/CacheWolf/GPSPortOptions.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/GPSPortOptions.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -91,30 +91,30 @@
 	public Editor getEditor(int whichEditor){
 		Editor ed;
 		ed = super.getEditor(0);
-		ed.addField(ed.addNext(new mButton(&quot;Scan$u&quot;)).setCell(Editor.DONTSTRETCH),&quot;scan&quot;);
+		ed.addField(ed.addNext(new mButton(&quot;Scan$u&quot;)).setCell(CellConstants.DONTSTRETCH),&quot;scan&quot;);
 		btnTest = new mButton(&quot;Test$u&quot;);
-		ed.addField(ed.addLast(btnTest.setCell(Editor.DONTSTRETCH)),&quot;test&quot;);
+		ed.addField(ed.addLast(btnTest.setCell(CellConstants.DONTSTRETCH)),&quot;test&quot;);
 		txtOutput = new TextDisplay();
 		ScrollBarPanel sbp = new MyScrollBarPanel(txtOutput);
-		sbp.setOptions(ScrollBarPanel.AlwaysShowVerticalScrollers | ScrollBarPanel.AlwaysShowHorizontalScrollers);
+		sbp.setOptions(ScrollablePanel.AlwaysShowVerticalScrollers | ScrollablePanel.AlwaysShowHorizontalScrollers);
 		ed.addField(ed.addLast(sbp),&quot;out&quot;);
 		forwardGpsChkB = new mCheckBox(&quot;z&quot;);
-		ed.addField(ed.addNext(forwardGpsChkB, Editor.DONTSTRETCH, (Editor.WEST | Editor.DONTFILL)), &quot;forwardGpsChkB&quot;);
+		ed.addField(ed.addNext(forwardGpsChkB, CellConstants.DONTSTRETCH, (CellConstants.WEST | CellConstants.DONTFILL)), &quot;forwardGpsChkB&quot;);
 		labelForwardHost = new mLabel(&quot;Forward GPS data to host&quot;);
-		ed.addField(ed.addNext(labelForwardHost, Editor.DONTSTRETCH, (Editor.WEST | Editor.DONTFILL)), &quot;labelForwardIP&quot;);
+		ed.addField(ed.addNext(labelForwardHost, CellConstants.DONTSTRETCH, (CellConstants.WEST | CellConstants.DONTFILL)), &quot;labelForwardIP&quot;);
 		inputBoxForwardHost = new mInput(&quot;tcpForwardHost&quot;);
 		inputBoxForwardHost.setPromptControl(labelForwardHost);
 		inputBoxForwardHost.setText(&quot;192.168.178.23&quot;);
 		inputBoxForwardHost.setToolTip(&quot;All data from GPS will be sent to TCP-port 23\n and can be redirected there to a serial port\n by HW Virtual Serial Port&quot;);
-		ed.addField(ed.addLast(inputBoxForwardHost,0 , (Editor.WEST | Editor.HFILL)), &quot;tcpForwardHost&quot;);
+		ed.addField(ed.addLast(inputBoxForwardHost,0 , (CellConstants.WEST | CellConstants.HFILL)), &quot;tcpForwardHost&quot;);
 		logGpsChkB = new mCheckBox(&quot;z&quot;);
-		ed.addField(ed.addNext(logGpsChkB, Editor.DONTSTRETCH, (Editor.WEST | Editor.DONTFILL)), &quot;logGpsChkB&quot;);
+		ed.addField(ed.addNext(logGpsChkB, CellConstants.DONTSTRETCH, (CellConstants.WEST | CellConstants.DONTFILL)), &quot;logGpsChkB&quot;);
 		labelLogTimer = new mLabel(&quot;Interval in sec for logging&quot;);
-		ed.addField(ed.addNext(labelLogTimer, Editor.DONTSTRETCH, (Editor.WEST | Editor.DONTFILL)), &quot;labelLogTimer&quot;);
+		ed.addField(ed.addNext(labelLogTimer, CellConstants.DONTSTRETCH, (CellConstants.WEST | CellConstants.DONTFILL)), &quot;labelLogTimer&quot;);
 		inputBoxLogTimer = new mInput(&quot;GPSLogTimer&quot;);
 		inputBoxLogTimer.setPromptControl(labelLogTimer);
 		inputBoxLogTimer.setText(&quot;10&quot;);
-		ed.addField(ed.addLast(inputBoxLogTimer,0 , (Editor.WEST | Editor.HFILL)), &quot;GPSLogTimer&quot;);
+		ed.addField(ed.addLast(inputBoxLogTimer,0 , (CellConstants.WEST | CellConstants.HFILL)), &quot;GPSLogTimer&quot;);
 
 		
 		gpsRunning = false;
@@ -173,7 +173,6 @@
 		long now;
 		
 		gpsPort = new SerialPort(port, baud);
-		if (gpsPort == null) return false;
 		
 		//try to read some data
 		now = new Time().getTime();
@@ -197,7 +196,6 @@
 		long now;
 		
 		gpsPort = new SerialPort(port, baud);
-		if (gpsPort == null) return false;
 		
 		//try to read some data
 		now = new Time().getTime();

Modified: trunk/src/CacheWolf/GPXImporter.java
===================================================================
--- trunk/src/CacheWolf/GPXImporter.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/GPXImporter.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -2,13 +2,10 @@
 
 import ewesoft.xml.*;
 import ewesoft.xml.sax.*;
-import ewe.fx.Color;
-import ewe.io.*;
 import ewe.sys.*;
-import ewe.sys.Double;
+import ewe.ui.FormBase;
 import ewe.ui.MessageBox;
 import ewe.util.*;
-import ewe.net.*;
 import ewe.util.zip.*;
 
 /**
@@ -59,7 +56,7 @@
 		CacheHolder ch;
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			ch = (CacheHolder)cacheDB.get(i);
-			DBindex.put((String)ch.wayPoint, new Integer(i));
+			DBindex.put(ch.wayPoint, new Integer(i));
 		}//for
 	}
 /*	skg: This Constructor is not referenced, therefore commented out 
@@ -95,7 +92,7 @@
 			String file;
 			
 			OCXMLImporterScreen options = new OCXMLImporterScreen(&quot;Spider Options&quot;, OCXMLImporterScreen.IMAGES);
-			if (options.execute() == OCXMLImporterScreen.IDCANCEL) {	return; }
+			if (options.execute() == FormBase.IDCANCEL) {	return; }
 			//String dist = options.distanceInput.getText();
 			//if (dist.length()== 0) return;
 			//getMaps = options.mapsCheckBox.getState();
@@ -162,7 +159,7 @@
 			if (atts.getValue(&quot;creator&quot;).startsWith(&quot;TerraCaching&quot;)) fromTC = true;
 			else fromTC = false;
 
-			if (fromOC &amp;&amp; doSpider) (new MessageBox(&quot;Warnung&quot;, &quot;GPX-Dateien von Opencaching enthalten keine Informationen zu Bildern, sie werden nicht heruntergeladen. Am besten Caches von Opencaching holen per Men&#252; /Anwendung/Download von Opencaching&quot;, MessageBox.OKB)).execute();
+			if (fromOC &amp;&amp; doSpider) (new MessageBox(&quot;Warnung&quot;, &quot;GPX-Dateien von Opencaching enthalten keine Informationen zu Bildern, sie werden nicht heruntergeladen. Am besten Caches von Opencaching holen per Men&#252; /Anwendung/Download von Opencaching&quot;, FormBase.OKB)).execute();
 			zaehlerGel = 0;
 		}
 		if (name.equals(&quot;wpt&quot;)) {

Modified: trunk/src/CacheWolf/Global.java
===================================================================
--- trunk/src/CacheWolf/Global.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/Global.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,5 +1,4 @@
 package CacheWolf;
-import ewe.*;
 
 /**
  * Global data: Preferences and Profile

Modified: trunk/src/CacheWolf/HintLogPanel.java
===================================================================
--- trunk/src/CacheWolf/HintLogPanel.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/HintLogPanel.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -8,7 +8,6 @@
 import ewe.graphics.AniImage;
 import ewe.graphics.ImageDragContext;
 import ewe.graphics.InteractivePanel;
-import ewe.graphics.ReactiveImage;
 import ewe.sys.*;
 import ewe.fx.Image;
 import ewe.fx.Rect;
@@ -47,9 +46,9 @@
 		hintpane.addNext(decodeButton,CellConstants.HSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
 		decodeButton.setMinimumSize(MyLocale.getScreenWidth()*2/3,10);
 		hintpane.addLast(moreBt,CellConstants.DONTSTRETCH, (CellConstants.HFILL|CellConstants.EAST));
-		hint.modify(Control.NotEditable,0);
+		hint.modify(ControlConstants.NotEditable,0);
 
-		ScrollBarPanel sbplog = new MyScrollBarPanel((ScrollClient)htmlImagDisp, ScrollBarPanel.NeverShowHorizontalScrollers);
+		ScrollBarPanel sbplog = new MyScrollBarPanel(htmlImagDisp, ScrollablePanel.NeverShowHorizontalScrollers);
 		//logpane.addLast(sbplog,CellConstants.STRETCH, CellConstants.FILL);
 		Rect r = new Rect(new Dimension (Global.getPref().myAppWidth-sbplog.vbar.getRect().width, 20));
 		htmlImagDisp.virtualSize = r;
@@ -67,8 +66,8 @@
 			hint.setText(&quot;&quot;);
 		crntLogPosition = 0;
 		setLogs(0);
-		moreBt.modify(0,Control.Disabled);
-		prevBt.modify(0,Control.Disabled);
+		moreBt.modify(0,ControlConstants.Disabled);
+		prevBt.modify(0,ControlConstants.Disabled);
 //		if (Gui.screenIs(Gui.PDA_SCREEN) &amp;&amp; Vm.isMobile()) {
 //		Vm.setSIP(0);
 //		}
@@ -106,7 +105,7 @@
 		int h = logs.getLineHeight() * logs.getNumLines();
 		htmlTxtImage = new AniImage(new Image(width, h));
 		htmlTxtImage.setLocation(0, 0);
-		htmlTxtImage.properties |= AniImage.IsMoveable;
+		htmlTxtImage.properties |= mImage.IsMoveable;
 		Graphics draw = new Graphics(htmlTxtImage.image);
 		logs.resizeTo(htmlTxtImage.getWidth(), htmlTxtImage.getHeight());
 		logs.doPaint(draw, new Rect(0,0,htmlTxtImage.getWidth(), htmlTxtImage.getHeight()));
@@ -131,23 +130,23 @@
 		if(ev instanceof ControlEvent &amp;&amp; ev.type == ControlEvent.PRESSED){
 			int minLogs = java.lang.Math.min(Global.getPref().logsPerPage, cache.CacheLogs.size());
 			if(ev.target == moreBt){
-				prevBt.modify(0,Control.Disabled);
+				prevBt.modify(0,ControlConstants.Disabled);
 				prevBt.repaintNow();
 				crntLogPosition += minLogs;
 				if(crntLogPosition &gt;= cache.CacheLogs.size()) {
 					//crntLogPosition = cache.CacheLogs.size()-5;
 					crntLogPosition = cache.CacheLogs.size()- minLogs;
-					moreBt.modify(Control.Disabled,0);
+					moreBt.modify(ControlConstants.Disabled,0);
 					moreBt.repaintNow();
 				}
 				setLogs(crntLogPosition);
 			} // = moreBt
 			if(ev.target == prevBt){
-				moreBt.modify(0,Control.Disabled);
+				moreBt.modify(0,ControlConstants.Disabled);
 				moreBt.repaintNow();
 				crntLogPosition -= minLogs;
 				if(crntLogPosition &lt;= 0) {
-					prevBt.modify(Control.Disabled,0);
+					prevBt.modify(ControlConstants.Disabled,0);
 					prevBt.repaintNow();
 					crntLogPosition = 0;
 				}
@@ -165,7 +164,7 @@
 	public boolean scrollHorizontal = false;
 	public boolean imageNotDragged(ImageDragContext drag,Point where) {
 		if (drag == null || drag.image == null) return super.imageNotDragged(drag, where);
-		Rect r = getDim(null);
+		getDim(null);
 		if (drag.image.location.y &lt;= 0 ){
 			drag.image.move(0, drag.image.location.y);
 		} else {

Modified: trunk/src/CacheWolf/HttpConnection.java
===================================================================
--- trunk/src/CacheWolf/HttpConnection.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/HttpConnection.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -2,6 +2,7 @@
 import ewe.data.Property;
 import ewe.data.PropertyList;
 import ewe.io.AsciiCodec;
+import ewe.io.FileBase;
 import ewe.io.IOException;
 import ewe.io.IOHandle;
 import ewe.io.IOTransfer;
@@ -290,7 +291,7 @@
 		port = proxyPort;
 		document = url;
 	} else {
-		url = ewe.io.File.fixupPath(url);
+		url = FileBase.fixupPath(url);
 		//ewe.sys.Vm.debug(&quot;url: &quot;+url);
 		port = 80;
 		String uu = url.toLowerCase();
@@ -593,21 +594,8 @@
 	int length = documentProperties.getInt(&quot;content-length&quot;,-1);
 	if (length == 0)
 		return new Handle(Handle.Succeeded,new ByteArray());
-	//
-	try{
-		InputStream is = getInputStream();
-		return StreamUtils.readAllBytes(getInputStream(),null,length,0);
-	}catch(IOException e){
-		Handle h = new Handle();
-		h.fail(e);
-		return h;
-	}
-	//
-	/*
-	if (&quot;chunked&quot;.equals(documentProperties.getValue(encodings,null)))
-		return readInChunkedData(connection);
-	return readInSomeData(connection,length,null);
-	*/
+	getInputStream();
+	return StreamUtils.readAllBytes(getInputStream(),null,length,0);
 }
 /**
  * Read in all the data from the Socket.
@@ -626,7 +614,7 @@
 * the readInData() method.
 **/
 //===================================================================
-public InputStream getInputStream() throws IOException
+public InputStream getInputStream()
 //===================================================================
 {
 	//ewe.sys.Vm.debug(documentProperties.toString());

Modified: trunk/src/CacheWolf/ImageDetailForm.java
===================================================================
--- trunk/src/CacheWolf/ImageDetailForm.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/ImageDetailForm.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,6 +1,4 @@
 package CacheWolf;
-import ewe.graphics.*;
-import ewe.fx.*;
 import ewe.ui.*;
 
 

Modified: trunk/src/CacheWolf/ImageInteractivePanel.java
===================================================================
--- trunk/src/CacheWolf/ImageInteractivePanel.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/ImageInteractivePanel.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,9 +1,7 @@
 package CacheWolf;
 import ewe.graphics.*;
-import ewe.sys.*;
 import ewe.fx.*;
 import ewe.ui.*;
-import ewe.util.*;
 
 /**
 *	This class handles the resizing im images

Modified: trunk/src/CacheWolf/ImagePanel.java
===================================================================
--- trunk/src/CacheWolf/ImagePanel.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/ImagePanel.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -48,10 +48,10 @@
 			profile=Global.getProfile();
 			Vm.showWait(true);
 			clearImages();
-			thumb_size = (int)((pref.myAppWidth-2*padding) / 3);
+			thumb_size = ((pref.myAppWidth-2*padding) / 3);
 			thumb_size = thumb_size - padding;
 			int rowCounter = cache.Images.size() + cache.UserImages.size();
-			rowCounter = (int)(rowCounter/3)+1;
+			rowCounter = (rowCounter/3)+1;
 			Rect r = new Rect(0, 0, pref.myAppWidth, rowCounter*thumb_size+rowCounter*padding+padding);
 			this.virtualSize = r;
 			//this.setPreferredSize(pref.myAppWidth, rowCounter*thumb_size+rowCounter*padding+40);
@@ -142,16 +142,17 @@
 				scaleX = thumb_size;
 				scaleY = thumb_size;
 				dummyC = 0;
+				double thumb_size2 = thumb_size;
 				if(mI.getWidth()&gt;mI.getHeight()){
 					scaleX = thumb_size;
 					dummyC = (double)mI.getHeight()/ (double)mI.getWidth();
-					dummyC = dummyC * (double)thumb_size;
+					dummyC = dummyC * thumb_size2;
 					scaleY = (int)dummyC;
 				}
 				if(mI.getWidth() &lt;= mI.getHeight()){
 					scaleY = thumb_size;
 					dummyC = (double)mI.getWidth()/(double)mI.getHeight();
-					dummyC = dummyC * (double)thumb_size;
+					dummyC = dummyC * thumb_size2;
 					scaleX = (int)dummyC;
 				}
 				if(mI.getWidth() &lt;= thumb_size){
@@ -190,12 +191,12 @@
 					locY = locY+thumb_size+padding;
 				}
 			}catch(IllegalArgumentException imex){ // file not found, could not decode etc.
-				MessageBox tmp = new MessageBox(MyLocale.getMsg(321,&quot;Fehler&quot;), MyLocale.getMsg(322,&quot;Kann Bild/Karte nicht laden&quot;)+&quot;:\n&quot;+imex.getMessage(), MessageBox.OKB); // @todo: language support
+				MessageBox tmp = new MessageBox(MyLocale.getMsg(321,&quot;Fehler&quot;), MyLocale.getMsg(322,&quot;Kann Bild/Karte nicht laden&quot;)+&quot;:\n&quot;+imex.getMessage(), FormBase.OKB); // @todo: language support
 				tmp.exec();
 			} catch (OutOfMemoryError e) { // TODO show an error icon in the panel instead of nothing
-				(new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;),MyLocale.getMsg(343,&quot;Not enough free memory to load cache image&quot;)+&quot;:\n&quot;+location,MessageBox.OKB)).exec();
+				(new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;),MyLocale.getMsg(343,&quot;Not enough free memory to load cache image&quot;)+&quot;:\n&quot;+location,FormBase.OKB)).exec();
 			} catch (SystemResourceException e) { // TODO show an error icon in the panel instead of nothing
-				(new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;),MyLocale.getMsg(343,&quot;Not enough free memory to load cache image&quot;)+&quot;\n&quot;+location,MessageBox.OKB)).exec();
+				(new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;),MyLocale.getMsg(343,&quot;Not enough free memory to load cache image&quot;)+&quot;\n&quot;+location,FormBase.OKB)).exec();
 			}
 		} //for
 		
@@ -227,11 +228,11 @@
 	*/
 	public void imageClicked(AniImage which, Point pos){
 //		Vm.debug(&quot;Clicked&quot;+pos.x+&quot;,&quot;+pos.y+&quot; &quot;+(((Control.currentPenEvent.modifiers&amp;PenEvent.RIGHT_BUTTON)==PenEvent.RIGHT_BUTTON)?&quot;RIGHT&quot;:&quot;LEFT&quot;) );
-		if ((Control.currentPenEvent.modifiers&amp;PenEvent.RIGHT_BUTTON)==PenEvent.RIGHT_BUTTON || duration&gt;LONG_PEN_DOWN_DURATION) {
+		if ((ControlBase.currentPenEvent.modifiers&amp;PenEvent.RIGHT_BUTTON)==PenEvent.RIGHT_BUTTON || duration&gt;LONG_PEN_DOWN_DURATION) {
 			// Right button pressed - delete image to conserve space
 			if (which instanceof ImagePanelImage &amp;&amp; !((ImagePanelImage)which).fileName.equals(NO_IMAGE)) {
-				MessageBox mBox = new MessageBox (MyLocale.getMsg(144,&quot;Warning&quot;),MyLocale.getMsg(344,&quot;Delete image&quot;)+&quot; \&quot;&quot;+((ImagePanelImage)which).imageText+&quot;\&quot;?&quot;, MessageBox.IDYES |MessageBox.IDNO);
-				if (mBox.execute() == MessageBox.IDOK){
+				MessageBox mBox = new MessageBox (MyLocale.getMsg(144,&quot;Warning&quot;),MyLocale.getMsg(344,&quot;Delete image&quot;)+&quot; \&quot;&quot;+((ImagePanelImage)which).imageText+&quot;\&quot;?&quot;, FormBase.IDYES |FormBase.IDNO);
+				if (mBox.execute() == FormBase.IDOK){
 						//Vm.debug(&quot;Deleting &quot;+((ImagePanelImage)which).fileName);
 						try {
 							File f=new File(((ImagePanelImage)which).fileName);
@@ -249,10 +250,10 @@
 					ImageDetailForm iF = new ImageDetailForm(fn, pref);
 					iF.execute(null, Gui.CENTER_FRAME);
 				} catch (IllegalArgumentException e) {
-					MessageBox tmp = new MessageBox(MyLocale.getMsg(321,&quot;Fehler&quot;), MyLocale.getMsg(322,&quot;Kann Bild/Karte nicht finden&quot;), MessageBox.OKB); // @todo: language support
+					MessageBox tmp = new MessageBox(MyLocale.getMsg(321,&quot;Fehler&quot;), MyLocale.getMsg(322,&quot;Kann Bild/Karte nicht finden&quot;), FormBase.OKB); // @todo: language support
 					tmp.exec();
 				} catch (OutOfMemoryError e) {
-					(new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;),MyLocale.getMsg(343,&quot;Not enough free memory to load cache image&quot;)+&quot;\n&quot;+fn,MessageBox.OKB)).exec();
+					(new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;),MyLocale.getMsg(343,&quot;Not enough free memory to load cache image&quot;)+&quot;\n&quot;+fn,FormBase.OKB)).exec();
 				}
 			}
 		}

Modified: trunk/src/CacheWolf/InfoBox.java
===================================================================
--- trunk/src/CacheWolf/InfoBox.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/InfoBox.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,6 +1,5 @@
 package CacheWolf;
 import ewe.ui.*;
-import ewe.sys.*;
 
 public class InfoBox extends Form{
 	TextMessage msgArea;
@@ -79,21 +78,21 @@
 		case DISPLAY_ONLY:
 			msgArea = new TextMessage(info);
 			msgArea.autoWrap = autoWrap;
-			msgArea.alignment = Gui.CENTER;
-			msgArea.anchor = Gui.CENTER;
+			msgArea.alignment = CellConstants.CENTER;
+			msgArea.anchor = CellConstants.CENTER;
 			this.addLast(msgArea.getScrollablePanel(), CellConstants.STRETCH, CellConstants.FILL);
 			break;
 		case PROGRESS_WITH_WARNINGS:
 			msgArea = new TextMessage(info);
 			msgArea.autoWrap = autoWrap;
-			msgArea.alignment = Gui.CENTER;
-			msgArea.anchor = Gui.CENTER;
+			msgArea.alignment = CellConstants.CENTER;
+			msgArea.anchor = CellConstants.CENTER;
 			msgArea.setPreferredSize(psx-20, psy);
 			this.addLast(msgArea.getScrollablePanel(), CellConstants.HEXPAND | CellConstants.HGROW, CellConstants.HEXPAND | CellConstants.HGROW);
 			warnings = new TextMessage(&quot;&quot;);
 			warnings.autoWrap = autoWrap;
 			this.addLast(warnings.getScrollablePanel(), CellConstants.HEXPAND | CellConstants.VEXPAND |CellConstants.VGROW, CellConstants.HEXPAND | CellConstants.VEXPAND |CellConstants.VGROW);
-			mB.set(Control.Disabled, true);
+			mB.set(ControlConstants.Disabled, true);
 			mB.setPreferredSize(40, 20);
 			addLast(mB, CellConstants.DONTSTRETCH, CellConstants.DONTFILL);
 			break;
@@ -126,7 +125,7 @@
 		warnings.setText(warnings.text + w);
 	}
 	public void addOkButton() { //unfortunately this doesn't work
-		mB.set(Control.Disabled, false);
+		mB.set(ControlConstants.Disabled, false);
 		//addNext(mB);
 		//relayout(true);
 		//mB.set(Control.Invisible, false);
@@ -137,10 +136,10 @@
 		if (ev instanceof ControlEvent &amp;&amp; ev.type == ControlEvent.PRESSED) {
 			if(ev.target == mB){
 				if(type == CHECKBOX) mCB_state = mCB.getState();
-				this.close(Form.IDOK);
+				this.close(FormBase.IDOK);
 			}
 			if(ev.target == mC){
-				this.close(Form.IDCANCEL);
+				this.close(FormBase.IDCANCEL);
 			}
 		}
 		super.onEvent(ev);

Modified: trunk/src/CacheWolf/InfoScreen.java
===================================================================
--- trunk/src/CacheWolf/InfoScreen.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/InfoScreen.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -2,7 +2,6 @@
 
 import ewe.ui.*;
 import ewe.io.*;
-import ewe.sys.*;
 
 /**
 *	This class displays an information screen. It loads the html text to display
@@ -32,7 +31,7 @@
 			}
 		} else text = datei;
 		disp.setHtml(text);
-		ScrollBarPanel sbp = new MyScrollBarPanel(disp, ScrollBarPanel.NeverShowHorizontalScrollers);
+		ScrollBarPanel sbp = new MyScrollBarPanel(disp, ScrollablePanel.NeverShowHorizontalScrollers);
 		this.addLast(sbp);
 		this.addLast(btCancel = new mButton(MyLocale.getMsg(3000,&quot;Close&quot;)),CellConstants.DONTSTRETCH, CellConstants.FILL);
 	}

Modified: trunk/src/CacheWolf/LOCXMLImporter.java
===================================================================
--- trunk/src/CacheWolf/LOCXMLImporter.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/LOCXMLImporter.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -56,7 +56,7 @@
 		CacheHolder ch;
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			ch = (CacheHolder)cacheDB.get(i);
-			DBindexWpt.put((String)ch.wayPoint, new Integer(i));
+			DBindexWpt.put(ch.wayPoint, new Integer(i));
 		}//for
 	}
 	
@@ -109,7 +109,7 @@
 			if (index == -1){
 				holder.is_new = true;
 				cacheDB.add(new CacheHolder(holder));
-				DBindexWpt.put((String)holder.wayPoint, new Integer(cacheDB.size()-1));
+				DBindexWpt.put(holder.wayPoint, new Integer(cacheDB.size()-1));
 			}
 			// update (overwrite) data
 			else {

Modified: trunk/src/CacheWolf/LogList.java
===================================================================
--- trunk/src/CacheWolf/LogList.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/LogList.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -129,6 +129,6 @@
 	 }
 	 
 	 public static int getScore(int numrecommends, int numfoundlogs) {
-		 return Math.round((((float)numrecommends * (float)numrecommends +1f ) / ((float)numfoundlogs / 10f +1f))*100f);
+		 return Math.round((((float)numrecommends * (float)numrecommends +1f ) / (numfoundlogs / 10f +1f))*100f);
 	 }
 }

Modified: trunk/src/CacheWolf/MainForm.java
===================================================================
--- trunk/src/CacheWolf/MainForm.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/MainForm.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -52,13 +52,13 @@
 		this.exitSystemOnClose = true;
 		this.resizable = true;
 		this.moveable = true;
-		this.windowFlagsToSet = Window.FLAG_MAXIMIZE_ON_PDA;
+		this.windowFlagsToSet = WindowConstants.FLAG_MAXIMIZE_ON_PDA;
 		if(Vm.isMobile() == true) {
 			//this.windowFlagsToSet |=Window.FLAG_FULL_SCREEN;
 			this.resizable = false;
 			this.moveable = false;
 		}
-		Rect screen = ((ewe.fx.Rect) (Window.getGuiInfo(Window.INFO_SCREEN_RECT,null,new ewe.fx.Rect(),0)));
+		Rect screen = ((ewe.fx.Rect) (Window.getGuiInfo(WindowConstants.INFO_SCREEN_RECT,null,new ewe.fx.Rect(),0)));
 		if ( screen.height &gt;= 600 &amp;&amp; screen.width &gt;= 800) this.setPreferredSize(800, 600);
 		this.resizeOnSIP = true;
 		// Load CacheList

Modified: trunk/src/CacheWolf/MainMenu.java
===================================================================
--- trunk/src/CacheWolf/MainMenu.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/MainMenu.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -40,7 +40,7 @@
 
 	public MainMenu(Form f){
 		father = f;
-		String cwd = File.getProgramDirectory();
+		String cwd = FileBase.getProgramDirectory();
 
 		///////////////////////////////////////////////////////////////////////
 		// subMenu for profiles, part of &quot;Application&quot; menu below
@@ -270,7 +270,7 @@
 			}
 			if(mev.selectedItem == mnuEditCenter){
 				ProfileDataForm f=new ProfileDataForm(pref,profile);
-				int code=f.execute(getFrame(), Gui.CENTER_FRAME);
+				f.execute(getFrame(), Gui.CENTER_FRAME);
 				tbp.refreshTable();
 				f.close(0);
 			}
@@ -286,10 +286,10 @@
 				tbp.resetModel();
 			}
 			if(mev.selectedItem == loadcaches){
-				FileChooser fc = new FileChooser(FileChooser.OPEN|FileChooser.MULTI_SELECT, pref.baseDir);
+				FileChooser fc = new FileChooser(FileChooserBase.OPEN|FileChooserBase.MULTI_SELECT, pref.baseDir);
 				fc.addMask(&quot;*.gpx,*.zip,*.loc&quot;);
 				fc.setTitle(MyLocale.getMsg(909,&quot;Select file(s)&quot;));
-				if(fc.execute() != FileChooser.IDCANCEL){
+				if(fc.execute() != FormBase.IDCANCEL){
 					String dir = fc.getChosenDirectory().toString();
 					String files[] = fc.getAllChosen();
 					/*
@@ -366,7 +366,7 @@
 			if(mev.selectedItem == exportGPS){
 				Vm.showWait(true);
 				LocExporter loc = new LocExporter();
-				String tmpFileName = File.getProgramDirectory() + &quot;/temp.loc&quot;;
+				String tmpFileName = FileBase.getProgramDirectory() + &quot;/temp.loc&quot;;
 				loc.setTmpFileName(tmpFileName);
 				loc.doIt(LocExporter.MODE_AUTO);
 				ProgressBarForm.display(MyLocale.getMsg(950,&quot;Transfer&quot;),MyLocale.getMsg(951,&quot;Sending to GPS&quot;), null);
@@ -376,7 +376,7 @@
 					p.waitFor();
 				}catch(IOException ioex){
 					Vm.showWait(false);
-					(new MessageBox(&quot;Error&quot;, &quot;Garmin export unsuccessful&quot;, MessageBox.OKB)).execute();
+					(new MessageBox(&quot;Error&quot;, &quot;Garmin export unsuccessful&quot;, FormBase.OKB)).execute();
 					pref.log(&quot;Error exporting to Garmin&quot;,ioex);
 				};
 				ProgressBarForm.clear();
@@ -391,10 +391,10 @@
 				kml.doIt();
 			}
 			if(mev.selectedItem == exportTPL){
-				FileChooser fc = new FileChooser(FileChooser.OPEN, File.getProgramDirectory());
+				FileChooser fc = new FileChooser(FileChooserBase.OPEN, FileBase.getProgramDirectory());
 				fc.addMask(&quot;*.tpl&quot;);
 				fc.setTitle(MyLocale.getMsg(910,&quot;Select Template file&quot;));
-				if(fc.execute() != FileChooser.IDCANCEL){
+				if(fc.execute() != FormBase.IDCANCEL){
 					TPLExporter tpl = new TPLExporter( pref,profile, fc.getChosenFile().toString());
 					tpl.doIt();
 				}
@@ -423,7 +423,7 @@
 						MapImporter map = new MapImporter(pref, sM.getSelectedMap(),sM.worldfileexists);
 						map.execute(null, Gui.CENTER_FRAME);
 					} catch (java.lang.OutOfMemoryError e) {
-						MessageBox tmpMB=new MessageBox(MyLocale.getMsg(312, &quot;Error&quot;), MyLocale.getMsg(156,&quot;Out of memory error, map to big&quot;), MessageBox.OKB);
+						MessageBox tmpMB=new MessageBox(MyLocale.getMsg(312, &quot;Error&quot;), MyLocale.getMsg(156,&quot;Out of memory error, map to big&quot;), FormBase.OKB);
 						tmpMB.exec();
 					}
 				}
@@ -565,21 +565,20 @@
 			// &quot;About&quot; pulldown menu
 			///////////////////////////////////////////////////////////////////////
 			if(mev.selectedItem == about){
-				InfoScreen is = new InfoScreen(File.getProgramDirectory() + &quot;/&quot; + &quot;info.html&quot;, MyLocale.getMsg(117,&quot;About&quot;),true, pref);
+				InfoScreen is = new InfoScreen(FileBase.getProgramDirectory() + &quot;/&quot; + &quot;info.html&quot;, MyLocale.getMsg(117,&quot;About&quot;),true, pref);
 				is.execute(father.getFrame(), Gui.CENTER_FRAME);
 			}
 			if(mev.selectedItem == legend){
-				InfoScreen is = new InfoScreen(File.getProgramDirectory() + &quot;/&quot; + &quot;legende.html&quot;, MyLocale.getMsg(155,&quot;Legend&quot;),true, pref);
+				InfoScreen is = new InfoScreen(FileBase.getProgramDirectory() + &quot;/&quot; + &quot;legende.html&quot;, MyLocale.getMsg(155,&quot;Legend&quot;),true, pref);
 				is.execute(father.getFrame(), Gui.CENTER_FRAME);
 			}
 			if(mev.selectedItem == wolflang){
-				InfoScreen is = new InfoScreen(File.getProgramDirectory() + &quot;/&quot; + &quot;wolflang.html&quot;, MyLocale.getMsg(118,&quot;WolfLanguage&quot;), true, pref);
+				InfoScreen is = new InfoScreen(FileBase.getProgramDirectory() + &quot;/&quot; + &quot;wolflang.html&quot;, MyLocale.getMsg(118,&quot;WolfLanguage&quot;), true, pref);
 				is.execute(father.getFrame(), Gui.CENTER_FRAME);
 			}
 			if(mev.selectedItem == sysinfo){
 				//Vm.debug(&quot;Checking system...&quot;);
 				StringBuffer sb=new StringBuffer(400);
-				Rect s = (Rect)Window.getGuiInfo(Window.INFO_SCREEN_RECT,null,new Rect(),0);
 				Font f = mApp.guiFont;
 				sb.append(&quot;Profile: &quot;); 				sb.append(profile.dataDir);
 				sb.append(&quot;&lt;br&gt;Platform: &quot;); 			sb.append(Vm.getPlatform());
@@ -592,7 +591,7 @@
 				sb.append(&quot;&lt;br&gt;Font size: &quot;);			sb.append(f.getSize());
 				sb.append(&quot;&lt;br&gt;Entries in DB: &quot;);		sb.append(cacheDB.size());
 				sb.append(&quot;&lt;br&gt;File separator is: \&quot;&quot;); sb.append(Vm.getProperty(&quot;file.separator&quot;,&quot;def&quot;)); 
-				sb.append(&quot;\&quot;&lt;br&gt;Programme directory is &quot;); sb.append(File.getProgramDirectory());
+				sb.append(&quot;\&quot;&lt;br&gt;Programme directory is &quot;); sb.append(FileBase.getProgramDirectory());
 				sb.append(&quot;&lt;br&gt;Number of details in RAM is &quot;); sb.append(CacheHolder.cachesWithLoadedDetails.size());
 				sb.append(&quot; Max.: &quot;);					sb.append(Global.getPref().maxDetails);
 				sb.append(&quot;&lt;br&gt;CacheWolf version: &quot;);		sb.append(Version.getReleaseDetailed());
@@ -602,7 +601,7 @@
 			}
 			if(mev.selectedItem == chkVersion){
 				Vm.showWait(true);
-				(new MessageBox(MyLocale.getMsg(178, &quot;Version Checking&quot;), Version.getUpdateMessage(), MessageBox.OKB)).execute();
+				(new MessageBox(MyLocale.getMsg(178, &quot;Version Checking&quot;), Version.getUpdateMessage(), FormBase.OKB)).execute();
 				Vm.showWait(false);
 			}
 			
@@ -643,11 +642,11 @@
 				} else {
 					if (ch.isAddiWpt() &amp;&amp; ch.mainCache!=null &amp;&amp; !ch.mainCache.is_Checked &amp;&amp; !alreadySaid2) { // Is the father ticked?
 						alreadySaid2=true;
-						(new MessageBox(&quot;Information&quot;,&quot;Hilfswegpunkte k&#246;nnnen nicht direkt gespidert werden\nBitte zus&#228;tzlich den Vater anhaken&quot;, MessageBox.OKB)).execute();
+						(new MessageBox(&quot;Information&quot;,&quot;Hilfswegpunkte k&#246;nnnen nicht direkt gespidert werden\nBitte zus&#228;tzlich den Vater anhaken&quot;, FormBase.OKB)).execute();
 					}
 					if (!ch.isAddiWpt() &amp;&amp; !alreadySaid) {
 						alreadySaid = true;
-						(new MessageBox(&quot;Information&quot;,ch.wayPoint+ &quot;: Diese Funktion steht gegenw&#228;rtig nur f&#252;r Geocaching.com und Opencaching.de zur Verf&#252;gung&quot;, MessageBox.OKB)).execute();
+						(new MessageBox(&quot;Information&quot;,ch.wayPoint+ &quot;: Diese Funktion steht gegenw&#228;rtig nur f&#252;r Geocaching.com und Opencaching.de zur Verf&#252;gung&quot;, FormBase.OKB)).execute();
 					}
 				}
 

Modified: trunk/src/CacheWolf/MainTab.java
===================================================================
--- trunk/src/CacheWolf/MainTab.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/MainTab.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -335,7 +335,7 @@
 	public void SwitchToMovingMap(CWPoint centerTo, boolean forceCenter) {
 		try {
 			if (!centerTo.isValid()) {
-				(new MessageBox(&quot;Error&quot;, &quot;No valid coordinates&quot;, MessageBox.OKB)).execute();
+				(new MessageBox(&quot;Error&quot;, &quot;No valid coordinates&quot;, FormBase.OKB)).execute();
 				return;
 			}
 			if (mm == null) {
@@ -349,7 +349,7 @@
 				try {
 					int i = 0;
 					while (MapImage.screenDim.width == 0 &amp;&amp; i &lt; 10*60) { i++; ewe.sys.mThread.sleep(100);} // wait until the window size of the moving map is known note: ewe.sys.sleep() will pause the whole vm - no other thread will run
-					if (i &gt;= 10*60) {(new MessageBox(&quot;Error&quot;, &quot;MovingMap cannot be displayed - this is most likely a bug - plaese report it on www.geoclub.de&quot;, MessageBox.OKB)).execute(); return;}
+					if (i &gt;= 10*60) {(new MessageBox(&quot;Error&quot;, &quot;MovingMap cannot be displayed - this is most likely a bug - plaese report it on www.geoclub.de&quot;, FormBase.OKB)).execute(); return;}
 					mm.setCenterOfScreen(centerTo, false); // this can only be executed if mm knows its window size that's why myExec must be executed before
 					mm.updatePosition(centerTo);
 					/*			if(!mm.posCircle.isOnScreen()) { // TODO this doesn't work because lat lon is set to the wished pos and not to gps anymore
@@ -361,11 +361,11 @@
 					 */			//TODO what to do, if there is a map at centerTo, but it is not loaded because of mapSwitchMode == dest &amp; cuurpos und daf&#252;r gibt es keine Karte 
 				}catch (InterruptedException e) {
 					Global.getPref().log(&quot;Error starting mavoing map (1): &quot; + e.getMessage(), e, true);
-					(new MessageBox(&quot;Error&quot;, &quot;This must not happen please report to pfeffer how to produce this error message&quot;, MessageBox.OKB)).execute(); } 
+					(new MessageBox(&quot;Error&quot;, &quot;This must not happen please report to pfeffer how to produce this error message&quot;, FormBase.OKB)).execute(); } 
 			}
 		} catch (Exception e) { 
 			Global.getPref().log(&quot;Error starting moving map (2): &quot; + e.getMessage(), e, true);
-			(new MessageBox(&quot;Error&quot;, &quot;Error starting moving map: &quot; + e.getMessage(), MessageBox.OKB)).execute(); }
+			(new MessageBox(&quot;Error&quot;, &quot;Error starting moving map: &quot; + e.getMessage(), FormBase.OKB)).execute(); }
 	}
 
 	void updatePendingChanges() {
@@ -388,7 +388,7 @@
 		updatePendingChanges();
 		if (askForConfirmation) { // Don't know whether to save, have to ask
 			if (profile.hasUnsavedChanges &amp;&amp;     // Only ask if there were changes 
-					(new MessageBox(MyLocale.getMsg(144,&quot;Warnung&quot;),MyLocale.getMsg(1207,&quot;Your profile has unsaved changes. Do you want to save?&quot;),MessageBox.DEFOKB|MessageBox.NOB)).execute()==MessageBox.IDOK) {
+					(new MessageBox(MyLocale.getMsg(144,&quot;Warnung&quot;),MyLocale.getMsg(1207,&quot;Your profile has unsaved changes. Do you want to save?&quot;),FormBase.DEFOKB|FormBase.NOB)).execute()==FormBase.IDOK) {
 				saveIndex=true; 
 			}
 		}

Modified: trunk/src/CacheWolf/Matrix.java
===================================================================
--- trunk/src/CacheWolf/Matrix.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/Matrix.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -229,7 +229,7 @@
 					ja = 0;
 				}
 				det = Determinant(ap);
-				m[i][j] = (double) java.lang.Math.pow(-1, i + j) * det;
+				m[i][j] = java.lang.Math.pow(-1, i + j) * det;
 			}
 		m = Transpose2(m);
 		return m;

Modified: trunk/src/CacheWolf/MyComparer.java
===================================================================
--- trunk/src/CacheWolf/MyComparer.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/MyComparer.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,6 +1,5 @@
 package CacheWolf;
 import ewe.util.*;
-import ewe.sys.*;
 
 /**
 *	This class handles the sorting for most of the sorting tasks. If a cache is 
@@ -96,7 +95,7 @@
 			for (int i=0; i&lt;visibleSize; i++) {
 				CacheHolder ch=(CacheHolder) cacheDB.get(i);
 				if (ch.wayPoint.startsWith(&quot;OC&quot;))
-					ch.sort=MyLocale.formatLong((long)ch.numRecommended,&quot;00000&quot;);
+					ch.sort=MyLocale.formatLong(ch.numRecommended,&quot;00000&quot;);
 				else
 					ch.sort=&quot;\uFFFF&quot;;
 			}			
@@ -104,7 +103,7 @@
 			for (int i=0; i&lt;visibleSize; i++) {
 				CacheHolder ch=(CacheHolder) cacheDB.get(i);
 				if (ch.wayPoint.startsWith(&quot;OC&quot;))
-					ch.sort=MyLocale.formatLong((long)ch.recommendationScore,&quot;00000&quot;);
+					ch.sort=MyLocale.formatLong(ch.recommendationScore,&quot;00000&quot;);
 				else
 					ch.sort=&quot;\uFFFF&quot;;
 			}			

Modified: trunk/src/CacheWolf/MyLocale.java
===================================================================
--- trunk/src/CacheWolf/MyLocale.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/MyLocale.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -6,15 +6,17 @@
 import ewe.fx.Rect;
 import ewe.io.BufferedReader;
 import ewe.io.BufferedWriter;
-import ewe.io.File;
+import ewe.io.FileBase;
 import ewe.io.FileReader;
 import ewe.io.FileWriter;
 import ewe.sys.*;
 import ewe.sys.Double;
 import ewe.sys.Long;
+import ewe.ui.FormBase;
 import ewe.ui.Gui;
 import ewe.ui.MessageBox;
 import ewe.ui.Window;
+import ewe.ui.WindowConstants;
 /**
  *  This class handles internationalisation and some other local stuff like
  *  decimal separator, screen dimensions etc.
@@ -29,7 +31,7 @@
 public class MyLocale {
 	private static Locale l=null;
 	private static LocalResource lr=null;
-	private static Rect s = (Rect)Window.getGuiInfo(Window.INFO_SCREEN_RECT,null,new Rect(),0);
+	private static Rect s = (Rect)Window.getGuiInfo(WindowConstants.INFO_SCREEN_RECT,null,new Rect(),0);
 	private static String digSeparator=null;
 	/** Read a non-standard language from the file language. If it is empty,
 	 * the default language is used.
@@ -43,7 +45,7 @@
 			 int tmp = Locale.createID(language,&quot;&quot;,0);
 			 if (tmp &gt; -1) l=new Locale(tmp);
 			 else { // language not found
-				 (new MessageBox(&quot;Error&quot;, &quot;Language &quot; + language + &quot; not found - using standard language&quot;, MessageBox.OKB)).execute(); // don't copy this messagebox into a language file, because it is only used if no languages file can be accessed
+				 (new MessageBox(&quot;Error&quot;, &quot;Language &quot; + language + &quot; not found - using standard language&quot;, FormBase.OKB)).execute(); // don't copy this messagebox into a language file, because it is only used if no languages file can be accessed
 				 l = Vm.getLocale(); 
 			 }
 		 }
@@ -56,7 +58,7 @@
 					public Object get(int id,Object data){return data;}
 					public Object get(String id,Object data){return data;}
 				};
-				(new MessageBox(&quot;Error&quot;, &quot;Language file languages/&quot; + getLocaleLanguage().toUpperCase() + &quot;.cfg couldn't be loaded - using hard coded messages&quot;, MessageBox.OKB)).execute();
+				(new MessageBox(&quot;Error&quot;, &quot;Language file languages/&quot; + getLocaleLanguage().toUpperCase() + &quot;.cfg couldn't be loaded - using hard coded messages&quot;, FormBase.OKB)).execute();
 		 }
 		 
 		 double testA = Convert.toDouble(&quot;1,50&quot;) + Convert.toDouble(&quot;3,00&quot;);
@@ -233,7 +235,7 @@
 	 */
 	private static String getLanguage() {
 		try {
-			BufferedReader bufread=new BufferedReader(new FileReader(File.getProgramDirectory() + &quot;/&quot; + &quot;language&quot;));
+			BufferedReader bufread=new BufferedReader(new FileReader(FileBase.getProgramDirectory() + &quot;/&quot; + &quot;language&quot;));
 			language=bufread.readLine();
 			bufread.close();
 		} catch (Exception ex) {
@@ -249,7 +251,7 @@
 	 */
 	public static void saveLanguage(String language) {
 		try{
-			BufferedWriter out = new BufferedWriter(new FileWriter(File.getProgramDirectory() + &quot;/&quot; + &quot;language&quot;));
+			BufferedWriter out = new BufferedWriter(new FileWriter(FileBase.getProgramDirectory() + &quot;/&quot; + &quot;language&quot;));
 			out.write(language);
 			out.close();
 		}catch (Exception e){ Vm.debug(&quot;Exception &quot;+e);}

Modified: trunk/src/CacheWolf/MyScrollBarPanel.java
===================================================================
--- trunk/src/CacheWolf/MyScrollBarPanel.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/MyScrollBarPanel.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -15,7 +15,7 @@
 public class MyScrollBarPanel extends ScrollBarPanel {
 	public MyScrollBarPanel(ScrollClient client,int options) {
 		super(client, options);
-		int s = java.lang.Math.round(((float)Global.getPref().fontSize) / 11f * 15f); // standard fontsize = 1, standard bottum size = 15
+		int s = java.lang.Math.round(Global.getPref().fontSize / 11f * 15f); // standard fontsize = 1, standard bottum size = 15
 		setScrollBarSize(s, s, s);
 	}
 	public MyScrollBarPanel(ScrollClient client)

Modified: trunk/src/CacheWolf/NewProfileForm.java
===================================================================
--- trunk/src/CacheWolf/NewProfileForm.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/NewProfileForm.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -5,7 +5,6 @@
 import ewe.ui.Event;
 import ewe.ui.Form;
 import ewe.ui.IKeys;
-import ewe.ui.KeyEvent;
 import ewe.ui.MessageBox;
 import ewe.ui.mButton;
 import ewe.ui.mInput;

Modified: trunk/src/CacheWolf/NotesScreen.java
===================================================================
--- trunk/src/CacheWolf/NotesScreen.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/NotesScreen.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,11 +1,7 @@
 package CacheWolf;
 import ewe.ui.*;
-import ewe.io.*;
-import ewe.graphics.*;
 import ewe.fx.*;
-import ewe.util.*;
 import ewe.sys.*;
-import ewe.filechooser.*;
 
 /**
 *	This class displays a form to show and edit notes for a cache.
@@ -23,14 +19,14 @@
 		int sw = MyLocale.getScreenWidth();
 		String imagesize = &quot;&quot;;
 		if (Vm.isMobile() &amp;&amp; sw &gt;= 400) imagesize=&quot;_vga&quot;;
-		addDateTime = new mButton((IImage)new mImage(&quot;date_time&quot;+imagesize+&quot;.gif&quot;));
+		addDateTime = new mButton(new mImage(&quot;date_time&quot;+imagesize+&quot;.gif&quot;));
 		
 		this.title = &quot;Notes&quot;;
 		setPreferredSize(Global.getPref().myAppWidth, Global.getPref().myAppHeight);
 		this.resizeOnSIP = true;
 		thisCache = ch;
 		wayNotes.setText(thisCache.CacheNotes);
-		addLast(sbp.setTag(Control.SPAN, new Dimension(3,1)),CellConstants.STRETCH, (CellConstants.FILL|CellConstants.WEST));
+		addLast(sbp.setTag(CellConstants.SPAN, new Dimension(3,1)),CellConstants.STRETCH, (CellConstants.FILL|CellConstants.WEST));
 		titleControls=new CellPanel();
 		titleControls.addNext(addDateTime,CellConstants.HSTRETCH,CellConstants.HFILL);
 		titleControls.addNext(cancelBtn,CellConstants.HSTRETCH,CellConstants.HFILL);
@@ -57,7 +53,7 @@
 			if(ev.target == cancelBtn){
 				if ( (!thisCache.CacheNotes.equals(wayNotes.getText())) ) {
 					if ( (new MessageBox(&quot;Warning&quot;, &quot;You will loose any changes made to the notes. Do you want to continue?&quot;
-							, MessageBox.YESB|MessageBox.NOB)).execute() == MessageBox.IDYES) {
+							, FormBase.YESB|FormBase.NOB)).execute() == FormBase.IDYES) {
 						this.close(0);
 					}
 				} else this.close(0); // no changes -&gt; exit without asking
@@ -65,7 +61,7 @@
 			if(ev.target == titleOK){
 				if ( (!thisCache.CacheNotes.equals(wayNotes.getText())) ) {
 					if ( (new MessageBox(&quot;Warning&quot;, &quot;Save changes made to the notes?&quot;
-							, MessageBox.YESB|MessageBox.NOB)).execute() == MessageBox.IDYES) {
+							, FormBase.YESB|FormBase.NOB)).execute() == FormBase.IDYES) {
 						thisCache.CacheNotes = wayNotes.getText();
 						thisCache.saveCacheDetails( Global.getProfile().dataDir);
 					}

Modified: trunk/src/CacheWolf/OCXMLImporter.java
===================================================================
--- trunk/src/CacheWolf/OCXMLImporter.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/OCXMLImporter.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -6,6 +6,7 @@
 import ewesoft.xml.sax.*;
 import ewe.io.*;
 import ewe.sys.*;
+import ewe.ui.FormBase;
 import ewe.ui.MessageBox;
 import ewe.util.*;
 import ewe.util.zip.*;
@@ -72,9 +73,9 @@
 		user = p.myAlias.toLowerCase();
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			ch = (CacheHolder)cacheDB.get(i);
-			DBindexWpt.put((String)ch.wayPoint, new Integer(i));
+			DBindexWpt.put(ch.wayPoint, new Integer(i));
 			if (!ch.ocCacheID.equals(&quot;&quot;))
-				DBindexID.put((String)ch.ocCacheID, new Integer(i));
+				DBindexID.put(ch.ocCacheID, new Integer(i));
 		}//for
 
 	}
@@ -89,8 +90,6 @@
 	 * @return true, if some change was made to the cacheDB
 	 */
 	public boolean syncSingle(int number, InfoBox infB) {
-		boolean success=true;
-
 		ch = (CacheHolder)cacheDB.get(number);
 		chD= null; //new CacheHolderDetail(ch); //TODO is this still correct? use getDetails ?
 
@@ -100,7 +99,7 @@
 		}
 		if (askForOptions) {
 			OCXMLImporterScreen importOpt = new OCXMLImporterScreen( MyLocale.getMsg(1600, &quot;Opencaching.de Download&quot;),OCXMLImporterScreen.IMAGES | OCXMLImporterScreen.ALL);
-			if (importOpt.execute() == OCXMLImporterScreen.IDCANCEL) {	return false; }
+			if (importOpt.execute() == FormBase.IDCANCEL) {	return false; }
 			askForOptions = false;
 			reload = importOpt.missingCheckBox.getState();
 		}
@@ -136,7 +135,7 @@
 			+ &quot;&amp;charset=utf-8&quot;
 			+ &quot;&amp;cdata=0&quot;
 			+ &quot;&amp;session=0&quot;;
-		success = syncOC(url);
+		syncOC(url);
 		inf.close(0);
 		return true;
 	}
@@ -151,12 +150,12 @@
 		String lastS =  profile.last_sync_opencaching;
 		CWPoint centre = pref.curCentrePt; // No need to clone curCentrePt as centre is only read
 		if (!centre.isValid()) {
-			(new MessageBox(&quot;Error&quot;, &quot;Coordinates for centre must be set&quot;, MessageBox.OKB)).execute();
+			(new MessageBox(&quot;Error&quot;, &quot;Coordinates for centre must be set&quot;, FormBase.OKB)).execute();
 			return;
 		}
 		OCXMLImporterScreen importOpt = new OCXMLImporterScreen( MyLocale.getMsg(1600, &quot;Opencaching.de Download&quot;),
 																 OCXMLImporterScreen.ALL | OCXMLImporterScreen.DIST | OCXMLImporterScreen.IMAGES);
-		if (importOpt.execute() == OCXMLImporterScreen.IDCANCEL) {	return; }
+		if (importOpt.execute() == FormBase.IDCANCEL) {	return; }
 		Vm.showWait(true);
 		String dist = importOpt.distanceInput.getText();
 		if (dist.length()== 0) return;
@@ -437,15 +436,15 @@
 				cacheDB.add(ch);
 				ch.detailsAdded();
 				Integer indexInt = new Integer(cacheDB.size()-1);
-				DBindexWpt.put((String)chD.wayPoint, indexInt);
-				DBindexID.put((String)chD.ocCacheID, indexInt);
+				DBindexWpt.put(chD.wayPoint, indexInt);
+				DBindexID.put(chD.ocCacheID, indexInt);
 			}
 			// update (overwrite) data
 			else {
 				chD.is_new = false;
 				cacheDB.set(index, new CacheHolder(chD));
 				// save ocCacheID, in case, the previous data is from GPX
-				DBindexID.put((String)chD.ocCacheID, new Integer(index));
+				DBindexID.put(chD.ocCacheID, new Integer(index));
 			}
 			// clear data (picture, logs) if we do a complete Update
 			if (incUpdate == false){

Modified: trunk/src/CacheWolf/OCXMLImporterScreen.java
===================================================================
--- trunk/src/CacheWolf/OCXMLImporterScreen.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/OCXMLImporterScreen.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -3,7 +3,6 @@
  */
 package CacheWolf;
 
-import ewe.sys.Vm;
 import ewe.ui.*;
 
 /**
@@ -82,14 +81,14 @@
 	public void onEvent(Event ev){
 		if (ev instanceof ControlEvent &amp;&amp; ev.type == ControlEvent.PRESSED){
 			if (ev.target == cancelB){
-				this.close(Form.IDCANCEL);
+				this.close(FormBase.IDCANCEL);
 			}
 			if (ev.target == okB){
 				    // distOC wird hier noch nicht in Pref eingetragen, damit noch gepr&#252;ft werden kann, ob es gr&#246;&#223;er oder kleiner ist als vorher
 					if (imagesCheckBox!=null) pref.downloadPicsOC = imagesCheckBox.state;
 					if (missingCheckBox!=null) pref.downloadmissingOC = missingCheckBox.state;
 					// TODO: sofort speichern?
-				this.close(Form.IDOK);
+				this.close(FormBase.IDOK);
 				}
 		}
 		super.onEvent(ev);

Modified: trunk/src/CacheWolf/ParseLatLon.java
===================================================================
--- trunk/src/CacheWolf/ParseLatLon.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/ParseLatLon.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,7 +1,6 @@
 package CacheWolf;
 
 import ewe.sys.*;
-import ewe.sys.Double;
 
 /**
 *	This class parses a string representation of longitude and latitude.

Modified: trunk/src/CacheWolf/Preferences.java
===================================================================
--- trunk/src/CacheWolf/Preferences.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/Preferences.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -46,7 +46,7 @@
 		mySPO.parity = SerialPort.NOPARITY;
 		mySPO.stopBits = 1;
 		mySPO.baudRate = 4800;
-		if ( ((ewe.fx.Rect) (Window.getGuiInfo(Window.INFO_SCREEN_RECT,null,new ewe.fx.Rect(),0))).height &gt; 400) 
+		if ( ((ewe.fx.Rect) (Window.getGuiInfo(WindowConstants.INFO_SCREEN_RECT,null,new ewe.fx.Rect(),0))).height &gt; 400) 
 			 fontSize = 16;
 		else 
 			 fontSize = 11;
@@ -180,7 +180,7 @@
 	 */
 	public void readPrefFile(){
 		try{
-			String datei = File.getProgramDirectory() + &quot;/&quot; + &quot;pref.xml&quot;;
+			String datei = FileBase.getProgramDirectory() + &quot;/&quot; + &quot;pref.xml&quot;;
 			datei = datei.replace('\\', '/');
 			ewe.io.Reader r = new ewe.io.InputStreamReader(new ewe.io.FileInputStream(datei));
 			parse(r);
@@ -341,7 +341,7 @@
 	 * Method to save current preferences in the pref.xml file
 	 */
 	public void savePreferences(){
-		String datei = File.getProgramDirectory() + &quot;/&quot; + &quot;pref.xml&quot;;
+		String datei = FileBase.getProgramDirectory() + &quot;/&quot; + &quot;pref.xml&quot;;
 		datei = datei.replace('\\', '/');
 
 		try{
@@ -431,24 +431,24 @@
 		if (ret != null) return ret; 
 		ret = getMapManuallySavePath(false);
 		File t = new FileBugfix(ret);
-		String[] f = t.list(&quot;*.wfl&quot;, File.LIST_FILES_ONLY);
+		String[] f = t.list(&quot;*.wfl&quot;, FileBase.LIST_FILES_ONLY);
 		if (f != null &amp;&amp; f.length &gt; 0) return  baseDir + mapsPath;
-		f = t.list(&quot;*.wfl&quot;, File.LIST_DIRECTORIES_ONLY | File.LIST_ALWAYS_INCLUDE_DIRECTORIES);
+		f = t.list(&quot;*.wfl&quot;, FileBase.LIST_DIRECTORIES_ONLY | FileBase.LIST_ALWAYS_INCLUDE_DIRECTORIES);
 		if (f != null &amp;&amp; f.length &gt; 0) { // see if in a subdir of &lt;baseDir&gt;/maps/standard are .wfl files
 			String[] f2;
 			for (int i = 0; i&lt; f.length; i++) {
 				t.set(null, ret+&quot;/&quot;+f[i]);
-				f2 = t.list(&quot;*.wfl&quot;, File.LIST_FILES_ONLY);
+				f2 = t.list(&quot;*.wfl&quot;, FileBase.LIST_FILES_ONLY);
 				if (f2 != null &amp;&amp; f2.length &gt; 0) return  ret;
 			}
 		}
 		// lagacy dir 
-		ret = File.getProgramDirectory() + &quot;/maps&quot;;
+		ret = FileBase.getProgramDirectory() + &quot;/maps&quot;;
 		t.set(null, ret);
-		f = t.list(&quot;*.wfl&quot;, File.LIST_FILES_ONLY);
+		f = t.list(&quot;*.wfl&quot;, FileBase.LIST_FILES_ONLY);
 		if (f != null &amp;&amp; f.length &gt; 0) {
-			MessageBox inf = new MessageBox(&quot;Information&quot;, &quot;The directory for calibrated maps \nhas moved in this program version\n to '&lt;profiles directory&gt;/maps/standard'\n Do you want to move your calibrated maps there now?&quot;, MessageBox.YESB | MessageBox.NOB);
-			if (inf.execute() == MessageBox.IDYES) {
+			MessageBox inf = new MessageBox(&quot;Information&quot;, &quot;The directory for calibrated maps \nhas moved in this program version\n to '&lt;profiles directory&gt;/maps/standard'\n Do you want to move your calibrated maps there now?&quot;, FormBase.YESB | FormBase.NOB);
+			if (inf.execute() == FormBase.IDYES) {
 				String sp = getMapManuallySavePath(false);
 				File spF = new File(sp);
 				if (!spF.exists()) spF.mkdirs();
@@ -482,7 +482,7 @@
 		String mapsDir = baseDir + mapsPath;
 		if (create &amp;&amp; !(new File(mapsDir).isDirectory())) { // dir exists? 
 			if (new File(mapsDir).mkdirs() == false) {// dir creation failed?
-				(new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;), MyLocale.getMsg(172,&quot;Error: cannot create maps directory: \n&quot;)+mapsDir, MessageBox.OKB)).exec();
+				(new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;), MyLocale.getMsg(172,&quot;Error: cannot create maps directory: \n&quot;)+mapsDir, FormBase.OKB)).exec();
 				return null;
 			}
 		}
@@ -497,7 +497,7 @@
 		String mapsDir = Global.getPref().baseDir + &quot;maps/&quot; + Common.ClearForFileName(mapkind)+ &quot;/&quot; + subdir;
 		if (!(new File(mapsDir).isDirectory())) { // dir exists? 
 			if (new File(mapsDir).mkdirs() == false) // dir creation failed?
-			{(new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;), MyLocale.getMsg(172,&quot;Error: cannot create maps directory: \n&quot;)+new File(mapsDir).getParentFile(), MessageBox.OKB)).exec();
+			{(new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;), MyLocale.getMsg(172,&quot;Error: cannot create maps directory: \n&quot;)+new File(mapsDir).getParentFile(), FormBase.OKB)).exec();
 			return null;
 			}
 		}
@@ -526,10 +526,10 @@
 		// If datadir is empty, ask for one
 		if (baseDir.length()==0 || !(new File(baseDir)).exists()) {
 			do {
-				FileChooser fc = new FileChooser(FileChooser.DIRECTORY_SELECT,baseDir);
+				FileChooser fc = new FileChooser(FileChooserBase.DIRECTORY_SELECT,baseDir);
 				fc.title = MyLocale.getMsg(170,&quot;Select base directory for cache data&quot;);
 				// If no base directory given, terminate
-				if (fc.execute() == FileChooser.IDCANCEL) ewe.sys.Vm.exit(0);
+				if (fc.execute() == FormBase.IDCANCEL) ewe.sys.Vm.exit(0);
 				baseDir = fc.getChosenFile().toString();
 			}while (!(new File(baseDir)).exists());
 		}
@@ -549,7 +549,7 @@
 			}
 			profileExists=(new File(baseDir+lastProfile)).exists();
 			if (!profileExists) (new MessageBox(MyLocale.getMsg(144,&quot;Warning&quot;),
-					           MyLocale.getMsg(171,&quot;Profile does not exist: &quot;)+lastProfile,MessageBox.MBOK)).execute();
+					           MyLocale.getMsg(171,&quot;Profile does not exist: &quot;)+lastProfile,FormBase.MBOK)).execute();
 		} while (profileExists==false);
 		// Now we are sure that baseDir exists and basDir+profile exists
 		prof.name=lastProfile;
@@ -565,7 +565,7 @@
 	//////////////////////////////////////////////////////////////////////////////////////
 
 	/** Log file is in program directory and called log.txt */
-	private final String LOGFILENAME=File.getProgramDirectory()+&quot;/log.txt&quot;;
+	private final String LOGFILENAME=FileBase.getProgramDirectory()+&quot;/log.txt&quot;;
 	
 	/**
 	 * Method to delete an existing log file. Called on every SpiderGC.

Modified: trunk/src/CacheWolf/PreferencesScreen.java
===================================================================
--- trunk/src/CacheWolf/PreferencesScreen.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/PreferencesScreen.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -72,13 +72,13 @@
 		// First panel - General
 		/////////////////////////////////////////////////////////
 		Frame frmDataDir=new Frame();
-		frmDataDir.borderStyle=CellPanel.BDR_RAISEDOUTER|CellPanel.BDR_SUNKENINNER|CellPanel.BF_BOTTOM;
+		frmDataDir.borderStyle=UIConstants.BDR_RAISEDOUTER|UIConstants.BDR_SUNKENINNER|UIConstants.BF_BOTTOM;
 		frmDataDir.addNext(new mLabel(MyLocale.getMsg(603,&quot;Data Directory:&quot;)),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
 		//frmDataDir.setTag(INSETS,new Insets(10,10,10,10));
 		frmDataDir.addLast(brwBt = new mButton(MyLocale.getMsg(604,&quot;Browse&quot;)),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.EAST));
 		DataDir = new mInput();
 		DataDir.setText(pref.baseDir);
-		frmDataDir.addLast(DataDir.setTag(Control.SPAN, new Dimension(3,1)),CellConstants.HSTRETCH, (CellConstants.HFILL|CellConstants.EAST));
+		frmDataDir.addLast(DataDir.setTag(CellConstants.SPAN, new Dimension(3,1)),CellConstants.HSTRETCH, (CellConstants.HFILL|CellConstants.EAST));
 		frmDataDir.addLast(chkAutoLoad = new mCheckBox(MyLocale.getMsg(629,&quot;Autoload last profile&quot;)),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
 		if (pref.autoReloadLastProfile) chkAutoLoad.setState(true);
 		chkAutoLoad.setTag(INSETS,new Insets(0,0,2,0));
@@ -116,7 +116,7 @@
 		frmGarmin.addLast(chkSynthShort=new mCheckBox(MyLocale.getMsg(174,&quot;Short Names&quot;)),STRETCH,RIGHT);
 		chkSynthShort.setTag(INSETS,new Insets(4,0,0,0));
 		chkSynthShort.setState(!pref.garminGPSBabelOptions.equals(&quot;&quot;));
-		frmGarmin.borderStyle=CellPanel.BDR_RAISEDOUTER|CellPanel.BDR_SUNKENINNER|CellPanel.BF_TOP;
+		frmGarmin.borderStyle=UIConstants.BDR_RAISEDOUTER|UIConstants.BDR_SUNKENINNER|UIConstants.BF_TOP;
 		frmGarmin.setTag(INSETS,new Insets(4,0,0,0));
 		pnlGeneral.addLast(frmGarmin);
 		pnlGeneral.addLast(new mLabel(&quot;&quot;));
@@ -126,10 +126,9 @@
 		/////////////////////////////////////////////////////////
 		
 		Frame frmScreen=new Frame();
-		frmScreen.borderStyle=CellPanel.BDR_RAISEDOUTER|CellPanel.BDR_SUNKENINNER;
-		mLabel lblTitle;
+		frmScreen.borderStyle=UIConstants.BDR_RAISEDOUTER|UIConstants.BDR_SUNKENINNER;
 		CellPanel pnlScreen=new CellPanel();
-		pnlScreen.addNext(lblTitle=new mLabel(MyLocale.getMsg(625,&quot;Screen (needs restart):&quot;)));
+		pnlScreen.addNext(new mLabel(MyLocale.getMsg(625,&quot;Screen (needs restart):&quot;)));
 		pnlScreen.addNext(new mLabel(&quot;Font&quot;),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
 		pnlScreen.addLast(fontSize = new mInput(),CellConstants.DONTSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
 		fontSize.maxLength=2;
@@ -152,7 +151,7 @@
 		pnlDisplay.addLast(frmScreen,CellConstants.HSTRETCH,CellConstants.FILL);
 		
 		Frame frmImages=new Frame();
-		frmImages.borderStyle=CellPanel.BDR_RAISEDOUTER|CellPanel.BDR_SUNKENINNER|CellPanel.BF_TOP|CellPanel.BF_BOTTOM;
+		frmImages.borderStyle=UIConstants.BDR_RAISEDOUTER|UIConstants.BDR_SUNKENINNER|UIConstants.BF_TOP|UIConstants.BF_BOTTOM;
 		//frmImages.addNext(new mLabel(MyLocale.getMsg(623,&quot;Images:&quot;)),CellConstants.VSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
 		frmImages.addLast(chkShowDeletedImg = new mCheckBox(MyLocale.getMsg(624,&quot;Show deleted images&quot;)),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
 		chkShowDeletedImg.setTag(INSETS,new Insets(2,0,0,0));
@@ -194,7 +193,7 @@
 		chkProxyActive.setState(pref.proxyActive);
 		pnlMore.addLast(pnlProxy,HSTRETCH,HFILL);
 		pnlMore.addNext(new mLabel(MyLocale.getMsg(592,&quot;Language (needs restart)&quot;)),DONTSTRETCH,DONTFILL|WEST);
-		String[] tmp = (new FileBugfix(FileBugfix.getProgramDirectory()+&quot;/languages&quot;).list(&quot;*.cfg&quot;, File.LIST_FILES_ONLY)); //&quot;*.xyz&quot; doesn't work on some systems -&gt; use FileBugFix
+		String[] tmp = (new FileBugfix(FileBase.getProgramDirectory()+&quot;/languages&quot;).list(&quot;*.cfg&quot;, FileBase.LIST_FILES_ONLY)); //&quot;*.xyz&quot; doesn't work on some systems -&gt; use FileBugFix
 		if (tmp == null) tmp = new String[0];
 		String [] langs = new String[tmp.length +1];
 		langs[0] = &quot;auto&quot;;
@@ -232,7 +231,7 @@
 				MyLocale.getMsg(636,&quot;OC Empfehlungen&quot;),
 				MyLocale.getMsg(637,&quot;OC Index&quot;)},pref.listColMap),MyLocale.getMsg(595,&quot;List&quot;),null);
 
-		Card c=mTab.addCard(tccBugs=new TableColumnChooser(new String[] {
+		mTab.addCard(tccBugs=new TableColumnChooser(new String[] {
 				MyLocale.getMsg(6000,&quot;Guid&quot;),
 				MyLocale.getMsg(6001,&quot;Name&quot;),
 				MyLocale.getMsg(6002,&quot;track#&quot;),
@@ -245,8 +244,6 @@
 				MyLocale.getMsg(6009,&quot;To Wpt&quot;),
 				MyLocale.getMsg(6010,&quot;To Date&quot;),
 				MyLocale.getMsg(6011,&quot;To Log&quot;)},pref.travelbugColMap),&quot;T-bugs&quot;,null);
-		//c.iconize(new Image(&quot;bug.gif&quot;));
-		//this.addLast(scp.getScrollablePanel(), CellConstants.STRETCH, CellConstants.FILL);
 		
 		this.addLast(mTab);
 		addNext(cancelB = new mButton(MyLocale.getMsg(614,&quot;Cancel&quot;)),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
@@ -304,9 +301,9 @@
 				this.close(0);
 			}
 			if(ev.target == brwBt){
-				FileChooser fc = new FileChooser(FileChooser.DIRECTORY_SELECT, pref.baseDir);
+				FileChooser fc = new FileChooser(FileChooserBase.DIRECTORY_SELECT, pref.baseDir);
 				fc.setTitle(MyLocale.getMsg(616,&quot;Select directory&quot;));
-				if(fc.execute() != FileChooser.IDCANCEL)	DataDir.setText(fc.getChosen()+&quot;/&quot;);
+				if(fc.execute() != FormBase.IDCANCEL)	DataDir.setText(fc.getChosen()+&quot;/&quot;);
 			}
 			if (ev.target == gpsB){
 				GPSPortOptions spo = new GPSPortOptions();
@@ -318,7 +315,7 @@
 				spo.logGpsChkB.setState(pref.logGPS);
 				spo.inputBoxLogTimer.setText(pref.logGPSTimer);
 				Gui.setOKCancel(s);
-				if (s.execute()== Editor.IDOK) {
+				if (s.execute()== FormBase.IDOK) {
 					pref.mySPO.portName = spo.portName; 
 					pref.mySPO.baudRate = spo.baudRate;
 					pref.forwardGPS = spo.forwardGpsChkB.getState();

Modified: trunk/src/CacheWolf/Profile.java
===================================================================
--- trunk/src/CacheWolf/Profile.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/Profile.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,7 +1,6 @@
 package CacheWolf;
 
 import CacheWolf.navi.Area;
-import HTML.Tmpl.Element.If;
 import ewe.io.BufferedWriter;
 import ewe.io.File;
 import ewe.io.FileNotFoundException;
@@ -9,7 +8,6 @@
 import ewe.io.FileWriter;
 import ewe.io.IOException;
 import ewe.io.PrintWriter;
-import ewe.io.Stream;
 import ewe.sys.Convert;
 import ewe.sys.Handle;
 import ewe.sys.Vm;
@@ -455,7 +453,7 @@
 			ch.addiWpts.clear();
 			ch.mainCache = null;
 			// if (ch.wayPoint.startsWith(&quot;GC&quot;)) // Only put potential master caches into the index
-				dbIndex.put((String)ch.wayPoint, new Integer(i));
+				dbIndex.put(ch.wayPoint, new Integer(i));
 		}
 		// Build references
 		int max = cacheDB.size();

Modified: trunk/src/CacheWolf/ProfileDataForm.java
===================================================================
--- trunk/src/CacheWolf/ProfileDataForm.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/ProfileDataForm.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -2,12 +2,6 @@
 
 
 import ewe.ui.*;
-import ewe.io.*;
-import ewesoft.xml.*;
-import ewe.util.*;
-import ewe.sys.*;
-import ewe.math.*;
-import ewe.fx.*;
 
 /**
 *	This form displays profile specific data.
@@ -29,7 +23,7 @@
 		
     	resizable =  false;
 		content.setText(MyLocale.getMsg(1115,&quot;Centre&quot;));
-		content.borderStyle=CellPanel.BDR_RAISEDOUTER|CellPanel.BDR_SUNKENINNER|CellPanel.BF_RECT;
+		content.borderStyle=UIConstants.BDR_RAISEDOUTER|UIConstants.BDR_SUNKENINNER|UIConstants.BF_RECT;
 	    //defaultTags.set(this.INSETS,new Insets(2,2,2,2));		
 		title = MyLocale.getMsg(1118,&quot;Profile&quot;)+&quot;: &quot;+profile.name;
 		content.addNext(new mLabel(MyLocale.getMsg(1116,&quot;Current&quot;)));
@@ -62,7 +56,7 @@
 			if (ev.target == btnCurrentCentre){
 				CoordsScreen cs = new CoordsScreen();
 				cs.setFields(pref.curCentrePt, CWPoint.CW);
-				if (cs.execute()== CoordsScreen.IDOK){
+				if (cs.execute()== FormBase.IDOK){
 					pref.curCentrePt.set(cs.getCoords());
 					btnCurrentCentre.setText(pref.curCentrePt.toString());
 					Global.getProfile().updateBearingDistance();
@@ -71,7 +65,7 @@
 			if (ev.target == btnProfileCentre){
 				CoordsScreen cs = new CoordsScreen();
 				cs.setFields(profile.centre, CWPoint.CW);
-				if (cs.execute()== CoordsScreen.IDOK){
+				if (cs.execute()== FormBase.IDOK){
 					profile.centre.set(cs.getCoords());
 					btnProfileCentre.setText(profile.centre.toString());
 					profile.hasUnsavedChanges=true;

Modified: trunk/src/CacheWolf/ProfilesForm.java
===================================================================
--- trunk/src/CacheWolf/ProfilesForm.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/ProfilesForm.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -3,10 +3,6 @@
 import utils.FileBugfix;
 import ewe.ui.*;
 import ewe.io.*;
-import ewesoft.xml.*;
-import ewe.util.*;
-import ewe.sys.*;
-import ewe.math.*;
 import ewe.fx.*;
 
 /**
@@ -20,7 +16,6 @@
 	// Maybe there is an easier way of making this happen, but I could not find it.
 	private class MyList extends mList {
 		private int first=1;
-		private mList ml;
 		private int select;
 	    
 		public MyList() {
@@ -91,7 +86,7 @@
 		btnOK.setHotKey(0, IKeys.ENTER);
 		btnCancel.setHotKey(0, IKeys.ESCAPE);
 		this.baseDir=baseDir;
-		choice.takeFocus(Control.ByKeyboard);
+		choice.takeFocus(ControlConstants.ByKeyboard);
 	}
 	
 	/**

Modified: trunk/src/CacheWolf/RadarPanel.java
===================================================================
--- trunk/src/CacheWolf/RadarPanel.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/RadarPanel.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -2,7 +2,6 @@
 import ewe.ui.*;
 import ewe.util.*;
 import ewe.fx.*;
-import ewe.sys.*;
 import ewe.graphics.*;
 
 /**
@@ -56,11 +55,11 @@
 		selectedWaypoint = sWp;
 		pref = p;
 		cacheDB = db;
-		height = (int)(pref.myAppHeight)*6/5; // add 10% each at top/bottom 
+		height = (pref.myAppHeight)*6/5; // add 10% each at top/bottom 
 		//height = (int)height * 2;
 		////Vm.debug(&quot;Height: &quot; + Convert.toString(height));
 		////Vm.debug(&quot;App Height: &quot; + Convert.toString(pref.myAppHeight));
-		width = (int)(pref.myAppWidth)*6/5;
+		width = (pref.myAppWidth)*6/5;
 		//width = (int)width * 2;
 	}
 	
@@ -181,18 +180,18 @@
 		} else {
 			scale = (double)scaleKm / (double)width;
 		}
-		centerX = (int)(width / 2);
-		centerY = (int)(height / 2);
+		centerX = (width / 2);
+		centerY = (height / 2);
 		//centerY = (int)(centerY-centerY*0.15);
 		g.setColor(new Color(0,255,0));
 		int radstep= 0, steps=0, radius = 0;
 		
 		if(width &gt; height){
 			radstep = (int)(10 / scale);
-			steps = (int)(width / radstep);
+			steps = (width / radstep);
 		}else{
 			radstep = (int)(10 / scale);
-			steps = (int)(height / radstep);
+			steps = (height / radstep);
 		}
 		for(int i = 1; i &lt;= steps; i++){
 			radius = (radstep * i)*2;
@@ -212,7 +211,7 @@
 		AniImage aImg = new AniImage(img);
 		//iActP.addImage(aImg);
 		iActP.backgroundImage = img;
-		int xPos = (int)(pref.myAppWidth/2 - width/2);
+		int xPos = (pref.myAppWidth/2 - width/2);
 		aImg.setLocation(xPos,0);
 		aImg.refresh();
 	}

Modified: trunk/src/CacheWolf/Rebuild.java
===================================================================
--- trunk/src/CacheWolf/Rebuild.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/Rebuild.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -2,6 +2,7 @@
 
 import ewe.io.FileReader;
 import ewe.sys.Handle;
+import ewe.ui.FormBase;
 import ewe.ui.MessageBox;
 import ewe.ui.ProgressBarForm;
 import utils.FileBugfix;
@@ -56,13 +57,13 @@
 			(new MessageBox(MyLocale.getMsg(327, &quot;Information&quot;), 
 					  MyLocale.getMsg(210,&quot;Caches nicht in index.xml: &quot;)+orphans+
 					  MyLocale.getMsg(211,&quot;\nDavon hinzugef&#252;gt: &quot;)+nAdded
-					, MessageBox.OKB)).execute();
+					, FormBase.OKB)).execute();
 			prof.buildReferences();
 			prof.saveIndex(Global.getPref(),true);
 		}
 		if (orphans!=nAdded &amp;&amp; (new MessageBox(MyLocale.getMsg(327, &quot;Information&quot;),
 					MyLocale.getMsg(212,&quot;Delete all .xml files not in index.xml and associated pictures&quot;), 
-					MessageBox.YESB | MessageBox.NOB)).execute()==MessageBox.YESB) {
+					FormBase.YESB | FormBase.NOB)).execute()==FormBase.YESB) {
 			h = new Handle();
 			pbf.setTask(h,MyLocale.getMsg(213,&quot;Deleting orphans&quot;));
 			DataMover dm=new DataMover();

Modified: trunk/src/CacheWolf/Reducer.java
===================================================================
--- trunk/src/CacheWolf/Reducer.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/Reducer.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,6 +1,5 @@
 package CacheWolf;
 import ewe.util.*;
-import ewe.sys.*;
 
 /**
 *	Class to reduce a string to its main components,

Modified: trunk/src/CacheWolf/STRreplace.java
===================================================================
--- trunk/src/CacheWolf/STRreplace.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/STRreplace.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,7 +1,5 @@
 package CacheWolf;
 
-import ewe.sys.Vm;
-
 public class STRreplace{
 		/* Replace all instances of a String in a String.
 		 *   @param  s  String to alter.

Modified: trunk/src/CacheWolf/SafeXML.java
===================================================================
--- trunk/src/CacheWolf/SafeXML.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/SafeXML.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -7,7 +7,6 @@
 */
 
 import ewe.util.Hashtable;
-import ewe.sys.*;
 
 public class SafeXML{
 	private static final char ENTITY_START = '&amp;';

Modified: trunk/src/CacheWolf/SearchCache.java
===================================================================
--- trunk/src/CacheWolf/SearchCache.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/SearchCache.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,6 +1,5 @@
 package CacheWolf;
 import ewe.util.*;
-import ewe.sys.*;
 
 /**
 *	A class to perform a search on the cache database.

Modified: trunk/src/CacheWolf/ShowCacheInBrowser.java
===================================================================
--- trunk/src/CacheWolf/ShowCacheInBrowser.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/ShowCacheInBrowser.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -2,20 +2,17 @@
 import com.stevesoft.ewe_pat.Regex;
 
 import ewe.io.BufferedWriter;
-import ewe.io.File;
+import ewe.io.FileBase;
 import ewe.io.FileWriter;
-import ewe.io.IOException;
 import ewe.io.PrintWriter;
 import ewe.sys.Convert;
 import ewe.sys.Vm;
-import ewe.ui.InputBox;
 import ewe.util.*;
-import ewe.util.Hashtable;
 import HTML.Template;
 
 
 public class ShowCacheInBrowser {
-	String pd=File.getProgramDirectory();
+	String pd=FileBase.getProgramDirectory();
 	String saveTo=pd+&quot;/temp.html&quot;;
 	static Hashtable diff=null;
 	static Hashtable terr=null;
@@ -65,9 +62,9 @@
 				Vm.showWait(true);
 				try {
 					if (chD.wayPoint.startsWith(&quot;OC&quot;))
-						tpl.setParam(&quot;TYPE&quot;, &quot;\&quot;<A HREF="file://">file://</A>&quot;+File.getProgramDirectory()+&quot;/&quot;+CacheType.transOCType(chD.type)+&quot;.gif\&quot;&quot;);
+						tpl.setParam(&quot;TYPE&quot;, &quot;\&quot;<A HREF="file://">file://</A>&quot;+FileBase.getProgramDirectory()+&quot;/&quot;+CacheType.transOCType(chD.type)+&quot;.gif\&quot;&quot;);
 					else	
-						tpl.setParam(&quot;TYPE&quot;, &quot;\&quot;<A HREF="file://">file://</A>&quot;+File.getProgramDirectory()+&quot;/&quot;+chD.type+&quot;.gif\&quot;&quot;);
+						tpl.setParam(&quot;TYPE&quot;, &quot;\&quot;<A HREF="file://">file://</A>&quot;+FileBase.getProgramDirectory()+&quot;/&quot;+chD.type+&quot;.gif\&quot;&quot;);
 					tpl.setParam(&quot;SIZE&quot;, chD.CacheSize);
 					tpl.setParam(&quot;WAYPOINT&quot;, chD.wayPoint);
 					tpl.setParam(&quot;CACHE_NAME&quot;, chD.CacheName);

Modified: trunk/src/CacheWolf/SolverPanel.java
===================================================================
--- trunk/src/CacheWolf/SolverPanel.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/SolverPanel.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -3,10 +3,8 @@
 
 import ewe.ui.*;
 import ewe.io.*;
-import ewe.filechooser.FileChooser;
 import ewe.fx.*;
 import ewe.util.*;
-import ewe.sys.*;
 
 /**
 * Class to create the solver panel. Calls the parser and tokeniser and handles
@@ -46,7 +44,7 @@
 	private class OutputPanel extends mTextPad {
 		MenuItem mnuClr;
 		OutputPanel() {
-			this.modify(Control.NotEditable,0);
+			this.modify(ControlConstants.NotEditable,0);
 			//this.modifiers=this.modifiers|WantHoldDown; 
 			setMenu(mnuContext=getClipboardMenu(new Menu(new MenuItem[]{ mnuClr=new MenuItem(MyLocale.getMsg(1734,&quot;Clear output&quot;)) },&quot;&quot;)));
 		} 
@@ -141,7 +139,7 @@
 				processCommand(mText.getText());
 			}
 			if (ev.target==btnWolfLang) {
-				InfoScreen is = new InfoScreen(File.getProgramDirectory() + &quot;/&quot; + &quot;wolflang.html&quot;, MyLocale.getMsg(118,&quot;WolfLanguage&quot;), true, pref);
+				InfoScreen is = new InfoScreen(FileBase.getProgramDirectory() + &quot;/&quot; + &quot;wolflang.html&quot;, MyLocale.getMsg(118,&quot;WolfLanguage&quot;), true, pref);
 				is.execute(parent.getFrame(), Gui.CENTER_FRAME);
 			}
 			if (ev.target==btnDegRad) {

Modified: trunk/src/CacheWolf/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/SpiderGC.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/SpiderGC.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -80,7 +80,7 @@
 	 */
 	public int login(){
 		loggedIn = false;
-		String start,doc,loginPage,loginSuccess,nextPage;
+		String start,loginPage,loginSuccess,nextPage;
 		try {
 			loginPage=p.getProp(&quot;loginPage&quot;);
 			loginSuccess=p.getProp(&quot;loginSuccess&quot;);
@@ -95,7 +95,7 @@
 		int code = infB.execute();
 		passwort = infB.getInput();
 		infB.close(0);
-		if(code != Form.IDOK) return code;
+		if(code != FormBase.IDOK) return code;
 
 		// Now start the login proper
 		infB = new InfoBox(MyLocale.getMsg(5507,&quot;Status&quot;), MyLocale.getMsg(5508,&quot;Logging in...&quot;));
@@ -106,7 +106,7 @@
 			start = fetch(loginPage);   //<A HREF="http://www.geocaching.com/login/Default.aspx">http://www.geocaching.com/login/Default.aspx</A>
 		} catch(Exception ex){
 			infB.close(0);
-			(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(5499,&quot;Error loading login page&quot;), MessageBox.OKB)).execute();
+			(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(5499,&quot;Error loading login page&quot;), FormBase.OKB)).execute();
 			pref.log(&quot;[login]:Could not fetch: gc.com login page&quot;,ex);
 			passwort=&quot;&quot;;
 			return ERR_LOGIN;
@@ -157,13 +157,13 @@
 							pref.log(&quot;[login.Answer]:&quot;+start);
 						}
 						infB.close(0);
-						(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(5501,&quot;Login failed! Wrong account or password?&quot;), MessageBox.OKB)).execute();
+						(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(5501,&quot;Login failed! Wrong account or password?&quot;), FormBase.OKB)).execute();
 						return ERR_LOGIN;
 					}
 				}catch(Exception ex){
 					pref.log(&quot;[login]:Login failed with exception.&quot;, ex);
 					infB.close(0);
-					(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(5501,&quot;Login failed. Error loading page after login.&quot;), MessageBox.OKB)).execute();
+					(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(5501,&quot;Login failed. Error loading page after login.&quot;), FormBase.OKB)).execute();
 					return ERR_LOGIN;
 				}
 			}
@@ -190,10 +190,10 @@
 		boolean loginAborted=infB.isClosed;
 		infB.close(0);
 		if (loginAborted)
-			return Form.IDCANCEL;
+			return FormBase.IDCANCEL;
 		else {
 			loggedIn = true;
-			return Form.IDOK;
+			return FormBase.IDOK;
 		}
 	}
 
@@ -210,7 +210,7 @@
 
 		// check if we need to login
 		if (!loggedIn){
-			if (this.login()!=Form.IDOK) return false;
+			if (this.login()!=FormBase.IDOK) return false;
 			// loggedIn is already set by this.login()
 		}
 		CacheHolderDetail chD=ch.getCacheDetails(true); //new CacheHolderDetail(ch);
@@ -245,7 +245,7 @@
 		// Check whether spider definitions could be loaded, if not issue appropriate message and terminate
 		// Try to login. If login fails, issue appropriate message and terminate
 		if (!loggedIn || Global.getPref().forceLogin) {
-			if (login()!=Form.IDOK) {
+			if (login()!=FormBase.IDOK) {
 				return &quot;&quot;;
 			}
 		}
@@ -277,7 +277,7 @@
 		CacheHolderDetail chD;
 		CWPoint origin = pref.curCentrePt; // No need to copy curCentrePt as it is only read and not written
 		if (!origin.isValid()) {
-			(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(5509,&quot;Coordinates for centre must be set&quot;), MessageBox.OKB)).execute();
+			(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(5509,&quot;Coordinates for centre must be set&quot;), FormBase.OKB)).execute();
 			return;
 		}
 		if (System.getProperty(&quot;os.name&quot;)!=null)pref.log(&quot;Operating system: &quot;+System.getProperty(&quot;os.name&quot;)+&quot;/&quot;+System.getProperty(&quot;os.arch&quot;));
@@ -288,7 +288,7 @@
 		//index the database for faster searching!
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			ch = (CacheHolder)cacheDB.get(i);
-			indexDB.put((String)ch.wayPoint, new Integer(i));
+			indexDB.put(ch.wayPoint, new Integer(i));
 			ch.is_new = false;
 		}
 		String start = &quot;&quot;;
@@ -297,11 +297,11 @@
 		String doc = &quot;&quot;;
 
 		if (!loggedIn || Global.getPref().forceLogin) {
-			if(login() != Form.IDOK) return;
+			if(login() != FormBase.IDOK) return;
 		}
 
 		OCXMLImporterScreen options = new OCXMLImporterScreen(MyLocale.getMsg(5510,&quot;Spider Options&quot;),	OCXMLImporterScreen.INCLUDEFOUND | OCXMLImporterScreen.DIST| OCXMLImporterScreen.IMAGES| OCXMLImporterScreen.ISGC);
-		if (options.execute() == OCXMLImporterScreen.IDCANCEL) {return; }
+		if (options.execute() == FormBase.IDCANCEL) {return; }
 		String dist = options.distanceInput.getText();
 		if (dist.length()== 0) return;
 		distance = Common.parseDouble(dist);
@@ -333,7 +333,7 @@
 			pref.log(&quot;Error fetching first list page&quot;,ex,true);
 			Vm.showWait(false);
 			infB.close(0);
-			(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(5503,&quot;Error fetching first list page.&quot;), MessageBox.OKB)).execute();
+			(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(5503,&quot;Error fetching first list page.&quot;), FormBase.OKB)).execute();
 			return;
 		}
 		dummy = &quot;&quot;;
@@ -1206,7 +1206,7 @@
 	*	This method does exactly that. Actually this method is generic in the sense
 	*	that it can be used to post to a URL using http post.
 	*/
-	private static String fetch_post(String address, String document, String path) throws IOException {
+	private static String fetch_post(String address, String document, String path) {
 		HttpConnection conn;
 		try {
 			conn = new HttpConnection(address);
@@ -1292,11 +1292,11 @@
 		}
 		try {
 			if (bugList.equals(&quot;&quot;) || bugList.indexOf(p.getProp(&quot;bugNotFound&quot;))&gt;=0) {
-				(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(6020,&quot;Travelbug not found.&quot;), MessageBox.OKB)).execute();
+				(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(6020,&quot;Travelbug not found.&quot;), FormBase.OKB)).execute();
 				return &quot;&quot;;
 			}
 			if (bugList.indexOf(p.getProp(&quot;bugTotalRecords&quot;))&lt;0) {
-				(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(6021,&quot;More than one travelbug found. Specify name more precisely.&quot;), MessageBox.OKB)).execute();
+				(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(6021,&quot;More than one travelbug found. Specify name more precisely.&quot;), FormBase.OKB)).execute();
 				return &quot;&quot;;
 			}
 			Extractor exGuid = new Extractor(bugList,p.getProp(&quot;bugGuidExStart&quot;),p.getProp(&quot;bugGuidExEnd&quot;),0,Extractor.EXCLUDESTARTEND); // TODO Replace with spider.def
@@ -1327,7 +1327,7 @@
 		}
 		try {
 			if (bugDetails.indexOf(p.getProp(&quot;bugNotFound&quot;))&gt;=0) {
-				(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(6020,&quot;Travelbug not found.&quot;), MessageBox.OKB)).execute();
+				(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(6020,&quot;Travelbug not found.&quot;), FormBase.OKB)).execute();
 				return &quot;&quot;;
 			}
 			Extractor exDetails = new Extractor(bugDetails,p.getProp(&quot;bugDetailsStart&quot;),p.getProp(&quot;bugDetailsEnd&quot;),0,Extractor.EXCLUDESTARTEND);
@@ -1397,16 +1397,16 @@
 		myProperties() {
 			super();
 			try {
-				load(new FileInputStream(File.getProgramDirectory()+&quot;/spider.def&quot;));
+				load(new FileInputStream(FileBase.getProgramDirectory()+&quot;/spider.def&quot;));
 			} catch (Exception ex) {
 				pref.log(&quot;Failed to load spider.def&quot;,ex);
-				(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(5504,&quot;Could not load 'spider.def'&quot;), MessageBox.OKB)).execute();
+				(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(5504,&quot;Could not load 'spider.def'&quot;), FormBase.OKB)).execute();
 			}
 		}
 		public String getProp(String key) throws Exception {
 			String s=super.getProperty(key);
 			if (s==null) {
-				(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(5497,&quot;Error missing tag in spider.def&quot;) + &quot;: &quot;+key, MessageBox.OKB)).execute();
+				(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;), MyLocale.getMsg(5497,&quot;Error missing tag in spider.def&quot;) + &quot;: &quot;+key, FormBase.OKB)).execute();
 				throw new Exception(&quot;Missing tag in spider.def: &quot;+key);
 			}
 			return s;

Modified: trunk/src/CacheWolf/StatusBar.java
===================================================================
--- trunk/src/CacheWolf/StatusBar.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/StatusBar.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -89,7 +89,7 @@
 			if (ev.target == btnCacheTour){
 				Global.mainForm.toggleCacheListVisible();			
 			}
-			Gui.takeFocus(Global.mainTab.tbP.tc, Control.ByKeyboard);
+			Gui.takeFocus(Global.mainTab.tbP.tc, ControlConstants.ByKeyboard);
 		}
 		super.onEvent(ev);
 	}

Modified: trunk/src/CacheWolf/TableColumnChooser.java
===================================================================
--- trunk/src/CacheWolf/TableColumnChooser.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/TableColumnChooser.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,10 +1,6 @@
 package CacheWolf;
 
 import ewe.fx.*;
-import ewe.sys.Convert;
-import ewe.sys.VMApp;
-import ewe.sys.VMApps;
-import ewe.sys.Vm;
 import ewe.ui.*;
 import ewe.util.*;
 
@@ -27,7 +23,7 @@
         addNext(new mLabel(&quot;&quot;));
         addLast(new mLabel(MyLocale.getMsg(6051,&quot;Don't show column&quot;)));
         
-        addNext(new MyScrollBarPanel(lstShown=new myList(6,shownCols),ScrollBarPanel.AlwaysShowVerticalScrollers));
+        addNext(new MyScrollBarPanel(lstShown=new myList(6,shownCols),ScrollablePanel.AlwaysShowVerticalScrollers));
         CellPanel cpMid=new CellPanel();
         cpMid.addLast(new mLabel(&quot;&quot;));
         mImage imgRight=new mImage(&quot;ewe/rightarrowsmall.bmp&quot;);imgRight.transparentColor=Color.White;
@@ -37,7 +33,7 @@
         cpMid.addLast(btnLeft=new mButton(imgLeft));
         cpMid.addLast(new mLabel(&quot;&quot;));
         addNext(cpMid,VSTRETCH,VFILL);
-        addLast(new MyScrollBarPanel(lstHidden=new myList(6,hiddenCols),ScrollBarPanel.AlwaysShowVerticalScrollers));
+        addLast(new MyScrollBarPanel(lstHidden=new myList(6,hiddenCols),ScrollablePanel.AlwaysShowVerticalScrollers));
         
         CellPanel pnlButtons=new CellPanel();
 		mImage imgDown=new mImage(&quot;ewe/downarrowsmall.bmp&quot;); imgDown.transparentColor=Color.White;
@@ -175,7 +171,7 @@
 			 if(srcIdx&lt;0) return;
 	    	 String colToMove=(String) items.elementAt(srcIdx);
 	    	 items.del(srcIdx);
-	    	 ((myList)dst).items.add(colToMove);
+	    	 dst.items.add(colToMove);
 	    	 repaint();
 	    	 dst.repaint();
 	    	 if (srcIdx&gt;=items.size()) select(items.size()-1);

Modified: trunk/src/CacheWolf/TableForm.java
===================================================================
--- trunk/src/CacheWolf/TableForm.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/TableForm.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,9 +1,6 @@
 package CacheWolf;
 
 import ewe.ui.CellConstants;
-import ewe.ui.CellPanel;
-import ewe.ui.Control;
-import ewe.ui.ControlEvent;
 import ewe.ui.Editor;
 
 public class TableForm extends Editor {

Modified: trunk/src/CacheWolf/TablePanel.java
===================================================================
--- trunk/src/CacheWolf/TablePanel.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/TablePanel.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -2,7 +2,6 @@
 
 import ewe.ui.*;
 import ewe.util.*;
-import ewe.sys.*;
 import ewe.fx.*;
 
 /**

Modified: trunk/src/CacheWolf/Test.java
===================================================================
--- trunk/src/CacheWolf/Test.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/Test.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -28,12 +28,10 @@
 	void testPerformance(){
 		Time start, end;
 		int i;
-		double tmp;
-		
 		// 100.000 Sinus
 		start = new Time();
 		for (i=0; i&lt;100000; i++){
-			tmp = Math.sin(53);
+			Math.sin(53);
 		}
 		end = new Time();
 		printResult(&quot;sin(53)&quot;, start, end, i);
@@ -41,7 +39,7 @@
 		// 1.000 CWPoint via constructor
 		start = new Time();
 		for (i=0; i&lt;100; i++){
-			CWPoint cwP = new CWPoint(&quot;N 51&#176; 27.635 E 009&#176; 37.621&quot;, CWPoint.CW);
+			new CWPoint(&quot;N 51&#176; 27.635 E 009&#176; 37.621&quot;, CWPoint.CW);
 		}
 		end = new Time();
 		printResult(&quot;CWPoint(\&quot;N 51&#176; 27.635 E 009&#176; 37.621\&quot;, CWPoint.CW)&quot;, start, end, i);

Modified: trunk/src/CacheWolf/TravelbugJourneyScreen.java
===================================================================
--- trunk/src/CacheWolf/TravelbugJourneyScreen.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/TravelbugJourneyScreen.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -77,7 +77,7 @@
 		title=&quot;Travelbugs&quot;+cache;
 		tcTbJourneyList=new tbListControl();
 		tcTbJourneyList.setTableModel(modTbJourneyList=new tbListTableModel());
-		tablepane.addLast(new MyScrollBarPanel(tcTbJourneyList,ScrollBarPanel.AlwaysShowVerticalScrollers),STRETCH,FILL);
+		tablepane.addLast(new MyScrollBarPanel(tcTbJourneyList,ScrollablePanel.AlwaysShowVerticalScrollers),STRETCH,FILL);
 	
 		lowerpane = split.getNextPanel();
 		
@@ -200,9 +200,9 @@
 			tcTbJourneyList.repaint();
 		}
 		if (ev instanceof ControlEvent &amp;&amp; ev.type == ControlEvent.PRESSED &amp;&amp; selectedRow!=-1){
-			if (ev.target==inpTrackingNo) {pnlTab.selectNextTab(true,true); Gui.takeFocus(inpFromProfile,Control.ByKeyboard);pnlTab.repaint(); }
-			if (ev.target==inpFromDate) Gui.takeFocus(chkFromLogged,Control.ByKeyboard);
-			if (ev.target==inpToDate) Gui.takeFocus(chkToLogged,Control.ByKeyboard);
+			if (ev.target==inpTrackingNo) {pnlTab.selectNextTab(true,true); Gui.takeFocus(inpFromProfile,ControlConstants.ByKeyboard);pnlTab.repaint(); }
+			if (ev.target==inpFromDate) Gui.takeFocus(chkFromLogged,ControlConstants.ByKeyboard);
+			if (ev.target==inpToDate) Gui.takeFocus(chkToLogged,ControlConstants.ByKeyboard);
 			if (ev.target==btnFromDate || ev.target==btnToDate) {
 				mInput inpDate=ev.target==btnFromDate ? inpFromDate : inpToDate;
 				DateTimeChooser dc=new DateTimeChooser(Vm.getLocale());
@@ -222,18 +222,18 @@
 				  inpDate.setText(Convert.toString(dc.year)+&quot;-&quot;+MyLocale.formatLong(dc.month,&quot;00&quot;)+&quot;-&quot;+MyLocale.formatLong(dc.day,&quot;00&quot;)+&quot; &quot;+dc.time);
 				  if (ev.target==btnFromDate){ 
 					  tblMyTravelbugJourneys.getTBJourney(selectedRow).setFromDate(inpDate.getText());
-					  Gui.takeFocus(chkFromLogged,Control.ByKeyboard);
+					  Gui.takeFocus(chkFromLogged,ControlConstants.ByKeyboard);
 				  } else {
 					  tblMyTravelbugJourneys.getTBJourney(selectedRow).setToDate(inpDate.getText());
-					  Gui.takeFocus(chkToLogged,Control.ByKeyboard);
+					  Gui.takeFocus(chkToLogged,ControlConstants.ByKeyboard);
 				  } tcTbJourneyList.repaint();
 				}				
 			}
 		}
 		if(ev instanceof ControlEvent &amp;&amp; ev.type == ControlEvent.EXITED){
 			pnlTab.selectNextTab(true,true); 
-			if (ev.target==chkFromLogged) Gui.takeFocus(inpToProfile,Control.ByKeyboard);
-			if (ev.target==chkToLogged) Gui.takeFocus(txtMission,Control.ByKeyboard);
+			if (ev.target==chkFromLogged) Gui.takeFocus(inpToProfile,ControlConstants.ByKeyboard);
+			if (ev.target==chkToLogged) Gui.takeFocus(txtMission,ControlConstants.ByKeyboard);
 		}
 		// The user closed the travelbugs screen
 		if (ev instanceof FormEvent &amp;&amp; ev.type==FormEvent.CLOSED  &amp;&amp; chD!=null) {
@@ -300,7 +300,7 @@
 				if (map!=7 &amp;&amp; map!=11) 
 					return new IconAndText((IImage)imgRed,(String) tblMyTravelbugJourneys.getTBJourney(row).getElementByNumber(map),fm);
 				else { // Checkbox - special treatment
-					IconAndText iat=new IconAndText((IImage)imgRed,&quot;&quot;,fm);
+					IconAndText iat=new IconAndText(imgRed,&quot;&quot;,fm);
 					iat.addColumn(tblMyTravelbugJourneys.getTBJourney(row).getElementByNumber(map));
 					return iat;
 				}
@@ -604,11 +604,10 @@
 	
 	
 	public void cursorTo(int row,int col,boolean selectNew) {
-		TravelbugJourney tbj;
 		super.cursorTo(row,col,selectNew);
 		selectedRow=row;
 		if (row&gt;=0) { 
-			modTbJourneyList.showFields(tbj=tblMyTravelbugJourneys.getTBJourney(row));
+			modTbJourneyList.showFields(tblMyTravelbugJourneys.getTBJourney(row));
 		} else {
 			modTbJourneyList.showFields(new TravelbugJourney(&quot;&quot;));
 		}

Modified: trunk/src/CacheWolf/TravelbugScreen.java
===================================================================
--- trunk/src/CacheWolf/TravelbugScreen.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/TravelbugScreen.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -22,7 +22,7 @@
 		this.setTitle(title);
 		this.setPreferredSize(240, -1);
 		disp=new myList(tbl,allowNew);
-		ScrollBarPanel sbp = new MyScrollBarPanel(disp, ScrollBarPanel.NeverShowHorizontalScrollers);
+		ScrollBarPanel sbp = new MyScrollBarPanel(disp, ScrollablePanel.NeverShowHorizontalScrollers);
 		this.addLast(sbp);
 		this.addNext(btCancel = new mButton(MyLocale.getMsg(614,&quot;Cancel&quot;)),CellConstants.DONTSTRETCH, CellConstants.FILL);
 		this.addLast(btAccept = new mButton(&quot;OK&quot;),CellConstants.DONTSTRETCH, CellConstants.FILL);
@@ -30,7 +30,7 @@
 	}
 
 	public void onEvent(Event ev){
-        if (ev instanceof ListEvent &amp;&amp; ev.type==ListEvent.SELECTED) {
+        if (ev instanceof ListEvent &amp;&amp; ev.type==MenuEvent.SELECTED) {
         	btAccept.modify(0,Disabled);
         	btAccept.repaint();
         }

Modified: trunk/src/CacheWolf/UrlFetcher.java
===================================================================
--- trunk/src/CacheWolf/UrlFetcher.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/UrlFetcher.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,8 +1,5 @@
 package CacheWolf;
 
-import com.stevesoft.ewe_pat.wrap.CharArrayBufferWrap;
-
-import ewe.data.PropertyList;
 import ewe.io.ByteArrayInputStream;
 import ewe.io.IOException;
 import ewe.io.JavaUtf8Codec;

Modified: trunk/src/CacheWolf/Version.java
===================================================================
--- trunk/src/CacheWolf/Version.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/Version.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -2,9 +2,6 @@
 package CacheWolf;
 
 import com.stevesoft.ewe_pat.Regex;
-import ewe.net.*;
-import ewe.data.Property;
-import ewe.data.PropertyList;
 import ewe.io.*;
 import ewe.util.*;
 import ewe.sys.*;

Modified: trunk/src/CacheWolf/imp/KMLImporter.java
===================================================================
--- trunk/src/CacheWolf/imp/KMLImporter.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/imp/KMLImporter.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -5,7 +5,6 @@
 import ewesoft.xml.sax.*;
 import ewe.io.*;
 import ewe.sys.*;
-import CacheWolf.Extractor;
 import CacheWolf.CWPoint;
 
 /**

Modified: trunk/src/CacheWolf/myInteractivePanel.java
===================================================================
--- trunk/src/CacheWolf/myInteractivePanel.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/myInteractivePanel.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -37,7 +37,7 @@
 		long timePenOff=Vm.getTimeStampLong();
 		// If the pen rested more than 500 msec, we only display the info and don't treat it as a click
 		if (timePenOff-timePenOn&lt;500 || !Vm.isMobile()) { 
-			String fn = new String();
+			new String();
 			if(which instanceof RadarPanelImage){
 				RadarPanelImage ich = (RadarPanelImage)which;
 				Global.mainTab.clearDetails();				
@@ -110,7 +110,7 @@
 			 //wayPoint=ch.wayPoint;
 			 //Vm.debug(&quot;Waypoint : &quot;+ch.wayPoint);
 			 IconAndText icnDrag=new IconAndText();
-			 icnDrag.addColumn((IImage) CacheType.cache2Img(ch.type));
+			 icnDrag.addColumn(CacheType.cache2Img(ch.type));
 			 icnDrag.addColumn(ch.wayPoint);
 			 dc.dragData=dc.startImageDrag(icnDrag,new Point(8,8),this);
 			 //if (dc instanceof ImageDragContext) Vm.debug(&quot;&gt;&gt;&gt;&gt;Is Image drag&quot;);
@@ -146,7 +146,7 @@
 			g.drawText(wayPoint, 15,1);
 			g.drawImage(which.image,0,0);
 			dragImage=new AniImage(img);
-			dragImage.properties|=AniImage.IsMoveable;
+			dragImage.properties|=mImage.IsMoveable;
 			dragImage.setLocation(pos.x,pos.y);
 		}
 		return super.imageBeginDragged(dragImage,pos);

Modified: trunk/src/CacheWolf/myTableControl.java
===================================================================
--- trunk/src/CacheWolf/myTableControl.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/myTableControl.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -127,7 +127,7 @@
 				if ( ((CacheHolder)cacheDB.get(i)).is_Checked) count++;
 			}
 			if (count&gt;0) {
-				if ((new MessageBox(MyLocale.getMsg(144,&quot;Warnung&quot;),MyLocale.getMsg(1022, &quot;Delete all caches that have a tick?&quot;), MessageBox.YESB | MessageBox.NOB)).execute() != Form.IDYES) return;
+				if ((new MessageBox(MyLocale.getMsg(144,&quot;Warnung&quot;),MyLocale.getMsg(1022, &quot;Delete all caches that have a tick?&quot;), FormBase.YESB | FormBase.NOB)).execute() != FormBase.IDYES) return;
 				DataMover dm=new DataMover();
 				myProgressBarForm pbf = new myProgressBarForm();
 				Handle h = new Handle();
@@ -159,7 +159,7 @@
 			CacheHolder thisCache = (CacheHolder)cacheDB.get(tbp.getSelectedCache());
 			CWPoint cp=new CWPoint(thisCache.LatLon);
 			if (!cp.isValid()){
-				MessageBox tmpMB = new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;), MyLocale.getMsg(4111,&quot;Coordinates must be entered in the format N DD MM.MMM E DDD MM.MMM&quot;), MessageBox.OKB);
+				MessageBox tmpMB = new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;), MyLocale.getMsg(4111,&quot;Coordinates must be entered in the format N DD MM.MMM E DDD MM.MMM&quot;), FormBase.OKB);
 				tmpMB.execute();
 			} else {				
 				pref.curCentrePt.set(cp);
@@ -181,7 +181,7 @@
 					CWWrapper.exec(pref.browser, chD.URL); // maybe this works on some PDAs?
 				}
 			} catch (IOException ex) {
-				(new MessageBox(&quot;Error&quot;, &quot;Cannot start browser!\n&quot;+ex.toString()+&quot;\nThe are two possible reasons:\n * path to internet browser in \npreferences not correct\n * An bug in ewe VM, please be \npatient for an update&quot;,MessageBox.OKB)).execute();
+				(new MessageBox(&quot;Error&quot;, &quot;Cannot start browser!\n&quot;+ex.toString()+&quot;\nThe are two possible reasons:\n * path to internet browser in \npreferences not correct\n * An bug in ewe VM, please be \npatient for an update&quot;,FormBase.OKB)).execute();
 			}
 		}
 		if (selectedItem.toString().equalsIgnoreCase(MyLocale.getMsg(1018,&quot;Open in browser offline&quot;))) {
@@ -227,7 +227,7 @@
 			 wayPoint=ch.wayPoint;
 			 //Vm.debug(&quot;Waypoint : &quot;+ch.wayPoint);
 			 imgDrag=new IconAndText();
-			 imgDrag.addColumn((IImage) CacheType.cache2Img(ch.type));
+			 imgDrag.addColumn(CacheType.cache2Img(ch.type));
 			 imgDrag.addColumn(ch.wayPoint);
 			 dc.dragData=dc.startImageDrag(imgDrag,new Point(8,8),this);
 		 } else super.startDragging(dc);

Modified: trunk/src/CacheWolf/myTableModel.java
===================================================================
--- trunk/src/CacheWolf/myTableModel.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/myTableModel.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -3,11 +3,9 @@
 import ewe.ui.*;
 import ewe.sys.*;
 import ewe.util.*;
-import java.lang.*;
 import ewe.fx.*;
-import ewe.reflect.*;
-import ewe.graphics.*;
 
+
 /**
 *	Table model used to display the cache list.
 * 	Used by the table control in the first panel of
@@ -221,7 +219,7 @@
 						else 
 							return checkboxUnticked;
 					case 1: // Type
-						return (IImage) CacheType.cache2Img(ch.type);
+						return CacheType.cache2Img(ch.type);
 					case 2: // Difficulty;
 						return ch.hard;
 					case 3: // Terrain

Modified: trunk/src/CacheWolf/navi/Area.java
===================================================================
--- trunk/src/CacheWolf/navi/Area.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/Area.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,6 +1,5 @@
 package CacheWolf.navi;
 
-import ewe.util.CharArray;
 import CacheWolf.CWPoint;
 
 public class Area {
@@ -111,13 +110,13 @@
 	 public static String getEasyFindString(CWPoint p, int prec) {
 		 double longinrange = p.lonDec;
 		 if (longinrange &gt; 180) longinrange -= 180;
-		 Double kw = new Double(((p.latDec+90)/180) * (double) (1 &lt;&lt; (prec)));
-		 int lat = new Double(((p.latDec+90)/180) * (double) (1 &lt;&lt; (prec))).intValue(); // TODO handle negative values
+		 Double kw = new Double(((p.latDec+90)/180) * (1 &lt;&lt; (prec)));
+		 int lat = new Double(((p.latDec+90)/180) * (1 &lt;&lt; (prec))).intValue(); // TODO handle negative values
 		 lat = kw.intValue();
 		 //kw = (double) (1 &lt;&lt; (prec));
 		 
 		 kw = new Double(((longinrange+180)/360) * (2 ^ (prec -1)));
-		 int lon = new Double(((longinrange+180)/360) * (double) (1 &lt;&lt; (prec))).intValue(); // 180 = 10110100
+		 int lon = new Double(((longinrange+180)/360) * (1 &lt;&lt; (prec))).intValue(); // 180 = 10110100
 		 String ret = &quot;&quot;;
 		 int tmp;
 		 for (int i=prec-1; i&gt;=0;  i--) {

Modified: trunk/src/CacheWolf/navi/CWGPSPoint.java
===================================================================
--- trunk/src/CacheWolf/navi/CWGPSPoint.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/CWGPSPoint.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -10,7 +10,6 @@
 import CacheWolf.Extractor;
 import CacheWolf.Global;
 import ewe.sys.*;
-import ewe.ui.ExecTransfer;
 import ewe.io.*;
 
 

Modified: trunk/src/CacheWolf/navi/GotoPanel.java
===================================================================
--- trunk/src/CacheWolf/navi/GotoPanel.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/GotoPanel.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -2,7 +2,6 @@
 
 import CacheWolf.CWPoint;
 import CacheWolf.CacheHolder;
-import CacheWolf.CacheType;
 import CacheWolf.CoordsScreen;
 import CacheWolf.DetailsPanel;
 import CacheWolf.Global;
@@ -12,11 +11,8 @@
 import CacheWolf.Profile;
 import ewe.ui.*;
 import ewe.util.Vector;
-import ewe.util.mString;
 import ewe.fx.*;
 import ewe.graphics.AniImage;
-import ewe.io.*;
-import ewe.net.Socket;
 //import ewe.io.IOException;
 //import ewe.io.SerialPort;
 //import ewe.io.SerialPortOptions;
@@ -120,14 +116,14 @@
 		CoordsP.addNext(lblGPS = new mLabel(&quot;GPS: &quot;),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
 		lblGPS.backGround = RED;
 		lblGPS.setMenu(mnuContextFormt);
-		lblGPS.modifyAll(Control.WantHoldDown, 0);
+		lblGPS.modifyAll(ControlConstants.WantHoldDown, 0);
 		CoordsP.addLast(lblPosition = new mLabel(myNavigation.gpsPos.toString(currFormat)),CellConstants.HSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
 		lblPosition.setMenu(mnuContextFormt);
-		lblPosition.modifyAll(Control.WantHoldDown, 0);
+		lblPosition.modifyAll(ControlConstants.WantHoldDown, 0);
 		CoordsP.addNext(lblDST = new mLabel(MyLocale.getMsg(1500,&quot;DST:&quot;)),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
 		lblDST.backGround = new Color(0,0,255);
 		lblDST.setMenu(mnuContextFormt);
-		lblDST.modifyAll(Control.WantHoldDown, 0);
+		lblDST.modifyAll(ControlConstants.WantHoldDown, 0);
 		CoordsP.addLast(btnGoto = new mButton(getGotoBtnText()),CellConstants.HSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
 		
 		//Rose for bearing
@@ -135,7 +131,7 @@
 		compassRose = new GotoRose();
 		icRose = new ImageControl(compassRose);
 		icRose.setMenu(mnuContextRose);
-		icRose.modifyAll(Control.WantHoldDown, 0); // this is necessary in order to make PenHold on a PDA work as right click
+		icRose.modifyAll(ControlConstants.WantHoldDown, 0); // this is necessary in order to make PenHold on a PDA work as right click
 		roseP.addLast(icRose,CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.NORTH));
 		
 		mnuContextRose.addItem(new MenuItem(&quot;&quot;, MenuItem.Separator, null));
@@ -184,8 +180,8 @@
 		int roseHeight = height - coordsRect.y - coordsRect.height;
 		if (Gui.screenIs(Gui.PDA_SCREEN) &amp;&amp; Vm.isMobile()) {
 			//some space for the SIP button
-			if ( (Vm.getParameter(Vm.VM_FLAGS) &amp; (Vm.VM_FLAG_SIP_BUTTON_ON_SCREEN)) == (Vm.VM_FLAG_SIP_BUTTON_ON_SCREEN) ){
-				Rect screen = (Rect)Window.getGuiInfo(Window.INFO_SCREEN_RECT,null,new Rect(),0);
+			if ( (Vm.getParameter(VmConstants.VM_FLAGS) &amp; (VmConstants.VM_FLAG_SIP_BUTTON_ON_SCREEN)) == (VmConstants.VM_FLAG_SIP_BUTTON_ON_SCREEN) ){
+				Rect screen = (Rect)Window.getGuiInfo(WindowConstants.INFO_SCREEN_RECT,null,new Rect(),0);
 				roseHeight -= screen.height / 14;				
 			}
 		}
@@ -201,7 +197,7 @@
 	 */ 
 	public void setDestination(CWPoint dest){
 		myNavigation.setDestination(dest);
-		if (!myNavigation.destination.isValid()) (new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;), MyLocale.getMsg(1507,&quot;Coordinates are out of range:&quot;) +&quot;\n&quot;+MyLocale.getMsg(1508,&quot;latitude&quot;)+&quot;: &quot;+myNavigation.destination.latDec+&quot;\n &quot;+MyLocale.getMsg(1509,&quot;longditue&quot;)+&quot;: &quot;+myNavigation.destination.lonDec, MessageBox.OKB)).execute();
+		if (!myNavigation.destination.isValid()) (new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;), MyLocale.getMsg(1507,&quot;Coordinates are out of range:&quot;) +&quot;\n&quot;+MyLocale.getMsg(1508,&quot;latitude&quot;)+&quot;: &quot;+myNavigation.destination.latDec+&quot;\n &quot;+MyLocale.getMsg(1509,&quot;longditue&quot;)+&quot;: &quot;+myNavigation.destination.lonDec, FormBase.OKB)).execute();
 		
 	}
 	
@@ -261,13 +257,13 @@
 		}
 		// receiving no data
 		if (fix == -1) {
-			if (gpsStatus != RED) (new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(1510, &quot;No data from GPS\nConnection to serial port closed&quot;),MessageBox.OKB)).exec();
+			if (gpsStatus != RED) (new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(1510, &quot;No data from GPS\nConnection to serial port closed&quot;),FormBase.OKB)).exec();
 			gpsStatus = RED;
 			myNavigation.stopGps();
 		}
 		// cannot interprete data
 		if (fix == -2) {
-			if (gpsStatus != RED) (new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(1511, &quot;Cannot interpret data from GPS\n possible reasons:\n wrong Port,\n wrong Baudrate,\n not NMEA-Protocol\nConnection to serial port closed\nLast String tried to interprete:\n&quot;)+myNavigation.gpsPos.lastStrExamined, MessageBox.OKB)).exec();
+			if (gpsStatus != RED) (new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(1511, &quot;Cannot interpret data from GPS\n possible reasons:\n wrong Port,\n wrong Baudrate,\n not NMEA-Protocol\nConnection to serial port closed\nLast String tried to interprete:\n&quot;)+myNavigation.gpsPos.lastStrExamined, FormBase.OKB)).exec();
 			gpsStatus = RED;
 			myNavigation.stopGps(); // TODO automatic in myNavigate?
 		}
@@ -313,7 +309,7 @@
 		if (centerTo != null &amp;&amp; centerTo.isValid())
 			mainT.SwitchToMovingMap(centerTo, false);
 		else
-		(new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(1513, &quot;Cannot start moving map without valid coordinates. Please enter coordinates as destination, as center, in selected cache or start GPS&quot;), MessageBox.OKB)).execute(); 
+		(new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(1513, &quot;Cannot start moving map without valid coordinates. Please enter coordinates as destination, as center, in selected cache or start GPS&quot;), FormBase.OKB)).execute(); 
 	}
 	
 	/**
@@ -432,7 +428,7 @@
 				CoordsScreen cs = new CoordsScreen();
 				if (myNavigation.destination.isValid())	cs.setFields(myNavigation.destination, currFormat);
 				else cs.setFields(new CWPoint(0,0), currFormat);
-				if (cs.execute(null, Gui.TOP) == CoordsScreen.IDOK)
+				if (cs.execute(null, CellConstants.TOP) == FormBase.IDOK)
 					setDestination(cs.getCoords());
 			}
 		}
@@ -537,7 +533,7 @@
 			drawFullRose(g, 0, new Color(255,255,255), new Color(200,200,200), new Color(255,255,255), new Color(200,200,200), new Color(150,150,150), new Color(75,75,75), 1.0f, true, true);
 		}
 		else {
-			int radius = (int)((float)roseRadius * 0.75f);
+			int radius = (int)(roseRadius * 0.75f);
 
 			g.setPen(new Pen(new Color(150,150,150),Pen.SOLID,3));
 			g.drawEllipse(location.width/2 - radius, location.height/2 - radius, 2 * radius, 2 * radius );
@@ -715,7 +711,7 @@
 					//drawRose(g, 360 - moveDir, new Color(100,100,100), new Color(200,200,200), 1.0f);
 					drawFullRose(g, 360 - moveDir, new Color(255,255,255), new Color(200,200,200), new Color(150,150,150), new Color(200,200,200), new Color(200,200,200), new Color(75,75,75), 1.0f, false, false);
 					
-					int radius = (int)((float)roseRadius * 0.75f);
+					int radius = (int)(roseRadius * 0.75f);
 					g.setPen(new Pen(RED,Pen.SOLID,3));
 					g.drawLine(location.width/2, location.height/2 - radius, location.width/2, location.height/2 + radius);
 					
@@ -747,13 +743,11 @@
 	private void drawSunArrow(Graphics g, float angle, Color col, float scale) {
 		float angleRad = (angle) * (float)java.lang.Math.PI / 180;
 		int centerX = location.width/2, centerY = location.height/2;
-		float arrowLength = (float)roseRadius * scale;
+		float arrowLength = roseRadius * scale;
 		float halfArrowWidth = arrowLength * 0.08f;
 		float circlePos = arrowLength * 0.7f;
 		int circleRadius = (int)(arrowLength * 0.1f);
 
-		int pointX = centerX + new Float(arrowLength * java.lang.Math.sin(angleRad)).intValue();
-		int pointY = centerY - new Float(arrowLength * java.lang.Math.cos(angleRad)).intValue();
 		int circleX = centerX + new Float(circlePos * java.lang.Math.sin(angleRad)).intValue();
 		int circleY = centerY - new Float(circlePos * java.lang.Math.cos(angleRad)).intValue();
 
@@ -781,7 +775,7 @@
 	private void drawThinArrow(Graphics g, float angle, Color col, Color colPoint, float scale) {
 		float angleRad = (angle) * (float)java.lang.Math.PI / 180;
 		int centerX = location.width/2, centerY = location.height/2;
-		float arrowLength = (float)roseRadius * scale;
+		float arrowLength = roseRadius * scale;
 		float halfOpeningAngle = (float)(java.lang.Math.PI * 0.03);
 		float sideLineLength = arrowLength * 0.75f;
 		
@@ -809,7 +803,7 @@
 	private void drawDoubleArrow(Graphics g, float angle, Color colFront, Color colRear, float scale) {
 		float angleRad = (angle) * (float)java.lang.Math.PI / 180;
 		int centerX = location.width/2, centerY = location.height/2;
-		float arrowLength = (float)roseRadius * scale;
+		float arrowLength = roseRadius * scale;
 		float halfArrowWidth = arrowLength * 0.1f;
 		
 		int[] pointsX = new int[3];
@@ -836,7 +830,7 @@
 	private void drawRose(Graphics g, float angle, Color colFront, Color colRear, float scale) {
 		float angleRad = (angle) * (float)java.lang.Math.PI / 180;
 		int centerX = location.width/2, centerY = location.height/2;
-		float arrowLength = (float)roseRadius * scale;
+		float arrowLength = roseRadius * scale;
 		float halfArrowWidth = arrowLength * 0.12f;
 		
 		int[] pointsX = new int[8];
@@ -891,7 +885,7 @@
 		float angleRadText = (angle + 7.5f) * (float)java.lang.Math.PI / 180;
 		int centerX = location.width/2, centerY = location.height/2;
 				
-		float arrowLength = (float)roseRadius * scale;
+		float arrowLength = roseRadius * scale;
 		float halfArrowWidth = arrowLength * innerScale;
 		
 		int[] pointsX = new int[3];
@@ -915,7 +909,7 @@
 		g.fillPolygon(pointsX, pointsY, 3);
 					
 		if (bDrawText){
-			int tempFontSize = new Float(scale * (float)mainFont.getSize()).intValue();
+			int tempFontSize = new Float(scale * mainFont.getSize()).intValue();
 			Font tempFont = new Font(mainFont.getName(), Font.BOLD, tempFontSize);
 			g.setFont(tempFont);
 			FontMetrics tempFm = g.getFontMetrics(tempFont);
@@ -935,7 +929,7 @@
 	private void drawThickArrow(Graphics g, float angle, Color col, float scale) {
 		float angleRad = (angle) * (float)java.lang.Math.PI / 180;
 		int centerX = location.width/2, centerY = location.height/2;
-		float arrowLength = (float)roseRadius * scale;
+		float arrowLength = roseRadius * scale;
 		float halfArrowWidth = arrowLength * 0.1f;
 		
 		int[] pointsX = new int[4];

Modified: trunk/src/CacheWolf/navi/MapImage.java
===================================================================
--- trunk/src/CacheWolf/navi/MapImage.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/MapImage.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -48,9 +48,9 @@
 		locAlways.y = y;
 		if (!hidden &amp;&amp; isOnScreen()) { 
 			super.setLocation(x, y);
-			properties &amp;= ~AniImage.IsInvisible;
+			properties &amp;= ~mImage.IsInvisible;
 		} else {
-			properties |= AniImage.IsInvisible;
+			properties |= mImage.IsInvisible;
 			super.move(0, 0);
 		}
 	}
@@ -60,9 +60,9 @@
 		locAlways.y = y;
 		if (!hidden &amp;&amp; isOnScreen()) { 
 			super.move(x, y);
-			properties &amp;= ~AniImage.IsInvisible;
+			properties &amp;= ~mImage.IsInvisible;
 		} else {
-			properties |= AniImage.IsInvisible;
+			properties |= mImage.IsInvisible;
 			super.move(0, 0);
 		}
 	}
@@ -82,7 +82,7 @@
 
 	public void hide() {
 		hidden = true;
-		properties |= AniImage.IsInvisible;
+		properties |= mImage.IsInvisible;
 	}
 	public void unhide() {
 		hidden = false;

Modified: trunk/src/CacheWolf/navi/MapImporter.java
===================================================================
--- trunk/src/CacheWolf/navi/MapImporter.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/MapImporter.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -72,7 +72,7 @@
 		}catch(FileNotFoundException ex){
 			//	Vm.debug(&quot;Cannot load world file!&quot;);
 		}catch (IOException ex) { // is thrown if lat/lon out of range
-			MessageBox tmpMB=new MessageBox(MyLocale.getMsg(312, &quot;Error&quot;), ex.getMessage(), MessageBox.OKB);
+			MessageBox tmpMB=new MessageBox(MyLocale.getMsg(312, &quot;Error&quot;), ex.getMessage(), FormBase.OKB);
 			tmpMB.execute();
 			Vm.debug(&quot;Cannot load world file!&quot;);
 		}
@@ -121,11 +121,11 @@
 	 */
 	public int importMap(){
 		String rawFileName = new String();
-		FileChooser fc = new FileChooser(FileChooser.DIRECTORY_SELECT, Global.getPref().baseDir);
+		FileChooser fc = new FileChooser(FileChooserBase.DIRECTORY_SELECT, Global.getPref().baseDir);
 		fc.addMask(&quot;*.png,*.gif,*.bmp,*.jpg&quot;);
-		fc.setTitle((String)MyLocale.getMsg(4100,&quot;Select Directory:&quot;));
+		fc.setTitle(MyLocale.getMsg(4100,&quot;Select Directory:&quot;));
 		int tmp = fc.execute() ; 
-		if(tmp != FileChooser.IDYES) return Form.IDCANCEL;
+		if(tmp != FormBase.IDYES) return FormBase.IDCANCEL;
 		File inDir = fc.getChosenFile();
 		File mapFile;
 		InfoBox inf = new InfoBox(&quot;Info&quot;, MyLocale.getMsg(4109,&quot;Loading maps...            \n&quot;), InfoBox.PROGRESS_WITH_WARNINGS, false); 
@@ -147,14 +147,14 @@
 		byte[] buf;
 		int len;
 		String[] parts;
-		String [] files = inDir.listMultiple(&quot;*.png,*.jpg,*.gif,*.bmp&quot;, File.LIST_FILES_ONLY);
+		String [] files = inDir.listMultiple(&quot;*.png,*.jpg,*.gif,*.bmp&quot;, FileBase.LIST_FILES_ONLY);
 
 		String currfile = null;
 		String curInFullPath;
 		String curOutFullPath;
 		int num = files.length;
 		for(int i =  num -1 ; i &gt;= 0;i--){
-			currfile = (String) files[i];
+			currfile = files[i];
 			inf.setInfo(MyLocale.getMsg(4110,&quot;Loading: &quot;)+ &quot;\n&quot; + currfile + &quot;\n(&quot;+(num-i)+&quot;/&quot;+num+&quot;)&quot;);
 			//Copy the file
 			//Vm.debug(&quot;Copy: &quot; + inDir.getFullPath() + &quot;/&quot; +files[i]);
@@ -310,7 +310,7 @@
 		inf.addOkButton();
 		//inf.addOkButton(); doesn't work
 		if(Global.mainTab.mm != null) Global.mainTab.mm.mapsloaded = false; 
-		return Form.IDOK;
+		return FormBase.IDOK;
 	}
 
 
@@ -332,11 +332,11 @@
 						wfl.saveWFL(mapsPath, thisMap);
 						if(Global.mainTab.mm != null) Global.mainTab.mm.mapsloaded = false; 
 					} catch (IOException e) {
-						MessageBox tmpMB = new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(321, &quot;Error writing file &quot;) + e.getMessage()+MyLocale.getMsg(324, &quot; - retry?&quot;), MessageBox.YESB | MessageBox.NOB);
-						if (tmpMB.execute() == MessageBox.IDYES) retry = true;
+						MessageBox tmpMB = new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(321, &quot;Error writing file &quot;) + e.getMessage()+MyLocale.getMsg(324, &quot; - retry?&quot;), FormBase.YESB | FormBase.NOB);
+						if (tmpMB.execute() == FormBase.IDYES) retry = true;
 					}catch (IllegalArgumentException e) {
-						MessageBox tmpMB = new MessageBox(MyLocale.getMsg(144, &quot;Warning&quot;), MyLocale.getMsg(325, &quot;Map not calibrated&quot;)+MyLocale.getMsg(324, &quot; - retry?&quot;), MessageBox.YESB | MessageBox.NOB);
-						if (tmpMB.execute() == MessageBox.IDYES) { retry = true; break; }
+						MessageBox tmpMB = new MessageBox(MyLocale.getMsg(144, &quot;Warning&quot;), MyLocale.getMsg(325, &quot;Map not calibrated&quot;)+MyLocale.getMsg(324, &quot; - retry?&quot;), FormBase.YESB | FormBase.NOB);
+						if (tmpMB.execute() == FormBase.IDYES) { retry = true; break; }
 					}
 				}
 				if (!retry) close(0);
@@ -379,7 +379,7 @@
 		f.updatePosition(pos.x, pos.y);
 
 		CoordsScreen cooS = new CoordsScreen(); // (String)lr.get(4108,&quot;Coordinates:&quot;), (String)lr.get(4108,&quot;Coordinates:&quot;), InfoBox.INPUT);
-		if (cooS.execute()==CoordsScreen.IDOK) {
+		if (cooS.execute()==FormBase.IDOK) {
 			GCPoint gcp = new GCPoint(cooS.getCoords());
 			gcp.bitMapX = pos.x;
 			gcp.bitMapY = pos.y;

Modified: trunk/src/CacheWolf/navi/MapInfoObject.java
===================================================================
--- trunk/src/CacheWolf/navi/MapInfoObject.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/MapInfoObject.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -4,23 +4,15 @@
 import CacheWolf.Common;
 import CacheWolf.Matrix;
 import CacheWolf.MyLocale;
-import CacheWolf.Profile;
-import ewe.data.PropertyList;
-import ewe.fx.PixelBuffer;
 import ewe.fx.Point;
-import ewe.io.Base64Encoder;
 import ewe.io.BufferedWriter;
 import ewe.io.FileInputStream;
-import ewe.io.FileReader;
 import ewe.io.FileWriter;
-import ewe.io.FilenameFilter;
 import ewe.io.File;
 import ewe.io.IOException;
-import ewe.io.InputStream;
 import ewe.io.InputStreamReader;
 import ewe.io.PrintWriter;
 import ewe.sys.*;
-import ewe.util.Properties;
 import java.lang.Math;
 
 
@@ -417,8 +409,8 @@
 	 */
 	public CWPoint calcLatLon(int x, int y) {
 		CWPoint ll = new CWPoint();
-		ll.latDec = (double)x * affine[0] + (double)y * affine[2] + affineTopleft.latDec;
-		ll.lonDec = (double)x * affine[1] + (double)y * affine[3] + affineTopleft.lonDec;
+		ll.latDec = x * affine[0] + y * affine[2] + affineTopleft.latDec;
+		ll.lonDec = x * affine[1] + y * affine[3] + affineTopleft.lonDec;
 		if (coordTrans != 0)
 			ll = TransformCoordinatesProperties.toWgs84(ll, coordTrans);
 		return ll;

Modified: trunk/src/CacheWolf/navi/MapLoader.java
===================================================================
--- trunk/src/CacheWolf/navi/MapLoader.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/MapLoader.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -2,18 +2,14 @@
 
 import CacheWolf.CWPoint;
 import CacheWolf.Common;
-import CacheWolf.Global;
 import CacheWolf.HttpConnection;
 import CacheWolf.InfoBox;
 import CacheWolf.MyLocale;
-import CacheWolf.Preferences;
 import ewe.ui.*;
 import ewe.io.*;
 import ewe.fx.*;
 import ewe.util.*;
-import ewe.reflect.Array;
 import ewe.sys.*;
-import ewe.sys.Double;
 import ewe.net.*;
 import java.lang.Math;
 
@@ -61,7 +57,7 @@
 		String FileName;
 		OnlineMapService tempOMS;
 		MessageBox f = null; 
-		dateien = files.list(&quot;*.wms&quot;, File.LIST_FILES_ONLY); //&quot;*.xyz&quot; doesn't work on some systems -&gt; use FileBugFix
+		dateien = files.list(&quot;*.wms&quot;, FileBase.LIST_FILES_ONLY); //&quot;*.xyz&quot; doesn't work on some systems -&gt; use FileBugFix
 		for(int i = 0; i &lt; dateien.length;i++){
 			FileName = dateien[i];
 			try {
@@ -75,7 +71,7 @@
 				tempOMS = new WebMapService(wmspath + &quot;/&quot; + FileName);
 				onlineMapServices.add(tempOMS);
 			}catch(Exception ex){ 
-				if (f == null) (f=new MessageBox(MyLocale.getMsg(144, &quot;Warning&quot;), MyLocale.getMsg(4801, &quot;Ignoring error while \n reading web map service definition file \n&quot;)+ex.toString(), MessageBox.OKB)).exec();
+				if (f == null) (f=new MessageBox(MyLocale.getMsg(144, &quot;Warning&quot;), MyLocale.getMsg(4801, &quot;Ignoring error while \n reading web map service definition file \n&quot;)+ex.toString(), FormBase.OKB)).exec();
 			}
 		}
 		tempOMS = new ExpediaMapService();
@@ -154,22 +150,22 @@
 		int borderX = overlapping;
 		int borderY = overlapping;
 
-		numMapsY = (int) java.lang.Math.ceil( (pixelsY + (float)borderY) / (float)(size.y - borderY) );
-		numMapsX = (int) java.lang.Math.ceil( (pixelsX + (float)borderX) / (float)(size.x - borderX) );
+		numMapsY = (int) java.lang.Math.ceil( (pixelsY + borderY) / (size.y - borderY) );
+		numMapsX = (int) java.lang.Math.ceil( (pixelsX + borderX) / (size.x - borderX) );
 
 		//increments calulated from pixel offset of tiles
-		latinc = (float)-(size.y - borderY) / pixelsPerLat;
-		loninc = (float)(size.x - borderX) / pixelsPerLon;
+		latinc = -(size.y - borderY) / pixelsPerLat;
+		loninc = (size.x - borderX) / pixelsPerLon;
 
 		//calculation of centre of first tile
 
 		//additional size for borders and rounding
-		double oversizeX = (float)(numMapsX * (size.x - borderX) + borderX) - pixelsX;
-		double oversizeY = (float)(numMapsY * (size.y - borderY) + borderY) - pixelsY;
+		double oversizeX = (numMapsX * (size.x - borderX) + borderX) - pixelsX;
+		double oversizeY = (numMapsY * (size.y - borderY) + borderY) - pixelsY;
 
 		//offset for upper left corner
-		double offsetLat = -( ((float)size.y - oversizeY) / 2.0 ) / pixelsPerLat;
-		double offsetLon = ( ((float)size.x - oversizeX) / 2.0 ) / pixelsPerLon;
+		double offsetLat = -( (size.y - oversizeY) / 2.0 ) / pixelsPerLat;
+		double offsetLon = ( (size.x - oversizeX) / 2.0 ) / pixelsPerLon;
 
 		topleft.latDec += offsetLat;
 		topleft.lonDec += offsetLon;
@@ -433,7 +429,7 @@
 		Properties wms = new Properties();
 		wms.load(in);
 		in.close();
-		String tmp = File.getFileExt(filename_);
+		String tmp = FileBase.getFileExt(filename_);
 		this.filename = tmp.substring(0, tmp.lastIndexOf('.'));
 		name = wms.getProperty(&quot;Name&quot;, &quot;&quot;).trim();
 		if (name == &quot;&quot;) throw new IllegalArgumentException(MyLocale.getMsg(4812, &quot;WebMapService: property &gt;Name:&lt; missing in file:\n&quot;) + filename);
@@ -665,7 +661,7 @@
 	}
 
 	public float getMetersPerPixel(float scale) {
-		return (float)  EXPEDIA_METERS_PER_PIXEL * getZoomlevel(scale);
+		return EXPEDIA_METERS_PER_PIXEL * getZoomlevel(scale);
 	}
 	
 	private int getZoomlevel(float scale) {
@@ -683,7 +679,8 @@
 	}
 
 	public MapInfoObject getMapInfoObject(CWPoint center, float scale, Point pixelsize) {
-		float metersPerPixel = (float) getMetersPerPixel(scale);
+		float metersPerPixel2 = getMetersPerPixel(scale);
+		float metersPerPixel = metersPerPixel2;
 		MapInfoObject cal = new MapInfoObject(metersPerPixel, center,  pixelsize.x, pixelsize.y, name);
 		return cal;
 	}

Modified: trunk/src/CacheWolf/navi/MapLoaderGui.java
===================================================================
--- trunk/src/CacheWolf/navi/MapLoaderGui.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/MapLoaderGui.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -7,7 +7,7 @@
 import CacheWolf.InfoBox;
 import CacheWolf.MyLocale;
 import CacheWolf.Preferences;
-import ewe.io.File;
+import ewe.io.FileBase;
 import ewe.sys.Convert;
 import ewe.sys.Vm;
 import ewe.ui.*;
@@ -67,15 +67,15 @@
 		pref = Global.getPref(); // myPreferences sollte sp&#228;ter auch diese Einstellungen speichern
 		center = new CWPoint(pref.curCentrePt);
 		cacheDB = cacheDBi;
-		mapLoader = new MapLoader(File.getProgramDirectory()+&quot;/&quot;+&quot;webmapservices&quot;);
+		mapLoader = new MapLoader(FileBase.getProgramDirectory()+&quot;/&quot;+&quot;webmapservices&quot;);
 
 		// sort the items in the list of services in a way that services which cover the current center point.
 		unsortedMapServices = mapLoader.getAvailableOnlineMapServices();
 		sortMapServices();
 		mapServiceChoice = new mChoice(sortedmapServices, 0);
 		MessageArea desc = new MessageArea(descString); 
-		desc.modifyAll(mTextPad.NotEditable | mTextPad.DisplayOnly | mTextPad.NoFocus, mTextPad.TakesKeyFocus);
-		desc.borderStyle = mTextPad.BDR_NOBORDER;
+		desc.modifyAll(ControlConstants.NotEditable | ControlConstants.DisplayOnly | ControlConstants.NoFocus, ControlConstants.TakesKeyFocus);
+		desc.borderStyle = UIConstants.BDR_NOBORDER;
 		this.addLast(desc);
 		this.addLast(mapServiceChoice);
 		// tiles panel
@@ -185,7 +185,7 @@
 		if (forCachesChkBox.getState() || perCache) {
 			Area surArea = Global.getProfile().getSourroundingArea(onlySelected); // calculate map boundaries from cacheDB
 			if (surArea == null) {
-				(new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(1817, &quot;No Caches are seleted&quot;), MessageBox.OKB)).execute();
+				(new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(1817, &quot;No Caches are seleted&quot;), FormBase.OKB)).execute();
 				Vm.showWait(false);
 				progressBox.close(0);
 				return;
@@ -248,10 +248,10 @@
 		if (forCachesChkBox.getState()) {
 			// create map rectangle from caches
 			a = 0;
-			b = Control.Disabled;
+			b = ControlConstants.Disabled;
 		}
 		else { // use centre and distance input
-			a = Control.Disabled;
+			a = ControlConstants.Disabled;
 			b = 0;
 		}
 		forSelectedChkBox.modify(a, b);
@@ -268,7 +268,7 @@
 	public void onEvent(Event ev){
 		if (ev instanceof ControlEvent &amp;&amp; ev.type == ControlEvent.PRESSED){
 			if (ev.target == cancelB || ev.target == cancelBPerCache){
-				this.close(Form.IDCANCEL);
+				this.close(FormBase.IDCANCEL);
 			}
 			if (ev.target == okBtiles || ev.target == okBPerCache){
 				mapLoader.setCurrentMapService(sortingMapServices[mapServiceChoice.selectedIndex]);
@@ -282,15 +282,15 @@
 					overlapping = Convert.toInt(overlappingInput.getText());
 					if (!forCachesChkBox.getState()) {
 						if (radius &lt;= 0) { 
-							(new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(1827, &quot;'radius' must be graeter than 0&quot;), MessageBox.OKB)).execute();
+							(new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(1827, &quot;'radius' must be graeter than 0&quot;), FormBase.OKB)).execute();
 							return;
 						}
 						if (overlapping &lt; 0) { 
-							(new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(1828, &quot;'overlapping' must be greater or equal 0&quot;), MessageBox.OKB)).execute();
+							(new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(1828, &quot;'overlapping' must be greater or equal 0&quot;), FormBase.OKB)).execute();
 							return;
 						}
 						if (!center.isValid() &amp;&amp; !forCachesChkBox.getState()) {
-							(new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(1829, &quot;Please enter the 'centre' around which the maps shall be downloaded&quot;), MessageBox.OKB)).execute();
+							(new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(1829, &quot;Please enter the 'centre' around which the maps shall be downloaded&quot;), FormBase.OKB)).execute();
 							return;
 						}
 					}
@@ -302,16 +302,16 @@
 					scale = Convert.toFloat(scaleInputPerCache.getText());
 				}
 				if (scale &lt; mapLoader.currentOnlineMapService.minscale || scale &gt; mapLoader.currentOnlineMapService.maxscale) {
-					(new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(1830, &quot;The selected online map service provides map in the scale from&quot;)+&quot; &quot; + mapLoader.currentOnlineMapService.minscale + MyLocale.getMsg(1831, &quot; to&quot;)+&quot; &quot;+ mapLoader.currentOnlineMapService.maxscale +MyLocale.getMsg(1832, &quot;\n please adjust 'Approx. meter pro pixel' accordingly&quot;), MessageBox.OKB)).execute();
+					(new MessageBox(MyLocale.getMsg(321, &quot;Error&quot;), MyLocale.getMsg(1830, &quot;The selected online map service provides map in the scale from&quot;)+&quot; &quot; + mapLoader.currentOnlineMapService.minscale + MyLocale.getMsg(1831, &quot; to&quot;)+&quot; &quot;+ mapLoader.currentOnlineMapService.maxscale +MyLocale.getMsg(1832, &quot;\n please adjust 'Approx. meter pro pixel' accordingly&quot;), FormBase.OKB)).execute();
 					return;
 				}
-				this.close(Form.IDOK); 
+				this.close(FormBase.IDOK); 
 				this.downloadTiles();
 			}
 			if (ev.target == coosBtn) {
 				CoordsScreen cs = new CoordsScreen();
 				cs.setFields(center, CWPoint.CW);
-				if (cs.execute() != CoordsScreen.IDCANCEL) {
+				if (cs.execute() != FormBase.IDCANCEL) {
 					center = cs.getCoords();
 					coosBtn.setText(center.toString());
 					int tmp = sortingMapServices[mapServiceChoice.selectedIndex];

Modified: trunk/src/CacheWolf/navi/MapSymbol.java
===================================================================
--- trunk/src/CacheWolf/navi/MapSymbol.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/MapSymbol.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -2,7 +2,6 @@
 
 import CacheWolf.CWPoint;
 import ewe.fx.*;
-import ewe.graphics.*;
 
 public class MapSymbol extends MapImage { // TODO make this implement MapImage, so that it will be invisible automatically if not on screen. When doing so, test if setgoto-pos -&gt; open map from gotopanel shows the map symbols (directly after starting CW)
 	Object mapObject;

Modified: trunk/src/CacheWolf/navi/MapsList.java
===================================================================
--- trunk/src/CacheWolf/navi/MapsList.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/MapsList.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -5,16 +5,12 @@
 import CacheWolf.InfoBox;
 import CacheWolf.MyLocale;
 import utils.FileBugfix;
-import ewe.io.CompressedRandomStream;
 import ewe.io.File;
+import ewe.io.FileBase;
 import ewe.io.IOException;
-import ewe.sys.Double;
 import ewe.sys.Time;
+import ewe.ui.FormBase;
 import ewe.ui.MessageBox;
-import ewe.util.Comparable;
-import ewe.util.Comparer;
-import ewe.util.Hashtable;
-import ewe.util.StandardComparer;
 import ewe.util.Vector;
 import ewe.fx.*;
 /**
@@ -37,7 +33,7 @@
 		String dateien[];
 		FileBugfix files = new FileBugfix(mapsPath);
 		String rawFileName = new String();
-		String[] dirstmp = files.list(null, File.LIST_DIRECTORIES_ONLY);
+		String[] dirstmp = files.list(null, FileBase.LIST_DIRECTORIES_ONLY);
 		Vector dirs;
 		if (dirstmp != null) dirs = new Vector(dirstmp);
 		else dirs = new Vector();
@@ -50,7 +46,7 @@
 		for (int j = dirs.size()-1; j &gt;= 0; j--) {
 			files = new FileBugfix(mapsPath+&quot;/&quot;+dirs.get(j));
 			//ewe.sys.Vm.debug(&quot;mapd-Dirs:&quot;+files);
-			dateien = files.list(&quot;*.wfl&quot;, File.LIST_FILES_ONLY); //&quot;*.xyz&quot; doesn't work on some systems -&gt; use FileBugFix
+			dateien = files.list(&quot;*.wfl&quot;, FileBase.LIST_FILES_ONLY); //&quot;*.xyz&quot; doesn't work on some systems -&gt; use FileBugFix
 			for(int i = 0; i &lt; dateien.length;i++){
 				// if (!dateien[i].endsWith(&quot;.wfl&quot;)) continue;
 				rawFileName = dateien[i].substring(0, dateien[i].lastIndexOf(&quot;.&quot;));
@@ -61,7 +57,7 @@
 					add(tempMIO);
 					//ewe.sys.Vm.debug(tempMIO.getEasyFindString() + tempMIO.mapName);
 				}catch(Exception ex){ // TODO exception ist, glaub ich evtl &#252;berfl&#252;ssig 
-					if (f == null) (f=new MessageBox(MyLocale.getMsg(144, &quot;Warning&quot;), MyLocale.getMsg(4700, &quot;Ignoring error while \n reading calibration file \n&quot;)+ex.toString(), MessageBox.OKB)).exec();
+					if (f == null) (f=new MessageBox(MyLocale.getMsg(144, &quot;Warning&quot;), MyLocale.getMsg(4700, &quot;Ignoring error while \n reading calibration file \n&quot;)+ex.toString(), FormBase.OKB)).exec();
 				} /* catch(ArithmeticException ex){ // affine contain not allowed values 
 					if (f == null) (f=new MessageBox(&quot;Warning&quot;, &quot;Ignoring error while \n reading calibration file \n&quot;+ex.toString(), MessageBox.OKB)).exec();
 				} */
@@ -443,7 +439,7 @@
 				ewe.sys.Vm.debug(sortEntryBBox + &quot;: &quot;+filename);
 				if (rename == 0) { // never asked before
 					if ( (new MessageBox(MyLocale.getMsg(4702,&quot;Optimisation&quot;), MyLocale.getMsg(4703,&quot;Cachewolf can make loading maps much faster by adding a identification mark to the filename. Do you want me to do this now?\n It can take several minutes&quot;), 
-							MessageBox.YESB | MessageBox.NOB)).execute() == MessageBox.IDYES)
+							FormBase.YESB | FormBase.NOB)).execute() == FormBase.IDYES)
 					{
 						renameProgressInfoB = new InfoBox(MyLocale.getMsg(327,&quot;Info&quot;), MyLocale.getMsg(4704,&quot;\nRenaming file:&quot;)+&quot;    \n&quot;);
 						renameProgressInfoB.exec();
@@ -457,17 +453,17 @@
 					String f = path+filename+&quot;.wfl&quot;;
 					String to = sortEntryBBox+&quot;E-&quot;+filename+&quot;.wfl&quot;;
 					if (!new File(f).rename(to))
-						(new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;), MyLocale.getMsg(4705,&quot;Failed to rename:\n&quot;)+f+&quot;.wfl&quot;+MyLocale.getMsg(4706,&quot;\nto:\n&quot;)+to, MessageBox.OKB)).exec();
+						(new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;), MyLocale.getMsg(4705,&quot;Failed to rename:\n&quot;)+f+&quot;.wfl&quot;+MyLocale.getMsg(4706,&quot;\nto:\n&quot;)+to, FormBase.OKB)).exec();
 					f = Common.getImageName(path+filename);
 					to = sortEntryBBox+&quot;E-&quot;+filename+Common.getFilenameExtension(f);
 					if (!new File(f).rename(to)) 
-						(new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;), MyLocale.getMsg(4705,&quot;Failed to rename:\n&quot;)+f+&quot;.wfl&quot;+MyLocale.getMsg(4706,&quot;\nto:\n&quot;)+to, MessageBox.OKB)).exec();
+						(new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;), MyLocale.getMsg(4705,&quot;Failed to rename:\n&quot;)+f+&quot;.wfl&quot;+MyLocale.getMsg(4706,&quot;\nto:\n&quot;)+to, FormBase.OKB)).exec();
 					filename = sortEntryBBox+&quot;E-&quot;+filename;
 					map.mapName = sortEntryBBox+&quot;E-&quot;+map.mapName;
 					map.fileNameWFL = path + filename + &quot;.wfl&quot;;
 				}
 			} catch (IOException ioex) { // this should not happen
-				(new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;), MyLocale.getMsg(4706,&quot;Error while reading:&quot;)+&quot; &quot;+path+filename+&quot;: &quot;+ ioex.getMessage(), MessageBox.OKB)).exec();
+				(new MessageBox(MyLocale.getMsg(321,&quot;Error&quot;), MyLocale.getMsg(4706,&quot;Error while reading:&quot;)+&quot; &quot;+path+filename+&quot;: &quot;+ ioex.getMessage(), FormBase.OKB)).exec();
 			}
 		}
 	}

Modified: trunk/src/CacheWolf/navi/MovingMap.java
===================================================================
--- trunk/src/CacheWolf/navi/MovingMap.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/MovingMap.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -8,13 +8,12 @@
 import CacheWolf.MainTab;
 import CacheWolf.MyLocale;
 import CacheWolf.Preferences;
-import CacheWolf.myTableModel;
 import ewe.ui.*;
 import ewe.graphics.*;
-import ewe.io.File;
 import ewe.io.IOException;
 import ewe.sys.*;
 import ewe.filechooser.FileChooser;
+import ewe.filechooser.FileChooserBase;
 import ewe.fx.*;
 import ewe.util.Vector;
 
@@ -82,8 +81,8 @@
 		this.cacheDB = cacheDB;
 		this.myNavigation = nav;
 		this.pref = Global.getPref();
-		if (pref.myAppHeight &lt;= 640 &amp;&amp; pref.myAppWidth &lt;= 640)	this.windowFlagsToSet = Window.FLAG_FULL_SCREEN;
-		this.windowFlagsToClear = Window.FLAG_HAS_TITLE | Window.BDR_NOBORDER;
+		if (pref.myAppHeight &lt;= 640 &amp;&amp; pref.myAppWidth &lt;= 640)	this.windowFlagsToSet = WindowConstants.FLAG_FULL_SCREEN;
+		this.windowFlagsToClear = WindowConstants.FLAG_HAS_TITLE | UIConstants.BDR_NOBORDER;
 		this.hasTopBar = false;
 		this.noBorder = true;
 		this.setPreferredSize(pref.myAppWidth, pref.myAppHeight);
@@ -99,20 +98,20 @@
 		tmp.setColor(255, 255, 255);
 		tmp.fillRect(0, 0, closeX.getWidth(), closeX.getHeight());
 		closeX.doDraw(tmp, 0);
-		bottonImageClose.properties |= AniImage.AlwaysOnTop;
+		bottonImageClose.properties |= mImage.AlwaysOnTop;
 		mmp.addImage(bottonImageClose);
-		buttonImageGpsOn.properties = AniImage.AlwaysOnTop;
+		buttonImageGpsOn.properties = mImage.AlwaysOnTop;
 		mmp.addImage(buttonImageGpsOn);
-		bottonImageChooseMap.properties = AniImage.AlwaysOnTop;
+		bottonImageChooseMap.properties = mImage.AlwaysOnTop;
 		mmp.addImage(bottonImageChooseMap);
-		directionArrows.properties = AniImage.AlwaysOnTop;
+		directionArrows.properties = mImage.AlwaysOnTop;
 		mmp.addImage(directionArrows);
-		buttonImageLens.properties = AniImage.AlwaysOnTop;
-		buttonImageLensActivated.properties = AniImage.AlwaysOnTop;
-		buttonImageLensActivatedZoomIn.properties = AniImage.AlwaysOnTop;
-		buttonImageLensActivatedZoomOut.properties = AniImage.AlwaysOnTop;
+		buttonImageLens.properties = mImage.AlwaysOnTop;
+		buttonImageLensActivated.properties = mImage.AlwaysOnTop;
+		buttonImageLensActivatedZoomIn.properties = mImage.AlwaysOnTop;
+		buttonImageLensActivatedZoomOut.properties = mImage.AlwaysOnTop;
 		mmp.addImage(buttonImageLens);
-		buttonImageZoom1to1.properties = AniImage.AlwaysOnTop;
+		buttonImageZoom1to1.properties = mImage.AlwaysOnTop;
 		mmp.addImage(buttonImageZoom1to1);
 		//target distance
 		Font font = new Font(&quot;Helvetica&quot;, Font.PLAIN, 13);
@@ -121,18 +120,18 @@
 		DistanceImage.setImage(new Image(120, 15), Color.White); // consider the size of the font used
 		DistanceImageGraphics = new Graphics(DistanceImage.image);
 		DistanceImageGraphics.setFont(font);
-		DistanceImage.properties = AniImage.AlwaysOnTop;
+		DistanceImage.properties = mImage.AlwaysOnTop;
 		mmp.addImage(DistanceImage);
 		//scale
 		ScaleImage = new AniImage();
 		ScaleImage.setImage(new Image(120, 15), Color.White); // consider the size of the font used
 		ScaleImageGraphics = new Graphics(ScaleImage.image);
 		ScaleImageGraphics.setFont(font);
-		ScaleImage.properties = AniImage.AlwaysOnTop;
+		ScaleImage.properties = mImage.AlwaysOnTop;
 		mmp.addImage(ScaleImage);
 		//resizeTo(pref.myAppWidth, pref.myAppWidth); // is necessary to initialise mapImage.screenSize
 		setGpsStatus(noGPS);
-		posCircle.properties = AniImage.AlwaysOnTop;
+		posCircle.properties = mImage.AlwaysOnTop;
 		mmp.addImage(posCircle);
 		mmp.startDragResolution = 5;
 		mapsloaded = false;
@@ -190,8 +189,8 @@
 		dontUpdatePos = true;
 		maps = new MapsList(mapsPath); // this actually loads the maps
 		if (maps.isEmpty()) {
-			(new MessageBox(MyLocale.getMsg(4201, &quot;Information&quot;), MyLocale.getMsg(4204, &quot;No georeferenced map available \n Please choose a scale \n to show the track and the caches&quot;), MessageBox.OKB)).execute();
-			(new MessageBox(MyLocale.getMsg(4201, &quot;Information&quot;), MyLocale.getMsg(4205, &quot;No georeferenced map available  \n you can get one by the menu: Application/Maps/download calibrated&quot;), MessageBox.OKB)).execute();
+			(new MessageBox(MyLocale.getMsg(4201, &quot;Information&quot;), MyLocale.getMsg(4204, &quot;No georeferenced map available \n Please choose a scale \n to show the track and the caches&quot;), FormBase.OKB)).execute();
+			(new MessageBox(MyLocale.getMsg(4201, &quot;Information&quot;), MyLocale.getMsg(4205, &quot;No georeferenced map available  \n you can get one by the menu: Application/Maps/download calibrated&quot;), FormBase.OKB)).execute();
 			noMapsAvailable = true;
 		} else noMapsAvailable = false;
 		maps.addEmptyMaps(lat); // the empty maps must be added last, otherwise in method setBestMap, when no mapt is available, a malfunction will happen, see there
@@ -211,7 +210,7 @@
 			float lineLengthMeters = 40 * currentMap.scale;
 			float digits = (float)java.lang.Math.floor( java.lang.Math.log(lineLengthMeters) / java.lang.Math.log(10.0) );
 			lineLengthMeters = (float)java.lang.Math.ceil( lineLengthMeters / (float)java.lang.Math.pow(10, digits) ) * (float)java.lang.Math.pow(10, digits);
-			int lineLengthPixels = (int)java.lang.Math.round( lineLengthMeters / currentMap.scale );
+			int lineLengthPixels = java.lang.Math.round( lineLengthMeters / currentMap.scale );
 
 			String lineLengthString;
 			if (lineLengthMeters &lt; 1000)
@@ -716,7 +715,7 @@
 		if (symbols==null) symbols=new Vector();
 		MapSymbol ms = new MapSymbol(name, filename, where);
 		ms.loadImage();
-		ms.properties |= AniImage.AlwaysOnTop;
+		ms.properties |= mImage.AlwaysOnTop;
 		Point pOnScreen = getXYonScreen(where);
 		ms.setLocation(pOnScreen.x-ms.getWidth()/2, pOnScreen.y-ms.getHeight()/2);
 		symbols.add(ms);
@@ -733,7 +732,7 @@
 	public void addSymbol(String name, Object mapObject, Image imSymb, CWPoint ll) {
 		if (symbols==null) symbols=new Vector();
 		MapSymbol ms = new MapSymbol(name, mapObject, imSymb, ll);
-		ms.properties = AniImage.AlwaysOnTop;
+		ms.properties = mImage.AlwaysOnTop;
 		Point pOnScreen = getXYonScreen(ll);
 		if (pOnScreen != null) ms.setLocation(pOnScreen.x-ms.getWidth()/2, pOnScreen.y-ms.getHeight()/2);
 		symbols.add(ms);
@@ -930,7 +929,7 @@
 			//	either Goto-Pos or GPS-Pos not set
 			else newmap = maps.getBestMap(cll, screen, 0.000001f, false); 
 			break;
-		default: (new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4208, &quot;Bug: \nillegal mapChangeModus: &quot;) + mapChangeModus, MessageBox.OKB)).execute(); break;
+		default: (new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4208, &quot;Bug: \nillegal mapChangeModus: &quot;) + mapChangeModus, FormBase.OKB)).execute(); break;
 		}
 		if ( newmap != null &amp;&amp; (currentMap == null || !currentMap.mapName.equals(newmap.mapName)) ) {
 			if (loadIfSameScale || !MapsList.scaleEquals(currentMap.scale / currentMap.zoomFactor, newmap) ) {
@@ -946,10 +945,10 @@
 			posCircle.where.set(cll); // choosemap calls setmap with posCircle-coos
 			try {
 				setMap( ((MapListEntry)maps.elementAt(maps.getCount() - 4)).getMap(), where); // beware: &quot;-4&quot; only works if the empty maps were added last see MapsList.addEmptyMaps
-			} catch (IOException e) { (new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4209, &quot;setBestMap: problem in: setMap( ((MapListEntry)maps.elementAt(maps.getCount() - 4)).getMap(), lat, lon) lat/lon:&quot;) + where.toString(), MessageBox.OKB)).exec(); }
+			} catch (IOException e) { (new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4209, &quot;setBestMap: problem in: setMap( ((MapListEntry)maps.elementAt(maps.getCount() - 4)).getMap(), lat, lon) lat/lon:&quot;) + where.toString(), FormBase.OKB)).exec(); }
 			while (currentMap == null) { // this actually cannot happen, but maybe in case of an inconstistent code change (esp. regarding empty maps)
 				mmp.chooseMap(); // force the user to select a scale 
-				 if (currentMap == null) (new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4210, &quot;Moving map cannot run without a map - please select one. \n You can select an empty map&quot;), MessageBox.OKB)).execute();
+				 if (currentMap == null) (new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4210, &quot;Moving map cannot run without a map - please select one. \n You can select an empty map&quot;), FormBase.OKB)).execute();
 			}
 		}
 		inBestMap = false;
@@ -1019,13 +1018,13 @@
 		else (new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4211, &quot;No &quot;) + 
 				(betterOverview ? MyLocale.getMsg(4212, &quot;less&quot;) : MyLocale.getMsg(4213, &quot;more&quot;) ) + 
 				MyLocale.getMsg(4214, &quot; detailed map available&quot;), 
-				MessageBox.OKB)).execute();
+				FormBase.OKB)).execute();
 	}
 
 	public void loadMapForAllCaches(){
 		Area sur = Global.getProfile().getSourroundingArea(true);
 		if (sur == null) {
-			(new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4215, &quot;Keine  Caches mit H&#228;ckchen ausgew&#228;hlt&quot;), MessageBox.OKB)).execute();
+			(new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4215, &quot;Keine  Caches mit H&#228;ckchen ausgew&#228;hlt&quot;), FormBase.OKB)).execute();
 			return;
 		}
 		MapInfoObject newmap = maps.getMapForArea(sur.topleft, sur.buttomright);
@@ -1105,14 +1104,14 @@
 			if (ImageFilename == null ) {
 				mmp.mapImage = new MapImage();
 				maps.remove(currentMap);
-				(new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4217, &quot;Could not find image associated with: \n&quot;)+currentMap.fileNameWFL, MessageBox.OKB)).execute();
+				(new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4217, &quot;Could not find image associated with: \n&quot;)+currentMap.fileNameWFL, FormBase.OKB)).execute();
 			}
 			else { 
 				if (ImageFilename.length() &gt; 0) mmp.mapImage = new MapImage(ImageFilename); // attention: when running in native java-vm, no exception will be thrown, not even OutOfMemeoryError
 				else mmp.mapImage = new MapImage(); // no image associated with the calibration info (&quot;empty map&quot;)
 			}
 			mapImage1to1 = mmp.mapImage;
-			mmp.mapImage.properties = mmp.mapImage.properties | AniImage.IsMoveable;
+			mmp.mapImage.properties = mmp.mapImage.properties | mImage.IsMoveable;
 			if (mapHidden) mmp.mapImage.hide();
 			mmp.mapImage.move(0,0);
 			mmp.addImage(mmp.mapImage);
@@ -1136,7 +1135,7 @@
 			updateOnlyPosition(where, false);
 			inf.close(0);
 			Vm.showWait(false);
-			(new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4218, &quot;Could not load map: \n&quot;)+ newmap.getImageFilename(), MessageBox.OKB)).execute();
+			(new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4218, &quot;Could not load map: \n&quot;)+ newmap.getImageFilename(), FormBase.OKB)).execute();
 			dontUpdatePos = saveIgnoreStatus;
 		} catch (OutOfMemoryError e) {
 			if (mmp.mapImage != null) {
@@ -1151,7 +1150,7 @@
 			(new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4219, &quot;Not enough memory to load map: \n&quot;) 
 					+ newmap.getImageFilename()
 					+ MyLocale.getMsg(4220, &quot;\nYou can try to close\n all prgrams and \nrestart CacheWolf&quot;), 
-					MessageBox.OKB)).execute();
+					FormBase.OKB)).execute();
 			dontUpdatePos = saveIgnoreStatus;
 		}catch (SystemResourceException e) {
 			if (mmp.mapImage != null) {
@@ -1166,7 +1165,7 @@
 			(new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4221, &quot;Not enough ressources to load map: &quot;)
 					+ newmap.getImageFilename()
 					+ MyLocale.getMsg(4220, &quot;\nYou can try to close\n all prgrams and \nrestart CacheWolf&quot;), 
-					MessageBox.OKB)).execute();
+					FormBase.OKB)).execute();
 			dontUpdatePos = saveIgnoreStatus;
 		}
 	}
@@ -1288,7 +1287,7 @@
 		boolean savegpsstatus = dontUpdatePos;
 		if (mapImage1to1 != null) {
 			dontUpdatePos = true; // avoid multi-thread problems
-			int saveprop = AniImage.IsMoveable;
+			int saveprop = mImage.IsMoveable;
 			MapImage tmp = null; // = mmp.mapImage;
 			if (mmp.mapImage != null) {
 				tmp = mmp.mapImage;
@@ -1306,7 +1305,7 @@
 				currentMap.zoom(zoomFactor, newImageRect.x, newImageRect.y);
 			} catch (OutOfMemoryError e) {
 				(new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), 
-						MyLocale.getMsg(4222, &quot;Out of memory error&quot;), MessageBox.OKB)).execute();
+						MyLocale.getMsg(4222, &quot;Out of memory error&quot;), FormBase.OKB)).execute();
 				//tmp = mapImage1to1;
 			} //if (tmp != null) currentMap.zoom();}
 			Vm.getUsedMemory(true);
@@ -1365,25 +1364,25 @@
 	MenuItem miLuminary[];
 
 	Menu mapsMenu;
-	MenuItem selectMapMI = new MenuItem(MyLocale.getMsg(4234, &quot;Select a map manually$s&quot;), new IconAndText(new mImage(&quot;map_open.png&quot;), MyLocale.getMsg(4235, &quot;Select a map manually&quot;), null, Graphics.RIGHT));
-	MenuItem changeMapDirMI = new MenuItem(MyLocale.getMsg(4236, &quot;Change map directory$c&quot;), new IconAndText(new mImage(&quot;map_cd.png&quot;), MyLocale.getMsg(4237, &quot;Change map directory&quot;), null, Graphics.RIGHT));
-	MenuItem showMapMI = new MenuItem(MyLocale.getMsg(4238, &quot;Show map&quot;), new IconAndText(new mImage(&quot;map_on.png&quot;), MyLocale.getMsg(4239, &quot;Show map&quot;), null, Graphics.RIGHT));
-	MenuItem hideMapMI = new MenuItem(MyLocale.getMsg(4240, &quot;Hide map&quot;), new IconAndText(new mImage(&quot;map_off.png&quot;), MyLocale.getMsg(4241, &quot;Hide map&quot;), null, Graphics.RIGHT));
+	MenuItem selectMapMI = new MenuItem(MyLocale.getMsg(4234, &quot;Select a map manually$s&quot;), new IconAndText(new mImage(&quot;map_open.png&quot;), MyLocale.getMsg(4235, &quot;Select a map manually&quot;), null, CellConstants.RIGHT));
+	MenuItem changeMapDirMI = new MenuItem(MyLocale.getMsg(4236, &quot;Change map directory$c&quot;), new IconAndText(new mImage(&quot;map_cd.png&quot;), MyLocale.getMsg(4237, &quot;Change map directory&quot;), null, CellConstants.RIGHT));
+	MenuItem showMapMI = new MenuItem(MyLocale.getMsg(4238, &quot;Show map&quot;), new IconAndText(new mImage(&quot;map_on.png&quot;), MyLocale.getMsg(4239, &quot;Show map&quot;), null, CellConstants.RIGHT));
+	MenuItem hideMapMI = new MenuItem(MyLocale.getMsg(4240, &quot;Hide map&quot;), new IconAndText(new mImage(&quot;map_off.png&quot;), MyLocale.getMsg(4241, &quot;Hide map&quot;), null, CellConstants.RIGHT));
 	// automatic
 	MenuItem mapChangeModusMI = new MenuItem(MyLocale.getMsg(4242, &quot;Modus for automatic map change&quot;), MenuItem.Separator, null);;
-	MenuItem highestResGpsDestMI = new MenuItem(MyLocale.getMsg(4244, &quot;Highest res. containing dest. &amp; cur. position&quot;), new IconAndText(new mImage(&quot;res_gps_goto.png&quot;), MyLocale.getMsg(4245, &quot;Highest res. containing dest. &amp; cur. position&quot;), null, Graphics.RIGHT)); //immer h&#246;chste Aufl&#246;sung w&#228;hlen, die akt. Pos. und Ziel enthalten 
-	MenuItem highestResolutionMI = new MenuItem(MyLocale.getMsg(4246, &quot;Highest resolution&quot;), new IconAndText(new mImage(&quot;res_high.png&quot;), MyLocale.getMsg(4247, &quot;Highest resolution&quot;), null, Graphics.RIGHT)); //immer h&#246;chste Aufl&#246;sung w&#228;hlen 
-	MenuItem keepManResolutionMI = new MenuItem(MyLocale.getMsg(4248, &quot;Keep manual resolution&quot;), new IconAndText(new mImage(&quot;res_manuell.png&quot;), MyLocale.getMsg(4249, &quot;Keep manual resolution&quot;), null, Graphics.RIGHT)); // manuell gew&#228;hlte Aufl&#246;sung beibehalten  
+	MenuItem highestResGpsDestMI = new MenuItem(MyLocale.getMsg(4244, &quot;Highest res. containing dest. &amp; cur. position&quot;), new IconAndText(new mImage(&quot;res_gps_goto.png&quot;), MyLocale.getMsg(4245, &quot;Highest res. containing dest. &amp; cur. position&quot;), null, CellConstants.RIGHT)); //immer h&#246;chste Aufl&#246;sung w&#228;hlen, die akt. Pos. und Ziel enthalten 
+	MenuItem highestResolutionMI = new MenuItem(MyLocale.getMsg(4246, &quot;Highest resolution&quot;), new IconAndText(new mImage(&quot;res_high.png&quot;), MyLocale.getMsg(4247, &quot;Highest resolution&quot;), null, CellConstants.RIGHT)); //immer h&#246;chste Aufl&#246;sung w&#228;hlen 
+	MenuItem keepManResolutionMI = new MenuItem(MyLocale.getMsg(4248, &quot;Keep manual resolution&quot;), new IconAndText(new mImage(&quot;res_manuell.png&quot;), MyLocale.getMsg(4249, &quot;Keep manual resolution&quot;), null, CellConstants.RIGHT)); // manuell gew&#228;hlte Aufl&#246;sung beibehalten  
 	// manuell
 	MenuItem mapChangeResMI = new MenuItem(MyLocale.getMsg(4250, &quot;Change resolution manually&quot;), MenuItem.Separator, null);;
-	MenuItem AllCachesResMI = new MenuItem(MyLocale.getMsg(4252, &quot;Load a map containing all marked caches&quot;),  new IconAndText(new mImage(&quot;loupe_all.png&quot;), MyLocale.getMsg(4253, &quot;Load a map containing all marked caches&quot;), null, Graphics.RIGHT));   
-	MenuItem moreDetailsMI = new MenuItem(MyLocale.getMsg(4254, &quot;Load a map with more details&quot;), new IconAndText(new mImage(&quot;loupe_more_details.png&quot;), MyLocale.getMsg(4255, &quot;Load a map with more details&quot;), null, Graphics.RIGHT)); // laod a map with more details 
-	MenuItem moreOverviewMI = new MenuItem(MyLocale.getMsg(4256, &quot;Load a map for a better overview&quot;), new IconAndText(new mImage(&quot;loupe_better_overview.png&quot;), MyLocale.getMsg(4257, &quot;Load a map for a better overview&quot;), null, Graphics.RIGHT)); // Load a map for a better overview --&gt; lesser details  
+	MenuItem AllCachesResMI = new MenuItem(MyLocale.getMsg(4252, &quot;Load a map containing all marked caches&quot;),  new IconAndText(new mImage(&quot;loupe_all.png&quot;), MyLocale.getMsg(4253, &quot;Load a map containing all marked caches&quot;), null, CellConstants.RIGHT));   
+	MenuItem moreDetailsMI = new MenuItem(MyLocale.getMsg(4254, &quot;Load a map with more details&quot;), new IconAndText(new mImage(&quot;loupe_more_details.png&quot;), MyLocale.getMsg(4255, &quot;Load a map with more details&quot;), null, CellConstants.RIGHT)); // laod a map with more details 
+	MenuItem moreOverviewMI = new MenuItem(MyLocale.getMsg(4256, &quot;Load a map for a better overview&quot;), new IconAndText(new mImage(&quot;loupe_better_overview.png&quot;), MyLocale.getMsg(4257, &quot;Load a map for a better overview&quot;), null, CellConstants.RIGHT)); // Load a map for a better overview --&gt; lesser details  
 	// move map to
 	MenuItem moveToMI = new MenuItem(MyLocale.getMsg(4258, &quot;Move map to and load map&quot;), MenuItem.Separator, null);;
-	MenuItem moveToDestMI = new MenuItem(MyLocale.getMsg(4260, &quot;Move to goto point&quot;), new IconAndText(new mImage(&quot;move2goto.png&quot;), MyLocale.getMsg(4261, &quot;Move to goto point&quot;), null, Graphics.RIGHT)); //* Karte zum Ziel verschieben (und ggf. entsprechende Karte laden) 
-	MenuItem moveToGpsMI = new MenuItem(MyLocale.getMsg(4262, &quot;Move to GPS position&quot;), new IconAndText(new mImage(&quot;move2gps.png&quot;), MyLocale.getMsg(4263, &quot;Move to GPS position&quot;), null, Graphics.RIGHT));   
-	MenuItem moveToCenterMI = new MenuItem(MyLocale.getMsg(4264, &quot;Move to centre&quot;), new IconAndText(new mImage(&quot;move2center.png&quot;), MyLocale.getMsg(4265, &quot;Move to centre&quot;), null, Graphics.RIGHT));   
+	MenuItem moveToDestMI = new MenuItem(MyLocale.getMsg(4260, &quot;Move to goto point&quot;), new IconAndText(new mImage(&quot;move2goto.png&quot;), MyLocale.getMsg(4261, &quot;Move to goto point&quot;), null, CellConstants.RIGHT)); //* Karte zum Ziel verschieben (und ggf. entsprechende Karte laden) 
+	MenuItem moveToGpsMI = new MenuItem(MyLocale.getMsg(4262, &quot;Move to GPS position&quot;), new IconAndText(new mImage(&quot;move2gps.png&quot;), MyLocale.getMsg(4263, &quot;Move to GPS position&quot;), null, CellConstants.RIGHT));   
+	MenuItem moveToCenterMI = new MenuItem(MyLocale.getMsg(4264, &quot;Move to centre&quot;), new IconAndText(new mImage(&quot;move2center.png&quot;), MyLocale.getMsg(4265, &quot;Move to centre&quot;), null, CellConstants.RIGHT));   
 
 	CacheHolder clickedCache;
 	MovingMap mm;
@@ -1399,7 +1398,7 @@
 		for (int i=0; i&lt;SkyOrientation.LUMINARY_NAMES.length; i++) {
 			miLuminary[i] = new MenuItem(SkyOrientation.getLuminaryName(i));
 		}
-		set(Control.WantHoldDown, true); // want to get simulated right-clicks
+		set(ControlConstants.WantHoldDown, true); // want to get simulated right-clicks
 	}
 
 	public boolean imageBeginDragged(AniImage which,Point pos) {
@@ -1667,7 +1666,7 @@
 
 		if (ev instanceof MenuEvent) { 
 			if (ev.target == mapsMenu) {
-				if (ev.type == MenuEvent.ABORTED || ev.type == MenuEvent.CANCELLED || ev.type == MenuEvent.FOCUS_OUT) mapsMenu.close(); // TODO menuIsActive() benutzen? 
+				if (ev.type == MenuEvent.ABORTED || ev.type == ControlEvent.CANCELLED || ev.type == ControlEvent.FOCUS_OUT) mapsMenu.close(); // TODO menuIsActive() benutzen? 
 				if (ev.type == MenuEvent.SELECTED ) {
 					MenuItem action = (MenuItem) mapsMenu.getSelectedItem(); 
 					if (mapsMenu.getSelectedItem() != null) {
@@ -1678,10 +1677,10 @@
 						}
 						if (action == changeMapDirMI)	{
 							mapsMenu.close();
-							FileChooser fc = new FileChooser(FileChooser.DIRECTORY_SELECT, Global.getPref().baseDir+&quot;maps&quot;);
+							FileChooser fc = new FileChooser(FileChooserBase.DIRECTORY_SELECT, Global.getPref().baseDir+&quot;maps&quot;);
 							fc.addMask(&quot;*.wfl&quot;);
-							fc.setTitle((String)MyLocale.getMsg(4200,&quot;Select map directory:&quot;));
-							if(fc.execute() != FileChooser.IDCANCEL){
+							fc.setTitle(MyLocale.getMsg(4200,&quot;Select map directory:&quot;));
+							if(fc.execute() != FormBase.IDCANCEL){
 								Global.getPref().saveCustomMapsPath(fc.getChosen().toString());
 								mm.loadMaps(Global.getPref().getMapLoadPath(), mm.posCircle.where.latDec);
 								mm.forceMapLoad();
@@ -1807,7 +1806,6 @@
 		MapInfoObject map;
 		MapListEntry ml;
 		String cmp;
-		ScrollBarPanel scb;
 		int oldmap = -1;
 		boolean curMapFound = false;
 		boolean[] inList = new boolean[maps.size()];
@@ -1880,7 +1878,7 @@
 			}
 		}
 		list.selectItem(oldmap, true);
-		this.addLast(scb = new CacheWolf.MyScrollBarPanel(list),CellConstants.STRETCH, CellConstants.FILL);
+		this.addLast(new CacheWolf.MyScrollBarPanel(list),CellConstants.STRETCH, CellConstants.FILL);
 		cancelButton = new mButton(MyLocale.getMsg(4276, &quot;Cancel&quot;));
 		cancelButton.setHotKey(0, KeyEvent.getCancelKey(true));
 		this.addNext(cancelButton,CellConstants.STRETCH, CellConstants.FILL);
@@ -1889,20 +1887,6 @@
 		this.addLast(okButton,CellConstants.STRETCH, CellConstants.FILL);
 		okButton.takeFocus(0);
 	}
-	private boolean mapIsInList(int mapNr){ // it is not used  anymore could be deleted
-		String testitem = new String();
-		int testitemnr;
-		for (int i=0; i&lt;list.countListItems(); i++) {
-			try { 
-				testitem = ((MenuItem)list.items.get(i)).label;
-				testitemnr = Convert.toInt(testitem.substring(0,testitem.indexOf(':')));
-				if ( testitemnr == mapNr) return true;
-			} catch (IndexOutOfBoundsException e) {} // happens on a seperator line because it doesn't contain &quot;:&quot;
-			catch (NegativeArraySizeException e) {} // happens on a seperator line because it doesn't contain &quot;:&quot;
-		}
-		return false;
-	}
-
 	public void mapSelected() {
 		try { 
 			selectedMap = null;
@@ -1919,7 +1903,7 @@
 				this.close(FormBase.IDOK);
 				} catch (IOException e) {
 					(new MessageBox(MyLocale.getMsg(4207, &quot;Error&quot;), MyLocale.getMsg(4278, &quot;Cannot load wfl-file: \n&quot;) 
-							+ ((MapListEntry)maps.get(mapNum)).filename, MessageBox.OKB)).execute();
+							+ ((MapListEntry)maps.get(mapNum)).filename, FormBase.OKB)).execute();
 				}
 			}
 			else {

Modified: trunk/src/CacheWolf/navi/Navigate.java
===================================================================
--- trunk/src/CacheWolf/navi/Navigate.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/Navigate.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -9,8 +9,8 @@
 import ewe.io.SerialPort;
 import ewe.io.SerialPortOptions;
 import ewe.net.Socket;
-import ewe.sys.Convert;
 import ewe.sys.mThread;
+import ewe.ui.FormBase;
 import ewe.ui.MessageBox;
 import ewe.util.mString;
 
@@ -54,7 +54,7 @@
 				(new MessageBox(MyLocale.getMsg(4400, &quot;Warning&quot;), 
 						MyLocale.getMsg(4401, &quot;Ignoring error:\n could not forward GPS data to host:\n&quot;)
 						+ pref.forwardGpsHost+&quot;\n&quot; + serThread.lastError
-						+ MyLocale.getMsg(4402, &quot;\nstop and start GPS to retry&quot;), MessageBox.OKB)).exec();
+						+ MyLocale.getMsg(4402, &quot;\nstop and start GPS to retry&quot;), FormBase.OKB)).exec();
 			}
 			if (gpsPos.latDec == 0 &amp;&amp; gpsPos.lonDec == 0) { // TODO use isValid() // TODO raus damit?
 				gpsPos.latDec = destination.latDec; // setze Zielpunkt als Ausgangspunkt
@@ -72,12 +72,12 @@
 					MyLocale.getMsg(4404, &quot;Could not connect to GPS-receiver.\n Error while opening serial Port &quot;) 
 					+ e.getMessage()
 					+ MyLocale.getMsg(4405, &quot;\npossible reasons:\n Another (GPS-)program is blocking the port\nwrong port\nOn Loox: active infra-red port is blocking GPS&quot;), 
-					MessageBox.OKB)).execute(); 
+					FormBase.OKB)).execute(); 
 		} catch (UnsatisfiedLinkError e) {
 			(new MessageBox(MyLocale.getMsg(4403, &quot;Error&quot;), 
 					MyLocale.getMsg(4404, &quot;Could not connect to GPS-receiver.\n Error while opening serial Port &quot;) 
 					+ MyLocale.getMsg(4406, &quot;Please copy jave_ewe.dll into the directory of the cachewolf program&quot;), 
-					MessageBox.OKB)).execute(); 
+					FormBase.OKB)).execute(); 
 		}
 	}
 

Modified: trunk/src/CacheWolf/navi/SelectMap.java
===================================================================
--- trunk/src/CacheWolf/navi/SelectMap.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/SelectMap.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -4,10 +4,7 @@
 import CacheWolf.InfoBox;
 import CacheWolf.MyLocale;
 import utils.FileBugfix;
-import ewe.util.*;
 import ewe.io.*;
-import ewe.filechooser.*;
-import ewe.sys.*;
 import ewe.ui.*;
 
 /**
@@ -42,7 +39,7 @@
 			File files = new FileBugfix(mapsPath);
 			File checkWFL;
 			String rawFileName = new String();
-			dateien = files.listMultiple(&quot;*.png,*.jpg,*.gif,*.bmp&quot;, File.LIST_FILES_ONLY);
+			dateien = files.listMultiple(&quot;*.png,*.jpg,*.gif,*.bmp&quot;, FileBase.LIST_FILES_ONLY);
 			for(int i = 0; i &lt; dateien.length;i++){
 				rawFileName = dateien[i].substring(0, dateien[i].lastIndexOf(&quot;.&quot;));
 				checkWFL = new File(mapsPath + rawFileName + &quot;.wfl&quot;);
@@ -68,7 +65,7 @@
 				this.close(0);
 			}
 		}
-		if(ev instanceof ListEvent &amp;&amp; ev.type == ListEvent.SELECTED){
+		if(ev instanceof ListEvent &amp;&amp; ev.type == MenuEvent.SELECTED){
 			if(ev.target == nonCMaps){
 				selectedMap = nonCMaps.getText();
 				CMaps.deleteSelection();

Modified: trunk/src/CacheWolf/navi/SkyOrientation.java
===================================================================
--- trunk/src/CacheWolf/navi/SkyOrientation.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/SkyOrientation.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -110,9 +110,9 @@
 			sekunde = Convert.parseInt(utc.substring(4, 6)); // Kommastellen werden abgeschnitten
 			// julianisches &quot;Datum&quot; jd berechnen (see <A HREF="http://de.wikipedia.org/wiki/Julianisches_Datum">http://de.wikipedia.org/wiki/Julianisches_Datum</A> )
 			if (monat&lt;2) {jahr--; monat+=12;} // verlegung des Jahres Endes auf Feb macht Berechnung von SChaltjahren einfacher
-			double a = (int)java.lang.Math.floor((double)jahr/100.); // Alle hundert Jahre kein Schlatjahr (abrunden)
-			double b = 2 - a + java.lang.Math.floor((double)a/4.);
-			double jd = java.lang.Math.floor(365.25*(jahr + 4716.)) + java.lang.Math.floor(30.6001*((double)monat+1.)) + (double)tag + (double)stunde/24 + (double)minute/1440 + (double)sekunde/86400 + b - 1524.5;
+			double a = (int)java.lang.Math.floor(jahr/100.); // Alle hundert Jahre kein Schlatjahr (abrunden)
+			double b = 2 - a + java.lang.Math.floor(a/4.);
+			double jd = java.lang.Math.floor(365.25*(jahr + 4716.)) + java.lang.Math.floor(30.6001*(monat+1.)) + tag + (double)stunde/24 + (double)minute/1440 + (double)sekunde/86400 + b - 1524.5;
 			return jd;
 			//double jd0 = java.lang.Math.floor(365.25*(jahr + 4716.)) + java.lang.Math.floor(30.6001*((double)monat+1.)) +(double)tag + b - 1524.5;
 		} catch (IndexOutOfBoundsException e) {
@@ -143,10 +143,10 @@
 			sekunde=Convert.parseInt(utc.substring(4, 6)); // Kommastellen werden abgeschnitten
 			// julianisches &quot;Datum&quot; jd berechnen (see <A HREF="http://de.wikipedia.org/wiki/Julianisches_Datum">http://de.wikipedia.org/wiki/Julianisches_Datum</A> )
 			if (monat&lt;2) {jahr--; monat+=12;} // verlegung des Jahres Endes auf Feb macht Berechnung von SChaltjahren einfacher
-			double a = (int)java.lang.Math.floor((double)jahr/100.); // Alle hundert Jahre kein Schlatjahr (abrunden)
-			double b = 2 - a + java.lang.Math.floor((double)a/4.);
-			double jd = java.lang.Math.floor(365.25*(jahr + 4716.)) + java.lang.Math.floor(30.6001*((double)monat+1.)) + (double)tag + (double)stunde/24 + (double)minute/1440 + (double)sekunde/86400 + b - 1524.5;
-			double jd0 = java.lang.Math.floor(365.25*(jahr + 4716.)) + java.lang.Math.floor(30.6001*((double)monat+1.)) +(double)tag + b - 1524.5;
+			double a = (int)java.lang.Math.floor(jahr/100.); // Alle hundert Jahre kein Schlatjahr (abrunden)
+			double b = 2 - a + java.lang.Math.floor(a/4.);
+			double jd = java.lang.Math.floor(365.25*(jahr + 4716.)) + java.lang.Math.floor(30.6001*(monat+1.)) + tag + (double)stunde/24 + (double)minute/1440 + (double)sekunde/86400 + b - 1524.5;
+			double jd0 = java.lang.Math.floor(365.25*(jahr + 4716.)) + java.lang.Math.floor(30.6001*(monat+1.)) +tag + b - 1524.5;
 			// Ekliptikalkoordinaten der Sonne berechnen (see <A HREF="http://de.wikipedia.org/wiki/Sonnenstand">http://de.wikipedia.org/wiki/Sonnenstand</A> )
 			double n = jd - 2451545.0;
 			double l = 280.46 + 0.9856474 * n;
@@ -160,7 +160,7 @@
 			if (alphaNenner&lt;0) {alpha +=180;}
 			// Azimut
 			double t0 = (jd0 - 2451545.)/36525.; // schon in t0 bzw jd0 richtig berechnet?
-			double thetaHG = 6.697376 + 2400.05134 * t0 + 1.002738 * ((double)stunde + (double)minute/60. + (double)sekunde/3600.);
+			double thetaHG = 6.697376 + 2400.05134 * t0 + 1.002738 * (stunde + minute/60. + sekunde/3600.);
 			double theta = thetaHG * 15. + lon;
 			double azimutNenner = java.lang.Math.cos((theta-alpha)/180*java.lang.Math.PI)*java.lang.Math.sin(lat/180*java.lang.Math.PI)-
 			java.lang.Math.tan(delta/180*java.lang.Math.PI)*java.lang.Math.cos(lat/180*java.lang.Math.PI);

Modified: trunk/src/CacheWolf/navi/TrackOverlay.java
===================================================================
--- trunk/src/CacheWolf/navi/TrackOverlay.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/TrackOverlay.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -6,12 +6,7 @@
 import ewe.fx.Graphics;
 import ewe.fx.IImage;
 import ewe.fx.Image;
-import ewe.fx.Pen;
-import ewe.graphics.AniImage;
-import ewe.sys.Convert;
 import ewe.fx.Point;
-import ewe.fx.Mask;
-
 import ewe.util.Vector;
 
 

Modified: trunk/src/CacheWolf/navi/TrackPoint.java
===================================================================
--- trunk/src/CacheWolf/navi/TrackPoint.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/TrackPoint.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,12 +1,5 @@
 package CacheWolf.navi;
 
-import ewe.io.BufferedWriter;
-import ewe.io.FileWriter;
-import ewe.io.IOException;
-import ewe.io.PrintWriter;
-import ewe.ui.MessageBox;
-import ewe.util.Utils;
-
 /**
  * this is not CWPoint because it should be as small as possible
  * @author pfeffer

Modified: trunk/src/CacheWolf/navi/TransformCoordinates.java
===================================================================
--- trunk/src/CacheWolf/navi/TransformCoordinates.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/CacheWolf/navi/TransformCoordinates.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -6,8 +6,6 @@
 
 import java.lang.Math;
 
-import ewe.database.GetSearchCriteria;
-
 /**
  * Class to transform coordinates and shift datums
  * it uses the 7 parameter Helmert Transformation

Modified: trunk/src/exp/Exporter.java
===================================================================
--- trunk/src/exp/Exporter.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/exp/Exporter.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -3,10 +3,12 @@
 import CacheWolf.*;
 import ewe.sys.*;
 import ewe.filechooser.FileChooser;
+import ewe.filechooser.FileChooserBase;
 import ewe.io.BufferedWriter;
 import ewe.io.File;
 import ewe.io.FileWriter;
 import ewe.io.PrintWriter;
+import ewe.ui.FormBase;
 import ewe.ui.ProgressBarForm;
 import ewe.util.*;
 import ewe.io.IOException;
@@ -193,10 +195,10 @@
 	 */
 	public File getOutputFile (){
 		File file;
-		FileChooser fc = new FileChooser(FileChooser.SAVE, pref.getExportPath(expName));
+		FileChooser fc = new FileChooser(FileChooserBase.SAVE, pref.getExportPath(expName));
 		fc.setTitle(&quot;Select target file:&quot;);
 		fc.addMask(mask);
-		if(fc.execute() != FileChooser.IDCANCEL){
+		if(fc.execute() != FormBase.IDCANCEL){
 			file = fc.getChosenFile();
 			pref.setExportPath(expName, file.getPath());
 			return file;

Modified: trunk/src/exp/GPXExporter.java
===================================================================
--- trunk/src/exp/GPXExporter.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/exp/GPXExporter.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,6 +1,6 @@
 package exp;
 import ewe.sys.*;
-import ewe.io.File;
+import ewe.io.FileBase;
 import CacheWolf.*;
 /**
 *	Class to export the cache database to a GPX file with gc.com
@@ -20,7 +20,7 @@
 		this.setMask(&quot;*.gpx&quot;);
 		this.setNeedCacheDetails(true);
 		this.setHowManyParams(LAT_LON);
-		this.setTmpFileName(File.getProgramDirectory() + &quot;/temp.gpx&quot;);
+		this.setTmpFileName(FileBase.getProgramDirectory() + &quot;/temp.gpx&quot;);
 	}
 	
 	public GPXExporter(Preferences p, Profile prof){
@@ -28,7 +28,7 @@
 		this.setMask(&quot;*.gpx&quot;);
 		this.setNeedCacheDetails(true);
 		this.setHowManyParams(LAT_LON);
-		this.setTmpFileName(File.getProgramDirectory() + &quot;/temp.gpx&quot;);
+		this.setTmpFileName(FileBase.getProgramDirectory() + &quot;/temp.gpx&quot;);
 	}
 	
 	public String header() {

Modified: trunk/src/exp/HTMLExporter.java
===================================================================
--- trunk/src/exp/HTMLExporter.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/exp/HTMLExporter.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -45,12 +45,11 @@
 		ProgressBarForm pbf = new ProgressBarForm();
 		Handle h = new Handle();
 
-		//need directory only!!!!
-		String dummy = new String();
-		FileChooser fc = new FileChooser(FileChooser.DIRECTORY_SELECT, pref.getExportPath(expName));
+		new String();
+		FileChooser fc = new FileChooser(FileChooserBase.DIRECTORY_SELECT, pref.getExportPath(expName));
 		fc.setTitle(&quot;Select target directory:&quot;);
 		String targetDir;
-		if(fc.execute() != FileChooser.IDCANCEL){
+		if(fc.execute() != FormBase.IDCANCEL){
 			targetDir = fc.getChosen() + &quot;/&quot;;
 			pref.setExportPath(expName, targetDir);
 			Vector cache_index = new Vector();
@@ -140,7 +139,7 @@
 							String imgFile = new String((String)holder.Images.get(j));
 							imgParams.put(&quot;FILE&quot;, imgFile);
 							if (j &lt; holder.ImagesText.size())
-								imgParams.put(&quot;TEXT&quot;,(String)holder.ImagesText.get(j));
+								imgParams.put(&quot;TEXT&quot;,holder.ImagesText.get(j));
 							else
 								imgParams.put(&quot;TEXT&quot;,imgFile);
 							DataMover.copy(profile.dataDir + imgFile,targetDir + imgFile);
@@ -168,7 +167,7 @@
 							String usrImgFile = new String((String)holder.UserImages.get(j));
 							usrImgParams.put(&quot;FILE&quot;, usrImgFile);
 							if (j &lt; holder.UserImagesText.size())
-								usrImgParams.put(&quot;TEXT&quot;,(String)holder.UserImagesText.get(j));
+								usrImgParams.put(&quot;TEXT&quot;,holder.UserImagesText.get(j));
 							else
 								usrImgParams.put(&quot;TEXT&quot;,usrImgFile);
 							DataMover.copy(profile.dataDir + usrImgFile,targetDir + usrImgFile);
@@ -179,7 +178,7 @@
 						// Map images
 						mapImg.clear();
 						mapImgParams = new Hashtable();
-						String mapImgFile = new String((String)holder.wayPoint + &quot;_map.gif&quot;);
+						String mapImgFile = new String(holder.wayPoint + &quot;_map.gif&quot;);
 						// check if map file exists
 						File test = new File(profile.dataDir + mapImgFile);
 						if (test.exists()) {
@@ -189,7 +188,7 @@
 							mapImg.add(mapImgParams);
 							
 							mapImgParams = new Hashtable();
-							mapImgFile = (String)holder.wayPoint + &quot;_map_2.gif&quot;;
+							mapImgFile = holder.wayPoint + &quot;_map_2.gif&quot;;
 							mapImgParams.put(&quot;FILE&quot;, mapImgFile);
 							mapImgParams.put(&quot;TEXT&quot;,mapImgFile);
 							DataMover.copy(profile.dataDir + mapImgFile,targetDir + mapImgFile);
@@ -210,10 +209,10 @@
 			// Copy the log-icons to the destination directory
 			for (int j=0; j&lt;logIcons.size(); j++) {
 				icon=(String) logIcons.elementAt(j);
-				DataMover.copy(File.getProgramDirectory() + &quot;/&quot;+icon,targetDir + icon);
+				DataMover.copy(FileBase.getProgramDirectory() + &quot;/&quot;+icon,targetDir + icon);
 				
 			}
-			DataMover.copy(File.getProgramDirectory() + &quot;/recommendedlog.gif&quot;,targetDir + &quot;recommendedlog.gif&quot;);
+			DataMover.copy(FileBase.getProgramDirectory() + &quot;/recommendedlog.gif&quot;,targetDir + &quot;recommendedlog.gif&quot;);
 			try{
 				Template tpl = new Template(template_init_index);
 				tpl.setParam(&quot;cache_index&quot;, cache_index);
@@ -276,7 +275,6 @@
 	}
 	
 	private void sortAndPrintIndex(Template tmpl, Vector list, String file, String field){
-		Vector navi_index;
 		PrintWriter detfile; 
 		
 		list.sort(new HTMLComparer(field),false);

Modified: trunk/src/exp/KMLExporter.java
===================================================================
--- trunk/src/exp/KMLExporter.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/exp/KMLExporter.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -2,6 +2,7 @@
 
 import ewe.io.BufferedWriter;
 import ewe.io.File;
+import ewe.io.FileBase;
 import ewe.io.FileOutputStream;
 import ewe.io.FileWriter;
 import ewe.io.IOException;
@@ -221,7 +222,7 @@
 
 	public void copyIcons(String dir){
 		try {
-			ZipFile zif = new ZipFile (File.getProgramDirectory() + &quot;/POIIcons.zip&quot;);
+			ZipFile zif = new ZipFile (FileBase.getProgramDirectory() + &quot;/POIIcons.zip&quot;);
 			ZipEntry zipEnt;
 			int len;
 			String entName, fileName; 
@@ -231,7 +232,7 @@
 				entName = &quot;GoogleEarthIcons/&quot; + fileName;
 				zipEnt = zif.getEntry(entName);
 				if (zipEnt == null) continue;
-			    byte[] buff = new byte[ (int) zipEnt.getSize() ];
+			    byte[] buff = new byte[ zipEnt.getSize() ];
 			    InputStream  fis = zif.getInputStream(zipEnt);
 			    FileOutputStream fos = new FileOutputStream( dir + &quot;/&quot; + fileName);
 			    while( 0 &lt; (len = fis.read( buff )) )

Modified: trunk/src/exp/LocExporter.java
===================================================================
--- trunk/src/exp/LocExporter.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/exp/LocExporter.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,6 +1,7 @@
 package exp;
 import CacheWolf.*;
 import ewe.io.File;
+import ewe.io.FileBase;
 import ewesoft.xml.*;
 import ewesoft.xml.sax.*;
 
@@ -21,7 +22,7 @@
 		super();
 		this.setMask(&quot;*.loc&quot;);
 		this.setHowManyParams(NO_PARAMS);
-		if ((new File(File.getProgramDirectory()+&quot;/garminmap.xml&quot;)).exists()) {
+		if ((new File(FileBase.getProgramDirectory()+&quot;/garminmap.xml&quot;)).exists()) {
 			gm=new GarminMap();
 			gm.readGarminMap();
 		}
@@ -80,7 +81,7 @@
 		String lastName;
 		public void readGarminMap(){
 			try{
-				String datei = File.getProgramDirectory() + &quot;/garminmap.xml&quot;;
+				String datei = FileBase.getProgramDirectory() + &quot;/garminmap.xml&quot;;
 				ewe.io.Reader r = new ewe.io.InputStreamReader(new ewe.io.FileInputStream(datei));
 				parse(r);
 				r.close();

Modified: trunk/src/exp/MagellanExporter.java
===================================================================
--- trunk/src/exp/MagellanExporter.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/exp/MagellanExporter.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -3,6 +3,7 @@
 import CacheWolf.*;
 import ewe.sys.*;
 import ewe.filechooser.FileChooser;
+import ewe.filechooser.FileChooserBase;
 import ewe.io.BufferedReader;
 import ewe.io.BufferedWriter;
 import ewe.io.File;
@@ -11,7 +12,7 @@
 import ewe.io.FileWriter;
 import ewe.io.LineNumberReader;
 import ewe.io.PrintWriter;
-import ewe.io.StringStream;
+import ewe.ui.FormBase;
 import ewe.ui.ProgressBarForm;
 import ewe.util.*;
 import ewe.io.IOException;
@@ -59,10 +60,10 @@
 	public void doIt() {
 		File configFile = new File(&quot;magellan.cfg&quot;);
 		if (configFile.exists()) {
-			FileChooser fc = new FileChooser(FileChooser.DIRECTORY_SELECT, pref.getExportPath(expName+&quot;Dir&quot;));
+			FileChooser fc = new FileChooser(FileChooserBase.DIRECTORY_SELECT, pref.getExportPath(expName+&quot;Dir&quot;));
 			fc.setTitle(MyLocale.getMsg(2104, &quot;Choose directory for exporting .gs files&quot;));
 			String targetDir;
-			if(fc.execute() != FileChooser.IDCANCEL){
+			if(fc.execute() != FormBase.IDCANCEL){
 				targetDir = fc.getChosen() + &quot;/&quot;;
 				pref.setExportPath(expName+&quot;Dir&quot;, targetDir);
 
@@ -184,11 +185,11 @@
 	 */
 	public File getOutputFile() {
 		File file;
-		FileChooser fc = new FileChooser(FileChooser.SAVE, pref
+		FileChooser fc = new FileChooser(FileChooserBase.SAVE, pref
 				.getExportPath(expName));
 		fc.setTitle(MyLocale.getMsg(2102, &quot;Select target file:&quot;));
 		fc.addMask(mask);
-		if (fc.execute() != FileChooser.IDCANCEL) {
+		if (fc.execute() != FormBase.IDCANCEL) {
 			file = fc.getChosenFile();
 			pref.setExportPath(expName, file.getPath());
 			return file;

Modified: trunk/src/exp/PCX5Exporter.java
===================================================================
--- trunk/src/exp/PCX5Exporter.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/exp/PCX5Exporter.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,6 +1,6 @@
 package exp;
 import CacheWolf.*;
-import ewe.io.File;
+import ewe.io.FileBase;
 
 /**
 *	Class to export the cache database into an ascii file that may be imported
@@ -13,7 +13,7 @@
 	public PCX5Exporter(Preferences p, Profile prof){
 		super();
 		this.setMask(&quot;*.wpt&quot;);
-		this.setTmpFileName(File.getProgramDirectory() + &quot;/temp.pcx&quot;);
+		this.setTmpFileName(FileBase.getProgramDirectory() + &quot;/temp.pcx&quot;);
 		this.setHowManyParams(NO_PARAMS);
 	}
 	

Modified: trunk/src/exp/TPLExporter.java
===================================================================
--- trunk/src/exp/TPLExporter.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/exp/TPLExporter.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -32,9 +32,9 @@
 import CacheWolf.Global;
 import CacheWolf.Preferences;
 import CacheWolf.Profile;
-import CacheWolf.STRreplace;
 import HTML.Template;
 import ewe.filechooser.FileChooser;
+import ewe.filechooser.FileChooserBase;
 import ewe.io.*;
 import ewe.sys.*;
 import ewe.ui.*;
@@ -148,9 +148,9 @@
 		ProgressBarForm pbf = new ProgressBarForm();
 		ewe.sys.Handle h = new ewe.sys.Handle();
 
-		FileChooser fc = new FileChooser(FileChooser.SAVE, pref.getExportPath(expName));
+		FileChooser fc = new FileChooser(FileChooserBase.SAVE, pref.getExportPath(expName));
 		fc.setTitle(&quot;Select target file:&quot;);
-		if(fc.execute() == FileChooser.IDCANCEL) return;
+		if(fc.execute() == FormBase.IDCANCEL) return;
 		File saveTo = fc.getChosenFile();
 		pref.setExportPath(expName, saveTo.getPath());
 		int counter = 0;
@@ -246,7 +246,7 @@
 			System.runFinalization();
 			Vm.gc(); // this doesn't help :-( - I don't know why :-(
 			//Vm.debug(&quot;n: &quot;+Vm.countObjects(true));
-			(new MessageBox(&quot;Error&quot;, &quot;Not enough memory available to load all cache data (incl. description and logs)\nexport aborted\nFilter caches to minimise memory needed for TPL-Export\nWe recommend to restart CacheWolf now&quot;, MessageBox.OKB)).execute();
+			(new MessageBox(&quot;Error&quot;, &quot;Not enough memory available to load all cache data (incl. description and logs)\nexport aborted\nFilter caches to minimise memory needed for TPL-Export\nWe recommend to restart CacheWolf now&quot;, FormBase.OKB)).execute();
 			//Vm.debug(&quot;n: &quot;+Vm.countObjects(true));
 		}
 		pbf.exit(0);

Modified: trunk/src/exp/TomTomExporter.java
===================================================================
--- trunk/src/exp/TomTomExporter.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/exp/TomTomExporter.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -6,6 +6,7 @@
 import ewe.util.*;
 import ewe.util.zip.*;
 import ewe.filechooser.FileChooser;
+import ewe.filechooser.FileChooserBase;
 import ewe.io.*;
 import ewe.sys.*;
 
@@ -34,27 +35,27 @@
 		int fileFormat;
 
 		TomTomExporterScreen infoScreen = new TomTomExporterScreen(&quot;TomTomExport&quot;);
-		if (infoScreen.execute() == Form.IDCANCEL) return;
+		if (infoScreen.execute() == FormBase.IDCANCEL) return;
 		fileFormat = infoScreen.getFormat();
 
 		dirName = pref.getExportPath(expName);
 		
 		if (infoScreen.oneFilePerType()==true){
-			FileChooser fc = new FileChooser(FileChooser.DIRECTORY_SELECT, dirName);
+			FileChooser fc = new FileChooser(FileChooserBase.DIRECTORY_SELECT, dirName);
 			fc.setTitle(&quot;Select target dir:&quot;);
-			if(fc.execute() == FileChooser.IDCANCEL) return;
+			if(fc.execute() == FormBase.IDCANCEL) return;
 			dirName = fc.getChosen();
 			pref.setExportPath(expName, dirName);
 			prefix = infoScreen.getPrefix();
 			writeOneFilePerType(fileFormat, dirName, prefix);
 		} else{
-			FileChooser fc = new FileChooser(FileChooser.SAVE, dirName);
+			FileChooser fc = new FileChooser(FileChooserBase.SAVE, dirName);
 			fc.setTitle(&quot;Select target file:&quot;);
 	
 			if (fileFormat == TT_ASC) fc.addMask(&quot;*.asc&quot;);
 			else fc.addMask(&quot;*.ov2&quot;);
 			
-			if(fc.execute() == FileChooser.IDCANCEL) return;
+			if(fc.execute() == FormBase.IDCANCEL) return;
 			fileName = fc.getChosen();
 			pref.setExportPathFromFileName(expName, fileName);
 			writeSingleFile(fileFormat, fileName);
@@ -255,7 +256,7 @@
 	
 	public void copyIcon(int intWayType, String filename){
 		try {
-			ZipFile zif = new ZipFile (File.getProgramDirectory() + &quot;/POIIcons.zip&quot;);
+			ZipFile zif = new ZipFile (FileBase.getProgramDirectory() + &quot;/POIIcons.zip&quot;);
 			ZipEntry zipEnt;
 			int len;
 			String entName; 
@@ -264,7 +265,7 @@
 			zipEnt = zif.getEntry(entName);
 			if (zipEnt == null) return;
 			
-		    byte[] buff = new byte[ (int) zipEnt.getSize() ];
+		    byte[] buff = new byte[ zipEnt.getSize() ];
 		    InputStream  fis = zif.getInputStream(zipEnt);
 		    FileOutputStream fos = new FileOutputStream( filename + &quot;.bmp&quot;);
 		    while( 0 &lt; (len = fis.read( buff )) )

Modified: trunk/src/exp/TomTomExporterScreen.java
===================================================================
--- trunk/src/exp/TomTomExporterScreen.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/exp/TomTomExporterScreen.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -66,10 +66,10 @@
 	public void onEvent(Event ev){
 		if (ev instanceof ControlEvent &amp;&amp; ev.type == ControlEvent.PRESSED){
 			if (ev.target == cancelB){
-				this.close(Form.IDCANCEL);
+				this.close(FormBase.IDCANCEL);
 			}
 			if (ev.target == okB){
-				this.close(Form.IDOK);
+				this.close(FormBase.IDOK);
 			}
 			if (ev.target == chkOneFilePerType){
 				activateInpPrefix(); 

Modified: trunk/src/utils/CWWrapper.java
===================================================================
--- trunk/src/utils/CWWrapper.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/utils/CWWrapper.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -1,5 +1,4 @@
 package utils;
-import CacheWolf.*;
 import ewe.sys.*;
 
 /**
@@ -32,8 +31,7 @@
 			Vm.exec(strarr, dummy);
 		}
 		if(plattform.equals(&quot;Java&quot;)){
-			ewe.sys.Process p = Vm.exec(&quot;\&quot;&quot; + cmd + &quot;\&quot; &quot;+args, null);
-//			p.waitFor();
+			Vm.exec(&quot;\&quot;&quot; + cmd + &quot;\&quot; &quot;+args, null);
 		}
 	}
 }
\ No newline at end of file

Modified: trunk/src/utils/FileBugfix.java
===================================================================
--- trunk/src/utils/FileBugfix.java	2008-03-26 14:32:46 UTC (rev 1293)
+++ trunk/src/utils/FileBugfix.java	2008-03-26 17:04:12 UTC (rev 1294)
@@ -6,7 +6,6 @@
 import ewe.io.*;
 import ewe.util.FileComparer;
 import ewe.util.mString;
-import CacheWolf.*;
 /**
  * @author pfeffer
  * class to fix a bug in ewe.io.File, which occurs only on some systems (e.g. linux): the mask &quot;*.xyz&quot; doesn't work
@@ -44,7 +43,7 @@
 		if ((listAndSortOptions &amp; LIST_FILES_ONLY) == 0)
 			dirs = super.list(null,LIST_DIRECTORIES_ONLY); // add dirs if not only asked for files
 		if ((listAndSortOptions &amp; LIST_DIRECTORIES_ONLY) == 0)
-			found = super.list(null,File.LIST_FILES_ONLY|listAndSortOptions); // add files if not dirs only
+			found = super.list(null,FileBase.LIST_FILES_ONLY|listAndSortOptions); // add files if not dirs only
 		else {
 			found = dirs; // if dirs only -&gt; aplpy masks to the dirs
 			dirs = new String[0]; // this line is missing in ewe FileBase.listmultiple -&gt; doubled dirs when using listmultiple with the option dirs_only
@@ -53,7 +52,7 @@
 		ewe.util.FileComparer [] fcs = new ewe.util.FileComparer[masks.length];
 
 		for (int i = 0; i&lt;masks.length; i++)
-			fcs[i] = new FileComparer((File)this,ewe.sys.Vm.getLocale(),listAndSortOptions,masks[i]);
+			fcs[i] = new FileComparer(this,ewe.sys.Vm.getLocale(),listAndSortOptions,masks[i]);
 		int left = found.length;
 		for (int i = 0; i&lt;found.length; i++){
 			boolean matched = false;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001187.html">[Cachewolf-svn] r1293 - trunk/docs
</A></li>
	<LI>Next message: <A HREF="001189.html">[Cachewolf-svn] r1295 - trunk/res_noewe/languages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1188">[ date ]</a>
              <a href="thread.html#1188">[ thread ]</a>
              <a href="subject.html#1188">[ subject ]</a>
              <a href="author.html#1188">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">More information about the Cachewolf-svn
mailing list</a><br>
</body></html>
