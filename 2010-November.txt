From araber95 at mail.berlios.de  Tue Nov  2 06:34:57 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Tue,  2 Nov 2010 06:34:57 PM +0100
Subject: [Cachewolf-svn] r2845 - in trunk: res_noewe/languages src/CacheWolf
Message-ID: <20101102173457.DD39048106E@sheep.berlios.de>

Author: araber95
Date: 2010-11-02 18:34:57 +0100 (Tue, 02 Nov 2010)
New Revision: 2845

Modified:
   trunk/res_noewe/languages/DE.cfg
   trunk/res_noewe/languages/EN.cfg
   trunk/res_noewe/languages/FR.cfg
   trunk/res_noewe/languages/NL.cfg
   trunk/res_noewe/languages/PL.cfg
   trunk/res_noewe/languages/SV.cfg
   trunk/src/CacheWolf/DescriptionPanel.java
   trunk/src/CacheWolf/MyLocale.java
Log:
1. possible showing only text part of description (some html-descriptions are unreadable in CW)
2. readding + as replacement for leading blank in language files textlines

Modified: trunk/res_noewe/languages/DE.cfg
===================================================================
--- trunk/res_noewe/languages/DE.cfg	2010-10-28 20:00:58 UTC (rev 2844)
+++ trunk/res_noewe/languages/DE.cfg	2010-11-02 17:34:57 UTC (rev 2845)
@@ -145,7 +145,7 @@
 221=Filter ?berschreiben?
 222=Der Filter existiert schon. ?berschreiben?
 223=Filter l?schen?
-224= - Den gespeicherten Filter l?schen?
+224=+- Den gespeicherten Filter l?schen?
 225=Auch in Logs
 226=Das Profil kann nicht gel?scht werden.
 227=Das aktive Profil kann nicht gel?scht werden.
@@ -509,7 +509,7 @@
 1621=Fehler beim Interpretieren\n der Update-Datei,\nDies ist vermutlich ein Fehler bei Opencaching.de\nSp?ter erneut versuchen\n Status:
 1622=Gefundene Caches nicht laden
 1623=Importiere h?chstens
-1624= Cache (leer=alle)
+1624=+Cache (leer=alle)
 1625=TBs laden
 1626=Speichere bis zu x Logs:
 1627=Alle Caches
@@ -803,10 +803,10 @@
 4110=Lade
 4111=Koordinaten m?ssen in dem Format N XX XX,XXX E XXX XX,XXX eingegeben werden
 4112=E/A-Fehler beim Kopieren von:+
-4113= nach:+
-4114= Fehler:+
+4113=+nach:+
+4114=+Fehler:+
 4115=Fehler: Kann Bild nicht dekodieren:+
-4116= - Bild nicht kopiert
+4116=+- Bild nicht kopiert
 4117=Fehler beim Importieren der .map-Datei:+
 4118=E/A-Fehler beim Lesen oder Schreiben der Kalibrierungsdatei
 4119=Keine Kalibrierungsdatei gefunden f?r:+
@@ -822,7 +822,7 @@
 4211=Keine+
 4212=?bersichtlichere
 4213=detailliertere
-4214= Karte verf?gbar
+4214=+Karte verf?gbar
 4215=Keine Caches mit H?ckchen ausgew?hlt
 4216=Lade Karte...
 4217=Konnte zu folgender Datei geh?rendes Bild nicht finden:
@@ -889,7 +889,7 @@
 4295=Mittelpunkt
 4296=Detaillierung
 4300=Leer 1 Punkt =+
-4301= meter
+4301=+meter
 4302=Breite/L?nge au?erhalb des zul?ssigen Bereiches beim Lesen von+
 4303=Zu wenig Zeilen in Datei+
 4304=Zu wenig Punkte, um die Karte zu kalibrieren
@@ -943,7 +943,7 @@
 4821=WebMapService: Eigenschaft >ImageFileExtension:< fehlt in Datei:
 4822=Bereich:
 4823=wird vom Dienst:
-4824= nicht abgedeckt, Dienstbereich:
+4824=+nicht abgedeckt, Dienstbereich:
 4825=Ma?stab
 4826=wird von diesem Kartendienst nicht unterst?tzt, unterst?tzter Ma?stabsbereich:
 4827=(gemessen vertikal in Metern pro Pixel)
@@ -951,9 +951,9 @@
 4829=getUrlForBoundingBox: Punkt:
 4830=Kein passender Gau?-Kr?ger-Streifen in der EPSG-Codeliste in der .wms-Datei
 4831=getMapInfoObject: Koordinatensystem wird von Cachewolf nicht unterst?tzt:
-4900= ist keine deutsche Gau?-Kr?ger-Koordinate
+4900=+ist keine deutsche Gau?-Kr?ger-Koordinate
 4920=EPSG-Code+
-4921= nicht unterst?tzt
+4921=+nicht unterst?tzt
 4922=EPSG code fehlt in:+
 4923=fromWgs84: EPSG code+
 4924=ToWgs84: EPSG code+
@@ -977,13 +977,13 @@
 5509=Zentrumskoordinaten nicht gesetzt
 5510=Import Optionen
 5511=Gefunden+
-5512= \nneue / zu aktualisierende Caches
+5512=\nneue / zu aktualisierende Caches
 5513=Laden von:+
 5514=Travelbug:+
 5515=Fehler beim Laden des Caches.\nBitte ?berpr?fen Sie Ihre Internetverbindung und ob als Sprache bei GC.com English ausgew?hlt ist.\nNoch einmal versuchen?
-5516= Cachebeschreibungen\nkonnten nicht geladen werden.
+5516=+Cachebeschreibungen\nkonnten nicht geladen werden.
 5517=Aktualisierungen importieren?
-5518= Caches in der Datenbank sollten aktualisiert werden. Jetzt aktualisieren?
+5518=+Caches in der Datenbank sollten aktualisiert werden. Jetzt aktualisieren?
 5519=Information
 5520=Nur das eingestellte Maximum an Caches wurde geladen.\nWiederholen sie das Spidern sp?ter um weitere Caches zu laden.\nEs wurden keine vorhandenen Caches aktualisiert.
 5521=Seite+

Modified: trunk/res_noewe/languages/EN.cfg
===================================================================
--- trunk/res_noewe/languages/EN.cfg	2010-10-28 20:00:58 UTC (rev 2844)
+++ trunk/res_noewe/languages/EN.cfg	2010-11-02 17:34:57 UTC (rev 2845)
@@ -145,7 +145,7 @@
 221=Overwrite filter?
 222=This filter already exists. Overwrite it?
 223=Delete filter?
-224= - Delete the saved filter?
+224=+- Delete the saved filter?
 225=Also in logs
 226=Profile cannot be deleted.
 227=active profile cannot be deleted.
@@ -509,7 +509,7 @@
 1621=Error while interpreting data\n from Opencaching.de,\nThis is most probaly a bug at Opencaching.de\nRetry later\n Status:
 1622=Exclude found caches
 1623=Import upto:
-1624= caches (empty=all)
+1624=+caches (empty=all)
 1625=Download TBs
 1626=Max. save logs:
 1627=All caches
@@ -803,10 +803,10 @@
 4110=loading
 4111=Coordinates must be entered in the format N XX XX.XXX E XXX XX.XXX
 4112=IO-Error while copying image from:+
-4113=to:+
-4114= error:+
+4113=+to:+
+4114=+error:+
 4115=Error: could not decode image:+
-4116= - image not copied
+4116=+- image not copied
 4117=Error while importing .map-file:+
 4118=IO-Error while reading or writing calibration file
 4119=No calibration file found for:+
@@ -822,7 +822,7 @@
 4211=No+
 4212=less
 4213=more
-4214= detailed map available
+4214=+detailed map available
 4215=No caches selected by a tick
 4216=Loading map...
 4217=Could not find image associated with:
@@ -889,7 +889,7 @@
 4295=center
 4296=detailing
 4300=empty 1 Pixel =+
-4301= meters
+4301=+meters
 4302=Lat/Lon out of range while reading+
 4303=not enough lines in file+
 4304=not enough points to calibrate the map
@@ -951,9 +951,9 @@
 4829=getUrlForBoundingBox: Point:
 4830=No matching Gau?-Kr?ger-Stripe in the EPSG-code list in the .wms
 4831=getMapInfoObject: Coordinate system not supported by Cachewolf:
-4900= is not a german Gauss-Krueger coordinate
+4900=+is not a german Gauss-Krueger coordinate
 4920=EPSG code+
-4921= not supported
+4921=+not supported
 4922=EPSG code missing in:+
 4923=fromWgs84: EPSG code+
 4924=ToWgs84: EPSG code+
@@ -977,13 +977,13 @@
 5509=Coordinates for centre must be set
 5510=Spider Options
 5511=Found+
-5512= new/update caches
+5512=\nnew / update caches
 5513=Loading:+
 5514=Getting bug:+
 5515=Failed to load cache.\nPlease check your internet connection.\nRetry?
-5516= cache descriptions\ncould not be loaded.
+5516=+cache descriptions\ncould not be loaded.
 5517=Spider updates?
-5518= caches in database need an update. Update now?
+5518=+caches in database need an update. Update now?
 5519=Information
 5520=Only the given maximum of caches were loaded.\nRepeat spidering later to load more caches.\nNo already existing caches were updated.
 5521=Page+

Modified: trunk/res_noewe/languages/FR.cfg
===================================================================
--- trunk/res_noewe/languages/FR.cfg	2010-10-28 20:00:58 UTC (rev 2844)
+++ trunk/res_noewe/languages/FR.cfg	2010-11-02 17:34:57 UTC (rev 2845)
@@ -145,7 +145,7 @@
 221=?craser filtre?
 222=Ce filtre existe d?j?. ?craser-le?
 223=Effacer filtre?
-224= - Effacer ce filtre enregistr??
+224=+- Effacer ce filtre enregistr??
 225=Aussi dans logs
 226=[Profile cannot be deleted.]
 227=[active Profile cannot be deleted.]
@@ -509,7 +509,7 @@
 1621=Erreur d'interpretation du fichier mise ? jour.\nC'est probablement un erreur d'opencaching.de\nEssayez encore une fois plus tard.\n Statut:
 1622=Pas t?l?charger caches trouv?es
 1623=Max Quantit?:
-1624=  caches
+1624=+caches
 1625=Importe TBs
 1626=Max Activit?:
 1627=Tous les caches
@@ -803,10 +803,10 @@
 4110=Chargeant
 4111=Les coordonn?es doivent ?tre en format N XX XX,XXX E XXX XX,XXX
 4112=Erreur E/S en copyant:+
-4113= ?:+
-4114= Erreur:+
+4113=+?:+
+4114=+Erreur:+
 4115=Erreur: Ne peut pas d?coder image:+
-4116= - Image pas copi?e
+4116=+- Image pas copi?e
 4117=Erreur en important fichier .map:+
 4118=Erreur E/S en lisant ou ?crivant le fichier de calibrage
 4119=Pas trouv? de fichier de calibrage pour:+
@@ -822,7 +822,7 @@
 4211=Pas de carte+
 4212=plus claire et plus
 4213=d?taill?e
-4214= disponible
+4214=+disponible
 4215=Pas de caches coch?es
 4216=Chargeant carte...
 4217=N'a pas pu trouv? fichier pour cette image:
@@ -889,7 +889,7 @@
 4295=center
 4296=detailing
 4300=1 pixel vide =+
-4301= metre
+4301=+metre
 4302=Latitude/Longitude hors de l'?tendue valide en chargeant+
 4303=Trop peu de lignes en fichier+
 4304=Trop peu de points pour calibrer la carte
@@ -951,9 +951,9 @@
 4829=getUrlForBoundingBox: Point:
 4830=Pas de bande Gau?-Kr?ger dans la liste de codes EPSG dans le fichier .wms
 4831=getMapInfoObject: Syst?me de coordonn?es n'est pas soutenue par CacheWolf:
-4900= n'est pas une coordonn?e allemande Gau?-Kr?ger
+4900=+n'est pas une coordonn?e allemande Gau?-Kr?ger
 4920=Code EPSG+
-4921= pas soutenu
+4921=+pas soutenu
 4922=Code EPSG manque en:+
 4923=fromWgs84: code EPSG+
 4924=ToWgs84: code EPSG+
@@ -977,13 +977,13 @@
 5509=Coordonn?es de centre pas mis
 5510=Options spider
 5511=Trouv?e+
-5512= nouveau/mettre ? jour Caches
+5512=\nnouveau / mettre ? jour Caches
 5513=Chargeant:+
 5514=Travel Bug:+
 5515=Erreur en chargeant la cache.\nMerci de v?rifier votre connexion internet et si vous avez language englais chez gc.com..\nContinuer d'essayer?
-5516= descriptions cache\nne pouvait pas ?tre charg?.
+5516=+descriptions cache\nne pouvait pas ?tre charg?.
 5517=Spider mises ? jour?
-5518= caches en base de donn?es ont besoin d'une mise ? jour. Mettre ? jour maintenant?
+5518=+caches en base de donn?es ont besoin d'une mise ? jour. Mettre ? jour maintenant?
 5519=Information
 5520=Seulement le maximum compte tenu des caches ont ?t? charg?s.\nR?p?tez spidering plus tard ? la charge des caches plus.\nNo caches d?j? existants ont ?t? mis ? jour.
 5521=Page+

Modified: trunk/res_noewe/languages/NL.cfg
===================================================================
--- trunk/res_noewe/languages/NL.cfg	2010-10-28 20:00:58 UTC (rev 2844)
+++ trunk/res_noewe/languages/NL.cfg	2010-11-02 17:34:57 UTC (rev 2845)
@@ -145,7 +145,7 @@
 221=Overschrijf filter?
 222=De filter exiteerd al. Overschrijven?
 223=Filter verwijderen?
-224= - Deze filter verwijderen?
+224=+- Deze filter verwijderen?
 225=Ook in logs
 226=[Profile cannot be deleted.]
 227=[active Profile cannot be deleted.]
@@ -509,7 +509,7 @@
 1621=Fout tijdens interpreteren data\n van Opencaching.de,\nDit is vermoedelijk een fout bij Opencaching.de\nprobeer later nogmaals\nStatus:
 1622=niet in staat om te laden caches gevonden
 1623=Max Aantal:
-1624=  caches
+1624=+caches
 1625=Import TBs:
 1626=Max Logs:
 1627=Alle caches
@@ -803,10 +803,10 @@
 4110=Bezig met laden
 4111=Co?rdinaten moeten in dit formaat worden ingegeven N XX XX.XXX E XXX XX.XXX.
 4112=IO-Fout tijdens het kopi?ren van beeld:+
-4113= voor:+
-4114= Fout:+
+4113=+voor:+
+4114=+Fout:+
 4115=Fout: kan niet decoderen afbeelding:+
-4116= -  afbeelding niet gekopieerd
+4116=+-  afbeelding niet gekopieerd
 4117=Fout bij importeren .map Bestand:+
 4118=I/O-fout tijdens het lezen of schrijven van de kalibratie-bestand
 4119=Geen kalibratie bestand gevonden voor:+
@@ -822,7 +822,7 @@
 4211=Geen+
 4212=duidelijker
 4213=gedetailleerde
-4214= Kaart beschikbaar
+4214=+Kaart beschikbaar
 4215=Geen caches geselecteerd met vinkje
 4216=Laden kaart ...
 4217=Geen bestand, behorende tot de volgende afbeelding is niet gevonden:
@@ -889,7 +889,7 @@
 4295=Centrum
 4296=Detaillering
 4300=leeg 1 pixel=+
-4301=  meter
+4301=+meter
 4302=Lat / Lon buiten bereik tijdens het lezen +
 4303=niet genoeg lijnen in dossier +
 4304=niet genoeg punten voor het ijken van de kaart
@@ -951,9 +951,9 @@
 4829=getUrlForBoundingBox: Point:
 4830=Geen overeenkomende Gau?f-Kr?cger-streep in de EPSG-code lijst in het. WMS
 4831=getMapInfoObject: Coordinaat systeem niet ondersteund door Cachewolf:
-4900=  is niet een Duitse Gauss-Krueger te coordineren
+4900=+is niet een Duitse Gauss-Krueger te coordineren
 4920=EPSG code +
-4921=  niet ondersteund
+4921=+niet ondersteund
 4922=EPSG code ontbreekt in: +
 4923=fromWgs84: EPSG code +
 4924=ToWgs84: EPSG code +
@@ -977,13 +977,13 @@
 5509=Co?rdinaten voor middelpunt moeten worden ingegeven.
 5510=Spider options
 5511=Gevonden+
-5512= niew/update caches
+5512=\nniew / update caches
 5513=Bezig met laden:+
 5514=Travelbug
 5515=Failed to load-cache.\nPlease Controleer je internetverbinding.\nRetry?
-5516= cache beschrijvingen\ncould niet worden geladen.
+5516=+cache beschrijvingen\ncould niet worden geladen.
 5517=Spider updates?
-5518= caches in de database moet een update. Update nu?
+5518=+caches in de database moet een update. Update nu?
 5519=Informatie
 5520=Alleen de gegeven maximum van caches waren geladen.\nRepeat spideren later meer caches te laden.\nNo reeds bestaande caches zijn bijgewerkt.
 5521=Page+

Modified: trunk/res_noewe/languages/PL.cfg
===================================================================
--- trunk/res_noewe/languages/PL.cfg	2010-10-28 20:00:58 UTC (rev 2844)
+++ trunk/res_noewe/languages/PL.cfg	2010-11-02 17:34:57 UTC (rev 2845)
@@ -145,7 +145,7 @@
 221=Nadpisac filtr?
 222=Taki filtr juz istnieje. Nadpisac?
 223=Usunac filtr?
-224= - Usunac zapisany filtr?
+224=+- Usunac zapisany filtr?
 225=Takze w logach
 226=[Profile cannot be deleted.]
 227=[active Profile cannot be deleted.]
@@ -509,7 +509,7 @@
 1621=Blad podczas interpretacji danych\n Z Opencaching,\nNajpopularniejszy blad w Opencaching\nSprobuj pozniej\n Status:
 1622=Wyklucz znalezione skrzynki
 1623=Max. numer:
-1624= skrzynek
+1624=+skrzynek
 1625=Sciagnij TBs
 1626=Max. logow:
 1627=Wszystkie skrzynki
@@ -803,10 +803,10 @@
 4110=wczytuje
 4111=Wspolrzedne musza byc wprowadzone w formacie N XX XX.XXX E XXX XX.XXX
 4112=IO-Blad podczas kopiowania obrazu z:+
-4113=do:+
-4114= Blad:+
+4113=+do:+
+4114=+Blad:+
 4115=Blad: nie moge odczytac obrazu:+
-4116= - obraz nie skopiowany
+4116=+- obraz nie skopiowany
 4117=Blad podczas importowania pliku .map:+
 4118=IO-Blad podczas wczytywania lub nadpisywania pliku
 4119=Plik kalibracji nie znaleziony dla:+
@@ -822,7 +822,7 @@
 4211=Zadna+
 4212=mniej
 4213=bardziej
-4214= szczegolowa mapa dostepna
+4214=+szczegolowa mapa dostepna
 4215=Nie ma skrzynek wybraych
 4216=Wczytuje mape...
 4217=Nie moge znalezc obrazow polaczonych z:
@@ -889,7 +889,7 @@
 4295=center
 4296=detailing
 4300=Pusty 1 Pixel =+
-4301= metrow
+4301=+metrow
 4302=Lat/Lon poza obszarem podczas wczytywania+
 4303=za malo lini w pliku+
 4304=za malo punktow do kalibracji mapy.
@@ -951,9 +951,9 @@
 4829=getUrlForBoundingBox: Point:
 4830=Nie pasujace Gau?-Kr?ger-Stripe w kodzie EPSG w pliku .wms
 4831=getMapInfoObject: Cachewolf nie wspiera takich wspolrzednych:
-4900= to nie sa koordynaty Gauss-Krueger
+4900=+to nie sa koordynaty Gauss-Krueger
 4920=EPSG code+
-4921= nie wspierane
+4921=+nie wspierane
 4922=EPSG code brakujacy w:+
 4923=fromWgs84: EPSG code+
 4924=ToWgs84: EPSG code+
@@ -977,13 +977,13 @@
 5509=Wspolrzedne dla srodka musza byc podane
 5510=Opcje Spidera
 5511=Znaleziona+
-5512= nowy/aktualizacja skrzynki
+5512=\nnowy / aktualizacja skrzynki
 5513=Wczytuje:+
 5514=Pobieram bugi:+
 5515=Nie mozna zaladowac skrzynki.\nProsze sprawdzic polaczenie z netem.\nSprobowac ponownie?
-5516= Nie mozna zaladowac\nopisu skrzynek.
+5516=+Nie mozna zaladowac\nopisu skrzynek.
 5517=Spider updates?
-5518= Skrzynki w bazie wymagaja update'u.\nZrobic to teraz?
+5518=+Skrzynki w bazie wymagaja update'u.\nZrobic to teraz?
 5519=Informacje
 5520=Tylko zadane maksimum zostalo wczytane.\nPowtorz pozniej by znalezc inne skrzynki.\nZadna z dotychczasowych skrzynek nie zostala updateowana.
 5521=Strona+

Modified: trunk/res_noewe/languages/SV.cfg
===================================================================
--- trunk/res_noewe/languages/SV.cfg	2010-10-28 20:00:58 UTC (rev 2844)
+++ trunk/res_noewe/languages/SV.cfg	2010-11-02 17:34:57 UTC (rev 2845)
@@ -145,7 +145,7 @@
 221=Skriv ?ver filter?
 222=Det finns redan. ?ver den?
 223=Ta bort filter?
-224=  - radera sparade filter?
+224=+- radera sparade filter?
 225=?ven i loggarna
 226=profil inte kan tas bort.
 227=aktiv profil kan inte raderas.
@@ -509,7 +509,7 @@
 1621=Fel vid tolkning av data\n fr?n Opencaching.de, ?r\nThis troligen ett fel p? Opencaching.de\nRetry senare\n Status:
 1622=Uteslut hittade cachar
 1623=Importera upto:
-1624=  cachar (tom=alla)
+1624=+cachar (tom=alla)
 1625=H?mta TBS
 1626=Max. spara loggar:
 1627=Alla cachar
@@ -803,10 +803,10 @@
 4110=laddning
 4111=Koordinater m?ste anges i formatet N XX XX.XXX E XXX XX.XXX
 4112=IO-Fel vid kopiering bild fr?n: +
-4113=till: +
-4114=  error: +
+4113=+till:+
+4114=+error:+
 4115=Fel: Kunde inte avkoda bild: +
-4116=  -   bild inte kopieras
+4116=+- bild inte kopieras
 4117=Fel vid import. Map-fil: +
 4118=IO-Fel vid l?sning eller skrivning kalibrering fil
 4119=Ingen kalibrering fil hittades f?r: +
@@ -822,7 +822,7 @@
 4211=No +
 4212=mindre
 4213=mer
-4214=  detaljerad karta finns
+4214=+detaljerad karta finns
 4215=Ingen cachar ut av en f?sting
 4216=Laddar karta ...
 4217=Kunde inte hitta bilden i samband med:
@@ -889,7 +889,7 @@
 4295=center
 4296=detailing
 4300=tom 1 pixel=+
-4301=  meter
+4301=+meter
 4302=Lat / Lon r?ckh?ll n?r du l?ser +
 4303=inte tillr?ckligt rader i filen +
 4304=inte tillr?ckligt med po?ng f?r att kalibrera kartan
@@ -951,9 +951,9 @@
 4829=getUrlForBoundingBox: Point:
 4830=Inga matchande Gau?F-Kr?cger-rand i EPSG-kodlistan p?. WMS
 4831=getMapInfoObject: Koordinatsystem inte st?ds av Cachewolf:
-4900=  ?r inte en tysk Gauss-Krueger samordna
+4900=+?r inte en tysk Gauss-Krueger samordna
 4920=EPSG kod +
-4921=  st?ds
+4921=+st?ds
 4922=EPSG kod saknas i: +
 4923=fromWgs84: EPSG kod +
 4924=ToWgs84: EPSG kod +
@@ -977,13 +977,13 @@
 5509=Koordinater f?r centrum m?ste st?llas
 5510=Spider Options
 5511=Found +
-5512=  nya/uppdatering cachar
+5512=\nnya / uppdatering cachar
 5513=Laddar: +
 5514=Getting bug: +
 5515=Kunde inte ladda cache.\nPlease kontrollera din Internetanslutning.\nRetry?
-5516=  cache beskrivningar\ncould inte laddas.
+5516=+cache beskrivningar\ncould inte laddas.
 5517=Spider uppdateringar?
-5518=  cachar i databasen beh?ver uppdateras. Uppdatera nu?
+5518=+cachar i databasen beh?ver uppdateras. Uppdatera nu?
 5519=Information
 5520=Endast ges maximalt cachar lastades.\nRepeat spidering senare att l?sa mer cachar.\nNo redan existerande cachar har uppdaterats.
 5521=Sida +

Modified: trunk/src/CacheWolf/DescriptionPanel.java
===================================================================
--- trunk/src/CacheWolf/DescriptionPanel.java	2010-10-28 20:00:58 UTC (rev 2844)
+++ trunk/src/CacheWolf/DescriptionPanel.java	2010-11-02 17:34:57 UTC (rev 2845)
@@ -26,6 +26,7 @@
 package CacheWolf;
 
 import com.stevesoft.ewe_pat.Regex;
+import com.stevesoft.ewe_pat.Transformer;
 
 import ewe.fx.Font;
 import ewe.sys.Vm;
@@ -44,7 +45,7 @@
 */
 public class DescriptionPanel extends CellPanel{
 	HtmlDisplay disp = new HtmlDisplay();
-	mButton btnPlus, btnMinus;
+	mButton btnPlus, btnMinus, btnText, btnHtml;
 	CacheHolder currCache;
 	
 	CellPanel buttonP = new CellPanel();
@@ -54,6 +55,8 @@
 
 	public DescriptionPanel(){
 		buttonP.addNext(btnPlus = new mButton("+"),CellConstants.HSTRETCH, (CellConstants.HFILL));
+		buttonP.addNext(btnText = new mButton("Text"),CellConstants.HSTRETCH, (CellConstants.HFILL));
+		buttonP.addNext(btnHtml = new mButton("Html"),CellConstants.HSTRETCH, (CellConstants.HFILL));
 		buttonP.addLast(btnMinus = new mButton("-"),CellConstants.HSTRETCH, (CellConstants.HFILL));
 		ScrollBarPanel sbp = new MyScrollBarPanel(disp, 0);
 		//sbp.setScrollBarSize(40,40, 20);
@@ -203,6 +206,27 @@
 				disp.displayPropertiesChanged();
 				//redraw();
 			}
+			if (ev.target == btnText){
+	            disp.startHtml(); // To clear the old HTML display
+	            disp.endHtml();
+	    		Transformer trans = new Transformer(true);
+	    		trans.add(new Regex("\r", ""));
+	    		trans.add(new Regex("\n", " "));
+	    		trans.add(new Regex("<br>", "\n"));
+	    		trans.add(new Regex("<p>", "\n"));
+	    		trans.add(new Regex("<hr>", "\n"));
+	    		trans.add(new Regex("<br />", "\n"));
+	    		trans.add(new Regex("<(.*?)>", ""));
+	    		Transformer ttrans=new Transformer(true);
+	    		ttrans.add(new Regex("<(.*?)>", ""));
+	    		disp.setPlainText(ttrans.replaceAll(trans.replaceAll(desc)));
+			}
+			if (ev.target == btnHtml){
+	            disp.startHtml();
+	            disp.getDecoderProperties().set("documentroot", Global.getProfile().dataDir);
+	            disp.addHtml(desc, new ewe.sys.Handle());
+	            disp.endHtml();
+			}
 		}
 		super.onEvent(ev);
 	}

Modified: trunk/src/CacheWolf/MyLocale.java
===================================================================
--- trunk/src/CacheWolf/MyLocale.java	2010-10-28 20:00:58 UTC (rev 2844)
+++ trunk/src/CacheWolf/MyLocale.java	2010-11-02 17:34:57 UTC (rev 2845)
@@ -405,6 +405,7 @@
 				String key=got.substring(0,eq).trim();
 				String value=STRreplace.replace(got.substring(eq+1).trim(),"\\n","\n");
 				if (value.endsWith("+")) { value=value.substring(0, value.length()-1)+' '; }
+				if (value.startsWith("+")) { value=' ' + value.substring(1, value.length()); }
 				tcn.getProperties().add(key,value);
 			}
 		}



From araber95 at mail.berlios.de  Sat Nov  6 05:00:16 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sat,  6 Nov 2010 05:00:16 PM +0100
Subject: [Cachewolf-svn] r2846 - in branches/r1.2: res_noewe/exporticons
	res_noewe/exporticons/exporticons res_noewe/languages
	res_noewe/templates res_noewe/webmapservices src/CacheWolf
	src/CacheWolf/exp src/CacheWolf/imp src/CacheWolf/navi
	src/CacheWolf/navi/touchControls
Message-ID: <20101106160016.7E138480740@sheep.berlios.de>

Author: araber95
Date: 2010-11-06 17:00:15 +0100 (Sat, 06 Nov 2010)
New Revision: 2846

Added:
   branches/r1.2/res_noewe/exporticons/exporticons/GarminPOI.zip
   branches/r1.2/res_noewe/exporticons/exporticons/garminmap.xml
   branches/r1.2/res_noewe/templates/html_240x320(by_KarlKater).tpl
   branches/r1.2/res_noewe/templates/index_alpha.tpl
   branches/r1.2/res_noewe/templates/index_dist.tpl
   branches/r1.2/res_noewe/templates/index_size.tpl
   branches/r1.2/res_noewe/templates/index_type.tpl
   branches/r1.2/res_noewe/webmapservices/de-sh_t.wms
Modified:
   branches/r1.2/res_noewe/exporticons/garminmap-de.html
   branches/r1.2/res_noewe/languages/DE.cfg
   branches/r1.2/res_noewe/languages/EN.cfg
   branches/r1.2/res_noewe/languages/FR.cfg
   branches/r1.2/res_noewe/languages/NL.cfg
   branches/r1.2/res_noewe/languages/PL.cfg
   branches/r1.2/res_noewe/languages/SV.cfg
   branches/r1.2/res_noewe/templates/Short documentation for the export via templates.htm
   branches/r1.2/res_noewe/templates/index.tpl
   branches/r1.2/src/CacheWolf/Attribute.java
   branches/r1.2/src/CacheWolf/Attributes.java
   branches/r1.2/src/CacheWolf/AttributesSelector.java
   branches/r1.2/src/CacheWolf/CacheHolder.java
   branches/r1.2/src/CacheWolf/DateTimeChooser.java
   branches/r1.2/src/CacheWolf/DescriptionPanel.java
   branches/r1.2/src/CacheWolf/DetailsPanel.java
   branches/r1.2/src/CacheWolf/FilterScreen.java
   branches/r1.2/src/CacheWolf/MainTab.java
   branches/r1.2/src/CacheWolf/MyLocale.java
   branches/r1.2/src/CacheWolf/Parser.java
   branches/r1.2/src/CacheWolf/SafeXML.java
   branches/r1.2/src/CacheWolf/StatusBar.java
   branches/r1.2/src/CacheWolf/exp/GarminMap.java
   branches/r1.2/src/CacheWolf/exp/GpxExportNg.java
   branches/r1.2/src/CacheWolf/exp/LocExporter.java
   branches/r1.2/src/CacheWolf/exp/OziExporter.java
   branches/r1.2/src/CacheWolf/exp/TPLExporter.java
   branches/r1.2/src/CacheWolf/imp/GPXImporter.java
   branches/r1.2/src/CacheWolf/imp/OCXMLImporter.java
   branches/r1.2/src/CacheWolf/imp/SpiderGC.java
   branches/r1.2/src/CacheWolf/navi/MovingMap.java
   branches/r1.2/src/CacheWolf/navi/touchControls/MovingMapControlItem.java
   branches/r1.2/src/CacheWolf/navi/touchControls/MovingMapControlItemText.java
   branches/r1.2/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java
   branches/r1.2/src/CacheWolf/navi/touchControls/MovingMapControls.java
Log:
updated to NB

Added: branches/r1.2/res_noewe/exporticons/exporticons/GarminPOI.zip
===================================================================
(Binary files differ)


Property changes on: branches/r1.2/res_noewe/exporticons/exporticons/GarminPOI.zip
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Added: branches/r1.2/res_noewe/exporticons/exporticons/garminmap.xml
===================================================================
--- branches/r1.2/res_noewe/exporticons/exporticons/garminmap.xml	                        (rev 0)
+++ branches/r1.2/res_noewe/exporticons/exporticons/garminmap.xml	2010-11-06 16:00:15 UTC (rev 2846)
@@ -0,0 +1,58 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+<iconmap>
+<!-- Tradi -->
+<icon type="2" found="1" name="Geocache Found" poiid="TraditionalFound" ozicolor="65280"/>
+<icon type="2" name="Geocache" poiid="Traditional" ozicolor="65280"/>
+<!-- Multi -->
+<icon type="3" found="1" name="Geocache Found" poiid="MultiFound" ozicolor="4227327"/>
+<icon type="3" name="Bank" poiid="Multi" ozicolor="4227327"/>
+<!-- Letterbox -->
+<icon type="5" found="1" name="Geocache Found" poiid="LetterboxFound" ozicolor="12632256"/>
+<icon type="5" name="Residence" poiid="Letterbox" ozicolor="12632256"/>
+<!-- Mystery -->
+<icon type="8" found="1" name="Geocache Found" poiid="MysteryFound" ozicolor="13141291"/>
+<icon type="8" name="Medical Facility" poiid="Mystery" ozicolor="13141291"/>
+<!-- EVENT -->
+<icon type="6" found="1" name="Geocache Found" poiid="EventAttended" ozicolor="16777215"/>
+<icon type="6" name="Restroom" poiid="Event" ozicolor="16777215"/>
+<!-- CITO -->
+<icon type="13" found="1" name="Geocache Found" poiid="CITOAttended" ozicolor="16777215"/>
+<icon type="13" name="Picnic Area" poiid="CITO" ozicolor="16777215"/>
+<!-- Virtual -->
+<icon type="4" found="1" name="Geocache Found" poiid="Virtual" ozicolor="16777215"/>
+<icon type="4" name="Skull and Crossbones" poiid="Virtual" ozicolor="16777215"/>
+<!-- Webcam -->
+<icon type="11" found="1" name="Geocache Found" poiid="Webcam" ozicolor="8421504"/>
+<icon type="11" name="Scenic Area" poiid="Webcam" ozicolor="8421504"/>
+<!-- Locationless -->
+<icon type="12" found="1" name="Geocache Found" poiid="Locationless" ozicolor="0"/>
+<icon type="12" name="Airport" poiid="Locationless" ozicolor="0"/>
+<!-- Earthcache -->
+<icon type="104" found="1" name="Geocache Found" poiid="Earthcache" ozicolor="2933223"/>
+<icon type="104" name="Campground" poiid="Earthcache" ozicolor="2933223"/>
+<!-- Mega-Event -->
+<icon type="100" found="1" name="Geocache Found" poiid="MegaEvent" ozicolor="16777215"/>
+<icon type="100" name="Parachute Area" poiid="MegaEvent" ozicolor="16777215"/>
+<!-- WHEREIGO -->
+<icon type="101" found="1" name="Geocache Found" poiid="WhereIGo" ozicolor="2142890"/>
+<icon type="101" name="Geocache" poiid="WhereIGo" ozicolor="2142890"/>
+<!-- Project Ape -->
+<icon type="102" found="1" name="Geocache Found" poiid="ProjectApe" ozicolor="16777215" />
+<icon type="102" name="Geocache" poiid="ProjectApe" ozicolor="16777215" />
+<!-- Adventure Maze Exhibit -->
+<icon type="103" found="1" name="Geocache Found" poiid="AdventureMaze" ozicolor="16777215"/>
+<icon type="103" name="Geocache" poiid="AdventureMaze" ozicolor="16777215"/>
+
+<!-- Final WP -->
+<icon type="53" name="Golf Course" poiid="Final" ozicolor="16243391"/>
+<!-- Parken WP -->
+<icon type="50" name="Car" poiid="Parking" ozicolor="12562683"/>
+<!-- Puzzle WP (Question) -->
+<icon type="52" name="Information" poiid="Question" ozicolor="65535"/>
+<!-- Multicache stage -->
+<icon type="51" name="Waypoint" poiid="Stage" ozicolor="65535"/>
+<!-- Trailhead WP -->
+<icon type="54" name="Trail Head" poiid="Trailhead" ozicolor="65535"/>
+<!-- Reference WP -->
+<icon type="55" name="Flag" poiid="Reference" ozicolor="65535"/>
+</iconmap>

Modified: branches/r1.2/res_noewe/exporticons/garminmap-de.html
===================================================================
--- branches/r1.2/res_noewe/exporticons/garminmap-de.html	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/res_noewe/exporticons/garminmap-de.html	2010-11-06 16:00:15 UTC (rev 2846)
@@ -1,182 +1,880 @@
-<html>
-<head>
-<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
-<title>Readme: garminmap.xml</title>
-<meta name="generator" content="DocBook XSL Stylesheets V1.68.1">
-</head>
-<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" lang="de">
-<div class="titlepage">
-<div><div><h2 class="title">
-<a name="id2955923"></a>Readme: garminmap.xml</h2></div></div>
-<hr>
-</div>
-<div class="toc">
-<p><b>Inhaltsverzeichnis</b></p>
-<dl>
-<dt><span class="section"><a href="#id2999321">Beispiel: pro Cachetyp ein Symbol</a></span></dt>
-<dt><span class="section"><a href="#id2956242">Beispiel: verkn?pfte Bedingungen</a></span></dt>
-<dt><span class="section"><a href="#id2956626">Beispiel: OZI Export</a></span></dt>
-<dt><span class="section"><a href="#id2956711">Beispiel: Garmin POI (GPI)</a></span></dt>
-<dd><dl>
-<dt><span class="section"><a href="#id2956800">Garmin POI Loader</a></span></dt>
-<dt><span class="section"><a href="#id2956821">GPI Dateien erzeugen</a></span></dt>
-</dl></dd>
-<dt><span class="section"><a href="#id2956877">Anhang</a></span></dt>
-<dd><dl>
-<dt><span class="section"><a href="#cachetypen">Cachetypen</a></span></dt>
-<dt><span class="section"><a href="#cachegroesse">Cachegr??en</a></span></dt>
-</dl></dd>
-</dl>
-</div>
-<div class="abstract">
-<p class="title"><b>Zusammenfassung</b></p>
-<p>Mit Hilfe der Datei <code class="filename">garminmap.xml</code> wird f?r den Export von GPX- und OZI-Wegpunktdateien festgelegt wie die Wegpunkte im jeweiligen Programm dargestellt werden. Dar?ber hinaus kann festgelegt werden welche Kategorien und Symbole beim Erzeugen von Custom POI f?r Garmin Handheld Ger?te verwendet werden. Die Datei muss im selben Verzeichnis liegen wie die Datei prefs.xml. </p>
-<p>Dieses Dokument beschreibt nicht die eigentliche Installation der Custom Symbols auf dem Handheld oder in Mapsource.</p>
-</div>
-<p>In der Datei <code class="filename">Garmin User Symbols.zip</code> findest du einige Beispiele, die im Folgenden kurz erkl?rt werden sollen.</p>
-<div class="section" lang="de">
-<div class="titlepage"><div><div><h2 class="title" style="clear: both">
-<a name="id2999321"></a>Beispiel: pro Cachetyp ein Symbol</h2></div></div></div>
-<p>Im diesem Beispiel wird einfach jedem Cachetyp ein eigenes Symbol zugeordnet</p>
-<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
-&lt;iconmap&gt;
-&lt;icon type="0" name="Custom 18" /&gt;
-&lt;icon type="2" name="Custom 0" /&gt;
-&lt;icon type="3" name="Custom 1" /&gt;
-&lt;icon type="4" name="Custom 6" /&gt;
-&lt;icon type="5" name="Custom 3" /&gt;
-&lt;icon type="6" name="Custom 4" /&gt;
-&lt;icon type="8" name="Custom 2" /&gt;
-&lt;icon type="11" name="Custom 7" /&gt;
-&lt;icon type="12" name="Custom 10" /&gt;
-&lt;icon type="13" name="Custom 5" /&gt;
-&lt;icon type="50" name="Parking Area" /&gt;
-&lt;icon type="51" name="Custom 11" /&gt;
-&lt;icon type="52" name="Custom 12" /&gt;
-&lt;icon type="53" name="Custom 16" /&gt;
-&lt;icon type="54" name="Trail Head" /&gt;
-&lt;icon type="55" name="Custom 14" /&gt;
-&lt;icon type="100" name="Custom 4" /&gt;
-&lt;icon type="101" name="Custom 17" /&gt;
-&lt;icon type="102" name="Custom 18" /&gt;
-&lt;icon type="103" name="Custom 20" /&gt;
-&lt;icon type="104" name="Custom 8" /&gt;
-&lt;/iconmap&gt;</pre>
-<p>Die Datei <code class="filename">garminmap.xml</code> beginnt immer mit</p>
-<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
-&lt;iconmap&gt;</pre>
-<p>und endet mit</p>
-<pre class="programlisting">&lt;/iconmap&gt;</pre>
-<p>Jede einzelne Zeile beginnt mit <code class="code">&lt;icon</code> und endet mit <code class="code"> /&gt;</code>. Bitte das Leerzeichen nicht vergessen, </p>
-<p>Innerhalb der Zeile finden sich dann Bedingungen und Anweisungen. </p>
-<p>In unserem Beispiel ist <code class="code">type="2"</code> eine Bedingung, die auf alle Traditional Caches zutrifft und  <code class="code">name="Custom 0"</code> die Anweisung die ausgef?hrt wird, wenn die Bedingung erf?llt ist. In diesem Fall wird auf einem Garmin Handheld oder in Mapsource das Benutzerdefinierte Symbol 0 angezeigt. Eine Liste aller Cachetypen findest du im <a href="#cachetypen" title="Cachetypen">Anhang</a>. </p>
-<p>Wie die Zeile </p>
-<pre class="programlisting">&lt;icon type="50" name="Parking Area" /&gt;</pre>
-<p>zeiget muss man sich bei den anzuzeigenden Symbolen nicht auf die Benutzerdefinierten beschr?nken, sondern kann auch die in jedem Garmin Handheld fest eingebauten Symbole benutzen. Auf diese Weise k?nnen auch Benutzer von Ger?ten die das Anlegen von Benutzerdefinierten Symbolen nicht unterst?tzen von der Garminmap profitieren und zumindest unterschiedliche Symbole darstellen lassen. </p>
-</div>
-<div class="section" lang="de">
-<div class="titlepage"><div><div><h2 class="title" style="clear: both">
-<a name="id2956242"></a>Beispiel: verkn?pfte Bedingungen</h2></div></div></div>
-<p>Neben der einfach Zuweisung aus dem ersten Beispiel lassen sich mit der <code class="filename">garminmap.xml</code> auch komplexere Bedingungen f?r die Zuweisung eines Symbols erstellen. Dabei sind folgende Bedingungen m?glich und beliebig kombinierbar:</p>
-<div class="itemizedlist"><ul type="disc">
-<li><p>type= Typ des Caches. F?r m?gliche Werte siehe <a href="#cachetypen" title="Cachetypen">Liste</a>.</p></li>
-<li><p>size= Gr??e des Cachebeh?lters. F?r m?gliche Werte siehe <a href="#cachegroesse" title="Cachegr??en">Liste</a></p></li>
-<li><p>terrain= 10, 15, 20, 25, 30, 35, 40, 45 oder 50. Custom und Additional Waypoints haben keine Gel?ndebewertung</p></li>
-<li><p>difficulty= 10, 15, 20, 25, 30, 35, 40, 45 oder 50. Custom und Additional Waypoints haben keine Schwierugkeit</p></li>
-<li><p>found= 1 (gefunden) oder 0 (nicht gefunden). Nicht verwechseln mit status</p></li>
-<li><p>status= Inhalt des Statusfeldes im Detailspanel. Es wird nur gegen den Anfang des Feldes gepr?ft. status="Nacht" findet als Nachtcache und Nachtisch!</p></li>
-</ul></div>
-<p>Wichtig dabei ist, dass die Werte der Bedingungen immer mit doppelten Anf?rungszeichen (") umschlossen werden.</p>
-<pre class="programlisting">&lt;icon type="2" terrain="50" name="XXXX" /&gt;</pre>
-<p>weist allen caches vom Typ 2 (Traditional) und der Gel?ndewertung 50 (5) das Symbol mit dem Namen zu.</p>
-<p>Weil man h?ufig auch f?r Gel?nde 4.5 eine erweitere Ausr?stung braucht, k?nnte man das auch wie folgt erg?mzen </p>
-<pre class="programlisting">&lt;icon type="2" terrain="50" name="XXXX" /&gt;
-&lt;icon type="2" terrain="45" name="XXXX" /&gt;</pre>
-<p>Damit alle anderen Tradis auch ein Symbol bekommen, k?nnte die komplette Sequenz f?r Tradis dann so aussehen:</p>
-<pre class="programlisting">&lt;icon type="2" terrain="50" name="XXXX" /&gt;
-&lt;icon type="2" terrain="45" name="XXXX" /&gt;
-&lt;icon type="2" name="Custom 0" /&gt;</pre>
-<p>Alle Traids mit Gel?nde 5 oder 4.5 bekommen das Symbol XXXX alle ?brigen Tradis das Symbol Custom 0. Du kannst in einer Reihe beliebig viele Bedingungen benutzen. Die Reihen werden dabei in der Reihenfolge abgearbeitet in der sie in der datei stehen. Die Reihen mit komplexeren Bedingungen sollten also immer vor den einfachen Regeln stehen. Bei einem Eintrag von </p>
-<pre class="programlisting">&lt;icon type="2" name="Custom 0" /&gt;
-&lt;icon type="2" terrain="50" name="XXXX" /&gt;
-&lt;icon type="2" terrain="45" name="XXXX" /&gt;</pre>
-<p>w?rden die speziellen Regeln f?r das Gel?nde nie benutzt werden, da alle Tradis bereits von der ersten Regel erfasst w?rden.</p>
-</div>
-<div class="section" lang="de">
-<div class="titlepage"><div><div><h2 class="title" style="clear: both">
-<a name="id2956626"></a>Beispiel: OZI Export</h2></div></div></div>
-<p>Die Datei <code class="filename">garminmap.xml</code> kann auch zusammen mit dem OZI Export benutzt werden. In dem Fall heisst die Anweisung aber nicht <code class="code">name=""</code> sondern <code class="code">ozicolor=""</code>. Dabei steht ozicolor f?r die verwendete Hintergrundfarbe bei der Darstellung. Die Vordergrundfarbe ist immer Schwarz.</p>
-<p>Ein Traditional Cache k?nnte durch folgende Regel dargestellt werden: </p>
-<pre class="programlisting">&lt;icon type="2" ozicolor="65280" /&gt;</pre>
-<p>Ein Traditional w?rde also in Gr?n dargestellt, denn alle Farbangaben sind die Dezimalschreibweisen der eigentlich hexadezimalen RGB Farben. 65280 entspricht dabei dem Farbcode 00FF00.</p>
-<p>Im Internet findest du zahlreiche RGB Farbtabellen aus denen du dir die Farben mit denen deine Wegpunkte dargestellt werden sollen aussuchen kannst. Mit dem Taschenrechner, den dein Betriebssystem mitliefert, k?nnen die dort angegeben Hexadezimalwerte meist bequem in das dezimale Format umgerechnet werden. Versuche Farben zu verwenden, die sich gut unterscheiden lassen.</p>
-<p>Genauso wie Bedingungen verkn?pft werden k?nnen, k?nnen auch Anweisungen verkn?pft werden. Solltest du also eine angepasste Darstellung f?r Garmin und Ozi haben wollen, ben?tigst du nicht zwei verschiedene Dateien, sondern kannst beides in einer einzigen Datei festlegen. F?r den Traditional Cache aus unserem Beispiel k?nnte das dann so aussehen: </p>
-<pre class="programlisting">&lt;icon type="2" name="Custom 0" ozicolor="65280" /&gt;</pre>
-</div>
-<div class="section" lang="de">
-<div class="titlepage"><div><div><h2 class="title" style="clear: both">
-<a name="id2956711"></a>Beispiel: Garmin POI (GPI)</h2></div></div></div>
-<p>Zuammen mit dem experimentellen GPX Exporter kann die <code class="filename">garminmap.xml</code> auch verwendet werden um Einzeldateien f?r den Gramin POI Loader oder diekt GPI dateien f?r die Verwendung auf dem Garmin Handheld zu erzeugen. Dazu wurde die Anweisung <code class="code">poiid=""</code> eingef?hrt.</p>
-<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
-<h3 class="title">Wichtig</h3>
-<p>Nicht alle Garmin Handhelds unterst?tzen die Verwendung von Custom Points of Interest. Bitte schau im Handbuch deines Ger?tes nach, ob die Funktion unterst?tzt wird bevor du sie benutzt.</p>
-</div>
-<p>Bei der <code class="code">poiid</code> handelt es sich um einen Freitext der von dir individuell festgelegt werden kann. Da einige Garmin Handhelds jedoch Schwierigkeiten bei der Darstellung von Sonderzeichen haben, solltest du dich bei der Vergabe der ID auf die Zeichen A-z, a-z, 0-9, sowie - und _ beschr?nken.</p>
-<pre class="programlisting">&lt;icon type="2" poiid="Traditional" /&gt;</pre>
-<p>k?nnte also eine Regel sein, die festlegt wie w?hrend eines POI Exports Traditional Caches behandelt werden. Nat?rlich lassen sich auch hier wieder die verschiednen Anweisungen kombinieren, so da? eine solche Regel auch so aussehen k?nnte: </p>
-<pre class="programlisting">&lt;icon type="2" poiid="Traditional" ozicolor="65280" name="Custom 0" /&gt;</pre>
-<p>Beim Export wird der vergebenen ID noch ein Prefix vorangestellt, welche du im Exportdialog vergibst. Prefix und <code class="code">piid</code> sollten gemeinsam auf das Display deines Handhelds passen. </p>
-<div class="section" lang="de">
-<div class="titlepage"><div><div><h3 class="title">
-<a name="id2956800"></a>Garmin POI Loader</h3></div></div></div>
-<p>Sofern du den Garmin POI Loader benutzen m?chtest um deine Wegpunkte sp?ter auf den Handheld zu laden, musst du nichts weiter tun. Der Exporter wird im angegebenen Verzeichnis Dateien mit dem Namen <code class="code">Prefix-PoiId.gpx</code> erzuegen, die du weiterverarbeiten kannst.</p>
-</div>
-<div class="section" lang="de">
-<div class="titlepage"><div><div><h3 class="title">
-<a name="id2956821"></a>GPI Dateien erzeugen</h3></div></div></div>
-<p>Garmin GPI Dateien enthalten neben den Wegpunktinformationen immer auch eine Grafik mit der der Wegpunkt auf dem Bildschirm dargestellt wird.  Damit eine korrekte GPI Datei erzeugt werden kann, muss in dem Verzeichnis in dem die <code class="filename">garminmap.xml</code> liegt auch noch eine Datei mit dem Namen <code class="filename">GarminPOI.zip</code> existieren. In dieser Datei muss sich zu jeder von dir vergebenen <code class="code">poiid</code> eine Datei mit dem Namen <code class="filename">poiid.bmp</code> befinden. Lautet eine deiner Anweisungen  <code class="code">poiid="Traditional"</code> muss sich in der <code class="filename">GarminPOI.zip</code>   eine <code class="filename">Traditional.bmp</code> befinden.</p>
-</div>
-</div>
-<div class="section" lang="de">
-<div class="titlepage"><div><div><h2 class="title" style="clear: both">
-<a name="id2956877"></a>Anhang</h2></div></div></div>
-<div class="section" lang="de">
-<div class="titlepage"><div><div><h3 class="title">
-<a name="cachetypen"></a>Cachetypen</h3></div></div></div>
-<p>Cachtypen werden innerhalb der Bedingungen durch einen Zahlenwert aus der folgenden Tabelle repr?sentiert</p>
-<pre class="programlisting">0 Custom
-2 Traditional
-3 Multicache
-4 Virtual Cache
-5 Letterbox
-6 Event Cache
-8 Unknown / Mystery Cache
-11 Webcam Cache
-12 Locationless (Reverse) Cache
-13 CITO Event
-100 Mega Event
-101 WhereIGo cache
-102 Project Ape Cache
-103 Adventure Maze Exhibit
-104 Earthcache
-50 Additional Waypoint Parking
-51 Additional Waypoint Stage of a Multicache
-52 Additional Waypoint Question to Answer
-53 Additional Waypoint Final
-54 Additional Waypoint Trailhead
-55 Additional Waypoint Reference</pre>
-</div>
-<div class="section" lang="de">
-<div class="titlepage"><div><div><h3 class="title">
-<a name="cachegroesse"></a>Cachegr??en</h3></div></div></div>
-<p>Cachegr??en werden innerhalb der Bedingungen durch einen Buchstaben aus der folgenden Tabelle repr?sentiert. Ob gro? oder klein geschreiben spielt dabei keine Rolle.</p>
-<pre class="programlisting">m Micro
-s Small
-r Regular
-l Large
-v Very Large
-n Not Chosen / Other / Virtual / None</pre>
-</div>
-</div>
-</div></body>
-</html>
+<html xmlns:v="urn:schemas-microsoft-com:vml"
+xmlns:o="urn:schemas-microsoft-com:office:office"
+xmlns:w="urn:schemas-microsoft-com:office:word"
+xmlns="http://www.w3.org/TR/REC-html40">
+
+<head>
+<meta http-equiv=Content-Type content="text/html; charset=iso-8859-1">
+<meta name=ProgId content=Word.Document>
+<meta name=Generator content="Microsoft Word 10">
+<meta name=Originator content="Microsoft Word 10">
+<link rel=File-List href="garminmap-de-Dateien/filelist.xml">
+<link rel=Edit-Time-Data href="garminmap-de-Dateien/editdata.mso">
+<!--[if !mso]>
+<style>
+v\:* {behavior:url(#default#VML);}
+o\:* {behavior:url(#default#VML);}
+w\:* {behavior:url(#default#VML);}
+.shape {behavior:url(#default#VML);}
+</style>
+<![endif]-->
+<title>Readme: garminmap.xml</title>
+<!--[if gte mso 9]><xml>
+ <o:DocumentProperties>
+  <o:Author>Franz</o:Author>
+  <o:LastAuthor>Franz</o:LastAuthor>
+  <o:Revision>8</o:Revision>
+  <o:Created>2010-10-10T09:32:00Z</o:Created>
+  <o:LastSaved>2010-10-10T16:05:00Z</o:LastSaved>
+  <o:Pages>1</o:Pages>
+  <o:Words>1566</o:Words>
+  <o:Characters>9872</o:Characters>
+  <o:Lines>82</o:Lines>
+  <o:Paragraphs>22</o:Paragraphs>
+  <o:CharactersWithSpaces>11416</o:CharactersWithSpaces>
+  <o:Version>10.6858</o:Version>
+ </o:DocumentProperties>
+</xml><![endif]--><!--[if gte mso 9]><xml>
+ <w:WordDocument>
+  <w:SpellingState>Clean</w:SpellingState>
+  <w:GrammarState>Clean</w:GrammarState>
+  <w:HyphenationZone>21</w:HyphenationZone>
+  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
+ </w:WordDocument>
+</xml><![endif]-->
+<style>
+<!--
+ /* Style Definitions */
+ p.MsoNormal, li.MsoNormal, div.MsoNormal
+	{mso-style-parent:"";
+	margin:0cm;
+	margin-bottom:.0001pt;
+	mso-pagination:widow-orphan;
+	font-size:12.0pt;
+	font-family:"Times New Roman";
+	mso-fareast-font-family:"Times New Roman";
+	color:black;}
+h2
+	{mso-margin-top-alt:auto;
+	margin-right:0cm;
+	mso-margin-bottom-alt:auto;
+	margin-left:0cm;
+	mso-pagination:widow-orphan;
+	mso-outline-level:2;
+	font-size:18.0pt;
+	font-family:"Times New Roman";
+	color:black;
+	font-weight:bold;}
+h3
+	{mso-margin-top-alt:auto;
+	margin-right:0cm;
+	mso-margin-bottom-alt:auto;
+	margin-left:0cm;
+	mso-pagination:widow-orphan;
+	mso-outline-level:3;
+	font-size:13.5pt;
+	font-family:"Times New Roman";
+	color:black;
+	font-weight:bold;}
+a:link, span.MsoHyperlink
+	{color:blue;
+	text-decoration:underline;
+	text-underline:single;}
+a:visited, span.MsoHyperlinkFollowed
+	{color:#840084;
+	text-decoration:underline;
+	text-underline:single;}
+p
+	{mso-margin-top-alt:auto;
+	margin-right:0cm;
+	mso-margin-bottom-alt:auto;
+	margin-left:0cm;
+	mso-pagination:widow-orphan;
+	font-size:12.0pt;
+	font-family:"Times New Roman";
+	mso-fareast-font-family:"Times New Roman";
+	color:black;}
+code
+	{font-family:"Courier New";
+	mso-ascii-font-family:"Courier New";
+	mso-fareast-font-family:"Times New Roman";
+	mso-hansi-font-family:"Courier New";
+	mso-bidi-font-family:"Courier New";}
+pre
+	{margin:0cm;
+	margin-bottom:.0001pt;
+	mso-pagination:widow-orphan;
+	tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt;
+	font-size:10.0pt;
+	font-family:"Courier New";
+	mso-fareast-font-family:"Times New Roman";
+	color:black;}
+p.title, li.title, div.title
+	{mso-style-name:title;
+	mso-margin-top-alt:auto;
+	margin-right:0cm;
+	mso-margin-bottom-alt:auto;
+	margin-left:0cm;
+	mso-pagination:widow-orphan;
+	font-size:12.0pt;
+	font-family:"Times New Roman";
+	mso-fareast-font-family:"Times New Roman";
+	color:black;}
+span.section
+	{mso-style-name:section;}
+span.SpellE
+	{mso-style-name:"";
+	mso-spl-e:yes;}
+span.GramE
+	{mso-style-name:"";
+	mso-gram-e:yes;}
+ at page Section1
+	{size:595.3pt 841.9pt;
+	margin:70.85pt 70.85pt 2.0cm 70.85pt;
+	mso-header-margin:35.4pt;
+	mso-footer-margin:35.4pt;
+	mso-paper-source:0;}
+div.Section1
+	{page:Section1;}
+ /* List Definitions */
+ @list l0
+	{mso-list-id:127862211;
+	mso-list-template-ids:687108160;}
+ at list l0:level1
+	{mso-level-number-format:bullet;
+	mso-level-text:\F0B7;
+	mso-level-tab-stop:36.0pt;
+	mso-level-number-position:left;
+	text-indent:-18.0pt;
+	mso-ansi-font-size:10.0pt;
+	font-family:Symbol;}
+ at list l0:level2
+	{mso-level-tab-stop:72.0pt;
+	mso-level-number-position:left;
+	text-indent:-18.0pt;}
+ at list l0:level3
+	{mso-level-tab-stop:108.0pt;
+	mso-level-number-position:left;
+	text-indent:-18.0pt;}
+ at list l0:level4
+	{mso-level-tab-stop:144.0pt;
+	mso-level-number-position:left;
+	text-indent:-18.0pt;}
+ at list l0:level5
+	{mso-level-tab-stop:180.0pt;
+	mso-level-number-position:left;
+	text-indent:-18.0pt;}
+ at list l0:level6
+	{mso-level-tab-stop:216.0pt;
+	mso-level-number-position:left;
+	text-indent:-18.0pt;}
+ at list l0:level7
+	{mso-level-tab-stop:252.0pt;
+	mso-level-number-position:left;
+	text-indent:-18.0pt;}
+ at list l0:level8
+	{mso-level-tab-stop:288.0pt;
+	mso-level-number-position:left;
+	text-indent:-18.0pt;}
+ at list l0:level9
+	{mso-level-tab-stop:324.0pt;
+	mso-level-number-position:left;
+	text-indent:-18.0pt;}
+ol
+	{margin-bottom:0cm;}
+ul
+	{margin-bottom:0cm;}
+-->
+</style>
+<!--[if gte mso 10]>
+<style>
+ /* Style Definitions */
+ table.MsoNormalTable
+	{mso-style-name:"Normale Tabelle";
+	mso-tstyle-rowband-size:0;
+	mso-tstyle-colband-size:0;
+	mso-style-noshow:yes;
+	mso-style-parent:"";
+	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
+	mso-para-margin:0cm;
+	mso-para-margin-bottom:.0001pt;
+	mso-pagination:widow-orphan;
+	font-size:10.0pt;
+	font-family:"Times New Roman";}
+</style>
+<![endif]--><!--[if gte mso 9]><xml>
+ <o:shapedefaults v:ext="edit" spidmax="5122"/>
+</xml><![endif]--><!--[if gte mso 9]><xml>
+ <o:shapelayout v:ext="edit">
+  <o:idmap v:ext="edit" data="1"/>
+ </o:shapelayout></xml><![endif]-->
+</head>
+
+<body bgcolor=white lang=DE link=blue vlink="#840084" style='tab-interval:35.4pt'
+alink="#0000FF">
+
+<div class=Section1>
+
+<div>
+
+<div>
+
+<div>
+
+<div>
+
+<h2><a name=id2955923></a><a name="_Readme:_garminmap.xml"></a><span
+class=SpellE>Readme</span>: <span class=SpellE>garminmap.xml</span></h2>
+
+</div>
+
+</div>
+
+<div class=MsoNormal align=center style='text-align:center'>
+
+<hr size=2 width="100%" align=center>
+
+</div>
+
+</div>
+
+<div>
+
+<p><b>Inhaltsverzeichnis</b></p>
+
+<p class=MsoNormal><span class=section><a href="#_Zusammenfassung">Beschreibung
+: Die <span class=SpellE>GarminMap.xml</span></a><br>
+<a href="#id2999321">Beispiel: pro Cachetyp ein Symbol</a></span></p>
+
+<p class=MsoNormal><span class=section><a href="#id2956242">Beispiel:
+verkn?pfte Bedingungen</a></span></p>
+
+<p class=MsoNormal><span class=section><a href="#id2956626">Beispiel: OZI
+Export</a></span></p>
+
+<p class=MsoNormal><span class=section><a href="#id2956711">Beispiel: <span
+class=SpellE>Garmin</span> POI (GPI)</a></span></p>
+
+<p class=MsoNormal style='margin-left:36.0pt'><span class=section><a
+href="#id2956800"><span class=SpellE>Garmin</span> POI <span class=SpellE>Loader</span></a></span></p>
+
+<p class=MsoNormal style='margin-left:36.0pt'><span class=section><a
+href="#id2956821">GPI Dateien erzeugen</a></span></p>
+
+<p class=MsoNormal><span class=section><a href="#id2956877">Anhang</a></span></p>
+
+<p class=MsoNormal style='margin-left:36.0pt'><span class=section><a
+href="#cachetypen">Cachetypen</a></span></p>
+
+<p class=MsoNormal style='margin-left:36.0pt'><span class=section><a
+href="#cachegroesse">Cachegr??en</a></span></p>
+
+</div>
+
+<div>
+
+<h2><a name="_Zusammenfassung"></a>Die <span class=SpellE>garminmap.xml</span></h2>
+
+<p>Zusammenfassung:<br>
+Die <span class=SpellE><code><span style='font-size:10.0pt'>garminmap.xml</span></code></span>
+wird<span style='mso-spacerun:yes'>? </span>bei den <span class=SpellE>Exportern</span>
+<span class=SpellE>gpxExport</span>, <span class=SpellE>locExport</span> (zum
+GPS mit <span class=SpellE>gpxBabel</span><span class=GramE>) ,</span> <span
+class=SpellE>oziExport</span> und <span class=SpellE>tplExport</span>
+verwendet.<br>
+Sie legt fest, wie Wegpunkte dargestellt werden sollen.<br>
+Die Datei <span class=SpellE><code><span style='font-size:10.0pt'>GarminPOI.zip</span></code></span><code><span
+style='font-size:10.0pt'> </span></code>enth?lt Bitmapdateien (*.<span
+class=SpellE>bmp</span>), auf die in der <span class=SpellE><code><span
+style='font-size:10.0pt'>garminmap.xml</span></code></span><code><span
+style='font-size:10.0pt'> </span></code>verwiesen wird.<br>
+Die mitgelieferten Beispieldateien <span class=SpellE><code><span
+style='font-size:10.0pt'>garminmap.xml</span></code></span> und <span
+class=SpellE><code><span style='font-size:10.0pt'>GarminPOI.zip</span></code></span><span
+style='mso-spacerun:yes'>? </span>liegen im Unterverzeichnis <span
+class=SpellE>exporticons</span>/<span class=SpellE>exporticons</span>.<br>
+Kopiere sie f?r eigene Anpassungen in das Unterverzeichnis <span class=SpellE>exporticons</span>.</p>
+
+<p>Aufbau:<br>
+Die Datei <span class=SpellE><code><span style='font-size:10.0pt'>garminmap.xml</span></code></span>
+beginnt immer mit<br>
+&lt;<span class=GramE>?<span class=SpellE>xml</span></span>
+version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;<br>
+&lt;<span class=SpellE>iconmap</span>&gt;<br>
+und endet mit<br>
+&lt;/<span class=SpellE>iconmap</span>&gt;<br>
+Jede einzelne Zeile beginnt mit <code><span style='font-size:10.0pt'>&lt;<span
+class=SpellE>icon</span></span></code> und endet mit <code><span
+style='font-size:10.0pt'>/&gt;</span></code>. <br>
+Innerhalb der Zeile finden sich dann Bedingungen und Anweisungen f?r das Icon.</p>
+
+<p>Dabei wird anhand von einem oder mehreren Kriterien wie CW &#8211; Cachetyp
+(<span class=SpellE>type=&#8220;<a href="#cachetypen"><b style='mso-bidi-font-weight:
+normal'>siehe</b></a></span></p>
+
+<span class=MsoHyperlink><b style='mso-bidi-font-weight:normal'><span
+style='font-size:12.0pt;font-family:"Times New Roman";mso-fareast-font-family:
+"Times New Roman";mso-ansi-language:DE;mso-fareast-language:DE;mso-bidi-language:
+AR-SA'><span style='mso-spacerun:yes'>?</span>Anhang</span></b></span><span
+style='font-size:12.0pt;font-family:"Times New Roman";mso-fareast-font-family:
+"Times New Roman";color:black;mso-ansi-language:DE;mso-fareast-language:DE;
+mso-bidi-language:AR-SA'>&#8220;<span class=GramE>) ,</span> Gefunden
+(found=&#8220;0/1&#8220;), Gr??e (<span class=SpellE>size=&#8220;<a
+href="#cachegroesse"><b style='mso-bidi-font-weight:normal'>siehe</b></a></span></span></div>
+
+<span class=MsoHyperlink><b style='mso-bidi-font-weight:normal'><span
+style='font-size:12.0pt;font-family:"Times New Roman";mso-fareast-font-family:
+"Times New Roman";mso-ansi-language:DE;mso-fareast-language:DE;mso-bidi-language:
+AR-SA'><span style='mso-spacerun:yes'>?</span>Anhang</span></b></span><b
+style='mso-bidi-font-weight:normal'><span style='font-size:12.0pt;font-family:
+"Times New Roman";mso-fareast-font-family:"Times New Roman";color:black;
+mso-ansi-language:DE;mso-fareast-language:DE;mso-bidi-language:AR-SA'>&#8220;</span></b><span
+style='font-size:12.0pt;font-family:"Times New Roman";mso-fareast-font-family:
+"Times New Roman";color:black;mso-ansi-language:DE;mso-fareast-language:DE;
+mso-bidi-language:AR-SA'>),<span style='mso-spacerun:yes'>? </span>Gel?nde (<span
+class=SpellE><b style='mso-bidi-font-weight:normal'>terrain</b></span><b
+style='mso-bidi-font-weight:normal'>=..</b>) , Schwierigkeit (<span
+class=SpellE><b style='mso-bidi-font-weight:normal'>difficulty</b></span><b
+style='mso-bidi-font-weight:normal'>=..</b>), oder Status (<span class=SpellE><b
+style='mso-bidi-font-weight:normal'>status=&#8220;Text</b></span><b
+style='mso-bidi-font-weight:normal'>&#8220;</b>)<span
+style='mso-spacerun:yes'>? </span>(siehe <a
+href="#_Beispiel:_verkn?pfte_Bedingungen">verkn?pfte Bedingungen</a>)<br>
+a. der Text f?r das <span class=SpellE>sym-tag</span> in der <span
+class=SpellE>gpx</span>/<span class=SpellE>loc</span> &#8211; Datei bestimmt. <span
+class=SpellE><b style='mso-bidi-font-weight:normal'>name=&#8220;xxx</b></span><b
+style='mso-bidi-font-weight:normal'>&#8220;</b> <span class=GramE>( &lt;</span><span
+class=SpellE>sym&gt;xxx</span>&lt;/<span class=SpellE>sym</span>&gt; ) (wenn
+beim <span class=SpellE>gpxExport</span> <span class=SpellE>custom</span> <span
+class=SpellE>icons</span> angekreuzt wurde, beim <span class=SpellE>locExport</span>
+falls die <span class=SpellE>garminmap.xml</span> existiert)<br>
+b. eine <span class=SpellE>bmp-Datei</span> in der <span class=SpellE>GarminPOI.zip</span>
+mit <span class=SpellE><b style='mso-bidi-font-weight:normal'>poiid=&#8220;yyy</b></span><b
+style='mso-bidi-font-weight:normal'>&#8220;</b> als Symbol f?r die <span
+class=SpellE>POI-Gruppe</span> benannt. Die wird je nach gew?hlten <span
+class=SpellE>gpxExport</span> in die <span class=SpellE>gpi-Datei</span>
+integriert oder ins Ausgabeverzeichnis kopiert wird. (siehe <a
+href="#_Beispiel:_Garmin_POI"><span class=SpellE>Garmin</span> POI</a>, Zur
+Erzeugung der <span class=SpellE>gpi-Datei</span> wird <span class=SpellE>gpsBabel</span>
+verwendet)<br>
+c. eine Farbe f?r das Symbol im <span class=SpellE>OziExplorer</span>
+festgelegt (<span class=SpellE><b style='mso-bidi-font-weight:normal'>ozicolor=&quot;wert</b></span><b
+style='mso-bidi-font-weight:normal'>&quot;) </b>(siehe <a
+href="#_Beispiel:_OZI_Export"><span class=SpellE>OziExport</span></a>)</span><span
+style='font-size:12.0pt;font-family:"Times New Roman";mso-fareast-font-family:
+"Times New Roman";mso-ansi-language:DE;mso-fareast-language:DE;mso-bidi-language:
+AR-SA'> </span></div>
+
+<p>Im <span class=SpellE>sym-tag</span> k?nnen fest eingebaute Symbole (z.B. <span
+class=SpellE>name=&quot;Parking</span> <span class=SpellE>Area</span>&quot;)
+oder benutzerdefinierte Symbole (z.B. <span class=SpellE>name=&quot;Custom</span>
+6&quot;) <span class=SpellE>referenziert</span> sein. Diese Symbole werden zur
+Darstellung des Cache auf dem <span class=SpellE>Garmin</span> oder anderswo
+verwendet. F?r die Installation benutzerdefinierter Symbole (<span
+class=SpellE>Custom</span> Symbols) auf dem <span class=SpellE>Garmin</span>
+oder anderswo siehe z.B. bei <span class=SpellE>garmin</span> oder hier <a
+href="http://www.geoclub.de/viewtopic.php?t=10413">http://www.geoclub.de/viewtopic.php?t=10413</a>.</p>
+
+</div>
+
+<p>In der Datei <span class=SpellE><code><span style='font-size:10.0pt'>Garmin</span></code></span><code><span
+style='font-size:10.0pt'> User <span class=SpellE>Symbols.zip</span></span></code>
+(und <span class=SpellE><code><span style='font-size:10.0pt'>Garmin.zip</span></code></span><code><span
+style='font-size:10.0pt'>)</span></code> findest du einige Beispiele, die im
+Folgenden kurz erkl?rt werden sollen.</p>
+
+<div>
+
+<div>
+
+<div>
+
+<div>
+
+<h2><a name=id2999321></a>Beispiel: pro Cachetyp ein Symbol (<span
+class=SpellE>loc-Export</span>, Export zum GPS mit <span class=SpellE>gpsBabel</span>,
+<span class=SpellE>gpxExporter</span> &#8211; Haken bei <span class=SpellE>Custom</span>
+Icons)</h2>
+
+</div>
+
+</div>
+
+</div>
+
+<p>Im diesem Beispiel wird einfach jedem Cachetyp ein eigenes Symbol zugeordnet</p>
+
+<pre><span class=GramE><span lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;?xml</span></span><span
+lang=EN-GB style='mso-ansi-language:EN-GB'> version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;<span class=SpellE><span
+class=GramE>iconmap</span></span>&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;0&quot; name=&quot;Custom 18&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;2&quot; name=&quot;Custom 0&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;3&quot; name=&quot;Custom 1&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;4&quot; name=&quot;Custom 6&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;5&quot; name=&quot;Custom 3&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;6&quot; name=&quot;Custom 4&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;8&quot; name=&quot;Custom 2&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;11&quot; name=&quot;Custom 7&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;12&quot; name=&quot;Custom 10&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;13&quot; name=&quot;Custom 5&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;50&quot; name=&quot;Parking Area&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;51&quot; name=&quot;Custom 11&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;52&quot; name=&quot;Custom 12&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;53&quot; name=&quot;Custom 16&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;54&quot; name=&quot;Trail Head&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;55&quot; name=&quot;Custom 14&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;100&quot; name=&quot;Custom 4&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;101&quot; name=&quot;Custom 17&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;102&quot; name=&quot;Custom 18&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;103&quot; name=&quot;Custom 20&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;104&quot; name=&quot;Custom 8&quot; /&gt;<o:p></o:p></span></pre><pre>&lt;/<span
+class=SpellE>iconmap</span>&gt;</pre>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>In
+unserem Beispiel ist <code><span style='font-size:10.0pt'>type=&quot;2&quot;</span></code>
+eine Bedingung, die auf alle Traditional Caches zutrifft und <span
+class=SpellE><code><span style='font-size:10.0pt'>name=&quot;Custom</span></code></span><code><span
+style='font-size:10.0pt'> 0&quot;</span></code> die Anweisung die ausgef?hrt
+wird, wenn die Bedingung erf?llt ist. In diesem Fall wird auf einem <span
+class=SpellE>Garmin</span> Handheld oder in <span class=SpellE>Mapsource</span>
+das Benutzerdefinierte Symbol 0 angezeigt. Eine Liste aller Cachetypen findest
+du im <a href="#cachetypen" title=Cachetypen>Anhang</a>. </p>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Wie
+die Zeile </p>
+
+<pre><span lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;50&quot; name=&quot;Parking Area&quot; /&gt;<o:p></o:p></span></pre>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>zeiget
+muss man sich bei den anzuzeigenden Symbolen nicht auf die Benutzerdefinierten
+beschr?nken, sondern kann auch die in jedem <span class=SpellE>Garmin</span>
+Handheld fest eingebauten Symbole benutzen. Auf diese Weise k?nnen auch Benutzer
+von Ger?ten die das Anlegen von Benutzerdefinierten Symbolen nicht unterst?tzen
+von der <span class=SpellE>Garminmap</span> profitieren und zumindest
+unterschiedliche Symbole darstellen lassen. </p>
+
+</div>
+
+<div>
+
+<div>
+
+<div>
+
+<div>
+
+<h2 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
+name=id2956242></a><a name="_Beispiel:_verkn?pfte_Bedingungen"></a>Beispiel:
+verkn?pfte Bedingungen</h2>
+
+</div>
+
+</div>
+
+</div>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Neben
+der <span class=GramE>einfach</span> Zuweisung aus dem ersten Beispiel lassen
+sich mit der <span class=SpellE><code><span style='font-size:10.0pt'>garminmap.xml</span></code></span>
+auch komplexere Bedingungen f?r die Zuweisung eines Symbols erstellen. Dabei
+sind folgende Bedingungen m?glich und beliebig kombinierbar:</p>
+
+<div>
+
+<p style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l0 level1 lfo2;
+tab-stops:list 36.0pt'><![if !supportLists]><span style='font-size:10.0pt;
+mso-bidi-font-size:12.0pt;font-family:Symbol;mso-fareast-font-family:Symbol;
+mso-bidi-font-family:Symbol'><span style='mso-list:Ignore'>?<span
+style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
+</span></span></span><![endif]><span class=SpellE>type</span>= Typ des Caches.
+F?r m?gliche Werte siehe <a href="#cachetypen" title=Cachetypen>Liste</a>.</p>
+
+<p style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l0 level1 lfo2;
+tab-stops:list 36.0pt'><![if !supportLists]><span style='font-size:10.0pt;
+mso-bidi-font-size:12.0pt;font-family:Symbol;mso-fareast-font-family:Symbol;
+mso-bidi-font-family:Symbol'><span style='mso-list:Ignore'>?<span
+style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
+</span></span></span><![endif]><span class=SpellE>size</span>= Gr??e des
+Cachebeh?lters. F?r m?gliche Werte siehe <a href="#cachegroesse"
+title=Cachegr??en>Liste</a></p>
+
+<p style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l0 level1 lfo2;
+tab-stops:list 36.0pt'><![if !supportLists]><span style='font-size:10.0pt;
+mso-bidi-font-size:12.0pt;font-family:Symbol;mso-fareast-font-family:Symbol;
+mso-bidi-font-family:Symbol'><span style='mso-list:Ignore'>?<span
+style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
+</span></span></span><![endif]><span class=SpellE>terrain</span>= 10, 15, 20,
+25, 30, 35, 40, 45 oder 50. <span class=SpellE>Custom</span> und Additional <span
+class=SpellE>Waypoints</span> haben keine Gel?ndebewertung</p>
+
+<p style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l0 level1 lfo2;
+tab-stops:list 36.0pt'><![if !supportLists]><span style='font-size:10.0pt;
+mso-bidi-font-size:12.0pt;font-family:Symbol;mso-fareast-font-family:Symbol;
+mso-bidi-font-family:Symbol'><span style='mso-list:Ignore'>?<span
+style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
+</span></span></span><![endif]><span class=SpellE>difficulty</span>= 10, 15,
+20, 25, 30, 35, 40, 45 oder 50. <span class=SpellE>Custom</span> und Additional
+<span class=SpellE>Waypoints</span> haben keine <span class=SpellE>Schwierugkeit</span></p>
+
+<p style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l0 level1 lfo2;
+tab-stops:list 36.0pt'><![if !supportLists]><span style='font-size:10.0pt;
+mso-bidi-font-size:12.0pt;font-family:Symbol;mso-fareast-font-family:Symbol;
+mso-bidi-font-family:Symbol'><span style='mso-list:Ignore'>?<span
+style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
+</span></span></span><![endif]><span class=SpellE>found</span>= 1 (gefunden)
+oder 0 (nicht gefunden). Nicht verwechseln mit <span class=SpellE>status</span></p>
+
+<p style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l0 level1 lfo2;
+tab-stops:list 36.0pt'><![if !supportLists]><span style='font-size:10.0pt;
+mso-bidi-font-size:12.0pt;font-family:Symbol;mso-fareast-font-family:Symbol;
+mso-bidi-font-family:Symbol'><span style='mso-list:Ignore'>?<span
+style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
+</span></span></span><![endif]><span class=SpellE>status</span>= Inhalt des
+Statusfeldes im <span class=SpellE>Detailspanel</span>. Es wird nur gegen den
+Anfang des Feldes gepr?ft. <span class=SpellE>status=&quot;Nacht</span>&quot;
+findet als Nachtcache und Nachtisch!</p>
+
+</div>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Wichtig
+dabei ist, dass die Werte der Bedingungen immer mit doppelten <span
+class=SpellE>Anf?rungszeichen</span> (&quot;) umschlossen werden.</p>
+
+<pre>&lt;<span class=SpellE>icon</span> type=&quot;2&quot; terrain=&quot;50&quot; <span
+class=SpellE>name=&quot;XXXX</span>&quot; /&gt;</pre>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>weist
+allen <span class=SpellE>caches</span> vom Typ 2 (Traditional) und der
+Gel?ndewertung 50 (5) das Symbol mit dem Namen zu.</p>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Weil
+man h?ufig auch f?r Gel?nde 4.5 eine <span class=GramE>erweitere Ausr?stung</span>
+braucht, k?nnte man das auch wie folgt <span class=SpellE>erg?mzen</span> </p>
+
+<pre>&lt;<span class=SpellE>icon</span> type=&quot;2&quot; terrain=&quot;50&quot; <span
+class=SpellE>name=&quot;XXXX</span>&quot; /&gt;</pre><pre>&lt;<span
+class=SpellE>icon</span> type=&quot;2&quot; terrain=&quot;45&quot; <span
+class=SpellE>name=&quot;XXXX</span>&quot; /&gt;</pre>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Damit
+alle anderen <span class=SpellE>Tradis</span> auch ein Symbol bekommen, k?nnte
+die komplette Sequenz f?r <span class=SpellE>Tradis</span> dann so aussehen:</p>
+
+<pre><span lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;2&quot; terrain=&quot;50&quot; name=&quot;XXXX&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;2&quot; terrain=&quot;45&quot; name=&quot;XXXX&quot; /&gt;<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;2&quot; name=&quot;Custom 0&quot; /&gt;<o:p></o:p></span></pre>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Alle
+<span class=SpellE>Traids</span> mit Gel?nde 5 oder 4.5 bekommen das Symbol
+XXXX alle ?brigen <span class=SpellE>Tradis</span> das Symbol <span
+class=SpellE>Custom</span> 0. Du kannst in einer Reihe beliebig viele
+Bedingungen benutzen. Die Reihen werden dabei in der Reihenfolge abgearbeitet
+in der sie in der <span class=SpellE>datei</span> stehen. Die Reihen mit
+komplexeren Bedingungen sollten also immer vor den einfachen Regeln stehen. Bei
+einem Eintrag von </p>
+
+<pre>&lt;<span class=SpellE>icon</span> type=&quot;2&quot; <span class=SpellE>name=&quot;Custom</span> 0&quot; /&gt;</pre><pre>&lt;<span
+class=SpellE>icon</span> type=&quot;2&quot; terrain=&quot;50&quot; <span
+class=SpellE>name=&quot;XXXX</span>&quot; /&gt;</pre><pre>&lt;<span
+class=SpellE>icon</span> type=&quot;2&quot; terrain=&quot;45&quot; <span
+class=SpellE>name=&quot;XXXX</span>&quot; /&gt;</pre>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>w?rden
+die speziellen Regeln f?r das Gel?nde nie benutzt werden, da alle <span
+class=SpellE>Tradis</span> bereits von der ersten Regel erfasst w?rden.</p>
+
+</div>
+
+<div>
+
+<div>
+
+<div>
+
+<div>
+
+<h2 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
+name=id2956626></a><a name="_Beispiel:_OZI_Export"></a>Beispiel: OZI Export</h2>
+
+</div>
+
+</div>
+
+</div>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Die
+Datei <span class=SpellE><code><span style='font-size:10.0pt'>garminmap.xml</span></code></span>
+kann auch zusammen mit dem OZI Export benutzt werden. In dem Fall <span
+class=SpellE>heisst</span> die Anweisung aber nicht <span class=SpellE><code><span
+style='font-size:10.0pt'>name</span></code></span><code><span style='font-size:
+10.0pt'>=&quot;&quot;</span></code> sondern <span class=SpellE><code><span
+style='font-size:10.0pt'>ozicolor</span></code></span><code><span
+style='font-size:10.0pt'>=&quot;&quot;</span></code>. Dabei steht <span
+class=SpellE>ozicolor</span> f?r die verwendete Hintergrundfarbe bei der
+Darstellung. Die Vordergrundfarbe ist immer Schwarz.</p>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Ein
+Traditional Cache k?nnte durch folgende Regel dargestellt werden: </p>
+
+<pre>&lt;<span class=SpellE>icon</span> type=&quot;2&quot; ozicolor=&quot;65280&quot; /&gt;</pre>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Ein
+Traditional w?rde also in Gr?n dargestellt, denn alle Farbangaben sind die
+Dezimalschreibweisen der eigentlich hexadezimalen RGB Farben. 65280 entspricht
+dabei dem Farbcode 00FF00.</p>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Im
+Internet findest du zahlreiche RGB Farbtabellen aus denen du dir die Farben mit
+denen deine Wegpunkte dargestellt werden sollen aussuchen kannst. Mit dem
+Taschenrechner, den dein Betriebssystem mitliefert, k?nnen die dort angegeben
+Hexadezimalwerte meist bequem in das dezimale Format umgerechnet werden. Versuche
+Farben zu verwenden, die sich gut unterscheiden lassen.</p>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Genauso
+wie Bedingungen verkn?pft werden k?nnen, k?nnen auch Anweisungen verkn?pft
+werden. Solltest du also eine angepasste Darstellung f?r <span class=SpellE>Garmin</span>
+und <span class=SpellE>Ozi</span> haben wollen, ben?tigst du nicht zwei
+verschiedene Dateien, sondern kannst beides in einer einzigen Datei festlegen.
+F?r den Traditional Cache aus unserem Beispiel k?nnte das dann so aussehen: </p>
+
+<pre><span lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;2&quot; name=&quot;Custom 0&quot; <span
+class=SpellE>ozicolor</span>=&quot;65280&quot; /&gt;<o:p></o:p></span></pre></div>
+
+<div>
+
+<div>
+
+<div>
+
+<div>
+
+<h2 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
+name=id2956711></a><a name="_Beispiel:_Garmin_POI"></a>Beispiel: <span
+class=SpellE>Garmin</span> POI (GPI)</h2>
+
+</div>
+
+</div>
+
+</div>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Der
+GPX <span class=SpellE>Exporter</span> kann die <span class=SpellE><code><span
+style='font-size:10.0pt'>garminmap.xml</span></code></span> auch verwendet
+werden um Einzeldateien f?r den <span class=SpellE>Garmin</span> POI <span
+class=SpellE>Loader</span> oder <span class=SpellE>diekt</span> GPI <span
+class=SpellE>dateien</span> f?r die Verwendung auf dem <span class=SpellE>Garmin</span>
+Handheld zu erzeugen. Dazu wurde die Anweisung <span class=SpellE><code><span
+style='font-size:10.0pt'>poiid</span></code></span><code><span
+style='font-size:10.0pt'>=&quot;&quot;</span></code> eingef?hrt.</p>
+
+<div style='margin-left:36.0pt;margin-right:36.0pt'>
+
+<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Wichtig</h3>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Nicht
+alle <span class=SpellE>Garmin</span> Handhelds unterst?tzen die Verwendung von
+<span class=SpellE>Custom</span> <span class=SpellE>Points</span> of <span
+class=SpellE>Interest</span>. Bitte schau im Handbuch deines Ger?tes nach, ob
+die Funktion unterst?tzt wird bevor du sie benutzt.</p>
+
+</div>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Bei
+der <span class=SpellE><code><span style='font-size:10.0pt'>poiid</span></code></span>
+handelt es sich um einen Freitext der von dir individuell festgelegt werden
+kann. Da einige <span class=SpellE>Garmin</span> Handhelds jedoch
+Schwierigkeiten bei der Darstellung von Sonderzeichen haben, solltest du dich
+bei der Vergabe der ID auf die Zeichen A-z, a-z, 0-9, sowie - und _
+beschr?nken.</p>
+
+<pre>&lt;<span class=SpellE>icon</span> type=&quot;2&quot; <span class=SpellE>poiid=&quot;Traditional</span>&quot; /&gt;</pre>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>k?nnte
+also eine Regel sein, die festlegt wie w?hrend eines POI Exports Traditional
+Caches behandelt werden. Nat?rlich lassen sich auch hier wieder die
+verschiednen Anweisungen kombinieren, so <span class=SpellE>da?</span> eine
+solche Regel auch so aussehen k?nnte: </p>
+
+<pre><span lang=EN-GB style='mso-ansi-language:EN-GB'>&lt;icon type=&quot;2&quot; <span
+class=SpellE>poiid</span>=&quot;Traditional&quot; <span class=SpellE>ozicolor</span>=&quot;65280&quot; name=&quot;Custom 0&quot; /&gt;<o:p></o:p></span></pre>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Beim
+Export wird der vergebenen ID noch ein <span class=SpellE>Prefix</span>
+vorangestellt, welche du im Exportdialog vergibst. <span class=SpellE>Prefix</span>
+und <span class=SpellE><code><span style='font-size:10.0pt'>piid</span></code></span>
+sollten gemeinsam auf das Display deines Handhelds passen. </p>
+
+<div>
+
+<div>
+
+<div>
+
+<div>
+
+<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
+name=id2956800></a><span class=SpellE><span lang=EN-GB style='mso-ansi-language:
+EN-GB'>Garmin</span></span><span lang=EN-GB style='mso-ansi-language:EN-GB'>
+POI Loader (<span class=SpellE>gpx</span> Export &#8211; <span class=GramE>Style
+:</span> Compact &#8211; Output : Separate GPX)<o:p></o:p></span></h3>
+
+</div>
+
+</div>
+
+</div>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Sofern
+du den <span class=SpellE>Garmin</span> POI <span class=SpellE>Loader</span>
+benutzen m?chtest um deine Wegpunkte sp?ter auf den Handheld zu laden, musst du
+nichts weiter tun. Der <span class=SpellE>Exporter</span> wird im angegebenen
+Verzeichnis Dateien mit dem Namen <span class=SpellE><code><span
+style='font-size:10.0pt'>Prefix-PoiId.gpx</span></code></span> <span
+class=SpellE>erzuegen</span>, die du weiterverarbeiten kannst.</p>
+
+</div>
+
+<div>
+
+<div>
+
+<div>
+
+<div>
+
+<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
+name=id2956821></a>GPI Dateien erzeugen (<span class=SpellE>gpx</span> Export &#8211;
+Style : Compact &#8211; Output : POI)<o:p></o:p></h3>
+
+</div>
+
+</div>
+
+</div>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
+class=SpellE>Garmin</span> GPI Dateien enthalten neben den
+Wegpunktinformationen immer auch eine Grafik mit der der Wegpunkt auf dem
+Bildschirm dargestellt wird. Damit eine korrekte GPI Datei erzeugt werden kann,
+muss in dem Verzeichnis in dem die <span class=SpellE><code><span
+style='font-size:10.0pt'>garminmap.xml</span></code></span> liegt auch noch
+eine Datei mit dem Namen <span class=SpellE><code><span style='font-size:10.0pt'>GarminPOI.zip</span></code></span>
+existieren. In dieser Datei muss sich zu jeder von dir vergebenen <span
+class=SpellE><code><span style='font-size:10.0pt'>poiid</span></code></span>
+eine Datei mit dem Namen <span class=SpellE><code><span style='font-size:10.0pt'>poiid.bmp</span></code></span>
+befinden. Lautet eine deiner Anweisungen <span class=SpellE><code><span
+style='font-size:10.0pt'>poiid=&quot;Traditional</span></code></span><code><span
+style='font-size:10.0pt'>&quot;</span></code> muss sich in der <span
+class=SpellE><code><span style='font-size:10.0pt'>GarminPOI.zip</span></code></span>
+eine <span class=SpellE><code><span style='font-size:10.0pt'>Traditional.bmp</span></code></span>
+befinden.</p>
+
+</div>
+
+</div>
+
+<div>
+
+<div>
+
+<div>
+
+<div>
+
+<h2 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
+name=id2956877></a>Anhang</h2>
+
+</div>
+
+</div>
+
+</div>
+
+<div>
+
+<div>
+
+<div>
+
+<div>
+
+<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
+name=cachetypen></a>Cachetypen</h3>
+
+</div>
+
+</div>
+
+</div>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
+class=SpellE>Cachtypen</span> werden innerhalb der Bedingungen durch einen
+Zahlenwert aus der folgenden Tabelle repr?sentiert</p>
+
+<pre><span lang=EN-GB style='mso-ansi-language:EN-GB'>0 <span class=GramE>Custom</span><o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>2 Traditional<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>3 <span class=SpellE><span
+class=GramE>Multicache</span></span><o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>4 Virtual <span class=GramE>Cache</span><o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>5 <span class=GramE>Letterbox</span><o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>6 Event Cache<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>8 Unknown / Mystery Cache<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>11 Webcam Cache<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>12 <span class=SpellE>Locationless</span> (Reverse) <span
+class=GramE>Cache</span><o:p></o:p></span></pre><pre><span lang=EN-GB
+style='mso-ansi-language:EN-GB'>13 CITO <span class=GramE>Event</span><o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>100 Mega <span class=GramE>Event</span><o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>101 <span class=SpellE>WhereIGo</span> cache<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>102 Project Ape Cache<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>103 Adventure Maze Exhibit<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>104 <span class=SpellE>Earthcache</span><o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>50 Additional Waypoint Parking<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>51 Additional Waypoint Stage of a <span
+class=SpellE>Multicache</span><o:p></o:p></span></pre><pre><span lang=EN-GB
+style='mso-ansi-language:EN-GB'>52 Additional Waypoint Question to Answer<o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>53 Additional Waypoint Final<o:p></o:p></span></pre><pre><span
+class=GramE><span lang=EN-GB style='mso-ansi-language:EN-GB'>54 Additional Waypoint Trailhead</span></span><span
+lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></pre><pre><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>55 Additional Waypoint Reference<o:p></o:p></span></pre></div>
+
+<div>
+
+<div>
+
+<div>
+
+<div>
+
+<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
+name=cachegroesse></a>Cachegr??en</h3>
+
+</div>
+
+</div>
+
+</div>
+
+<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Cachegr??en
+werden innerhalb der Bedingungen durch einen Buchstaben aus der folgenden
+Tabelle repr?sentiert. Ob gro? oder klein <span class=SpellE>geschreiben</span>
+spielt dabei keine Rolle.</p>
+
+<pre>m <span class=SpellE>Micro</span></pre><pre><span class=GramE><span
+lang=EN-GB style='mso-ansi-language:EN-GB'>s</span></span><span lang=EN-GB
+style='mso-ansi-language:EN-GB'> Small<o:p></o:p></span></pre><pre><span
+class=GramE><span lang=EN-GB style='mso-ansi-language:EN-GB'>r</span></span><span
+lang=EN-GB style='mso-ansi-language:EN-GB'> Regular<o:p></o:p></span></pre><pre><span
+class=GramE><span lang=EN-GB style='mso-ansi-language:EN-GB'>l</span></span><span
+lang=EN-GB style='mso-ansi-language:EN-GB'> Large<o:p></o:p></span></pre><pre><span
+class=GramE><span lang=EN-GB style='mso-ansi-language:EN-GB'>v</span></span><span
+lang=EN-GB style='mso-ansi-language:EN-GB'> Very Large<o:p></o:p></span></pre><pre><span
+class=GramE><span lang=EN-GB style='mso-ansi-language:EN-GB'>n</span></span><span
+lang=EN-GB style='mso-ansi-language:EN-GB'> Not Chosen / Other / Virtual / None<o:p></o:p></span></pre></div>
+
+</div>
+
+</body>
+
+</html>

Modified: branches/r1.2/res_noewe/languages/DE.cfg
===================================================================
--- branches/r1.2/res_noewe/languages/DE.cfg	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/res_noewe/languages/DE.cfg	2010-11-06 16:00:15 UTC (rev 2846)
@@ -145,7 +145,7 @@
 221=Filter ??berschreiben?
 222=Der Filter existiert schon. ??berschreiben?
 223=Filter l??schen?
-224= - Den gespeicherten Filter l??schen?
+224=+- Den gespeicherten Filter l??schen?
 225=Auch in Logs
 226=Das Profil kann nicht gel??scht werden.
 227=Das aktive Profil kann nicht gel??scht werden.
@@ -509,7 +509,7 @@
 1621=Fehler beim Interpretieren\n der Update-Datei,\nDies ist vermutlich ein Fehler bei Opencaching.de\nSp??ter erneut versuchen\n Status:
 1622=Gefundene Caches nicht laden
 1623=Importiere h??chstens
-1624= Cache (leer=alle)
+1624=+Cache (leer=alle)
 1625=TBs laden
 1626=Speichere bis zu x Logs:
 1627=Alle Caches
@@ -786,6 +786,7 @@
 2678=Tankstelle nahebei
 2679=keine Verpflegungsm??glichkeit
 2680=Verpflegungsm??glichkeit nahebei
+2681=RFID / Funk Ausr??stung
 3000=Schlie??en
 4000=Geladene Caches:+
 4001=GPX-Dateien von Opencaching enthalten keine Informationen zu Bildern, sie werden nicht heruntergeladen. Am besten Caches von Opencaching holen per Men?? /Anwendung/Import/von Opencaching
@@ -802,10 +803,10 @@
 4110=Lade
 4111=Koordinaten m??ssen in dem Format N XX XX,XXX E XXX XX,XXX eingegeben werden
 4112=E/A-Fehler beim Kopieren von:+
-4113= nach:+
-4114= Fehler:+
+4113=+nach:+
+4114=+Fehler:+
 4115=Fehler: Kann Bild nicht dekodieren:+
-4116= - Bild nicht kopiert
+4116=+- Bild nicht kopiert
 4117=Fehler beim Importieren der .map-Datei:+
 4118=E/A-Fehler beim Lesen oder Schreiben der Kalibrierungsdatei
 4119=Keine Kalibrierungsdatei gefunden f??r:+
@@ -821,7 +822,7 @@
 4211=Keine+
 4212=??bersichtlichere
 4213=detailliertere
-4214= Karte verf??gbar
+4214=+Karte verf??gbar
 4215=Keine Caches mit H??ckchen ausgew??hlt
 4216=Lade Karte...
 4217=Konnte zu folgender Datei geh??rendes Bild nicht finden:
@@ -888,7 +889,7 @@
 4295=Mittelpunkt
 4296=Detaillierung
 4300=Leer 1 Punkt =+
-4301= meter
+4301=+meter
 4302=Breite/L??nge au??erhalb des zul??ssigen Bereiches beim Lesen von+
 4303=Zu wenig Zeilen in Datei+
 4304=Zu wenig Punkte, um die Karte zu kalibrieren
@@ -942,7 +943,7 @@
 4821=WebMapService: Eigenschaft >ImageFileExtension:< fehlt in Datei:
 4822=Bereich:
 4823=wird vom Dienst:
-4824= nicht abgedeckt, Dienstbereich:
+4824=+nicht abgedeckt, Dienstbereich:
 4825=Ma??stab
 4826=wird von diesem Kartendienst nicht unterst??tzt, unterst??tzter Ma??stabsbereich:
 4827=(gemessen vertikal in Metern pro Pixel)
@@ -950,9 +951,9 @@
 4829=getUrlForBoundingBox: Punkt:
 4830=Kein passender Gau??-Kr??ger-Streifen in der EPSG-Codeliste in der .wms-Datei
 4831=getMapInfoObject: Koordinatensystem wird von Cachewolf nicht unterst??tzt:
-4900= ist keine deutsche Gau??-Kr??ger-Koordinate
+4900=+ist keine deutsche Gau??-Kr??ger-Koordinate
 4920=EPSG-Code+
-4921= nicht unterst??tzt
+4921=+nicht unterst??tzt
 4922=EPSG code fehlt in:+
 4923=fromWgs84: EPSG code+
 4924=ToWgs84: EPSG code+
@@ -976,13 +977,13 @@
 5509=Zentrumskoordinaten nicht gesetzt
 5510=Import Optionen
 5511=Gefunden+
-5512= \nneue / zu aktualisierende Caches
+5512=\nneue / zu aktualisierende Caches
 5513=Laden von:+
 5514=Travelbug:+
 5515=Fehler beim Laden des Caches.\nBitte ??berpr??fen Sie Ihre Internetverbindung und ob als Sprache bei GC.com English ausgew??hlt ist.\nNoch einmal versuchen?
-5516= Cachebeschreibungen\nkonnten nicht geladen werden.
+5516=+Cachebeschreibungen\nkonnten nicht geladen werden.
 5517=Aktualisierungen importieren?
-5518= Caches in der Datenbank sollten aktualisiert werden. Jetzt aktualisieren?
+5518=+Caches in der Datenbank sollten aktualisiert werden. Jetzt aktualisieren?
 5519=Information
 5520=Nur das eingestellte Maximum an Caches wurde geladen.\nWiederholen sie das Spidern sp??ter um weitere Caches zu laden.\nEs wurden keine vorhandenen Caches aktualisiert.
 5521=Seite+

Modified: branches/r1.2/res_noewe/languages/EN.cfg
===================================================================
--- branches/r1.2/res_noewe/languages/EN.cfg	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/res_noewe/languages/EN.cfg	2010-11-06 16:00:15 UTC (rev 2846)
@@ -145,7 +145,7 @@
 221=Overwrite filter?
 222=This filter already exists. Overwrite it?
 223=Delete filter?
-224= - Delete the saved filter?
+224=+- Delete the saved filter?
 225=Also in logs
 226=Profile cannot be deleted.
 227=active profile cannot be deleted.
@@ -509,7 +509,7 @@
 1621=Error while interpreting data\n from Opencaching.de,\nThis is most probaly a bug at Opencaching.de\nRetry later\n Status:
 1622=Exclude found caches
 1623=Import upto:
-1624= caches (empty=all)
+1624=+caches (empty=all)
 1625=Download TBs
 1626=Max. save logs:
 1627=All caches
@@ -786,6 +786,7 @@
 2678=Fuel nearby
 2679=no Food nearby
 2680=Food nearby
+2681=wireless beacon
 3000=Close
 4000=Loaded caches:+
 4001=GPX files from opencaching don't contain information of images, they cannot be loaded. Best you get caches from opencaching by menu /Application/Import/Download from Opencaching
@@ -802,10 +803,10 @@
 4110=loading
 4111=Coordinates must be entered in the format N XX XX.XXX E XXX XX.XXX
 4112=IO-Error while copying image from:+
-4113=to:+
-4114= error:+
+4113=+to:+
+4114=+error:+
 4115=Error: could not decode image:+
-4116= - image not copied
+4116=+- image not copied
 4117=Error while importing .map-file:+
 4118=IO-Error while reading or writing calibration file
 4119=No calibration file found for:+
@@ -821,7 +822,7 @@
 4211=No+
 4212=less
 4213=more
-4214= detailed map available
+4214=+detailed map available
 4215=No caches selected by a tick
 4216=Loading map...
 4217=Could not find image associated with:
@@ -888,7 +889,7 @@
 4295=center
 4296=detailing
 4300=empty 1 Pixel =+
-4301= meters
+4301=+meters
 4302=Lat/Lon out of range while reading+
 4303=not enough lines in file+
 4304=not enough points to calibrate the map
@@ -950,9 +951,9 @@
 4829=getUrlForBoundingBox: Point:
 4830=No matching Gau??-Kr??ger-Stripe in the EPSG-code list in the .wms
 4831=getMapInfoObject: Coordinate system not supported by Cachewolf:
-4900= is not a german Gauss-Krueger coordinate
+4900=+is not a german Gauss-Krueger coordinate
 4920=EPSG code+
-4921= not supported
+4921=+not supported
 4922=EPSG code missing in:+
 4923=fromWgs84: EPSG code+
 4924=ToWgs84: EPSG code+
@@ -976,13 +977,13 @@
 5509=Coordinates for centre must be set
 5510=Spider Options
 5511=Found+
-5512= new/update caches
+5512=\nnew / update caches
 5513=Loading:+
 5514=Getting bug:+
 5515=Failed to load cache.\nPlease check your internet connection.\nRetry?
-5516= cache descriptions\ncould not be loaded.
+5516=+cache descriptions\ncould not be loaded.
 5517=Spider updates?
-5518= caches in database need an update. Update now?
+5518=+caches in database need an update. Update now?
 5519=Information
 5520=Only the given maximum of caches were loaded.\nRepeat spidering later to load more caches.\nNo already existing caches were updated.
 5521=Page+

Modified: branches/r1.2/res_noewe/languages/FR.cfg
===================================================================
--- branches/r1.2/res_noewe/languages/FR.cfg	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/res_noewe/languages/FR.cfg	2010-11-06 16:00:15 UTC (rev 2846)
@@ -145,7 +145,7 @@
 221=??craser filtre?
 222=Ce filtre existe d??j??. ??craser-le?
 223=Effacer filtre?
-224= - Effacer ce filtre enregistr???
+224=+- Effacer ce filtre enregistr???
 225=Aussi dans logs
 226=[Profile cannot be deleted.]
 227=[active Profile cannot be deleted.]
@@ -509,7 +509,7 @@
 1621=Erreur d'interpretation du fichier mise ?? jour.\nC'est probablement un erreur d'opencaching.de\nEssayez encore une fois plus tard.\n Statut:
 1622=Pas t??l??charger caches trouv??es
 1623=Max Quantit??:
-1624=  caches
+1624=+caches
 1625=Importe TBs
 1626=Max Activit??:
 1627=Tous les caches
@@ -786,6 +786,7 @@
 2678=carburant ?? proximit??
 2679=pas de nourriture ?? proximit??
 2680=la nourriture ?? proximit??
+2681=Chirp (Garmin)
 3000=Fermer
 4000=Caches charg??es:
 4001=GPX fichiers ?? partir Opencaching ne contiennent pas d'informations d'images, ils ne peuvent pas ??tre charg??. Pour le meilleur vous obtenez des caches de Opencaching par le menu /Application/importation/Download from Opencaching
@@ -802,10 +803,10 @@
 4110=Chargeant
 4111=Les coordonn??es doivent ??tre en format N XX XX,XXX E XXX XX,XXX
 4112=Erreur E/S en copyant:+
-4113= ??:+
-4114= Erreur:+
+4113=+??:+
+4114=+Erreur:+
 4115=Erreur: Ne peut pas d??coder image:+
-4116= - Image pas copi??e
+4116=+- Image pas copi??e
 4117=Erreur en important fichier .map:+
 4118=Erreur E/S en lisant ou ??crivant le fichier de calibrage
 4119=Pas trouv?? de fichier de calibrage pour:+
@@ -821,7 +822,7 @@
 4211=Pas de carte+
 4212=plus claire et plus
 4213=d??taill??e
-4214= disponible
+4214=+disponible
 4215=Pas de caches coch??es
 4216=Chargeant carte...
 4217=N'a pas pu trouv?? fichier pour cette image:
@@ -888,7 +889,7 @@
 4295=center
 4296=detailing
 4300=1 pixel vide =+
-4301= metre
+4301=+metre
 4302=Latitude/Longitude hors de l'??tendue valide en chargeant+
 4303=Trop peu de lignes en fichier+
 4304=Trop peu de points pour calibrer la carte
@@ -950,9 +951,9 @@
 4829=getUrlForBoundingBox: Point:
 4830=Pas de bande Gau??-Kr??ger dans la liste de codes EPSG dans le fichier .wms
 4831=getMapInfoObject: Syst??me de coordonn??es n'est pas soutenue par CacheWolf:
-4900= n'est pas une coordonn??e allemande Gau??-Kr??ger
+4900=+n'est pas une coordonn??e allemande Gau??-Kr??ger
 4920=Code EPSG+
-4921= pas soutenu
+4921=+pas soutenu
 4922=Code EPSG manque en:+
 4923=fromWgs84: code EPSG+
 4924=ToWgs84: code EPSG+
@@ -976,13 +977,13 @@
 5509=Coordonn??es de centre pas mis
 5510=Options spider
 5511=Trouv??e+
-5512= nouveau/mettre ?? jour Caches
+5512=\nnouveau / mettre ?? jour Caches
 5513=Chargeant:+
 5514=Travel Bug:+
 5515=Erreur en chargeant la cache.\nMerci de v??rifier votre connexion internet et si vous avez language englais chez gc.com..\nContinuer d'essayer?
-5516= descriptions cache\nne pouvait pas ??tre charg??.
+5516=+descriptions cache\nne pouvait pas ??tre charg??.
 5517=Spider mises ?? jour?
-5518= caches en base de donn??es ont besoin d'une mise ?? jour. Mettre ?? jour maintenant?
+5518=+caches en base de donn??es ont besoin d'une mise ?? jour. Mettre ?? jour maintenant?
 5519=Information
 5520=Seulement le maximum compte tenu des caches ont ??t?? charg??s.\nR??p??tez spidering plus tard ?? la charge des caches plus.\nNo caches d??j?? existants ont ??t?? mis ?? jour.
 5521=Page+

Modified: branches/r1.2/res_noewe/languages/NL.cfg
===================================================================
--- branches/r1.2/res_noewe/languages/NL.cfg	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/res_noewe/languages/NL.cfg	2010-11-06 16:00:15 UTC (rev 2846)
@@ -145,7 +145,7 @@
 221=Overschrijf filter?
 222=De filter exiteerd al. Overschrijven?
 223=Filter verwijderen?
-224= - Deze filter verwijderen?
+224=+- Deze filter verwijderen?
 225=Ook in logs
 226=[Profile cannot be deleted.]
 227=[active Profile cannot be deleted.]
@@ -509,7 +509,7 @@
 1621=Fout tijdens interpreteren data\n van Opencaching.de,\nDit is vermoedelijk een fout bij Opencaching.de\nprobeer later nogmaals\nStatus:
 1622=niet in staat om te laden caches gevonden
 1623=Max Aantal:
-1624=  caches
+1624=+caches
 1625=Import TBs:
 1626=Max Logs:
 1627=Alle caches
@@ -786,6 +786,7 @@
 2678=brandstof in de omgeving
 2679=geen eten in de buurt
 2680=Voedsel in de buurt
+2681=Chirp (Garmin)
 3000=Sluiten
 4000=Geladen caches
 4001=GPX bestanden uit opencaching bevatten geen informatie van beelden, kunnen zij niet worden downloaden. Beste je caches van opencaching menu /Application/Import/Download from Opencaching
@@ -802,10 +803,10 @@
 4110=Bezig met laden
 4111=Co??rdinaten moeten in dit formaat worden ingegeven N XX XX.XXX E XXX XX.XXX.
 4112=IO-Fout tijdens het kopi??ren van beeld:+
-4113= voor:+
-4114= Fout:+
+4113=+voor:+
+4114=+Fout:+
 4115=Fout: kan niet decoderen afbeelding:+
-4116= -  afbeelding niet gekopieerd
+4116=+-  afbeelding niet gekopieerd
 4117=Fout bij importeren .map Bestand:+
 4118=I/O-fout tijdens het lezen of schrijven van de kalibratie-bestand
 4119=Geen kalibratie bestand gevonden voor:+
@@ -821,7 +822,7 @@
 4211=Geen+
 4212=duidelijker
 4213=gedetailleerde
-4214= Kaart beschikbaar
+4214=+Kaart beschikbaar
 4215=Geen caches geselecteerd met vinkje
 4216=Laden kaart ...
 4217=Geen bestand, behorende tot de volgende afbeelding is niet gevonden:
@@ -888,7 +889,7 @@
 4295=Centrum
 4296=Detaillering
 4300=leeg 1 pixel=+
-4301=  meter
+4301=+meter
 4302=Lat / Lon buiten bereik tijdens het lezen +
 4303=niet genoeg lijnen in dossier +
 4304=niet genoeg punten voor het ijken van de kaart
@@ -950,9 +951,9 @@
 4829=getUrlForBoundingBox: Point:
 4830=Geen overeenkomende Gau??f-Kr??cger-streep in de EPSG-code lijst in het. WMS
 4831=getMapInfoObject: Coordinaat systeem niet ondersteund door Cachewolf:
-4900=  is niet een Duitse Gauss-Krueger te coordineren
+4900=+is niet een Duitse Gauss-Krueger te coordineren
 4920=EPSG code +
-4921=  niet ondersteund
+4921=+niet ondersteund
 4922=EPSG code ontbreekt in: +
 4923=fromWgs84: EPSG code +
 4924=ToWgs84: EPSG code +
@@ -976,13 +977,13 @@
 5509=Co??rdinaten voor middelpunt moeten worden ingegeven.
 5510=Spider options
 5511=Gevonden+
-5512= niew/update caches
+5512=\nniew / update caches
 5513=Bezig met laden:+
 5514=Travelbug
 5515=Failed to load-cache.\nPlease Controleer je internetverbinding.\nRetry?
-5516= cache beschrijvingen\ncould niet worden geladen.
+5516=+cache beschrijvingen\ncould niet worden geladen.
 5517=Spider updates?
-5518= caches in de database moet een update. Update nu?
+5518=+caches in de database moet een update. Update nu?
 5519=Informatie
 5520=Alleen de gegeven maximum van caches waren geladen.\nRepeat spideren later meer caches te laden.\nNo reeds bestaande caches zijn bijgewerkt.
 5521=Page+

Modified: branches/r1.2/res_noewe/languages/PL.cfg
===================================================================
--- branches/r1.2/res_noewe/languages/PL.cfg	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/res_noewe/languages/PL.cfg	2010-11-06 16:00:15 UTC (rev 2846)
@@ -145,7 +145,7 @@
 221=Nadpisac filtr?
 222=Taki filtr juz istnieje. Nadpisac?
 223=Usunac filtr?
-224= - Usunac zapisany filtr?
+224=+- Usunac zapisany filtr?
 225=Takze w logach
 226=[Profile cannot be deleted.]
 227=[active Profile cannot be deleted.]
@@ -509,7 +509,7 @@
 1621=Blad podczas interpretacji danych\n Z Opencaching,\nNajpopularniejszy blad w Opencaching\nSprobuj pozniej\n Status:
 1622=Wyklucz znalezione skrzynki
 1623=Max. numer:
-1624= skrzynek
+1624=+skrzynek
 1625=Sciagnij TBs
 1626=Max. logow:
 1627=Wszystkie skrzynki
@@ -786,6 +786,7 @@
 2678=paliwa w poblizu
 2679=brak zywnosci w poblizu
 2680=Zywnosci w poblizu
+2681=Chirp (Garmin)
 3000=Zamknij
 4000=Wczytaj skrzynki:+
 4001=Pliki GPX z opencaching nie zawieraja informacji o obrazach, nie moga byc one wczytane. Najlepiej pobierz skrzynki z opencaching przez menu /Aplikacja/Importuj/Sciagnij Z Opencaching
@@ -802,10 +803,10 @@
 4110=wczytuje
 4111=Wspolrzedne musza byc wprowadzone w formacie N XX XX.XXX E XXX XX.XXX
 4112=IO-Blad podczas kopiowania obrazu z:+
-4113=do:+
-4114= Blad:+
+4113=+do:+
+4114=+Blad:+
 4115=Blad: nie moge odczytac obrazu:+
-4116= - obraz nie skopiowany
+4116=+- obraz nie skopiowany
 4117=Blad podczas importowania pliku .map:+
 4118=IO-Blad podczas wczytywania lub nadpisywania pliku
 4119=Plik kalibracji nie znaleziony dla:+
@@ -821,7 +822,7 @@
 4211=Zadna+
 4212=mniej
 4213=bardziej
-4214= szczegolowa mapa dostepna
+4214=+szczegolowa mapa dostepna
 4215=Nie ma skrzynek wybraych
 4216=Wczytuje mape...
 4217=Nie moge znalezc obrazow polaczonych z:
@@ -888,7 +889,7 @@
 4295=center
 4296=detailing
 4300=Pusty 1 Pixel =+
-4301= metrow
+4301=+metrow
 4302=Lat/Lon poza obszarem podczas wczytywania+
 4303=za malo lini w pliku+
 4304=za malo punktow do kalibracji mapy.
@@ -950,9 +951,9 @@
 4829=getUrlForBoundingBox: Point:
 4830=Nie pasujace Gau??-Kr??ger-Stripe w kodzie EPSG w pliku .wms
 4831=getMapInfoObject: Cachewolf nie wspiera takich wspolrzednych:
-4900= to nie sa koordynaty Gauss-Krueger
+4900=+to nie sa koordynaty Gauss-Krueger
 4920=EPSG code+
-4921= nie wspierane
+4921=+nie wspierane
 4922=EPSG code brakujacy w:+
 4923=fromWgs84: EPSG code+
 4924=ToWgs84: EPSG code+
@@ -976,13 +977,13 @@
 5509=Wspolrzedne dla srodka musza byc podane
 5510=Opcje Spidera
 5511=Znaleziona+
-5512= nowy/aktualizacja skrzynki
+5512=\nnowy / aktualizacja skrzynki
 5513=Wczytuje:+
 5514=Pobieram bugi:+
 5515=Nie mozna zaladowac skrzynki.\nProsze sprawdzic polaczenie z netem.\nSprobowac ponownie?
-5516= Nie mozna zaladowac\nopisu skrzynek.
+5516=+Nie mozna zaladowac\nopisu skrzynek.
 5517=Spider updates?
-5518= Skrzynki w bazie wymagaja update'u.\nZrobic to teraz?
+5518=+Skrzynki w bazie wymagaja update'u.\nZrobic to teraz?
 5519=Informacje
 5520=Tylko zadane maksimum zostalo wczytane.\nPowtorz pozniej by znalezc inne skrzynki.\nZadna z dotychczasowych skrzynek nie zostala updateowana.
 5521=Strona+

Modified: branches/r1.2/res_noewe/languages/SV.cfg
===================================================================
--- branches/r1.2/res_noewe/languages/SV.cfg	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/res_noewe/languages/SV.cfg	2010-11-06 16:00:15 UTC (rev 2846)
@@ -145,7 +145,7 @@
 221=Skriv ??ver filter?
 222=Det finns redan. ??ver den?
 223=Ta bort filter?
-224=  - radera sparade filter?
+224=+- radera sparade filter?
 225=??ven i loggarna
 226=profil inte kan tas bort.
 227=aktiv profil kan inte raderas.
@@ -509,7 +509,7 @@
 1621=Fel vid tolkning av data\n fr??n Opencaching.de, ??r\nThis troligen ett fel p?? Opencaching.de\nRetry senare\n Status:
 1622=Uteslut hittade cachar
 1623=Importera upto:
-1624=  cachar (tom=alla)
+1624=+cachar (tom=alla)
 1625=H??mta TBS
 1626=Max. spara loggar:
 1627=Alla cachar
@@ -786,6 +786,7 @@
 2678=Br??nsle i n??rheten
 2679=ingen mat i n??rheten
 2680=Food i n??rheten
+2681=Chirp (Garmin)
 3000=St??ng
 4000=Loaded cachar:+
 4001=GPX filer fr??n opencaching inte inneh??ller n??gon information av bilder, kan de inte laoded. B??st du cachar fr??n opencaching genom menyn / Application / Import / Download fr??n Opencaching
@@ -802,10 +803,10 @@
 4110=laddning
 4111=Koordinater m??ste anges i formatet N XX XX.XXX E XXX XX.XXX
 4112=IO-Fel vid kopiering bild fr??n: +
-4113=till: +
-4114=  error: +
+4113=+till:+
+4114=+error:+
 4115=Fel: Kunde inte avkoda bild: +
-4116=  -   bild inte kopieras
+4116=+- bild inte kopieras
 4117=Fel vid import. Map-fil: +
 4118=IO-Fel vid l??sning eller skrivning kalibrering fil
 4119=Ingen kalibrering fil hittades f??r: +
@@ -821,7 +822,7 @@
 4211=No +
 4212=mindre
 4213=mer
-4214=  detaljerad karta finns
+4214=+detaljerad karta finns
 4215=Ingen cachar ut av en f??sting
 4216=Laddar karta ...
 4217=Kunde inte hitta bilden i samband med:
@@ -888,7 +889,7 @@
 4295=center
 4296=detailing
 4300=tom 1 pixel=+
-4301=  meter
+4301=+meter
 4302=Lat / Lon r??ckh??ll n??r du l??ser +
 4303=inte tillr??ckligt rader i filen +
 4304=inte tillr??ckligt med po??ng f??r att kalibrera kartan
@@ -950,9 +951,9 @@
 4829=getUrlForBoundingBox: Point:
 4830=Inga matchande Gau??F-Kr??cger-rand i EPSG-kodlistan p??. WMS
 4831=getMapInfoObject: Koordinatsystem inte st??ds av Cachewolf:
-4900=  ??r inte en tysk Gauss-Krueger samordna
+4900=+??r inte en tysk Gauss-Krueger samordna
 4920=EPSG kod +
-4921=  st??ds
+4921=+st??ds
 4922=EPSG kod saknas i: +
 4923=fromWgs84: EPSG kod +
 4924=ToWgs84: EPSG kod +
@@ -976,13 +977,13 @@
 5509=Koordinater f??r centrum m??ste st??llas
 5510=Spider Options
 5511=Found +
-5512=  nya/uppdatering cachar
+5512=\nnya / uppdatering cachar
 5513=Laddar: +
 5514=Getting bug: +
 5515=Kunde inte ladda cache.\nPlease kontrollera din Internetanslutning.\nRetry?
-5516=  cache beskrivningar\ncould inte laddas.
+5516=+cache beskrivningar\ncould inte laddas.
 5517=Spider uppdateringar?
-5518=  cachar i databasen beh??ver uppdateras. Uppdatera nu?
+5518=+cachar i databasen beh??ver uppdateras. Uppdatera nu?
 5519=Information
 5520=Endast ges maximalt cachar lastades.\nRepeat spidering senare att l??sa mer cachar.\nNo redan existerande cachar har uppdaterats.
 5521=Sida +

Modified: branches/r1.2/res_noewe/templates/Short documentation for the export via templates.htm
===================================================================
--- branches/r1.2/res_noewe/templates/Short documentation for the export via templates.htm	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/res_noewe/templates/Short documentation for the export via templates.htm	2010-11-06 16:00:15 UTC (rev 2846)
@@ -238,7 +238,7 @@
 &lt;<span class=SpellE>tmpl_par</span> name=&quot;<span class=SpellE>sortedBy</span>&quot;
 value=&quot;-1&quot;&gt;<span style='mso-tab-count:3'>??????????????????????????????????? </span>sets
 a <span class=SpellE>tmpl_var</span> with the name <span class=SpellE>sortedBy</span>:
-values are 1..19. (5=Waypoint,6=Name,9=Status,10=Distance? see myComparer.java)<o:p></o:p></span></p>
+values are 1..19. (4=Waypoint,5=Name,9=Status,10=Distance? see myComparer.java)<o:p></o:p></span></p>
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><u><span
 lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>Output
@@ -335,8 +335,7 @@
 class=SpellE>xx.yyyy</span>? &gt; Longitude in decimal format, e.g. 008.58132<br>
 STATUS<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????????? </span>:<span
 style='mso-spacerun:yes'>? </span>means found<br>
-GC_LOGTYPE<span style='mso-tab-count:4'>???????????????????????????????????? </span><span
-style='mso-tab-count:4'>?????????????????????????????????????????????? </span>:
+GC_LOGTYPE<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????? </span>:
 the English Status texts (for <span class=SpellE>gpx</span> ? export)<br>
 STATUS_DATE<span style='mso-tab-count:8'>?????????????????????????????????????????????????????????????????????????????????? </span>:
 Get the date part of the status <br>
@@ -373,7 +372,8 @@
 class=SpellE>sie</span> <span class=SpellE>noch</span> <span class=SpellE>Infos</span>
 <span class=SpellE>wie</span> Difficulty etc. rein)<br>
 CACHEID<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????????? </span>:<br>
-ARCHIVED<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????? </span>:<br>
+ARCHIVED<span style='mso-tab-count:4'>????????????????????????????????????????? </span><span
+style='mso-tab-count:4'>?????????????????????????????????????????????? </span>:<br>
 AVAILABLE<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????? </span>:
 <br>
 TRAVELBUG<span style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????? </span>:
@@ -503,7 +503,7 @@
 mso-outline-level:1'><span class=SpellE><span class=GramE><span lang=EN-GB
 style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>cacheImg</span></span></span><span
 lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'><span
-style='mso-tab-count:1'>????????? </span><span style='mso-tab-count:7'>????????????????????????????????????????????????????????????????????????????????? </span>:
+style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????????? </span>:
 the &lt;<span class=SpellE>tmpl_loop</span> <span class=SpellE>cacheImg</span>&gt;<br>
 FILENAME<span style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????????? </span>:
 the filename in the profile directory<br>
@@ -578,8 +578,8 @@
 &lt;TMPL_VAR name=&quot;<span class=SpellE>var_name</span>&quot;
 default=&quot;my value&quot;&gt;<br>
 If <span class=SpellE>var_name</span> is set using <span class=SpellE>setParam</span>
-(or <span class=SpellE>setParams</span>), then it's value will be whatever it was
-set to<span class=GramE>,<span style='mso-spacerun:yes'>? </span>else</span></span><span
+(or <span class=SpellE>setParams</span>), then it's value will be whatever it
+was set to<span class=GramE>,<span style='mso-spacerun:yes'>? </span>else</span></span><span
 lang=EN-GB style='mso-ansi-language:EN-GB'> </span><span lang=EN-GB
 style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>it will be
 &quot;my value&quot; (without the quotes).<o:p></o:p></span></p>
@@ -720,8 +720,8 @@
 mso-outline-level:1'><st1:place><u><span lang=EN-GB style='font-size:10.0pt;
  font-family:Arial;mso-ansi-language:EN-GB'>Loop</span></u></st1:place><u><span
 lang=EN-GB style='mso-ansi-language:EN-GB'> </span></u><u><span lang=EN-GB
-style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>context
-variables</span></u><u><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></u></p>
+style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>context variables</span></u><u><span
+lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></u></p>
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
 lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>If

Added: branches/r1.2/res_noewe/templates/html_240x320(by_KarlKater).tpl
===================================================================
--- branches/r1.2/res_noewe/templates/html_240x320(by_KarlKater).tpl	                        (rev 0)
+++ branches/r1.2/res_noewe/templates/html_240x320(by_KarlKater).tpl	2010-11-06 16:00:15 UTC (rev 2846)
@@ -0,0 +1,116 @@
+<tmpl_par name="charset" value="UTF8">
+<tmpl_par name="decsep" value=".">
+<tmpl_par name="newline" value="LF">
+<tmpl_par name="Out" value=".html">
+<tmpl_par name="NrLogs " value="-1">
+<tmpl_par name="singleFile" value="no">
+<tmpl_par name="formatModifier" value="2">
+<tmpl_par name="takeOnlyWp" value="main">
+<tmpl_par name="CopyCacheImages" value="yes">
+<html>
+
+<head>
+<title></title>
+<meta name="generator" content="CacheWolf HTML-Export edit by KarlKater">
+<meta http-equiv="content-type" content="text/html; charset=utf-8">
+</head>
+
+<body>
+<table border = "2px" align = "center">
+
+<tr style = "background-color:lightgrey;font-family:sans-serif;font-size:14;">
+<td>
+<img src="../attributes/<tmpl_var GSTYPE>.png"><tmpl_var GSTYPE> <tmpl_var WAYPOINT><br>
+<tmpl_var NAME> by <tmpl_var OWNER><br>
+Difficulty: <tmpl_var DIFFICULTY>&nbsp;&nbsp;Terrain: <tmpl_var TERRAIN>&nbsp;&nbsp;Size: <tmpl_var SIZE><br>
+Coordinates: <tmpl_var LATLON>
+</td>
+</tr>
+
+<tr style = "font-family:sans-serif;font-size:12;">
+<td>
+<tmpl_loop ATTRIBUTES>
+<img src="../attributes/<tmpl_var IMAGE>" border=0 alt="<tmpl_var INFO>">
+<tmpl_var BR>
+<!--<tmpl_var IMAGE>-->
+<!--<tmpl_var INFO>-->
+</tmpl_loop>
+<br>
+<br>
+<tmpl_var DESCRIPTION>
+</td>
+</tr>
+
+<tmpl_if ADDIS>
+<TABLE cellSpacing=1 cellPadding=1 bgColor=#448e35 border=0>
+<TBODY>
+<TR bgColor=#c6e3c0>
+<TH align=left width=50>Waypoint</TH>
+<TH align=left>Name</TH>
+<TH align=left width=73>Coordinate</TH>
+<tmpl_loop ADDIS>
+<TR bgColor=#ffffff>
+<TD vAlign=top align=left><img src="../attributes/<tmpl_var IMG>"><br><tmpl_var WAYPOINT></TD>
+<TD vAlign=top align=left><tmpl_var NAME></TD>
+<TD vAlign=top align=left><tmpl_var LATLON></TD></TR>
+<TR bgColor=#ffffff>
+<TD vAlign=top align=left ColSpan=3><tmpl_var LONGDESC></TD>
+</tmpl_loop>
+</TBODY>
+</TABLE><BR/></div>
+</tmpl_if>
+
+<table cellSpacing=1 cellPadding=1 bgColor=#448e35 border=0>
+<tr bgColor=#c6e3c0>
+       <td align=right>Hints:&nbsp;&nbsp;</td>
+       <td><tmpl_var HINTS></td>
+</tr>
+<tr bgColor=#ffffff>
+       <td>Decrypted Hints:&nbsp;&nbsp;</td>
+       <td><tmpl_var DECRYPTEDHINTS></td>
+</tr>
+</table>
+
+<br>
+
+<tr style = "font-family:sans-serif;font-size:12;"><td>
+Logs:<br>
+<tmpl_loop LOGS>
+<img src="../attributes/<tmpl_var ICON>" border="0">&nbsp;<tmpl_var DATE>&nbsp;by&nbsp;<tmpl_var LOGGER><br><tmpl_var MESSAGE>
+<br>
+</tmpl_loop>
+</td>
+</tr>
+
+<tr style="font-family:sans-serif;font-size:12;">
+<td>
+Notes:<br>
+<tmpl_var NOTES>
+</td>
+</tr>
+
+<tr style = "font-family:sans-serif;font-size:12;"><td>
+Pictures:<br>
+Cache:<br>
+<tmpl_loop cacheImg>
+<a href = "<tmpl_var FILENAME>"><tmpl_var TEXT></a><br>
+</tmpl_loop>
+User:<br>
+<tmpl_loop userImg>
+<a href = "<tmpl_var FILENAME>"><tmpl_var TEXT></a><br>
+</tmpl_loop>
+Logs:<br>
+<tmpl_loop logImg>
+<a href = "<tmpl_var FILENAME>"><tmpl_var TEXT></a><br>
+</tmpl_loop>
+Maps:<br>
+<tmpl_loop mapImg>
+<a href = "<tmpl_var FILENAME>"><tmpl_var TEXT></a><br>
+</tmpl_loop>
+</td>
+</tr>
+
+<tr style = "font-family:sans-serif;font-size:12;"><td>
+</table>
+</body>
+</html>

Modified: branches/r1.2/res_noewe/templates/index.tpl
===================================================================
--- branches/r1.2/res_noewe/templates/index.tpl	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/res_noewe/templates/index.tpl	2010-11-06 16:00:15 UTC (rev 2846)
@@ -1,3 +1,11 @@
+<tmpl_par name="charset" value="UTF8">
+<tmpl_par name="decsep" value=".">
+<tmpl_par name="newline" value="LF">
+<tmpl_par name="Out" value="index.html">
+<tmpl_par name="singleFile" value="yes">
+<tmpl_par name="formatModifier" value="2">
+<tmpl_par name="takeOnlyWp" value="main">
+<tmpl_par name="sortedBy" value="4">
 <html>
 <head>
 <title></title>
@@ -5,17 +13,11 @@
 <meta http-equiv="content-type" content="text/html; charset=utf-8">
 </head>
 <body>
- <tmpl_if navi_index>
-	 <tmpl_loop navi_index>
-	 	<a name=top></a>
-	  	<a href="#<tmpl_var HREF>"><tmpl_var TEXT></a>
-	 </tmpl_loop>
-</tmpl_if>
 <table border = "2px" align = "center">
  <tr style = "background-color:lightgrey;font-variant:small-caps; font-family:sans-serif;font-size:16;">
     <td><a href = "index_type.html">Art</a></td>
     <td><a href = "index_size.html">Size</a></td>
-    <td><a href = "index_wp.html">Wegpunkt</td>
+    <td><a href = "index.html">Wegpunkt</td>
     <td><a href = "index_alpha.html">Name</a></td>
     <td>Besitzer</td>
     <td>Schwierigkeit</td>

Added: branches/r1.2/res_noewe/templates/index_alpha.tpl
===================================================================
--- branches/r1.2/res_noewe/templates/index_alpha.tpl	                        (rev 0)
+++ branches/r1.2/res_noewe/templates/index_alpha.tpl	2010-11-06 16:00:15 UTC (rev 2846)
@@ -0,0 +1,51 @@
+<tmpl_par name="charset" value="UTF8">
+<tmpl_par name="decsep" value=".">
+<tmpl_par name="newline" value="LF">
+<tmpl_par name="Out" value="index_alpha.html">
+<tmpl_par name="singleFile" value="yes">
+<tmpl_par name="formatModifier" value="2">
+<tmpl_par name="takeOnlyWp" value="main">
+<tmpl_par name="sortedBy" value="5">
+<html>
+<head>
+<title></title>
+<meta name="generator" content="CacheWolf">
+<meta http-equiv="content-type" content="text/html; charset=utf-8">
+</head>
+<body>
+<table border = "2px" align = "center">
+ <tr style = "background-color:lightgrey;font-variant:small-caps; font-family:sans-serif;font-size:16;">
+    <td><a href = "index_type.html">Art</a></td>
+    <td><a href = "index_size.html">Size</a></td>
+    <td><a href = "index.html">Wegpunkt</td>
+    <td><a href = "index_alpha.html">Name</a></td>
+    <td>Besitzer</td>
+    <td>Schwierigkeit</td>
+    <td>Gel&auml;nde</td>
+    <td><a href = "index_dist.html">Entfernung</a></td>
+    <td>Richtung</td>
+    <td>Koordinaten</td>
+ </tr>
+ <tmpl_loop cache_index>
+ <tmpl_if ANCHORNAME>
+  <tr style = "font-family:sans-serif;font-size:12;">
+ 		<td colspan="2" style = "background-color:lightgrey;font-variant:small-caps; font-family:sans-serif;font-size:16;"><a name = "<tmpl_var ANCHORNAME>"><tmpl_var ANCHORTEXT></a></td>
+ 		<td><a href="#top">Back</a></td>
+  </tr>
+ </tmpl_if>
+ <tr style = "font-family:sans-serif;font-size:12;">
+    <td><tmpl_var TYPE></td>
+    <td><tmpl_var SIZE></td>
+    <td><a href = "<tmpl_var WAYPOINT>.html"><tmpl_var WAYPOINT></a></td>
+    <td><tmpl_var NAME></td>
+    <td><tmpl_var OWNER></td>
+    <td><tmpl_var DIFFICULTY></td>
+    <td><tmpl_var TERRAIN></td>
+    <td><tmpl_var DISTANCE></td>
+    <td><tmpl_var BEARING></td>
+    <td><tmpl_var LATLON></td>
+ </tr>
+ </tmpl_loop>
+</table>
+</body>
+</html>
\ No newline at end of file

Added: branches/r1.2/res_noewe/templates/index_dist.tpl
===================================================================
--- branches/r1.2/res_noewe/templates/index_dist.tpl	                        (rev 0)
+++ branches/r1.2/res_noewe/templates/index_dist.tpl	2010-11-06 16:00:15 UTC (rev 2846)
@@ -0,0 +1,51 @@
+<tmpl_par name="charset" value="UTF8">
+<tmpl_par name="decsep" value=".">
+<tmpl_par name="newline" value="LF">
+<tmpl_par name="Out" value="index_dist.html">
+<tmpl_par name="singleFile" value="yes">
+<tmpl_par name="formatModifier" value="2">
+<tmpl_par name="takeOnlyWp" value="main">
+<tmpl_par name="sortedBy" value="10">
+<html>
+<head>
+<title></title>
+<meta name="generator" content="CacheWolf">
+<meta http-equiv="content-type" content="text/html; charset=utf-8">
+</head>
+<body>
+<table border = "2px" align = "center">
+ <tr style = "background-color:lightgrey;font-variant:small-caps; font-family:sans-serif;font-size:16;">
+    <td><a href = "index_type.html">Art</a></td>
+    <td><a href = "index_size.html">Size</a></td>
+    <td><a href = "index.html">Wegpunkt</td>
+    <td><a href = "index_alpha.html">Name</a></td>
+    <td>Besitzer</td>
+    <td>Schwierigkeit</td>
+    <td>Gel&auml;nde</td>
+    <td><a href = "index_dist.html">Entfernung</a></td>
+    <td>Richtung</td>
+    <td>Koordinaten</td>
+ </tr>
+ <tmpl_loop cache_index>
+ <tmpl_if ANCHORNAME>
+  <tr style = "font-family:sans-serif;font-size:12;">
+ 		<td colspan="2" style = "background-color:lightgrey;font-variant:small-caps; font-family:sans-serif;font-size:16;"><a name = "<tmpl_var ANCHORNAME>"><tmpl_var ANCHORTEXT></a></td>
+ 		<td><a href="#top">Back</a></td>
+  </tr>
+ </tmpl_if>
+ <tr style = "font-family:sans-serif;font-size:12;">
+    <td><tmpl_var TYPE></td>
+    <td><tmpl_var SIZE></td>
+    <td><a href = "<tmpl_var WAYPOINT>.html"><tmpl_var WAYPOINT></a></td>
+    <td><tmpl_var NAME></td>
+    <td><tmpl_var OWNER></td>
+    <td><tmpl_var DIFFICULTY></td>
+    <td><tmpl_var TERRAIN></td>
+    <td><tmpl_var DISTANCE></td>
+    <td><tmpl_var BEARING></td>
+    <td><tmpl_var LATLON></td>
+ </tr>
+ </tmpl_loop>
+</table>
+</body>
+</html>
\ No newline at end of file

Added: branches/r1.2/res_noewe/templates/index_size.tpl
===================================================================
--- branches/r1.2/res_noewe/templates/index_size.tpl	                        (rev 0)
+++ branches/r1.2/res_noewe/templates/index_size.tpl	2010-11-06 16:00:15 UTC (rev 2846)
@@ -0,0 +1,51 @@
+<tmpl_par name="charset" value="UTF8">
+<tmpl_par name="decsep" value=".">
+<tmpl_par name="newline" value="LF">
+<tmpl_par name="Out" value="index_size.html">
+<tmpl_par name="singleFile" value="yes">
+<tmpl_par name="formatModifier" value="2">
+<tmpl_par name="takeOnlyWp" value="main">
+<tmpl_par name="sortedBy" value="12">
+<html>
+<head>
+<title></title>
+<meta name="generator" content="CacheWolf">
+<meta http-equiv="content-type" content="text/html; charset=utf-8">
+</head>
+<body>
+<table border = "2px" align = "center">
+ <tr style = "background-color:lightgrey;font-variant:small-caps; font-family:sans-serif;font-size:16;">
+    <td><a href = "index_type.html">Art</a></td>
+    <td><a href = "index_size.html">Size</a></td>
+    <td><a href = "index.html">Wegpunkt</td>
+    <td><a href = "index_alpha.html">Name</a></td>
+    <td>Besitzer</td>
+    <td>Schwierigkeit</td>
+    <td>Gel&auml;nde</td>
+    <td><a href = "index_dist.html">Entfernung</a></td>
+    <td>Richtung</td>
+    <td>Koordinaten</td>
+ </tr>
+ <tmpl_loop cache_index>
+ <tmpl_if ANCHORNAME>
+  <tr style = "font-family:sans-serif;font-size:12;">
+ 		<td colspan="2" style = "background-color:lightgrey;font-variant:small-caps; font-family:sans-serif;font-size:16;"><a name = "<tmpl_var ANCHORNAME>"><tmpl_var ANCHORTEXT></a></td>
+ 		<td><a href="#top">Back</a></td>
+  </tr>
+ </tmpl_if>
+ <tr style = "font-family:sans-serif;font-size:12;">
+    <td><tmpl_var TYPE></td>
+    <td><tmpl_var SIZE></td>
+    <td><a href = "<tmpl_var WAYPOINT>.html"><tmpl_var WAYPOINT></a></td>
+    <td><tmpl_var NAME></td>
+    <td><tmpl_var OWNER></td>
+    <td><tmpl_var DIFFICULTY></td>
+    <td><tmpl_var TERRAIN></td>
+    <td><tmpl_var DISTANCE></td>
+    <td><tmpl_var BEARING></td>
+    <td><tmpl_var LATLON></td>
+ </tr>
+ </tmpl_loop>
+</table>
+</body>
+</html>
\ No newline at end of file

Added: branches/r1.2/res_noewe/templates/index_type.tpl
===================================================================
--- branches/r1.2/res_noewe/templates/index_type.tpl	                        (rev 0)
+++ branches/r1.2/res_noewe/templates/index_type.tpl	2010-11-06 16:00:15 UTC (rev 2846)
@@ -0,0 +1,51 @@
+<tmpl_par name="charset" value="UTF8">
+<tmpl_par name="decsep" value=".">
+<tmpl_par name="newline" value="LF">
+<tmpl_par name="Out" value="index_type.html">
+<tmpl_par name="singleFile" value="yes">
+<tmpl_par name="formatModifier" value="2">
+<tmpl_par name="takeOnlyWp" value="main">
+<tmpl_par name="sortedBy" value="1">
+<html>
+<head>
+<title></title>
+<meta name="generator" content="CacheWolf">
+<meta http-equiv="content-type" content="text/html; charset=utf-8">
+</head>
+<body>
+<table border = "2px" align = "center">
+ <tr style = "background-color:lightgrey;font-variant:small-caps; font-family:sans-serif;font-size:16;">
+    <td><a href = "index_type.html">Art</a></td>
+    <td><a href = "index_size.html">Size</a></td>
+    <td><a href = "index.html">Wegpunkt</td>
+    <td><a href = "index_alpha.html">Name</a></td>
+    <td>Besitzer</td>
+    <td>Schwierigkeit</td>
+    <td>Gel&auml;nde</td>
+    <td><a href = "index_dist.html">Entfernung</a></td>
+    <td>Richtung</td>
+    <td>Koordinaten</td>
+ </tr>
+ <tmpl_loop cache_index>
+ <tmpl_if ANCHORNAME>
+  <tr style = "font-family:sans-serif;font-size:12;">
+ 		<td colspan="2" style = "background-color:lightgrey;font-variant:small-caps; font-family:sans-serif;font-size:16;"><a name = "<tmpl_var ANCHORNAME>"><tmpl_var ANCHORTEXT></a></td>
+ 		<td><a href="#top">Back</a></td>
+  </tr>
+ </tmpl_if>
+ <tr style = "font-family:sans-serif;font-size:12;">
+    <td><tmpl_var TYPE></td>
+    <td><tmpl_var SIZE></td>
+    <td><a href = "<tmpl_var WAYPOINT>.html"><tmpl_var WAYPOINT></a></td>
+    <td><tmpl_var NAME></td>
+    <td><tmpl_var OWNER></td>
+    <td><tmpl_var DIFFICULTY></td>
+    <td><tmpl_var TERRAIN></td>
+    <td><tmpl_var DISTANCE></td>
+    <td><tmpl_var BEARING></td>
+    <td><tmpl_var LATLON></td>
+ </tr>
+ </tmpl_loop>
+</table>
+</body>
+</html>
\ No newline at end of file

Added: branches/r1.2/res_noewe/webmapservices/de-sh_t.wms
===================================================================
--- branches/r1.2/res_noewe/webmapservices/de-sh_t.wms	                        (rev 0)
+++ branches/r1.2/res_noewe/webmapservices/de-sh_t.wms	2010-11-06 16:00:15 UTC (rev 2846)
@@ -0,0 +1,128 @@
+TakenFromUrl:       http://service.schleswig-holstein.de/OGCFassade/SH_WMS_ATKIS_IK_MRH.aspx?
+GetCapabilitiesUrl: http://service.schleswig-holstein.de/OGCFassade/SH_WMS_ATKIS_IK_MRH.aspx?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
+Name:               de.schleswig-holstein t5-200
+MapType:                        topo
+MainUrl:            http://service.schleswig-holstein.de/OGCFassade/SH_WMS_ATKIS_IK_MRH.aspx?
+ServiceTypeUrlPart: SERVICE=WMS
+VersionUrlPart:     VERSION=1.1.1
+CoordinateReferenceSystemCacheWolf:  31467
+CoordinateReferenceSystemUrlPart: SRS=EPSG:31467 
+RequestUrlPart:     REQUEST=GetMap
+#LayersUrlPart:     LAYERS=0|SH_M5_F101_F_SDLG|NaN|NaN
+#LayersUrlPart:     LAYERS=1|SH_M5_F109_F_VEG|NaN|NaN
+#LayersUrlPart:     LAYERS=2|SH_M5_F103_F_BW|NaN|NaN
+#LayersUrlPart:     LAYERS=3|SH_M5_F102_F_SDLGFF|NaN|NaN
+#LayersUrlPart:     LAYERS=4|SH_M5_F108_F_TRANS|NaN|NaN
+#LayersUrlPart:     LAYERS=5|SH_M5_F104_F_PLATZ|NaN|NaN
+#LayersUrlPart:     LAYERS=6|SH_M5_F106_F_FLUG|NaN|NaN
+#LayersUrlPart:     LAYERS=7|SH_M5_F111_F_GEW|NaN|NaN
+#LayersUrlPart:     LAYERS=8|SH_M5_F111_F_GEW_WATT|NaN|NaN
+#LayersUrlPart:     LAYERS=9|SH_M5_F113_FT_GEW_BW_1|NaN|NaN
+#LayersUrlPart:     LAYERS=10|SH_M5_F107_F_SCHIFF|NaN|NaN
+#LayersUrlPart:     LAYERS=11|SH_M5_F113_F_UFER|NaN|NaN
+#LayersUrlPart:     LAYERS=12|SH_M5_F111_L_GEW|NaN|NaN
+#LayersUrlPart:     LAYERS=13|SH_M5_F113_L_UFER|NaN|NaN
+#LayersUrlPart:     LAYERS=14|SH_M5_F107_L_SCHIFF|NaN|NaN
+#LayersUrlPart:     LAYERS=15|SH_M5_F115_L_DEICH|NaN|NaN
+#LayersUrlPart:     LAYERS=16|SH_M5_F104_L_WEG|NaN|NaN
+#LayersUrlPart:     LAYERS=17|SH_M5_F104_L_Str_M|NaN|NaN
+#LayersUrlPart:     LAYERS=18|SH_M5_F104_F_Str - Fussgaengerzone|NaN|NaN
+#LayersUrlPart:     LAYERS=19|SH_M5_F104_F_Str - Kreisstrasse und Gemeindestrasse|NaN|NaN
+#LayersUrlPart:     LAYERS=20|SH_M5_F104_F_Str - Landesstrasse|NaN|NaN
+#LayersUrlPart:     LAYERS=21|SH_M5_F104_F_Str - Autobahn und Bundesstrasse|NaN|NaN
+#LayersUrlPart:     LAYERS=22|SH_M5_F104_L_Str_M - Mittellinie bei Strassen mit getrennter Fahrbahn|NaN|NaN
+#LayersUrlPart:     LAYERS=23|SH_M5_F105_L_BAHN|NaN|NaN
+#LayersUrlPart:     LAYERS=24|SH_M5_F108_PT_TRANS|NaN|NaN
+#LayersUrlPart:     LAYERS=25|SH_M5_F117_L_GRENZEN|NaN|NaN
+#LayersUrlPart:     LAYERS=26|SH_M5_TEXT_GEBIETE|NaN|NaN
+#LayersUrlPart:     LAYERS=27|SH_M5_TEXT_F|NaN|NaN
+#LayersUrlPart:     LAYERS=28|SH_M5_TEXT_P|NaN|NaN
+#LayersUrlPart:     LAYERS=29|SH_M5_F104_T_STR_NR_ANNO|NaN|NaN
+#LayersUrlPart:     LAYERS=30|SH_M5_F104_T_STR|NaN|NaN
+#LayersUrlPart:     LAYERS=31|SH_M20_F101_F_SDLG|NaN|NaN
+#LayersUrlPart:     LAYERS=32|SH_M20_F109_F_VEG|NaN|NaN
+#LayersUrlPart:     LAYERS=33|SH_M20_F103_F_BW|NaN|NaN
+#LayersUrlPart:     LAYERS=34|SH_M20_F102_F_SDLGFF|NaN|NaN
+#LayersUrlPart:     LAYERS=35|SH_M20_F108_F_TRANS|NaN|NaN
+#LayersUrlPart:     LAYERS=36|SH_M20_F104_F_PLATZ|NaN|NaN
+#LayersUrlPart:     LAYERS=37|SH_M20_F106_F_FLUG|NaN|NaN
+#LayersUrlPart:     LAYERS=38|SH_M20_F111_F_GEW|NaN|NaN
+#LayersUrlPart:     LAYERS=39|SH_M20_F111_F_GEW_WATT|NaN|NaN
+#LayersUrlPart:     LAYERS=40|SH_M20_F113_FT_GEW_BW|NaN|NaN
+#LayersUrlPart:     LAYERS=41|SH_M20_F113_F_UFER|NaN|NaN
+#LayersUrlPart:     LAYERS=42|SH_M20_F111_L_GEW|NaN|NaN
+#LayersUrlPart:     LAYERS=43|SH_M20_F113_L_UFER|NaN|NaN
+#LayersUrlPart:     LAYERS=44|SH_M20_F115_L_DEICH|NaN|NaN
+#LayersUrlPart:     LAYERS=45|SH_M20_F104_L_Str - Konturen|NaN|NaN
+#LayersUrlPart:     LAYERS=46|SH_M20_F104_L_Str - Wirtschaftsweg|NaN|NaN
+#LayersUrlPart:     LAYERS=47|SH_M20_F104_L_Str - Kreisstrasse, Gemeindestrasse und Hauptwirtschaftsweg|NaN|NaN
+#LayersUrlPart:     LAYERS=48|SH_M20_F104_L_Str - Landesstrasse|NaN|NaN
+#LayersUrlPart:     LAYERS=49|SH_M20_F104_L_Str - Autobahn und Bundesstrasse|NaN|NaN
+#LayersUrlPart:     LAYERS=50|SH_M20_F104_L_Str - Kreis- und Gemeindestrasse, Fussgaengerzone|NaN|NaN
+#LayersUrlPart:     LAYERS=51|SH_M20_F105_L_BAHN|NaN|NaN
+#LayersUrlPart:     LAYERS=52|SH_M20_F108_PT_TRANS|NaN|NaN
+#LayersUrlPart:     LAYERS=53|SH_M20_F117_L_GRENZEN|NaN|NaN
+#LayersUrlPart:     LAYERS=54|SH_M20_TEXT_GEBIETE|NaN|NaN
+#LayersUrlPart:     LAYERS=55|SH_M20_TEXT_F|NaN|NaN
+#LayersUrlPart:     LAYERS=56|SH_M20_TEXT_P|NaN|NaN
+#LayersUrlPart:     LAYERS=57|SH_M20_F104_T_STR_NR_ANNO|NaN|NaN
+#LayersUrlPart:     LAYERS=58|SH_M50_F101_F_SDLG|NaN|NaN
+#LayersUrlPart:     LAYERS=59|SH_M50_F109_F_VEG|NaN|NaN
+#LayersUrlPart:     LAYERS=60|SH_M50_F103_F_BW_1|NaN|NaN
+#LayersUrlPart:     LAYERS=61|SH_M50_F102_F_SDLGFF|NaN|NaN
+#LayersUrlPart:     LAYERS=62|SH_M50_F108_F_TRANS|NaN|NaN
+#LayersUrlPart:     LAYERS=63|SH_M50_F104_F_PLATZ|NaN|NaN
+#LayersUrlPart:     LAYERS=64|SH_M50_F106_F_FLUG|NaN|NaN
+#LayersUrlPart:     LAYERS=65|SH_M50_F111_F_GEW|NaN|NaN
+#LayersUrlPart:     LAYERS=66|SH_M50_F113_F_GEW_BW|NaN|NaN
+#LayersUrlPart:     LAYERS=67|SH_M50_F111_L_GEW|NaN|NaN
+#LayersUrlPart:     LAYERS=68|SH_M50_F104_L_Str - Konturen|NaN|NaN
+#LayersUrlPart:     LAYERS=69|SH_M50_F104_L_Str - Kreisstrasse|NaN|NaN
+#LayersUrlPart:     LAYERS=70|SH_M50_F104_L_Str - Landesstrasse|NaN|NaN
+#LayersUrlPart:     LAYERS=71|SH_M50_F104_L_Str - Autobahn und Bundesstrasse|NaN|NaN
+#LayersUrlPart:     LAYERS=72|SH_M50_F105_L_BAHN|NaN|NaN
+#LayersUrlPart:     LAYERS=73|SH_M50_F117_L_GRENZEN|NaN|NaN
+#LayersUrlPart:     LAYERS=74|SH_M50_TEXT_GEBIETE|NaN|NaN
+#LayersUrlPart:     LAYERS=75|SH_M50_TEXT_F|NaN|NaN
+#LayersUrlPart:     LAYERS=76|SH_M50_F101_PT_ORTSLAGE|NaN|NaN
+#LayersUrlPart:     LAYERS=77|SH_M50_F104_T_STR_NR_ANNO|NaN|NaN
+#LayersUrlPart:     LAYERS=78|SH_M70_F101_F_SDLG|NaN|NaN
+#LayersUrlPart:     LAYERS=79|SH_M70_F109_F_VEG|NaN|NaN
+#LayersUrlPart:     LAYERS=80|SH_M70_F103_F_BW_1|NaN|NaN
+#LayersUrlPart:     LAYERS=81|SH_M70_F102_F_SDLGFF|NaN|NaN
+#LayersUrlPart:     LAYERS=82|SH_M70_F108_F_TRANS|NaN|NaN
+#LayersUrlPart:     LAYERS=83|SH_M70_F104_F_PLATZ|NaN|NaN
+#LayersUrlPart:     LAYERS=84|SH_M70_F106_F_FLUG|NaN|NaN
+#LayersUrlPart:     LAYERS=85|SH_M70_F111_F_GEW|NaN|NaN
+#LayersUrlPart:     LAYERS=86|SH_M70_F113_F_GEW_BW|NaN|NaN
+#LayersUrlPart:     LAYERS=87|SH_M70_F111_L_GEW|NaN|NaN
+#LayersUrlPart:     LAYERS=88|SH_M70_F104_L_Str - Konturen|NaN|NaN
+#LayersUrlPart:     LAYERS=89|SH_M70_F104_L_Str - Kreisstrasse|NaN|NaN
+#LayersUrlPart:     LAYERS=90|SH_M70_F104_L_Str - Landesstrasse|NaN|NaN
+#LayersUrlPart:     LAYERS=91|SH_M70_F104_L_Str - Autobahn und Bundesstrasse|NaN|NaN
+#LayersUrlPart:     LAYERS=92|SH_M70_F105_L_BAHN|NaN|NaN
+#LayersUrlPart:     LAYERS=93|SH_M70_F117_L_GRENZEN|NaN|NaN
+#LayersUrlPart:     LAYERS=94|SH_M70_TEXT_GEBIETE|NaN|NaN
+#LayersUrlPart:     LAYERS=95|SH_M70_F116_T_Verw|NaN|NaN
+#LayersUrlPart:     LAYERS=96|SH_M70_TEXT_F|NaN|NaN
+#LayersUrlPart:     LAYERS=97|SH_M70_F101_PT_ORTSLAGE|NaN|NaN
+#LayersUrlPart:     LAYERS=98|SH_M70_F104_T_STR_NR_ANNO|NaN|NaN
+#LayersUrlPart:     LAYERS=99|SH_M200_GRUNDFLAECHE|NaN|99999999
+#LayersUrlPart:     LAYERS=100|SH_M200_F101_F_ORTSLAGE|NaN|99999999
+#LayersUrlPart:     LAYERS=101|SH_M200_F111_F_GEW|NaN|99999999
+#LayersUrlPart:     LAYERS=102|SH_M200_F111_L_GEW|NaN|99999999
+#LayersUrlPart:     LAYERS=103|SH_M200_F104_L_STR|NaN|99999999
+#LayersUrlPart:     LAYERS=104|SH_M200_F101_PT_ORTE|NaN|99999999
+#LayersUrlPart:     LAYERS=105|SH_M200_F117_L_GRENZEN|NaN|99999999
+#LayersUrlPart:     LAYERS=106|SH_M200_TEXT_F|NaN|99999999
+#LayersUrlPart:     LAYERS=107|SH_M200_TEXT_F_Query|NaN|NaN
+#LayersUrlPart:     LAYERS=108|Nordsee Text|NaN|NaN
+LayersUrlPart:     LAYERS=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108
+StylesUrlPart:     STYLES=
+ImageFormatUrlPart:FORMAT=image/png
+BoundingBoxTopLeftWGS84: N 55.08 E 8.156
+BoundingBoxButtomRightWGS84: N 53.34 E 11.33
+MinScale:   0
+MaxScale:   150
+RecommendedScale:    1 2.5 5 10 16
+ImageFileExtension: .png

Modified: branches/r1.2/src/CacheWolf/Attribute.java
===================================================================
--- branches/r1.2/src/CacheWolf/Attribute.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/Attribute.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -123,6 +123,10 @@
      */
 	public int getInc () { return _Inc; }
     /**
+     * getting CW internal attribute number (-1..127)  
+     */
+	public int getId () { return _Id; }
+    /**
      * setting/changing attribute given=1,negative=0,not specified=2  
      */
     public void setInc(int inc) {
@@ -283,6 +287,7 @@
 		{"76","2660","snowshoes","0","49","Snowshoes"}, // added by araber95 14.8.10"
 		{"77","2662","skiis","0","50","Cross Country Skis"}, // added by araber95 14.8.10
 		{"78","2664","s-tool","0","51","Special Tool required"}, // added by araber95 14.8.10
+		{"87","2681","wirelessbeacon","0","60","Wireless Beacon"}, // added by araber95 27.10.10
 		// Einschr?nkungen und Voraussetzungen / Ben?tigt Vorarbeit
 		{"70","2648","wiki","54","0",""},// 148 Recherche
 		{"63","2630","riddle","55","0",""},// 130 R?tsel
@@ -290,7 +295,6 @@
 		{"47","2596","arith_prob","56","0",""},// 96 Rechenaufgabe
 		{"60","2622","othercache","57","0",""},// 122 besondere Cacheart
 		{"48","2598","ask","58","0",""},// 98 Startbedingungen beim Owner erfragen
-		// !!! todo correct Filter Implementation
 		{"72","2652","landf","0","45","Lost And Found Tour"}, // thx to Kappler and MiK
 		// {"-1","2500","error","0","0",""}, //
 

Modified: branches/r1.2/src/CacheWolf/Attributes.java
===================================================================
--- branches/r1.2/src/CacheWolf/Attributes.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/Attributes.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -130,8 +130,13 @@
 	 * @param OC attribute ID
 	 */
 	public void add(int attIdOC) {
+		Attribute attr = new Attribute(attIdOC);
+		for (int i = 0; i < _count; i++) {
+			if (attribs[i].getId() == (attr.getId())) {
+				return;
+			}
+		}
 		if (_count<attribs.length) {
-			Attribute attr = new Attribute(attIdOC);
 			attribs[_count++] = attr;
 			attrYes=attr.getYesBit(attrYes);
 		}

Modified: branches/r1.2/src/CacheWolf/AttributesSelector.java
===================================================================
--- branches/r1.2/src/CacheWolf/AttributesSelector.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/AttributesSelector.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -32,39 +32,42 @@
 import ewe.graphics.AniImage;
 import ewe.graphics.InteractivePanel;
 import ewe.sys.Vm;
-import ewe.ui.CellConstants;
 import ewe.ui.DataChangeEvent;
 import ewe.ui.Panel;
 import ewe.ui.mLabel;
 
 public class AttributesSelector extends Panel {
-	protected static int TILESIZE=16; // for small screen 
-	protected static int PREF_WIDTH=180; // for small screen 
-	protected static int PREF_HEIGHT=150; // for small screen 
+	protected static int TILESIZE;
+	protected static int W_OFFSET;  // depends on Global.getPref().fontSize ?
+	protected static int H_OFFSET;	// depends on Global.getPref().fontSize ?
 	private long[] selectionMaskYes = {0l,0l};
 	private long[] selectionMaskNo = {0l,0l};
 	protected mLabel mInfo;
+	protected InteractivePanel iap=new attInteractivePanel();
+	protected MyScrollBarPanel scp = new MyScrollBarPanel(iap);
+	private int virtualWidth; 
 
 	public AttributesSelector() {
-		if(!Vm.isMobile()) { TILESIZE = 30; PREF_HEIGHT =(TILESIZE+2)*10; PREF_WIDTH =(TILESIZE+2)*9;}
-		
+		scp.setOptions(MyScrollBarPanel.NeverShowHorizontalScrollers);
+		TILESIZE = 30; W_OFFSET=100; H_OFFSET=150;
 		if(Vm.isMobile()){
+			if(MyLocale.getScreenWidth() == 240 & MyLocale.getScreenHeight() == 320){
+				TILESIZE = 28; W_OFFSET=80; H_OFFSET=120;
+			}
 			if(MyLocale.getScreenWidth() == 320 & MyLocale.getScreenHeight() == 240){
-				TILESIZE = 14; PREF_HEIGHT = 120; PREF_WIDTH = 180;
 			}
 			if(MyLocale.getScreenWidth() == 480 & MyLocale.getScreenHeight() == 640){
-				TILESIZE = 25; PREF_HEIGHT =(TILESIZE+2)*10; PREF_WIDTH =(TILESIZE+2)*9;
 			}
 			if(MyLocale.getScreenWidth() == 480 & MyLocale.getScreenHeight() == 800){
-				TILESIZE = 30; PREF_HEIGHT =(TILESIZE+2)*10; PREF_WIDTH =(TILESIZE+2)*9;
 			}
 			if(MyLocale.getScreenWidth() == 640 & MyLocale.getScreenHeight() == 480){
-				TILESIZE = 20; PREF_HEIGHT =(TILESIZE+2)*7; PREF_WIDTH =(TILESIZE+2)*12;
 			}
 		}
-		iap.virtualSize =  new Rect(10,10,400,400);
-		iap.setPreferredSize(PREF_WIDTH, PREF_HEIGHT);
-		addLast(iap,CellConstants.STRETCH,FILL);
+		else {
+			TILESIZE = 36; W_OFFSET=106; H_OFFSET=150;
+		}
+		iap.virtualSize = new Rect(0,0,0,0); // create once
+		addLast(scp,STRETCH,FILL);
 		addLast(mInfo=new mLabel(""),HSTRETCH,HFILL);
 	}
 
@@ -132,11 +135,10 @@
 			return true;
 		}
 	}
-	protected InteractivePanel iap=new attInteractivePanel();
 
 	private void showAttributePalette() {
 		iap.images.clear();
-		int myWidth = PREF_WIDTH;
+		int myWidth = virtualWidth;
 		int myX = 2; int myY = 2;
 		int inc = 2;
 		for (int i = 0; i < Attribute.maxAttRef; i++) {
@@ -162,11 +164,27 @@
 			myX += TILESIZE;
 			
 		}
-		iap.repaintNow();
+		iap.repaintNow();		
 	}
 	
-/*	public void resizeTo(int width, int height) {
-		super.resizeTo(width,height);
+
+	private void setIapSize(int width, int height) {
+		iap.setPreferredSize(width, height);
+		Global.getPref().log("[AttributesSelector:changeIapSize]  pref. area: "+width+"x"+height);
+
+		int anzPerWidth = width / (TILESIZE+2);
+		virtualWidth = anzPerWidth * (TILESIZE+2);
+		double max = Attribute.maxAttRef;
+		int anzPerHeight = (int) java.lang.Math.ceil(max / anzPerWidth);
+		iap.virtualSize.set(0,0,virtualWidth ,anzPerHeight * (TILESIZE+2));
+		Global.getPref().log("[AttributesSelector:setIapSize] virt. area: "+virtualWidth+"x"+anzPerHeight * (TILESIZE+2));
+
 	}
-*/	
-}
+
+	public void changeIapSize(int width, int height) {
+		Global.getPref().log("[AttributesSelector:changeIapSize]  max. area: "+width+"x"+height);
+		setIapSize(width-W_OFFSET, height-H_OFFSET);
+		showAttributePalette();
+	}
+
+}
\ No newline at end of file

Modified: branches/r1.2/src/CacheWolf/CacheHolder.java
===================================================================
--- branches/r1.2/src/CacheWolf/CacheHolder.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/CacheHolder.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -682,7 +682,7 @@
 		String shortName=shortenName(cacheName, shortNameLength);
 		varParams.put("SHORTNAME", shortName);
 		varParams.put("TRAVELBUG", (bugs?"Y":"N"));
-		varParams.put("GMTYPE", gm != null ? gm.getIcon(this) : "");
+		if (gm!=null) varParams.put("GMTYPE", gm.getIcon(this));
 		varParams.put("NOW_DATE",nowdate().setToCurrentTime().toString());
 		varParams.put("NOW_TIME",nowtime().setToCurrentTime().toString());
 		varParams.put("CACHEID", GetCacheID());

Modified: branches/r1.2/src/CacheWolf/DateTimeChooser.java
===================================================================
--- branches/r1.2/src/CacheWolf/DateTimeChooser.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/DateTimeChooser.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -120,9 +120,9 @@
 	public CellPanel addTopSection(CellPanel addTo,Control cp) {
 		int IconSize;
 		if (Vm.isMobile() && MyLocale.getScreenWidth() >= 400)
-			IconSize = 20;
+			IconSize = 30;
 		else
-			IconSize = 10;
+			IconSize = 30;
 		addTo.modify(DrawFlat,0);
 		addTo.defaultTags.set(INSETS,new Insets(0,0,0,0));
 		mButton b = new mButton();

Modified: branches/r1.2/src/CacheWolf/DescriptionPanel.java
===================================================================
--- branches/r1.2/src/CacheWolf/DescriptionPanel.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/DescriptionPanel.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -26,6 +26,7 @@
 package CacheWolf;
 
 import com.stevesoft.ewe_pat.Regex;
+import com.stevesoft.ewe_pat.Transformer;
 
 import ewe.fx.Font;
 import ewe.sys.Vm;
@@ -44,7 +45,7 @@
 */
 public class DescriptionPanel extends CellPanel{
 	HtmlDisplay disp = new HtmlDisplay();
-	mButton btnPlus, btnMinus;
+	mButton btnPlus, btnMinus, btnText, btnHtml;
 	CacheHolder currCache;
 	
 	CellPanel buttonP = new CellPanel();
@@ -54,6 +55,8 @@
 
 	public DescriptionPanel(){
 		buttonP.addNext(btnPlus = new mButton("+"),CellConstants.HSTRETCH, (CellConstants.HFILL));
+		buttonP.addNext(btnText = new mButton("Text"),CellConstants.HSTRETCH, (CellConstants.HFILL));
+		buttonP.addNext(btnHtml = new mButton("Html"),CellConstants.HSTRETCH, (CellConstants.HFILL));
 		buttonP.addLast(btnMinus = new mButton("-"),CellConstants.HSTRETCH, (CellConstants.HFILL));
 		ScrollBarPanel sbp = new MyScrollBarPanel(disp, 0);
 		//sbp.setScrollBarSize(40,40, 20);
@@ -203,6 +206,27 @@
 				disp.displayPropertiesChanged();
 				//redraw();
 			}
+			if (ev.target == btnText){
+	            disp.startHtml(); // To clear the old HTML display
+	            disp.endHtml();
+	    		Transformer trans = new Transformer(true);
+	    		trans.add(new Regex("\r", ""));
+	    		trans.add(new Regex("\n", " "));
+	    		trans.add(new Regex("<br>", "\n"));
+	    		trans.add(new Regex("<p>", "\n"));
+	    		trans.add(new Regex("<hr>", "\n"));
+	    		trans.add(new Regex("<br />", "\n"));
+	    		trans.add(new Regex("<(.*?)>", ""));
+	    		Transformer ttrans=new Transformer(true);
+	    		ttrans.add(new Regex("<(.*?)>", ""));
+	    		disp.setPlainText(ttrans.replaceAll(trans.replaceAll(desc)));
+			}
+			if (ev.target == btnHtml){
+	            disp.startHtml();
+	            disp.getDecoderProperties().set("documentroot", Global.getProfile().dataDir);
+	            disp.addHtml(desc, new ewe.sys.Handle());
+	            disp.endHtml();
+			}
 		}
 		super.onEvent(ev);
 	}

Modified: branches/r1.2/src/CacheWolf/DetailsPanel.java
===================================================================
--- branches/r1.2/src/CacheWolf/DetailsPanel.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/DetailsPanel.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -354,7 +354,7 @@
 		btnCoordinates.setText(ch.pos.toString());
 		inpHidden.setText(mainCache.getDateHidden());
 		inpOwner.setText(mainCache.getCacheOwner());
-		chcStatus.setText(cache.getStatusText());
+		chcStatus.setText(ch.getStatusText());
 		chcType.setInt(CacheType.cw2GuiSelect(ch.getType()));
 		if (ch.is_black()) {
 			btnBlack.image = imgBlack;

Modified: branches/r1.2/src/CacheWolf/FilterScreen.java
===================================================================
--- branches/r1.2/src/CacheWolf/FilterScreen.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/FilterScreen.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -318,9 +318,9 @@
 		//////////////////////////
 		
 		if (MyLocale.getScreenHeight()>240) addTitle(pnlCacheAttributes,MyLocale.getMsg(737,"Attributes"));
-		pnlCacheAttributes.addNext(new mLabel(MyLocale.getMsg(739,"Filter on")+":"), CellConstants.DONTSTRETCH, CellConstants.FILL);
-		pnlCacheAttributes.addLast(chcAttrib = new mChoice(new String[]{MyLocale.getMsg(740,"all"), MyLocale.getMsg(741,"one"), MyLocale.getMsg(742,"none")},0),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
-		pnlCacheAttributes.addLast(attV=new AttributesSelector(), CellConstants.STRETCH|CellConstants.LEFT/*|CellConstants.BORDER*/, CellConstants.STRETCH);
+		pnlCacheAttributes.addNext(new mLabel(MyLocale.getMsg(739,"Filter on")+":"), CellConstants.DONTSTRETCH, CellConstants.LEFT);
+		pnlCacheAttributes.addLast(chcAttrib = new mChoice(new String[]{MyLocale.getMsg(740,"all"), MyLocale.getMsg(741,"one"), MyLocale.getMsg(742,"none")},0),CellConstants.DONTSTRETCH, CellConstants.LEFT);
+		pnlCacheAttributes.addLast(attV=new AttributesSelector(), DONTSTRETCH, CENTER|TOP);
 		long[] ini = {0l,0l,0l,0l};
 		attV.setSelectionMasks(ini);
 		
@@ -394,8 +394,13 @@
 		// Populating the comboBox of saved filters
 		buildFilterList();
 	}
+
+    public void resizeTo(int width, int height) {
+		attV.changeIapSize(width, height);
+		this.relayout(true);
+		super.resizeTo(width,height);
+	}
 	
-	
 	public void setData(FilterData data){
 
 		//////////////////////////
@@ -776,8 +781,7 @@
 				}
 			}
 			setColors();
-		}
-
+		}	
 	}
 	
 	/**

Modified: branches/r1.2/src/CacheWolf/MainTab.java
===================================================================
--- branches/r1.2/src/CacheWolf/MainTab.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/MainTab.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -298,8 +298,9 @@
 		tbP.selectRow(row);
 	switch (panelNo) {// Switch by panel number
 		case 1:  // DetailsPanel
-			ch=chi; // wrong (old) detail if map is called directly
+			ch=chi; //possibly wrong (old) detail if map is called directly
 			onEnteringPanel(1);
+			oldCard=1;
 			select(detP);
 			break;
 		case 2: // Description Panel

Modified: branches/r1.2/src/CacheWolf/MyLocale.java
===================================================================
--- branches/r1.2/src/CacheWolf/MyLocale.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/MyLocale.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -405,6 +405,7 @@
 				String key=got.substring(0,eq).trim();
 				String value=STRreplace.replace(got.substring(eq+1).trim(),"\\n","\n");
 				if (value.endsWith("+")) { value=value.substring(0, value.length()-1)+' '; }
+				if (value.startsWith("+")) { value=' ' + value.substring(1, value.length()); }
 				tcn.getProperties().add(key,value);
 			}
 		}

Modified: branches/r1.2/src/CacheWolf/Parser.java
===================================================================
--- branches/r1.2/src/CacheWolf/Parser.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/Parser.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -79,6 +79,7 @@
 import ewe.util.Hashtable;
 import ewe.util.Iterator;
 import ewe.util.Vector;
+import ewe.util.mString;
 
 /**
 *	The wolf language parser. New version - January 2007
@@ -142,7 +143,7 @@
      	new fnType("deg2rad","deg2rad",2),
      	new fnType("distance","distance",4),
      	new fnType("encode","encode",8),
-    	new fnType("format","format",6),
+    	new fnType("format","format",12),
     	new fnType("goto","goto",6),
     	new fnType("ic","ic",3),
     	new fnType("ignorecase","ic",3),
@@ -547,14 +548,23 @@
      * @param nargs 1 or 2 args
      */
     private String funcFormat(int nargs) throws Exception {
+    	int spart=0;
+    	if (nargs==3) spart=(int) popCalcStackAsNumber(0);
     	String fmtStr="";
-    	if (nargs==2)fmtStr=popCalcStackAsString().toLowerCase();
+    	if (nargs>=2)fmtStr=popCalcStackAsString().toLowerCase();
     	String coord=popCalcStackAsString();
 		if (!isValidCoord(coord)) err(MyLocale.getMsg(1712,"Invalid coordinate: ")+coord);
     	cwPt.set(coord);
     	int fmt = TransformCoordinates.getLocalSystemCode(fmtStr);
     	if (fmt == TransformCoordinates.LOCALSYSTEM_NOT_SUPPORTED) err(MyLocale.getMsg(1713,"Invalid coordinate format. Allowed are cw / dd / dmm / dms / ") + Common.arrayToString(TransformCoordinates.getProjectedSystemIDs(), " / "));
-    	return cwPt.toString(fmt);
+    	String ret = cwPt.toString(fmt);
+    	if (nargs==3){
+    		String[] parts=mString.split(ret, ' ');
+    		if (spart>0 && parts.length>=spart)
+    		ret = parts[spart-1];
+    		else err("Param 3 !!! "+MyLocale.getMsg(1713,"Invalid coordinate format."));
+    	}
+    	return ret;
     }
 
     /** Implements a goto command goto(coordinate,optionalWaypointName).

Modified: branches/r1.2/src/CacheWolf/SafeXML.java
===================================================================
--- branches/r1.2/src/CacheWolf/SafeXML.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/SafeXML.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -301,31 +301,35 @@
     } // end insertEntities
 	
 	
+
+	/**
+	 * Converts a data string to something that is safe to use inside
+	 * an XML file (like prefs.xml) - entities like &amp; are *NOT*
+	 * valid XML unless declared specially, so we must use the numerical
+	 * values here.
+	 *
+	 * @param src (String) raw text to be processed
+	 *
+	 * @return (String) translated text, or null if input is null
+	 */
 	public final static String cleanGPX(String str){
 		String dummy = new String();
 		
-		dummy = STRreplace.replace(str, "&","&amp;"); // why is this here? in a CDATA section this is not necessary, see http://de.wikipedia.org/wiki/CDATA
+		dummy = STRreplace.replace(str, "&","&amp;");
 		dummy = STRreplace.replace(dummy, "<", "&lt;");
 		dummy = STRreplace.replace(dummy, ">", "&gt;");
-		//dummy = replace(dummy, "&nbsp;", "&amp;nbsp;");
 		dummy = STRreplace.replace(dummy, "\"", "&quot;");
 		dummy = STRreplace.replace(dummy, "'","&apos;");
+		// why
 		dummy = STRreplace.replace(dummy, "\u0004","");
-		dummy = STRreplace.replace(dummy, "]]>","]] >"); // this means changing content, but it is the easiest way of avoiding ]]> to be interpreted as endmark of CDATA-section
+		// this means changing content, 
+		// but it is the easiest way of avoiding ]]> to be interpreted as endmark of CDATA-section
+		dummy = STRreplace.replace(dummy, "]]>","]] >");
+		// \ in gpx is not imported by mapsource, basecamp, garmin?...(there is no replacement)
+		dummy = STRreplace.replace(dummy, "\\","BkSlsh;");
 
 		return dummy;
 	}
-
-	/**
-	 * Converts a data string to something that is safe to use inside
-	 * an XML file (like prefs.xml) - entities like &amp; are *NOT*
-	 * valid XML unless declared specially, so we must use the numerical
-	 * values here.
-	 *
-	 * @param src (String) raw text to be processed
-	 *
-	 * @return (String) translated text, or null if input is null
-	 */
 	public final static String strxmlencode(boolean src) {
 		/* bools are always safe */
 		return (src ? "true" : "false");

Modified: branches/r1.2/src/CacheWolf/StatusBar.java
===================================================================
--- branches/r1.2/src/CacheWolf/StatusBar.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/StatusBar.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -27,6 +27,7 @@
 
 import ewe.fx.Color;
 import ewe.fx.mImage;
+import ewe.sys.Vm;
 import ewe.ui.CellConstants;
 import ewe.ui.CellPanel;
 import ewe.ui.ControlConstants;
@@ -100,7 +101,8 @@
 			oldInfo=strInfo;				
 		}
 		String strStatus="";
-		boolean bigScreen=(MyLocale.getScreenWidth()>=480) && !(MobileVGA && (pref.fontSize > 20));
+		// boolean bigScreen=(MyLocale.getScreenWidth()>=480) && !(MobileVGA && (pref.fontSize > 20));
+		boolean bigScreen=!Vm.isMobile();
 		strStatus += MyLocale.getMsg(4500,"Tot:") + " " + stats.total(bigScreen) + " " +
 					MyLocale.getMsg(4501,"Dsp:") + " " + stats.visible(bigScreen) + " " +
 					MyLocale.getMsg(4502,"Fnd:") + " " + stats.totalFound() + "  ";

Modified: branches/r1.2/src/CacheWolf/exp/GarminMap.java
===================================================================
--- branches/r1.2/src/CacheWolf/exp/GarminMap.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/exp/GarminMap.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -29,6 +29,7 @@
 import CacheWolf.CacheSize;
 import CacheWolf.CacheTerrDiff;
 import CacheWolf.Global;
+import ewe.io.File;
 import ewe.io.FileBase;
 import ewe.util.Vector;
 import ewesoft.xml.MinML;
@@ -41,17 +42,24 @@
  *
  */
 public class GarminMap extends MinML {
-
 	private Vector symbols=new Vector(24);
-
 	String lastName;
-	public void readGarminMap(){
+	public boolean exists=false;
+	public GarminMap(){
 		try{
-			String datei = FileBase.getProgramDirectory() + "/garminmap.xml";
+			String datei = FileBase.getProgramDirectory() + "/exporticons/garminmap.xml"; //own version
+			if (!new File(datei).exists()) {
+				datei=FileBase.getProgramDirectory() + "/exporticons/exporticons/garminmap.xml"; //cw default version
+				if (!new File(datei).exists()) {
+					return;
+				}
+			}
 			ewe.io.Reader r = new ewe.io.InputStreamReader(new ewe.io.FileInputStream(datei));
 			parse(r);
 			r.close();
+			exists=true;
 		}catch(Exception e){
+			exists=false;
 			if (e instanceof NullPointerException)
 				Global.getPref().log("Error reading garminmap.xml: NullPointerException in Element "+lastName +". Wrong attribute?",e,true);
 			else
@@ -66,21 +74,22 @@
 					atts.getValue("status"),atts.getValue("poiid"),atts.getValue("ozicolor")));
 		}
 	}
-
 	public String getIcon(CacheHolder ch) {
-		int mapSize=symbols.size();
-		// Try each icon in turn
-		for (int i=0; i<mapSize; i++) {
-			IconMap icon=(IconMap) symbols.get(i);
-			boolean match=true;
-			// If a certain attribute is not null it must match the current caches values
-			match=match && ((icon.type==null) || icon.type.equals(String.valueOf(ch.getType())));
-			match=match && ((icon.size==null) || ch.getCacheSize()==0 || icon.size.equalsIgnoreCase(CacheSize.getExportShortId(ch.getCacheSize())));
-			match=match && ((icon.terrain==null) || ch.getTerrain()==0 || icon.terrain.equals(CacheTerrDiff.shortDT(ch.getTerrain())));
-			match=match && ((icon.difficulty==null) ||  ch.getHard()==0 || icon.difficulty.equals(CacheTerrDiff.shortDT(ch.getHard())));
-			match=match && ((icon.status==null) ||  ch.getCacheStatus().startsWith(icon.status));
-			match=match && ((icon.found==null) || ch.is_found());
-			if (match) return icon.name;
+		if (exists) {
+			int mapSize=symbols.size();
+			// Try each icon in turn
+			for (int i=0; i<mapSize; i++) {
+				IconMap icon=(IconMap) symbols.get(i);
+				boolean match=true;
+				// If a certain attribute is not null it must match the current caches values
+				match=match && ((icon.type==null) || icon.type.equals(String.valueOf(ch.getType())));
+				match=match && ((icon.size==null) || ch.getCacheSize()==0 || icon.size.equalsIgnoreCase(CacheSize.getExportShortId(ch.getCacheSize())));
+				match=match && ((icon.terrain==null) || ch.getTerrain()==0 || icon.terrain.equals(CacheTerrDiff.shortDT(ch.getTerrain())));
+				match=match && ((icon.difficulty==null) ||  ch.getHard()==0 || icon.difficulty.equals(CacheTerrDiff.shortDT(ch.getHard())));
+				match=match && ((icon.status==null) ||  ch.getCacheStatus().startsWith(icon.status));
+				match=match && ((icon.found==null) || ch.is_found());
+				if (match) return icon.name;
+			}
 		}
 
 		// If it is not a mapped type, just use the standard mapping
@@ -89,43 +98,44 @@
 		else
 			return "Geocache";
 	}
-	
 	public String getPoiId(CacheHolder ch) {
-		int mapSize=symbols.size();
-		// Try each icon in turn
-		for (int i=0; i<mapSize; i++) {
-			IconMap icon=(IconMap) symbols.get(i);
-			boolean match=true;
-			// If a certain attribute is not null it must match the current caches values
-			match=match && ((icon.type==null) || ch.getType()==0 || icon.type.equals(String.valueOf(ch.getType())));
-			match=match && ((icon.size==null) || ch.getCacheSize()==0 || icon.size.equalsIgnoreCase(CacheSize.getExportShortId(ch.getCacheSize())));
-			match=match && ((icon.terrain==null) || ch.getTerrain()==0 || icon.terrain.equals(CacheTerrDiff.shortDT(ch.getTerrain())));
-			match=match && ((icon.difficulty==null) ||  ch.getHard()==0 || icon.difficulty.equals(CacheTerrDiff.shortDT(ch.getHard())));
-			match=match && ((icon.status==null) ||  ch.getCacheStatus().startsWith(icon.status));
-			match=match && ((icon.found==null) || ch.is_found());
-			if (match) return icon.poiId;
+		if (exists) {
+			int mapSize=symbols.size();
+			// Try each icon in turn
+			for (int i=0; i<mapSize; i++) {
+				IconMap icon=(IconMap) symbols.get(i);
+				boolean match=true;
+				// If a certain attribute is not null it must match the current caches values
+				match=match && ((icon.type==null) || ch.getType()==0 || icon.type.equals(String.valueOf(ch.getType())));
+				match=match && ((icon.size==null) || ch.getCacheSize()==0 || icon.size.equalsIgnoreCase(CacheSize.getExportShortId(ch.getCacheSize())));
+				match=match && ((icon.terrain==null) || ch.getTerrain()==0 || icon.terrain.equals(CacheTerrDiff.shortDT(ch.getTerrain())));
+				match=match && ((icon.difficulty==null) ||  ch.getHard()==0 || icon.difficulty.equals(CacheTerrDiff.shortDT(ch.getHard())));
+				match=match && ((icon.status==null) ||  ch.getCacheStatus().startsWith(icon.status));
+				match=match && ((icon.found==null) || ch.is_found());
+				if (match) return icon.poiId;
+			}
 		}
 		return null;
 	}
-	
 	public String ozicolor(CacheHolder ch) {
-		int mapSize=symbols.size();
-		// Try each icon in turn
-		for (int i=0; i<mapSize; i++) {
-			IconMap icon=(IconMap) symbols.get(i);
-			boolean match=true;
-			// If a certain attribute is not null it must match the current caches values
-			match=match && ((icon.type==null) || ch.getType()==0 || icon.type.equals(String.valueOf(ch.getType())));
-			match=match && ((icon.size==null) || ch.getCacheSize()==0 || icon.size.equalsIgnoreCase(CacheSize.getExportShortId(ch.getCacheSize())));
-			match=match && ((icon.terrain==null) || ch.getTerrain()==0 || icon.terrain.equals(CacheTerrDiff.shortDT(ch.getTerrain())));
-			match=match && ((icon.difficulty==null) ||  ch.getHard()==0 || icon.difficulty.equals(CacheTerrDiff.shortDT(ch.getHard())));
-			match=match && ((icon.status==null) ||  ch.getCacheStatus().startsWith(icon.status));
-			match=match && ((icon.found==null) || ch.is_found());
-			if (match) return icon.ozicolor;
+		if (exists) {
+			int mapSize=symbols.size();
+			// Try each icon in turn
+			for (int i=0; i<mapSize; i++) {
+				IconMap icon=(IconMap) symbols.get(i);
+				boolean match=true;
+				// If a certain attribute is not null it must match the current caches values
+				match=match && ((icon.type==null) || ch.getType()==0 || icon.type.equals(String.valueOf(ch.getType())));
+				match=match && ((icon.size==null) || ch.getCacheSize()==0 || icon.size.equalsIgnoreCase(CacheSize.getExportShortId(ch.getCacheSize())));
+				match=match && ((icon.terrain==null) || ch.getTerrain()==0 || icon.terrain.equals(CacheTerrDiff.shortDT(ch.getTerrain())));
+				match=match && ((icon.difficulty==null) ||  ch.getHard()==0 || icon.difficulty.equals(CacheTerrDiff.shortDT(ch.getHard())));
+				match=match && ((icon.status==null) ||  ch.getCacheStatus().startsWith(icon.status));
+				match=match && ((icon.found==null) || ch.is_found());
+				if (match) return icon.ozicolor;
+			}
 		}
-		return null;
+		return "16777215"; // default color
 	}
-
 	private class IconMap {
 		public String type;
 		public String name;
@@ -149,5 +159,4 @@
 			this.ozicolor = ozicolor;
 		}
 	}
-
 }

Modified: branches/r1.2/src/CacheWolf/exp/GpxExportNg.java
===================================================================
--- branches/r1.2/src/CacheWolf/exp/GpxExportNg.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/exp/GpxExportNg.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -117,7 +117,7 @@
 	/** string representation of false */
 	final static String FALSE = "False";
 	/** object used to determine custom symbols and POI categories */
-	private static GarminMap poiMapper;
+	private static GarminMap poiMapper = new GarminMap();
 	/** maximum number of logs to export. can be overwritten with preferences, default unlimited*/
 	private int maxLogs = ewe.math.Number.INTEGER_MAX_VALUE;
 	/** number of errors / warnings during export */
@@ -165,18 +165,17 @@
 	private static int exportStyle;
 
 	private static boolean hasBitmaps;
-	private static boolean hasGarminMap;
 	private static boolean hasGpsbabel;
 
 	private static String bitmapFileName;
-	private static String garminMapFileName;
 
 	public GpxExportNg() {
-		garminMapFileName = FileBase.getProgramDirectory() + "/garminmap.xml";
-		bitmapFileName = FileBase.getProgramDirectory()	+ FileBase.separator + "GarminPOI.zip";
+		bitmapFileName = FileBase.getProgramDirectory() + "/exporticons/GarminPOI.zip"; //own version
+		if (!(hasBitmaps=new File(bitmapFileName).exists())) {
+			bitmapFileName=FileBase.getProgramDirectory() + "/exporticons/exporticons/GarminPOI.zip"; //cw default version
+			hasBitmaps=new File(bitmapFileName).exists();			
+		}
 
-		hasGarminMap = new File(garminMapFileName).exists();
-		hasBitmaps = new File(bitmapFileName).exists();
 		hasGpsbabel = Global.getPref().gpsbabel != null;
 
 		finderid = Global.getPref().gcMemberId;
@@ -187,7 +186,7 @@
 		GpxExportNgForm exportOptions;
 		int ret;
 
-		exportOptions = new GpxExportNgForm(hasGarminMap, hasBitmaps, hasGpsbabel);
+		exportOptions = new GpxExportNgForm(poiMapper.exists, hasBitmaps, hasGpsbabel);
 		ret = exportOptions.execute();
 
 		if (FormBase.IDCANCEL == ret) {
@@ -230,10 +229,7 @@
 				Global.getPref().setExportPath(expName + "-GPI", outDir);
 			}
 
-			if ((new File(baseDir + "/garminmap.xml")).exists()) {
-				poiMapper = new GarminMap();
-				poiMapper.readGarminMap();
-			} else {
+			if (!poiMapper.exists) {
 				Global.getPref().log("GPX Export: unable to load garminmap.xml",null);
 				new MessageBox("Export Error", "unable to load garminmap.xml",
 						FormBase.OKB).execute();
@@ -406,10 +402,7 @@
 			}
 		} else {
 			if (customIcons) {
-				if ((new File(FileBase.getProgramDirectory() + "/garminmap.xml")).exists()) {
-					poiMapper = new GarminMap();
-					poiMapper.readGarminMap();
-				} else {
+				if (!poiMapper.exists) {
 					customIcons = false;
 					Global.getPref().log("unable to load garminmap.xml",null);
 				}
@@ -516,7 +509,7 @@
 						while (errorStream.isOpen()) {
 							String errorMsg = errorStream.readALine();
 							if (errorMsg != null) {
-								Global.getPref().log("GPX Export: " + errorMsg,null);
+								Global.getPref().log("[GPX Export:sendToGarmin] " + errorMsg,null);
 								exportErrors++;
 							}
 							try {
@@ -550,7 +543,7 @@
 			return "";
 
 		if (!ch.pos.isValid()) {
-			Global.getPref().log("GPX Export: " + ch.getWayPoint() + " has invalid coords.",null);
+			Global.getPref().log("[GPX Export:formatCache] " + ch.getWayPoint() + " has invalid coords.");
 			return "";
 		}
 
@@ -676,7 +669,7 @@
 			} else if (ch.isCustomWpt()) {
 				ret.append("    <sym>Custom</sym>").append(newLine);
 			} else if (ch.is_found()) {
-				ret.append("    <sym>Geocache found</sym>").append(newLine);
+				ret.append("    <sym>Geocache Found</sym>").append(newLine);
 			} else {
 				ret.append("    <sym>Geocache</sym>").append(newLine);
 			}

Modified: branches/r1.2/src/CacheWolf/exp/LocExporter.java
===================================================================
--- branches/r1.2/src/CacheWolf/exp/LocExporter.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/exp/LocExporter.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -53,10 +53,7 @@
 		if (Global.getPref().addDetailsToName) {
 			this.setNeedCacheDetails(true);
 		}
-		if ((new File(FileBase.getProgramDirectory()+"/garminmap.xml")).exists()) {
-			gm=new GarminMap();
-			gm.readGarminMap();
-		}
+		gm=new GarminMap();
 	}
 
 	public String header () {
@@ -97,14 +94,7 @@
 		strBuf.append("\" lon=\"");
 		strBuf.append(ch.pos.getLonDeg(CWPoint.DD));
 		strBuf.append("\"/>\r\n   <type>");
-		if (gm!=null) {
-			strBuf.append(gm.getIcon(ch));
-		} else {
-			if (ch.is_found())
-				strBuf.append("Geocache Found");
-			else
-				strBuf.append("Geocache");
-		}
+		strBuf.append(gm.getIcon(ch));
 		strBuf.append("</type>\r\n</waypoint>\r\n");
 		return strBuf.toString();
 	}

Modified: branches/r1.2/src/CacheWolf/exp/OziExporter.java
===================================================================
--- branches/r1.2/src/CacheWolf/exp/OziExporter.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/exp/OziExporter.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -37,18 +37,13 @@
 */
 public class OziExporter extends Exporter{
 	
-	GarminMap poiMapper;
+	GarminMap oziColorMapper;
 	
 	public OziExporter(Preferences p, Profile prof){
 		super();
 		this.setHowManyParams(LAT_LON);
 		this.setMask("*.wpt");
-		if ((new File(FileBase.getProgramDirectory()+"/garminmap.xml")).exists()) {
-			poiMapper=new GarminMap();
-			poiMapper.readGarminMap();
-		} else {
-			poiMapper = null;
-		}
+		oziColorMapper=new GarminMap();
 	}
 	
 	public String header () {
@@ -97,13 +92,7 @@
 		// Field 9 : Foreground Color (RGB value)
 		strBuf.append("0,");
 		// Field 10 : Background Color (RGB value)
-		String color="16777215";
-		if (poiMapper != null) {
-			String tmpcolor = poiMapper.ozicolor(ch);
-			if (tmpcolor != null)
-				color = tmpcolor;
-		}
-		strBuf.append(color+",");
+		strBuf.append(oziColorMapper.ozicolor(ch)+",");
 		// Field 11 : Description (max 40), no commas
 		tmpName = simplifyString(ch.getCacheName()).replace(',', ' ');
 		if (tmpName.length() <= 40){

Modified: branches/r1.2/src/CacheWolf/exp/TPLExporter.java
===================================================================
--- branches/r1.2/src/CacheWolf/exp/TPLExporter.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/exp/TPLExporter.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -212,7 +212,6 @@
 		expName = tmpFile.getName();
 		expName = expName.substring(0, expName.indexOf("."));
 		gm=new GarminMap();
-		gm.readGarminMap();
 	}
 
 	public void doIt(){

Modified: branches/r1.2/src/CacheWolf/imp/GPXImporter.java
===================================================================
--- branches/r1.2/src/CacheWolf/imp/GPXImporter.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/imp/GPXImporter.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -25,6 +25,8 @@
     */
 package CacheWolf.imp;
 
+import com.stevesoft.ewe_pat.Regex;
+
 import CacheWolf.CacheDB;
 import CacheWolf.CacheHolder;
 import CacheWolf.CacheSize;
@@ -41,6 +43,7 @@
 import CacheWolf.STRreplace;
 import CacheWolf.SafeXML;
 import CacheWolf.Travelbug;
+import CacheWolf.imp.SpiderGC.SpiderProperties;
 import ewe.io.FileInputStream;
 import ewe.sys.Time;
 import ewe.sys.Vm;
@@ -82,6 +85,7 @@
 	public static final int DOIT_NOSPOILER = 1;
 	public static final int DOIT_WITHSPOILER = 2;
 	SpiderGC imgSpider;
+	SpiderProperties propsSpider;
 	StringBuffer strBuf;
 	private int doitHow;
 	
@@ -537,20 +541,31 @@
 		
 		// just to be sure to have a spider object
 		if (imgSpider == null) imgSpider = new SpiderGC(pref, profile, false);
+		if (propsSpider == null) {propsSpider = imgSpider.new SpiderProperties();	}
 		
-		if (fromTC) {
-				imgSpider.getImages(holder.getCacheDetails(false).LongDescription, holder.getCacheDetails(false));
+		try {
+				if (fromTC) {
+						imgSpider.getImages(holder.getCacheDetails(false).LongDescription, holder.getCacheDetails(false),false);
+				}
+				else {
+					addr = "http://www.geocaching.com/seek/cache_details.aspx?wp=" + holder.getWayPoint() ;
+					cacheText = SpiderGC.fetch(addr,false);
+					if (cacheText.indexOf(propsSpider.getProp("premiumCachepage")) > 0) {
+						// Premium cache spidered by non premium member
+						imgSpider.getImages(holder.getCacheDetails(false).LongDescription, holder.getCacheDetails(false),false);
+					}
+					else {
+						imgSpider.getImages(cacheText, holder.getCacheDetails(false),true);
+					}
+					try {
+						imgSpider.getAttributes(cacheText, holder.getCacheDetails(false));
+					} catch (Exception e) {
+						pref.log("unable to fetch attrivbutes for"+holder.getWayPoint(), e);
+					}
+				}
+		} catch (Exception e1) {
+			// e1.printStackTrace();
 		}
-		else {
-			addr = "http://www.geocaching.com/seek/cache_details.aspx?wp=" + holder.getWayPoint() ;
-			cacheText = SpiderGC.fetch(addr,false);
-			imgSpider.getImages(cacheText, holder.getCacheDetails(false));
-			try {
-				imgSpider.getAttributes(cacheText, holder.getCacheDetails(false));
-			} catch (Exception e) {
-				pref.log("unable to fetch attrivbutes for"+holder.getWayPoint(), e);
-			}
-		}
 	}
 	
 	public int getHow() {

Modified: branches/r1.2/src/CacheWolf/imp/OCXMLImporter.java
===================================================================
--- branches/r1.2/src/CacheWolf/imp/OCXMLImporter.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/imp/OCXMLImporter.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -446,12 +446,12 @@
 			holder.setWayPoint(atts.getValue("oc"));
 			String CName = atts.getValue("nccom") + " " + atts.getValue("gccom");
 			if (!CName.equals(" ")) {
-				holder.setCacheName(CName.trim() + " " + holder.getCacheName());
-				holder.getCacheDetails(false).attributes.add(7); // not only OC
+				holder.setCacheOwner(holder.getCacheOwner() + " / " + CName.trim());
+				holder.getCacheDetails(false).attributes.add(7); // wwwlink
 				holder.setAttribsAsBits(holder.getCacheDetails(false).attributes.getAttribsAsBits());
 			}
 			else {
-				holder.getCacheDetails(false).attributes.add(6); // only OC
+				holder.getCacheDetails(false).attributes.add(6); // oconly
 				holder.setAttribsAsBits(holder.getCacheDetails(false).attributes.getAttribsAsBits());
 			}
 			if (holder.getWayPoint().length()==0) throw new IllegalArgumentException("empty waypointname"); // this should not happen - it is likey a bug in opencaching / it happens on 27-12-2006 on cache OC143E

Modified: branches/r1.2/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- branches/r1.2/src/CacheWolf/imp/SpiderGC.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/imp/SpiderGC.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -352,7 +352,7 @@
 				MyLocale.getMsg(652,"Update caches with all details?"),
 				MessageBox.YESB | MessageBox.NOB | MessageBox.CANCELB).execute();
 		boolean complete = answer == MessageBox.YESB;
-		if ( answer == MessageBox.CANCELB) {
+		if ( answer == MessageBox.IDCANCEL) {
 			if (startPos != null) pref.setCurCentrePt(startPos);
 			return;
 		}
@@ -613,19 +613,24 @@
 	private void addCaches(String listPage, boolean setCachesToLoad) {
 		String[] caches = mString.split(listPage, '{');
 		//int posId=0;        //id egal
-		int posName=1;      //nn
-		int posWP=2;        //gc 
-		int posLat=3;       //lat
-		int posLon=4;       //lon
-		int posType=5;      //ctid
-		int posFound=6;     //f
-		int posOwn=7;       //o
-		int posAvailable=8; //ia
+		//int posName=1;      //nn
+		
+		//positions decreased by 2, because we cut away the name to prevent parsing errors
+		int posWP=0;        //gc 
+		int posLat=1;       //lat
+		int posLon=2;       //lon
+		int posType=3;      //ctid
+		int posFound=4;     //f
+		int posOwn=5;       //o
+		int posAvailable=6; //ia
 		// ignoring first 3 lines
 		for (int i = 3; i < caches.length; i++) {
 			if (infB.isClosed) return;
-			String elements[] = mString.split(caches[i], ',');
 			
+			//cut away name to prevent parsing errors			
+			int WpIndex = caches[i].indexOf("\"gc\"");
+			String elements[] = mString.split(caches[i].substring(WpIndex), ',');
+			
 			boolean found = (elements[posFound].indexOf("true") > -1 ? true : false);
 			if (found && doNotgetFound)	continue;
 			
@@ -642,7 +647,10 @@
 				String lon = mString.split(elements[posLon], ':')[1];
 				String own = mString.split(elements[posOwn], ':')[1];
 				boolean available = (elements[posAvailable].indexOf("true") > -1 ? true : false);
-				String cacheName = mString.split(elements[posName], '\"')[3];
+				
+				int NameIndex = caches[i].indexOf("\"nn\"");
+				String cacheName = caches[i].substring (NameIndex + 6, WpIndex - 2 );
+				cacheName = STRreplace.replace(cacheName, "\\\"", "\"" );
 
 				ch = new CacheHolder();
 				ch.setWayPoint(wp);
@@ -2096,8 +2104,7 @@
 						// Images
 						// ==========
 						if (fetchImages) {
-							getImages(completeWebPage, ch
-									.getCacheDetails(false));
+							getImages(completeWebPage, ch.getCacheDetails(false),true);
 							pref.log("Got images");
 						}
 						// ==========
@@ -2520,7 +2527,7 @@
 	 * @param chD
 	 *            The Cachedetails
 	 */
-	public void getImages(String doc, CacheHolderDetail chD) {
+	public void getImages(String doc, CacheHolderDetail chD, boolean extractLongDesc) {
 		int imgCounter = 0;
 		int spiderCounter = 0;
 		String fileName, imgName, imgType, imgUrl, imgComment;
@@ -2531,8 +2538,7 @@
 		CacheImages lastImages = null;
 
 		// First: Get current image object of waypoint before spidering images.
-		CacheHolder oldCh = Global.getProfile().cacheDB.get(chD.getParent()
-				.getWayPoint());
+		CacheHolder oldCh = Global.getProfile().cacheDB.get(chD.getParent().getWayPoint());
 		if (oldCh != null) {
 			lastImages = oldCh.getCacheDetails(false).images;
 		}
@@ -2542,7 +2548,7 @@
 		// ========
 		String longDesc = "";
 		try {
-			if (chD.getParent().getWayPoint().startsWith("TC"))
+			if (chD.getParent().getWayPoint().startsWith("TC") || !extractLongDesc)
 				longDesc = doc;
 			else
 				longDesc = getLongDesc(doc);

Modified: branches/r1.2/src/CacheWolf/navi/MovingMap.java
===================================================================
--- branches/r1.2/src/CacheWolf/navi/MovingMap.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/navi/MovingMap.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -30,6 +30,7 @@
 import CacheWolf.CacheHolder;
 import CacheWolf.CacheSize;
 import CacheWolf.CacheTerrDiff;
+import CacheWolf.CacheType;
 import CacheWolf.Common;
 import CacheWolf.Global;
 import CacheWolf.GuiImageBroker;
@@ -37,6 +38,7 @@
 import CacheWolf.MainTab;
 import CacheWolf.MyLocale;
 import CacheWolf.Preferences;
+import CacheWolf.STRreplace;
 import CacheWolf.navi.touchControls.ICommandListener;
 import CacheWolf.navi.touchControls.MovingMapControls;
 import ewe.filechooser.FileChooser;
@@ -350,13 +352,11 @@
 
 			int lineLengthPixels = (int)java.lang.Math.round( lineLengthMeters / currentMap.scale );
 
-			controlsLayer.updateContext("scale", lineLengthString,
-					lineLengthPixels);
+			controlsLayer.updateContent("scale", lineLengthString, lineLengthPixels);
 		}
 		else{
 
-		controlsLayer.updateContext("scale", "no map",
-				20);
+		controlsLayer.updateContent("scale", "no map", 20);
 		}
 	}
 
@@ -396,13 +396,13 @@
 					d = dd.toString(3,0,0) + Metrics.getUnit(smallUnit);
 				}
 
-				controlsLayer.updateContext("distance", d);
+				controlsLayer.updateContent("distance", d);
 
 			}
 		}
 		else
 		{
-			controlsLayer.updateContext("distance", "");
+			controlsLayer.updateContent("distance", "");
 		}
 	}
 
@@ -1397,6 +1397,8 @@
 		}
 		if (fix == 0 && myNavigation.gpsPos.getSats()== 0) 	setGpsStatus(MovingMap.lostFix);
 		if (fix < 0 )	setGpsStatus(MovingMap.noGPSData);
+		controlsLayer.updateContent("hdop", Convert.toString(myNavigation.gpsPos.getHDOP()));
+		controlsLayer.updateContent("sats", Convert.toString(myNavigation.gpsPos.getSats()) + "/" + Convert.toString(myNavigation.gpsPos.getSatsInView()));
 	}
 
 	public void gpsStarted() {
@@ -2088,7 +2090,7 @@
 	Menu kontextMenu;
 	MenuItem gotoMenuItem = new MenuItem(MyLocale.getMsg(4230, "Goto here$g"), 0, null);
 	MenuItem newWayPointMenuItem = new MenuItem(MyLocale.getMsg(4232, "Create new Waypoint here$n"), 0, null);;
-	MenuItem openCacheDescMenuItem,openCacheDetailMenuItem,addCachetoListMenuItem,gotoCacheMenuItem,hintMenuItem;
+	MenuItem openCacheDescMenuItem,openCacheDetailMenuItem,addCachetoListMenuItem,gotoCacheMenuItem,hintMenuItem,missionMenuItem;
 
 	MenuItem miLuminary[];
 
@@ -2311,12 +2313,22 @@
 							addCachetoListMenuItem = new MenuItem(MyLocale.getMsg(199,"Add to cachetour"));
 							kontextMenu.addItem(addCachetoListMenuItem);
 						}
+						String stmp=clickedCache.getCacheDetails(false).Hints;
+						stmp=stmp.substring(0,Math.min(10,stmp.length())).trim();
+						if (!stmp.equals("")){
+							kontextMenu.addItem(hintMenuItem=new MenuItem("Hint: "+stmp));
+						}
+						if (clickedCache.getType() == CacheType.CW_TYPE_QUESTION) {
+							stmp=clickedCache.getCacheDetails(false).LongDescription;
+							if (!stmp.equals("")) {
+								kontextMenu.addItem(missionMenuItem=new MenuItem("?: "));								
+							}
+						}
 						kontextMenu.addItem(new MenuItem("-"));
 						kontextMenu.addItem(new MenuItem(clickedCache.getWayPoint()+" Info:"));
 						kontextMenu.addItem(new MenuItem("Difficulty: "+CacheTerrDiff.longDT(clickedCache.getHard())));
 						kontextMenu.addItem(new MenuItem("Terrain: "+CacheTerrDiff.longDT(clickedCache.getTerrain())));
 						kontextMenu.addItem(new MenuItem("Size: "+CacheSize.cw2ExportString(clickedCache.getCacheSize())));
-						kontextMenu.addItem(hintMenuItem=new MenuItem("Hint: "+clickedCache.getCacheDetails(false).Hints));
 					}
 				}
 			}
@@ -2349,8 +2361,10 @@
 							+ ch.cacheName+"\n"
 							+ "Difficulty: "+CacheTerrDiff.longDT(ch.getHard())+"\n"
 							+ "Terrain: "+CacheTerrDiff.longDT(ch.getTerrain())+"\n"
-							+ "Size: "+CacheSize.cw2ExportString(ch.getCacheSize())+"\n"
-							+ "";
+							+ "Size: "+CacheSize.cw2ExportString(ch.getCacheSize())+"\n";
+				if (ch.getType() == CacheType.CW_TYPE_QUESTION) {
+					this.toolTip = this.toolTip + ch.getCacheDetails(false).LongDescription;
+				}
 			}
 		}
 		return true;
@@ -2407,8 +2421,11 @@
 						Global.mainForm.cacheList.addCache(clickedCache.getWayPoint());
 					}
 					if (action == hintMenuItem) {
-						hintMenuItem.setText(Common.rot13(hintMenuItem.action));
+						(new MessageBox("Hint", STRreplace.replace(Common.rot13(clickedCache.getCacheDetails(false).Hints),"<br>","\n"), FormBase.OKB)).execute();
 					}
+					if (action == missionMenuItem) {
+						(new MessageBox("Mission", STRreplace.replace(clickedCache.getCacheDetails(false).LongDescription,"<br>","\n"), FormBase.OKB)).execute();
+					}
 					/*
 					for (int i=0; i<miLuminary.length; i++) {
 						if (action == miLuminary[i]) {

Modified: branches/r1.2/src/CacheWolf/navi/touchControls/MovingMapControlItem.java
===================================================================
--- branches/r1.2/src/CacheWolf/navi/touchControls/MovingMapControlItem.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/navi/touchControls/MovingMapControlItem.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -153,9 +153,12 @@
 		return -1;
 	}
 
-	public String getContext() {
+	public String getContent() {
 		return null;
 	}
+	public String getText() {
+		return null;
+	}
 
 	public String getHelp() {
 

Modified: branches/r1.2/src/CacheWolf/navi/touchControls/MovingMapControlItemText.java
===================================================================
--- branches/r1.2/src/CacheWolf/navi/touchControls/MovingMapControlItemText.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/navi/touchControls/MovingMapControlItemText.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -34,20 +34,22 @@
 
 	private ImageWithText aniImage;
 	private int command;
-	private String context;
+	private String content;
+	private String iconText;
 
 	public MovingMapControlItemText(final String iconText, String imageSource,String iconSource,
-			int alpha, int actionCommand, String context, String alignText,TextOptions tOptions) {
+			int alpha, int actionCommand, String content, String alignText,TextOptions tOptions) {
 
 		Image image = MovingMapControlItem.createImage(imageSource, iconSource, alpha);		
 		aniImage = new ImageWithText(image,tOptions);
+		this.iconText=iconText;
 		aniImage.setText(iconText);
 		aniImage.freeSource();
 		aniImage.properties |= mImage.AlwaysOnTop;		
-		if (context != null) {
-			this.context = context;
+		if (content != null) {
+			this.content = content;
 			xProperties |= IS_ICON_WITH_TEXT;
-			if (context.equals("scale")) {
+			if (content.equals("scale")) {
 				xProperties |= IS_ICON_WITH_FRONTLINE;
 			}
 		}
@@ -90,9 +92,12 @@
 	public int getCommand() {
 		return command;
 	}
-	public String getContext() {
-		return context;
+	public String getContent() {
+		return content;
 	}
+	public String getText() {
+		return iconText;
+	}
 	public void setAdditionalProperty(int prop) {
 		aniImage.setStartlineWitdth(prop);
 	}

Modified: branches/r1.2/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java
===================================================================
--- branches/r1.2/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -123,9 +123,10 @@
 	 */
 	public static final String BUTTON_ATTR_CHANGE_STAE_OF = "changeStateof";
 	/**
-	 * the name of content which is displayed on the button. Currently the content distance and scale are known.
+	 * the name of content which is displayed on the button.
+	 * Currently the content distance, scale, hdop, sats are known.
 	 */
-	public static final String BUTTON_ATTR_CONTEXT = "content";
+	public static final String BUTTON_ATTR_CONTENT = "content";
 	/**
 	 * the alignment of the text on the buttons. if the String starts with 'T' the text will be displayed on the top
 	 * line of the button if the String starts with 'B' the text will be displayed on the bottom line of the button if
@@ -220,7 +221,7 @@
 				iconLocation = CONFIG_RELATIVE_PATH + iconLocation; 
 			}
 			String alignText = attributes.getValue(BUTTON_ATTR_ALIGNTEXT);
-			String context = attributes.getValue(BUTTON_ATTR_CONTEXT);
+			String content = attributes.getValue(BUTTON_ATTR_CONTENT);
 			if (visibility == null) {
 				Global.getPref().log("read MovingMap settings: " + BUTTON_ATTR_VISIBILITY
 						+ " not set!",null);
@@ -251,14 +252,15 @@
 					attributes, BUTTON_ATTR_TEXT_OFFSET_B, 0));
 
 			MovingMapControlItem button;
-			if (context != null) {
-				button = new MovingMapControlItemText("", 
-						imageLocation, iconLocation, alphavalue, action, context, alignText, tOptions);
-			} else if (localeDefault != null) {
-				button = new MovingMapControlItemText(MyLocale.getMsg(localIDValue, localeDefault),
-						imageLocation, iconLocation, alphavalue, action, context, alignText, tOptions);
+			String itemText;
+			if (localeDefault == null) 
+				itemText=MyLocale.getMsg(localIDValue, "");
+			else itemText=MyLocale.getMsg(localIDValue, localeDefault);
+			if (itemText.equals("") && content == null) {
+				button = new MovingMapControlItemButton(imageLocation, iconLocation, action, alphavalue);
 			} else {
-				button = new MovingMapControlItemButton(imageLocation, iconLocation, action, alphavalue);
+				button = new MovingMapControlItemText(itemText,
+						imageLocation, iconLocation, alphavalue, action, content, alignText, tOptions);
 			}
 
 			// add extra role to all icons

Modified: branches/r1.2/src/CacheWolf/navi/touchControls/MovingMapControls.java
===================================================================
--- branches/r1.2/src/CacheWolf/navi/touchControls/MovingMapControls.java	2010-11-02 17:34:57 UTC (rev 2845)
+++ branches/r1.2/src/CacheWolf/navi/touchControls/MovingMapControls.java	2010-11-06 16:00:15 UTC (rev 2846)
@@ -252,25 +252,25 @@
 	// }
 	// }}
 
-	public void updateContext(String contextName, String text) {
-		if (contextName == null) {
+	public void updateContent(String contentName, String text) {
+		if (contentName == null) {
 			return;
 		}
-		updateContext(contextName, text, -1);
+		updateContent(contentName, text, -1);
 
 	}
 
-	public void updateContext(String contextName, String text, int property) {
+	public void updateContent(String contentName, String text, int property) {
 		for (int i = 0; i < buttons.size(); i++) {
 			MovingMapControlItem item = (MovingMapControlItem) buttons.get(i);
 
 			if ((item.xProperties & MovingMapControlItem.IS_ICON_WITH_TEXT) != 0) {
-				if (contextName.equals(item.getContext())) {
-					item.setText(text);
+				if (contentName.equals(item.getContent())) {
+					item.setText(item.getText()+text);
 				}
 			}
 			if ((item.xProperties & MovingMapControlItem.IS_ICON_WITH_FRONTLINE) != 0) {
-				if (contextName.equals(item.getContext())) {
+				if (contentName.equals(item.getContent())) {
 					item.setAdditionalProperty(property);
 				}
 			}



From araber95 at mail.berlios.de  Sat Nov  6 05:02:22 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sat,  6 Nov 2010 05:02:22 PM +0100
Subject: [Cachewolf-svn] r2847 - branches/r1.2/res_noewe/attributes
Message-ID: <20101106160223.127DF480740@sheep.berlios.de>

Author: araber95
Date: 2010-11-06 17:02:22 +0100 (Sat, 06 Nov 2010)
New Revision: 2847

Added:
   branches/r1.2/res_noewe/attributes/wirelessbeacon-no.gif
   branches/r1.2/res_noewe/attributes/wirelessbeacon-non.gif
   branches/r1.2/res_noewe/attributes/wirelessbeacon-yes.gif
Log:
pictures of the new attribute wirelessbeacon

Added: branches/r1.2/res_noewe/attributes/wirelessbeacon-no.gif
===================================================================
(Binary files differ)


Property changes on: branches/r1.2/res_noewe/attributes/wirelessbeacon-no.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Added: branches/r1.2/res_noewe/attributes/wirelessbeacon-non.gif
===================================================================
(Binary files differ)


Property changes on: branches/r1.2/res_noewe/attributes/wirelessbeacon-non.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Added: branches/r1.2/res_noewe/attributes/wirelessbeacon-yes.gif
===================================================================
(Binary files differ)


Property changes on: branches/r1.2/res_noewe/attributes/wirelessbeacon-yes.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream



From araber95 at mail.berlios.de  Sun Nov  7 01:00:15 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun,  7 Nov 2010 01:00:15 PM +0100
Subject: [Cachewolf-svn] r2848 - trunk/src/CacheWolf
Message-ID: <20101107120015.50C6C4810D6@sheep.berlios.de>

Author: araber95
Date: 2010-11-07 13:00:15 +0100 (Sun, 07 Nov 2010)
New Revision: 2848

Modified:
   trunk/src/CacheWolf/CacheHolder.java
Log:
write loop vector, even it is empty. (else the one of the previous cache would be taken)

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-11-06 16:02:22 UTC (rev 2847)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-11-07 12:00:15 UTC (rev 2848)
@@ -740,25 +740,24 @@
 			varParams.put("STATE", det.State);
 			
 			// attributes
-			if (det.attributes.count()>0) {
-				Vector attVect=new Vector(det.attributes.count()+1);
-				for (int i=0; i<det.attributes.count(); i++) {
-					Hashtable atts=new Hashtable();
-					atts.put("PATHANDIMAGE", det.attributes.getAttribute(i).getPathAndImageName());
-					atts.put("IMAGE", det.attributes.getAttribute(i).getImageName());
-					atts.put("GCID", det.attributes.getAttribute(i).getGCId());
-					atts.put("INC", "" + det.attributes.getAttribute(i).getInc());
-					atts.put("INC2TXT", det.attributes.getAttribute(i).getInc()==1 ? "YES:" : "NO:");
-					if (i % 5 ==4)
-						atts.put("BR","<br/>");
-					else
-						atts.put("BR","");
-					atts.put("INFO",det.attributes.getAttribute(i).getMsg());
-					atts.put("GCINFO",det.attributes.getAttribute(i).getGCText());
-					attVect.add(atts);
-				}
-				varParams.put("ATTRIBUTES",attVect);
+			Vector attVect=new Vector(det.attributes.count()+1);
+			for (int i=0; i<det.attributes.count(); i++) {
+				Hashtable atts=new Hashtable();
+				atts.put("PATHANDIMAGE", det.attributes.getAttribute(i).getPathAndImageName());
+				atts.put("IMAGE", det.attributes.getAttribute(i).getImageName());
+				atts.put("GCID", det.attributes.getAttribute(i).getGCId());
+				atts.put("INC", "" + det.attributes.getAttribute(i).getInc());
+				atts.put("INC2TXT", det.attributes.getAttribute(i).getInc()==1 ? "YES:" : "NO:");
+				if (i % 5 ==4)
+					atts.put("BR","<br/>");
+				else
+					atts.put("BR","");
+				atts.put("INFO",det.attributes.getAttribute(i).getMsg());
+				atts.put("GCINFO",det.attributes.getAttribute(i).getGCText());
+				attVect.add(atts);
 			}
+			varParams.put("ATTRIBUTES",attVect);
+			
 			// logs
 			Vector logVect=new Vector(det.CacheLogs.size());
 			int maxlogs = det.CacheLogs.size();
@@ -785,36 +784,35 @@
 				logs.put("MESSAGE", (ModTyp == 0) ? SafeXML.cleanGPX(stmp) : stmp);
 				logVect.add(logs);
 			}
-			if (maxlogs>0) varParams.put("LOGS",logVect);
+			varParams.put("LOGS",logVect);
 
-			if (hasAddiWpt()) {
-				Vector addiVect=new Vector(addiWpts.size());
-				for (int i=0; i<addiWpts.size(); i++) {
-					Hashtable addis=new Hashtable();
-					CacheHolder ch=(CacheHolder) addiWpts.get(i);
-					addis.put("WAYPOINT",ch.getWayPoint());
-					addis.put("NAME",(ModTyp == 0) ? SafeXML.cleanGPX(ch.getCacheName()) : ch.getCacheName());
-					if ((ch.pos!=null && ch.pos.isValid())) {
-						addis.put("LATLON",decSep.replaceAll(ch.pos.toString()));
-						addis.put("LAT",decSep.replaceAll(ch.pos.getLatDeg(CWPoint.DD)));
-						addis.put("LON",decSep.replaceAll(ch.pos.getLonDeg(CWPoint.DD)));
-					}
-					else {
-						addis.put("LATLON", "unknown");
-						addis.put("LAT", "");
-						addis.put("LON", "");		
-					}
-					addis.put("IMG",CacheType.typeImageForId(ch.getType()));
-					addis.put("ICON",""+ch.getType());
-					addis.put("TYPENAME", CacheType.type2Gui(ch.getType()));
-					addis.put("TYPE", CacheType.type2TypeTag(ch.getType())); //<type>
-					addis.put("SYM", CacheType.type2SymTag(ch.getType())); //<sym>
-					addis.put("GSTYPE", CacheType.type2GSTypeTag(ch.getType())); //<groundspeak:type>
-					addis.put("LONGDESC",(ModTyp == 0) ? SafeXML.cleanGPX(ch.getCacheDetails(false).LongDescription) : ch.getCacheDetails(false).LongDescription);
-					addiVect.add(addis);
+			Vector addiVect=new Vector(addiWpts.size());
+			for (int i=0; i<addiWpts.size(); i++) {
+				Hashtable addis=new Hashtable();
+				CacheHolder ch=(CacheHolder) addiWpts.get(i);
+				addis.put("WAYPOINT",ch.getWayPoint());
+				addis.put("NAME",(ModTyp == 0) ? SafeXML.cleanGPX(ch.getCacheName()) : ch.getCacheName());
+				if ((ch.pos!=null && ch.pos.isValid())) {
+					addis.put("LATLON",decSep.replaceAll(ch.pos.toString()));
+					addis.put("LAT",decSep.replaceAll(ch.pos.getLatDeg(CWPoint.DD)));
+					addis.put("LON",decSep.replaceAll(ch.pos.getLonDeg(CWPoint.DD)));
 				}
-				if (addiWpts.size()>0) varParams.put("ADDIS",addiVect);
+				else {
+					addis.put("LATLON", "unknown");
+					addis.put("LAT", "");
+					addis.put("LON", "");		
+				}
+				addis.put("IMG",CacheType.typeImageForId(ch.getType()));
+				addis.put("ICON",""+ch.getType());
+				addis.put("TYPENAME", CacheType.type2Gui(ch.getType()));
+				addis.put("TYPE", CacheType.type2TypeTag(ch.getType())); //<type>
+				addis.put("SYM", CacheType.type2SymTag(ch.getType())); //<sym>
+				addis.put("GSTYPE", CacheType.type2GSTypeTag(ch.getType())); //<groundspeak:type>
+				addis.put("LONGDESC",(ModTyp == 0) ? SafeXML.cleanGPX(ch.getCacheDetails(false).LongDescription) : ch.getCacheDetails(false).LongDescription);
+				addiVect.add(addis);
 			}
+			varParams.put("ADDIS",addiVect);
+			
 			Vector imgVect=new Vector(det.images.size());
 			for (int i=0; i<det.images.size(); i++) {
 				Hashtable imgs=new Hashtable();
@@ -832,7 +830,7 @@
 				}
 				imgVect.add(imgs);
 			}
-			if (det.images.size()>0) varParams.put("cacheImg",imgVect);
+			varParams.put("cacheImg",imgVect);
 		}
 		return varParams;
 	}	



From araber95 at mail.berlios.de  Sun Nov  7 01:02:39 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun,  7 Nov 2010 01:02:39 PM +0100
Subject: [Cachewolf-svn] r2849 - branches/r1.2/src/CacheWolf
Message-ID: <20101107120239.A64EC480F1B@sheep.berlios.de>

Author: araber95
Date: 2010-11-07 13:02:39 +0100 (Sun, 07 Nov 2010)
New Revision: 2849

Modified:
   branches/r1.2/src/CacheWolf/CacheHolder.java
Log:
same as NB

Modified: branches/r1.2/src/CacheWolf/CacheHolder.java
===================================================================
--- branches/r1.2/src/CacheWolf/CacheHolder.java	2010-11-07 12:00:15 UTC (rev 2848)
+++ branches/r1.2/src/CacheWolf/CacheHolder.java	2010-11-07 12:02:39 UTC (rev 2849)
@@ -740,25 +740,24 @@
 			varParams.put("STATE", det.State);
 			
 			// attributes
-			if (det.attributes.count()>0) {
-				Vector attVect=new Vector(det.attributes.count()+1);
-				for (int i=0; i<det.attributes.count(); i++) {
-					Hashtable atts=new Hashtable();
-					atts.put("PATHANDIMAGE", det.attributes.getAttribute(i).getPathAndImageName());
-					atts.put("IMAGE", det.attributes.getAttribute(i).getImageName());
-					atts.put("GCID", det.attributes.getAttribute(i).getGCId());
-					atts.put("INC", "" + det.attributes.getAttribute(i).getInc());
-					atts.put("INC2TXT", det.attributes.getAttribute(i).getInc()==1 ? "YES:" : "NO:");
-					if (i % 5 ==4)
-						atts.put("BR","<br/>");
-					else
-						atts.put("BR","");
-					atts.put("INFO",det.attributes.getAttribute(i).getMsg());
-					atts.put("GCINFO",det.attributes.getAttribute(i).getGCText());
-					attVect.add(atts);
-				}
-				varParams.put("ATTRIBUTES",attVect);
+			Vector attVect=new Vector(det.attributes.count()+1);
+			for (int i=0; i<det.attributes.count(); i++) {
+				Hashtable atts=new Hashtable();
+				atts.put("PATHANDIMAGE", det.attributes.getAttribute(i).getPathAndImageName());
+				atts.put("IMAGE", det.attributes.getAttribute(i).getImageName());
+				atts.put("GCID", det.attributes.getAttribute(i).getGCId());
+				atts.put("INC", "" + det.attributes.getAttribute(i).getInc());
+				atts.put("INC2TXT", det.attributes.getAttribute(i).getInc()==1 ? "YES:" : "NO:");
+				if (i % 5 ==4)
+					atts.put("BR","<br/>");
+				else
+					atts.put("BR","");
+				atts.put("INFO",det.attributes.getAttribute(i).getMsg());
+				atts.put("GCINFO",det.attributes.getAttribute(i).getGCText());
+				attVect.add(atts);
 			}
+			varParams.put("ATTRIBUTES",attVect);
+			
 			// logs
 			Vector logVect=new Vector(det.CacheLogs.size());
 			int maxlogs = det.CacheLogs.size();
@@ -785,36 +784,35 @@
 				logs.put("MESSAGE", (ModTyp == 0) ? SafeXML.cleanGPX(stmp) : stmp);
 				logVect.add(logs);
 			}
-			if (maxlogs>0) varParams.put("LOGS",logVect);
+			varParams.put("LOGS",logVect);
 
-			if (hasAddiWpt()) {
-				Vector addiVect=new Vector(addiWpts.size());
-				for (int i=0; i<addiWpts.size(); i++) {
-					Hashtable addis=new Hashtable();
-					CacheHolder ch=(CacheHolder) addiWpts.get(i);
-					addis.put("WAYPOINT",ch.getWayPoint());
-					addis.put("NAME",(ModTyp == 0) ? SafeXML.cleanGPX(ch.getCacheName()) : ch.getCacheName());
-					if ((ch.pos!=null && ch.pos.isValid())) {
-						addis.put("LATLON",decSep.replaceAll(ch.pos.toString()));
-						addis.put("LAT",decSep.replaceAll(ch.pos.getLatDeg(CWPoint.DD)));
-						addis.put("LON",decSep.replaceAll(ch.pos.getLonDeg(CWPoint.DD)));
-					}
-					else {
-						addis.put("LATLON", "unknown");
-						addis.put("LAT", "");
-						addis.put("LON", "");		
-					}
-					addis.put("IMG",CacheType.typeImageForId(ch.getType()));
-					addis.put("ICON",""+ch.getType());
-					addis.put("TYPENAME", CacheType.type2Gui(ch.getType()));
-					addis.put("TYPE", CacheType.type2TypeTag(ch.getType())); //<type>
-					addis.put("SYM", CacheType.type2SymTag(ch.getType())); //<sym>
-					addis.put("GSTYPE", CacheType.type2GSTypeTag(ch.getType())); //<groundspeak:type>
-					addis.put("LONGDESC",(ModTyp == 0) ? SafeXML.cleanGPX(ch.getCacheDetails(false).LongDescription) : ch.getCacheDetails(false).LongDescription);
-					addiVect.add(addis);
+			Vector addiVect=new Vector(addiWpts.size());
+			for (int i=0; i<addiWpts.size(); i++) {
+				Hashtable addis=new Hashtable();
+				CacheHolder ch=(CacheHolder) addiWpts.get(i);
+				addis.put("WAYPOINT",ch.getWayPoint());
+				addis.put("NAME",(ModTyp == 0) ? SafeXML.cleanGPX(ch.getCacheName()) : ch.getCacheName());
+				if ((ch.pos!=null && ch.pos.isValid())) {
+					addis.put("LATLON",decSep.replaceAll(ch.pos.toString()));
+					addis.put("LAT",decSep.replaceAll(ch.pos.getLatDeg(CWPoint.DD)));
+					addis.put("LON",decSep.replaceAll(ch.pos.getLonDeg(CWPoint.DD)));
 				}
-				if (addiWpts.size()>0) varParams.put("ADDIS",addiVect);
+				else {
+					addis.put("LATLON", "unknown");
+					addis.put("LAT", "");
+					addis.put("LON", "");		
+				}
+				addis.put("IMG",CacheType.typeImageForId(ch.getType()));
+				addis.put("ICON",""+ch.getType());
+				addis.put("TYPENAME", CacheType.type2Gui(ch.getType()));
+				addis.put("TYPE", CacheType.type2TypeTag(ch.getType())); //<type>
+				addis.put("SYM", CacheType.type2SymTag(ch.getType())); //<sym>
+				addis.put("GSTYPE", CacheType.type2GSTypeTag(ch.getType())); //<groundspeak:type>
+				addis.put("LONGDESC",(ModTyp == 0) ? SafeXML.cleanGPX(ch.getCacheDetails(false).LongDescription) : ch.getCacheDetails(false).LongDescription);
+				addiVect.add(addis);
 			}
+			varParams.put("ADDIS",addiVect);
+			
 			Vector imgVect=new Vector(det.images.size());
 			for (int i=0; i<det.images.size(); i++) {
 				Hashtable imgs=new Hashtable();
@@ -832,7 +830,7 @@
 				}
 				imgVect.add(imgs);
 			}
-			if (det.images.size()>0) varParams.put("cacheImg",imgVect);
+			varParams.put("cacheImg",imgVect);
 		}
 		return varParams;
 	}	



From araber95 at mail.berlios.de  Sun Nov  7 03:58:45 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun,  7 Nov 2010 03:58:45 PM +0100
Subject: [Cachewolf-svn] r2850 - in trunk: res_noewe/languages
	src/CacheWolf/imp
Message-ID: <20101107145845.A05BA480F1B@sheep.berlios.de>

Author: araber95
Date: 2010-11-07 15:58:45 +0100 (Sun, 07 Nov 2010)
New Revision: 2850

Modified:
   trunk/res_noewe/languages/DE.cfg
   trunk/res_noewe/languages/EN.cfg
   trunk/res_noewe/languages/FR.cfg
   trunk/res_noewe/languages/NL.cfg
   trunk/res_noewe/languages/PL.cfg
   trunk/res_noewe/languages/SV.cfg
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
download : check for update now reflects presence of trackables (if they should be loaded).

Modified: trunk/res_noewe/languages/DE.cfg
===================================================================
--- trunk/res_noewe/languages/DE.cfg	2010-11-07 12:02:39 UTC (rev 2849)
+++ trunk/res_noewe/languages/DE.cfg	2010-11-07 14:58:45 UTC (rev 2850)
@@ -979,7 +979,7 @@
 5511=Gefunden+
 5512=\nneue / zu aktualisierende Caches
 5513=Laden von:+
-5514=Travelbug:+
+5514=\nTravelbug:+
 5515=Fehler beim Laden des Caches.\nBitte ?berpr?fen Sie Ihre Internetverbindung und ob als Sprache bei GC.com English ausgew?hlt ist.\nNoch einmal versuchen?
 5516=+Cachebeschreibungen\nkonnten nicht geladen werden.
 5517=Aktualisierungen importieren?

Modified: trunk/res_noewe/languages/EN.cfg
===================================================================
--- trunk/res_noewe/languages/EN.cfg	2010-11-07 12:02:39 UTC (rev 2849)
+++ trunk/res_noewe/languages/EN.cfg	2010-11-07 14:58:45 UTC (rev 2850)
@@ -979,7 +979,7 @@
 5511=Found+
 5512=\nnew / update caches
 5513=Loading:+
-5514=Getting bug:+
+5514=\nGetting bug:+
 5515=Failed to load cache.\nPlease check your internet connection.\nRetry?
 5516=+cache descriptions\ncould not be loaded.
 5517=Spider updates?

Modified: trunk/res_noewe/languages/FR.cfg
===================================================================
--- trunk/res_noewe/languages/FR.cfg	2010-11-07 12:02:39 UTC (rev 2849)
+++ trunk/res_noewe/languages/FR.cfg	2010-11-07 14:58:45 UTC (rev 2850)
@@ -979,7 +979,7 @@
 5511=Trouv?e+
 5512=\nnouveau / mettre ? jour Caches
 5513=Chargeant:+
-5514=Travel Bug:+
+5514=\nTravel Bug:+
 5515=Erreur en chargeant la cache.\nMerci de v?rifier votre connexion internet et si vous avez language englais chez gc.com..\nContinuer d'essayer?
 5516=+descriptions cache\nne pouvait pas ?tre charg?.
 5517=Spider mises ? jour?

Modified: trunk/res_noewe/languages/NL.cfg
===================================================================
--- trunk/res_noewe/languages/NL.cfg	2010-11-07 12:02:39 UTC (rev 2849)
+++ trunk/res_noewe/languages/NL.cfg	2010-11-07 14:58:45 UTC (rev 2850)
@@ -979,7 +979,7 @@
 5511=Gevonden+
 5512=\nniew / update caches
 5513=Bezig met laden:+
-5514=Travelbug
+5514=\nTravelbug:+
 5515=Failed to load-cache.\nPlease Controleer je internetverbinding.\nRetry?
 5516=+cache beschrijvingen\ncould niet worden geladen.
 5517=Spider updates?

Modified: trunk/res_noewe/languages/PL.cfg
===================================================================
--- trunk/res_noewe/languages/PL.cfg	2010-11-07 12:02:39 UTC (rev 2849)
+++ trunk/res_noewe/languages/PL.cfg	2010-11-07 14:58:45 UTC (rev 2850)
@@ -979,7 +979,7 @@
 5511=Znaleziona+
 5512=\nnowy / aktualizacja skrzynki
 5513=Wczytuje:+
-5514=Pobieram bugi:+
+5514=\nPobieram bugi:+
 5515=Nie mozna zaladowac skrzynki.\nProsze sprawdzic polaczenie z netem.\nSprobowac ponownie?
 5516=+Nie mozna zaladowac\nopisu skrzynek.
 5517=Spider updates?

Modified: trunk/res_noewe/languages/SV.cfg
===================================================================
--- trunk/res_noewe/languages/SV.cfg	2010-11-07 12:02:39 UTC (rev 2849)
+++ trunk/res_noewe/languages/SV.cfg	2010-11-07 14:58:45 UTC (rev 2850)
@@ -93,7 +93,7 @@
 161=Visa Blacklist
 162=Ladda kalibrerad
 170=V?lj databas
-171=profil finns inte: +
+171=profil finns inte:+
 172=Fel: kan inte skapa kartor katalog:
 173=gpsbabel:
 174=korta namn
@@ -131,8 +131,8 @@
 207=** oanv?nda **
 208=Rebuild index
 209=Rebuilding index
-210=cachar utg?: +
-211=Caches till: +
+210=cachar utg?:+
+211=Caches till:+
 212=Ta bort alla. XML-filer inte index.xml och tillh?rande bilder
 213=bort f?r?ldral?sa
 214=Ny v?gpunkt
@@ -394,8 +394,8 @@
 1026=# Rec
 1027=OC-Index
 1028=)?
-1029=Det finns waypoints som ?r markerade men osynligt.\n (Main cachar: +
-1030=, ytterligare Waypoints: +
+1029=Det finns waypoints som ?r markerade men osynligt.\n (Main cachar:+
+1030=, ytterligare Waypoints:+
 1031=Ta bort dem ocks??
 1032=S?kv?g till webbl?sare:
 1033=?r felaktigt!
@@ -502,10 +502,10 @@
 1614=Fel vid unzipping udpate fil
 1615=Fel vid analys uppdaterad fil, ange:
 1616=Fel: Kunde inte h?mta udpate fil fr?n opencaching.de
-1617=Ignorera fel i html-Cache-Beskrivning: "<img" utan "src =" i cache +
-1618=Ignorera fel i Cache: +
-1619=: kunde inte ladda ner bild fr?n URL: +
-1620=h?mta inb?ddade bilder: +
+1617=Ignorera fel i html-Cache-Beskrivning: "<img" utan "src =" i cache+
+1618=Ignorera fel i Cache:+
+1619=: kunde inte ladda ner bild fr?n URL:+
+1620=h?mta inb?ddade bilder:+
 1621=Fel vid tolkning av data\n fr?n Opencaching.de, ?r\nThis troligen ett fel p? Opencaching.de\nRetry senare\n Status:
 1622=Uteslut hittade cachar
 1623=Importera upto:
@@ -530,7 +530,7 @@
 1710=Kan inte r?kna tom str?ng
 1711=Ers?ttning tecken str?ngar m?ste vara lika l?nga
 1712=Ogiltig samordna:
-1713=Ogiltigt samordna format. Till?tna ?r cw / dd / DMM / DMS / +
+1713=Ogiltigt samordna format. Till?tna ?r cw / dd / DMM / DMS /+
 1714=G? till: Waypoint finns inte:
 1715=Instr: Startposition inte i str?ng
 1716=MID: Integer argument v?ntat
@@ -802,24 +802,24 @@
 4109=Laddar kartor ...
 4110=laddning
 4111=Koordinater m?ste anges i formatet N XX XX.XXX E XXX XX.XXX
-4112=IO-Fel vid kopiering bild fr?n: +
+4112=IO-Fel vid kopiering bild fr?n:+
 4113=+till:+
 4114=+error:+
-4115=Fel: Kunde inte avkoda bild: +
+4115=Fel: Kunde inte avkoda bild:+
 4116=+- bild inte kopieras
-4117=Fel vid import. Map-fil: +
+4117=Fel vid import. Map-fil:+
 4118=IO-Fel vid l?sning eller skrivning kalibrering fil
-4119=Ingen kalibrering fil hittades f?r: +
+4119=Ingen kalibrering fil hittades f?r:+
 4120=gjort.
 4200=V?lj karta katalog
 4201=Information
 4203=Lastspecifikationers av kartor ...
 4204=Ingen georefererade kartan tillg?nglig\n V?lj en skala\n att visa sp?ret och cachar. \n Du kan f? en av menyn: Application / Kartor / download kalibrerad
-4206=Dist: +
+4206=Dist:+
 4207=Fel
-4208=Bug:\nillegal mapChangeModus: +
+4208=Bug:\nillegal mapChangeModus:+
 4210=Flytta kartan kan inte k?ras utan en karta - v?lj ett. \n Du kan v?lja en tom karta
-4211=No +
+4211=No+
 4212=mindre
 4213=mer
 4214=+detaljerad karta finns
@@ -829,7 +829,7 @@
 4218=Kunde inte l?sa kartan:
 4219=Inte tillr?ckligt med minne f?r att l?sa kartan:
 4220=Du kan prova att st?nga\n alla prgrams och 0A?tarta CacheWolf
-4221=inte tillr?ckligt med resurser f?r att ladda kartan: +
+4221=inte tillr?ckligt med resurser f?r att ladda kartan:+
 4222=Out of memory error
 4230=G? hit$g
 4231=G? hit
@@ -890,8 +890,8 @@
 4296=detailing
 4300=tom 1 pixel=+
 4301=+meter
-4302=Lat / Lon r?ckh?ll n?r du l?ser +
-4303=inte tillr?ckligt rader i filen +
+4302=Lat / Lon r?ckh?ll n?r du l?ser+
+4303=inte tillr?ckligt rader i filen+
 4304=inte tillr?ckligt med po?ng f?r att kalibrera kartan
 4305=Ej till?tet v?rden i affine\n (matris kan inte inverteras)\n i filen
 4306=map inte kalibreras
@@ -952,11 +952,11 @@
 4830=Inga matchande Gau?F-Kr?cger-rand i EPSG-kodlistan p?. WMS
 4831=getMapInfoObject: Koordinatsystem inte st?ds av Cachewolf:
 4900=+?r inte en tysk Gauss-Krueger samordna
-4920=EPSG kod +
+4920=EPSG kod+
 4921=+st?ds
-4922=EPSG kod saknas i: +
-4923=fromWgs84: EPSG kod +
-4924=ToWgs84: EPSG kod +
+4922=EPSG kod saknas i:+
+4923=fromWgs84: EPSG kod+
+4924=ToWgs84: EPSG kod+
 5000=Load Cachelist
 5001=Kan inte spindel ytterligare waypoint direkt.\nPlease kolla viktigaste cache.
 5002=: F?r n?rvarande ?r denna funktion endast tillg?nglig f?r geocaching.com och opencaching. (CZ, DE, org.uk, pl).
@@ -976,17 +976,17 @@
 5508=Loggar in ..
 5509=Koordinater f?r centrum m?ste st?llas
 5510=Spider Options
-5511=Found +
+5511=Found+
 5512=\nnya / uppdatering cachar
-5513=Laddar: +
-5514=Getting bug: +
+5513=Laddar:+
+5514=\nGetting bug:+
 5515=Kunde inte ladda cache.\nPlease kontrollera din Internetanslutning.\nRetry?
 5516=+cache beskrivningar\ncould inte laddas.
 5517=Spider uppdateringar?
 5518=+cachar i databasen beh?ver uppdateras. Uppdatera nu?
 5519=Information
 5520=Endast ges maximalt cachar lastades.\nRepeat spidering senare att l?sa mer cachar.\nNo redan existerande cachar har uppdaterats.
-5521=Sida +
+5521=Sida+
 5522=S?k ?ldre xml-filer (utan <CACHE... />)?
 6000=Guid
 6001=Namn
@@ -1007,7 +1007,7 @@
 6019=Sp?rningsnummer
 6020=Travelbug hittades inte.
 6021=Mer ?n en travelbug hittades. Ange namn mer exakt.
-6022=: Aktuella cache: +
+6022=: Aktuella cache:+
 6025=Namn:
 6026=Sp?rningsnummer:
 6027=Id / GUID:
@@ -1052,7 +1052,7 @@
 7013=fel
 7020=rekommenderade versionen typ
 7021=typ av denna version
-7022=detta +
+7022=detta+
 7023=nedladdning Fel nuvarande version information
 7100=Serial Port Options
 7101=Uppdatera Ports$u
@@ -1062,11 +1062,11 @@
 7105=Forward GPS-data att vara v?rd
 7106=Alla data fr?n GPS kommer att skickas till TCP-port 23\n och kan omf?rdelas det till en seriell port\n av
 7107=Intervall i sekunder f?r avverkning
-7108=Fel: Kunde inte ?ppna serieport: +
+7108=Fel: Kunde inte ?ppna serieport:+
 7109=Fel: Kunde inte h?mta lista ?ver tillg?ngliga seriella portar
 7110=GPS hittades inte
-7111=Trying +
-7112=at +
+7111=Trying+
+7112=at+
 7113=- fick en del data
 7114=GPS Port hittades
 7115=- Ingen GPS data tag hittades

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-11-07 12:02:39 UTC (rev 2849)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-11-07 14:58:45 UTC (rev 2850)
@@ -1659,6 +1659,9 @@
 			numLogUpdates++;
 			ret = true;
 		}
+		if (!ret && TBchanged(ch, CacheDescription)) {
+			ret = true;
+		}
 		if (save)
 			ch.save();
 		return ret;
@@ -1858,7 +1861,7 @@
 	 * 
 	 * @return boolean newLogExists
 	 */
-	private boolean newFoundExists(CacheHolder ch, String cacheDescrition) {
+	private boolean newFoundExists(CacheHolder ch, String cacheDescription) {
 		if (!pref.checkLog)
 			return false;
 		Time lastLogCW = new Time();
@@ -1877,12 +1880,12 @@
 		lastLogGC.millis = 0;
 		String[] SDate;
 		String stmp = "";
-		RexPropLogDate.search(cacheDescrition);
+		RexPropLogDate.search(cacheDescription);
 		if (RexPropLogDate.didMatch()) {
 			stmp = RexPropLogDate.stringMatched(1);
 		} else {
 			pref.log("check logDateRex in spider.def" 
-					+ Preferences.NEWLINE + cacheDescrition);
+					+ Preferences.NEWLINE + cacheDescription);
 			return false;
 		}
 		if (stmp.indexOf("day") > 0) {
@@ -1911,6 +1914,15 @@
 		boolean ret = lastLogCW.compareTo(lastLogGC) < 0;
 		return ret;
 	}
+	private boolean TBchanged(CacheHolder ch, String cacheDescription) {
+		// simplified Version: only presence is checked 
+		if (pref.downloadTBs) {
+			boolean hasCoin=cacheDescription.indexOf("Geocoin") > -1;
+			boolean hasTB=cacheDescription.indexOf("Travel Bug Dog Tag") > -1;						
+			return (ch.has_bugs() != (hasCoin || hasTB));
+		}
+		return false;
+	}
 
 	/**
 	 * Read a complete cachepage from geocaching.com including all logs. This is



From araber95 at mail.berlios.de  Tue Nov  9 09:36:53 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Tue,  9 Nov 2010 09:36:53 PM +0100
Subject: [Cachewolf-svn] r2851 - trunk/res_noewe/webmapservices
Message-ID: <20101109203653.62A70481124@sheep.berlios.de>

Author: araber95
Date: 2010-11-09 21:36:52 +0100 (Tue, 09 Nov 2010)
New Revision: 2851

Added:
   trunk/res_noewe/webmapservices/de-st_t10.wms
   trunk/res_noewe/webmapservices/de-st_t50.wms
Log:
maps for Sachsen-Anhalt from http://geoportal.geodaten.sachsen-anhalt.de

Added: trunk/res_noewe/webmapservices/de-st_t10.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-st_t10.wms	                        (rev 0)
+++ trunk/res_noewe/webmapservices/de-st_t10.wms	2010-11-09 20:36:52 UTC (rev 2851)
@@ -0,0 +1,83 @@
+?TakenFromUrl:       www.lvermgeo.sachsen-anhalt.de
+GetCapabilitiesUrl: http://geoportal.geodaten.sachsen-anhalt.de/geodatenportal/servlet/gtEntryPoint;jsessionid=51711E7127EC019A09827A328FE11E69?wms_service_name=Geodatenportal&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
+Name:               de.sachsen-anhalt t10
+MapType:                        topo
+MainUrl:            http://geoportal.geodaten.sachsen-anhalt.de/geodatenportal/servlet/gtEntryPoint;jsessionid=51711E7127EC019A09827A328FE11E69?wms_service_name=Geodatenportal&
+ServiceTypeUrlPart: SERVICE=WMS
+VersionUrlPart:     VERSION=1.1.1
+CoordinateReferenceSystemCacheWolf:  31468 31467 31469
+CoordinateReferenceSystemUrlPart: SRS=EPSG:31468 SRS=EPSG:31467 SRS=EPSG:31469 
+RequestUrlPart:     REQUEST=GetMap
+#LayersUrlPart:     LAYERS=map_604|?bersichtskarten||
+#LayersUrlPart:     LAYERS=layer_601|Digitale Orthobilder|24.945156|0.000000
+#LayersUrlPart:     LAYERS=layer_941|Ortsnamen|24.945156|0.049890
+#LayersUrlPart:     LAYERS=layer_9852|Kachel?bersicht|24.945156|0.049890
+#LayersUrlPart:     LAYERS=layer_603|TK 1:10 000 Farbe|12.472578|0.004989
+#LayersUrlPart:     LAYERS=layer_10455|TK 1:25 000 Farbe|99.780624|0.000499
+#LayersUrlPart:     LAYERS=layer_607|TK 1:50 000 Farbe|124.725779|4.989031
+#LayersUrlPart:     LAYERS=layer_609|TK 1:100 000 Farbe|249.451559|4.989031
+#LayersUrlPart:     LAYERS=layer_403|TK 1:250 000 Farbe|4989.031178|4.989031
+#LayersUrlPart:     LAYERS=layer_9850|TK10|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9849|TK25|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9848|TK50|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9847|TK100|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_602|TK 1:10 000 s/w|9.978062|0.000499
+#LayersUrlPart:     LAYERS=layer_10456|TK 1:25 000 s/w|99.780624|0.000499
+#LayersUrlPart:     LAYERS=layer_604|Flurstuecksstruktur|9.978062|0.399122
+#LayersUrlPart:     LAYERS=layer_606|TK 1:50 000 s/w|124.725779|4.989031
+#LayersUrlPart:     LAYERS=layer_608|TK 1:100 000 s/w|249.451559|2.494516
+#LayersUrlPart:     LAYERS=layer_401|TK 1:250 000 s/w|4989.031178|49.890312
+#LayersUrlPart:     LAYERS=layer_9844|Flurgrenzen|29.933688|0.049890
+#LayersUrlPart:     LAYERS=layer_9845|Gemarkungsgrenzen|29.933688|0.049890
+#LayersUrlPart:     LAYERS=layer_15544|Landesgrenze|49890.311784|0.000499
+#LayersUrlPart:     LAYERS=layer_15545|Landkreisgrenzen|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_15546|Einheitsgemeinden|49890.311784|0.000499
+#LayersUrlPart:     LAYERS=layer_15547|Verbandsgemeinden|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_10844|BRW 2003|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10845|BRW 2004|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10846|BRW 2005|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10847|BRW 2006|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10848|BRW 2007|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10849|BRW 2008|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10850|BRW 2009|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_12644|BRW 2010|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10292|Flurneuordnung||
+#LayersUrlPart:     LAYERS=layer_10290|ALFF-Dienstsitze||
+#LayersUrlPart:     LAYERS=layer_10291|ALFF-Amtsbereiche||
+#LayersUrlPart:     LAYERS=layer_10293|InVeKoS Landschaftselemente||
+#LayersUrlPart:     LAYERS=layer_10294|InVeKoS Feldbl?cke||
+#LayersUrlPart:     LAYERS=layer_13644|CIR-2009|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_10288|Walddecker||
+#LayersUrlPart:     LAYERS=layer_10289|Wuchsgebiete/Wuchsbezirke||
+#LayersUrlPart:     LAYERS=layer_10282|LFB-Reviere||
+#LayersUrlPart:     LAYERS=layer_10283|LFB-Forstbetriebe||
+#LayersUrlPart:     LAYERS=layer_10284|LFB-Sitz-Forstbetriebe||
+#LayersUrlPart:     LAYERS=layer_10285|LZW-Reviere||
+#LayersUrlPart:     LAYERS=layer_10286|LZW-Forst?mter||
+#LayersUrlPart:     LAYERS=layer_10287|LZW-Sitz-Forst?mter||
+#LayersUrlPart:     LAYERS=layer_12460|Biosphaerenreservat||
+#LayersUrlPart:     LAYERS=layer_12461|Fauna-Flora-Habitat-Gebiet||
+#LayersUrlPart:     LAYERS=layer_12462|Landschaftsschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12463|Naturschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12464|Naturpark||
+#LayersUrlPart:     LAYERS=layer_12465|Nationalpark||
+#LayersUrlPart:     LAYERS=layer_12466|Vogelschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12467|Wasserschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_13744|Umfallradius|29.934187|0.000499
+#LayersUrlPart:     LAYERS=layer_13745|Wind_Bestand|29.934187|0.000499
+#LayersUrlPart:     LAYERS=map_14008|Regionale Planungsgemeinschaften||
+#LayersUrlPart:     LAYERS=layer_14848|RPG Altmark|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14849|RPG Anhalt-Bitterfeld-Wittenberg|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14850|RPG Halle|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14851|RPG Harz|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14852|RPG Magdeburg|498903.117837|0.000499
+LayersUrlPart:     LAYERS=layer_603
+StylesUrlPart:     STYLES=
+ImageFormatUrlPart:FORMAT=image/png
+BoundingBoxTopLeftWGS84: N 53.2226 E 10.5012
+BoundingBoxButtomRightWGS84: N 50.5272 E 13.4957
+#BBox_Mitte: N 51.874924375 E 11.9984684985
+MinScale:   0
+MaxScale:   12
+RecommendedScale:    1 2,5 5
+ImageFileExtension: .png

Added: trunk/res_noewe/webmapservices/de-st_t50.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-st_t50.wms	                        (rev 0)
+++ trunk/res_noewe/webmapservices/de-st_t50.wms	2010-11-09 20:36:52 UTC (rev 2851)
@@ -0,0 +1,83 @@
+?TakenFromUrl:       www.lvermgeo.sachsen-anhalt.de
+GetCapabilitiesUrl: http://geoportal.geodaten.sachsen-anhalt.de/geodatenportal/servlet/gtEntryPoint;jsessionid=51711E7127EC019A09827A328FE11E69?wms_service_name=Geodatenportal&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
+Name:               de.sachsen-anhalt t50
+MapType:                        topo
+MainUrl:            http://geoportal.geodaten.sachsen-anhalt.de/geodatenportal/servlet/gtEntryPoint;jsessionid=51711E7127EC019A09827A328FE11E69?wms_service_name=Geodatenportal&
+ServiceTypeUrlPart: SERVICE=WMS
+VersionUrlPart:     VERSION=1.1.1
+CoordinateReferenceSystemCacheWolf:  31468 31467 31469
+CoordinateReferenceSystemUrlPart: SRS=EPSG:31468 SRS=EPSG:31467 SRS=EPSG:31469 
+RequestUrlPart:     REQUEST=GetMap
+#LayersUrlPart:     LAYERS=map_604|?bersichtskarten||
+#LayersUrlPart:     LAYERS=layer_601|Digitale Orthobilder|24.945156|0.000000
+#LayersUrlPart:     LAYERS=layer_941|Ortsnamen|24.945156|0.049890
+#LayersUrlPart:     LAYERS=layer_9852|Kachel?bersicht|24.945156|0.049890
+#LayersUrlPart:     LAYERS=layer_603|TK 1:10 000 Farbe|12.472578|0.004989
+#LayersUrlPart:     LAYERS=layer_10455|TK 1:25 000 Farbe|99.780624|0.000499
+#LayersUrlPart:     LAYERS=layer_607|TK 1:50 000 Farbe|124.725779|4.989031
+#LayersUrlPart:     LAYERS=layer_609|TK 1:100 000 Farbe|249.451559|4.989031
+#LayersUrlPart:     LAYERS=layer_403|TK 1:250 000 Farbe|4989.031178|4.989031
+#LayersUrlPart:     LAYERS=layer_9850|TK10|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9849|TK25|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9848|TK50|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9847|TK100|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_602|TK 1:10 000 s/w|9.978062|0.000499
+#LayersUrlPart:     LAYERS=layer_10456|TK 1:25 000 s/w|99.780624|0.000499
+#LayersUrlPart:     LAYERS=layer_604|Flurstuecksstruktur|9.978062|0.399122
+#LayersUrlPart:     LAYERS=layer_606|TK 1:50 000 s/w|124.725779|4.989031
+#LayersUrlPart:     LAYERS=layer_608|TK 1:100 000 s/w|249.451559|2.494516
+#LayersUrlPart:     LAYERS=layer_401|TK 1:250 000 s/w|4989.031178|49.890312
+#LayersUrlPart:     LAYERS=layer_9844|Flurgrenzen|29.933688|0.049890
+#LayersUrlPart:     LAYERS=layer_9845|Gemarkungsgrenzen|29.933688|0.049890
+#LayersUrlPart:     LAYERS=layer_15544|Landesgrenze|49890.311784|0.000499
+#LayersUrlPart:     LAYERS=layer_15545|Landkreisgrenzen|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_15546|Einheitsgemeinden|49890.311784|0.000499
+#LayersUrlPart:     LAYERS=layer_15547|Verbandsgemeinden|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_10844|BRW 2003|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10845|BRW 2004|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10846|BRW 2005|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10847|BRW 2006|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10848|BRW 2007|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10849|BRW 2008|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10850|BRW 2009|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_12644|BRW 2010|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10292|Flurneuordnung||
+#LayersUrlPart:     LAYERS=layer_10290|ALFF-Dienstsitze||
+#LayersUrlPart:     LAYERS=layer_10291|ALFF-Amtsbereiche||
+#LayersUrlPart:     LAYERS=layer_10293|InVeKoS Landschaftselemente||
+#LayersUrlPart:     LAYERS=layer_10294|InVeKoS Feldbl?cke||
+#LayersUrlPart:     LAYERS=layer_13644|CIR-2009|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_10288|Walddecker||
+#LayersUrlPart:     LAYERS=layer_10289|Wuchsgebiete/Wuchsbezirke||
+#LayersUrlPart:     LAYERS=layer_10282|LFB-Reviere||
+#LayersUrlPart:     LAYERS=layer_10283|LFB-Forstbetriebe||
+#LayersUrlPart:     LAYERS=layer_10284|LFB-Sitz-Forstbetriebe||
+#LayersUrlPart:     LAYERS=layer_10285|LZW-Reviere||
+#LayersUrlPart:     LAYERS=layer_10286|LZW-Forst?mter||
+#LayersUrlPart:     LAYERS=layer_10287|LZW-Sitz-Forst?mter||
+#LayersUrlPart:     LAYERS=layer_12460|Biosphaerenreservat||
+#LayersUrlPart:     LAYERS=layer_12461|Fauna-Flora-Habitat-Gebiet||
+#LayersUrlPart:     LAYERS=layer_12462|Landschaftsschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12463|Naturschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12464|Naturpark||
+#LayersUrlPart:     LAYERS=layer_12465|Nationalpark||
+#LayersUrlPart:     LAYERS=layer_12466|Vogelschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12467|Wasserschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_13744|Umfallradius|29.934187|0.000499
+#LayersUrlPart:     LAYERS=layer_13745|Wind_Bestand|29.934187|0.000499
+#LayersUrlPart:     LAYERS=map_14008|Regionale Planungsgemeinschaften||
+#LayersUrlPart:     LAYERS=layer_14848|RPG Altmark|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14849|RPG Anhalt-Bitterfeld-Wittenberg|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14850|RPG Halle|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14851|RPG Harz|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14852|RPG Magdeburg|498903.117837|0.000499
+LayersUrlPart:     LAYERS=layer_607
+StylesUrlPart:     STYLES=
+ImageFormatUrlPart:FORMAT=image/png
+BoundingBoxTopLeftWGS84: N 53.2226 E 10.5012
+BoundingBoxButtomRightWGS84: N 50.5272 E 13.4957
+#BBox_Mitte: N 51.874924375 E 11.9984684985
+MinScale:   5
+MaxScale:   90
+RecommendedScale:   5 7 10
+ImageFileExtension: .png



From araber95 at mail.berlios.de  Tue Nov  9 09:51:14 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Tue,  9 Nov 2010 09:51:14 PM +0100
Subject: [Cachewolf-svn] r2852 - trunk/res_noewe/webmapservices
Message-ID: <20101109205114.F35D2481124@sheep.berlios.de>

Author: araber95
Date: 2010-11-09 21:51:14 +0100 (Tue, 09 Nov 2010)
New Revision: 2852

Added:
   trunk/res_noewe/webmapservices/de-st_p.wms
Log:
new map server lvermgeo sachsen-anhalt for orthophotos

Added: trunk/res_noewe/webmapservices/de-st_p.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-st_p.wms	                        (rev 0)
+++ trunk/res_noewe/webmapservices/de-st_p.wms	2010-11-09 20:51:14 UTC (rev 2852)
@@ -0,0 +1,83 @@
+?TakenFromUrl:       www.lvermgeo.sachsen-anhalt.de
+GetCapabilitiesUrl: http://geoportal.geodaten.sachsen-anhalt.de/geodatenportal/servlet/gtEntryPoint;jsessionid=51711E7127EC019A09827A328FE11E69?wms_service_name=Geodatenportal&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
+Name:               de.sachsen-anhalt p
+MapType:                        photo
+MainUrl:            http://geoportal.geodaten.sachsen-anhalt.de/geodatenportal/servlet/gtEntryPoint;jsessionid=51711E7127EC019A09827A328FE11E69?wms_service_name=Geodatenportal&
+ServiceTypeUrlPart: SERVICE=WMS
+VersionUrlPart:     VERSION=1.1.1
+CoordinateReferenceSystemCacheWolf:  31468 31467 31469
+CoordinateReferenceSystemUrlPart: SRS=EPSG:31468 SRS=EPSG:31467 SRS=EPSG:31469 
+RequestUrlPart:     REQUEST=GetMap
+#LayersUrlPart:     LAYERS=map_604|?bersichtskarten||
+#LayersUrlPart:     LAYERS=layer_601|Digitale Orthobilder|24.945156|0.000000
+#LayersUrlPart:     LAYERS=layer_941|Ortsnamen|24.945156|0.049890
+#LayersUrlPart:     LAYERS=layer_9852|Kachel?bersicht|24.945156|0.049890
+#LayersUrlPart:     LAYERS=layer_603|TK 1:10 000 Farbe|12.472578|0.004989
+#LayersUrlPart:     LAYERS=layer_10455|TK 1:25 000 Farbe|99.780624|0.000499
+#LayersUrlPart:     LAYERS=layer_607|TK 1:50 000 Farbe|124.725779|4.989031
+#LayersUrlPart:     LAYERS=layer_609|TK 1:100 000 Farbe|249.451559|4.989031
+#LayersUrlPart:     LAYERS=layer_403|TK 1:250 000 Farbe|4989.031178|4.989031
+#LayersUrlPart:     LAYERS=layer_9850|TK10|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9849|TK25|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9848|TK50|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9847|TK100|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_602|TK 1:10 000 s/w|9.978062|0.000499
+#LayersUrlPart:     LAYERS=layer_10456|TK 1:25 000 s/w|99.780624|0.000499
+#LayersUrlPart:     LAYERS=layer_604|Flurstuecksstruktur|9.978062|0.399122
+#LayersUrlPart:     LAYERS=layer_606|TK 1:50 000 s/w|124.725779|4.989031
+#LayersUrlPart:     LAYERS=layer_608|TK 1:100 000 s/w|249.451559|2.494516
+#LayersUrlPart:     LAYERS=layer_401|TK 1:250 000 s/w|4989.031178|49.890312
+#LayersUrlPart:     LAYERS=layer_9844|Flurgrenzen|29.933688|0.049890
+#LayersUrlPart:     LAYERS=layer_9845|Gemarkungsgrenzen|29.933688|0.049890
+#LayersUrlPart:     LAYERS=layer_15544|Landesgrenze|49890.311784|0.000499
+#LayersUrlPart:     LAYERS=layer_15545|Landkreisgrenzen|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_15546|Einheitsgemeinden|49890.311784|0.000499
+#LayersUrlPart:     LAYERS=layer_15547|Verbandsgemeinden|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_10844|BRW 2003|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10845|BRW 2004|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10846|BRW 2005|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10847|BRW 2006|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10848|BRW 2007|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10849|BRW 2008|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10850|BRW 2009|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_12644|BRW 2010|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10292|Flurneuordnung||
+#LayersUrlPart:     LAYERS=layer_10290|ALFF-Dienstsitze||
+#LayersUrlPart:     LAYERS=layer_10291|ALFF-Amtsbereiche||
+#LayersUrlPart:     LAYERS=layer_10293|InVeKoS Landschaftselemente||
+#LayersUrlPart:     LAYERS=layer_10294|InVeKoS Feldbl?cke||
+#LayersUrlPart:     LAYERS=layer_13644|CIR-2009|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_10288|Walddecker||
+#LayersUrlPart:     LAYERS=layer_10289|Wuchsgebiete/Wuchsbezirke||
+#LayersUrlPart:     LAYERS=layer_10282|LFB-Reviere||
+#LayersUrlPart:     LAYERS=layer_10283|LFB-Forstbetriebe||
+#LayersUrlPart:     LAYERS=layer_10284|LFB-Sitz-Forstbetriebe||
+#LayersUrlPart:     LAYERS=layer_10285|LZW-Reviere||
+#LayersUrlPart:     LAYERS=layer_10286|LZW-Forst?mter||
+#LayersUrlPart:     LAYERS=layer_10287|LZW-Sitz-Forst?mter||
+#LayersUrlPart:     LAYERS=layer_12460|Biosphaerenreservat||
+#LayersUrlPart:     LAYERS=layer_12461|Fauna-Flora-Habitat-Gebiet||
+#LayersUrlPart:     LAYERS=layer_12462|Landschaftsschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12463|Naturschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12464|Naturpark||
+#LayersUrlPart:     LAYERS=layer_12465|Nationalpark||
+#LayersUrlPart:     LAYERS=layer_12466|Vogelschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12467|Wasserschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_13744|Umfallradius|29.934187|0.000499
+#LayersUrlPart:     LAYERS=layer_13745|Wind_Bestand|29.934187|0.000499
+#LayersUrlPart:     LAYERS=map_14008|Regionale Planungsgemeinschaften||
+#LayersUrlPart:     LAYERS=layer_14848|RPG Altmark|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14849|RPG Anhalt-Bitterfeld-Wittenberg|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14850|RPG Halle|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14851|RPG Harz|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14852|RPG Magdeburg|498903.117837|0.000499
+LayersUrlPart:     LAYERS=layer_601
+StylesUrlPart:     STYLES=
+ImageFormatUrlPart:FORMAT=image/jpeg
+BoundingBoxTopLeftWGS84: N 53.2226 E 10.5012
+BoundingBoxButtomRightWGS84: N 50.5272 E 13.4957
+#BBox_Mitte: N 51.874924375 E 11.9984684985
+MinScale:   0
+MaxScale:   25
+RecommendedScale:    1 2,5 5
+ImageFileExtension: .jpg



From mik77 at mail.berlios.de  Wed Nov 10 03:00:46 2010
From: mik77 at mail.berlios.de (mik77 at mail.berlios.de)
Date: Wed, 10 Nov 2010 03:00:46 PM +0100
Subject: [Cachewolf-svn] r2853 - trunk/res_noewe
Message-ID: <20101110140046.4EFC54806DB@sheep.berlios.de>

Author: mik77
Date: 2010-11-10 15:00:45 +0100 (Wed, 10 Nov 2010)
New Revision: 2853

Modified:
   trunk/res_noewe/spider.def
Log:
 - first adaptions to new GC design

Modified: trunk/res_noewe/spider.def
===================================================================
--- trunk/res_noewe/spider.def	2010-11-09 20:51:14 UTC (rev 2852)
+++ trunk/res_noewe/spider.def	2010-11-10 14:00:45 UTC (rev 2853)
@@ -41,6 +41,7 @@
 # Version 8.0 - 20100604 adaption to new GC-design
 # Version 9.0 - 20100630 adaption to new GC-design
 # Version 10.0 - 20100729 adaption to new GC-design DateHiddenrex , optimized cacheOwnerRex araber95
+# Version 11.0 - 20101110 adaption to new GC-design (maybe not complete)
 #============================================================
 # A suffix of Rex indicates a regular expression
 # A suffix of ExStart indicates the start of an Extractor search pattern
@@ -109,7 +110,7 @@
 longDescRex        = tBody_LongDescription">((?s).*?)<td\ valign="top"\ width="10%">\\s*&nbsp;\\s*</td
 cacheNameRex       = tBody_CacheName">((?s).*?)</span>
 cacheOwnerRex      = &wid(?:(?s).*?)>((?s).*?)<
-dateHiddenRex      = (?:Hidden|Event\ Date)\\s*:\ </strong>\\s*((?s).*?)\\s*<
+dateHiddenRex      = (?:Hidden|Event\ Date)\\s*:\\s*</strong>\\s*((?s).*?)\\s*<
 hintsRex           = <div id="div_hint" class="HalfLeft">\\s*((?s).*?)\\s*</div>
 sizeRex            = alt="Size:\ ((?s).*?)"\ />&nbsp<small>
 difficultyRex      = Difficulty:</strong>\\s*<img src=.*?alt="(.*?)\ out\ of
@@ -127,18 +128,18 @@
 singleLogExEnd     = <small><a\ href="
 # iconEx, nameTempEx, dateEx, singleLogEx werden auf einen singleLog angewendet
 iconExStart        = www.geocaching.com/images/icons/
-iconExEnd          = "\ title="
-nameTempExStart    = <a\ href="
+iconExEnd          = '\ title='
+nameTempExStart    = <a\ href='
 nameTempExEnd      = /a>
 # Name extrahiert aus nameTemp
 nameExStart        = >
 nameExEnd          = <
-dateExStart        = "\ />&nbsp;
-dateExEnd          = \ by\ <a\ href="/profile/?guid=
-logExStart         = found)<br\ /><br\ />
+dateExStart        = '\ />&nbsp;
+dateExEnd          = \ by\ <a\ href='/profile/?guid=
+logExStart         = found)<br/><br/>
 logExEnd           = <br\ /><br\ /><small><a\ href="
-logIdExStart         = "\ id="
-logIdExEnd           = ">
+logIdExStart         = '\ id='
+logIdExEnd           = '>
 # Die Icons, die einen erfolgreichen Fund signalisieren
 icon_smile         = icon_smile.gif
 icon_camera        = icon_camera.gif
@@ -149,7 +150,7 @@
 #--------------------------------------
 # blockEx extrahiert zun?chst den Bugbereich aus der gesamten Seite
 blockExStart       = <span\ id="ctl00_ContentBody_uxTravelBugList_uxInventoryLabel">Inventory</span>
-blockExEnd         = <p class="NoSpacing">
+blockExEnd         = <p\ class="NoSpacing">
 # bugEx extrahiert die Namen der einzelnen Bugs aus dem Bugbereich
 bugExStart         = <a\ href="
 bugExEnd           = </a>



From araber95 at mail.berlios.de  Wed Nov 10 10:22:44 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 10 Nov 2010 10:22:44 PM +0100
Subject: [Cachewolf-svn] r2854 - in branches/r1.2: res_noewe
	res_noewe/languages res_noewe/webmapservices src/CacheWolf/imp
Message-ID: <20101110212244.D30BD480C72@sheep.berlios.de>

Author: araber95
Date: 2010-11-10 22:22:44 +0100 (Wed, 10 Nov 2010)
New Revision: 2854

Added:
   branches/r1.2/res_noewe/webmapservices/de-st_p.wms
   branches/r1.2/res_noewe/webmapservices/de-st_t10.wms
   branches/r1.2/res_noewe/webmapservices/de-st_t50.wms
Modified:
   branches/r1.2/res_noewe/languages/DE.cfg
   branches/r1.2/res_noewe/languages/EN.cfg
   branches/r1.2/res_noewe/languages/FR.cfg
   branches/r1.2/res_noewe/languages/NL.cfg
   branches/r1.2/res_noewe/languages/PL.cfg
   branches/r1.2/res_noewe/languages/SV.cfg
   branches/r1.2/res_noewe/spider.def
   branches/r1.2/src/CacheWolf/imp/SpiderGC.java
Log:
rc to same level as NB 2853

Modified: branches/r1.2/res_noewe/languages/DE.cfg
===================================================================
--- branches/r1.2/res_noewe/languages/DE.cfg	2010-11-10 14:00:45 UTC (rev 2853)
+++ branches/r1.2/res_noewe/languages/DE.cfg	2010-11-10 21:22:44 UTC (rev 2854)
@@ -979,7 +979,7 @@
 5511=Gefunden+
 5512=\nneue / zu aktualisierende Caches
 5513=Laden von:+
-5514=Travelbug:+
+5514=\nTravelbug:+
 5515=Fehler beim Laden des Caches.\nBitte ??berpr??fen Sie Ihre Internetverbindung und ob als Sprache bei GC.com English ausgew??hlt ist.\nNoch einmal versuchen?
 5516=+Cachebeschreibungen\nkonnten nicht geladen werden.
 5517=Aktualisierungen importieren?

Modified: branches/r1.2/res_noewe/languages/EN.cfg
===================================================================
--- branches/r1.2/res_noewe/languages/EN.cfg	2010-11-10 14:00:45 UTC (rev 2853)
+++ branches/r1.2/res_noewe/languages/EN.cfg	2010-11-10 21:22:44 UTC (rev 2854)
@@ -979,7 +979,7 @@
 5511=Found+
 5512=\nnew / update caches
 5513=Loading:+
-5514=Getting bug:+
+5514=\nGetting bug:+
 5515=Failed to load cache.\nPlease check your internet connection.\nRetry?
 5516=+cache descriptions\ncould not be loaded.
 5517=Spider updates?

Modified: branches/r1.2/res_noewe/languages/FR.cfg
===================================================================
--- branches/r1.2/res_noewe/languages/FR.cfg	2010-11-10 14:00:45 UTC (rev 2853)
+++ branches/r1.2/res_noewe/languages/FR.cfg	2010-11-10 21:22:44 UTC (rev 2854)
@@ -979,7 +979,7 @@
 5511=Trouv??e+
 5512=\nnouveau / mettre ?? jour Caches
 5513=Chargeant:+
-5514=Travel Bug:+
+5514=\nTravel Bug:+
 5515=Erreur en chargeant la cache.\nMerci de v??rifier votre connexion internet et si vous avez language englais chez gc.com..\nContinuer d'essayer?
 5516=+descriptions cache\nne pouvait pas ??tre charg??.
 5517=Spider mises ?? jour?

Modified: branches/r1.2/res_noewe/languages/NL.cfg
===================================================================
--- branches/r1.2/res_noewe/languages/NL.cfg	2010-11-10 14:00:45 UTC (rev 2853)
+++ branches/r1.2/res_noewe/languages/NL.cfg	2010-11-10 21:22:44 UTC (rev 2854)
@@ -979,7 +979,7 @@
 5511=Gevonden+
 5512=\nniew / update caches
 5513=Bezig met laden:+
-5514=Travelbug
+5514=\nTravelbug:+
 5515=Failed to load-cache.\nPlease Controleer je internetverbinding.\nRetry?
 5516=+cache beschrijvingen\ncould niet worden geladen.
 5517=Spider updates?

Modified: branches/r1.2/res_noewe/languages/PL.cfg
===================================================================
--- branches/r1.2/res_noewe/languages/PL.cfg	2010-11-10 14:00:45 UTC (rev 2853)
+++ branches/r1.2/res_noewe/languages/PL.cfg	2010-11-10 21:22:44 UTC (rev 2854)
@@ -979,7 +979,7 @@
 5511=Znaleziona+
 5512=\nnowy / aktualizacja skrzynki
 5513=Wczytuje:+
-5514=Pobieram bugi:+
+5514=\nPobieram bugi:+
 5515=Nie mozna zaladowac skrzynki.\nProsze sprawdzic polaczenie z netem.\nSprobowac ponownie?
 5516=+Nie mozna zaladowac\nopisu skrzynek.
 5517=Spider updates?

Modified: branches/r1.2/res_noewe/languages/SV.cfg
===================================================================
--- branches/r1.2/res_noewe/languages/SV.cfg	2010-11-10 14:00:45 UTC (rev 2853)
+++ branches/r1.2/res_noewe/languages/SV.cfg	2010-11-10 21:22:44 UTC (rev 2854)
@@ -93,7 +93,7 @@
 161=Visa Blacklist
 162=Ladda kalibrerad
 170=V??lj databas
-171=profil finns inte: +
+171=profil finns inte:+
 172=Fel: kan inte skapa kartor katalog:
 173=gpsbabel:
 174=korta namn
@@ -131,8 +131,8 @@
 207=** oanv??nda **
 208=Rebuild index
 209=Rebuilding index
-210=cachar utg??: +
-211=Caches till: +
+210=cachar utg??:+
+211=Caches till:+
 212=Ta bort alla. XML-filer inte index.xml och tillh??rande bilder
 213=bort f??r??ldral??sa
 214=Ny v??gpunkt
@@ -394,8 +394,8 @@
 1026=# Rec
 1027=OC-Index
 1028=)?
-1029=Det finns waypoints som ??r markerade men osynligt.\n (Main cachar: +
-1030=, ytterligare Waypoints: +
+1029=Det finns waypoints som ??r markerade men osynligt.\n (Main cachar:+
+1030=, ytterligare Waypoints:+
 1031=Ta bort dem ocks???
 1032=S??kv??g till webbl??sare:
 1033=??r felaktigt!
@@ -502,10 +502,10 @@
 1614=Fel vid unzipping udpate fil
 1615=Fel vid analys uppdaterad fil, ange:
 1616=Fel: Kunde inte h??mta udpate fil fr??n opencaching.de
-1617=Ignorera fel i html-Cache-Beskrivning: "<img" utan "src =" i cache +
-1618=Ignorera fel i Cache: +
-1619=: kunde inte ladda ner bild fr??n URL: +
-1620=h??mta inb??ddade bilder: +
+1617=Ignorera fel i html-Cache-Beskrivning: "<img" utan "src =" i cache+
+1618=Ignorera fel i Cache:+
+1619=: kunde inte ladda ner bild fr??n URL:+
+1620=h??mta inb??ddade bilder:+
 1621=Fel vid tolkning av data\n fr??n Opencaching.de, ??r\nThis troligen ett fel p?? Opencaching.de\nRetry senare\n Status:
 1622=Uteslut hittade cachar
 1623=Importera upto:
@@ -530,7 +530,7 @@
 1710=Kan inte r??kna tom str??ng
 1711=Ers??ttning tecken str??ngar m??ste vara lika l??nga
 1712=Ogiltig samordna:
-1713=Ogiltigt samordna format. Till??tna ??r cw / dd / DMM / DMS / +
+1713=Ogiltigt samordna format. Till??tna ??r cw / dd / DMM / DMS /+
 1714=G?? till: Waypoint finns inte:
 1715=Instr: Startposition inte i str??ng
 1716=MID: Integer argument v??ntat
@@ -802,24 +802,24 @@
 4109=Laddar kartor ...
 4110=laddning
 4111=Koordinater m??ste anges i formatet N XX XX.XXX E XXX XX.XXX
-4112=IO-Fel vid kopiering bild fr??n: +
+4112=IO-Fel vid kopiering bild fr??n:+
 4113=+till:+
 4114=+error:+
-4115=Fel: Kunde inte avkoda bild: +
+4115=Fel: Kunde inte avkoda bild:+
 4116=+- bild inte kopieras
-4117=Fel vid import. Map-fil: +
+4117=Fel vid import. Map-fil:+
 4118=IO-Fel vid l??sning eller skrivning kalibrering fil
-4119=Ingen kalibrering fil hittades f??r: +
+4119=Ingen kalibrering fil hittades f??r:+
 4120=gjort.
 4200=V??lj karta katalog
 4201=Information
 4203=Lastspecifikationers av kartor ...
 4204=Ingen georefererade kartan tillg??nglig\n V??lj en skala\n att visa sp??ret och cachar. \n Du kan f?? en av menyn: Application / Kartor / download kalibrerad
-4206=Dist: +
+4206=Dist:+
 4207=Fel
-4208=Bug:\nillegal mapChangeModus: +
+4208=Bug:\nillegal mapChangeModus:+
 4210=Flytta kartan kan inte k??ras utan en karta - v??lj ett. \n Du kan v??lja en tom karta
-4211=No +
+4211=No+
 4212=mindre
 4213=mer
 4214=+detaljerad karta finns
@@ -829,7 +829,7 @@
 4218=Kunde inte l??sa kartan:
 4219=Inte tillr??ckligt med minne f??r att l??sa kartan:
 4220=Du kan prova att st??nga\n alla prgrams och 0A??tarta CacheWolf
-4221=inte tillr??ckligt med resurser f??r att ladda kartan: +
+4221=inte tillr??ckligt med resurser f??r att ladda kartan:+
 4222=Out of memory error
 4230=G?? hit$g
 4231=G?? hit
@@ -890,8 +890,8 @@
 4296=detailing
 4300=tom 1 pixel=+
 4301=+meter
-4302=Lat / Lon r??ckh??ll n??r du l??ser +
-4303=inte tillr??ckligt rader i filen +
+4302=Lat / Lon r??ckh??ll n??r du l??ser+
+4303=inte tillr??ckligt rader i filen+
 4304=inte tillr??ckligt med po??ng f??r att kalibrera kartan
 4305=Ej till??tet v??rden i affine\n (matris kan inte inverteras)\n i filen
 4306=map inte kalibreras
@@ -952,11 +952,11 @@
 4830=Inga matchande Gau??F-Kr??cger-rand i EPSG-kodlistan p??. WMS
 4831=getMapInfoObject: Koordinatsystem inte st??ds av Cachewolf:
 4900=+??r inte en tysk Gauss-Krueger samordna
-4920=EPSG kod +
+4920=EPSG kod+
 4921=+st??ds
-4922=EPSG kod saknas i: +
-4923=fromWgs84: EPSG kod +
-4924=ToWgs84: EPSG kod +
+4922=EPSG kod saknas i:+
+4923=fromWgs84: EPSG kod+
+4924=ToWgs84: EPSG kod+
 5000=Load Cachelist
 5001=Kan inte spindel ytterligare waypoint direkt.\nPlease kolla viktigaste cache.
 5002=: F??r n??rvarande ??r denna funktion endast tillg??nglig f??r geocaching.com och opencaching. (CZ, DE, org.uk, pl).
@@ -976,17 +976,17 @@
 5508=Loggar in ..
 5509=Koordinater f??r centrum m??ste st??llas
 5510=Spider Options
-5511=Found +
+5511=Found+
 5512=\nnya / uppdatering cachar
-5513=Laddar: +
-5514=Getting bug: +
+5513=Laddar:+
+5514=\nGetting bug:+
 5515=Kunde inte ladda cache.\nPlease kontrollera din Internetanslutning.\nRetry?
 5516=+cache beskrivningar\ncould inte laddas.
 5517=Spider uppdateringar?
 5518=+cachar i databasen beh??ver uppdateras. Uppdatera nu?
 5519=Information
 5520=Endast ges maximalt cachar lastades.\nRepeat spidering senare att l??sa mer cachar.\nNo redan existerande cachar har uppdaterats.
-5521=Sida +
+5521=Sida+
 5522=S??k ??ldre xml-filer (utan <CACHE... />)?
 6000=Guid
 6001=Namn
@@ -1007,7 +1007,7 @@
 6019=Sp??rningsnummer
 6020=Travelbug hittades inte.
 6021=Mer ??n en travelbug hittades. Ange namn mer exakt.
-6022=: Aktuella cache: +
+6022=: Aktuella cache:+
 6025=Namn:
 6026=Sp??rningsnummer:
 6027=Id / GUID:
@@ -1052,7 +1052,7 @@
 7013=fel
 7020=rekommenderade versionen typ
 7021=typ av denna version
-7022=detta +
+7022=detta+
 7023=nedladdning Fel nuvarande version information
 7100=Serial Port Options
 7101=Uppdatera Ports$u
@@ -1062,11 +1062,11 @@
 7105=Forward GPS-data att vara v??rd
 7106=Alla data fr??n GPS kommer att skickas till TCP-port 23\n och kan omf??rdelas det till en seriell port\n av
 7107=Intervall i sekunder f??r avverkning
-7108=Fel: Kunde inte ??ppna serieport: +
+7108=Fel: Kunde inte ??ppna serieport:+
 7109=Fel: Kunde inte h??mta lista ??ver tillg??ngliga seriella portar
 7110=GPS hittades inte
-7111=Trying +
-7112=at +
+7111=Trying+
+7112=at+
 7113=- fick en del data
 7114=GPS Port hittades
 7115=- Ingen GPS data tag hittades

Modified: branches/r1.2/res_noewe/spider.def
===================================================================
--- branches/r1.2/res_noewe/spider.def	2010-11-10 14:00:45 UTC (rev 2853)
+++ branches/r1.2/res_noewe/spider.def	2010-11-10 21:22:44 UTC (rev 2854)
@@ -41,6 +41,7 @@
 # Version 8.0 - 20100604 adaption to new GC-design
 # Version 9.0 - 20100630 adaption to new GC-design
 # Version 10.0 - 20100729 adaption to new GC-design DateHiddenrex , optimized cacheOwnerRex araber95
+# Version 11.0 - 20101110 adaption to new GC-design (maybe not complete)
 #============================================================
 # A suffix of Rex indicates a regular expression
 # A suffix of ExStart indicates the start of an Extractor search pattern
@@ -103,13 +104,13 @@
 fetchAllLogs       = &log=y
 cacheUnavailable   = cache\ is\ temporarily\ unavailable
 cacheArchived      = cache\ has\ been\ archived
-premiumCachepage   = viewable\ to\ Premium\ Members\ only.
+premiumCachepage   = Premium\ Member\ Only\ Cache
 latLonRex          = tBody_LatLon"\ style="font-weight:bold;">((?s).*?)</span>
 shortDescRex       = tBody_ShortDescription">((?s).*?)</span>
 longDescRex        = tBody_LongDescription">((?s).*?)<td\ valign="top"\ width="10%">\\s*&nbsp;\\s*</td
 cacheNameRex       = tBody_CacheName">((?s).*?)</span>
 cacheOwnerRex      = &wid(?:(?s).*?)>((?s).*?)<
-dateHiddenRex      = (?:Hidden|Event\ Date)\\s*:\ </strong>\\s*((?s).*?)\\s*<
+dateHiddenRex      = (?:Hidden|Event\ Date)\\s*:\\s*</strong>\\s*((?s).*?)\\s*<
 hintsRex           = <div id="div_hint" class="HalfLeft">\\s*((?s).*?)\\s*</div>
 sizeRex            = alt="Size:\ ((?s).*?)"\ />&nbsp<small>
 difficultyRex      = Difficulty:</strong>\\s*<img src=.*?alt="(.*?)\ out\ of
@@ -127,18 +128,18 @@
 singleLogExEnd     = <small><a\ href="
 # iconEx, nameTempEx, dateEx, singleLogEx werden auf einen singleLog angewendet
 iconExStart        = www.geocaching.com/images/icons/
-iconExEnd          = "\ title="
-nameTempExStart    = <a\ href="
+iconExEnd          = '\ title='
+nameTempExStart    = <a\ href='
 nameTempExEnd      = /a>
 # Name extrahiert aus nameTemp
 nameExStart        = >
 nameExEnd          = <
-dateExStart        = "\ />&nbsp;
-dateExEnd          = \ by\ <a\ href="/profile/?guid=
-logExStart         = found)<br\ /><br\ />
+dateExStart        = '\ />&nbsp;
+dateExEnd          = \ by\ <a\ href='/profile/?guid=
+logExStart         = found)<br/><br/>
 logExEnd           = <br\ /><br\ /><small><a\ href="
-logIdExStart         = "\ id="
-logIdExEnd           = ">
+logIdExStart         = '\ id='
+logIdExEnd           = '>
 # Die Icons, die einen erfolgreichen Fund signalisieren
 icon_smile         = icon_smile.gif
 icon_camera        = icon_camera.gif
@@ -149,7 +150,7 @@
 #--------------------------------------
 # blockEx extrahiert zun?chst den Bugbereich aus der gesamten Seite
 blockExStart       = <span\ id="ctl00_ContentBody_uxTravelBugList_uxInventoryLabel">Inventory</span>
-blockExEnd         = <p class="NoSpacing">
+blockExEnd         = <p\ class="NoSpacing">
 # bugEx extrahiert die Namen der einzelnen Bugs aus dem Bugbereich
 bugExStart         = <a\ href="
 bugExEnd           = </a>

Added: branches/r1.2/res_noewe/webmapservices/de-st_p.wms
===================================================================
--- branches/r1.2/res_noewe/webmapservices/de-st_p.wms	                        (rev 0)
+++ branches/r1.2/res_noewe/webmapservices/de-st_p.wms	2010-11-10 21:22:44 UTC (rev 2854)
@@ -0,0 +1,83 @@
+???TakenFromUrl:       www.lvermgeo.sachsen-anhalt.de
+GetCapabilitiesUrl: http://geoportal.geodaten.sachsen-anhalt.de/geodatenportal/servlet/gtEntryPoint;jsessionid=51711E7127EC019A09827A328FE11E69?wms_service_name=Geodatenportal&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
+Name:               de.sachsen-anhalt p
+MapType:                        photo
+MainUrl:            http://geoportal.geodaten.sachsen-anhalt.de/geodatenportal/servlet/gtEntryPoint;jsessionid=51711E7127EC019A09827A328FE11E69?wms_service_name=Geodatenportal&
+ServiceTypeUrlPart: SERVICE=WMS
+VersionUrlPart:     VERSION=1.1.1
+CoordinateReferenceSystemCacheWolf:  31468 31467 31469
+CoordinateReferenceSystemUrlPart: SRS=EPSG:31468 SRS=EPSG:31467 SRS=EPSG:31469 
+RequestUrlPart:     REQUEST=GetMap
+#LayersUrlPart:     LAYERS=map_604|??bersichtskarten||
+#LayersUrlPart:     LAYERS=layer_601|Digitale Orthobilder|24.945156|0.000000
+#LayersUrlPart:     LAYERS=layer_941|Ortsnamen|24.945156|0.049890
+#LayersUrlPart:     LAYERS=layer_9852|Kachel??bersicht|24.945156|0.049890
+#LayersUrlPart:     LAYERS=layer_603|TK 1:10 000 Farbe|12.472578|0.004989
+#LayersUrlPart:     LAYERS=layer_10455|TK 1:25 000 Farbe|99.780624|0.000499
+#LayersUrlPart:     LAYERS=layer_607|TK 1:50 000 Farbe|124.725779|4.989031
+#LayersUrlPart:     LAYERS=layer_609|TK 1:100 000 Farbe|249.451559|4.989031
+#LayersUrlPart:     LAYERS=layer_403|TK 1:250 000 Farbe|4989.031178|4.989031
+#LayersUrlPart:     LAYERS=layer_9850|TK10|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9849|TK25|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9848|TK50|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9847|TK100|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_602|TK 1:10 000 s/w|9.978062|0.000499
+#LayersUrlPart:     LAYERS=layer_10456|TK 1:25 000 s/w|99.780624|0.000499
+#LayersUrlPart:     LAYERS=layer_604|Flurstuecksstruktur|9.978062|0.399122
+#LayersUrlPart:     LAYERS=layer_606|TK 1:50 000 s/w|124.725779|4.989031
+#LayersUrlPart:     LAYERS=layer_608|TK 1:100 000 s/w|249.451559|2.494516
+#LayersUrlPart:     LAYERS=layer_401|TK 1:250 000 s/w|4989.031178|49.890312
+#LayersUrlPart:     LAYERS=layer_9844|Flurgrenzen|29.933688|0.049890
+#LayersUrlPart:     LAYERS=layer_9845|Gemarkungsgrenzen|29.933688|0.049890
+#LayersUrlPart:     LAYERS=layer_15544|Landesgrenze|49890.311784|0.000499
+#LayersUrlPart:     LAYERS=layer_15545|Landkreisgrenzen|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_15546|Einheitsgemeinden|49890.311784|0.000499
+#LayersUrlPart:     LAYERS=layer_15547|Verbandsgemeinden|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_10844|BRW 2003|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10845|BRW 2004|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10846|BRW 2005|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10847|BRW 2006|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10848|BRW 2007|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10849|BRW 2008|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10850|BRW 2009|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_12644|BRW 2010|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10292|Flurneuordnung||
+#LayersUrlPart:     LAYERS=layer_10290|ALFF-Dienstsitze||
+#LayersUrlPart:     LAYERS=layer_10291|ALFF-Amtsbereiche||
+#LayersUrlPart:     LAYERS=layer_10293|InVeKoS Landschaftselemente||
+#LayersUrlPart:     LAYERS=layer_10294|InVeKoS Feldbl??cke||
+#LayersUrlPart:     LAYERS=layer_13644|CIR-2009|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_10288|Walddecker||
+#LayersUrlPart:     LAYERS=layer_10289|Wuchsgebiete/Wuchsbezirke||
+#LayersUrlPart:     LAYERS=layer_10282|LFB-Reviere||
+#LayersUrlPart:     LAYERS=layer_10283|LFB-Forstbetriebe||
+#LayersUrlPart:     LAYERS=layer_10284|LFB-Sitz-Forstbetriebe||
+#LayersUrlPart:     LAYERS=layer_10285|LZW-Reviere||
+#LayersUrlPart:     LAYERS=layer_10286|LZW-Forst??mter||
+#LayersUrlPart:     LAYERS=layer_10287|LZW-Sitz-Forst??mter||
+#LayersUrlPart:     LAYERS=layer_12460|Biosphaerenreservat||
+#LayersUrlPart:     LAYERS=layer_12461|Fauna-Flora-Habitat-Gebiet||
+#LayersUrlPart:     LAYERS=layer_12462|Landschaftsschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12463|Naturschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12464|Naturpark||
+#LayersUrlPart:     LAYERS=layer_12465|Nationalpark||
+#LayersUrlPart:     LAYERS=layer_12466|Vogelschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12467|Wasserschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_13744|Umfallradius|29.934187|0.000499
+#LayersUrlPart:     LAYERS=layer_13745|Wind_Bestand|29.934187|0.000499
+#LayersUrlPart:     LAYERS=map_14008|Regionale Planungsgemeinschaften||
+#LayersUrlPart:     LAYERS=layer_14848|RPG Altmark|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14849|RPG Anhalt-Bitterfeld-Wittenberg|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14850|RPG Halle|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14851|RPG Harz|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14852|RPG Magdeburg|498903.117837|0.000499
+LayersUrlPart:     LAYERS=layer_601
+StylesUrlPart:     STYLES=
+ImageFormatUrlPart:FORMAT=image/jpeg
+BoundingBoxTopLeftWGS84: N 53.2226 E 10.5012
+BoundingBoxButtomRightWGS84: N 50.5272 E 13.4957
+#BBox_Mitte: N 51.874924375 E 11.9984684985
+MinScale:   0
+MaxScale:   25
+RecommendedScale:    1 2,5 5
+ImageFileExtension: .jpg

Added: branches/r1.2/res_noewe/webmapservices/de-st_t10.wms
===================================================================
--- branches/r1.2/res_noewe/webmapservices/de-st_t10.wms	                        (rev 0)
+++ branches/r1.2/res_noewe/webmapservices/de-st_t10.wms	2010-11-10 21:22:44 UTC (rev 2854)
@@ -0,0 +1,83 @@
+???TakenFromUrl:       www.lvermgeo.sachsen-anhalt.de
+GetCapabilitiesUrl: http://geoportal.geodaten.sachsen-anhalt.de/geodatenportal/servlet/gtEntryPoint;jsessionid=51711E7127EC019A09827A328FE11E69?wms_service_name=Geodatenportal&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
+Name:               de.sachsen-anhalt t10
+MapType:                        topo
+MainUrl:            http://geoportal.geodaten.sachsen-anhalt.de/geodatenportal/servlet/gtEntryPoint;jsessionid=51711E7127EC019A09827A328FE11E69?wms_service_name=Geodatenportal&
+ServiceTypeUrlPart: SERVICE=WMS
+VersionUrlPart:     VERSION=1.1.1
+CoordinateReferenceSystemCacheWolf:  31468 31467 31469
+CoordinateReferenceSystemUrlPart: SRS=EPSG:31468 SRS=EPSG:31467 SRS=EPSG:31469 
+RequestUrlPart:     REQUEST=GetMap
+#LayersUrlPart:     LAYERS=map_604|??bersichtskarten||
+#LayersUrlPart:     LAYERS=layer_601|Digitale Orthobilder|24.945156|0.000000
+#LayersUrlPart:     LAYERS=layer_941|Ortsnamen|24.945156|0.049890
+#LayersUrlPart:     LAYERS=layer_9852|Kachel??bersicht|24.945156|0.049890
+#LayersUrlPart:     LAYERS=layer_603|TK 1:10 000 Farbe|12.472578|0.004989
+#LayersUrlPart:     LAYERS=layer_10455|TK 1:25 000 Farbe|99.780624|0.000499
+#LayersUrlPart:     LAYERS=layer_607|TK 1:50 000 Farbe|124.725779|4.989031
+#LayersUrlPart:     LAYERS=layer_609|TK 1:100 000 Farbe|249.451559|4.989031
+#LayersUrlPart:     LAYERS=layer_403|TK 1:250 000 Farbe|4989.031178|4.989031
+#LayersUrlPart:     LAYERS=layer_9850|TK10|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9849|TK25|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9848|TK50|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9847|TK100|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_602|TK 1:10 000 s/w|9.978062|0.000499
+#LayersUrlPart:     LAYERS=layer_10456|TK 1:25 000 s/w|99.780624|0.000499
+#LayersUrlPart:     LAYERS=layer_604|Flurstuecksstruktur|9.978062|0.399122
+#LayersUrlPart:     LAYERS=layer_606|TK 1:50 000 s/w|124.725779|4.989031
+#LayersUrlPart:     LAYERS=layer_608|TK 1:100 000 s/w|249.451559|2.494516
+#LayersUrlPart:     LAYERS=layer_401|TK 1:250 000 s/w|4989.031178|49.890312
+#LayersUrlPart:     LAYERS=layer_9844|Flurgrenzen|29.933688|0.049890
+#LayersUrlPart:     LAYERS=layer_9845|Gemarkungsgrenzen|29.933688|0.049890
+#LayersUrlPart:     LAYERS=layer_15544|Landesgrenze|49890.311784|0.000499
+#LayersUrlPart:     LAYERS=layer_15545|Landkreisgrenzen|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_15546|Einheitsgemeinden|49890.311784|0.000499
+#LayersUrlPart:     LAYERS=layer_15547|Verbandsgemeinden|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_10844|BRW 2003|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10845|BRW 2004|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10846|BRW 2005|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10847|BRW 2006|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10848|BRW 2007|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10849|BRW 2008|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10850|BRW 2009|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_12644|BRW 2010|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10292|Flurneuordnung||
+#LayersUrlPart:     LAYERS=layer_10290|ALFF-Dienstsitze||
+#LayersUrlPart:     LAYERS=layer_10291|ALFF-Amtsbereiche||
+#LayersUrlPart:     LAYERS=layer_10293|InVeKoS Landschaftselemente||
+#LayersUrlPart:     LAYERS=layer_10294|InVeKoS Feldbl??cke||
+#LayersUrlPart:     LAYERS=layer_13644|CIR-2009|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_10288|Walddecker||
+#LayersUrlPart:     LAYERS=layer_10289|Wuchsgebiete/Wuchsbezirke||
+#LayersUrlPart:     LAYERS=layer_10282|LFB-Reviere||
+#LayersUrlPart:     LAYERS=layer_10283|LFB-Forstbetriebe||
+#LayersUrlPart:     LAYERS=layer_10284|LFB-Sitz-Forstbetriebe||
+#LayersUrlPart:     LAYERS=layer_10285|LZW-Reviere||
+#LayersUrlPart:     LAYERS=layer_10286|LZW-Forst??mter||
+#LayersUrlPart:     LAYERS=layer_10287|LZW-Sitz-Forst??mter||
+#LayersUrlPart:     LAYERS=layer_12460|Biosphaerenreservat||
+#LayersUrlPart:     LAYERS=layer_12461|Fauna-Flora-Habitat-Gebiet||
+#LayersUrlPart:     LAYERS=layer_12462|Landschaftsschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12463|Naturschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12464|Naturpark||
+#LayersUrlPart:     LAYERS=layer_12465|Nationalpark||
+#LayersUrlPart:     LAYERS=layer_12466|Vogelschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12467|Wasserschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_13744|Umfallradius|29.934187|0.000499
+#LayersUrlPart:     LAYERS=layer_13745|Wind_Bestand|29.934187|0.000499
+#LayersUrlPart:     LAYERS=map_14008|Regionale Planungsgemeinschaften||
+#LayersUrlPart:     LAYERS=layer_14848|RPG Altmark|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14849|RPG Anhalt-Bitterfeld-Wittenberg|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14850|RPG Halle|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14851|RPG Harz|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14852|RPG Magdeburg|498903.117837|0.000499
+LayersUrlPart:     LAYERS=layer_603
+StylesUrlPart:     STYLES=
+ImageFormatUrlPart:FORMAT=image/png
+BoundingBoxTopLeftWGS84: N 53.2226 E 10.5012
+BoundingBoxButtomRightWGS84: N 50.5272 E 13.4957
+#BBox_Mitte: N 51.874924375 E 11.9984684985
+MinScale:   0
+MaxScale:   12
+RecommendedScale:    1 2,5 5
+ImageFileExtension: .png

Added: branches/r1.2/res_noewe/webmapservices/de-st_t50.wms
===================================================================
--- branches/r1.2/res_noewe/webmapservices/de-st_t50.wms	                        (rev 0)
+++ branches/r1.2/res_noewe/webmapservices/de-st_t50.wms	2010-11-10 21:22:44 UTC (rev 2854)
@@ -0,0 +1,83 @@
+???TakenFromUrl:       www.lvermgeo.sachsen-anhalt.de
+GetCapabilitiesUrl: http://geoportal.geodaten.sachsen-anhalt.de/geodatenportal/servlet/gtEntryPoint;jsessionid=51711E7127EC019A09827A328FE11E69?wms_service_name=Geodatenportal&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
+Name:               de.sachsen-anhalt t50
+MapType:                        topo
+MainUrl:            http://geoportal.geodaten.sachsen-anhalt.de/geodatenportal/servlet/gtEntryPoint;jsessionid=51711E7127EC019A09827A328FE11E69?wms_service_name=Geodatenportal&
+ServiceTypeUrlPart: SERVICE=WMS
+VersionUrlPart:     VERSION=1.1.1
+CoordinateReferenceSystemCacheWolf:  31468 31467 31469
+CoordinateReferenceSystemUrlPart: SRS=EPSG:31468 SRS=EPSG:31467 SRS=EPSG:31469 
+RequestUrlPart:     REQUEST=GetMap
+#LayersUrlPart:     LAYERS=map_604|??bersichtskarten||
+#LayersUrlPart:     LAYERS=layer_601|Digitale Orthobilder|24.945156|0.000000
+#LayersUrlPart:     LAYERS=layer_941|Ortsnamen|24.945156|0.049890
+#LayersUrlPart:     LAYERS=layer_9852|Kachel??bersicht|24.945156|0.049890
+#LayersUrlPart:     LAYERS=layer_603|TK 1:10 000 Farbe|12.472578|0.004989
+#LayersUrlPart:     LAYERS=layer_10455|TK 1:25 000 Farbe|99.780624|0.000499
+#LayersUrlPart:     LAYERS=layer_607|TK 1:50 000 Farbe|124.725779|4.989031
+#LayersUrlPart:     LAYERS=layer_609|TK 1:100 000 Farbe|249.451559|4.989031
+#LayersUrlPart:     LAYERS=layer_403|TK 1:250 000 Farbe|4989.031178|4.989031
+#LayersUrlPart:     LAYERS=layer_9850|TK10|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9849|TK25|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9848|TK50|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_9847|TK100|4989.031178|0.049890
+#LayersUrlPart:     LAYERS=layer_602|TK 1:10 000 s/w|9.978062|0.000499
+#LayersUrlPart:     LAYERS=layer_10456|TK 1:25 000 s/w|99.780624|0.000499
+#LayersUrlPart:     LAYERS=layer_604|Flurstuecksstruktur|9.978062|0.399122
+#LayersUrlPart:     LAYERS=layer_606|TK 1:50 000 s/w|124.725779|4.989031
+#LayersUrlPart:     LAYERS=layer_608|TK 1:100 000 s/w|249.451559|2.494516
+#LayersUrlPart:     LAYERS=layer_401|TK 1:250 000 s/w|4989.031178|49.890312
+#LayersUrlPart:     LAYERS=layer_9844|Flurgrenzen|29.933688|0.049890
+#LayersUrlPart:     LAYERS=layer_9845|Gemarkungsgrenzen|29.933688|0.049890
+#LayersUrlPart:     LAYERS=layer_15544|Landesgrenze|49890.311784|0.000499
+#LayersUrlPart:     LAYERS=layer_15545|Landkreisgrenzen|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_15546|Einheitsgemeinden|49890.311784|0.000499
+#LayersUrlPart:     LAYERS=layer_15547|Verbandsgemeinden|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_10844|BRW 2003|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10845|BRW 2004|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10846|BRW 2005|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10847|BRW 2006|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10848|BRW 2007|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10849|BRW 2008|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10850|BRW 2009|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_12644|BRW 2010|282.842712|0.141421
+#LayersUrlPart:     LAYERS=layer_10292|Flurneuordnung||
+#LayersUrlPart:     LAYERS=layer_10290|ALFF-Dienstsitze||
+#LayersUrlPart:     LAYERS=layer_10291|ALFF-Amtsbereiche||
+#LayersUrlPart:     LAYERS=layer_10293|InVeKoS Landschaftselemente||
+#LayersUrlPart:     LAYERS=layer_10294|InVeKoS Feldbl??cke||
+#LayersUrlPart:     LAYERS=layer_13644|CIR-2009|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_10288|Walddecker||
+#LayersUrlPart:     LAYERS=layer_10289|Wuchsgebiete/Wuchsbezirke||
+#LayersUrlPart:     LAYERS=layer_10282|LFB-Reviere||
+#LayersUrlPart:     LAYERS=layer_10283|LFB-Forstbetriebe||
+#LayersUrlPart:     LAYERS=layer_10284|LFB-Sitz-Forstbetriebe||
+#LayersUrlPart:     LAYERS=layer_10285|LZW-Reviere||
+#LayersUrlPart:     LAYERS=layer_10286|LZW-Forst??mter||
+#LayersUrlPart:     LAYERS=layer_10287|LZW-Sitz-Forst??mter||
+#LayersUrlPart:     LAYERS=layer_12460|Biosphaerenreservat||
+#LayersUrlPart:     LAYERS=layer_12461|Fauna-Flora-Habitat-Gebiet||
+#LayersUrlPart:     LAYERS=layer_12462|Landschaftsschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12463|Naturschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12464|Naturpark||
+#LayersUrlPart:     LAYERS=layer_12465|Nationalpark||
+#LayersUrlPart:     LAYERS=layer_12466|Vogelschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_12467|Wasserschutzgebiet||
+#LayersUrlPart:     LAYERS=layer_13744|Umfallradius|29.934187|0.000499
+#LayersUrlPart:     LAYERS=layer_13745|Wind_Bestand|29.934187|0.000499
+#LayersUrlPart:     LAYERS=map_14008|Regionale Planungsgemeinschaften||
+#LayersUrlPart:     LAYERS=layer_14848|RPG Altmark|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14849|RPG Anhalt-Bitterfeld-Wittenberg|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14850|RPG Halle|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14851|RPG Harz|498903.117837|0.000499
+#LayersUrlPart:     LAYERS=layer_14852|RPG Magdeburg|498903.117837|0.000499
+LayersUrlPart:     LAYERS=layer_607
+StylesUrlPart:     STYLES=
+ImageFormatUrlPart:FORMAT=image/png
+BoundingBoxTopLeftWGS84: N 53.2226 E 10.5012
+BoundingBoxButtomRightWGS84: N 50.5272 E 13.4957
+#BBox_Mitte: N 51.874924375 E 11.9984684985
+MinScale:   5
+MaxScale:   90
+RecommendedScale:   5 7 10
+ImageFileExtension: .png

Modified: branches/r1.2/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- branches/r1.2/src/CacheWolf/imp/SpiderGC.java	2010-11-10 14:00:45 UTC (rev 2853)
+++ branches/r1.2/src/CacheWolf/imp/SpiderGC.java	2010-11-10 21:22:44 UTC (rev 2854)
@@ -1659,6 +1659,9 @@
 			numLogUpdates++;
 			ret = true;
 		}
+		if (!ret && TBchanged(ch, CacheDescription)) {
+			ret = true;
+		}
 		if (save)
 			ch.save();
 		return ret;
@@ -1858,7 +1861,7 @@
 	 * 
 	 * @return boolean newLogExists
 	 */
-	private boolean newFoundExists(CacheHolder ch, String cacheDescrition) {
+	private boolean newFoundExists(CacheHolder ch, String cacheDescription) {
 		if (!pref.checkLog)
 			return false;
 		Time lastLogCW = new Time();
@@ -1877,12 +1880,12 @@
 		lastLogGC.millis = 0;
 		String[] SDate;
 		String stmp = "";
-		RexPropLogDate.search(cacheDescrition);
+		RexPropLogDate.search(cacheDescription);
 		if (RexPropLogDate.didMatch()) {
 			stmp = RexPropLogDate.stringMatched(1);
 		} else {
 			pref.log("check logDateRex in spider.def" 
-					+ Preferences.NEWLINE + cacheDescrition);
+					+ Preferences.NEWLINE + cacheDescription);
 			return false;
 		}
 		if (stmp.indexOf("day") > 0) {
@@ -1911,6 +1914,15 @@
 		boolean ret = lastLogCW.compareTo(lastLogGC) < 0;
 		return ret;
 	}
+	private boolean TBchanged(CacheHolder ch, String cacheDescription) {
+		// simplified Version: only presence is checked 
+		if (pref.downloadTBs) {
+			boolean hasCoin=cacheDescription.indexOf("Geocoin") > -1;
+			boolean hasTB=cacheDescription.indexOf("Travel Bug Dog Tag") > -1;						
+			return (ch.has_bugs() != (hasCoin || hasTB));
+		}
+		return false;
+	}
 
 	/**
 	 * Read a complete cachepage from geocaching.com including all logs. This is



From araber95 at mail.berlios.de  Mon Nov 15 03:31:26 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 15 Nov 2010 03:31:26 PM +0100
Subject: [Cachewolf-svn] r2855 - trunk/src/CacheWolf/imp
Message-ID: <20101115143127.3283C481185@sheep.berlios.de>

Author: araber95
Date: 2010-11-15 15:31:26 +0100 (Mon, 15 Nov 2010)
New Revision: 2855

Modified:
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
adapting "quick download" to lastest changes of gc

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-11-10 21:22:44 UTC (rev 2854)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-11-15 14:31:26 UTC (rev 2855)
@@ -594,11 +594,10 @@
 		double len = middle.getDistance(rm) * 2.0;
 		page_number++;
 		String listPage = getMapListPage(middle, north, west, south, east);
-		int i = listPage.indexOf("\"count\":");
-		pref.log("" + north + " " + west + " " + south + " " + east + " "
-				+ listPage.substring(i, i + 12) + " len=" + len);
-		if ((listPage.indexOf("\"count\": 501") > -1)
-				|| (listPage.indexOf("\"count\": 0") > -1 && len > 30)) {
+		int i = listPage.indexOf("\"count\\\":"); // \"count\":
+		pref.log("" + north + " " + west + " " + south + " " + east + " " + listPage.substring(i) + "\n len=" + len);
+		if ((listPage.indexOf("\"count\\\": 501") > -1)
+		||  (listPage.indexOf("\"count\\\": 0") > -1 && len > 30)) {
 			double northsouthmiddle = (north + south) / 2.0;
 			double westeastmiddle = (west + east) / 2.0;
 			getCaches(north, west, northsouthmiddle, westeastmiddle, setCachesToLoad);
@@ -624,11 +623,11 @@
 		int posOwn=5;       //o
 		int posAvailable=6; //ia
 		// ignoring first 3 lines
-		for (int i = 3; i < caches.length; i++) {
+		for (int i = 4; i < caches.length; i++) {
 			if (infB.isClosed) return;
 			
 			//cut away name to prevent parsing errors			
-			int WpIndex = caches[i].indexOf("\"gc\"");
+			int WpIndex = caches[i].indexOf("\"gc\\\"");
 			String elements[] = mString.split(caches[i].substring(WpIndex), ',');
 			
 			boolean found = (elements[posFound].indexOf("true") > -1 ? true : false);
@@ -639,7 +638,8 @@
 				if (restrictedCacheType != cacheType) continue;
 			}
 
-			String wp = mString.split(elements[posWP], '\"')[3];			
+			String wp = mString.split(elements[posWP], '\"')[3];
+			wp=wp.substring(0, wp.length()-1);
 			CacheHolder ch = cacheDB.get(wp);
 			if (ch == null) {
 
@@ -648,8 +648,8 @@
 				String own = mString.split(elements[posOwn], ':')[1];
 				boolean available = (elements[posAvailable].indexOf("true") > -1 ? true : false);
 				
-				int NameIndex = caches[i].indexOf("\"nn\"");
-				String cacheName = caches[i].substring (NameIndex + 6, WpIndex - 2 );
+				int NameIndex = caches[i].indexOf("\"nn\\\"");
+				String cacheName = caches[i].substring (NameIndex + 8, WpIndex - 4 );
 				cacheName = STRreplace.replace(cacheName, "\\\"", "\"" );
 
 				ch = new CacheHolder();
@@ -1314,8 +1314,7 @@
 					// sb.append(URL.encodeURL("__EVENTVALIDATION",false));
 					// sb.append("=");
 					// sb.append(URL.encodeURL(eventvalidation,false));
-					loginPage = fetch_post(loginPageUrl, sb.toString(),
-							nextPage, true); // /login/default.aspx
+					loginPage = fetch_post(loginPageUrl, sb.toString(), true);
 					if (loginPage.indexOf(loginSuccess) > 0)
 						pref.log("Login successful: " + pref.myAlias);
 					else {
@@ -1388,7 +1387,7 @@
 			// + "&" + URL.encodeURL("__EVENTVALIDATION",false) +"="+
 			// URL.encodeURL(eventvalidation,false);
 			try {
-				loginPage = fetch_post(loginPageUrl, postStr, nextPage, true);
+				loginPage = fetch_post(loginPageUrl, postStr, true);
 				pref.log("Switched to English");
 			} catch (Exception ex) {
 				pref.log("Error switching to English: check/n" + loginPageUrl
@@ -1455,17 +1454,17 @@
 
 		String url;
 		if (spiderAllFinds) {
-			url = propFirstPageFinds
-					+ encodeUTF8URL(Utils.encodeJavaUtf8String(pref.myAlias));
+			url = propFirstPageFinds + encodeUTF8URL(Utils.encodeJavaUtf8String(pref.myAlias));
 		} else {
 			url = propFirstPage + origin.getLatDeg(TransformCoordinates.DD)
-					+ propFirstPage2
-					+ origin.getLonDeg(TransformCoordinates.DD)
-					+ propMaxDistance + Integer.toString(distance);
+				+ propFirstPage2
+				+ origin.getLonDeg(TransformCoordinates.DD)
+				+ propMaxDistance + Integer.toString(distance);
 			if (doNotgetFound)
 				url = url + propShowOnlyFound;
 		}
 		url = url + cacheTypeRestriction;
+		
 		try {
 			htmlListPage = fetch(url, false);
 			pref.log("[getFirstListPage] Got first page " + url);
@@ -1484,18 +1483,18 @@
 	 * in: ... out: page_number,htmlPage
 	 */
 	private void getAListPage(int distance, String whatPage) {
-		String postStr;
+		String url;
 		if (spiderAllFinds) {
-			postStr = propFirstPage;
+			url = propFirstPage;
 		} else {
-			postStr = propFirstPage + origin.getLatDeg(TransformCoordinates.DD)
-					+ propFirstPage2
-					+ origin.getLonDeg(TransformCoordinates.DD)
-					+ propMaxDistance + Integer.toString(distance);
+			url = propFirstPage + origin.getLatDeg(TransformCoordinates.DD)
+				+ propFirstPage2
+				+ origin.getLonDeg(TransformCoordinates.DD)
+				+ propMaxDistance + Integer.toString(distance);
 			if (doNotgetFound)
-				postStr = postStr + propShowOnlyFound;
+				url = url + propShowOnlyFound;
 		}
-		postStr = postStr + cacheTypeRestriction;
+		url = url + cacheTypeRestriction;
 
 		Regex rexViewstate = new Regex("id=\"__VIEWSTATE\" value=\"(.*?)\" />");
 		String viewstate;
@@ -1504,97 +1503,108 @@
 			viewstate = rexViewstate.stringMatched(1);
 		} else {
 			viewstate = "";
-			pref.log("[getAListPage] check rexViewstate in SpiderGC.java"
-					+ Preferences.NEWLINE + htmlListPage);
+			pref.log("[getAListPage] check rexViewstate in SpiderGC.java" + Preferences.NEWLINE + htmlListPage);
 		}
 
-		Regex rexViewstate1 = new Regex(
-				"id=\"__VIEWSTATE1\" value=\"(.*?)\" />");
+		Regex rexViewstate1 = new Regex("id=\"__VIEWSTATE1\" value=\"(.*?)\" />");
 		String viewstate1;
 		rexViewstate1.search(htmlListPage);
 		if (rexViewstate1.didMatch()) {
 			viewstate1 = rexViewstate1.stringMatched(1);
 		} else {
 			viewstate1 = "";
-			pref.log("[getAListPage] check rexViewstate1 in SpiderGC.java"
-					+ Preferences.NEWLINE + htmlListPage);
+			pref.log("[getAListPage] check rexViewstate1 in SpiderGC.java" + Preferences.NEWLINE + htmlListPage);
 		}
 
 		/*
 		 * rexEventvalidation.search(htmlPage);
-		 * if(rexEventvalidation.didMatch()){ eventvalidation =
-		 * rexEventvalidation.stringMatched(1); } else { eventvalidation = ""; }
+		 * if(rexEventvalidation.didMatch()){ 
+		 * eventvalidation = rexEventvalidation.stringMatched(1); } 
+		 * else { eventvalidation = ""; }
 		 */
 
-		String url = URL.encodeURL("__EVENTTARGET", false) + "="
-				+ URL.encodeURL(whatPage, false) + "&"
-				+ URL.encodeURL("__EVENTARGUMENT", false) + "="
-				+ URL.encodeURL("", false) + "&"
-				+ URL.encodeURL("__VIEWSTATEFIELDCOUNT", false) + "=2" + "&"
-				+ URL.encodeURL("__VIEWSTATE", false) + "="
-				+ URL.encodeURL(viewstate, false) + "&"
-				+ URL.encodeURL("__VIEWSTATE1", false) + "="
-				+ URL.encodeURL(viewstate1, false);
-		// + "&" + URL.encodeURL("__EVENTVALIDATION",false) + "=" +
-		// URL.encodeURL(eventvalidation,false);
+		String postData = "__EVENTTARGET=" + URL.encodeURL(whatPage, false) + "&" +
+						  "__EVENTARGUMENT=" + "&" +
+						  "__VIEWSTATEFIELDCOUNT=2" + "&" +
+						  "__VIEWSTATE=" + URL.encodeURL(viewstate, false) + "&" +
+						  "__VIEWSTATE1=" + URL.encodeURL(viewstate1, false); // + "&" +
+						  //"__EVENTVALIDATION=" + URL.encodeURL(eventvalidation,false);
 		try {
-			htmlListPage = fetch_post(postStr, url, p.getProp("nextListPage"),
-					true);
-			pref.log("[getAListPage] Got list page: "
-					+ URL.encodeURL(whatPage, false));
+			htmlListPage = fetch_post(url, postData, true);
+			pref.log("[getAListPage] Got list page: " + URL.encodeURL(whatPage, false));
 		} catch (Exception ex) {
 			pref.log("[getAListPage] Error getting a list page" + url, ex);
 		}
 	}
 
 	/* */
-	private String getMapListPage(CWPoint middle, double north, double west,
-			double south, double east) {
+	private String getMapListPage(CWPoint middle, double north, double west, double south, double east) {
+		String ret;
+		
+		String referer = "http://www.geocaching.com/map/default.aspx" + 
+		"?lat="	+ middle.getLatDeg(TransformCoordinates.DD) + 
+		"&lng="	+ middle.getLonDeg(TransformCoordinates.DD);
 
-		String url = "http://www.geocaching.com/map/default.aspx" + "?lat="
-				+ middle.getLatDeg(TransformCoordinates.DD) + "&lng="
-				+ middle.getLonDeg(TransformCoordinates.DD);
+		String url = "http://www.geocaching.com/map/default.aspx/MapAction";
 
-		String strLeft = MyLocale.formatDouble(west, "00.00000").replace(',',
-				'.');
-		String strUp = MyLocale.formatDouble(north, "00.00000").replace(',',
-				'.');
-		String strRight = MyLocale.formatDouble(east, "00.00000").replace(',',
-				'.');
-		String strDown = MyLocale.formatDouble(south, "00.00000").replace(',',
-				'.');
+		String strLeft = MyLocale.formatDouble(west, "#0.00000").replace(',','.');
+		String strUp = MyLocale.formatDouble(north, "#0.00000").replace(',','.');
+		String strRight = MyLocale.formatDouble(east, "#0.00000").replace(',','.');
+		String strDown = MyLocale.formatDouble(south, "#0.00000").replace(',','.');
+		String param1 = "{\"dto\":{\"data\":{\"c\":1,\"m\":\"\",\"d\":\"";
+		String param2 = strUp + "|" + strDown + "|" + strRight + "|" + strLeft;
+		//String param3 = "\"},\"ut\":\"WQZID4ZFAYC6SFPYDLA632UY6Y6NBSLQY3VWLUKML2MZ5WN377MNTSARCO5JE7MUFIXJ4P4MHLY6VLXAP4DDCURO3E\"}}";
+		String param3 = "\"},\"ut\":\"FOUTFKOKLELXOQSV5FY2MWTVZDFOIRRFBBKZYJNIJL3L45ZASVQDMLLGRRNCSHNA2LWSKIMJGRRLUTGIKWPRM5CDCWNJBFCJGC7AFSI\"}}";
+		String postData = param1+param2+param3;
 
-		String eo_cb_param1 = "eo_cb_param=%7B%22c%22%3A%201%2C%20%22m%22%3A%20%22%22%2C%20%22d%22%3A%20%22";
-		String eo_cb_param2 = strUp + "|" + strDown + "|" + strRight + "|"
-				+ strLeft + "%22%7D";
-		String ret;
-		String doc = "";
 		try {
-
-			doc = "eo_cb_id=ctl00_ContentBody_cbAjax"
-					+ "&"
-					+ eo_cb_param1
-					+ eo_cb_param2
-					+ "&__eo_obj_states="
-					+
-					// "&__VIEWSTATE="+viewstate+
-					"&__VIEWSTATE=%2FwEPDwULLTEyOTYyNjYwNjkPZBYCZg9kFgZmD2QWAgIODxYCHgdWaXNpYmxlaGQCAQ9kFhICBQ8WAh4EVGV4dGRkAgkPFgIfAQUWWW91IGFyZSBub3QgbG9nZ2VkIGluLmQCCw8PFgQeC05hdmlnYXRlVXJsBZEBaHR0cDovL3d3dy5nZW9jYWNoaW5nLmNvbS9sb2dpbi9kZWZhdWx0LmFzcHg%2FUkVTRVQ9WSZyZWRpcj1odHRwJTNhJTJmJTJmd3d3Lmdlb2NhY2hpbmcuY29tJTJmbWFwJTJmZGVmYXVsdC5hc3B4JTNmbGF0JTNkNDYuNjE1OTclMjZsbmclM2QxMy44NDg3Mx8BBQZMb2cgaW5kZAIPD2QWAgIBDw8WAh8BZGRkAhEPZBYCAgEPD2QPZAUMRFFJQkFBQUFBQUE9ZAIfDxYCHwBnZAInDw8WBB8CBQwvcmV2aWV3cy9ncHMfAQULR1BTIFJldmlld3NkZAIrD2QWAgIBDw8WAh8BBZcCPGlmcmFtZSBzcmM9Imh0dHA6Ly9iYW5tYW41Lmdyb3VuZHNwZWFrLmNvbS9iYW5tYW41L2FkLmFzcHg%2FWm9uZUlEPTkmVGFzaz1HZXQmU2l0ZUlEPTEmWD0nMzdlYWVjMTQzODVjNDc1Y2JiZjFhODk0YTgzOTNiMGMnIiB3aWR0aD0iMTIwIiBoZWlnaHQ9IjI0MCIgTWFyZ2lud2lkdGg9IjAiIE1hcmdpbmhlaWdodD0iMCIgSHNwYWNlPSIwIiBWc3BhY2U9IjAiIEZyYW1lYm9yZGVyPSIwIiBTY3JvbGxpbmc9Im5vIiBzdHlsZT0id2lkdGg6MTIwcHg7SGVpZ2h0OjI0MHB4OyI%2BPC9pZnJhbWU%2BZGQCLQ9kFgJmD2QWAmYPFgIeC18hSXRlbUNvdW50AgYWDAIBD2QWAgIBDw8WCB4PQ29tbWFu
 ZEFyZ3VtZW50BQVlbi1VUx4LQ29tbWFuZE5hbWUFDVNldFRlbXBMb2NhbGUfAQUHRW5nbGlzaB4QQ2F1c2VzVmFsaWRhdGlvbmhkZAICD2QWAgIBDw8WCB8EBQVkZS1ERR8FBQ1TZXRUZW1wTG9jYWxlHwEFB0RldXRzY2gfBmhkZAIDD2QWAgIBDw8WCB8EBQVmci1GUh8FBQ1TZXRUZW1wTG9jYWxlHwEFCUZyYW7Dp2Fpcx8GaGRkAgQPZBYCAgEPDxYIHwQFBXB0LVBUHwUFDVNldFRlbXBMb2NhbGUfAQUKUG9ydHVndcOqcx8GaGRkAgUPZBYCAgEPDxYIHwQFBWNzLUNaHwUFDVNldFRlbXBMb2NhbGUfAQUJxIxlxaF0aW5hHwZoZGQCBg9kFgICAQ8PFggfBAUFc3YtU0UfBQUNU2V0VGVtcExvY2FsZR8BBQdTdmVuc2thHwZoZGQCAw8WAh8BBSxTZXJ2ZXI6IFdFQjA4OyBCdWlsZDogVEZTLlJlbGVhc2VfMjAxMDA4MzAuMWRkkWJYA8UHbJ38zIk7cJhELr1nbU4%3D"
-					+ "&eo_version=5.0.51.2"
-					+ "&=on&=&=&=2&=3&=4&=5&=1858&=6&=8&=11&=137&=13&=453&=3653&=on&="
-					+ "&__EVENTVALIDATION=" + "&__EVENTTARGET="
-					+ "&__EVENTARGUMENT=";
-
-			ret = fetch_post(url, doc, "/map/default.aspx", false);
-			pref.log("[getAListPage] Got map Cachepage: ");
+		ret = post(url, postData, referer, false);
 		} catch (Exception ex) {
 			ret = "";
-			pref.log("[getAListPage] Error getting map Cachepage" + url + doc, ex);
+			pref.log("[SpiderGC:getMapListPage] Error getting map Cachepage" + url + postData, ex);
 		}
 		return ret;
+ 	}
+
+	private static String post(String url, String postData, String referer, boolean withResponseHeaders) {
+		HttpConnection conn;
+		try {
+			conn = new HttpConnection(url);
+			JavaUtf8Codec codec = new ewe.io.JavaUtf8Codec();
+			conn.documentIsEncoded = true;
+			conn.setRequestorProperty("User-Agent","Mozilla/5.0 (Windows; U; Windows NT 6.0; de; rv:1.9.2.12) Gecko/20101026 Firefox/3.6.12");
+			conn.setRequestorProperty("Accept","application/json, text/javascript, */*; q=0.01");
+			conn.setRequestorProperty("Accept-Language","de-de,de;q=0.8,en-us;q=0.5,en;q=0.3");
+			conn.setRequestorProperty("Accept-Encoding","gzip,deflate");
+			conn.setRequestorProperty("Accept-Charset","ISO-8859-1,utf-8;q=0.7,*;q=0.7");
+			conn.setRequestorProperty("Keep-Alive","115");
+			conn.setRequestorProperty("Proxy-Connection","keep-alive");
+			conn.setRequestorProperty("Content-Type", "application/json; charset=UTF-8");
+			conn.setRequestorProperty("X-Requested-With","XMLHttpRequest");
+			conn.setRequestorProperty("Referer",referer);
+			conn.setRequestorProperty("Pragma","no-cache");
+			conn.setRequestorProperty("Cache-Control","no-cache");
+			if (cookieSession.length() > 0) { conn.setRequestorProperty("Cookie", "ASP.NET_SessionId=" + cookieSession + "; userid=" + cookieID); }
+			conn.setRequestorProperty("Connection", "close");
+			//conn.setPostData(codec.encodeText(postData.toCharArray(), 0, postData.length(), true, null));
+			conn.setPostData(postData);
+			Socket sock = conn.connect();
+			// CharArray c_data = conn.readText(sock, codec);
+			ByteArray daten = conn.readData(sock);
+			CharArray c_data = codec.decodeText(daten.data, 0, daten.length, true, null);
+			
+			sock.close();
+			
+			if (withResponseHeaders)
+				return getResponseHeaders(conn) + c_data.toString();
+			else
+				return c_data.toString();
+		} catch (Exception e) {
+			pref.log("[fetch_post] Ignored Exception", e, true);
+		}
+		return "";
 	}
 
-	/* */
-
 	/**
 	 * check if new Update exists
 	 * 
@@ -2972,29 +2982,19 @@
 	public static String fetch(String address, boolean withResponseHeaders) {
 		CharArray c_data;
 		try {
-			HttpConnection conn;
 			if (pref.myproxy.length() > 0 && pref.proxyActive) {
-				pref.log("[fetch]:Using proxy: " + pref.myproxy + " / "
-						+ pref.myproxyport);
+				pref.log("[fetch]:Using proxy: " + pref.myproxy + " / " + pref.myproxyport);
 			}
-			conn = new HttpConnection(address);
-			conn.setRequestorProperty("User-Agent",
-					"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0");
-			if (cookieSession.length() > 0) {
-				conn.setRequestorProperty("Cookie", "ASP.NET_SessionId=" + cookieSession + "; userid=" + cookieID);
-				pref.log("[fetch]:Cookie Zeug: " + "Cookie: ASP.NET_SessionId="
-						+ cookieSession + "; userid=" + cookieID);
-			} else
-				pref.log("[fetch]:No Cookie found", null);
+			HttpConnection conn = new HttpConnection(address);
+			conn.setRequestorProperty("User-Agent", "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0");
+			if (cookieSession.length() > 0) {conn.setRequestorProperty("Cookie", "ASP.NET_SessionId=" + cookieSession + "; userid=" + cookieID);};
 			conn.setRequestorProperty("Connection", "close");
 			conn.documentIsEncoded = true;
-			pref.log("[fetch]:Connecting " + address);
 			Socket sock = conn.connect();
 			pref.log("[fetch]:Connect ok! " + address);
-			// ByteArray daten = conn.readData(sock);
 			JavaUtf8Codec codec = new JavaUtf8Codec();
-			// c_data = codec.decodeText(daten.data, 0, daten.length, true,
-			// null);
+			// ByteArray daten = conn.readData(sock);
+			// c_data = codec.decodeText(daten.data, 0, daten.length, true, null);
 			c_data = conn.readText(sock, codec);
 			sock.close();
 			pref.log("[fetch]:Read data ok " + address);
@@ -3004,8 +3004,6 @@
 				return c_data.toString();
 		} catch (IOException ioex) {
 			pref.log("IOException in fetch", ioex);
-		} finally {
-			// continue
 		}
 		return "";
 	}
@@ -3015,40 +3013,29 @@
 	 * This method does exactly that. Actually this method is generic in the
 	 * sense that it can be used to post to a URL using http post.
 	 */
-	private static String fetch_post(String address, String document,
-			String path, boolean withResponseHeaders) {
-		HttpConnection conn;
+	private static String fetch_post(String address, String postData, boolean withResponseHeaders) {
 		try {
-			conn = new HttpConnection(address);
+			HttpConnection conn = new HttpConnection(address);
 			JavaUtf8Codec codec = new JavaUtf8Codec();
 			conn.documentIsEncoded = true;
-			conn.setRequestorProperty("User-Agent",
-					"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0");
-			conn.setPostData(codec.encodeText(document.toCharArray(), 0, document.length(), true, null));
+			conn.setRequestorProperty("User-Agent","Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0");
+			conn.setPostData(codec.encodeText(postData.toCharArray(), 0, postData.length(), true, null));
 			conn.setRequestorProperty("Content-Type", "application/x-www-form-urlencoded");
-			if (cookieSession.length() > 0) {
-				conn.setRequestorProperty("Cookie", "ASP.NET_SessionId="
-						+ cookieSession + "; userid=" + cookieID);
-				pref.log("[fetch_post] " + "Cookie: ASP.NET_SessionId="
-						+ cookieSession + "; userid=" + cookieID);
-			} else {
-				pref.log("[fetch_post]:No Cookie found", null);
-			}
+			if (cookieSession.length() > 0) { conn.setRequestorProperty("Cookie", "ASP.NET_SessionId=" + cookieSession + "; userid=" + cookieID);};
 			conn.setRequestorProperty("Connection", "close");
 			Socket sock = conn.connect();
 			pref.log("[fetch_post]:Connect ok! " + address);
 			// ByteArray daten = conn.readData(sock);
 			CharArray c_data = conn.readText(sock, codec);
 			pref.log("[fetch_post]:Read data ok " + address);
-			// CharArray c_data = codec.decodeText(daten.data, 0, daten.length,
-			// true, null);
+			// CharArray c_data = codec.decodeText(daten.data, 0, daten.length, true, null);
 			sock.close();
 			if (withResponseHeaders)
 				return getResponseHeaders(conn) + c_data.toString();
 			else
 				return c_data.toString();
 		} catch (Exception e) {
-			// pref.log("[fetch_post] Ignored Exception", e, true);
+			pref.log("[fetch_post] Ignored Exception", e, true);
 		}
 		return "";
 	}
@@ -3107,8 +3094,7 @@
 		String bugList;
 		try {
 			// infB.setInfo(oldInfoBox+"\nGetting bug: "+bug);
-			bugList = fetch(p.getProp("getBugByName")
-					+ STRreplace.replace(SafeXML.clean(name), " ", "+"), false);
+			bugList = fetch(p.getProp("getBugByName") + STRreplace.replace(SafeXML.clean(name), " ", "+"), false);
 			pref.log("[getBugId] Fetched bugId: " + name);
 		} catch (Exception ex) {
 			pref.log("[getBugId] Could not fetch bug list" + name, ex);



From araber95 at mail.berlios.de  Mon Nov 15 03:36:44 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 15 Nov 2010 03:36:44 PM +0100
Subject: [Cachewolf-svn] r2856 - branches/r1.2/src/CacheWolf/imp
Message-ID: <20101115143644.87022481185@sheep.berlios.de>

Author: araber95
Date: 2010-11-15 15:36:44 +0100 (Mon, 15 Nov 2010)
New Revision: 2856

Modified:
   branches/r1.2/src/CacheWolf/imp/SpiderGC.java
Log:
adapting "quick download" to lastest changes of gc

Modified: branches/r1.2/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- branches/r1.2/src/CacheWolf/imp/SpiderGC.java	2010-11-15 14:31:26 UTC (rev 2855)
+++ branches/r1.2/src/CacheWolf/imp/SpiderGC.java	2010-11-15 14:36:44 UTC (rev 2856)
@@ -594,11 +594,10 @@
 		double len = middle.getDistance(rm) * 2.0;
 		page_number++;
 		String listPage = getMapListPage(middle, north, west, south, east);
-		int i = listPage.indexOf("\"count\":");
-		pref.log("" + north + " " + west + " " + south + " " + east + " "
-				+ listPage.substring(i, i + 12) + " len=" + len);
-		if ((listPage.indexOf("\"count\": 501") > -1)
-				|| (listPage.indexOf("\"count\": 0") > -1 && len > 30)) {
+		int i = listPage.indexOf("\"count\\\":"); // \"count\":
+		pref.log("" + north + " " + west + " " + south + " " + east + " " + listPage.substring(i) + "\n len=" + len);
+		if ((listPage.indexOf("\"count\\\": 501") > -1)
+		||  (listPage.indexOf("\"count\\\": 0") > -1 && len > 30)) {
 			double northsouthmiddle = (north + south) / 2.0;
 			double westeastmiddle = (west + east) / 2.0;
 			getCaches(north, west, northsouthmiddle, westeastmiddle, setCachesToLoad);
@@ -624,11 +623,11 @@
 		int posOwn=5;       //o
 		int posAvailable=6; //ia
 		// ignoring first 3 lines
-		for (int i = 3; i < caches.length; i++) {
+		for (int i = 4; i < caches.length; i++) {
 			if (infB.isClosed) return;
 			
 			//cut away name to prevent parsing errors			
-			int WpIndex = caches[i].indexOf("\"gc\"");
+			int WpIndex = caches[i].indexOf("\"gc\\\"");
 			String elements[] = mString.split(caches[i].substring(WpIndex), ',');
 			
 			boolean found = (elements[posFound].indexOf("true") > -1 ? true : false);
@@ -639,7 +638,8 @@
 				if (restrictedCacheType != cacheType) continue;
 			}
 
-			String wp = mString.split(elements[posWP], '\"')[3];			
+			String wp = mString.split(elements[posWP], '\"')[3];
+			wp=wp.substring(0, wp.length()-1);
 			CacheHolder ch = cacheDB.get(wp);
 			if (ch == null) {
 
@@ -648,8 +648,8 @@
 				String own = mString.split(elements[posOwn], ':')[1];
 				boolean available = (elements[posAvailable].indexOf("true") > -1 ? true : false);
 				
-				int NameIndex = caches[i].indexOf("\"nn\"");
-				String cacheName = caches[i].substring (NameIndex + 6, WpIndex - 2 );
+				int NameIndex = caches[i].indexOf("\"nn\\\"");
+				String cacheName = caches[i].substring (NameIndex + 8, WpIndex - 4 );
 				cacheName = STRreplace.replace(cacheName, "\\\"", "\"" );
 
 				ch = new CacheHolder();
@@ -1314,8 +1314,7 @@
 					// sb.append(URL.encodeURL("__EVENTVALIDATION",false));
 					// sb.append("=");
 					// sb.append(URL.encodeURL(eventvalidation,false));
-					loginPage = fetch_post(loginPageUrl, sb.toString(),
-							nextPage, true); // /login/default.aspx
+					loginPage = fetch_post(loginPageUrl, sb.toString(), true);
 					if (loginPage.indexOf(loginSuccess) > 0)
 						pref.log("Login successful: " + pref.myAlias);
 					else {
@@ -1388,7 +1387,7 @@
 			// + "&" + URL.encodeURL("__EVENTVALIDATION",false) +"="+
 			// URL.encodeURL(eventvalidation,false);
 			try {
-				loginPage = fetch_post(loginPageUrl, postStr, nextPage, true);
+				loginPage = fetch_post(loginPageUrl, postStr, true);
 				pref.log("Switched to English");
 			} catch (Exception ex) {
 				pref.log("Error switching to English: check/n" + loginPageUrl
@@ -1455,17 +1454,17 @@
 
 		String url;
 		if (spiderAllFinds) {
-			url = propFirstPageFinds
-					+ encodeUTF8URL(Utils.encodeJavaUtf8String(pref.myAlias));
+			url = propFirstPageFinds + encodeUTF8URL(Utils.encodeJavaUtf8String(pref.myAlias));
 		} else {
 			url = propFirstPage + origin.getLatDeg(TransformCoordinates.DD)
-					+ propFirstPage2
-					+ origin.getLonDeg(TransformCoordinates.DD)
-					+ propMaxDistance + Integer.toString(distance);
+				+ propFirstPage2
+				+ origin.getLonDeg(TransformCoordinates.DD)
+				+ propMaxDistance + Integer.toString(distance);
 			if (doNotgetFound)
 				url = url + propShowOnlyFound;
 		}
 		url = url + cacheTypeRestriction;
+		
 		try {
 			htmlListPage = fetch(url, false);
 			pref.log("[getFirstListPage] Got first page " + url);
@@ -1484,18 +1483,18 @@
 	 * in: ... out: page_number,htmlPage
 	 */
 	private void getAListPage(int distance, String whatPage) {
-		String postStr;
+		String url;
 		if (spiderAllFinds) {
-			postStr = propFirstPage;
+			url = propFirstPage;
 		} else {
-			postStr = propFirstPage + origin.getLatDeg(TransformCoordinates.DD)
-					+ propFirstPage2
-					+ origin.getLonDeg(TransformCoordinates.DD)
-					+ propMaxDistance + Integer.toString(distance);
+			url = propFirstPage + origin.getLatDeg(TransformCoordinates.DD)
+				+ propFirstPage2
+				+ origin.getLonDeg(TransformCoordinates.DD)
+				+ propMaxDistance + Integer.toString(distance);
 			if (doNotgetFound)
-				postStr = postStr + propShowOnlyFound;
+				url = url + propShowOnlyFound;
 		}
-		postStr = postStr + cacheTypeRestriction;
+		url = url + cacheTypeRestriction;
 
 		Regex rexViewstate = new Regex("id=\"__VIEWSTATE\" value=\"(.*?)\" />");
 		String viewstate;
@@ -1504,97 +1503,108 @@
 			viewstate = rexViewstate.stringMatched(1);
 		} else {
 			viewstate = "";
-			pref.log("[getAListPage] check rexViewstate in SpiderGC.java"
-					+ Preferences.NEWLINE + htmlListPage);
+			pref.log("[getAListPage] check rexViewstate in SpiderGC.java" + Preferences.NEWLINE + htmlListPage);
 		}
 
-		Regex rexViewstate1 = new Regex(
-				"id=\"__VIEWSTATE1\" value=\"(.*?)\" />");
+		Regex rexViewstate1 = new Regex("id=\"__VIEWSTATE1\" value=\"(.*?)\" />");
 		String viewstate1;
 		rexViewstate1.search(htmlListPage);
 		if (rexViewstate1.didMatch()) {
 			viewstate1 = rexViewstate1.stringMatched(1);
 		} else {
 			viewstate1 = "";
-			pref.log("[getAListPage] check rexViewstate1 in SpiderGC.java"
-					+ Preferences.NEWLINE + htmlListPage);
+			pref.log("[getAListPage] check rexViewstate1 in SpiderGC.java" + Preferences.NEWLINE + htmlListPage);
 		}
 
 		/*
 		 * rexEventvalidation.search(htmlPage);
-		 * if(rexEventvalidation.didMatch()){ eventvalidation =
-		 * rexEventvalidation.stringMatched(1); } else { eventvalidation = ""; }
+		 * if(rexEventvalidation.didMatch()){ 
+		 * eventvalidation = rexEventvalidation.stringMatched(1); } 
+		 * else { eventvalidation = ""; }
 		 */
 
-		String url = URL.encodeURL("__EVENTTARGET", false) + "="
-				+ URL.encodeURL(whatPage, false) + "&"
-				+ URL.encodeURL("__EVENTARGUMENT", false) + "="
-				+ URL.encodeURL("", false) + "&"
-				+ URL.encodeURL("__VIEWSTATEFIELDCOUNT", false) + "=2" + "&"
-				+ URL.encodeURL("__VIEWSTATE", false) + "="
-				+ URL.encodeURL(viewstate, false) + "&"
-				+ URL.encodeURL("__VIEWSTATE1", false) + "="
-				+ URL.encodeURL(viewstate1, false);
-		// + "&" + URL.encodeURL("__EVENTVALIDATION",false) + "=" +
-		// URL.encodeURL(eventvalidation,false);
+		String postData = "__EVENTTARGET=" + URL.encodeURL(whatPage, false) + "&" +
+						  "__EVENTARGUMENT=" + "&" +
+						  "__VIEWSTATEFIELDCOUNT=2" + "&" +
+						  "__VIEWSTATE=" + URL.encodeURL(viewstate, false) + "&" +
+						  "__VIEWSTATE1=" + URL.encodeURL(viewstate1, false); // + "&" +
+						  //"__EVENTVALIDATION=" + URL.encodeURL(eventvalidation,false);
 		try {
-			htmlListPage = fetch_post(postStr, url, p.getProp("nextListPage"),
-					true);
-			pref.log("[getAListPage] Got list page: "
-					+ URL.encodeURL(whatPage, false));
+			htmlListPage = fetch_post(url, postData, true);
+			pref.log("[getAListPage] Got list page: " + URL.encodeURL(whatPage, false));
 		} catch (Exception ex) {
 			pref.log("[getAListPage] Error getting a list page" + url, ex);
 		}
 	}
 
 	/* */
-	private String getMapListPage(CWPoint middle, double north, double west,
-			double south, double east) {
+	private String getMapListPage(CWPoint middle, double north, double west, double south, double east) {
+		String ret;
+		
+		String referer = "http://www.geocaching.com/map/default.aspx" + 
+		"?lat="	+ middle.getLatDeg(TransformCoordinates.DD) + 
+		"&lng="	+ middle.getLonDeg(TransformCoordinates.DD);
 
-		String url = "http://www.geocaching.com/map/default.aspx" + "?lat="
-				+ middle.getLatDeg(TransformCoordinates.DD) + "&lng="
-				+ middle.getLonDeg(TransformCoordinates.DD);
+		String url = "http://www.geocaching.com/map/default.aspx/MapAction";
 
-		String strLeft = MyLocale.formatDouble(west, "00.00000").replace(',',
-				'.');
-		String strUp = MyLocale.formatDouble(north, "00.00000").replace(',',
-				'.');
-		String strRight = MyLocale.formatDouble(east, "00.00000").replace(',',
-				'.');
-		String strDown = MyLocale.formatDouble(south, "00.00000").replace(',',
-				'.');
+		String strLeft = MyLocale.formatDouble(west, "#0.00000").replace(',','.');
+		String strUp = MyLocale.formatDouble(north, "#0.00000").replace(',','.');
+		String strRight = MyLocale.formatDouble(east, "#0.00000").replace(',','.');
+		String strDown = MyLocale.formatDouble(south, "#0.00000").replace(',','.');
+		String param1 = "{\"dto\":{\"data\":{\"c\":1,\"m\":\"\",\"d\":\"";
+		String param2 = strUp + "|" + strDown + "|" + strRight + "|" + strLeft;
+		//String param3 = "\"},\"ut\":\"WQZID4ZFAYC6SFPYDLA632UY6Y6NBSLQY3VWLUKML2MZ5WN377MNTSARCO5JE7MUFIXJ4P4MHLY6VLXAP4DDCURO3E\"}}";
+		String param3 = "\"},\"ut\":\"FOUTFKOKLELXOQSV5FY2MWTVZDFOIRRFBBKZYJNIJL3L45ZASVQDMLLGRRNCSHNA2LWSKIMJGRRLUTGIKWPRM5CDCWNJBFCJGC7AFSI\"}}";
+		String postData = param1+param2+param3;
 
-		String eo_cb_param1 = "eo_cb_param=%7B%22c%22%3A%201%2C%20%22m%22%3A%20%22%22%2C%20%22d%22%3A%20%22";
-		String eo_cb_param2 = strUp + "|" + strDown + "|" + strRight + "|"
-				+ strLeft + "%22%7D";
-		String ret;
-		String doc = "";
 		try {
-
-			doc = "eo_cb_id=ctl00_ContentBody_cbAjax"
-					+ "&"
-					+ eo_cb_param1
-					+ eo_cb_param2
-					+ "&__eo_obj_states="
-					+
-					// "&__VIEWSTATE="+viewstate+
-					"&__VIEWSTATE=%2FwEPDwULLTEyOTYyNjYwNjkPZBYCZg9kFgZmD2QWAgIODxYCHgdWaXNpYmxlaGQCAQ9kFhICBQ8WAh4EVGV4dGRkAgkPFgIfAQUWWW91IGFyZSBub3QgbG9nZ2VkIGluLmQCCw8PFgQeC05hdmlnYXRlVXJsBZEBaHR0cDovL3d3dy5nZW9jYWNoaW5nLmNvbS9sb2dpbi9kZWZhdWx0LmFzcHg%2FUkVTRVQ9WSZyZWRpcj1odHRwJTNhJTJmJTJmd3d3Lmdlb2NhY2hpbmcuY29tJTJmbWFwJTJmZGVmYXVsdC5hc3B4JTNmbGF0JTNkNDYuNjE1OTclMjZsbmclM2QxMy44NDg3Mx8BBQZMb2cgaW5kZAIPD2QWAgIBDw8WAh8BZGRkAhEPZBYCAgEPD2QPZAUMRFFJQkFBQUFBQUE9ZAIfDxYCHwBnZAInDw8WBB8CBQwvcmV2aWV3cy9ncHMfAQULR1BTIFJldmlld3NkZAIrD2QWAgIBDw8WAh8BBZcCPGlmcmFtZSBzcmM9Imh0dHA6Ly9iYW5tYW41Lmdyb3VuZHNwZWFrLmNvbS9iYW5tYW41L2FkLmFzcHg%2FWm9uZUlEPTkmVGFzaz1HZXQmU2l0ZUlEPTEmWD0nMzdlYWVjMTQzODVjNDc1Y2JiZjFhODk0YTgzOTNiMGMnIiB3aWR0aD0iMTIwIiBoZWlnaHQ9IjI0MCIgTWFyZ2lud2lkdGg9IjAiIE1hcmdpbmhlaWdodD0iMCIgSHNwYWNlPSIwIiBWc3BhY2U9IjAiIEZyYW1lYm9yZGVyPSIwIiBTY3JvbGxpbmc9Im5vIiBzdHlsZT0id2lkdGg6MTIwcHg7SGVpZ2h0OjI0MHB4OyI%2BPC9pZnJhbWU%2BZGQCLQ9kFgJmD2QWAmYPFgIeC18hSXRlbUNvdW50AgYWDAIBD2QWAgIBDw8WCB4PQ29tbWFu
 ZEFyZ3VtZW50BQVlbi1VUx4LQ29tbWFuZE5hbWUFDVNldFRlbXBMb2NhbGUfAQUHRW5nbGlzaB4QQ2F1c2VzVmFsaWRhdGlvbmhkZAICD2QWAgIBDw8WCB8EBQVkZS1ERR8FBQ1TZXRUZW1wTG9jYWxlHwEFB0RldXRzY2gfBmhkZAIDD2QWAgIBDw8WCB8EBQVmci1GUh8FBQ1TZXRUZW1wTG9jYWxlHwEFCUZyYW7Dp2Fpcx8GaGRkAgQPZBYCAgEPDxYIHwQFBXB0LVBUHwUFDVNldFRlbXBMb2NhbGUfAQUKUG9ydHVndcOqcx8GaGRkAgUPZBYCAgEPDxYIHwQFBWNzLUNaHwUFDVNldFRlbXBMb2NhbGUfAQUJxIxlxaF0aW5hHwZoZGQCBg9kFgICAQ8PFggfBAUFc3YtU0UfBQUNU2V0VGVtcExvY2FsZR8BBQdTdmVuc2thHwZoZGQCAw8WAh8BBSxTZXJ2ZXI6IFdFQjA4OyBCdWlsZDogVEZTLlJlbGVhc2VfMjAxMDA4MzAuMWRkkWJYA8UHbJ38zIk7cJhELr1nbU4%3D"
-					+ "&eo_version=5.0.51.2"
-					+ "&=on&=&=&=2&=3&=4&=5&=1858&=6&=8&=11&=137&=13&=453&=3653&=on&="
-					+ "&__EVENTVALIDATION=" + "&__EVENTTARGET="
-					+ "&__EVENTARGUMENT=";
-
-			ret = fetch_post(url, doc, "/map/default.aspx", false);
-			pref.log("[getAListPage] Got map Cachepage: ");
+		ret = post(url, postData, referer, false);
 		} catch (Exception ex) {
 			ret = "";
-			pref.log("[getAListPage] Error getting map Cachepage" + url + doc, ex);
+			pref.log("[SpiderGC:getMapListPage] Error getting map Cachepage" + url + postData, ex);
 		}
 		return ret;
+ 	}
+
+	private static String post(String url, String postData, String referer, boolean withResponseHeaders) {
+		HttpConnection conn;
+		try {
+			conn = new HttpConnection(url);
+			JavaUtf8Codec codec = new ewe.io.JavaUtf8Codec();
+			conn.documentIsEncoded = true;
+			conn.setRequestorProperty("User-Agent","Mozilla/5.0 (Windows; U; Windows NT 6.0; de; rv:1.9.2.12) Gecko/20101026 Firefox/3.6.12");
+			conn.setRequestorProperty("Accept","application/json, text/javascript, */*; q=0.01");
+			conn.setRequestorProperty("Accept-Language","de-de,de;q=0.8,en-us;q=0.5,en;q=0.3");
+			conn.setRequestorProperty("Accept-Encoding","gzip,deflate");
+			conn.setRequestorProperty("Accept-Charset","ISO-8859-1,utf-8;q=0.7,*;q=0.7");
+			conn.setRequestorProperty("Keep-Alive","115");
+			conn.setRequestorProperty("Proxy-Connection","keep-alive");
+			conn.setRequestorProperty("Content-Type", "application/json; charset=UTF-8");
+			conn.setRequestorProperty("X-Requested-With","XMLHttpRequest");
+			conn.setRequestorProperty("Referer",referer);
+			conn.setRequestorProperty("Pragma","no-cache");
+			conn.setRequestorProperty("Cache-Control","no-cache");
+			if (cookieSession.length() > 0) { conn.setRequestorProperty("Cookie", "ASP.NET_SessionId=" + cookieSession + "; userid=" + cookieID); }
+			conn.setRequestorProperty("Connection", "close");
+			//conn.setPostData(codec.encodeText(postData.toCharArray(), 0, postData.length(), true, null));
+			conn.setPostData(postData);
+			Socket sock = conn.connect();
+			// CharArray c_data = conn.readText(sock, codec);
+			ByteArray daten = conn.readData(sock);
+			CharArray c_data = codec.decodeText(daten.data, 0, daten.length, true, null);
+			
+			sock.close();
+			
+			if (withResponseHeaders)
+				return getResponseHeaders(conn) + c_data.toString();
+			else
+				return c_data.toString();
+		} catch (Exception e) {
+			pref.log("[fetch_post] Ignored Exception", e, true);
+		}
+		return "";
 	}
 
-	/* */
-
 	/**
 	 * check if new Update exists
 	 * 
@@ -2972,29 +2982,19 @@
 	public static String fetch(String address, boolean withResponseHeaders) {
 		CharArray c_data;
 		try {
-			HttpConnection conn;
 			if (pref.myproxy.length() > 0 && pref.proxyActive) {
-				pref.log("[fetch]:Using proxy: " + pref.myproxy + " / "
-						+ pref.myproxyport);
+				pref.log("[fetch]:Using proxy: " + pref.myproxy + " / " + pref.myproxyport);
 			}
-			conn = new HttpConnection(address);
-			conn.setRequestorProperty("User-Agent",
-					"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0");
-			if (cookieSession.length() > 0) {
-				conn.setRequestorProperty("Cookie", "ASP.NET_SessionId=" + cookieSession + "; userid=" + cookieID);
-				pref.log("[fetch]:Cookie Zeug: " + "Cookie: ASP.NET_SessionId="
-						+ cookieSession + "; userid=" + cookieID);
-			} else
-				pref.log("[fetch]:No Cookie found", null);
+			HttpConnection conn = new HttpConnection(address);
+			conn.setRequestorProperty("User-Agent", "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0");
+			if (cookieSession.length() > 0) {conn.setRequestorProperty("Cookie", "ASP.NET_SessionId=" + cookieSession + "; userid=" + cookieID);};
 			conn.setRequestorProperty("Connection", "close");
 			conn.documentIsEncoded = true;
-			pref.log("[fetch]:Connecting " + address);
 			Socket sock = conn.connect();
 			pref.log("[fetch]:Connect ok! " + address);
-			// ByteArray daten = conn.readData(sock);
 			JavaUtf8Codec codec = new JavaUtf8Codec();
-			// c_data = codec.decodeText(daten.data, 0, daten.length, true,
-			// null);
+			// ByteArray daten = conn.readData(sock);
+			// c_data = codec.decodeText(daten.data, 0, daten.length, true, null);
 			c_data = conn.readText(sock, codec);
 			sock.close();
 			pref.log("[fetch]:Read data ok " + address);
@@ -3004,8 +3004,6 @@
 				return c_data.toString();
 		} catch (IOException ioex) {
 			pref.log("IOException in fetch", ioex);
-		} finally {
-			// continue
 		}
 		return "";
 	}
@@ -3015,40 +3013,29 @@
 	 * This method does exactly that. Actually this method is generic in the
 	 * sense that it can be used to post to a URL using http post.
 	 */
-	private static String fetch_post(String address, String document,
-			String path, boolean withResponseHeaders) {
-		HttpConnection conn;
+	private static String fetch_post(String address, String postData, boolean withResponseHeaders) {
 		try {
-			conn = new HttpConnection(address);
+			HttpConnection conn = new HttpConnection(address);
 			JavaUtf8Codec codec = new JavaUtf8Codec();
 			conn.documentIsEncoded = true;
-			conn.setRequestorProperty("User-Agent",
-					"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0");
-			conn.setPostData(codec.encodeText(document.toCharArray(), 0, document.length(), true, null));
+			conn.setRequestorProperty("User-Agent","Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0");
+			conn.setPostData(codec.encodeText(postData.toCharArray(), 0, postData.length(), true, null));
 			conn.setRequestorProperty("Content-Type", "application/x-www-form-urlencoded");
-			if (cookieSession.length() > 0) {
-				conn.setRequestorProperty("Cookie", "ASP.NET_SessionId="
-						+ cookieSession + "; userid=" + cookieID);
-				pref.log("[fetch_post] " + "Cookie: ASP.NET_SessionId="
-						+ cookieSession + "; userid=" + cookieID);
-			} else {
-				pref.log("[fetch_post]:No Cookie found", null);
-			}
+			if (cookieSession.length() > 0) { conn.setRequestorProperty("Cookie", "ASP.NET_SessionId=" + cookieSession + "; userid=" + cookieID);};
 			conn.setRequestorProperty("Connection", "close");
 			Socket sock = conn.connect();
 			pref.log("[fetch_post]:Connect ok! " + address);
 			// ByteArray daten = conn.readData(sock);
 			CharArray c_data = conn.readText(sock, codec);
 			pref.log("[fetch_post]:Read data ok " + address);
-			// CharArray c_data = codec.decodeText(daten.data, 0, daten.length,
-			// true, null);
+			// CharArray c_data = codec.decodeText(daten.data, 0, daten.length, true, null);
 			sock.close();
 			if (withResponseHeaders)
 				return getResponseHeaders(conn) + c_data.toString();
 			else
 				return c_data.toString();
 		} catch (Exception e) {
-			// pref.log("[fetch_post] Ignored Exception", e, true);
+			pref.log("[fetch_post] Ignored Exception", e, true);
 		}
 		return "";
 	}
@@ -3107,8 +3094,7 @@
 		String bugList;
 		try {
 			// infB.setInfo(oldInfoBox+"\nGetting bug: "+bug);
-			bugList = fetch(p.getProp("getBugByName")
-					+ STRreplace.replace(SafeXML.clean(name), " ", "+"), false);
+			bugList = fetch(p.getProp("getBugByName") + STRreplace.replace(SafeXML.clean(name), " ", "+"), false);
 			pref.log("[getBugId] Fetched bugId: " + name);
 		} catch (Exception ex) {
 			pref.log("[getBugId] Could not fetch bug list" + name, ex);



From araber95 at mail.berlios.de  Mon Nov 15 06:05:31 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 15 Nov 2010 06:05:31 PM +0100
Subject: [Cachewolf-svn] r2857 - trunk/src/CacheWolf
Message-ID: <20101115170531.6D507481185@sheep.berlios.de>

Author: araber95
Date: 2010-11-15 18:05:31 +0100 (Mon, 15 Nov 2010)
New Revision: 2857

Modified:
   trunk/src/CacheWolf/HintLogPanel.java
   trunk/src/CacheWolf/SafeXML.java
Log:
make showing hexadecimal html entities correct in internal viewer. (converting to isochar. with corrected SafeXML.cleanback! converting to decimal entity would work too)

Modified: trunk/src/CacheWolf/HintLogPanel.java
===================================================================
--- trunk/src/CacheWolf/HintLogPanel.java	2010-11-15 14:36:44 UTC (rev 2856)
+++ trunk/src/CacheWolf/HintLogPanel.java	2010-11-15 17:05:31 UTC (rev 2857)
@@ -135,7 +135,7 @@
 		int nLogs=currCache.CacheLogs.size();
 		int logsPerPage=Global.getPref().logsPerPage;
 		for(int i = crntLogPosition; i<nLogs; i++){
-			dummy.append(currCache.CacheLogs.getLog(i).toHtml());
+			dummy.append(SafeXML.cleanback(currCache.CacheLogs.getLog(i).toHtml()));
 			dummy.append("<br>");
 			if(++counter >= logsPerPage) break;
 		}

Modified: trunk/src/CacheWolf/SafeXML.java
===================================================================
--- trunk/src/CacheWolf/SafeXML.java	2010-11-15 14:36:44 UTC (rev 2856)
+++ trunk/src/CacheWolf/SafeXML.java	2010-11-15 17:05:31 UTC (rev 2857)
@@ -213,7 +213,7 @@
 		if (entity.startsWith("&#")) {
 			try{
 				if (entity.charAt(2)== 'x' || entity.charAt(2) == 'X') // number in hexadecimal // not tested because I don't have an XML containing hexadecimal encodings
-					addto.append((char)Integer.parseInt(entity.substring(2, entity.length()-1), 16)); 
+					addto.append((char)Integer.parseInt(entity.substring(3, entity.length()-1), 16)); 
 				else // number is decimal
 					addto.append((char)Integer.parseInt(entity.substring(2, entity.length()-1)));
 			} catch (NumberFormatException e) {



From araber95 at mail.berlios.de  Mon Nov 15 06:11:35 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 15 Nov 2010 06:11:35 PM +0100
Subject: [Cachewolf-svn] r2858 - branches/r1.2/src/CacheWolf
Message-ID: <20101115171136.11A53481185@sheep.berlios.de>

Author: araber95
Date: 2010-11-15 18:11:35 +0100 (Mon, 15 Nov 2010)
New Revision: 2858

Modified:
   branches/r1.2/src/CacheWolf/HintLogPanel.java
   branches/r1.2/src/CacheWolf/SafeXML.java
Log:
same as NB 2856 (correct view of logs)

Modified: branches/r1.2/src/CacheWolf/HintLogPanel.java
===================================================================
--- branches/r1.2/src/CacheWolf/HintLogPanel.java	2010-11-15 17:05:31 UTC (rev 2857)
+++ branches/r1.2/src/CacheWolf/HintLogPanel.java	2010-11-15 17:11:35 UTC (rev 2858)
@@ -135,7 +135,7 @@
 		int nLogs=currCache.CacheLogs.size();
 		int logsPerPage=Global.getPref().logsPerPage;
 		for(int i = crntLogPosition; i<nLogs; i++){
-			dummy.append(currCache.CacheLogs.getLog(i).toHtml());
+			dummy.append(SafeXML.cleanback(currCache.CacheLogs.getLog(i).toHtml()));
 			dummy.append("<br>");
 			if(++counter >= logsPerPage) break;
 		}

Modified: branches/r1.2/src/CacheWolf/SafeXML.java
===================================================================
--- branches/r1.2/src/CacheWolf/SafeXML.java	2010-11-15 17:05:31 UTC (rev 2857)
+++ branches/r1.2/src/CacheWolf/SafeXML.java	2010-11-15 17:11:35 UTC (rev 2858)
@@ -213,7 +213,7 @@
 		if (entity.startsWith("&#")) {
 			try{
 				if (entity.charAt(2)== 'x' || entity.charAt(2) == 'X') // number in hexadecimal // not tested because I don't have an XML containing hexadecimal encodings
-					addto.append((char)Integer.parseInt(entity.substring(2, entity.length()-1), 16)); 
+					addto.append((char)Integer.parseInt(entity.substring(3, entity.length()-1), 16)); 
 				else // number is decimal
 					addto.append((char)Integer.parseInt(entity.substring(2, entity.length()-1)));
 			} catch (NumberFormatException e) {



From araber95 at mail.berlios.de  Tue Nov 16 07:37:45 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Tue, 16 Nov 2010 07:37:45 PM +0100
Subject: [Cachewolf-svn] r2859 - in branches/r1.2: res_noewe/webmapservices
	src/CacheWolf/imp
Message-ID: <20101116183745.B268D480ECF@sheep.berlios.de>

Author: araber95
Date: 2010-11-16 19:37:45 +0100 (Tue, 16 Nov 2010)
New Revision: 2859

Modified:
   branches/r1.2/res_noewe/webmapservices/de-ni_t100.wms
   branches/r1.2/res_noewe/webmapservices/de-ni_t100_lv.wms
   branches/r1.2/res_noewe/webmapservices/de-ni_t25.wms
   branches/r1.2/src/CacheWolf/imp/SpiderGC.java
Log:
1.mainly correcting quick load for (large) areas with no or too many caches (over 500).
2.small optimization of loading maps for Niedersachsen

Modified: branches/r1.2/res_noewe/webmapservices/de-ni_t100.wms
===================================================================
--- branches/r1.2/res_noewe/webmapservices/de-ni_t100.wms	2010-11-15 17:11:35 UTC (rev 2858)
+++ branches/r1.2/res_noewe/webmapservices/de-ni_t100.wms	2010-11-16 18:37:45 UTC (rev 2859)
@@ -19,5 +19,5 @@
 BoundingBoxButtomRightWGS84: N 50.5028 E 13.6833
 MinScale:   6.76160460880501
 MaxScale:   52.82503600628914
-RecommendedScale:   5
+RecommendedScale:   15 5 10 20
 ImageFileExtension: .png

Modified: branches/r1.2/res_noewe/webmapservices/de-ni_t100_lv.wms
===================================================================
--- branches/r1.2/res_noewe/webmapservices/de-ni_t100_lv.wms	2010-11-15 17:11:35 UTC (rev 2858)
+++ branches/r1.2/res_noewe/webmapservices/de-ni_t100_lv.wms	2010-11-16 18:37:45 UTC (rev 2859)
@@ -5,10 +5,10 @@
 MainUrl:            http://www.geobasisdaten.niedersachsen.de/bestand?
 ServiceTypeUrlPart: SERVICE=WMS
 VersionUrlPart:     VERSION=1.1.1
-#CoordinateReferenceSystemCacheWolf:  31466 31467 31468 31469 4326
-#CoordinateReferenceSystemUrlPart: SRS=EPSG:31466 SRS=EPSG:31467 SRS=EPSG:31468 SRS=EPSG:31469 SRS=EPSG:4326 
-CoordinateReferenceSystemCacheWolf:  4326
-CoordinateReferenceSystemUrlPart: SRS=EPSG:4326 
+CoordinateReferenceSystemCacheWolf:  31466 31467 31468 31469
+CoordinateReferenceSystemUrlPart: SRS=EPSG:31466 SRS=EPSG:31467 SRS=EPSG:31468 SRS=EPSG:31469
+#CoordinateReferenceSystemCacheWolf:  4326
+#CoordinateReferenceSystemUrlPart: SRS=EPSG:4326 
 RequestUrlPart:     REQUEST=GetMap
 #LayersUrlPart:     LAYERS=geodatenbasisbestand|Bestands?bersicht||
 #LayersUrlPart:     LAYERS=navigation_f|Navigation, farbig||
@@ -32,6 +32,6 @@
 #BBox_Mitte: N 52.6044 E 9.261245
 MinScale:   0.7
 MaxScale:   14000
-RecommendedScale:   5
+RecommendedScale:   5 1 10 15
 ImageFileExtension: .jpg
 #SF von 0.4989 bis 9899.4949 * sqrt(2)

Modified: branches/r1.2/res_noewe/webmapservices/de-ni_t25.wms
===================================================================
--- branches/r1.2/res_noewe/webmapservices/de-ni_t25.wms	2010-11-15 17:11:35 UTC (rev 2858)
+++ branches/r1.2/res_noewe/webmapservices/de-ni_t25.wms	2010-11-16 18:37:45 UTC (rev 2859)
@@ -36,8 +36,8 @@
 ImageFormatUrlPart:FORMAT=image/png
 BoundingBoxTopLeftWGS84: N 54.001848 E 6.579380
 BoundingBoxButtomRightWGS84: N 51.372735 E 11.734608
-MinScale:   2.772396
-MaxScale:   4.950000
+MinScale:   0
+MaxScale:   100
 RecommendedScale:   2,5
 #MinSFInput:1,9586
 #MaxSFInput:3,5001

Modified: branches/r1.2/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- branches/r1.2/src/CacheWolf/imp/SpiderGC.java	2010-11-15 17:11:35 UTC (rev 2858)
+++ branches/r1.2/src/CacheWolf/imp/SpiderGC.java	2010-11-16 18:37:45 UTC (rev 2859)
@@ -596,8 +596,8 @@
 		String listPage = getMapListPage(middle, north, west, south, east);
 		int i = listPage.indexOf("\"count\\\":"); // \"count\":
 		pref.log("" + north + " " + west + " " + south + " " + east + " " + listPage.substring(i) + "\n len=" + len);
-		if ((listPage.indexOf("\"count\\\": 501") > -1)
-		||  (listPage.indexOf("\"count\\\": 0") > -1 && len > 30)) {
+		if ((listPage.indexOf("\"count\\\":501") > -1)
+		||  (listPage.indexOf("\"count\\\":0") > -1 && len > 30)) {
 			double northsouthmiddle = (north + south) / 2.0;
 			double westeastmiddle = (west + east) / 2.0;
 			getCaches(north, west, northsouthmiddle, westeastmiddle, setCachesToLoad);



From araber95 at mail.berlios.de  Tue Nov 16 07:43:02 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Tue, 16 Nov 2010 07:43:02 PM +0100
Subject: [Cachewolf-svn] r2860 - in trunk: res_noewe/webmapservices
	src/CacheWolf/imp
Message-ID: <20101116184302.C185B480ECF@sheep.berlios.de>

Author: araber95
Date: 2010-11-16 19:43:02 +0100 (Tue, 16 Nov 2010)
New Revision: 2860

Modified:
   trunk/res_noewe/webmapservices/de-ni_t100.wms
   trunk/res_noewe/webmapservices/de-ni_t100_lv.wms
   trunk/res_noewe/webmapservices/de-ni_t25.wms
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
1.mainly correcting quick load for (large) areas with no or too many caches (over 500).
2.small optimization of loading maps for Niedersachsen

Modified: trunk/res_noewe/webmapservices/de-ni_t100.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-ni_t100.wms	2010-11-16 18:37:45 UTC (rev 2859)
+++ trunk/res_noewe/webmapservices/de-ni_t100.wms	2010-11-16 18:43:02 UTC (rev 2860)
@@ -19,5 +19,5 @@
 BoundingBoxButtomRightWGS84: N 50.5028 E 13.6833
 MinScale:   6.76160460880501
 MaxScale:   52.82503600628914
-RecommendedScale:   5
+RecommendedScale:   15 5 10 20
 ImageFileExtension: .png

Modified: trunk/res_noewe/webmapservices/de-ni_t100_lv.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-ni_t100_lv.wms	2010-11-16 18:37:45 UTC (rev 2859)
+++ trunk/res_noewe/webmapservices/de-ni_t100_lv.wms	2010-11-16 18:43:02 UTC (rev 2860)
@@ -5,10 +5,10 @@
 MainUrl:            http://www.geobasisdaten.niedersachsen.de/bestand?
 ServiceTypeUrlPart: SERVICE=WMS
 VersionUrlPart:     VERSION=1.1.1
-#CoordinateReferenceSystemCacheWolf:  31466 31467 31468 31469 4326
-#CoordinateReferenceSystemUrlPart: SRS=EPSG:31466 SRS=EPSG:31467 SRS=EPSG:31468 SRS=EPSG:31469 SRS=EPSG:4326 
-CoordinateReferenceSystemCacheWolf:  4326
-CoordinateReferenceSystemUrlPart: SRS=EPSG:4326 
+CoordinateReferenceSystemCacheWolf:  31466 31467 31468 31469
+CoordinateReferenceSystemUrlPart: SRS=EPSG:31466 SRS=EPSG:31467 SRS=EPSG:31468 SRS=EPSG:31469
+#CoordinateReferenceSystemCacheWolf:  4326
+#CoordinateReferenceSystemUrlPart: SRS=EPSG:4326 
 RequestUrlPart:     REQUEST=GetMap
 #LayersUrlPart:     LAYERS=geodatenbasisbestand|Bestands?bersicht||
 #LayersUrlPart:     LAYERS=navigation_f|Navigation, farbig||
@@ -32,6 +32,6 @@
 #BBox_Mitte: N 52.6044 E 9.261245
 MinScale:   0.7
 MaxScale:   14000
-RecommendedScale:   5
+RecommendedScale:   5 1 10 15
 ImageFileExtension: .jpg
 #SF von 0.4989 bis 9899.4949 * sqrt(2)

Modified: trunk/res_noewe/webmapservices/de-ni_t25.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-ni_t25.wms	2010-11-16 18:37:45 UTC (rev 2859)
+++ trunk/res_noewe/webmapservices/de-ni_t25.wms	2010-11-16 18:43:02 UTC (rev 2860)
@@ -36,8 +36,8 @@
 ImageFormatUrlPart:FORMAT=image/png
 BoundingBoxTopLeftWGS84: N 54.001848 E 6.579380
 BoundingBoxButtomRightWGS84: N 51.372735 E 11.734608
-MinScale:   2.772396
-MaxScale:   4.950000
+MinScale:   0
+MaxScale:   100
 RecommendedScale:   2,5
 #MinSFInput:1,9586
 #MaxSFInput:3,5001

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-11-16 18:37:45 UTC (rev 2859)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-11-16 18:43:02 UTC (rev 2860)
@@ -596,8 +596,8 @@
 		String listPage = getMapListPage(middle, north, west, south, east);
 		int i = listPage.indexOf("\"count\\\":"); // \"count\":
 		pref.log("" + north + " " + west + " " + south + " " + east + " " + listPage.substring(i) + "\n len=" + len);
-		if ((listPage.indexOf("\"count\\\": 501") > -1)
-		||  (listPage.indexOf("\"count\\\": 0") > -1 && len > 30)) {
+		if ((listPage.indexOf("\"count\\\":501") > -1)
+		||  (listPage.indexOf("\"count\\\":0") > -1 && len > 30)) {
 			double northsouthmiddle = (north + south) / 2.0;
 			double westeastmiddle = (west + east) / 2.0;
 			getCaches(north, west, northsouthmiddle, westeastmiddle, setCachesToLoad);



From araber95 at mail.berlios.de  Thu Nov 18 08:14:44 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Thu, 18 Nov 2010 08:14:44 PM +0100
Subject: [Cachewolf-svn] r2861 - trunk/src/CacheWolf
Message-ID: <20101118191445.250B6480FD6@sheep.berlios.de>

Author: araber95
Date: 2010-11-18 20:14:44 +0100 (Thu, 18 Nov 2010)
New Revision: 2861

Modified:
   trunk/src/CacheWolf/SafeXML.java
Log:
http://www.geoclub.de/viewtopic.php?f=40&t=50635&p=798796#p798796

Modified: trunk/src/CacheWolf/SafeXML.java
===================================================================
--- trunk/src/CacheWolf/SafeXML.java	2010-11-16 18:43:02 UTC (rev 2860)
+++ trunk/src/CacheWolf/SafeXML.java	2010-11-18 19:14:44 UTC (rev 2861)
@@ -316,6 +316,7 @@
 		String dummy = new String();
 		
 		dummy = STRreplace.replace(str, "&","&amp;");
+		dummy = STRreplace.replace(str, "&amp;#","&#"); //siehe  http://www.geoclub.de/viewtopic.php?f=40&t=50635&p=798796#p798796
 		dummy = STRreplace.replace(dummy, "<", "&lt;");
 		dummy = STRreplace.replace(dummy, ">", "&gt;");
 		dummy = STRreplace.replace(dummy, "\"", "&quot;");



From araber95 at mail.berlios.de  Thu Nov 18 08:18:31 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Thu, 18 Nov 2010 08:18:31 PM +0100
Subject: [Cachewolf-svn] r2862 - branches/r1.2/src/CacheWolf
Message-ID: <20101118191831.F252F480FD6@sheep.berlios.de>

Author: araber95
Date: 2010-11-18 20:18:31 +0100 (Thu, 18 Nov 2010)
New Revision: 2862

Modified:
   branches/r1.2/src/CacheWolf/SafeXML.java
Log:
http://www.geoclub.de/viewtopic.php?f=40&t=50635&p=798796#p798796

Modified: branches/r1.2/src/CacheWolf/SafeXML.java
===================================================================
--- branches/r1.2/src/CacheWolf/SafeXML.java	2010-11-18 19:14:44 UTC (rev 2861)
+++ branches/r1.2/src/CacheWolf/SafeXML.java	2010-11-18 19:18:31 UTC (rev 2862)
@@ -316,6 +316,7 @@
 		String dummy = new String();
 		
 		dummy = STRreplace.replace(str, "&","&amp;");
+		dummy = STRreplace.replace(str, "&amp;#","&#"); //siehe  http://www.geoclub.de/viewtopic.php?f=40&t=50635&p=798796#p798796
 		dummy = STRreplace.replace(dummy, "<", "&lt;");
 		dummy = STRreplace.replace(dummy, ">", "&gt;");
 		dummy = STRreplace.replace(dummy, "\"", "&quot;");



From araber95 at mail.berlios.de  Fri Nov 19 02:54:12 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Fri, 19 Nov 2010 02:54:12 PM +0100
Subject: [Cachewolf-svn] r2863 - branches/r1.2/src/CacheWolf
Message-ID: <20101119135412.B65D7480314@sheep.berlios.de>

Author: araber95
Date: 2010-11-19 14:54:12 +0100 (Fri, 19 Nov 2010)
New Revision: 2863

Modified:
   branches/r1.2/src/CacheWolf/SafeXML.java
Log:
correcting copy&paste error of last correction

Modified: branches/r1.2/src/CacheWolf/SafeXML.java
===================================================================
--- branches/r1.2/src/CacheWolf/SafeXML.java	2010-11-18 19:18:31 UTC (rev 2862)
+++ branches/r1.2/src/CacheWolf/SafeXML.java	2010-11-19 13:54:12 UTC (rev 2863)
@@ -316,7 +316,7 @@
 		String dummy = new String();
 		
 		dummy = STRreplace.replace(str, "&","&amp;");
-		dummy = STRreplace.replace(str, "&amp;#","&#"); //siehe  http://www.geoclub.de/viewtopic.php?f=40&t=50635&p=798796#p798796
+		dummy = STRreplace.replace(dummy, "&amp;#","&#"); //siehe  http://www.geoclub.de/viewtopic.php?f=40&t=50635&p=798796#p798796
 		dummy = STRreplace.replace(dummy, "<", "&lt;");
 		dummy = STRreplace.replace(dummy, ">", "&gt;");
 		dummy = STRreplace.replace(dummy, "\"", "&quot;");



From araber95 at mail.berlios.de  Fri Nov 19 02:56:18 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Fri, 19 Nov 2010 02:56:18 PM +0100
Subject: [Cachewolf-svn] r2864 - trunk/src/CacheWolf
Message-ID: <20101119135618.EE7E5480314@sheep.berlios.de>

Author: araber95
Date: 2010-11-19 14:56:18 +0100 (Fri, 19 Nov 2010)
New Revision: 2864

Modified:
   trunk/src/CacheWolf/SafeXML.java
Log:
correcting last update (sorry of wrong copy&paste)

Modified: trunk/src/CacheWolf/SafeXML.java
===================================================================
--- trunk/src/CacheWolf/SafeXML.java	2010-11-19 13:54:12 UTC (rev 2863)
+++ trunk/src/CacheWolf/SafeXML.java	2010-11-19 13:56:18 UTC (rev 2864)
@@ -316,7 +316,7 @@
 		String dummy = new String();
 		
 		dummy = STRreplace.replace(str, "&","&amp;");
-		dummy = STRreplace.replace(str, "&amp;#","&#"); //siehe  http://www.geoclub.de/viewtopic.php?f=40&t=50635&p=798796#p798796
+		dummy = STRreplace.replace(dummy, "&amp;#","&#"); //siehe  http://www.geoclub.de/viewtopic.php?f=40&t=50635&p=798796#p798796
 		dummy = STRreplace.replace(dummy, "<", "&lt;");
 		dummy = STRreplace.replace(dummy, ">", "&gt;");
 		dummy = STRreplace.replace(dummy, "\"", "&quot;");



From araber95 at mail.berlios.de  Sun Nov 21 02:28:08 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun, 21 Nov 2010 02:28:08 PM +0100
Subject: [Cachewolf-svn] r2865 - trunk/src/CacheWolf
Message-ID: <20101121132808.9FE11480B24@sheep.berlios.de>

Author: araber95
Date: 2010-11-21 14:28:08 +0100 (Sun, 21 Nov 2010)
New Revision: 2865

Modified:
   trunk/src/CacheWolf/DescriptionPanel.java
Log:
removing "fake" entity from internal viewing of chache description.

Modified: trunk/src/CacheWolf/DescriptionPanel.java
===================================================================
--- trunk/src/CacheWolf/DescriptionPanel.java	2010-11-19 13:56:18 UTC (rev 2864)
+++ trunk/src/CacheWolf/DescriptionPanel.java	2010-11-21 13:28:08 UTC (rev 2865)
@@ -29,6 +29,7 @@
 import com.stevesoft.ewe_pat.Transformer;
 
 import ewe.fx.Font;
+import ewe.sys.Date;
 import ewe.sys.Vm;
 import ewe.ui.CellConstants;
 import ewe.ui.CellPanel;
@@ -97,6 +98,26 @@
         	desc=STRreplace.replace(desc,"<sup>","^(");
         	desc=STRreplace.replace(desc, "</sup>",")");
         }
+        // HtmlDisplay interprets &something; as entity, showing "?", so replacing & with +
+        // real entities are uncorrectly shown as "?" (except "&amp";),
+        // so they are replaced at import(spider,..) with the IsoChar of the entity (SafeXML.java cleanback)  
+        StringBuffer buf = new StringBuffer( desc );
+        boolean checkit=true;
+        int beg=0;
+        while (checkit){
+        	int p1=desc.indexOf("&",beg);
+        	int p2=desc.indexOf(";", p1+1);
+        	if (p1==-1 || p2==-1) checkit=false;
+        	else {
+                beg=p2+1;
+                if (beg>=desc.length()) checkit=false;
+        	}
+        	if (checkit && p2-p1>7 ){
+                buf.setCharAt( p1, '+');
+        	}
+        }
+        desc = buf.toString( );
+        
         Vm.showWait(true);
         if (cache!=null && isHtml) {
             int imageNo = 0;



From araber95 at mail.berlios.de  Sun Nov 21 02:32:56 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun, 21 Nov 2010 02:32:56 PM +0100
Subject: [Cachewolf-svn] r2866 - branches/r1.2/src/CacheWolf
Message-ID: <20101121133256.B10D7480B24@sheep.berlios.de>

Author: araber95
Date: 2010-11-21 14:32:56 +0100 (Sun, 21 Nov 2010)
New Revision: 2866

Modified:
   branches/r1.2/src/CacheWolf/DescriptionPanel.java
Log:
removing "fake" entity from internal viewing of chache description.

Modified: branches/r1.2/src/CacheWolf/DescriptionPanel.java
===================================================================
--- branches/r1.2/src/CacheWolf/DescriptionPanel.java	2010-11-21 13:28:08 UTC (rev 2865)
+++ branches/r1.2/src/CacheWolf/DescriptionPanel.java	2010-11-21 13:32:56 UTC (rev 2866)
@@ -29,6 +29,7 @@
 import com.stevesoft.ewe_pat.Transformer;
 
 import ewe.fx.Font;
+import ewe.sys.Date;
 import ewe.sys.Vm;
 import ewe.ui.CellConstants;
 import ewe.ui.CellPanel;
@@ -97,6 +98,26 @@
         	desc=STRreplace.replace(desc,"<sup>","^(");
         	desc=STRreplace.replace(desc, "</sup>",")");
         }
+        // HtmlDisplay interprets &something; as entity, showing "?", so replacing & with +
+        // real entities are uncorrectly shown as "?" (except "&amp";),
+        // so they are replaced at import(spider,..) with the IsoChar of the entity (SafeXML.java cleanback)  
+        StringBuffer buf = new StringBuffer( desc );
+        boolean checkit=true;
+        int beg=0;
+        while (checkit){
+        	int p1=desc.indexOf("&",beg);
+        	int p2=desc.indexOf(";", p1+1);
+        	if (p1==-1 || p2==-1) checkit=false;
+        	else {
+                beg=p2+1;
+                if (beg>=desc.length()) checkit=false;
+        	}
+        	if (checkit && p2-p1>7 ){
+                buf.setCharAt( p1, '+');
+        	}
+        }
+        desc = buf.toString( );
+        
         Vm.showWait(true);
         if (cache!=null && isHtml) {
             int imageNo = 0;



From araber95 at mail.berlios.de  Sun Nov 21 02:33:36 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun, 21 Nov 2010 02:33:36 PM +0100
Subject: [Cachewolf-svn] r2867 - branches/r1.2/src/CacheWolf
Message-ID: <20101121133336.9EAD3480B24@sheep.berlios.de>

Author: araber95
Date: 2010-11-21 14:33:36 +0100 (Sun, 21 Nov 2010)
New Revision: 2867

Modified:
   branches/r1.2/src/CacheWolf/DescriptionPanel.java
Log:


From araber95 at mail.berlios.de  Sun Nov 21 02:34:38 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun, 21 Nov 2010 02:34:38 PM +0100
Subject: [Cachewolf-svn] r2868 - trunk/src/CacheWolf
Message-ID: <20101121133438.DEDD0480B24@sheep.berlios.de>

Author: araber95
Date: 2010-11-21 14:34:38 +0100 (Sun, 21 Nov 2010)
New Revision: 2868

Modified:
   trunk/src/CacheWolf/DescriptionPanel.java
Log:


From araber95 at mail.berlios.de  Sun Nov 21 03:03:43 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun, 21 Nov 2010 03:03:43 PM +0100
Subject: [Cachewolf-svn] r2869 - trunk/src/CacheWolf/imp
Message-ID: <20101121140343.B342D480B24@sheep.berlios.de>

Author: araber95
Date: 2010-11-21 15:03:43 +0100 (Sun, 21 Nov 2010)
New Revision: 2869

Modified:
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
recognition of found / own (gc changed data-string)

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-11-21 13:34:38 UTC (rev 2868)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-11-21 14:03:43 UTC (rev 2869)
@@ -1554,7 +1554,8 @@
 		String param1 = "{\"dto\":{\"data\":{\"c\":1,\"m\":\"\",\"d\":\"";
 		String param2 = strUp + "|" + strDown + "|" + strRight + "|" + strLeft;
 		//String param3 = "\"},\"ut\":\"WQZID4ZFAYC6SFPYDLA632UY6Y6NBSLQY3VWLUKML2MZ5WN377MNTSARCO5JE7MUFIXJ4P4MHLY6VLXAP4DDCURO3E\"}}";
-		String param3 = "\"},\"ut\":\"FOUTFKOKLELXOQSV5FY2MWTVZDFOIRRFBBKZYJNIJL3L45ZASVQDMLLGRRNCSHNA2LWSKIMJGRRLUTGIKWPRM5CDCWNJBFCJGC7AFSI\"}}";
+		//String param3 = "\"},\"ut\":\"FOUTFKOKLELXOQSV5FY2MWTVZDFOIRRFBBKZYJNIJL3L45ZASVQDMLLGRRNCSHNA2LWSKIMJGRRLUTGIKWPRM5CDCWNJBFCJGC7AFSI\"}}";
+		String param3 = "\"},\"ut\":\"FOUTFKOKLELXOQSV5FY2MWTVZDFOIRRFBBKZYJNIJL3L45ZASVQDMLLGRRNCSHNAGV4OXVWAHOOUFX6ZCHNMWNGCH7PCGVT6LGCHH3I\"}}";
 		String postData = param1+param2+param3;
 
 		try {



From araber95 at mail.berlios.de  Sun Nov 21 03:07:22 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun, 21 Nov 2010 03:07:22 PM +0100
Subject: [Cachewolf-svn] r2870 - branches/r1.2/src/CacheWolf/imp
Message-ID: <20101121140722.ECDB8480B24@sheep.berlios.de>

Author: araber95
Date: 2010-11-21 15:07:22 +0100 (Sun, 21 Nov 2010)
New Revision: 2870

Modified:
   branches/r1.2/src/CacheWolf/imp/SpiderGC.java
Log:
recognition of found/own caches (gc changed post data)

Modified: branches/r1.2/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- branches/r1.2/src/CacheWolf/imp/SpiderGC.java	2010-11-21 14:03:43 UTC (rev 2869)
+++ branches/r1.2/src/CacheWolf/imp/SpiderGC.java	2010-11-21 14:07:22 UTC (rev 2870)
@@ -1554,7 +1554,8 @@
 		String param1 = "{\"dto\":{\"data\":{\"c\":1,\"m\":\"\",\"d\":\"";
 		String param2 = strUp + "|" + strDown + "|" + strRight + "|" + strLeft;
 		//String param3 = "\"},\"ut\":\"WQZID4ZFAYC6SFPYDLA632UY6Y6NBSLQY3VWLUKML2MZ5WN377MNTSARCO5JE7MUFIXJ4P4MHLY6VLXAP4DDCURO3E\"}}";
-		String param3 = "\"},\"ut\":\"FOUTFKOKLELXOQSV5FY2MWTVZDFOIRRFBBKZYJNIJL3L45ZASVQDMLLGRRNCSHNA2LWSKIMJGRRLUTGIKWPRM5CDCWNJBFCJGC7AFSI\"}}";
+		//String param3 = "\"},\"ut\":\"FOUTFKOKLELXOQSV5FY2MWTVZDFOIRRFBBKZYJNIJL3L45ZASVQDMLLGRRNCSHNA2LWSKIMJGRRLUTGIKWPRM5CDCWNJBFCJGC7AFSI\"}}";
+		String param3 = "\"},\"ut\":\"FOUTFKOKLELXOQSV5FY2MWTVZDFOIRRFBBKZYJNIJL3L45ZASVQDMLLGRRNCSHNAGV4OXVWAHOOUFX6ZCHNMWNGCH7PCGVT6LGCHH3I\"}}";
 		String postData = param1+param2+param3;
 
 		try {



From araber95 at mail.berlios.de  Mon Nov 22 03:11:32 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 22 Nov 2010 03:11:32 PM +0100
Subject: [Cachewolf-svn] r2871 - branches/r1.2/src/CacheWolf/imp
Message-ID: <20101122141133.273BA481039@sheep.berlios.de>

Author: araber95
Date: 2010-11-22 15:11:32 +0100 (Mon, 22 Nov 2010)
New Revision: 2871

Modified:
   branches/r1.2/src/CacheWolf/imp/SpiderGC.java
Log:
setting correct userToken for postData on getting  MapListPage

Modified: branches/r1.2/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- branches/r1.2/src/CacheWolf/imp/SpiderGC.java	2010-11-21 14:07:22 UTC (rev 2870)
+++ branches/r1.2/src/CacheWolf/imp/SpiderGC.java	2010-11-22 14:11:32 UTC (rev 2871)
@@ -135,6 +135,7 @@
 	private boolean maxNumberAbort;
 	private byte restrictedCacheType = 0;
 	private String fileName = "";
+	private String userToken = "";
 
 	private static String propFirstPage;
 	private static String propFirstPage2;
@@ -1545,6 +1546,14 @@
 		"?lat="	+ middle.getLatDeg(TransformCoordinates.DD) + 
 		"&lng="	+ middle.getLonDeg(TransformCoordinates.DD);
 
+		if (userToken.equals("")) {
+			ret = fetch(referer, false);
+			int i = ret.indexOf("userToken = '");
+			i=i+13;
+			int j = ret.indexOf("'", i);
+			userToken = ret.substring(i,j);
+		}
+		
 		String url = "http://www.geocaching.com/map/default.aspx/MapAction";
 
 		String strLeft = MyLocale.formatDouble(west, "#0.00000").replace(',','.');
@@ -1553,10 +1562,9 @@
 		String strDown = MyLocale.formatDouble(south, "#0.00000").replace(',','.');
 		String param1 = "{\"dto\":{\"data\":{\"c\":1,\"m\":\"\",\"d\":\"";
 		String param2 = strUp + "|" + strDown + "|" + strRight + "|" + strLeft;
-		//String param3 = "\"},\"ut\":\"WQZID4ZFAYC6SFPYDLA632UY6Y6NBSLQY3VWLUKML2MZ5WN377MNTSARCO5JE7MUFIXJ4P4MHLY6VLXAP4DDCURO3E\"}}";
-		//String param3 = "\"},\"ut\":\"FOUTFKOKLELXOQSV5FY2MWTVZDFOIRRFBBKZYJNIJL3L45ZASVQDMLLGRRNCSHNA2LWSKIMJGRRLUTGIKWPRM5CDCWNJBFCJGC7AFSI\"}}";
-		String param3 = "\"},\"ut\":\"FOUTFKOKLELXOQSV5FY2MWTVZDFOIRRFBBKZYJNIJL3L45ZASVQDMLLGRRNCSHNAGV4OXVWAHOOUFX6ZCHNMWNGCH7PCGVT6LGCHH3I\"}}";
-		String postData = param1+param2+param3;
+		String param3 = "\"},\"ut\":\"";
+		String param4 = "\"}}";
+		String postData = param1+param2+param3+userToken+param4;
 
 		try {
 		ret = post(url, postData, referer, false);
@@ -1585,7 +1593,7 @@
 			conn.setRequestorProperty("Referer",referer);
 			conn.setRequestorProperty("Pragma","no-cache");
 			conn.setRequestorProperty("Cache-Control","no-cache");
-			if (cookieSession.length() > 0) { conn.setRequestorProperty("Cookie", "ASP.NET_SessionId=" + cookieSession + "; userid=" + cookieID); }
+			// if (cookieSession.length() > 0) { conn.setRequestorProperty("Cookie", "ASP.NET_SessionId=" + cookieSession + "; userid=" + cookieID); }
 			conn.setRequestorProperty("Connection", "close");
 			//conn.setPostData(codec.encodeText(postData.toCharArray(), 0, postData.length(), true, null));
 			conn.setPostData(postData);



From araber95 at mail.berlios.de  Mon Nov 22 03:18:12 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 22 Nov 2010 03:18:12 PM +0100
Subject: [Cachewolf-svn] r2872 - trunk/src/CacheWolf/imp
Message-ID: <20101122141812.90E77481039@sheep.berlios.de>

Author: araber95
Date: 2010-11-22 15:18:12 +0100 (Mon, 22 Nov 2010)
New Revision: 2872

Modified:
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
setting correct userToken for postData on getting MapListPage

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-11-22 14:11:32 UTC (rev 2871)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-11-22 14:18:12 UTC (rev 2872)
@@ -135,6 +135,7 @@
 	private boolean maxNumberAbort;
 	private byte restrictedCacheType = 0;
 	private String fileName = "";
+	private String userToken = "";
 
 	private static String propFirstPage;
 	private static String propFirstPage2;
@@ -1545,6 +1546,14 @@
 		"?lat="	+ middle.getLatDeg(TransformCoordinates.DD) + 
 		"&lng="	+ middle.getLonDeg(TransformCoordinates.DD);
 
+		if (userToken.equals("")) {
+			ret = fetch(referer, false);
+			int i = ret.indexOf("userToken = '");
+			i=i+13;
+			int j = ret.indexOf("'", i);
+			userToken = ret.substring(i,j);
+		}
+		
 		String url = "http://www.geocaching.com/map/default.aspx/MapAction";
 
 		String strLeft = MyLocale.formatDouble(west, "#0.00000").replace(',','.');
@@ -1553,10 +1562,9 @@
 		String strDown = MyLocale.formatDouble(south, "#0.00000").replace(',','.');
 		String param1 = "{\"dto\":{\"data\":{\"c\":1,\"m\":\"\",\"d\":\"";
 		String param2 = strUp + "|" + strDown + "|" + strRight + "|" + strLeft;
-		//String param3 = "\"},\"ut\":\"WQZID4ZFAYC6SFPYDLA632UY6Y6NBSLQY3VWLUKML2MZ5WN377MNTSARCO5JE7MUFIXJ4P4MHLY6VLXAP4DDCURO3E\"}}";
-		//String param3 = "\"},\"ut\":\"FOUTFKOKLELXOQSV5FY2MWTVZDFOIRRFBBKZYJNIJL3L45ZASVQDMLLGRRNCSHNA2LWSKIMJGRRLUTGIKWPRM5CDCWNJBFCJGC7AFSI\"}}";
-		String param3 = "\"},\"ut\":\"FOUTFKOKLELXOQSV5FY2MWTVZDFOIRRFBBKZYJNIJL3L45ZASVQDMLLGRRNCSHNAGV4OXVWAHOOUFX6ZCHNMWNGCH7PCGVT6LGCHH3I\"}}";
-		String postData = param1+param2+param3;
+		String param3 = "\"},\"ut\":\"";
+		String param4 = "\"}}";
+		String postData = param1+param2+param3+userToken+param4;
 
 		try {
 		ret = post(url, postData, referer, false);
@@ -1585,7 +1593,7 @@
 			conn.setRequestorProperty("Referer",referer);
 			conn.setRequestorProperty("Pragma","no-cache");
 			conn.setRequestorProperty("Cache-Control","no-cache");
-			if (cookieSession.length() > 0) { conn.setRequestorProperty("Cookie", "ASP.NET_SessionId=" + cookieSession + "; userid=" + cookieID); }
+			// if (cookieSession.length() > 0) { conn.setRequestorProperty("Cookie", "ASP.NET_SessionId=" + cookieSession + "; userid=" + cookieID); }
 			conn.setRequestorProperty("Connection", "close");
 			//conn.setPostData(codec.encodeText(postData.toCharArray(), 0, postData.length(), true, null));
 			conn.setPostData(postData);



From admin at berlios.de  Tue Nov 23 16:21:40 2010
From: admin at berlios.de (admin at berlios.de)
Date: Tue, 23 Nov 2010 16:21:40 +0100 (CET)
Subject: [Cachewolf-svn] [Bug #17732] export of notes in gpx (end of
	longdescription)
Message-ID: <201011231521.oANFLenA006133@unicorn.berlios.de>

Bug #17732, was updated on 2010-Nov-23 16:21
Here is a current snapshot of the bug.

Project: CacheWolf
Category: Import/Export
Status: Open
Resolution: None
Bug Group: Feature Request
Priority: 1
Submitted by: araber95
Assigned to : none
Summary: export of notes in gpx (end of longdescription)

Details: http://www.geoclub.de/viewtopic.php?f=40&t=50753

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17732&group_id=2211


From araber95 at mail.berlios.de  Wed Nov 24 09:06:04 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 24 Nov 2010 09:06:04 PM +0100
Subject: [Cachewolf-svn] r2873 - in trunk/src/CacheWolf: . exp
Message-ID: <20101124200604.F3001480EF1@sheep.berlios.de>

Author: araber95
Date: 2010-11-24 21:06:03 +0100 (Wed, 24 Nov 2010)
New Revision: 2873

Modified:
   trunk/src/CacheWolf/CacheHolderDetail.java
   trunk/src/CacheWolf/Preferences.java
   trunk/src/CacheWolf/Profile.java
   trunk/src/CacheWolf/TravelbugJourneyList.java
   trunk/src/CacheWolf/exp/GpxExportNg.java
Log:
1. for the stylists : iso - utf
2. gpx 1/0 - 1/0/1
3. calling map with Caches instead of GoogleMap

Modified: trunk/src/CacheWolf/CacheHolderDetail.java
===================================================================
--- trunk/src/CacheWolf/CacheHolderDetail.java	2010-11-22 14:18:12 UTC (rev 2872)
+++ trunk/src/CacheWolf/CacheHolderDetail.java	2010-11-24 20:06:03 UTC (rev 2873)
@@ -390,7 +390,7 @@
 			}
 			try{
 				if(getParent().getWayPoint().length()>0){
-				  detfile.print("<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\r\n");
+				  detfile.print("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n");
 				  detfile.print("<CACHEDETAILS>\r\n");
 				  detfile.print("<VERSION value = \"3\"/>\n");
 				  detfile.print("<DETAILS><![CDATA["+LongDescription+"]]></DETAILS>\r\n");

Modified: trunk/src/CacheWolf/Preferences.java
===================================================================
--- trunk/src/CacheWolf/Preferences.java	2010-11-22 14:18:12 UTC (rev 2872)
+++ trunk/src/CacheWolf/Preferences.java	2010-11-24 20:06:03 UTC (rev 2873)
@@ -695,7 +695,7 @@
 		if (pathToConfigFile == null) setPathToConfigFile(null); // this sets the default value
 		try{
 			PrintWriter outp =  new PrintWriter(new BufferedWriter(new FileWriter(pathToConfigFile)));
-			outp.print("<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n");
+			outp.print("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n");
 			outp.print("<preferences>\n");
 			outp.print("    <locale language=\"" + SafeXML.clean(language) + "\"/>\n");
 			outp.print("    <basedir dir = \"" + SafeXML.clean(getBaseDir()) + "\"/>\n");

Modified: trunk/src/CacheWolf/Profile.java
===================================================================
--- trunk/src/CacheWolf/Profile.java	2010-11-22 14:18:12 UTC (rev 2872)
+++ trunk/src/CacheWolf/Profile.java	2010-11-24 20:06:03 UTC (rev 2873)
@@ -207,7 +207,7 @@
 		if (centre==null || !centre.isValid() || (savedCentre.latDec==0.0 && savedCentre.lonDec==0.0)) savedCentre=pref.getCurCentrePt();
 
 		try{
-			detfile.print("<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n");
+			detfile.print("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n");
 			detfile.print("<CACHELIST format=\"decimal\">\n");
 			detfile.print("    <VERSION value = \"3\"/>\n");
 			if (savedCentre.isValid())

Modified: trunk/src/CacheWolf/TravelbugJourneyList.java
===================================================================
--- trunk/src/CacheWolf/TravelbugJourneyList.java	2010-11-22 14:18:12 UTC (rev 2872)
+++ trunk/src/CacheWolf/TravelbugJourneyList.java	2010-11-24 20:06:03 UTC (rev 2873)
@@ -197,7 +197,7 @@
 		String datei = baseDir + "travelbugs.xml";
 		try{
 			PrintWriter outp = new PrintWriter(new BufferedWriter(new FileWriter(datei)));
-			outp.print("<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n");
+			outp.print("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n");
 			outp.print("<travelbugJourneys>\n");	
 			int size=tbJourneyList.size();
 			for (int i=0; i<size; i++) outp.print(((TravelbugJourney)tbJourneyList.elementAt(i)).toXML());

Modified: trunk/src/CacheWolf/exp/GpxExportNg.java
===================================================================
--- trunk/src/CacheWolf/exp/GpxExportNg.java	2010-11-22 14:18:12 UTC (rev 2872)
+++ trunk/src/CacheWolf/exp/GpxExportNg.java	2010-11-24 20:06:03 UTC (rev 2873)
@@ -127,7 +127,7 @@
 
 	// we need to fake desc to make clients like GSAK accept additional waypoints together with caches
 	final static String GPXHEADER = "<?xml version=\"1.0\" encoding=\"utf-8\"?>"+(newLine)
-			+("<gpx xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" version=\"1.0\" creator=\"CacheWolf\" xsi:schemaLocation=\"http://www.topografix.com/GPX/1/0 http://www.topografix.com/GPX/1/0/gpx.xsd http://www.groundspeak.com/cache/1/0 http://www.groundspeak.com/cache/1/0/cache.xsd\" xmlns=\"http://www.topografix.com/GPX/1/0\">")+(newLine)
+			+("<gpx xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" version=\"1.0\" creator=\"CacheWolf\" xsi:schemaLocation=\"http://www.topografix.com/GPX/1/0 http://www.topografix.com/GPX/1/0/gpx.xsd http://www.groundspeak.com/cache/1/0/1 http://www.groundspeak.com/cache/1/0/1/cache.xsd\" xmlns=\"http://www.topografix.com/GPX/1/0\">")+(newLine)
 			+("<name>@@NAME@@</name>")+(newLine)
 			+("<desc>This is an individual cache generated from Geocaching.com</desc>")+(newLine)
 			+("<author>Various users from geocaching.com and/or opencaching.de</author>")+(newLine)



From araber95 at mail.berlios.de  Wed Nov 24 09:32:33 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 24 Nov 2010 09:32:33 PM +0100
Subject: [Cachewolf-svn] r2874 - in trunk/src/CacheWolf: . exp
Message-ID: <20101124203234.11C74480EF1@sheep.berlios.de>

Author: araber95
Date: 2010-11-24 21:32:33 +0100 (Wed, 24 Nov 2010)
New Revision: 2874

Modified:
   trunk/src/CacheWolf/exp/GpxExportNg.java
   trunk/src/CacheWolf/myTableControl.java
Log:
Nachtrag

Modified: trunk/src/CacheWolf/exp/GpxExportNg.java
===================================================================
--- trunk/src/CacheWolf/exp/GpxExportNg.java	2010-11-24 20:06:03 UTC (rev 2873)
+++ trunk/src/CacheWolf/exp/GpxExportNg.java	2010-11-24 20:32:33 UTC (rev 2874)
@@ -693,7 +693,7 @@
 		if (ch.isCustomWpt() || ch.isAddiWpt())
 			return "";
 		StringBuffer ret = new StringBuffer();
-		ret.append("    <groundspeak:cache id=\"").append(ch.GetCacheID()).append("\" available=\"").append(ch.is_available() ? TRUE : FALSE).append("\" archived=\"").append(ch.is_archived() ? TRUE : FALSE).append("\" xmlns:groundspeak=\"http://www.groundspeak.com/cache/1/0\">").append(newLine)
+		ret.append("    <groundspeak:cache id=\"").append(ch.GetCacheID()).append("\" available=\"").append(ch.is_available() ? TRUE : FALSE).append("\" archived=\"").append(ch.is_archived() ? TRUE : FALSE).append("\" xmlns:groundspeak=\"http://www.groundspeak.com/cache/1/0/1\">").append(newLine)
 		.append("      <groundspeak:name>").append(SafeXML.cleanGPX(ch.getCacheName())).append("</groundspeak:name>").append(newLine)
 		.append("      <groundspeak:placed_by>").append(SafeXML.cleanGPX(ch.getCacheOwner())).append("</groundspeak:placed_by>").append(newLine)
 		.append("      <groundspeak:owner id=\"").append("31415").append("\">").append(SafeXML.cleanGPX(ch.getCacheOwner())).append("</groundspeak:owner>").append(newLine)

Modified: trunk/src/CacheWolf/myTableControl.java
===================================================================
--- trunk/src/CacheWolf/myTableControl.java	2010-11-24 20:06:03 UTC (rev 2873)
+++ trunk/src/CacheWolf/myTableControl.java	2010-11-24 20:32:33 UTC (rev 2874)
@@ -340,11 +340,13 @@
 		if (selectedItem == miOpenGmaps) {
 			ch = cacheDB.get(tbp.getSelectedCache());
 			if (ch.pos.isValid()) {
-				String latlon=""+ch.pos.getLatDeg(CWPoint.DD)+","+ch.pos.getLonDeg(CWPoint.DD);
+				String lat=""+ch.pos.getLatDeg(CWPoint.DD);
+				String lon=""+ch.pos.getLonDeg(CWPoint.DD);
 				String nameOfCache=ewe.net.URL.encodeURL(ch.cacheName,false).replace('#','N').replace('@','_');
 				String language=Vm.getLocale().getString(Locale.LANGUAGE_SHORT, 0, 0);
 				if (!pref.language.equalsIgnoreCase("auto")) {language=pref.language;}
-				String url="http://maps.google."+language+"/maps?q="+nameOfCache+"@"+latlon;
+				String url="http://maps.google."+language+"/maps?q="+nameOfCache+"@"+lat+","+lon;
+				url="http://www.geocaching.com/map/default.aspx?lat="+lat+"&lng="+lon;
 				callExternalProgram(pref.browser, url);
 			}
 		} else



From araber95 at mail.berlios.de  Wed Nov 24 10:26:32 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 24 Nov 2010 10:26:32 PM +0100
Subject: [Cachewolf-svn] r2875 - trunk/src/CacheWolf/exp
Message-ID: <20101124212632.D5508480EF1@sheep.berlios.de>

Author: araber95
Date: 2010-11-24 22:26:32 +0100 (Wed, 24 Nov 2010)
New Revision: 2875

Modified:
   trunk/src/CacheWolf/exp/GpxExportNg.java
Log:
Notes to log of gpx Export

Modified: trunk/src/CacheWolf/exp/GpxExportNg.java
===================================================================
--- trunk/src/CacheWolf/exp/GpxExportNg.java	2010-11-24 20:32:33 UTC (rev 2874)
+++ trunk/src/CacheWolf/exp/GpxExportNg.java	2010-11-24 21:26:32 UTC (rev 2875)
@@ -802,6 +802,11 @@
 			append("<br />").
 			append(newLine);
 		}
+		if (ch.hasNote()) {
+			logText.append(SafeXML.cleanGPX(ch.getCacheDetails(true).getCacheNotes())).
+			append("<br />").
+			append(newLine);
+		}
 		Log log = new Log("icon_note.gif", "2000-01-01", "CacheWolf",logText.toString());
 		return log;
 	}



From araber95 at mail.berlios.de  Thu Nov 25 11:55:38 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Thu, 25 Nov 2010 11:55:38 PM +0100
Subject: [Cachewolf-svn] r2876 - trunk/src/CacheWolf
Message-ID: <20101125225538.6ADFA480F85@sheep.berlios.de>

Author: araber95
Date: 2010-11-25 23:55:38 +0100 (Thu, 25 Nov 2010)
New Revision: 2876

Modified:
   trunk/src/CacheWolf/myTableControl.java
Log:
add again gmaps

Modified: trunk/src/CacheWolf/myTableControl.java
===================================================================
--- trunk/src/CacheWolf/myTableControl.java	2010-11-24 21:26:32 UTC (rev 2875)
+++ trunk/src/CacheWolf/myTableControl.java	2010-11-25 22:55:38 UTC (rev 2876)
@@ -346,6 +346,7 @@
 				String language=Vm.getLocale().getString(Locale.LANGUAGE_SHORT, 0, 0);
 				if (!pref.language.equalsIgnoreCase("auto")) {language=pref.language;}
 				String url="http://maps.google."+language+"/maps?q="+nameOfCache+"@"+lat+","+lon;
+				callExternalProgram(pref.browser, url);
 				url="http://www.geocaching.com/map/default.aspx?lat="+lat+"&lng="+lon;
 				callExternalProgram(pref.browser, url);
 			}



From araber95 at mail.berlios.de  Fri Nov 26 06:42:37 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Fri, 26 Nov 2010 06:42:37 PM +0100
Subject: [Cachewolf-svn] r2877 - trunk/src/CacheWolf
Message-ID: <20101126174238.0FF5B480F68@sheep.berlios.de>

Author: araber95
Date: 2010-11-26 18:42:37 +0100 (Fri, 26 Nov 2010)
New Revision: 2877

Modified:
   trunk/src/CacheWolf/SafeXML.java
Log:
solved http://www.geoclub.de/viewtopic.php?f=40&t=50745


Modified: trunk/src/CacheWolf/SafeXML.java
===================================================================
--- trunk/src/CacheWolf/SafeXML.java	2010-11-25 22:55:38 UTC (rev 2876)
+++ trunk/src/CacheWolf/SafeXML.java	2010-11-26 17:42:37 UTC (rev 2877)
@@ -316,7 +316,26 @@
 		String dummy = new String();
 		
 		dummy = STRreplace.replace(str, "&","&amp;");
-		dummy = STRreplace.replace(dummy, "&amp;#","&#"); //siehe  http://www.geoclub.de/viewtopic.php?f=40&t=50635&p=798796#p798796
+		//"&amp;#" --> "&#"); //Darstellung Umlaute etc : siehe  http://www.geoclub.de/viewtopic.php?f=40&t=50635&p=798796#p798796
+		// aber so etwas nicht "&amp;#entry15063" --> !!not!! "&#entry15063" (Cache GCPB5P export -> gpx, import -> mapsource)
+		int pos=0;
+		while (pos>-1) {
+			pos=dummy.indexOf("&amp;#",pos);
+			int pos1=dummy.indexOf(";",pos+6);
+			int k = pos1-pos; // wann kommt das ; als Ende eines numerischen entities?
+			if (pos>-1) {
+				if ( k < 12) {
+					String s = dummy.substring(pos+6,pos+8).toLowerCase();
+					char c=s.charAt(0);
+					char c1=s.charAt(1);
+					if ((c=='x' && ((c1>='0' && c1<='9') || (c1>='a' && c1<='f'))) || (c>='0' && c<='9')) {
+						dummy=dummy.substring(0, pos+1) + dummy.substring(pos+5, dummy.length());
+					}
+				}
+				pos++;
+			}
+		}
+			
 		dummy = STRreplace.replace(dummy, "<", "&lt;");
 		dummy = STRreplace.replace(dummy, ">", "&gt;");
 		dummy = STRreplace.replace(dummy, "\"", "&quot;");



From araber95 at mail.berlios.de  Fri Nov 26 10:29:46 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Fri, 26 Nov 2010 10:29:46 PM +0100
Subject: [Cachewolf-svn] r2878 - trunk/src/CacheWolf/exp
Message-ID: <20101126212947.10D6B480F94@sheep.berlios.de>

Author: araber95
Date: 2010-11-26 22:29:46 +0100 (Fri, 26 Nov 2010)
New Revision: 2878

Modified:
   trunk/src/CacheWolf/exp/GpxExportNg.java
Log:
/1/0/1 to /1/0 (no formal update to new groundspeak gpx extension definition)

Modified: trunk/src/CacheWolf/exp/GpxExportNg.java
===================================================================
--- trunk/src/CacheWolf/exp/GpxExportNg.java	2010-11-26 17:42:37 UTC (rev 2877)
+++ trunk/src/CacheWolf/exp/GpxExportNg.java	2010-11-26 21:29:46 UTC (rev 2878)
@@ -127,7 +127,7 @@
 
 	// we need to fake desc to make clients like GSAK accept additional waypoints together with caches
 	final static String GPXHEADER = "<?xml version=\"1.0\" encoding=\"utf-8\"?>"+(newLine)
-			+("<gpx xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" version=\"1.0\" creator=\"CacheWolf\" xsi:schemaLocation=\"http://www.topografix.com/GPX/1/0 http://www.topografix.com/GPX/1/0/gpx.xsd http://www.groundspeak.com/cache/1/0/1 http://www.groundspeak.com/cache/1/0/1/cache.xsd\" xmlns=\"http://www.topografix.com/GPX/1/0\">")+(newLine)
+			+("<gpx xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" version=\"1.0\" creator=\"CacheWolf\" xsi:schemaLocation=\"http://www.topografix.com/GPX/1/0 http://www.topografix.com/GPX/1/0/gpx.xsd http://www.groundspeak.com/cache/1/0 http://www.groundspeak.com/cache/1/0/cache.xsd\" xmlns=\"http://www.topografix.com/GPX/1/0\">")+(newLine)
 			+("<name>@@NAME@@</name>")+(newLine)
 			+("<desc>This is an individual cache generated from Geocaching.com</desc>")+(newLine)
 			+("<author>Various users from geocaching.com and/or opencaching.de</author>")+(newLine)
@@ -693,7 +693,7 @@
 		if (ch.isCustomWpt() || ch.isAddiWpt())
 			return "";
 		StringBuffer ret = new StringBuffer();
-		ret.append("    <groundspeak:cache id=\"").append(ch.GetCacheID()).append("\" available=\"").append(ch.is_available() ? TRUE : FALSE).append("\" archived=\"").append(ch.is_archived() ? TRUE : FALSE).append("\" xmlns:groundspeak=\"http://www.groundspeak.com/cache/1/0/1\">").append(newLine)
+		ret.append("    <groundspeak:cache id=\"").append(ch.GetCacheID()).append("\" available=\"").append(ch.is_available() ? TRUE : FALSE).append("\" archived=\"").append(ch.is_archived() ? TRUE : FALSE).append("\" xmlns:groundspeak=\"http://www.groundspeak.com/cache/1/0\">").append(newLine)
 		.append("      <groundspeak:name>").append(SafeXML.cleanGPX(ch.getCacheName())).append("</groundspeak:name>").append(newLine)
 		.append("      <groundspeak:placed_by>").append(SafeXML.cleanGPX(ch.getCacheOwner())).append("</groundspeak:placed_by>").append(newLine)
 		.append("      <groundspeak:owner id=\"").append("31415").append("\">").append(SafeXML.cleanGPX(ch.getCacheOwner())).append("</groundspeak:owner>").append(newLine)



From araber95 at mail.berlios.de  Sat Nov 27 10:11:58 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sat, 27 Nov 2010 10:11:58 AM +0100
Subject: [Cachewolf-svn] r2879 - trunk/res_noewe/templates
Message-ID: <20101127091158.D651E480FAA@sheep.berlios.de>

Author: araber95
Date: 2010-11-27 10:11:58 +0100 (Sat, 27 Nov 2010)
New Revision: 2879

Modified:
   trunk/res_noewe/templates/gpx2mapsource.tpl
   trunk/res_noewe/templates/loc2G7ToWin.tpl
Log:
http://www.geoclub.de/viewtopic.php?f=40&t=48350

Modified: trunk/res_noewe/templates/gpx2mapsource.tpl
===================================================================
--- trunk/res_noewe/templates/gpx2mapsource.tpl	2010-11-26 21:29:46 UTC (rev 2878)
+++ trunk/res_noewe/templates/gpx2mapsource.tpl	2010-11-27 09:11:58 UTC (rev 2879)
@@ -1,4 +1,4 @@
-<#-- Export-Template for Export to 'MapSource'-->
+<#-- Export-Template V0.9 for Export via .gpx to 'MapSource'-->
 
 <tmpl_par name="charset" value="UTF8">
 <tmpl_par name="newline" value="CRLF">
@@ -12,9 +12,12 @@
 <tmpl_loop cache_index>
    <wpt lat="<tmpl_var LAT>" lon="<tmpl_var LON>"><br>
       <name><tmpl_var WAYPOINT></name><br>
-      <desc><tmpl_var NAME> (<tmpl_var DIFFICULTY>/<tmpl_var TERRAIN>)</desc><br>
+      <desc><tmpl_var name="NAME" escape="html"> (D=<tmpl_var DIFFICULTY>/T=<tmpl_var TERRAIN>/<tmpl_var SIZE>
+<tmpl_if ADDIS>/Multi)</desc><br>
+<tmpl_else>/Single)</desc><br>
+</tmpl_if>
       <url><tmpl_var URL></url><br>
-      <urlname><tmpl_var NAME></urlname><br>
+      <urlname><tmpl_var name="NAME" escape="html"></urlname><br>
       <sym><tmpl_var SYM></sym><br>
       <type><tmpl_var TYPE></type><br>
    </wpt>
@@ -27,7 +30,7 @@
          <wpt lat="00.000001" lon="00.000001">
          </tmpl_if><br>
             <name><tmpl_var WAYPOINT></name><br>
-            <desc><tmpl_var NAME></desc><br>
+            <desc><tmpl_var name="NAME" escape="html"></desc><br>
             <sym><tmpl_var SYM></sym><br>
             <type><tmpl_var TYPE></type><br>
          </wpt>

Modified: trunk/res_noewe/templates/loc2G7ToWin.tpl
===================================================================
--- trunk/res_noewe/templates/loc2G7ToWin.tpl	2010-11-26 21:29:46 UTC (rev 2878)
+++ trunk/res_noewe/templates/loc2G7ToWin.tpl	2010-11-27 09:11:58 UTC (rev 2879)
@@ -1,4 +1,4 @@
-<#-- Export-Template for Export to 'G7ToWin'-->
+<#-- Export-Template V0.9 for Export via .loc to 'G7ToWin'-->
 
 <tmpl_par name="charset" value="ASCII">
 <tmpl_par name="newline" value="CRLF">
@@ -11,7 +11,10 @@
 
 <tmpl_loop cache_index>
    <waypoint><br/>
-      <name id="<tmpl_var WAYPOINT>"><![CDATA[<tmpl_var NAME>]]></name><br/>
+      <name id="<tmpl_var WAYPOINT>"><![CDATA[<tmpl_var NAME> (D=<tmpl_var DIFFICULTY>/T=<tmpl_var TERRAIN>/<tmpl_var SIZE>
+<tmpl_if ADDIS>/Multi)]]></name><br/>
+<tmpl_else>/Single)]]></name><br/>
+</tmpl_if>
       <coord lat="<tmpl_var LAT>" lon="<tmpl_var LON>"/><br/>
       <type><tmpl_var GMTYPE></type><br/>
       <link><tmpl_var URL></link><br/>



From araber95 at mail.berlios.de  Sat Nov 27 08:31:12 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sat, 27 Nov 2010 08:31:12 PM +0100
Subject: [Cachewolf-svn] r2880 - in branches/r1.2: res_noewe/templates
	src/CacheWolf src/CacheWolf/exp
Message-ID: <20101127193113.2822D480BE1@sheep.berlios.de>

Author: araber95
Date: 2010-11-27 20:31:12 +0100 (Sat, 27 Nov 2010)
New Revision: 2880

Modified:
   branches/r1.2/res_noewe/templates/gpx2mapsource.tpl
   branches/r1.2/res_noewe/templates/loc2G7ToWin.tpl
   branches/r1.2/src/CacheWolf/CacheHolderDetail.java
   branches/r1.2/src/CacheWolf/Preferences.java
   branches/r1.2/src/CacheWolf/Profile.java
   branches/r1.2/src/CacheWolf/SafeXML.java
   branches/r1.2/src/CacheWolf/TravelbugJourneyList.java
   branches/r1.2/src/CacheWolf/exp/GpxExportNg.java
   branches/r1.2/src/CacheWolf/myTableControl.java
Log:
updating to 1.3.2879
1.add calling CacheMap
2.UTF-8 heading of xml-files
3.Notes in log of gpx-export
4.updating some tpl-files
5.correct gpx-export of the "new" hex num entities

Modified: branches/r1.2/res_noewe/templates/gpx2mapsource.tpl
===================================================================
--- branches/r1.2/res_noewe/templates/gpx2mapsource.tpl	2010-11-27 09:11:58 UTC (rev 2879)
+++ branches/r1.2/res_noewe/templates/gpx2mapsource.tpl	2010-11-27 19:31:12 UTC (rev 2880)
@@ -1,4 +1,4 @@
-<#-- Export-Template for Export to 'MapSource'-->
+<#-- Export-Template V0.9 for Export via .gpx to 'MapSource'-->
 
 <tmpl_par name="charset" value="UTF8">
 <tmpl_par name="newline" value="CRLF">
@@ -12,9 +12,12 @@
 <tmpl_loop cache_index>
    <wpt lat="<tmpl_var LAT>" lon="<tmpl_var LON>"><br>
       <name><tmpl_var WAYPOINT></name><br>
-      <desc><tmpl_var NAME> (<tmpl_var DIFFICULTY>/<tmpl_var TERRAIN>)</desc><br>
+      <desc><tmpl_var name="NAME" escape="html"> (D=<tmpl_var DIFFICULTY>/T=<tmpl_var TERRAIN>/<tmpl_var SIZE>
+<tmpl_if ADDIS>/Multi)</desc><br>
+<tmpl_else>/Single)</desc><br>
+</tmpl_if>
       <url><tmpl_var URL></url><br>
-      <urlname><tmpl_var NAME></urlname><br>
+      <urlname><tmpl_var name="NAME" escape="html"></urlname><br>
       <sym><tmpl_var SYM></sym><br>
       <type><tmpl_var TYPE></type><br>
    </wpt>
@@ -27,7 +30,7 @@
          <wpt lat="00.000001" lon="00.000001">
          </tmpl_if><br>
             <name><tmpl_var WAYPOINT></name><br>
-            <desc><tmpl_var NAME></desc><br>
+            <desc><tmpl_var name="NAME" escape="html"></desc><br>
             <sym><tmpl_var SYM></sym><br>
             <type><tmpl_var TYPE></type><br>
          </wpt>

Modified: branches/r1.2/res_noewe/templates/loc2G7ToWin.tpl
===================================================================
--- branches/r1.2/res_noewe/templates/loc2G7ToWin.tpl	2010-11-27 09:11:58 UTC (rev 2879)
+++ branches/r1.2/res_noewe/templates/loc2G7ToWin.tpl	2010-11-27 19:31:12 UTC (rev 2880)
@@ -1,4 +1,4 @@
-<#-- Export-Template for Export to 'G7ToWin'-->
+<#-- Export-Template V0.9 for Export via .loc to 'G7ToWin'-->
 
 <tmpl_par name="charset" value="ASCII">
 <tmpl_par name="newline" value="CRLF">
@@ -11,7 +11,10 @@
 
 <tmpl_loop cache_index>
    <waypoint><br/>
-      <name id="<tmpl_var WAYPOINT>"><![CDATA[<tmpl_var NAME>]]></name><br/>
+      <name id="<tmpl_var WAYPOINT>"><![CDATA[<tmpl_var NAME> (D=<tmpl_var DIFFICULTY>/T=<tmpl_var TERRAIN>/<tmpl_var SIZE>
+<tmpl_if ADDIS>/Multi)]]></name><br/>
+<tmpl_else>/Single)]]></name><br/>
+</tmpl_if>
       <coord lat="<tmpl_var LAT>" lon="<tmpl_var LON>"/><br/>
       <type><tmpl_var GMTYPE></type><br/>
       <link><tmpl_var URL></link><br/>

Modified: branches/r1.2/src/CacheWolf/CacheHolderDetail.java
===================================================================
--- branches/r1.2/src/CacheWolf/CacheHolderDetail.java	2010-11-27 09:11:58 UTC (rev 2879)
+++ branches/r1.2/src/CacheWolf/CacheHolderDetail.java	2010-11-27 19:31:12 UTC (rev 2880)
@@ -390,7 +390,7 @@
 			}
 			try{
 				if(getParent().getWayPoint().length()>0){
-				  detfile.print("<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\r\n");
+				  detfile.print("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n");
 				  detfile.print("<CACHEDETAILS>\r\n");
 				  detfile.print("<VERSION value = \"3\"/>\n");
 				  detfile.print("<DETAILS><![CDATA["+LongDescription+"]]></DETAILS>\r\n");

Modified: branches/r1.2/src/CacheWolf/Preferences.java
===================================================================
--- branches/r1.2/src/CacheWolf/Preferences.java	2010-11-27 09:11:58 UTC (rev 2879)
+++ branches/r1.2/src/CacheWolf/Preferences.java	2010-11-27 19:31:12 UTC (rev 2880)
@@ -695,7 +695,7 @@
 		if (pathToConfigFile == null) setPathToConfigFile(null); // this sets the default value
 		try{
 			PrintWriter outp =  new PrintWriter(new BufferedWriter(new FileWriter(pathToConfigFile)));
-			outp.print("<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n");
+			outp.print("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n");
 			outp.print("<preferences>\n");
 			outp.print("    <locale language=\"" + SafeXML.clean(language) + "\"/>\n");
 			outp.print("    <basedir dir = \"" + SafeXML.clean(getBaseDir()) + "\"/>\n");

Modified: branches/r1.2/src/CacheWolf/Profile.java
===================================================================
--- branches/r1.2/src/CacheWolf/Profile.java	2010-11-27 09:11:58 UTC (rev 2879)
+++ branches/r1.2/src/CacheWolf/Profile.java	2010-11-27 19:31:12 UTC (rev 2880)
@@ -207,7 +207,7 @@
 		if (centre==null || !centre.isValid() || (savedCentre.latDec==0.0 && savedCentre.lonDec==0.0)) savedCentre=pref.getCurCentrePt();
 
 		try{
-			detfile.print("<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n");
+			detfile.print("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n");
 			detfile.print("<CACHELIST format=\"decimal\">\n");
 			detfile.print("    <VERSION value = \"3\"/>\n");
 			if (savedCentre.isValid())

Modified: branches/r1.2/src/CacheWolf/SafeXML.java
===================================================================
--- branches/r1.2/src/CacheWolf/SafeXML.java	2010-11-27 09:11:58 UTC (rev 2879)
+++ branches/r1.2/src/CacheWolf/SafeXML.java	2010-11-27 19:31:12 UTC (rev 2880)
@@ -316,7 +316,26 @@
 		String dummy = new String();
 		
 		dummy = STRreplace.replace(str, "&","&amp;");
-		dummy = STRreplace.replace(dummy, "&amp;#","&#"); //siehe  http://www.geoclub.de/viewtopic.php?f=40&t=50635&p=798796#p798796
+		//"&amp;#" --> "&#"); //Darstellung Umlaute etc : siehe  http://www.geoclub.de/viewtopic.php?f=40&t=50635&p=798796#p798796
+		// aber so etwas nicht "&amp;#entry15063" --> !!not!! "&#entry15063" (Cache GCPB5P export -> gpx, import -> mapsource)
+		int pos=0;
+		while (pos>-1) {
+			pos=dummy.indexOf("&amp;#",pos);
+			int pos1=dummy.indexOf(";",pos+6);
+			int k = pos1-pos; // wann kommt das ; als Ende eines numerischen entities?
+			if (pos>-1) {
+				if ( k < 12) {
+					String s = dummy.substring(pos+6,pos+8).toLowerCase();
+					char c=s.charAt(0);
+					char c1=s.charAt(1);
+					if ((c=='x' && ((c1>='0' && c1<='9') || (c1>='a' && c1<='f'))) || (c>='0' && c<='9')) {
+						dummy=dummy.substring(0, pos+1) + dummy.substring(pos+5, dummy.length());
+					}
+				}
+				pos++;
+			}
+		}
+			
 		dummy = STRreplace.replace(dummy, "<", "&lt;");
 		dummy = STRreplace.replace(dummy, ">", "&gt;");
 		dummy = STRreplace.replace(dummy, "\"", "&quot;");

Modified: branches/r1.2/src/CacheWolf/TravelbugJourneyList.java
===================================================================
--- branches/r1.2/src/CacheWolf/TravelbugJourneyList.java	2010-11-27 09:11:58 UTC (rev 2879)
+++ branches/r1.2/src/CacheWolf/TravelbugJourneyList.java	2010-11-27 19:31:12 UTC (rev 2880)
@@ -197,7 +197,7 @@
 		String datei = baseDir + "travelbugs.xml";
 		try{
 			PrintWriter outp = new PrintWriter(new BufferedWriter(new FileWriter(datei)));
-			outp.print("<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n");
+			outp.print("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n");
 			outp.print("<travelbugJourneys>\n");	
 			int size=tbJourneyList.size();
 			for (int i=0; i<size; i++) outp.print(((TravelbugJourney)tbJourneyList.elementAt(i)).toXML());

Modified: branches/r1.2/src/CacheWolf/exp/GpxExportNg.java
===================================================================
--- branches/r1.2/src/CacheWolf/exp/GpxExportNg.java	2010-11-27 09:11:58 UTC (rev 2879)
+++ branches/r1.2/src/CacheWolf/exp/GpxExportNg.java	2010-11-27 19:31:12 UTC (rev 2880)
@@ -802,6 +802,11 @@
 			append("<br />").
 			append(newLine);
 		}
+		if (ch.hasNote()) {
+			logText.append(SafeXML.cleanGPX(ch.getCacheDetails(true).getCacheNotes())).
+			append("<br />").
+			append(newLine);
+		}
 		Log log = new Log("icon_note.gif", "2000-01-01", "CacheWolf",logText.toString());
 		return log;
 	}

Modified: branches/r1.2/src/CacheWolf/myTableControl.java
===================================================================
--- branches/r1.2/src/CacheWolf/myTableControl.java	2010-11-27 09:11:58 UTC (rev 2879)
+++ branches/r1.2/src/CacheWolf/myTableControl.java	2010-11-27 19:31:12 UTC (rev 2880)
@@ -340,12 +340,15 @@
 		if (selectedItem == miOpenGmaps) {
 			ch = cacheDB.get(tbp.getSelectedCache());
 			if (ch.pos.isValid()) {
-				String latlon=""+ch.pos.getLatDeg(CWPoint.DD)+","+ch.pos.getLonDeg(CWPoint.DD);
+				String lat=""+ch.pos.getLatDeg(CWPoint.DD);
+				String lon=""+ch.pos.getLonDeg(CWPoint.DD);
 				String nameOfCache=ewe.net.URL.encodeURL(ch.cacheName,false).replace('#','N').replace('@','_');
 				String language=Vm.getLocale().getString(Locale.LANGUAGE_SHORT, 0, 0);
 				if (!pref.language.equalsIgnoreCase("auto")) {language=pref.language;}
-				String url="http://maps.google."+language+"/maps?q="+nameOfCache+"@"+latlon;
+				String url="http://maps.google."+language+"/maps?q="+nameOfCache+"@"+lat+","+lon;
 				callExternalProgram(pref.browser, url);
+				url="http://www.geocaching.com/map/default.aspx?lat="+lat+"&lng="+lon;
+				callExternalProgram(pref.browser, url);
 			}
 		} else
 



