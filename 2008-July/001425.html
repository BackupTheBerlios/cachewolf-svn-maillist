<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Cachewolf-svn] r1531 - in branches/bugfix_1.0: res_noewe	src/CacheWolf
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cachewolf-svn/2008-July/index.html" >
   <LINK REL="made" HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r1531%20-%20in%20branches/bugfix_1.0%3A%20res_noewe%0A%09src/CacheWolf&In-Reply-To=%3C200807251908.m6PJ8JJh018995%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001424.html">
   <LINK REL="Next"  HREF="001426.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cachewolf-svn] r1531 - in branches/bugfix_1.0: res_noewe	src/CacheWolf</H1>
    <B>mik77 at mail.berlios.de</B> 
    <A HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r1531%20-%20in%20branches/bugfix_1.0%3A%20res_noewe%0A%09src/CacheWolf&In-Reply-To=%3C200807251908.m6PJ8JJh018995%40sheep.berlios.de%3E"
       TITLE="[Cachewolf-svn] r1531 - in branches/bugfix_1.0: res_noewe	src/CacheWolf">mik77 at mail.berlios.de
       </A><BR>
    <I>Fri Jul 25 21:08:19 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001424.html">[Cachewolf-svn] r1530 - in trunk: res_noewe src/CacheWolf
</A></li>
        <LI>Next message: <A HREF="001426.html">[Cachewolf-svn] r1532 - in trunk: res_noewe src/CacheWolf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1425">[ date ]</a>
              <a href="thread.html#1425">[ thread ]</a>
              <a href="subject.html#1425">[ subject ]</a>
              <a href="author.html#1425">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mik77
Date: 2008-07-25 21:08:17 +0200 (Fri, 25 Jul 2008)
New Revision: 1531

Modified:
   branches/bugfix_1.0/res_noewe/spider.def
   branches/bugfix_1.0/src/CacheWolf/SpiderGC.java
Log:
Adaption to new GC.COM design (images and travelbugs)

Modified: branches/bugfix_1.0/res_noewe/spider.def
===================================================================
--- branches/bugfix_1.0/res_noewe/spider.def	2008-07-25 09:47:24 UTC (rev 1530)
+++ branches/bugfix_1.0/res_noewe/spider.def	2008-07-25 19:08:17 UTC (rev 1531)
@@ -22,6 +22,7 @@
 # Version 3.6 - 20080531 Modified descRex to avoid Stack overflow in exe 
 # Version 3.7 - 20080613 Some lines generalized for proxies replacing the images.
 # Version 4.0 - 20080725 adaption to new GC-design
+# Version 4.1 - 20080725 adaption to new GC-design (images and travelbugs)
 #============================================================
 # A suffix of Rex indicates a regular expression
 # A suffix of ExStart indicates the start of an Extractor search pattern
@@ -102,7 +103,7 @@
 # bugEx extrahiert die Namen der einzelnen Bugs aus dem Bugbereich
 bugExStart         = &lt;a\ href='
 bugExEnd           = &lt;/a&gt;&lt;/strong&gt;&lt;/td&gt;
-bugDetailsStart    = id=&quot;BugDetail_BugGoal&quot;&gt;
+bugDetailsStart    = id=&quot;ctl00_ContentBody_BugDetails_BugGoal&quot;&gt;
 bugDetailsEnd      = &lt;/span&gt;
 getBugByName       = <A HREF="http://www.geocaching.com/track/search.aspx?k=">http://www.geocaching.com/track/search.aspx?k=</A>
 getBugByGuid       = <A HREF="http://www.geocaching.com/track/details.aspx?guid=">http://www.geocaching.com/track/details.aspx?guid=</A>
@@ -112,7 +113,7 @@
 bugGuidExEnd       = &quot;
 bugNotFound        = No\ results\ were\ found\ for\ your\ search
 bugTotalRecords    = Total\ Records:\ &lt;b&gt;1&lt;/b&gt;
-bugNameStart       = &lt;span id=&quot;lbHeading&quot;&gt;
+bugNameStart       = &lt;span id=&quot;ctl00_ContentBody_lbHeading&quot;&gt;
 bugNameEnd         = &lt;/span&gt;
 
 
@@ -125,12 +126,12 @@
 # imgSpanEx searches for images in the image section
 imgSpanExStart     = &lt;span\ id=&quot;Images&quot;
 imgSpanExEnd       = &lt;/span&gt;
-imgNameExStart     = align=absmiddle\ border=0&gt;
-imgNameExEnd       = &lt;/a&gt;&lt;br/&gt;
-imgSrcExStart      = &lt;A\ HREF='<A HREF="http://">http://</A>
-imgSrcExEnd        = '\ rel='lightbox'
-imgCommentExStart  = &lt;/a&gt;&lt;br/&gt;
-imgCommentExEnd    = &lt;A\ HREF
+imgNameExStart     = align=&quot;absmiddle&quot;\ border=&quot;0&quot;&gt;
+imgNameExEnd       = &lt;/a&gt;&lt;br\ /&gt;
+imgSrcExStart      = &lt;a\ href=&quot;<A HREF="http://">http://</A>
+imgSrcExEnd        = &quot;\ rel=&quot;lightbox&quot;
+imgCommentExStart  = &lt;/a&gt;&lt;br\ /&gt;
+imgCommentExEnd    = &lt;a\ href
 
 #--------------------------------------
 #Section2d: Additional waypoints

Modified: branches/bugfix_1.0/src/CacheWolf/SpiderGC.java
===================================================================
--- branches/bugfix_1.0/src/CacheWolf/SpiderGC.java	2008-07-25 09:47:24 UTC (rev 1530)
+++ branches/bugfix_1.0/src/CacheWolf/SpiderGC.java	2008-07-25 19:08:17 UTC (rev 1531)
@@ -937,7 +937,7 @@
 					bugDetails = fetch(link);
 					Extractor exDetails = new Extractor(bugDetails,p.getProp(&quot;bugDetailsStart&quot;),p.getProp(&quot;bugDetailsEnd&quot;),0,Extractor.EXCLUDESTARTEND);
 					tb.setMission(exDetails.findNext());
-					Extractor exGuid = new Extractor(bugDetails,&quot;details.aspx?guid=&quot;,&quot;\&quot; id=\&quot;Form1&quot;,0,Extractor.EXCLUDESTARTEND); // TODO Replace with spider.def see also further down
+					Extractor exGuid = new Extractor(bugDetails,&quot;details.aspx?guid=&quot;,&quot;\&quot; id=\&quot;aspnetForm&quot;,0,Extractor.EXCLUDESTARTEND); // TODO Replace with spider.def see also further down
 					tb.setGuid(exGuid.findNext());
 					chD.Travelbugs.add(tb);
 				}catch(Exception ex){
@@ -1052,8 +1052,8 @@
 							chD.Images.add(oldImgName+imgType); // Store name of old image as image to load
 						}
 						chD.ImagesText.add(exImgName.findNext()); // Keep the image description
-						while (imgComment.startsWith(&quot;&lt;br&gt;&quot;)) imgComment=imgComment.substring(4);
-						while (imgComment.endsWith(&quot;&lt;BR&gt;&quot;)) imgComment=imgComment.substring(0,imgComment.length()-4);
+						while (imgComment.startsWith(&quot;&lt;br /&gt;&quot;)) imgComment=imgComment.substring(6);
+						while (imgComment.endsWith(&quot;&lt;br /&gt;&quot;)) imgComment=imgComment.substring(0,imgComment.length()-6);
 						if (imgComment.length()==0)
 							chD.ImagesInfo.add(null);
 						else


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001424.html">[Cachewolf-svn] r1530 - in trunk: res_noewe src/CacheWolf
</A></li>
	<LI>Next message: <A HREF="001426.html">[Cachewolf-svn] r1532 - in trunk: res_noewe src/CacheWolf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1425">[ date ]</a>
              <a href="thread.html#1425">[ thread ]</a>
              <a href="subject.html#1425">[ subject ]</a>
              <a href="author.html#1425">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">More information about the Cachewolf-svn
mailing list</a><br>
</body></html>
