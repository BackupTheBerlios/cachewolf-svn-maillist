<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Cachewolf-svn] r2550 - in trunk: . res_noewe res_noewe/mmcDesktop	src/CacheWolf src/CacheWolf/navi src/CacheWolf/navi/touchControls
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cachewolf-svn/2010-April/index.html" >
   <LINK REL="made" HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r2550%20-%20in%20trunk%3A%20.%20res_noewe%20res_noewe/mmcDesktop%0A%09src/CacheWolf%20src/CacheWolf/navi%20src/CacheWolf/navi/touchControls&In-Reply-To=%3C201004222113.o3MLDdMk005221%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002476.html">
   <LINK REL="Next"  HREF="002478.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cachewolf-svn] r2550 - in trunk: . res_noewe res_noewe/mmcDesktop	src/CacheWolf src/CacheWolf/navi src/CacheWolf/navi/touchControls</H1>
    <B>haelmchen at mail.berlios.de</B> 
    <A HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r2550%20-%20in%20trunk%3A%20.%20res_noewe%20res_noewe/mmcDesktop%0A%09src/CacheWolf%20src/CacheWolf/navi%20src/CacheWolf/navi/touchControls&In-Reply-To=%3C201004222113.o3MLDdMk005221%40sheep.berlios.de%3E"
       TITLE="[Cachewolf-svn] r2550 - in trunk: . res_noewe res_noewe/mmcDesktop	src/CacheWolf src/CacheWolf/navi src/CacheWolf/navi/touchControls">haelmchen at mail.berlios.de
       </A><BR>
    <I>Thu Apr 22 23:13:39 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002476.html">[Cachewolf-svn] r2549 - trunk/src/CacheWolf
</A></li>
        <LI>Next message: <A HREF="002478.html">[Cachewolf-svn] r2551 - trunk/src/CacheWolf/navi/touchControls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2477">[ date ]</a>
              <a href="thread.html#2477">[ thread ]</a>
              <a href="subject.html#2477">[ subject ]</a>
              <a href="author.html#2477">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: haelmchen
Date: 2010-04-22 23:13:20 +0200 (Thu, 22 Apr 2010)
New Revision: 2550

Added:
   trunk/res_noewe/mmcDesktop/
   trunk/res_noewe/mmcDesktop/close.png
   trunk/res_noewe/mmcDesktop/icon_1to1.png
   trunk/res_noewe/mmcDesktop/icon_all.png
   trunk/res_noewe/mmcDesktop/icon_close.png
   trunk/res_noewe/mmcDesktop/icon_folder.png
   trunk/res_noewe/mmcDesktop/icon_folders.png
   trunk/res_noewe/mmcDesktop/icon_gps.png
   trunk/res_noewe/mmcDesktop/icon_map.png
   trunk/res_noewe/mmcDesktop/icon_map_all.png
   trunk/res_noewe/mmcDesktop/icon_map_cache.png
   trunk/res_noewe/mmcDesktop/icon_map_fill.png
   trunk/res_noewe/mmcDesktop/icon_map_highest_res.png
   trunk/res_noewe/mmcDesktop/icon_map_less_details.png
   trunk/res_noewe/mmcDesktop/icon_map_man_res.png
   trunk/res_noewe/mmcDesktop/icon_map_more_details.png
   trunk/res_noewe/mmcDesktop/icon_map_no_cache.png
   trunk/res_noewe/mmcDesktop/icon_map_no_fill.png
   trunk/res_noewe/mmcDesktop/icon_map_pos_dest.png
   trunk/res_noewe/mmcDesktop/icon_nomap.png
   trunk/res_noewe/mmcDesktop/icon_to_centre.png
   trunk/res_noewe/mmcDesktop/icon_to_gps.png
   trunk/res_noewe/mmcDesktop/icon_to_target.png
   trunk/res_noewe/mmcDesktop/icon_zoom.png
   trunk/res_noewe/mmcDesktop/icon_zoom_in.png
   trunk/res_noewe/mmcDesktop/icon_zoom_out.png
   trunk/res_noewe/mmcDesktop/movingMapControls.xml
   trunk/res_noewe/mmcDesktop/row.png
   trunk/res_noewe/mmcDesktop/row1.png
   trunk/res_noewe/mmcDesktop/status.png
   trunk/res_noewe/mmcDesktop/status_long.png
   trunk/res_noewe/mmcDesktop/text_left_110x80.png
   trunk/res_noewe/mmcDesktop/text_right_110x80.png
   trunk/res_noewe/mmcDesktop/top.png
   trunk/res_noewe/mmcDesktop/top_active.png
   trunk/res_noewe/mmcDesktop/top_long.png
   trunk/src/CacheWolf/navi/contextMenu/
Removed:
   trunk/res_noewe/mmcDefault/
   trunk/res_noewe/mmcOldStyle/
Modified:
   trunk/getRes.bat
   trunk/getRes.sh
   trunk/src/CacheWolf/Preferences.java
   trunk/src/CacheWolf/navi/touchControls/ICommandListener.java
   trunk/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java
   trunk/src/CacheWolf/navi/touchControls/MovingMapControls.java
Log:
add new layout for map controls on Desktop

Modified: trunk/getRes.bat
===================================================================
--- trunk/getRes.bat	2010-04-22 21:12:04 UTC (rev 2549)
+++ trunk/getRes.bat	2010-04-22 21:13:20 UTC (rev 2550)
@@ -17,10 +17,8 @@
 mkdir .\work\attributes
 copy .\res_noewe\attributes\*.* .\work\attributes\*.*
 REM
-mkdir .\work\mmcDefault
-copy .\res_noewe\mmcDefault\*.* .\work\mmcDefault\*.*
-mkdir .\work\mmcOldStyle
-copy .\res_noewe\mmcOldStyle\*.* .\work\mmcOldStyle\*.*
+mkdir .\work\mmcDesktop
+copy .\res_noewe\mmcDesktop\*.* .\work\mmcDesktop\*.*
 mkdir .\work\mmc240x320
 copy .\res_noewe\mmc240x320\*.* .\work\mmc240x320\*.*
 mkdir .\work\mmc480x640

Modified: trunk/getRes.sh
===================================================================
--- trunk/getRes.sh	2010-04-22 21:12:04 UTC (rev 2549)
+++ trunk/getRes.sh	2010-04-22 21:13:20 UTC (rev 2550)
@@ -23,20 +23,18 @@
 mkdir -p work/templates
 mkdir -p work/exporticons
 mkdir -p work/symbols
-mkdir -p work/mmcDefault
+mkdir -p work/mmcDesktop
 mkdir -p work/mmc240x320
 mkdir -p work/mmc480x640
-mkdir -p work/mmcOldStyle
 
 # get ressources
 cp -fa resources/*.* work
 cp -fa res_noewe/*.* work
 cp -fa res_noewe/attributes/* work/attributes
 cp -fa res_noewe/attributes-big/* work/attributes
-cp -fa res_noewe/mmcDefault/* work/mmcDefault/
+cp -fa res_noewe/mmcDesktop/* work/mmcDesktop/
 cp -fa res_noewe/mmc240x320/* work/mmc240x320/
 cp -fa res_noewe/mmc480x640/* work/mmc480x640/
-cp -fa res_noewe/mmcOldStyle/* work/mmcOldStyle/
 cp -fa res_noewe/webmapservices/* work/webmapservices/
 cp -fa res_noewe/languages/* work/languages/
 cp -fa res_noewe/templates/* work/templates/

Added: trunk/res_noewe/mmcDesktop/close.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/close.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_1to1.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_1to1.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_all.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_all.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_close.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_close.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_folder.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_folder.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_folders.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_folders.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_gps.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_gps.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_map.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_map.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_map_all.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_map_all.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_map_cache.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_map_cache.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_map_fill.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_map_fill.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_map_highest_res.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_map_highest_res.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_map_less_details.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_map_less_details.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_map_man_res.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_map_man_res.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_map_more_details.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_map_more_details.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_map_no_cache.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_map_no_cache.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_map_no_fill.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_map_no_fill.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_map_pos_dest.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_map_pos_dest.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_nomap.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_nomap.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_to_centre.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_to_centre.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_to_gps.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_to_gps.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_to_target.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_to_target.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_zoom.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_zoom.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_zoom_in.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_zoom_in.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/icon_zoom_out.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/icon_zoom_out.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/movingMapControls.xml
===================================================================
--- trunk/res_noewe/mmcDesktop/movingMapControls.xml	2010-04-22 21:12:04 UTC (rev 2549)
+++ trunk/res_noewe/mmcDesktop/movingMapControls.xml	2010-04-22 21:13:20 UTC (rev 2550)
@@ -0,0 +1,113 @@
+&lt;mmc&gt;
+	&lt;settings fontsize=&quot;14&quot;/&gt;
+
+	&lt;role name=&quot;always&quot; active=&quot;true&quot;/&gt;
+	&lt;role name=&quot;menu&quot;/&gt;
+	&lt;role name=&quot;done&quot; disable=&quot;map|centermap|zoom|detail&quot;/&gt;
+	&lt;role name=&quot;zoom&quot; disable=&quot;map|centermap|detail&quot;/&gt;
+	&lt;role name=&quot;centermap&quot;  disable=&quot;zoom|map|detail&quot;/&gt;
+	&lt;role name=&quot;map&quot; disable=&quot;zoom|centermap|detail&quot;/&gt;
+	&lt;role name=&quot;detail&quot; disable=&quot;zoom|centermap|map&quot;/&gt;
+	&lt;role name=&quot;show_map&quot; active=&quot;true&quot;/&gt; &lt;!-- this name of role is fix in code! --&gt;
+	&lt;role name=&quot;show_caches&quot; active=&quot;true&quot;/&gt;&lt;!-- this name of role is fix in code! --&gt;
+	&lt;role name=&quot;fill_white&quot; active=&quot;true&quot;/&gt;&lt;!-- this name of role is fix in code! --&gt;
+	&lt;role name=&quot;zoom_manually&quot;/&gt;&lt;!-- this name of role is fix in code! --&gt;
+
+
+
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;0&quot; fromTop=&quot;0&quot;  changeStateof=&quot;map&quot; location=&quot;mmcDesktop/top.png&quot;  visibleIf=&quot;!map&quot;  localeDefault=&quot;map&quot;/&gt;
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;0&quot; fromTop=&quot;0&quot;  changeStateof=&quot;map&quot; location=&quot;mmcDesktop/top_active.png&quot;  visibleIf=&quot;map&quot;  localeDefault=&quot;map&quot;/&gt;
+	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;140&quot; fromTop=&quot;0&quot;  changeStateof=&quot;zoom&quot; location=&quot;mmcDesktop/top.png&quot;  visibleIf=&quot;!zoom&quot;  localeDefault=&quot;zoom&quot;/&gt;
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;140&quot; fromTop=&quot;0&quot;  changeStateof=&quot;zoom&quot; location=&quot;mmcDesktop/top_active.png&quot;  visibleIf=&quot;zoom&quot;  localeDefault=&quot;zoom&quot;/&gt;
+	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;280&quot; fromTop=&quot;0&quot;  changeStateof=&quot;centermap&quot; location=&quot;mmcDesktop/top.png&quot;  visibleIf=&quot;!centermap&quot;  localeDefault=&quot;center to&quot;/&gt;
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;280&quot; fromTop=&quot;0&quot;  changeStateof=&quot;centermap&quot; location=&quot;mmcDesktop/top_active.png&quot;  visibleIf=&quot;centermap&quot;  localeDefault=&quot;center to&quot;/&gt;
+	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;420&quot; fromTop=&quot;0&quot;  changeStateof=&quot;detail&quot; location=&quot;mmcDesktop/top.png&quot;  visibleIf=&quot;!detail&quot;  localeDefault=&quot;detail&quot;/&gt;
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;420&quot; fromTop=&quot;0&quot;  changeStateof=&quot;detail&quot; location=&quot;mmcDesktop/top_active.png&quot;  visibleIf=&quot;detail&quot;  localeDefault=&quot;detail&quot;/&gt;
+
+	&lt;button action=&quot;&quot; fromLeft=&quot;560&quot; fromTop=&quot;0&quot; location=&quot;mmcDesktop/top_long.png&quot;  visibleIf=&quot;always&quot;/&gt;
+	&lt;button action=&quot;close&quot; fromRight=&quot;30&quot; fromTop=&quot;0&quot;  changeStateof=&quot;detail&quot; location=&quot;mmcDesktop/close.png&quot; icon=&quot;mmcDesktop/icon_close.png&quot; visibleIf=&quot;always&quot; /&gt;
+
+	
+	&lt;!-- sub menu: map --&gt;
+	&lt;button action=&quot;selectMap&quot; fromLeft=&quot;0&quot; fromTop=&quot;20&quot;  location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_folder.png&quot;  visibleIf=&quot;map&quot; localeDefault=&quot;Select a map manually$s&quot; localeID=&quot;4235&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;changeMapDir&quot; fromLeft=&quot;0&quot; fromTop=&quot;40&quot;  location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_folders.png&quot;  visibleIf=&quot;map&quot; localeDefault=&quot;Change map directory&quot; localeID=&quot;4237&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;0&quot; fromTop=&quot;60&quot; changeStateof=&quot;show_map&quot; location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_map.png&quot;  visibleIf=&quot;map+!show_map&quot; localeDefault=&quot;Show map&quot; localeID=&quot;4239&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;0&quot; fromTop=&quot;60&quot; changeStateof=&quot;show_map&quot; location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_nomap.png&quot;  visibleIf=&quot;map+show_map&quot; localeDefault=&quot;Hide map&quot; localeID=&quot;4241&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;0&quot; fromTop=&quot;80&quot; changeStateof=&quot;fill_white&quot; location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_map_no_fill.png&quot;  visibleIf=&quot;map+!fill_white&quot; localeDefault=&quot;Show white areas&quot; localeID=&quot;4267&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;0&quot; fromTop=&quot;80&quot; changeStateof=&quot;fill_white&quot; location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_map_fill.png&quot;  visibleIf=&quot;map+fill_white&quot; localeDefault=&quot;Fill white areas&quot; localeID=&quot;4266&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;0&quot; fromTop=&quot;100&quot; changeStateof=&quot;show_caches&quot; location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_map_cache.png&quot;  visibleIf=&quot;map+!show_caches&quot; localeDefault=&quot;Alle Cache anzeigen&quot; localeID=&quot;4268&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;0&quot; fromTop=&quot;100&quot; changeStateof=&quot;show_caches&quot; location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_map_no_cache.png&quot;  visibleIf=&quot;map+show_caches&quot; localeDefault=&quot;Keine Cache anzeigen&quot; localeID=&quot;4269&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+		
+	&lt;!-- sub menu: zoom --&gt;
+	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;140&quot; fromTop=&quot;20&quot;  changeStateof=&quot;zoom_manually&quot;  location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_zoom.png&quot;  visibleIf=&quot;zoom+!zoom_manually&quot; localeDefault=&quot;Manual zoom&quot; localeID=&quot;4292&quot; alignText=&quot;C&quot;  textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;140&quot; fromTop=&quot;20&quot;  changeStateof=&quot;zoom_manually&quot;  location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_zoom.png&quot;  visibleIf=&quot;zoom+zoom_manually&quot; localeDefault=&quot;Manual zoom&quot; localeID=&quot;4292&quot; alignText=&quot;C&quot;  textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;zoomin&quot; fromLeft=&quot;140&quot; fromTop=&quot;40&quot;  location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_zoom_in.png&quot;  visibleIf=&quot;zoom&quot; localeDefault=&quot;Zoom in&quot; localeID=&quot;4291&quot; alignText=&quot;C&quot;  textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;zoomout&quot; fromLeft=&quot;140&quot; fromTop=&quot;60&quot; location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_zoom_out.png&quot;  visibleIf=&quot;zoom&quot; localeDefault=&quot;Zoom out&quot; localeID=&quot;4290&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;1to1&quot; fromLeft=&quot;140&quot; fromTop=&quot;80&quot; location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_1to1.png&quot;  visibleIf=&quot;zoom&quot; localeDefault=&quot;Zoom to original resolution&quot; localeID=&quot;4293&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	
+	
+	&lt;!-- sub menu: center map --&gt;
+	
+	&lt;button action=&quot;moveToDest&quot; fromLeft=&quot;280&quot; fromTop=&quot;20&quot; location=&quot;mmcDesktop/row.png&quot;   icon=&quot;mmcDesktop/icon_to_target.png&quot;  visibleIf=&quot;centermap&quot; localeDefault=&quot;Move to goto point&quot; localeID=&quot;4260&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;moveToGps&quot; fromLeft=&quot;280&quot; fromTop=&quot;40&quot;  location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_to_gps.png&quot;  visibleIf=&quot;centermap&quot; localeDefault=&quot;Move to GPS position&quot; localeID=&quot;4262&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;moveToCenter&quot; fromLeft=&quot;280&quot; fromTop=&quot;60&quot; location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_to_centre.png&quot;  visibleIf=&quot;centermap&quot; localeDefault=&quot;Move to centre&quot; localeID=&quot;4264&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	
+	
+	&lt;!-- sub menu: detail --&gt;
+	
+	&lt;button action=&quot;highestResGpsDest&quot; fromLeft=&quot;420&quot; fromTop=&quot;20&quot; location=&quot;mmcDesktop/row.png&quot;    icon=&quot;mmcDesktop/icon_map_pos_dest.png&quot;  visibleIf=&quot;detail&quot; localeDefault= &quot;Highest res. containing dest.  cur. position&quot; localeID=&quot;4244&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;highestResolution&quot; fromLeft=&quot;420&quot; fromTop=&quot;40&quot;  location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_map_highest_res.png&quot;  visibleIf=&quot;detail&quot; localeDefault=&quot;Highest resolution&quot; localeID=&quot;4246&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;keepManResolution&quot; fromLeft=&quot;420&quot; fromTop=&quot;60&quot; location=&quot;mmcDesktop/row.png&quot;  icon=&quot;mmcDesktop/icon_map_man_res.png&quot;  visibleIf=&quot;detail&quot; localeDefault=&quot;Keep manual resolution&quot; localeID=&quot;4248&quot; alignText=&quot;C&quot;  textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;allCachesRes&quot; fromLeft=&quot;420&quot; fromTop=&quot;80&quot; location=&quot;mmcDesktop/row.png&quot;   icon=&quot;mmcDesktop/icon_map_all.png&quot;  visibleIf=&quot;detail&quot; localeDefault=&quot;Load a map containing all marked caches&quot; localeID=&quot;4252&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;moreDetails&quot; fromLeft=&quot;420&quot; fromTop=&quot;100&quot;  location=&quot;mmcDesktop/row.png&quot;   icon=&quot;mmcDesktop/icon_map_more_details.png&quot;  visibleIf=&quot;detail&quot; localeDefault=&quot;Load a map with more details&quot; localeID=&quot;4254&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	&lt;button action=&quot;moreOverview&quot; fromLeft=&quot;420&quot; fromTop=&quot;120&quot; location=&quot;mmcDesktop/row.png&quot; icon=&quot;mmcDesktop/icon_map_less_details.png&quot;  visibleIf=&quot;detail&quot; localeDefault=&quot;Load a map for a better overview&quot; localeID=&quot;4256&quot; alignText=&quot;C&quot; textOffsetLeft=&quot;20&quot;/&gt;	
+	
+	&lt;!-- statusline --&gt;
+	
+	&lt;button action=&quot;&quot; fromLeft=&quot;0&quot; fromBottom=&quot;25&quot; location=&quot;mmcDesktop/status_long.png&quot;  visibleIf=&quot;always&quot;/&gt;	
+	&lt;button action=&quot;&quot; fromRight=&quot;200&quot; fromBottom=&quot;25&quot; location=&quot;mmcDesktop/status.png&quot;  visibleIf=&quot;always&quot; content=&quot;distance&quot; alignText=&quot;C&quot;/&gt;
+	&lt;button action=&quot;&quot; fromRight=&quot;100&quot; fromBottom=&quot;25&quot; location=&quot;mmcDesktop/status.png&quot; visibleIf=&quot;always&quot; content=&quot;scale&quot; alignText=&quot;C&quot;/&gt;
+	
+	
+	&lt;!--status line icons--&gt;
+	
+		&lt;!-- sub menu: map --&gt;
+	&lt;button action=&quot;selectMap&quot; fromLeft=&quot;10&quot; fromBottom=&quot;22&quot;  location=&quot;mmcDesktop/icon_folder.png&quot;  visibleIf=&quot;always&quot; /&gt;	
+	&lt;button action=&quot;changeMapDir&quot; fromLeft=&quot;30&quot; fromBottom=&quot;22&quot;   location=&quot;mmcDesktop/icon_folders.png&quot;  visibleIf=&quot;always&quot;/&gt;	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;50&quot; fromBottom=&quot;22&quot;  changeStateof=&quot;show_map&quot; location=&quot;mmcDesktop/icon_map.png&quot;  visibleIf=&quot;!show_map&quot;/&gt;	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;50&quot; fromBottom=&quot;22&quot;  changeStateof=&quot;show_map&quot; location=&quot;mmcDesktop/icon_nomap.png&quot;  visibleIf=&quot;show_map&quot;/&gt;	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;70&quot; fromBottom=&quot;22&quot;  changeStateof=&quot;fill_white&quot; location=&quot;mmcDesktop/icon_map_no_fill.png&quot;  visibleIf=&quot;!fill_white&quot;/&gt;	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;70&quot; fromBottom=&quot;22&quot;  changeStateof=&quot;fill_white&quot; location=&quot;mmcDesktop/icon_map_fill.png&quot;  visibleIf=&quot;fill_white&quot;/&gt;	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;90&quot; fromBottom=&quot;22&quot;  changeStateof=&quot;show_caches&quot; location=&quot;mmcDesktop/icon_map_cache.png&quot;  visibleIf=&quot;!show_caches&quot;/&gt;	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;90&quot; fromBottom=&quot;22&quot; changeStateof=&quot;show_caches&quot; location=&quot;mmcDesktop/icon_map_no_cache.png&quot;  visibleIf=&quot;show_caches&quot;/&gt;	
+		
+	&lt;!-- sub menu: zoom --&gt;
+	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;140&quot; fromBottom=&quot;22&quot;   changeStateof=&quot;zoom_manually&quot;  location=&quot;mmcDesktop/icon_zoom.png&quot;  visibleIf=&quot;!zoom_manually&quot;/&gt;	
+	&lt;button action=&quot;changeStateOfRole&quot; fromLeft=&quot;140&quot; fromBottom=&quot;22&quot;   changeStateof=&quot;zoom_manually&quot;  location=&quot;mmcDesktop/icon_zoom.png&quot;  visibleIf=&quot;zoom_manually&quot;/&gt;	
+	&lt;button action=&quot;zoomin&quot; fromLeft=&quot;160&quot; fromBottom=&quot;22&quot; location=&quot;mmcDesktop/icon_zoom_in.png&quot;  visibleIf=&quot;always&quot;/&gt;	
+	&lt;button action=&quot;zoomout&quot; fromLeft=&quot;180&quot; fromBottom=&quot;22&quot; location=&quot;mmcDesktop/icon_zoom_out.png&quot;  visibleIf=&quot;always&quot;/&gt;	
+	&lt;button action=&quot;1to1&quot; fromLeft=&quot;200&quot; fromBottom=&quot;22&quot; location=&quot;mmcDesktop/icon_1to1.png&quot;  visibleIf=&quot;always&quot;/&gt;	
+	
+	
+	&lt;!-- sub menu: center map --&gt;
+	
+	&lt;button action=&quot;moveToDest&quot; fromLeft=&quot;250&quot; fromBottom=&quot;22&quot; location=&quot;mmcDesktop/icon_to_target.png&quot;  visibleIf=&quot;always&quot;/&gt;	
+	&lt;button action=&quot;moveToGps&quot; fromLeft=&quot;270&quot; fromBottom=&quot;22&quot;  location=&quot;mmcDesktop/icon_to_gps.png&quot;  visibleIf=&quot;always&quot;/&gt;	
+	&lt;button action=&quot;moveToCenter&quot; fromLeft=&quot;290&quot; fromBottom=&quot;22&quot; location=&quot;mmcDesktop/icon_to_centre.png&quot;  visibleIf=&quot;always&quot;/&gt;	
+	
+	
+	&lt;!-- sub menu: detail --&gt;
+	
+	&lt;button action=&quot;highestResGpsDest&quot; fromLeft=&quot;340&quot; fromBottom=&quot;22&quot; location=&quot;mmcDesktop/icon_map_pos_dest.png&quot;  visibleIf=&quot;always&quot; /&gt;	
+	&lt;button action=&quot;highestResolution&quot; fromLeft=&quot;360&quot; fromBottom=&quot;22&quot;  location=&quot;mmcDesktop/icon_map_highest_res.png&quot;  visibleIf=&quot;always&quot;/&gt;	
+	&lt;button action=&quot;keepManResolution&quot; fromLeft=&quot;380&quot; fromBottom=&quot;22&quot; location=&quot;mmcDesktop/icon_map_man_res.png&quot;  visibleIf=&quot;always&quot;/&gt;	
+	&lt;button action=&quot;allCachesRes&quot; fromLeft=&quot;400&quot; fromBottom=&quot;22&quot; location=&quot;mmcDesktop/icon_map_all.png&quot;  visibleIf=&quot;always&quot;/&gt;	
+	&lt;button action=&quot;moreDetails&quot; fromLeft=&quot;420&quot; fromBottom=&quot;22&quot;  location=&quot;mmcDesktop/icon_map_more_details.png&quot;  visibleIf=&quot;always&quot;/&gt;	
+	&lt;button action=&quot;moreOverview&quot; fromLeft=&quot;440&quot; fromBottom=&quot;22&quot; location=&quot;mmcDesktop/icon_map_less_details.png&quot;  visibleIf=&quot;always&quot;/&gt;	
+	
+&lt;/mmc&gt;


Property changes on: trunk/res_noewe/mmcDesktop/movingMapControls.xml
___________________________________________________________________
Name: svn:mime-type
   + text/plain

Added: trunk/res_noewe/mmcDesktop/row.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/row.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/row1.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/row1.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/status.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/status.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/status_long.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/status_long.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/text_left_110x80.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/text_left_110x80.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/text_right_110x80.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/text_right_110x80.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/top.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/top.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/top_active.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/top_active.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/mmcDesktop/top_long.png
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/mmcDesktop/top_long.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/src/CacheWolf/Preferences.java
===================================================================
--- trunk/src/CacheWolf/Preferences.java	2010-04-22 21:12:04 UTC (rev 2549)
+++ trunk/src/CacheWolf/Preferences.java	2010-04-22 21:13:20 UTC (rev 2550)
@@ -182,8 +182,6 @@
 	// These settings govern where the menu and the tabs are displayed and whether the statusbas is shown
 	/** True if the menu is to be displayed at the top of the screen */
 	public boolean menuAtTop=true;
-	/** True if big icons for touch is enabled */
-	public boolean touchControls=false;
 	/** True if the tabs are to be displayed at the top of the screen */
 	public boolean tabsAtTop=true;
 	/** True if the status bar is to be displayed (hidden if false) */
@@ -495,8 +493,6 @@
 			showStatus=Boolean.valueOf(atts.getValue(&quot;showstatus&quot;)).booleanValue();
 			if (atts.getValue(&quot;hasclosebutton&quot;)!=null)
 				hasCloseButton=Boolean.valueOf(atts.getValue(&quot;hasclosebutton&quot;)).booleanValue();
-			if (atts.getValue(&quot;touchControls&quot;)!=null)
-				touchControls=Boolean.valueOf(atts.getValue(&quot;touchControls&quot;)).booleanValue();
 			if (atts.getValue(&quot;h&quot;)!=null) {
 				myAppHeight=Convert.toInt(atts.getValue(&quot;h&quot;));
 				myAppWidth=Convert.toInt(atts.getValue(&quot;w&quot;));
@@ -685,7 +681,7 @@
 			outp.print(&quot;    &lt;gpsd active= \&quot;&quot; + SafeXML.clean(Convert.toString(useGPSD)) + &quot;\&quot; host = \&quot;&quot; + SafeXML.clean(gpsdHost) + &quot;\&quot; port = \&quot;&quot; + SafeXML.strxmlencode(gpsdPort) + &quot;\&quot;/&gt;\n&quot;);
 			outp.print(&quot;    &lt;portlog active= \&quot;&quot; + SafeXML.clean(Convert.toString(logGPS)) + &quot;\&quot; logTimer = \&quot;&quot; + SafeXML.clean(logGPSTimer) + &quot;\&quot;/&gt;\n&quot;);
 			outp.print(&quot;    &lt;font size =\&quot;&quot; + SafeXML.strxmlencode(fontSize) + &quot;\&quot;/&gt;\n&quot;);
-			outp.print(&quot;    &lt;screen menuattop=\&quot;&quot;+menuAtTop+&quot;\&quot; tabsattop=\&quot;&quot;+tabsAtTop+&quot;\&quot; showstatus=\&quot;&quot;+showStatus+&quot;\&quot; hasclosebutton=\&quot;&quot;+hasCloseButton+&quot;\&quot; touchControls=\&quot;&quot;+touchControls+
+			outp.print(&quot;    &lt;screen menuattop=\&quot;&quot;+menuAtTop+&quot;\&quot; tabsattop=\&quot;&quot;+tabsAtTop+&quot;\&quot; showstatus=\&quot;&quot;+showStatus+&quot;\&quot; hasclosebutton=\&quot;&quot;+hasCloseButton+
 	                &quot;\&quot; h=\&quot;&quot;+myAppHeight+&quot;\&quot; w=\&quot;&quot;+myAppWidth+&quot;\&quot; /&gt;\n&quot;);
 			outp.print(&quot;    &lt;fixedsip state = \&quot;&quot; + SafeXML.strxmlencode(fixSIP) + &quot;\&quot;/&gt;\n&quot;);
 			outp.print(&quot;    &lt;listview colmap=\&quot;&quot; + SafeXML.clean(listColMap) + &quot;\&quot; colwidths=\&quot;&quot; + SafeXML.clean(listColWidth) + &quot;\&quot; /&gt;\n&quot;);

Modified: trunk/src/CacheWolf/navi/touchControls/ICommandListener.java
===================================================================
--- trunk/src/CacheWolf/navi/touchControls/ICommandListener.java	2010-04-22 21:12:04 UTC (rev 2549)
+++ trunk/src/CacheWolf/navi/touchControls/ICommandListener.java	2010-04-22 21:13:20 UTC (rev 2550)
@@ -54,6 +54,18 @@
 	
 	public static final String NO_FILL_MAP = &quot;nofillMap&quot;;
 
+	public static final String CONTEXT_GOTO = &quot;context_goto&quot;;
+
+	public static final String CONTEXT_NEW_WAY_POINT = &quot;context_nwp&quot;;
+
+	public static final String CONTEXT_OPEN_CACHE_DESC = &quot;context_ocDesc&quot;;
+
+	public static final String CONTEXT_OPEN_CACHE_DETAIL =  &quot;context_ocDetail&quot;;
+
+	public static final String CONTEXT_GOTO_CACHE = &quot;context_goto_cache&quot;;
+
+	public static final String CONTEXT_TOUR = &quot;context_tour&quot;;
+
 	public boolean handleCommand(String command);
 
 }

Modified: trunk/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java
===================================================================
--- trunk/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java	2010-04-22 21:12:04 UTC (rev 2549)
+++ trunk/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java	2010-04-22 21:13:20 UTC (rev 2550)
@@ -125,13 +125,11 @@
 	Vector menuItems = new Vector(10);
 	private Hashtable roles;
 	private int fontsize;
-	private Preferences pref;
 
 	public MovingMapControlSettings(boolean vga, Hashtable roles) {
 		double fontscale = vga ? 1.5 : 1;
 		this.fontsize = (int) (Global.getPref().fontSize * fontscale);
 		this.roles = roles;
-		this.pref = Global.getPref();
 	}
 
 	public void startElement(String name, AttributeList attributes)
@@ -297,17 +295,14 @@
 	public boolean readFile(Dimension dest) {
 		setDocumentHandler(this);
 		String path = FileBase.makePath(FileBase.getProgramDirectory(),
-				&quot;mmcOldStyle/&quot;);
+				&quot;mmcDesktop/&quot;);
 
-		if (pref.touchControls) {
+		if (Vm.isMobile()) {
 			path = FileBase.makePath(FileBase.getProgramDirectory(),
-					&quot;mmcDefault/&quot;);
-
-			if (dest.height &lt;= 320 &amp;&amp; dest.width &lt;= 240) {
+			&quot;mmc240x320/&quot;);
+			
+			if (dest.height &gt;= 640 &amp;&amp; dest.width &gt;= 480) {
 				path = FileBase.makePath(FileBase.getProgramDirectory(),
-						&quot;mmc240x320/&quot;);
-			} else if (dest.height &lt;= 640 &amp;&amp; dest.width &lt;= 480) {
-				path = FileBase.makePath(FileBase.getProgramDirectory(),
 						&quot;mmc480x640/&quot;);
 			}
 		}

Modified: trunk/src/CacheWolf/navi/touchControls/MovingMapControls.java
===================================================================
--- trunk/src/CacheWolf/navi/touchControls/MovingMapControls.java	2010-04-22 21:12:04 UTC (rev 2549)
+++ trunk/src/CacheWolf/navi/touchControls/MovingMapControls.java	2010-04-22 21:13:20 UTC (rev 2550)
@@ -23,10 +23,14 @@
 	private static final String ROLE_SHOW_MAP = &quot;show_map&quot;;
 
 	public static final String ROLE_MENU = &quot;menu&quot;;
+	
+	public static final String ROLE_DONE = &quot;done&quot;;
 
 	public static final String ROLE_WORKING = &quot;working&quot;;
 
 	Vector buttons = null;
+	
+	Vector visibleImages = null;
 
 	private boolean vga;
 
@@ -52,6 +56,7 @@
 		movingMap.getPreferredSize(dest);
 		movingMapControlSettings.readFile(dest);
 		buttons = movingMapControlSettings.getMenuItems();
+		visibleImages = new Vector();
 
 		roles.put(ROLE_WORKING, new Role());
 
@@ -61,16 +66,22 @@
 	}
 
 	private void setStateOfIcons() {
+		for (int i = 0; i &lt; visibleImages.size(); i++) {
+			AniImage ani = (AniImage) visibleImages.get(i);
+			movingMap.getMmp().removeImage(ani);
+		}
 		for (int i = 0; i &lt; buttons.size(); i++) {
 			MovingMapControlItem item = (MovingMapControlItem) buttons.get(i);
+
+			if (!item.isVisible(roles)) {
+				continue;
+			}
 			AniImage ani = item.getImage();
 			if (ani == null) {
 				continue;
 			}
-			movingMap.getMmp().removeImage(ani);
-			if (item.isVisible(roles)) {
-				movingMap.getMmp().addImage(ani);
-			}
+			movingMap.getMmp().addImage(ani);
+			visibleImages.add(ani);
 		}
 	}
 
@@ -88,15 +99,21 @@
 	}
 
 	public boolean getStateOfRole(String role) {
-		Object object = roles.get(role);
-		if (object == null) {
+		Role r =getRole(role);
+		if (r == null) {
 			return false;
 		}
-		Role r = (Role) object;
 		return r.getState();
 
 	}
+	public Role getRole(String role) {
+		Object object = roles.get(role);
+		if (object == null) {
+			return null;
+		}
+		return (Role) object;
 
+	}
 	public boolean changeRoleState(String role, boolean b) {
 		Object object = roles.get(role);
 		if (object == null) {
@@ -117,13 +134,22 @@
 					changeRoleState(roleToDis, false);
 				}
 			}
+		}else if (ROLE_MENU.equals(roleName)) {
+			Role done = getRole(ROLE_DONE);
+			String[] rToDis = done.getRolesToDisable();
+			if (rToDis != null) {
+				for (int i = 0; i &lt; rToDis.length; i++) {
+					String roleToDis = rToDis[i];
+					changeRoleState(roleToDis, false);
+				}
+			}
 		}
 		setStateOfIcons();
 
 		boolean action = checkRolesForAction(roleName, b);
-		if (action) {
-
-		}
+//		if (action) {
+//
+//		}
 		if (getStateOfRole(ROLE_WORKING)) {
 			changeRoleState(ROLE_WORKING, false);
 		}
@@ -257,16 +283,18 @@
 		int timenow = Vm.getTimeStamp();
 
 		// avoid double clicks
-		if (timenow &lt; 300 + lastTime) {
+		if (timenow &lt; 40 + lastTime) {
 			return false;
 		}
 		
 		boolean result = handleImageClicked(which);
+		
 		lastTime = Vm.getTimeStamp();
 		return result;
 	}
 
 	private boolean handleImageClicked(AniImage which) {
+	
 		for (int i = 0; i &lt; buttons.size(); i++) {
 			MovingMapControlItem item = (MovingMapControlItem) buttons.get(i);
 			AniImage ani = item.getImage();


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002476.html">[Cachewolf-svn] r2549 - trunk/src/CacheWolf
</A></li>
	<LI>Next message: <A HREF="002478.html">[Cachewolf-svn] r2551 - trunk/src/CacheWolf/navi/touchControls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2477">[ date ]</a>
              <a href="thread.html#2477">[ thread ]</a>
              <a href="subject.html#2477">[ subject ]</a>
              <a href="author.html#2477">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">More information about the Cachewolf-svn
mailing list</a><br>
</body></html>
