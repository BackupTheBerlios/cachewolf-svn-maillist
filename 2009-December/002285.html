<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Cachewolf-svn] r2361 - in trunk/src/CacheWolf: . exp
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cachewolf-svn/2009-December/index.html" >
   <LINK REL="made" HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r2361%20-%20in%20trunk/src/CacheWolf%3A%20.%20exp&In-Reply-To=%3C200912132355.nBDNtvLW016556%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002284.html">
   <LINK REL="Next"  HREF="002286.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cachewolf-svn] r2361 - in trunk/src/CacheWolf: . exp</H1>
    <B>araber95 at mail.berlios.de</B> 
    <A HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r2361%20-%20in%20trunk/src/CacheWolf%3A%20.%20exp&In-Reply-To=%3C200912132355.nBDNtvLW016556%40sheep.berlios.de%3E"
       TITLE="[Cachewolf-svn] r2361 - in trunk/src/CacheWolf: . exp">araber95 at mail.berlios.de
       </A><BR>
    <I>Mon Dec 14 00:55:57 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002284.html">[Cachewolf-svn] r2360 - in trunk: lib src/CacheWolf	src/CacheWolf/imp src/CacheWolf/navi
</A></li>
        <LI>Next message: <A HREF="002286.html">[Cachewolf-svn] r2362 - trunk/lib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2285">[ date ]</a>
              <a href="thread.html#2285">[ thread ]</a>
              <a href="subject.html#2285">[ subject ]</a>
              <a href="author.html#2285">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: araber95
Date: 2009-12-14 00:55:48 +0100 (Mon, 14 Dec 2009)
New Revision: 2361

Modified:
   trunk/src/CacheWolf/CacheType.java
   trunk/src/CacheWolf/exp/ExploristExporter.java
   trunk/src/CacheWolf/exp/GPXExporter.java
   trunk/src/CacheWolf/exp/GpxExportNg.java
   trunk/src/CacheWolf/exp/HTMLExporter.java
   trunk/src/CacheWolf/exp/KMLExporter.java
   trunk/src/CacheWolf/exp/MSARCSVExporter.java
   trunk/src/CacheWolf/exp/TPLExporter.java
Log:
getting pq compatible ( check the exporters )

Modified: trunk/src/CacheWolf/CacheType.java
===================================================================
--- trunk/src/CacheWolf/CacheType.java	2009-12-13 15:34:19 UTC (rev 2360)
+++ trunk/src/CacheWolf/CacheType.java	2009-12-13 23:55:48 UTC (rev 2361)
@@ -107,9 +107,9 @@
 	   }
 	}
 	public static byte CT_Index(final byte type) {
-		return CT_Index[type+1];			
+		return CT_Index[type+1];
 	}
-		
+
 	static final String[] CT_FILENAME={
 		&quot;typeCustom.png&quot;, &quot;typeApe.png&quot;, &quot;typeCito.png&quot;, &quot;typeDrivein.png&quot;, &quot;typeEarth.png&quot;,
 		&quot;typeEvent.png&quot;, &quot;typeFinal.png&quot;, &quot;typeLetterbox.png&quot;, &quot;typeLocless.png&quot;, &quot;typeMaze.png&quot;,
@@ -119,7 +119,7 @@
 		&quot;typeUnknown.png&quot;, &quot;typeMath.png&quot;, &quot;typeMoving.png&quot;,
 		&quot;guiError.png&quot;
 	};
-	static final String[] CT_GPXTYPE = {
+	static final String[] CT_TYPETAG = {
 		&quot;Geocache|Custom&quot;, &quot;Geocache|Project APE Cache&quot;, &quot;Geocache|Cache In Trash Out Event&quot;, &quot;Geocache|DriveIn&quot;, &quot;Geocache|Earthcache&quot;,
 		&quot;Geocache|Event Cache&quot;, &quot;Waypoint|Final Location&quot;, &quot;Geocache|Letterbox Hybrid&quot;, &quot;Geocache|Locationless (Reverse) Cache&quot;, &quot;Geocache|GPS Adventures Exhibit&quot;,
 		&quot;Geocache|Mega-Event Cache&quot;, &quot;Geocache|Multi-cache&quot;, &quot;Waypoint|Parking Area&quot;, &quot;Waypoint|Question to Answer&quot;, &quot;Waypoint|Reference Point&quot;,
@@ -128,7 +128,16 @@
 		&quot;Geocache|Unknown Cache&quot;, &quot;Geocache|Math&quot;, &quot;Geocache|Moving&quot;,
 		&quot;Fehler&quot;
 	};
-	static final String[] CT_GPXSYM = {
+	static final String[] CT_SYMTAG = {
+		&quot;Custom&quot;, &quot;Geocache&quot;, &quot;Geocache&quot;, &quot;Geocache&quot;, &quot;Geocache&quot;,
+		&quot;Geocache&quot;, &quot;Final Location&quot;, &quot;Geocache&quot;, &quot;Geocache&quot;, &quot;Geocache&quot;,
+		&quot;Geocache&quot;, &quot;Geocache&quot;, &quot;Parking Area&quot;, &quot;Question to Answer&quot;, &quot;Reference Point&quot;,
+		&quot;Stages of a Multicache&quot;, &quot;Geocache&quot;, &quot;Trailhead&quot;, &quot;Geocache&quot;, &quot;Geocache&quot;,
+		&quot;Geocache&quot;, &quot;Geocache&quot;,
+		&quot;Geocache&quot;, &quot;Geocache&quot;, &quot;Geocache&quot;,
+		&quot;Fehler&quot;
+	};
+	static final String[] CT_GSTYPETAG = {
 		&quot;Custom&quot;, &quot;Project APE Cache&quot;, &quot;Cache In Trash Out Event&quot;, &quot;DriveIn&quot;, &quot;Earthcache&quot;,
 		&quot;Event Cache&quot;, &quot;Final Location&quot;, &quot;Letterbox Hybrid&quot;, &quot;Locationless (Reverse) Cache&quot;, &quot;GPS Adventures Exhibit&quot;,
 		&quot;Mega-Event Cache&quot;, &quot;Multi-cache&quot;, &quot;Parking Area&quot;, &quot;Question to Answer&quot;, &quot;Reference Point&quot;,
@@ -390,11 +399,16 @@
 	 */
 	public static byte gpxType2CwType(final String gpxType) throws IllegalArgumentException {
 		for (byte i=0; i&lt;CT.length; i++) {
-			if (CT_GPXTYPE[i].equals(gpxType)) {return CT[i];};
+			if (CT_TYPETAG[i].equals(gpxType)) {return CT[i];};
 		}
+		/*
 		for (byte i=0; i&lt;CT.length; i++) {
-			if (CT_GPXSYM[i].equals(gpxType)) {return CT[i];};
+			if (CT_SYMTAG[i].equals(gpxType)) {return CT[i];};
 		}
+		 */
+		for (byte i=0; i&lt;CT.length; i++) {
+			if (CT_GSTYPETAG[i].equals(gpxType)) {return CT[i];};
+		}
 		if (gpxType.equals(&quot;Traditional&quot;)|| gpxType.equals(&quot;Classic&quot;)) return CW_TYPE_TRADITIONAL;
 		if (gpxType.equals(&quot;Multi&quot;) || gpxType.equals(&quot;Offset&quot;)) return CW_TYPE_MULTI;
 		if (gpxType.equals(&quot;Virtual&quot;)) return CW_TYPE_VIRTUAL;
@@ -461,20 +475,27 @@
 	/**
 	 * generate type description matching those of GC for GPX export
 	 * @param typeId internal type id
-	 * @return type information in GC.com GPX format
+	 * @return type information in GC.com &lt;type&gt; GPX format
 	 */
-	public static String type2GpxString(final byte typeId) {
-		return CT_GPXTYPE[CT_Index(typeId)];
+	public static String type2TypeTag(final byte typeId) {
+		return CT_TYPETAG[CT_Index(typeId)];
 	}
-
 	/**
 	 * generate type description matching those of GC for GPX export
 	 * @param typeId internal type id
-	 * @return symb information in GC.com GPX format
+	 * @return symb information in GC.com &lt;sym&gt; GPX format
 	 */
-	public static String sym2GpxString(final byte typeId) {
-		return CT_GPXSYM[CT_Index(typeId)];
+	public static String type2SymTag(final byte typeId) {
+		return CT_SYMTAG[CT_Index(typeId)];
 	}
+	/**
+	 * generate type description matching those of GC for GPX export
+	 * @param typeId internal type id
+	 * @return type information in GC.com &lt;groundspeak:type&gt; GPX format
+	 */
+	public static String type2GSTypeTag(final byte typeId) {
+		return CT_GSTYPETAG[CT_Index(typeId)];
+	}
 
 	/**
 	 * checks if the given type would be valid for internal use in cachewolf

Modified: trunk/src/CacheWolf/exp/ExploristExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/ExploristExporter.java	2009-12-13 15:34:19 UTC (rev 2360)
+++ trunk/src/CacheWolf/exp/ExploristExporter.java	2009-12-13 23:55:48 UTC (rev 2361)
@@ -244,7 +244,7 @@
 		if (!add.equals(&quot;&quot;)) { // Set Picture in Explorist to Virtual
 			sb.append(&quot;Virtual Cache&quot;);
 		} else if (ch.getType() != CacheType.CW_TYPE_UNKNOWN) { // Rewrite Unknown Caches
-			sb.append(CacheType.sym2GpxString(ch.getType()));
+			sb.append(CacheType.type2GSTypeTag(ch.getType()));
 		} else {
 			sb.append(&quot;Mystery Cache&quot;);
 		}

Modified: trunk/src/CacheWolf/exp/GPXExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/GPXExporter.java	2009-12-13 15:34:19 UTC (rev 2360)
+++ trunk/src/CacheWolf/exp/GPXExporter.java	2009-12-13 23:55:48 UTC (rev 2361)
@@ -71,7 +71,7 @@
 				} else {
 					strBuf.append(&quot;    &lt;sym&gt;Geocache&lt;/sym&gt;\r\n&quot;);
 				}
-				strBuf.append(&quot;    &lt;type&gt;&quot;).append(CacheType.type2GpxString(ch.getType())).append(&quot;&lt;/type&gt;\r\n&quot;);
+				strBuf.append(&quot;    &lt;type&gt;&quot;).append(CacheType.type2TypeTag(ch.getType())).append(&quot;&lt;/type&gt;\r\n&quot;);
 				String dummyAvailable = ch.is_available() ? STRING_TRUE:STRING_FALSE;
 				String dummyArchived = ch.is_archived() ? STRING_TRUE:STRING_FALSE;
 				strBuf.append(&quot;    &lt;groundspeak:cache id=\&quot;&quot;).append( ch.GetCacheID() ).append( &quot;\&quot; available=\&quot;&quot; ).append( dummyAvailable ).append( &quot;\&quot; archived=\&quot;&quot; ).append( dummyArchived).append( &quot;\&quot; xmlns:groundspeak=\&quot;<A HREF="http://www.groundspeak.com/cache/1/0\">http://www.groundspeak.com/cache/1/0\</A>&quot;&gt;\r\n&quot;);
@@ -79,7 +79,7 @@
 				strBuf.append(&quot;      &lt;groundspeak:placed_by&gt;&quot;).append(SafeXML.cleanGPX(ch.getCacheOwner())).append(&quot;&lt;/groundspeak:placed_by&gt;\r\n&quot;);
 				//todo low prio: correct owner-id
 				strBuf.append(&quot;      &lt;groundspeak:owner id=\&quot;23\&quot;&gt;&quot;).append(SafeXML.cleanGPX(ch.getCacheOwner())+&quot;&lt;/groundspeak:owner&gt;\r\n&quot;);
-				strBuf.append(&quot;      &lt;groundspeak:type&gt;&quot;).append(CacheType.sym2GpxString(ch.getType())).append(&quot;&lt;/groundspeak:type&gt;\r\n&quot;);
+				strBuf.append(&quot;      &lt;groundspeak:type&gt;&quot;).append(CacheType.type2GSTypeTag(ch.getType())).append(&quot;&lt;/groundspeak:type&gt;\r\n&quot;);
 				strBuf.append(&quot;      &lt;groundspeak:container&gt;&quot;).append(CacheSize.cw2ExportString(ch.getCacheSize())).append(&quot;&lt;/groundspeak:container&gt;\r\n&quot;);
 				//for Colorado/Oregon: 2.0 -&gt; 2
 				String diffTerr = CacheTerrDiff.shortDT(ch.getHard());
@@ -144,8 +144,8 @@
 				strBuf.append(&quot;    &lt;/groundspeak:cache&gt;\r\n&quot;);
 			}else {
 				// there is no HTML in the description of addi wpts
-				strBuf.append(&quot;    &lt;sym&gt;&quot;).append(CacheType.sym2GpxString(ch.getType())).append(&quot;&lt;/sym&gt;\r\n&quot;);
-				strBuf.append(&quot;    &lt;type&gt;&quot;).append(CacheType.type2GpxString(ch.getType())).append(&quot;&lt;/type&gt;\r\n&quot;);
+				strBuf.append(&quot;    &lt;sym&gt;&quot;).append(CacheType.type2SymTag(ch.getType())).append(&quot;&lt;/sym&gt;\r\n&quot;);
+				strBuf.append(&quot;    &lt;type&gt;&quot;).append(CacheType.type2TypeTag(ch.getType())).append(&quot;&lt;/type&gt;\r\n&quot;);
 			}
 			strBuf.append(&quot;  &lt;/wpt&gt;\r\n&quot;);
 		}catch(Exception e){

Modified: trunk/src/CacheWolf/exp/GpxExportNg.java
===================================================================
--- trunk/src/CacheWolf/exp/GpxExportNg.java	2009-12-13 15:34:19 UTC (rev 2360)
+++ trunk/src/CacheWolf/exp/GpxExportNg.java	2009-12-13 23:55:48 UTC (rev 2361)
@@ -606,7 +606,7 @@
 			ret.append(&quot;    &lt;desc&gt;&quot;.concat(SafeXML.cleanGPX(ch.getCacheName())).concat(&quot;&lt;/desc&gt;&quot;.concat(newLine)));
 		} else {
 			ret.append(&quot;    &lt;desc&gt;&quot;.concat(SafeXML.cleanGPX(ch.getCacheName().concat(&quot; by &quot;).concat(ch.getCacheOwner()).concat(&quot;, &quot;)
-					.concat(CacheType.sym2GpxString(ch.getType()))
+					.concat(CacheType.type2GSTypeTag(ch.getType()))
 					.concat(&quot; (&quot;).concat(CacheTerrDiff.shortDT(ch.getHard()))
 					.concat(&quot;/&quot;).concat(CacheTerrDiff.shortDT(ch.getTerrain())).concat(&quot;)&quot;)))
 					.concat(&quot;&lt;/desc&gt;&quot;.concat(newLine)));
@@ -623,7 +623,7 @@
 			ret.append(&quot;    &lt;sym&gt;&quot;.concat(poiMapper.getIcon(ch)).concat(&quot;&lt;/sym&gt;&quot;.concat(newLine)));
 		} else {
 			if (ch.isAddiWpt()) {
-				ret.append(&quot;    &lt;sym&gt;&quot;.concat(CacheType.sym2GpxString(ch.getType())).concat(&quot;&lt;/sym&gt;&quot;.concat(newLine)));
+				ret.append(&quot;    &lt;sym&gt;&quot;.concat(CacheType.type2SymTag(ch.getType())).concat(&quot;&lt;/sym&gt;&quot;.concat(newLine)));
 			} else if (ch.isCustomWpt()) {
 				ret.append(&quot;    &lt;sym&gt;Custom&lt;/sym&gt;&quot;.concat(newLine));
 			} else if (ch.is_found()) {
@@ -634,7 +634,7 @@
 		}
 
 		if (exportStyle != STYLE_GPX_COMPACT) {
-			ret.append(&quot;    &lt;type&gt;&quot;.concat(CacheType.type2GpxString(ch.getType())).concat(&quot;&lt;/type&gt;&quot;.concat(newLine)));
+			ret.append(&quot;    &lt;type&gt;&quot;.concat(CacheType.type2TypeTag(ch.getType())).concat(&quot;&lt;/type&gt;&quot;.concat(newLine)));
 		}
 
 		return ret.toString();
@@ -654,7 +654,7 @@
 		.concat(&quot;      &lt;groundspeak:name&gt;&quot;).concat(SafeXML.cleanGPX(ch.getCacheName())).concat(&quot;&lt;/groundspeak:name&gt;&quot;.concat(newLine))
 		.concat(&quot;      &lt;groundspeak:placed_by&gt;&quot;).concat(SafeXML.cleanGPX(ch.getCacheOwner())).concat(&quot;&lt;/groundspeak:placed_by&gt;&quot;.concat(newLine))
 		.concat(&quot;      &lt;groundspeak:owner id=\&quot;&quot;).concat(&quot;31415&quot;).concat(&quot;\&quot;&gt;&quot;).concat(SafeXML.cleanGPX(ch.getCacheOwner())).concat(&quot;&lt;/groundspeak:owner&gt;&quot;.concat(newLine))
-		.concat(&quot;      &lt;groundspeak:type&gt;&quot;).concat(CacheType.type2GpxString(ch.getType())).concat(&quot;&lt;/groundspeak:type&gt;&quot;.concat(newLine))
+		.concat(&quot;      &lt;groundspeak:type&gt;&quot;).concat(CacheType.type2GSTypeTag(ch.getType())).concat(&quot;&lt;/groundspeak:type&gt;&quot;.concat(newLine))
 		.concat(&quot;      &lt;groundspeak:container&gt;&quot;).concat(CacheSize.cw2ExportString(ch.getCacheSize())).concat(&quot;&lt;/groundspeak:container&gt;&quot;.concat(newLine))
 		.concat(&quot;      &lt;groundspeak:difficulty&gt;&quot;).concat(CacheTerrDiff.shortDT(ch.getHard())).concat(&quot;&lt;/groundspeak:difficulty&gt;&quot;.concat(newLine))
 		.concat(&quot;      &lt;groundspeak:terrain&gt;&quot;).concat(CacheTerrDiff.shortDT(ch.getTerrain())).concat(&quot;&lt;/groundspeak:terrain&gt;&quot;.concat(newLine))

Modified: trunk/src/CacheWolf/exp/HTMLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/HTMLExporter.java	2009-12-13 15:34:19 UTC (rev 2360)
+++ trunk/src/CacheWolf/exp/HTMLExporter.java	2009-12-13 23:55:48 UTC (rev 2361)
@@ -87,7 +87,7 @@
 					}
 					det=ch.getCacheDetails(false,false);
 					varParams = new Hashtable();
-					varParams.put(&quot;TYPE&quot;, CacheType.sym2GpxString(ch.getType()));
+					varParams.put(&quot;TYPE&quot;, CacheType.type2TypeTag(ch.getType()));
 					varParams.put(&quot;WAYPOINT&quot;, ch.getWayPoint());
 					varParams.put(&quot;NAME&quot;, ch.getCacheName());
 					varParams.put(&quot;OWNER&quot;, ch.getCacheOwner());

Modified: trunk/src/CacheWolf/exp/KMLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/KMLExporter.java	2009-12-13 15:34:19 UTC (rev 2360)
+++ trunk/src/CacheWolf/exp/KMLExporter.java	2009-12-13 23:55:48 UTC (rev 2361)
@@ -102,7 +102,7 @@
 					tmp = (Vector)entry.getValue();
 					// skip over empty cachetypes
 					if (tmp.size() == 0) continue;
-					outp.print(startFolder(CacheType.sym2GpxString(new Integer((String)entry.getKey()).byteValue())));
+					outp.print(startFolder(CacheType.type2SymTag(new Integer((String)entry.getKey()).byteValue())));
 
 					for(int i = 0; i&lt;tmp.size(); i++){
 						ch = (CacheHolder) tmp.get(i);

Modified: trunk/src/CacheWolf/exp/MSARCSVExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/MSARCSVExporter.java	2009-12-13 15:34:19 UTC (rev 2360)
+++ trunk/src/CacheWolf/exp/MSARCSVExporter.java	2009-12-13 23:55:48 UTC (rev 2361)
@@ -26,7 +26,7 @@
 		StringBuffer str = new StringBuffer(200);
 		str.append(&quot;\&quot;&quot; + ch.getWayPoint() + &quot; - &quot; + ch.getCacheName() + &quot;\&quot;;&quot;);
 		str.append(lat + &quot;;&quot; + lon +&quot;;&quot;);
-		str.append(&quot;\&quot;&quot; + CacheType.sym2GpxString(ch.getType())+ &quot;\&quot;;&quot;);
+		str.append(&quot;\&quot;&quot; + CacheType.type2SymTag(ch.getType())+ &quot;\&quot;;&quot;);
 		str.append(&quot;\&quot;&quot; + CacheSize.cw2ExportString(ch.getCacheSize()) + &quot;\&quot;;&quot;);
 		str.append(&quot;\&quot;&quot; + ch.getWayPoint() + &quot;\&quot;;&quot;);
 		str.append(&quot;\&quot;&quot; + ch.getDateHidden() + &quot;\&quot;;&quot;);

Modified: trunk/src/CacheWolf/exp/TPLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/TPLExporter.java	2009-12-13 15:34:19 UTC (rev 2360)
+++ trunk/src/CacheWolf/exp/TPLExporter.java	2009-12-13 23:55:48 UTC (rev 2361)
@@ -207,7 +207,7 @@
 						Regex dec = new Regex(&quot;[,.]&quot;,myFilter.decSep);
 						if (myFilter.badChars != null) rex = new Regex(&quot;[&quot;+myFilter.badChars+&quot;]&quot;,&quot;&quot;);
 						varParams = new Hashtable();
-						varParams.put(&quot;TYPE&quot;, CacheType.sym2GpxString(ch.getType()));
+						varParams.put(&quot;TYPE&quot;, CacheType.type2TypeTag(ch.getType()));
 						varParams.put(&quot;SHORTTYPE&quot;, CacheType.getExportShortId(ch.getType()));
 						varParams.put(&quot;SIZE&quot;, CacheSize.cw2ExportString(ch.getCacheSize()));
 						varParams.put(&quot;SHORTSIZE&quot;, CacheSize.getExportShortId(ch.getCacheSize()));


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002284.html">[Cachewolf-svn] r2360 - in trunk: lib src/CacheWolf	src/CacheWolf/imp src/CacheWolf/navi
</A></li>
	<LI>Next message: <A HREF="002286.html">[Cachewolf-svn] r2362 - trunk/lib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2285">[ date ]</a>
              <a href="thread.html#2285">[ thread ]</a>
              <a href="subject.html#2285">[ subject ]</a>
              <a href="author.html#2285">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">More information about the Cachewolf-svn
mailing list</a><br>
</body></html>
