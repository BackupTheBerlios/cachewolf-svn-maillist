<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Cachewolf-svn] r2744 - in trunk: . res_noewe/templates	src/CacheWolf src/CacheWolf/exp src/CacheWolf/imp
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cachewolf-svn/2010-August/index.html" >
   <LINK REL="made" HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r2744%20-%20in%20trunk%3A%20.%20res_noewe/templates%0A%09src/CacheWolf%20src/CacheWolf/exp%20src/CacheWolf/imp&In-Reply-To=%3C20100817215321.27779480F21%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002731.html">
   <LINK REL="Next"  HREF="002733.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cachewolf-svn] r2744 - in trunk: . res_noewe/templates	src/CacheWolf src/CacheWolf/exp src/CacheWolf/imp</H1>
    <B>araber95 at mail.berlios.de</B> 
    <A HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r2744%20-%20in%20trunk%3A%20.%20res_noewe/templates%0A%09src/CacheWolf%20src/CacheWolf/exp%20src/CacheWolf/imp&In-Reply-To=%3C20100817215321.27779480F21%40sheep.berlios.de%3E"
       TITLE="[Cachewolf-svn] r2744 - in trunk: . res_noewe/templates	src/CacheWolf src/CacheWolf/exp src/CacheWolf/imp">araber95 at mail.berlios.de
       </A><BR>
    <I>Tue Aug 17 11:53:21 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002731.html">[Cachewolf-svn] r2743 - trunk/src/CacheWolf
</A></li>
        <LI>Next message: <A HREF="002733.html">[Cachewolf-svn] r2745 - branches
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2732">[ date ]</a>
              <a href="thread.html#2732">[ thread ]</a>
              <a href="subject.html#2732">[ subject ]</a>
              <a href="author.html#2732">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: araber95
Date: 2010-08-17 23:53:20 +0200 (Tue, 17 Aug 2010)
New Revision: 2744

Modified:
   trunk/
   trunk/res_noewe/templates/Short documentation for the export via templates.htm
   trunk/src/CacheWolf/AttributesSelector.java
   trunk/src/CacheWolf/DetailsPanel.java
   trunk/src/CacheWolf/NotesScreen.java
   trunk/src/CacheWolf/exp/HTMLExporter.java
   trunk/src/CacheWolf/exp/TPLExporter.java
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
Commit for moving RC 1.2 to branch


Property changes on: trunk
___________________________________________________________________
Modified: svn:ignore
   - published
.project
.settings
work
CacheWolf

   + .project
.settings
CacheWolf
bin
published
work


Modified: trunk/res_noewe/templates/Short documentation for the export via templates.htm
===================================================================
--- trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-08-17 17:32:01 UTC (rev 2743)
+++ trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-08-17 21:53:20 UTC (rev 2744)
@@ -36,14 +36,14 @@
 	mso-font-charset:0;
 	mso-generic-font-family:swiss;
 	mso-font-pitch:variable;
-	mso-font-signature:536902279 -2147483648 8 0 511 0;}
+	mso-font-signature:-536855809 -1073711037 9 0 511 0;}
 @font-face
 	{font-family:Tahoma;
 	panose-1:2 11 6 4 3 5 4 4 2 4;
 	mso-font-charset:0;
 	mso-generic-font-family:swiss;
 	mso-font-pitch:variable;
-	mso-font-signature:1627421319 -2147483648 8 0 66047 0;}
+	mso-font-signature:-520078593 -1073717157 41 0 66047 0;}
  /* Style Definitions */
  p.MsoNormal, li.MsoNormal, div.MsoNormal
 	{mso-style-parent:&quot;&quot;;
@@ -203,8 +203,8 @@
 &lt;&lt;span class=SpellE&gt;tmpl_par&lt;/span&gt; name=&quot;&lt;span class=SpellE&gt;WaypointLength&lt;/span&gt;&quot;
 value=&quot;3&quot;&gt;&lt;span style='mso-tab-count:3'&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/span&gt;Number
 of characters for Variable SHORTWAYPOINT&lt;br&gt;
-&lt;&lt;span class=SpellE&gt;tmpl_par&lt;/span&gt; name=&quot;Out&quot; value=&quot;*.&lt;span
-class=SpellE&gt;gpx&lt;/span&gt;&quot;&gt;&lt;span style='mso-tab-count:4'&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/span&gt;Output
+&lt;&lt;span class=SpellE&gt;tmpl_par&lt;/span&gt; name=&quot;Out&quot; value=&quot;.&lt;span
+class=SpellE&gt;gpx&lt;/span&gt;&quot;&gt;&lt;span style='mso-tab-count:4'&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/span&gt;Output
 Filename or Extension&lt;br&gt;
 &lt;&lt;span class=SpellE&gt;tmpl_par&lt;/span&gt; name=&quot;&lt;span class=SpellE&gt;NrLogs&lt;/span&gt;
 &quot; value=&quot;-1&quot;&gt;&lt;span style='mso-tab-count:4'&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/span&gt;&lt;span
@@ -217,7 +217,16 @@
 value=&quot;0&quot;&gt;&lt;span style='mso-tab-count:1'&gt;&#160;&#160;&#160;&#160;&#160; &lt;/span&gt;&lt;span
 style='mso-tab-count:2'&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/span&gt;0 is xml as &lt;span
 class=SpellE&gt;gpx&lt;/span&gt; generation before, 1 is html like &lt;span class=SpellE&gt;showCacheInBrowser&lt;/span&gt;,
-2 is html like html-exporter&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
+2 is html like html-exporter&lt;br&gt;
+&lt;&lt;span class=SpellE&gt;tmpl_par&lt;/span&gt; name=&quot;&lt;span class=SpellE&gt;takeOnlyWp&lt;/span&gt;&quot;
+value=&quot;&lt;span class=SpellE&gt;addi&lt;/span&gt;&quot;&gt;&lt;span style='mso-tab-count:
+1'&gt;&#160;&#160;&#160; &lt;/span&gt;&lt;span style='mso-tab-count:2'&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/span&gt;process
+only this &lt;span class=SpellE&gt;Cachetypegroups&lt;/span&gt; value is either &#147;main&#148; or &#147;&lt;span
+class=SpellE&gt;addi&lt;/span&gt;&#148; else both is assumed&lt;br&gt;
+&lt;&lt;span class=SpellE&gt;tmpl_par&lt;/span&gt; name=&quot;input*&quot; value=&quot;default&quot;&gt;&lt;span
+style='mso-tab-count:1'&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/span&gt;&lt;span style='mso-tab-count:2'&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/span&gt;calls
+input with a &#147;default&#148; value and makes a &lt;span class=SpellE&gt;tmpl_var&lt;/span&gt;
+with the name * (* is placeholder)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
 
 &lt;p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
 mso-outline-level:1'&gt;&lt;u&gt;&lt;span lang=EN-GB style='font-size:10.0pt;font-family:
@@ -457,7 +466,7 @@
 IMG&lt;span style='mso-tab-count:9'&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/span&gt;:
 Name des &lt;span class=SpellE&gt;Addi&lt;/span&gt; Icons &lt;span class=SpellE&gt;png&lt;/span&gt;
 (resources &lt;span class=SpellE&gt;oder&lt;/span&gt; &lt;span class=SpellE&gt;exporticons&lt;/span&gt;)&lt;br&gt;
-ICON&lt;span style='mso-tab-count:1'&gt;&#160;&#160;&#160; &lt;/span&gt;&lt;span style='mso-tab-count:8'&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/span&gt;:
+ICON&lt;span style='mso-tab-count:9'&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/span&gt;:
 &lt;type&gt; as number string (see &lt;span class=SpellE&gt;CacheType.java&lt;/span&gt; &lt;span
 class=SpellE&gt;e.g&lt;/span&gt; : &#133;,50=Parking &#133;.)&lt;br&gt;
 &lt;/span&gt;&lt;span style='font-size:10.0pt;font-family:Arial'&gt;TYPENAME&lt;span
@@ -473,8 +482,7 @@
 Beschreibungstext f&#252;r den Addi&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
 
 &lt;p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
-mso-outline-level:1'&gt;&lt;span lang=EN-GB style='font-size:10.0pt;font-family:Arial;
-mso-ansi-language:EN-GB'&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
+mso-outline-level:1'&gt;&lt;span style='font-size:10.0pt;font-family:Arial'&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
 
 &lt;p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
 mso-outline-level:1'&gt;&lt;span lang=EN-GB style='font-size:10.0pt;font-family:Arial;
@@ -553,8 +561,8 @@
 &lt;TMPL_VAR name=&quot;&lt;span class=SpellE&gt;var_name&lt;/span&gt;&quot;
 default=&quot;my value&quot;&gt;&lt;br&gt;
 If &lt;span class=SpellE&gt;var_name&lt;/span&gt; is set using &lt;span class=SpellE&gt;setParam&lt;/span&gt;
-(or &lt;span class=SpellE&gt;setParams&lt;/span&gt;), then it's value will be whatever it
-was set to&lt;span class=GramE&gt;,&lt;span style='mso-spacerun:yes'&gt;&#160; &lt;/span&gt;else&lt;/span&gt;&lt;/span&gt;&lt;span
+(or &lt;span class=SpellE&gt;setParams&lt;/span&gt;), then it's value will be whatever it was
+set to&lt;span class=GramE&gt;,&lt;span style='mso-spacerun:yes'&gt;&#160; &lt;/span&gt;else&lt;/span&gt;&lt;/span&gt;&lt;span
 lang=EN-GB style='mso-ansi-language:EN-GB'&gt; &lt;/span&gt;&lt;span lang=EN-GB
 style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'&gt;it will be
 &quot;my value&quot; (without the quotes).&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
@@ -581,8 +589,8 @@
 special characters in URL, e.g. space becomes %20&lt;br&gt;
 &lt;/span&gt;&lt;span lang=EN-GB style='mso-ansi-language:EN-GB'&gt;&nbsp; &lt;/span&gt;&lt;span
 lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'&gt;quote:&nbsp;
-Change quotation marks:&nbsp;&nbsp; &quot; becomes \&quot;&nbsp; and ' becomes \'&lt;br
-style='mso-special-character:line-break'&gt;
+Change quotation marks:&nbsp;&nbsp; &quot; becomes \&quot;&nbsp; and ' becomes
+\'&lt;br style='mso-special-character:line-break'&gt;
 &lt;![if !supportLineBreakNewLine]&gt;&lt;br style='mso-special-character:line-break'&gt;
 &lt;![endif]&gt;&lt;/span&gt;&lt;span lang=EN-GB style='mso-ansi-language:EN-GB'&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
 
@@ -695,8 +703,8 @@
 mso-outline-level:1'&gt;&lt;st1:place&gt;&lt;u&gt;&lt;span lang=EN-GB style='font-size:10.0pt;
  font-family:Arial;mso-ansi-language:EN-GB'&gt;Loop&lt;/span&gt;&lt;/u&gt;&lt;/st1:place&gt;&lt;u&gt;&lt;span
 lang=EN-GB style='mso-ansi-language:EN-GB'&gt; &lt;/span&gt;&lt;/u&gt;&lt;u&gt;&lt;span lang=EN-GB
-style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'&gt;context variables&lt;/span&gt;&lt;/u&gt;&lt;u&gt;&lt;span
-lang=EN-GB style='mso-ansi-language:EN-GB'&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/u&gt;&lt;/p&gt;
+style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'&gt;context
+variables&lt;/span&gt;&lt;/u&gt;&lt;u&gt;&lt;span lang=EN-GB style='mso-ansi-language:EN-GB'&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/u&gt;&lt;/p&gt;
 
 &lt;p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'&gt;&lt;span
 lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'&gt;If

Modified: trunk/src/CacheWolf/AttributesSelector.java
===================================================================
--- trunk/src/CacheWolf/AttributesSelector.java	2010-08-17 17:32:01 UTC (rev 2743)
+++ trunk/src/CacheWolf/AttributesSelector.java	2010-08-17 21:53:20 UTC (rev 2744)
@@ -6,6 +6,7 @@
 import ewe.fx.mImage;
 import ewe.graphics.AniImage;
 import ewe.graphics.InteractivePanel;
+import ewe.sys.Vm;
 import ewe.ui.CellConstants;
 import ewe.ui.DataChangeEvent;
 import ewe.ui.Panel;

Modified: trunk/src/CacheWolf/DetailsPanel.java
===================================================================
--- trunk/src/CacheWolf/DetailsPanel.java	2010-08-17 17:32:01 UTC (rev 2743)
+++ trunk/src/CacheWolf/DetailsPanel.java	2010-08-17 21:53:20 UTC (rev 2744)
@@ -495,8 +495,7 @@
             if (ev.target == btnNotes) {
                 dirtyNotes = true; // TODO I think this is redundant, because
                                     // the notes are saved separately by the notes screen itself
-                final NotesScreen nsc = new NotesScreen(cache
-                        .getCacheDetails(true));
+                final NotesScreen nsc = new NotesScreen(cache.getCacheDetails(true));
                 nsc.execute(this.getFrame(), Gui.CENTER_FRAME);
                 if (isBigScreen) {
                     waypointNotes.setText(cache.getCacheDetails(true).getCacheNotes());

Modified: trunk/src/CacheWolf/NotesScreen.java
===================================================================
--- trunk/src/CacheWolf/NotesScreen.java	2010-08-17 17:32:01 UTC (rev 2743)
+++ trunk/src/CacheWolf/NotesScreen.java	2010-08-17 21:53:20 UTC (rev 2744)
@@ -8,13 +8,12 @@
 *	Class ID=
 */
 public class NotesScreen extends Form{
-	// mTextPad wayNotes = new mTextPad();
-	mInput wayNotes = new mInput();
+	mTextPad wayNotes = new mTextPad();
 	CacheHolderDetail chD = null;
 	mButton addDateTime;
 	mButton btSave = new mButton(MyLocale.getMsg(127,&quot;Save&quot;));
 	mButton cancelBtn = new mButton(&quot;Cancel&quot;);
-	// ScrollBarPanel sbp = new MyScrollBarPanel(wayNotes);
+	ScrollBarPanel sbp = new MyScrollBarPanel(wayNotes);
 	
 	public NotesScreen(CacheHolderDetail ch){
 		String imagesize = &quot;&quot;;
@@ -26,7 +25,7 @@
 		this.resizeOnSIP = true;
 		chD = ch;
 		wayNotes.setText(chD.getCacheNotes());
-		addLast(wayNotes.setTag(CellConstants.SPAN, new Dimension(3,1)),CellConstants.STRETCH, (CellConstants.FILL|CellConstants.WEST));
+		addLast(sbp.setTag(CellConstants.SPAN, new Dimension(3,1)),CellConstants.STRETCH, (CellConstants.FILL|CellConstants.WEST));
 		titleControls=new CellPanel();
 		titleControls.addNext(addDateTime,CellConstants.HSTRETCH,CellConstants.HFILL);
 		titleControls.addNext(cancelBtn,CellConstants.HSTRETCH,CellConstants.HFILL);

Modified: trunk/src/CacheWolf/exp/HTMLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/HTMLExporter.java	2010-08-17 17:32:01 UTC (rev 2743)
+++ trunk/src/CacheWolf/exp/HTMLExporter.java	2010-08-17 21:53:20 UTC (rev 2744)
@@ -276,7 +276,7 @@
 		PrintWriter detfile;
 
 		list.sort(new HTMLComparer(field),false);
-		navi_index = addAnchorString(list,field, fullCompare);
+		navi_index = addAnchorString(list, field, fullCompare);
 		if (navi_index != null){
 			tmpl.setParam(&quot;navi_index&quot;,navi_index);
 		}

Modified: trunk/src/CacheWolf/exp/TPLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/TPLExporter.java	2010-08-17 17:32:01 UTC (rev 2743)
+++ trunk/src/CacheWolf/exp/TPLExporter.java	2010-08-17 21:53:20 UTC (rev 2744)
@@ -28,6 +28,7 @@
 import CacheWolf.CacheDB;
 import CacheWolf.CacheHolder;
 import CacheWolf.Global;
+import CacheWolf.InfoBox;
 import CacheWolf.Preferences;
 import CacheWolf.Profile;
 import HTML.Template;
@@ -56,6 +57,10 @@
 	int noOfLogs=-1; // means all
 	boolean single = true;
 	int formatModifier = 0;
+	boolean getAddiWp = true;
+	boolean getMainWp = true;
+	Hashtable input = new Hashtable();
+	String userValue = &quot;&quot;;
 	String out=&quot;*.gpx&quot;;
 
 
@@ -81,46 +86,59 @@
 			rex1.search(t);
 			param = rex1.stringMatched(1);
 			value = rex1.stringMatched(2);
-			//Vm.debug(&quot;param=&quot; + param + &quot;\nvalue=&quot; + value);
-			//clear t, because we allow only one parameter per line
-			t = &quot;&quot;;
+			// t=&quot;&quot;;
 
-			// get the values
 			if (param.equals(&quot;charset&quot;)) {
 				if (value.equals(&quot;ASCII&quot;)) {codec = new AsciiCodec();}
 				else if (value.equals(&quot;UTF8&quot;)) {codec = new JavaUtf8Codec();}
 				else {codec = new NoCodec();}
 			}
-			if (param.equals(&quot;badchars&quot;)) {
+			else if (param.equals(&quot;badchars&quot;)) {
 				badChars = value;
 			}
-			if (param.equals(&quot;newline&quot;)){
+			else if (param.equals(&quot;newline&quot;)){
 				newLine = &quot;&quot;;
 				if (value.indexOf(&quot;CR&quot;) &gt;= 0) newLine += &quot;\r&quot;;
 				if (value.indexOf(&quot;LF&quot;) &gt;= 0) newLine += &quot;\n&quot;;
 			}
-			if (param.equals(&quot;decsep&quot;)) {
+			else if (param.equals(&quot;decsep&quot;)) {
 				decSep = value;
 			}
-			if (param.equals(&quot;ShortNameLength&quot;)) {
+			else if (param.equals(&quot;ShortNameLength&quot;)) {
 				shortNameLength = Integer.valueOf(value).intValue();
 			}
-			if (param.equals(&quot;WaypointLength&quot;)) {
+			else if (param.equals(&quot;WaypointLength&quot;)) {
 				shortWaypointLength = Integer.valueOf(value).intValue();
 			}
-			if (param.equals(&quot;NrLogs&quot;)) {
+			else if (param.equals(&quot;NrLogs&quot;)) {
 				noOfLogs = Integer.valueOf(value).intValue();
 			}
-			if (param.equals(&quot;singleFile&quot;)) {
+			else if (param.equals(&quot;singleFile&quot;)) {
 				single = value.equals(&quot;yes&quot;) ? true : false ;
 			}
-			if (param.equals(&quot;formatModifier&quot;)) {
+			else if (param.equals(&quot;formatModifier&quot;)) {
 				formatModifier = Integer.valueOf(value).intValue();
 			}
-			if (param.equals(&quot;Out&quot;)) {
+			else if (param.equals(&quot;Out&quot;)) {
 				out = value;
 			}
-
+			else if (param.equals(&quot;takeOnlyWp&quot;)) {
+				if (value.equals(&quot;main&quot;)) {
+					getAddiWp=false;
+				}
+				else if (value.equals(&quot;addi&quot;)) {
+					getMainWp=false;
+				}
+			}
+			else if (param.startsWith(&quot;input&quot;)) {
+				String par = param.substring(5);
+				InfoBox inf = new InfoBox(&quot;Eingabe&quot;, par, InfoBox.INPUT);
+				inf.feedback.setText(value);
+				inf.execute();
+				String res = inf.getInput();
+				input.put(par,res);
+			}
+			return &quot;&quot;;
 		}
 
 		if (formatModifier == 0) {
@@ -206,27 +224,29 @@
 			Vector cache_index = new Vector(); 			
 			for(int i = 0; i&lt;counter;i++){
 				CacheHolder ch = cacheDB.get(i);
-				h.progress = (float)i/(float)counter;
-				h.changed();
-				if(ch.isVisible() &amp;&amp; ch.pos.isValid()){
-					try {
-						Hashtable varParams=ch.toHashtable(dec, rex, myFilter.shortWaypointLength, myFilter.shortNameLength, myFilter.noOfLogs, myFilter.codec, gm, false, myFilter.formatModifier);
-						if (myFilter.single) {
-							cache_index.add(varParams);
+				if (ch.isVisible() &amp;&amp; (ch.pos.isValid() || myFilter.formatModifier&gt;0) ){
+					if (myFilter.getAddiWp == ch.isAddiWpt() || myFilter.getMainWp == !ch.isAddiWpt()) {
+						h.progress = (float)i/(float)counter;
+						h.changed();
+						try {
+							Hashtable varParams=ch.toHashtable(dec, rex, myFilter.shortWaypointLength, myFilter.shortNameLength, myFilter.noOfLogs, myFilter.codec, gm, false, myFilter.formatModifier);
+							if (myFilter.single) {
+								cache_index.add(varParams);
+							}
+							else {
+								tpl.setParams(varParams);
+								String ext = (myFilter.out.substring(myFilter.out.lastIndexOf(&quot;.&quot;)).toLowerCase()+&quot;    &quot;).trim();
+								FileWriter fw = new FileWriter(saveTo.getPath() + ch.getWayPoint() + ext);
+								fw.codec = myFilter.codec;
+								PrintWriter detfile = new PrintWriter(new BufferedWriter(fw));
+								tpl.printTo(detfile);
+								detfile.close();
+							}
+						}catch(Exception e){
+							Vm.debug(&quot;Problem getting Parameter, Cache: &quot; + ch.getWayPoint());
+							e.printStackTrace();
+							Global.getPref().log(&quot;Exception in TplExporter = Problem getting Parameter, Cache: &quot; + ch.getWayPoint(), e, true);
 						}
-						else {
-							tpl.setParams(varParams);
-							String ext = (myFilter.out.substring(myFilter.out.lastIndexOf(&quot;.&quot;)).toLowerCase()+&quot;    &quot;).trim();
-							FileWriter fw = new FileWriter(saveTo.getPath() + ch.getWayPoint() + ext);
-							fw.codec = myFilter.codec;
-							PrintWriter detfile = new PrintWriter(new BufferedWriter(fw));
-							tpl.printTo(detfile);
-							detfile.close();
-						}
-					}catch(Exception e){
-						Vm.debug(&quot;Problem getting Parameter, Cache: &quot; + ch.getWayPoint());
-						e.printStackTrace();
-						Global.getPref().log(&quot;Exception in TplExporter = Problem getting Parameter, Cache: &quot; + ch.getWayPoint(), e, true);
 					}
 				}
 			}

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-08-17 17:32:01 UTC (rev 2743)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-08-17 21:53:20 UTC (rev 2744)
@@ -1264,7 +1264,7 @@
 						//==========
 						// Logs first (for check early for break)
 						//==========
-						ch.getCacheDetails(false).setCacheLogs(getLogs(completeWebPage, ch.getCacheDetails(false)));
+						getLogs(completeWebPage, ch.getCacheDetails(false));
 						pref.log(&quot;Got logs&quot;);
 						// If the switch is set to not store found caches and we found the cache =&gt; return
 						if (ch.is_found() &amp;&amp; doNotGetFound) {
@@ -1279,8 +1279,9 @@
 						//==========
 						ch.setLatLon(latLon);
 						pref.log(&quot;LatLon: &quot; + ch.getLatLon());
-
-						ch.getCacheDetails(false).setLongDescription(getLongDesc(completeWebPage));
+						
+						String longDesc=getLongDesc(completeWebPage);
+						ch.getCacheDetails(false).setLongDescription(longDesc);
 						pref.log(&quot;Got description&quot;);
 
 						ch.setCacheName(SafeXML.cleanback(getName(completeWebPage)));
@@ -1570,13 +1571,13 @@
 	 * @param chD Cache Details
 	 * @return A HTML string containing the logs
 	 */
-	private LogList getLogs(String completeWebPage, CacheHolderDetail chD) throws Exception {
+	private void getLogs(String completeWebPage, CacheHolderDetail chD) throws Exception {
 		String icon = &quot;&quot;;
 		String name = &quot;&quot;;
 		String logText = &quot;&quot;;
 		String logId = &quot;&quot;;
 		String singleLog = &quot;&quot;;
-		LogList reslts = new LogList();
+		LogList reslts = chD.CacheLogs;
 		RexLogBlock.search(completeWebPage);
 		if (!RexLogBlock.didMatch()) {
 			pref.log(&quot;check blockRex in spider.def\n&quot;+completeWebPage);			
@@ -1628,7 +1629,7 @@
 			//pref.log(&quot;MAXLOGS reached (&quot;+pref.maxLogsToSpider+&quot;)&quot;);
 		} 
 		//pref.log(nLogs+&quot; checked!&quot;);
-		return reslts;
+		// return reslts;
 	}
 
 	/**


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002731.html">[Cachewolf-svn] r2743 - trunk/src/CacheWolf
</A></li>
	<LI>Next message: <A HREF="002733.html">[Cachewolf-svn] r2745 - branches
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2732">[ date ]</a>
              <a href="thread.html#2732">[ thread ]</a>
              <a href="subject.html#2732">[ subject ]</a>
              <a href="author.html#2732">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">More information about the Cachewolf-svn
mailing list</a><br>
</body></html>
