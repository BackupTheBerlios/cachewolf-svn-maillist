From pfeffer at mail.berlios.de  Mon Mar  1 21:43:25 2010
From: pfeffer at mail.berlios.de (pfeffer at mail.berlios.de)
Date: Mon, 1 Mar 2010 21:43:25 +0100
Subject: [Cachewolf-svn] r2500 - in trunk/tools: . ratinggetter
	ratinggetter/linux
Message-ID: <201003012043.o21KhPQI026583@sheep.berlios.de>

Author: pfeffer
Date: 2010-03-01 21:43:24 +0100 (Mon, 01 Mar 2010)
New Revision: 2500

Added:
   trunk/tools/ratinggetter/
   trunk/tools/ratinggetter/linux/
   trunk/tools/ratinggetter/linux/gcvote.sh
Log:
tools: ratinggetter for linux

Added: trunk/tools/ratinggetter/linux/gcvote.sh
===================================================================
--- trunk/tools/ratinggetter/linux/gcvote.sh	2010-02-25 14:52:04 UTC (rev 2499)
+++ trunk/tools/ratinggetter/linux/gcvote.sh	2010-03-01 20:43:24 UTC (rev 2500)
@@ -0,0 +1,10 @@
+#!/bin/bash
+# syntax: gcvote waypoint
+# get the rating of the cache associated with waypoint
+# waypoint is the code of the geocache staring with GCxxxx
+# Rating from gcvote is returned as exit value
+# by  Teleskopix / www.geoclub.de
+# copyright: General Public License (GPL)
+AVG=$(wget http://gcvote.de/getVotes.php?waypoints=$1 -O - -o /dev/null | grep voteAvg | sed -e 's/^.*voteAvg\=.\(.*\).\ voteCnt.*$/\1/g')
+RET=$(echo "scale=0;$AVG*10" | bc | sed -e 's/\..*//g')
+exit $(($RET))



From araber95 at mail.berlios.de  Thu Mar  4 09:57:30 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Thu, 4 Mar 2010 09:57:30 +0100
Subject: [Cachewolf-svn] r2503 - trunk/src/CacheWolf
Message-ID: <201003040857.o248vUK1001486@sheep.berlios.de>

Author: araber95
Date: 2010-03-04 09:57:29 +0100 (Thu, 04 Mar 2010)
New Revision: 2503

Modified:
   trunk/src/CacheWolf/DetailsPanel.java
Log:
the other way round missing : removing setting "found"

Modified: trunk/src/CacheWolf/DetailsPanel.java
===================================================================
--- trunk/src/CacheWolf/DetailsPanel.java	2010-03-04 08:29:19 UTC (rev 2502)
+++ trunk/src/CacheWolf/DetailsPanel.java	2010-03-04 08:57:29 UTC (rev 2503)
@@ -731,6 +731,7 @@
 		} else {
 			cache.setCacheStatus(chcStatus.getText());
 		}
+		
 		if (chcStatus.getText().startsWith(MyLocale.getMsg(318, "Found")) ||
 			chcStatus.getText().startsWith(MyLocale.getMsg(355, "Attended")) ||
 			(cache.getCacheStatus().length() == 10 || cache.getCacheStatus().length() == 16) &&
@@ -740,7 +741,9 @@
 			// cache
 			// has to considered as found.
 			cache.setFound(true);
-		} 
+		}
+		else cache.setFound(false);
+		
 		if (!cache.isAddiWpt()) {
 			cache.setCacheOwner(inpOwner.getText().trim());
 		}



From araber95 at mail.berlios.de  Thu Mar  4 09:29:26 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Thu, 4 Mar 2010 09:29:26 +0100
Subject: [Cachewolf-svn] r2502 - in trunk/src/CacheWolf: . exp imp navi
Message-ID: <201003040829.o248TQMF031485@sheep.berlios.de>

Author: araber95
Date: 2010-03-04 09:29:19 +0100 (Thu, 04 Mar 2010)
New Revision: 2502

Modified:
   trunk/src/CacheWolf/CacheHolderDetail.java
   trunk/src/CacheWolf/DateFormat.java
   trunk/src/CacheWolf/GeoCodeGui.java
   trunk/src/CacheWolf/MainForm.java
   trunk/src/CacheWolf/exp/TPLExporter.java
   trunk/src/CacheWolf/exp/TomTomExporter.java
   trunk/src/CacheWolf/imp/SpiderGC.java
   trunk/src/CacheWolf/myTableControl.java
   trunk/src/CacheWolf/navi/CWGPSPoint.java
Log:
nothing of interest, only nice, but disturbes me at the moment!

Modified: trunk/src/CacheWolf/CacheHolderDetail.java
===================================================================
--- trunk/src/CacheWolf/CacheHolderDetail.java	2010-03-03 23:23:46 UTC (rev 2501)
+++ trunk/src/CacheWolf/CacheHolderDetail.java	2010-03-04 08:29:19 UTC (rev 2502)
@@ -115,7 +115,7 @@
 			 Travelbug tb=newCh.Travelbugs.getTB(i);  
 		     Travelbug oldTB=this.Travelbugs.find(tb.getName());
 		     // If the bug is already in the cache, we keep it
-		     if (oldTB!=null)
+		     if (oldTB != null)
 		    	 newCh.Travelbugs.replace(i,oldTB);
 		    
 		  }
@@ -235,7 +235,7 @@
 			ex = new Extractor(dummy, "<LOG>","</LOG>", 0, true);
 			
 			dummy = ex.findNext();
-			while(ex.endOfSearch()==false){
+			while(!ex.endOfSearch()){
 				CacheLogs.add(new Log(dummy));
 				dummy = ex.findNext();
 			}
@@ -244,7 +244,7 @@
 			images.clear();
 			ex = new Extractor(text, "<IMG>", "</IMG>", 0, true);
 			dummy = ex.findNext();
-			while(ex.endOfSearch() == false){
+			while(!ex.endOfSearch()){
 				imageInfo = new ImageInfo();
 				int pos=dummy.indexOf("<URL>");
 				if (pos>0) {
@@ -259,7 +259,7 @@
 			ex = new Extractor(text, "<IMGTEXT>", "</IMGTEXT>", 0, true);
 			dummy = ex.findNext();
 			int imgNr = 0;
-			while(ex.endOfSearch() == false){
+			while(!ex.endOfSearch()){
 				if (imgNr >= this.images.size()) {
 					images.add(new ImageInfo()); // this (more IMGTEXT than IMG in the <cache>.xml, but it happens. So avoid an ArrayIndexOutOfBoundException and add an ImageInfo gracefully
 					Global.getPref().log("Error reading " + this.getParent().getWayPoint() + "More IMGTEXT tags than IMG tags");
@@ -279,7 +279,7 @@
 			logImages.clear();
 			ex = new Extractor(text, "<LOGIMG>", "</LOGIMG>", 0, true);
 			dummy = ex.findNext();
-			while(ex.endOfSearch() == false){
+			while(!ex.endOfSearch()){
 				imageInfo = new ImageInfo();
 				imageInfo.setFilename(dummy);
 				logImages.add(imageInfo);
@@ -288,7 +288,7 @@
 			ex = new Extractor(text, "<LOGIMGTEXT>", "</LOGIMGTEXT>", 0, true);
 			dummy = ex.findNext();
 			imgNr = 0;
-			while(ex.endOfSearch() == false){
+			while(!ex.endOfSearch()){
 				imageInfo = logImages.get(imgNr++);
 				imageInfo.setTitle(dummy);
 				dummy = ex.findNext();
@@ -297,7 +297,7 @@
 			userImages.clear();
 			ex = new Extractor(text, "<USERIMG>", "</USERIMG>", 0, true);
 			dummy = ex.findNext();
-			while(ex.endOfSearch() == false){
+			while(!ex.endOfSearch()){
 				imageInfo = new ImageInfo();
 				imageInfo.setFilename(dummy);
 				userImages.add(imageInfo);
@@ -306,7 +306,7 @@
 			ex = new Extractor(text, "<USERIMGTEXT>", "</USERIMGTEXT>", 0, true);
 			dummy = ex.findNext();
 			imgNr = 0;
-			while(ex.endOfSearch() == false){
+			while(!ex.endOfSearch()){
 				imageInfo = userImages.get(imgNr++);
 				imageInfo.setTitle(dummy);
 				dummy = ex.findNext();
@@ -476,15 +476,15 @@
 				String filename = images.get(i).getFilename();
 				String comment = images.get(i).getComment();
 				String title = images.get(i).getTitle();
-				if (filename.indexOf(getParent().getWayPoint())==0) {
+				if (filename.indexOf(getParent().getWayPoint()) == 0) {
 					filename=newWptId.concat(filename.substring(oldWptLength));
 					images.get(i).setFilename(filename);
 				}
-				if (comment.indexOf(getParent().getWayPoint())==0) {
+				if (comment.indexOf(getParent().getWayPoint()) == 0) {
 					comment=newWptId.concat(comment.substring(oldWptLength));
 					images.get(i).setComment(comment);
 				}
-				if (title.indexOf(getParent().getWayPoint())==0) {
+				if (title.indexOf(getParent().getWayPoint()) == 0) {
 					title=newWptId.concat(title.substring(oldWptLength));
 					images.get(i).setTitle(title);
 				}
@@ -493,15 +493,15 @@
 				String filename = logImages.get(i).getFilename();
 				String comment = logImages.get(i).getComment();
 				String title = logImages.get(i).getTitle();
-				if (filename.indexOf(getParent().getWayPoint())==0) {
+				if (filename.indexOf(getParent().getWayPoint()) == 0) {
 					filename=newWptId.concat(filename.substring(oldWptLength));
 					logImages.get(i).setFilename(filename);
 				}
-				if (comment.indexOf(getParent().getWayPoint())==0) {
+				if (comment.indexOf(getParent().getWayPoint()) == 0) {
 					comment=newWptId.concat(comment.substring(oldWptLength));
 					logImages.get(i).setComment(comment);
 				}
-				if (title.indexOf(getParent().getWayPoint())==0) {
+				if (title.indexOf(getParent().getWayPoint()) == 0) {
 					title=newWptId.concat(title.substring(oldWptLength));
 					logImages.get(i).setTitle(title);
 				}
@@ -510,15 +510,15 @@
 				String filename = userImages.get(i).getFilename();
 				String comment = userImages.get(i).getComment();
 				String title = userImages.get(i).getTitle();
-				if (filename.indexOf(getParent().getWayPoint())==0) {
+				if (filename.indexOf(getParent().getWayPoint()) == 0) {
 					filename=newWptId.concat(filename.substring(oldWptLength));
 					userImages.get(i).setFilename(filename);
 				}
-				if (comment.indexOf(getParent().getWayPoint())==0) {
+				if (comment.indexOf(getParent().getWayPoint()) == 0) {
 					comment=newWptId.concat(comment.substring(oldWptLength));
 					userImages.get(i).setComment(comment);
 				}
-				if (title.indexOf(getParent().getWayPoint())==0) {
+				if (title.indexOf(getParent().getWayPoint()) == 0) {
 					title=newWptId.concat(title.substring(oldWptLength));
 					userImages.get(i).setTitle(title);
 				}

Modified: trunk/src/CacheWolf/DateFormat.java
===================================================================
--- trunk/src/CacheWolf/DateFormat.java	2010-03-03 23:23:46 UTC (rev 2501)
+++ trunk/src/CacheWolf/DateFormat.java	2010-03-04 08:29:19 UTC (rev 2502)
@@ -10,7 +10,6 @@
 
 import ewe.sys.Convert;
 import ewe.sys.Time;
-import ewe.util.mString;
 
 public class DateFormat {
 

Modified: trunk/src/CacheWolf/GeoCodeGui.java
===================================================================
--- trunk/src/CacheWolf/GeoCodeGui.java	2010-03-03 23:23:46 UTC (rev 2501)
+++ trunk/src/CacheWolf/GeoCodeGui.java	2010-03-04 08:29:19 UTC (rev 2502)
@@ -15,7 +15,6 @@
 import ewe.ui.mButton;
 import ewe.ui.mInput;
 import ewe.ui.mLabel;
-import ewe.util.ByteArray;
 import ewe.util.Vector;
 import ewesoft.xml.sax.SAXException;
 

Modified: trunk/src/CacheWolf/MainForm.java
===================================================================
--- trunk/src/CacheWolf/MainForm.java	2010-03-03 23:23:46 UTC (rev 2501)
+++ trunk/src/CacheWolf/MainForm.java	2010-03-04 08:29:19 UTC (rev 2502)
@@ -63,7 +63,7 @@
 			if (MyLocale.initErrors.length() != 0) {
 				new MessageBox("Error", MyLocale.initErrors, FormBase.OKB).execute();
 			}
-			if(Vm.isMobile() == true) {
+			if(Vm.isMobile()) {
 				//this.windowFlagsToSet |=Window.FLAG_FULL_SCREEN;
 				this.resizable = false;
 				this.moveable = false;
@@ -92,11 +92,11 @@
 			pref.setCurCentrePt(profile.centre);
 			setTitle("Cachewolf "+Version.getRelease()+" - "+profile.name);
 		} catch (Exception e){
-			if(pref.debug == true) Vm.debug("MainForm:: Exception:: " + e.toString());
+			if(pref.debug) Vm.debug("MainForm:: Exception:: " + e.toString());
 		}
 
 
-		if(pref.fixSIP == true){
+		if(pref.fixSIP){
 			if (Gui.screenIs(Gui.PDA_SCREEN) && Vm.isMobile()) {
 				//Vm.setSIP(Vm.SIP_LEAVE_BUTTON|Vm.SIP_ON);
 				Vm.setParameter(Vm.SET_ALWAYS_SHOW_SIP_BUTTON,1);
@@ -152,7 +152,7 @@
 	}
 
 	public void onEvent(Event ev){ // Preferences have been changed by PreferencesScreen
-		if(pref.dirty == true){
+		if(pref.dirty){
 			mTab.getTablePanel().myMod.setColumnNamesAndWidths();
 			mTab.getTablePanel().refreshControl();
 		    //mTab.getTablePanel().refreshTable();

Modified: trunk/src/CacheWolf/exp/TPLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/TPLExporter.java	2010-03-03 23:23:46 UTC (rev 2501)
+++ trunk/src/CacheWolf/exp/TPLExporter.java	2010-03-04 08:29:19 UTC (rev 2502)
@@ -33,7 +33,6 @@
 import CacheWolf.CacheTerrDiff;
 import CacheWolf.CacheType;
 import CacheWolf.Global;
-import CacheWolf.MyLocale;
 import CacheWolf.Preferences;
 import CacheWolf.Profile;
 import CacheWolf.Common;

Modified: trunk/src/CacheWolf/exp/TomTomExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/TomTomExporter.java	2010-03-03 23:23:46 UTC (rev 2501)
+++ trunk/src/CacheWolf/exp/TomTomExporter.java	2010-03-04 08:29:19 UTC (rev 2502)
@@ -36,7 +36,7 @@
 
 		dirName = pref.getExportPath(expName);
 		
-		if (infoScreen.oneFilePerType()==true){
+		if (infoScreen.oneFilePerType()){
 			FileChooser fc = new FileChooser(FileChooserBase.DIRECTORY_SELECT, dirName);
 			fc.setTitle("Select target dir:");
 			if(fc.execute() == FormBase.IDCANCEL) return;
@@ -92,7 +92,7 @@
 				for(int i = 0; i<cacheDB.size(); i++){
 					holder=cacheDB.get(i);
 
-					if(holder.getType() == CacheType.guiSelect2Cw(j) && holder.isVisible() == true){
+					if(holder.getType() == CacheType.guiSelect2Cw(j) && holder.isVisible()){
 						currExp++;
 						h.progress = (float)currExp/(float)counter;
 						h.changed();

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-03-03 23:23:46 UTC (rev 2501)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-03-04 08:29:19 UTC (rev 2502)
@@ -172,7 +172,7 @@
 		this.profile=profile;
 		this.cacheDB = profile.cacheDB;
 		pref = prf;
-		if (p==null) {
+		if (p == null) {
 			pref.logInit();
 			p=new SpiderProperties();
 		}
@@ -198,7 +198,7 @@
 		// Reset states for all caches when spidering (http://tinyurl.com/dzjh7p)
 		for(int i = 0; i<cacheDB.size();i++){
 			ch = cacheDB.get(i);
-			if (ch.mainCache==null) ch.initStates(false);
+			if (ch.mainCache == null) ch.initStates(false);
 		}
 
 		if (!loggedIn || Global.getPref().forceLogin) {
@@ -250,7 +250,7 @@
 			profile.setMinDistGC(minDist);
 
 			String maxDist = options.maxDistanceInput.getText();
-			if (maxDist.length()== 0) return;
+			if (maxDist.length() ==  0) return;
 			maxDistance = Common.parseDouble(maxDist);
 			//save last radius to profile
 			distDouble.value = maxDistance;
@@ -287,8 +287,8 @@
 		// TODO maxUpdate in preferences ?
 
 		if (maxNew == 0) return;
-		if(maxNew==-1) maxNew=Integer.MAX_VALUE;
-		if(maxUpdate==-1) maxUpdate=Integer.MAX_VALUE;
+		if(maxNew == -1) maxNew=Integer.MAX_VALUE;
+		if(maxUpdate == -1) maxUpdate=Integer.MAX_VALUE;
 
 		boolean getImages = options.imagesCheckBox.getState();
 		boolean getTBs = options.travelbugsCheckBox.getState();
@@ -308,7 +308,7 @@
 		Hashtable cachesToUpdate = new Hashtable(cacheDB.size());
 		Hashtable cachesShouldUpdate = new Hashtable(cacheDB.size()); // for don't loose the already done work
 
-		if (maxUpdate==Integer.MAX_VALUE) {
+		if (maxUpdate == Integer.MAX_VALUE) {
 			double distanceInKm = maxDistance;
 			if ( Global.getPref().metricSystem == Metrics.IMPERIAL ) {
 				distanceInKm = Metrics.convertUnit(maxDistance, Metrics.MILES, Metrics.KILOMETER);
@@ -346,7 +346,7 @@
 			numFoundInDB=getFoundInDB();
 			numFinds=getNumFound(htmlListPage);
 			maxNew=java.lang.Math.min(numFinds-numFoundInDB,maxNew);
-			if (maxUpdate==0 && maxNew == 0) { Vm.showWait(false); infB.close(0); return; }
+			if (maxUpdate == 0 && maxNew == 0) { Vm.showWait(false); infB.close(0); return; }
 		}
 		try {
 			//Loop pages till maximum distance has been found or no more caches are in the list
@@ -379,7 +379,7 @@
 									if (!ch.is_black() && (cachesShouldUpdate.size()<maxUpdate)) cachesShouldUpdate.put(chWaypoint, ch);
 								}
 								else
-									if (maxUpdate==Integer.MAX_VALUE) cachesToUpdate.remove( chWaypoint );
+									if (maxUpdate == Integer.MAX_VALUE) cachesToUpdate.remove( chWaypoint );
 							}
 						}
 					} else maxDistance = 0; // finish listing
@@ -421,8 +421,8 @@
 		boolean loadAllLogs = (pref.maxLogsToSpider > 5) || spiderAllFinds;
 
 		int spiderErrors = 0;
-		if (cachesToUpdate.size()==startSize) cachesToUpdate.clear(); // there must be something wrong
-		if (cachesToUpdate.size()==0) cachesToUpdate=cachesShouldUpdate;
+		if (cachesToUpdate.size() == startSize) cachesToUpdate.clear(); // there must be something wrong
+		if (cachesToUpdate.size() == 0) cachesToUpdate=cachesShouldUpdate;
 
 		if ( cachesToUpdate.size() > 0 ) {
 			switch (pref.spiderUpdates) {
@@ -857,7 +857,7 @@
 			if (is_found_GC!=ch.is_found()) {ch.setFound(is_found_GC); save=true; ret=true;}
 		}
 		if (ch.is_found() && chd.OwnLogId.equals("")) {ret=true;} //missing ownLogID
-		boolean is_available_GC=!is_archived_GC && CacheDescription.indexOf(propAvailable)==-1;
+		boolean is_available_GC=!is_archived_GC && CacheDescription.indexOf(propAvailable) == -1;
 		if (is_available_GC != ch.is_available()) {
 			ch.setAvailable(is_available_GC); save=true; numAvailableUpdates+=1; ret=true;}
 		if (typeChanged(ch,CacheDescription)) { save=true; ret=true;}
@@ -883,7 +883,7 @@
 		int counter = 0;
 		for(int i = 0; i<cacheDB.size();i++){
 			ch = cacheDB.get(i);
-			if(ch.is_found() == true) {
+			if(ch.is_found()) {
 				if(ch.getWayPoint().startsWith("GC") ) counter++;
 			}
 		}
@@ -930,10 +930,10 @@
 		RexPropType.search(toCheck);
 		if(RexPropType.didMatch()) {
 			String stmp=RexPropType.stringMatched(1);
-			if (Common.parseInt(stmp)==0){
+			if (Common.parseInt(stmp) == 0){
 				if (stmp.equalsIgnoreCase("EarthCache")) stmp="137";
 			}
-			if(ch.getType()==CacheType.gcSpider2CwType(stmp))
+			if(ch.getType() == CacheType.gcSpider2CwType(stmp))
 				return false;
 				else {
 					ch.setType(CacheType.gcSpider2CwType(stmp));
@@ -949,7 +949,7 @@
 		RexPropSize.search(toCheck);
 		if(RexPropSize.didMatch()){
 			String stmp=RexPropSize.stringMatched(1);
-			if(ch.getCacheSize()==CacheSize.gcSpiderString2Cw(stmp))
+			if(ch.getCacheSize() == CacheSize.gcSpiderString2Cw(stmp))
 				return false;
 				else {
 					ch.setCacheSize(CacheSize.gcSpiderString2Cw(stmp));
@@ -966,12 +966,12 @@
 		RexPropDandT.search(toCheck);	
 		if(RexPropDandT.didMatch()){
 			String stmp=RexPropDandT.stringMatched(1);
-			if(!(ch.getHard()==CacheTerrDiff.v1Converter(stmp))) {
+			if(!(ch.getHard() == CacheTerrDiff.v1Converter(stmp))) {
 				ch.setHard(CacheTerrDiff.v1Converter(stmp));
 				ret=true;
 			}
 			stmp=RexPropDandT.stringMatched(2);
-			if(!(ch.getTerrain()==CacheTerrDiff.v1Converter(stmp))) {
+			if(!(ch.getTerrain() == CacheTerrDiff.v1Converter(stmp))) {
 				ch.setTerrain(CacheTerrDiff.v1Converter(stmp));
 				ret=true;
 			}
@@ -994,7 +994,7 @@
 	 * if cache lies in the desired direction
 	 */
 	private boolean directionOK(String[] directions, String gotDirection) {
-		if (directions.length==0) return true; // nothing means all
+		if (directions.length == 0) return true; // nothing means all
 		for (int i = 0; i < directions.length; i++) {
 			if (directions[i].equals(gotDirection)) {
 				return true;
@@ -1282,7 +1282,7 @@
 		Regex rex2 = new Regex(p.getProp("longDescRex"));
 		inRex.search(doc);
 		rex2.search(doc);
-		res = ((inRex.stringMatched(1)==null)?"":inRex.stringMatched(1)) + "<br>";
+		res = ((inRex.stringMatched(1) == null)?"":inRex.stringMatched(1)) + "<br>";
 		res += rex2.stringMatched(1);
 		int spanEnd = res.lastIndexOf("</span>");
 		if (spanEnd >= 0) {
@@ -1478,7 +1478,7 @@
 		String link,bug,linkPlusBug,bugDetails;
 		String oldInfoBox=infB.getInfo();
 		chD.Travelbugs.clear();
-		while(exBug.endOfSearch() == false){
+		while(!exBug.endOfSearch()){
 			if (infB.isClosed) break; // Allow user to cancel by closing progress form
 			linkPlusBug= exBug.findNext();
 			int idx=linkPlusBug.indexOf("\">");
@@ -1611,7 +1611,7 @@
 		} catch (Exception ex) { // Missing property in spider .def
 			return;
 		}
-		while(exImgSrc.endOfSearch() == false){
+		while(!exImgSrc.endOfSearch()){
 			imgUrl = exImgSrc.findNext();
 			imgComment = exImgComment.findNext();
 			//Vm.debug("Img Url: " +imgUrl);
@@ -1663,7 +1663,7 @@
 		//Final sweep to check for images in hrefs
 		//========
 		Extractor exFinal = new Extractor(longDesc, "http://", "\"", 0, true);
-		while(exFinal.endOfSearch() == false){
+		while(!exFinal.endOfSearch()){
 			imgUrl = exFinal.findNext();
 			if(imgUrl.length()>0){
 				// Optimize: img.groundspeak.com -> img.geocaching.com (for better caching purposes)
@@ -1681,7 +1681,7 @@
 							if (lastImages != null) {
 								imageInfo = lastImages.needsSpidering(imgUrl, fileName+imgType);
 							}
-							if (imageInfo == null) {
+							if (imageInfo==null) {
 								imageInfo = new ImageInfo();
 								pref.log("Loading image: " + imgUrl+" as "+fileName+imgType);
 								spiderImage(imgUrl, fileName+imgType);
@@ -1768,11 +1768,11 @@
 		Regex descRex = new Regex(p.getProp("descRex"));
 		Regex typeRex = new Regex(p.getProp("typeRex"));
 		int counter = 0;
-		if(exWayBlock.endOfSearch() == false && wayBlock.indexOf("No additional waypoints to display.")<0){
+		if(!exWayBlock.endOfSearch() && wayBlock.indexOf("No additional waypoints to display.")<0){
 			Extractor exRowBlock = new Extractor(wayBlock,p.getProp("rowBlockExStart"),p.getProp("rowBlockExEnd"), 0, false);
 			rowBlock = exRowBlock.findNext();
 			rowBlock = exRowBlock.findNext();
-			while(exRowBlock.endOfSearch()==false){
+			while(!exRowBlock.endOfSearch()){
 				CacheHolder hd = null;
 
 				String[] AddiBlock=mString.split(rowBlock,'\n');
@@ -1785,7 +1785,7 @@
 				String prefix=exPrefix.findNext();
 
 				String adWayPoint;
-				if (prefix.length()==2)
+				if (prefix.length() == 2)
 					adWayPoint=prefix+wayPoint.substring(2);
 				else
 				    adWayPoint = MyLocale.formatLong(counter, "00") + wayPoint.substring(2);
@@ -1839,7 +1839,7 @@
 		Extractor attEx = new Extractor(atts,p.getProp("attExStart"),p.getProp("attExEnd"), 0 , true);
 		String attribute=attEx.findNext();
 		chD.attributes.clear();
-		while (attEx.endOfSearch()==false) {
+		while (!attEx.endOfSearch()) {
 			chD.attributes.add(attribute);
 			attribute=attEx.findNext();
 		}
@@ -2099,7 +2099,7 @@
 		 */
 		public String getProp(String key) throws Exception {
 			String s=super.getProperty(key);
-			if (s==null) {
+			if (s == null) {
 				(new MessageBox(MyLocale.getMsg(5500,"Error"), MyLocale.getMsg(5497,"Error missing tag in spider.def") + ": "+key, FormBase.OKB)).execute();
 				throw new Exception("Missing tag in spider.def: "+key);
 			}

Modified: trunk/src/CacheWolf/myTableControl.java
===================================================================
--- trunk/src/CacheWolf/myTableControl.java	2010-03-03 23:23:46 UTC (rev 2501)
+++ trunk/src/CacheWolf/myTableControl.java	2010-03-04 08:29:19 UTC (rev 2502)
@@ -5,7 +5,6 @@
 import ewe.sys.*;
 import ewe.ui.*;
 import ewe.fx.*;
-import ewe.io.File;
 import ewe.io.FileBase;
 import ewe.io.IOException;
 

Modified: trunk/src/CacheWolf/navi/CWGPSPoint.java
===================================================================
--- trunk/src/CacheWolf/navi/CWGPSPoint.java	2010-03-03 23:23:46 UTC (rev 2501)
+++ trunk/src/CacheWolf/navi/CWGPSPoint.java	2010-03-04 08:29:19 UTC (rev 2502)
@@ -292,11 +292,11 @@
 					while(ex.endOfSearch() != true){
 						currToken = ex.findNext();
 						i++;
-						if (currToken.length()==0) {
+						if (currToken.length() == 0) {
 							if (i >= 2 && i <= 6) latlonerror = true; // force non-fix if lat-lon not contained
 							continue; // sometimes there are 2 colons directly one after the other like ",," (e.g. loox)
 						}
-						if (currToken.length()==0) continue;
+						if (currToken.length() == 0) continue;
 						//Vm.debug("zz: " + i);
 						//Vm.debug(currToken);
 						switch (i){
@@ -362,7 +362,7 @@
 					while(ex.endOfSearch() != true){
 						currToken = ex.findNext();
 						i++;
-						if (currToken.length()==0) continue; // sometimes there are 2 colons directly one after the other like ",," (e.g. loox)
+						if (currToken.length() == 0) continue; // sometimes there are 2 colons directly one after the other like ",," (e.g. loox)
 						switch (i){
 						case 3: this.numSatsInView = Convert.toInt(currToken); interpreted = true; break;
 						} // switch



From araber95 at mail.berlios.de  Thu Mar  4 00:23:56 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Thu, 4 Mar 2010 00:23:56 +0100
Subject: [Cachewolf-svn] r2501 - in trunk/tools/ratinggetter: . windows
	windows/My Project windows/bin windows/bin/Debug windows/obj
	windows/obj/Debug windows/obj/Debug/TempPE
Message-ID: <201003032323.o23NNuT2020425@sheep.berlios.de>

Author: araber95
Date: 2010-03-04 00:23:46 +0100 (Thu, 04 Mar 2010)
New Revision: 2501

Added:
   trunk/tools/ratinggetter/windows/
   trunk/tools/ratinggetter/windows/Module1.vb
   trunk/tools/ratinggetter/windows/My Project/
   trunk/tools/ratinggetter/windows/My Project/Application.Designer.vb
   trunk/tools/ratinggetter/windows/My Project/Application.myapp
   trunk/tools/ratinggetter/windows/My Project/AssemblyInfo.vb
   trunk/tools/ratinggetter/windows/My Project/Resources.Designer.vb
   trunk/tools/ratinggetter/windows/My Project/Resources.resx
   trunk/tools/ratinggetter/windows/My Project/Settings.Designer.vb
   trunk/tools/ratinggetter/windows/My Project/Settings.settings
   trunk/tools/ratinggetter/windows/bin/
   trunk/tools/ratinggetter/windows/bin/Debug/
   trunk/tools/ratinggetter/windows/bin/Debug/ConsoleApplication1.vshost.exe
   trunk/tools/ratinggetter/windows/bin/Debug/gcvote.exe
   trunk/tools/ratinggetter/windows/bin/Debug/gcvote.pdb
   trunk/tools/ratinggetter/windows/bin/Debug/gcvote.vshost.exe
   trunk/tools/ratinggetter/windows/bin/Debug/gcvote.vshost.exe.manifest
   trunk/tools/ratinggetter/windows/bin/Debug/gcvote.xml
   trunk/tools/ratinggetter/windows/bin/Release/
   trunk/tools/ratinggetter/windows/gcvote.sln
   trunk/tools/ratinggetter/windows/gcvote.suo
   trunk/tools/ratinggetter/windows/gcvote.vbproj
   trunk/tools/ratinggetter/windows/obj/
   trunk/tools/ratinggetter/windows/obj/Debug/
   trunk/tools/ratinggetter/windows/obj/Debug/ConsoleApplication1.Resources.resources
   trunk/tools/ratinggetter/windows/obj/Debug/TempPE/
   trunk/tools/ratinggetter/windows/obj/Debug/TempPE/My Project.Resources.Designer.vb.dll
   trunk/tools/ratinggetter/windows/obj/Debug/gcvote.exe
   trunk/tools/ratinggetter/windows/obj/Debug/gcvote.pdb
   trunk/tools/ratinggetter/windows/obj/Debug/gcvote.vbproj.FileListAbsolute.txt
   trunk/tools/ratinggetter/windows/obj/Debug/gcvote.vbproj.GenerateResource.Cache
   trunk/tools/ratinggetter/windows/obj/Debug/gcvote.xml
   trunk/tools/ratinggetter/windows/obj/Release/
   trunk/tools/ratinggetter/windows/obj/gcvote.vbproj.FileListAbsolute.txt
Log:
rating tool for windows (gcvote)

Added: trunk/tools/ratinggetter/windows/Module1.vb
===================================================================
--- trunk/tools/ratinggetter/windows/Module1.vb	2010-03-01 20:43:24 UTC (rev 2500)
+++ trunk/tools/ratinggetter/windows/Module1.vb	2010-03-03 23:23:46 UTC (rev 2501)
@@ -0,0 +1,26 @@
+Imports System.Xml
+Imports System.Net
+Imports System.IO
+Module Module1
+    Declare Sub ExitProcess Lib "kernel32" (ByVal uExitCode As Long)
+    Sub Main()
+        Dim E As String = ""
+        Dim url As String = "http://gcvote.de/getVotes.php?waypoints=" + Command$()
+        Dim reader As XmlReader = XmlReader.Create(url)
+        With reader
+            Do While .Read
+                Select Case .NodeType
+                    Case Xml.XmlNodeType.Element
+                        If .AttributeCount > 0 Then
+                            While .MoveToNextAttribute
+                                If .Name = "voteAvg" Then E = .Value : Exit Do
+                            End While
+                        End If
+                End Select
+            Loop
+            .Close()
+        End With
+        If E = "" Then E = "00"
+        ExitProcess(Left(E.Replace(".", ""), 2))
+    End Sub
+End Module

Added: trunk/tools/ratinggetter/windows/My Project/Application.Designer.vb
===================================================================
--- trunk/tools/ratinggetter/windows/My Project/Application.Designer.vb	2010-03-01 20:43:24 UTC (rev 2500)
+++ trunk/tools/ratinggetter/windows/My Project/Application.Designer.vb	2010-03-03 23:23:46 UTC (rev 2501)
@@ -0,0 +1,13 @@
+?'------------------------------------------------------------------------------
+' <auto-generated>
+'     Dieser Code wurde von einem Tool generiert.
+'     Laufzeitversion:2.0.50727.3603
+'
+'     ?nderungen an dieser Datei k?nnen falsches Verhalten verursachen und gehen verloren, wenn
+'     der Code erneut generiert wird.
+' </auto-generated>
+'------------------------------------------------------------------------------
+
+Option Strict On
+Option Explicit On
+

Added: trunk/tools/ratinggetter/windows/My Project/Application.myapp
===================================================================
--- trunk/tools/ratinggetter/windows/My Project/Application.myapp	2010-03-01 20:43:24 UTC (rev 2500)
+++ trunk/tools/ratinggetter/windows/My Project/Application.myapp	2010-03-03 23:23:46 UTC (rev 2501)
@@ -0,0 +1,10 @@
+?<?xml version="1.0" encoding="utf-8"?>
+<MyApplicationData xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
+  <MySubMain>false</MySubMain>
+  <SingleInstance>false</SingleInstance>
+  <ShutdownMode>0</ShutdownMode>
+  <EnableVisualStyles>true</EnableVisualStyles>
+  <AuthenticationMode>0</AuthenticationMode>
+  <ApplicationType>2</ApplicationType>
+  <SaveMySettingsOnExit>true</SaveMySettingsOnExit>
+</MyApplicationData>

Added: trunk/tools/ratinggetter/windows/My Project/AssemblyInfo.vb
===================================================================
--- trunk/tools/ratinggetter/windows/My Project/AssemblyInfo.vb	2010-03-01 20:43:24 UTC (rev 2500)
+++ trunk/tools/ratinggetter/windows/My Project/AssemblyInfo.vb	2010-03-03 23:23:46 UTC (rev 2501)
@@ -0,0 +1,35 @@
+?Imports System
+Imports System.Reflection
+Imports System.Runtime.InteropServices
+
+' Allgemeine Informationen ?ber eine Assembly werden ?ber die folgenden 
+' Attribute gesteuert. ?ndern Sie diese Attributwerte, um die Informationen zu ?ndern,
+' die mit einer Assembly verkn?pft sind.
+
+' Die Werte der Assemblyattribute ?berpr?fen
+
+<Assembly: AssemblyTitle("ConsoleApplication1")> 
+<Assembly: AssemblyDescription("")> 
+<Assembly: AssemblyCompany("CF Computer")> 
+<Assembly: AssemblyProduct("ConsoleApplication1")> 
+<Assembly: AssemblyCopyright("Copyright ? CF Computer 2010")> 
+<Assembly: AssemblyTrademark("")> 
+
+<Assembly: ComVisible(False)>
+
+'Die folgende GUID bestimmt die ID der Typbibliothek, wenn dieses Projekt f?r COM verf?gbar gemacht wird
+<Assembly: Guid("3eff937f-05d7-4325-a8a9-b96331dae4d4")> 
+
+' Versionsinformationen f?r eine Assembly bestehen aus den folgenden vier Werten:
+'
+'      Hauptversion
+'      Nebenversion 
+'      Buildnummer
+'      Revision
+'
+' Sie k?nnen alle Werte angeben oder die standardm??igen Build- und Revisionsnummern 
+' ?bernehmen, indem Sie "*" eingeben:
+' <Assembly: AssemblyVersion("1.0.*")> 
+
+<Assembly: AssemblyVersion("1.0.0.0")> 
+<Assembly: AssemblyFileVersion("1.0.0.0")> 

Added: trunk/tools/ratinggetter/windows/My Project/Resources.Designer.vb
===================================================================
--- trunk/tools/ratinggetter/windows/My Project/Resources.Designer.vb	2010-03-01 20:43:24 UTC (rev 2500)
+++ trunk/tools/ratinggetter/windows/My Project/Resources.Designer.vb	2010-03-03 23:23:46 UTC (rev 2501)
@@ -0,0 +1,63 @@
+?'------------------------------------------------------------------------------
+' <auto-generated>
+'     Dieser Code wurde von einem Tool generiert.
+'     Laufzeitversion:2.0.50727.3603
+'
+'     ?nderungen an dieser Datei k?nnen falsches Verhalten verursachen und gehen verloren, wenn
+'     der Code erneut generiert wird.
+' </auto-generated>
+'------------------------------------------------------------------------------
+
+Option Strict On
+Option Explicit On
+
+Imports System
+
+Namespace My.Resources
+    
+    'Diese Klasse wurde von der StronglyTypedResourceBuilder automatisch generiert
+    '-Klasse ?ber ein Tool wie ResGen oder Visual Studio automatisch generiert.
+    'Um einen Member hinzuzuf?gen oder zu entfernen, bearbeiten Sie die .ResX-Datei und f?hren dann ResGen
+    'mit der /str-Option erneut aus, oder Sie erstellen Ihr VS-Projekt neu.
+    '''<summary>
+    '''  Eine stark typisierte Ressourcenklasse zum Suchen von lokalisierten Zeichenfolgen usw.
+    '''</summary>
+    <Global.System.CodeDom.Compiler.GeneratedCodeAttribute("System.Resources.Tools.StronglyTypedResourceBuilder", "2.0.0.0"),  _
+     Global.System.Diagnostics.DebuggerNonUserCodeAttribute(),  _
+     Global.System.Runtime.CompilerServices.CompilerGeneratedAttribute(),  _
+     Global.Microsoft.VisualBasic.HideModuleNameAttribute()>  _
+    Friend Module Resources
+        
+        Private resourceMan As Global.System.Resources.ResourceManager
+        
+        Private resourceCulture As Global.System.Globalization.CultureInfo
+        
+        '''<summary>
+        '''  Gibt die zwischengespeicherte ResourceManager-Instanz zur?ck, die von dieser Klasse verwendet wird.
+        '''</summary>
+        <Global.System.ComponentModel.EditorBrowsableAttribute(Global.System.ComponentModel.EditorBrowsableState.Advanced)>  _
+        Friend ReadOnly Property ResourceManager() As Global.System.Resources.ResourceManager
+            Get
+                If Object.ReferenceEquals(resourceMan, Nothing) Then
+                    Dim temp As Global.System.Resources.ResourceManager = New Global.System.Resources.ResourceManager("ConsoleApplication1.Resources", GetType(Resources).Assembly)
+                    resourceMan = temp
+                End If
+                Return resourceMan
+            End Get
+        End Property
+        
+        '''<summary>
+        '''  ?berschreibt die CurrentUICulture-Eigenschaft des aktuellen Threads f?r alle
+        '''  Ressourcenzuordnungen, die diese stark typisierte Ressourcenklasse verwenden.
+        '''</summary>
+        <Global.System.ComponentModel.EditorBrowsableAttribute(Global.System.ComponentModel.EditorBrowsableState.Advanced)>  _
+        Friend Property Culture() As Global.System.Globalization.CultureInfo
+            Get
+                Return resourceCulture
+            End Get
+            Set
+                resourceCulture = value
+            End Set
+        End Property
+    End Module
+End Namespace

Added: trunk/tools/ratinggetter/windows/My Project/Resources.resx
===================================================================
--- trunk/tools/ratinggetter/windows/My Project/Resources.resx	2010-03-01 20:43:24 UTC (rev 2500)
+++ trunk/tools/ratinggetter/windows/My Project/Resources.resx	2010-03-03 23:23:46 UTC (rev 2501)
@@ -0,0 +1,117 @@
+?<?xml version="1.0" encoding="utf-8"?>
+<root>
+  <!-- 
+    Microsoft ResX Schema 
+    
+    Version 2.0
+    
+    The primary goals of this format is to allow a simple XML format 
+    that is mostly human readable. The generation and parsing of the 
+    various data types are done through the TypeConverter classes 
+    associated with the data types.
+    
+    Example:
+    
+    ... ado.net/XML headers & schema ...
+    <resheader name="resmimetype">text/microsoft-resx</resheader>
+    <resheader name="version">2.0</resheader>
+    <resheader name="reader">System.Resources.ResXResourceReader, System.Windows.Forms, ...</resheader>
+    <resheader name="writer">System.Resources.ResXResourceWriter, System.Windows.Forms, ...</resheader>
+    <data name="Name1"><value>this is my long string</value><comment>this is a comment</comment></data>
+    <data name="Color1" type="System.Drawing.Color, System.Drawing">Blue</data>
+    <data name="Bitmap1" mimetype="application/x-microsoft.net.object.binary.base64">
+        <value>[base64 mime encoded serialized .NET Framework object]</value>
+    </data>
+    <data name="Icon1" type="System.Drawing.Icon, System.Drawing" mimetype="application/x-microsoft.net.object.bytearray.base64">
+        <value>[base64 mime encoded string representing a byte array form of the .NET Framework object]</value>
+        <comment>This is a comment</comment>
+    </data>
+                
+    There are any number of "resheader" rows that contain simple 
+    name/value pairs.
+    
+    Each data row contains a name, and value. The row also contains a 
+    type or mimetype. Type corresponds to a .NET class that support 
+    text/value conversion through the TypeConverter architecture. 
+    Classes that don't support this are serialized and stored with the 
+    mimetype set.
+    
+    The mimetype is used for serialized objects, and tells the 
+    ResXResourceReader how to depersist the object. This is currently not 
+    extensible. For a given mimetype the value must be set accordingly:
+    
+    Note - application/x-microsoft.net.object.binary.base64 is the format 
+    that the ResXResourceWriter will generate, however the reader can 
+    read any of the formats listed below.
+    
+    mimetype: application/x-microsoft.net.object.binary.base64
+    value   : The object must be serialized with 
+            : System.Serialization.Formatters.Binary.BinaryFormatter
+            : and then encoded with base64 encoding.
+    
+    mimetype: application/x-microsoft.net.object.soap.base64
+    value   : The object must be serialized with 
+            : System.Runtime.Serialization.Formatters.Soap.SoapFormatter
+            : and then encoded with base64 encoding.
+
+    mimetype: application/x-microsoft.net.object.bytearray.base64
+    value   : The object must be serialized into a byte array 
+            : using a System.ComponentModel.TypeConverter
+            : and then encoded with base64 encoding.
+    -->
+  <xsd:schema id="root" xmlns="" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
+    <xsd:element name="root" msdata:IsDataSet="true">
+      <xsd:complexType>
+        <xsd:choice maxOccurs="unbounded">
+          <xsd:element name="metadata">
+            <xsd:complexType>
+              <xsd:sequence>
+                <xsd:element name="value" type="xsd:string" minOccurs="0" />
+              </xsd:sequence>
+              <xsd:attribute name="name" type="xsd:string" />
+              <xsd:attribute name="type" type="xsd:string" />
+              <xsd:attribute name="mimetype" type="xsd:string" />
+            </xsd:complexType>
+          </xsd:element>
+          <xsd:element name="assembly">
+            <xsd:complexType>
+              <xsd:attribute name="alias" type="xsd:string" />
+              <xsd:attribute name="name" type="xsd:string" />
+            </xsd:complexType>
+          </xsd:element>
+          <xsd:element name="data">
+            <xsd:complexType>
+              <xsd:sequence>
+                <xsd:element name="value" type="xsd:string" minOccurs="0" msdata:Ordinal="1" />
+                <xsd:element name="comment" type="xsd:string" minOccurs="0" msdata:Ordinal="2" />
+              </xsd:sequence>
+              <xsd:attribute name="name" type="xsd:string" msdata:Ordinal="1" />
+              <xsd:attribute name="type" type="xsd:string" msdata:Ordinal="3" />
+              <xsd:attribute name="mimetype" type="xsd:string" msdata:Ordinal="4" />
+            </xsd:complexType>
+          </xsd:element>
+          <xsd:element name="resheader">
+            <xsd:complexType>
+              <xsd:sequence>
+                <xsd:element name="value" type="xsd:string" minOccurs="0" msdata:Ordinal="1" />
+              </xsd:sequence>
+              <xsd:attribute name="name" type="xsd:string" use="required" />
+            </xsd:complexType>
+          </xsd:element>
+        </xsd:choice>
+      </xsd:complexType>
+    </xsd:element>
+  </xsd:schema>
+  <resheader name="resmimetype">
+    <value>text/microsoft-resx</value>
+  </resheader>
+  <resheader name="version">
+    <value>2.0</value>
+  </resheader>
+  <resheader name="reader">
+    <value>System.Resources.ResXResourceReader, System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</value>
+  </resheader>
+  <resheader name="writer">
+    <value>System.Resources.ResXResourceWriter, System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</value>
+  </resheader>
+</root>
\ No newline at end of file

Added: trunk/tools/ratinggetter/windows/My Project/Settings.Designer.vb
===================================================================
--- trunk/tools/ratinggetter/windows/My Project/Settings.Designer.vb	2010-03-01 20:43:24 UTC (rev 2500)
+++ trunk/tools/ratinggetter/windows/My Project/Settings.Designer.vb	2010-03-03 23:23:46 UTC (rev 2501)
@@ -0,0 +1,73 @@
+?'------------------------------------------------------------------------------
+' <auto-generated>
+'     Dieser Code wurde von einem Tool generiert.
+'     Laufzeitversion:2.0.50727.3603
+'
+'     ?nderungen an dieser Datei k?nnen falsches Verhalten verursachen und gehen verloren, wenn
+'     der Code erneut generiert wird.
+' </auto-generated>
+'------------------------------------------------------------------------------
+
+Option Strict On
+Option Explicit On
+
+
+Namespace My
+    
+    <Global.System.Runtime.CompilerServices.CompilerGeneratedAttribute(),  _
+     Global.System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.Editors.SettingsDesigner.SettingsSingleFileGenerator", "9.0.0.0"),  _
+     Global.System.ComponentModel.EditorBrowsableAttribute(Global.System.ComponentModel.EditorBrowsableState.Advanced)>  _
+    Partial Friend NotInheritable Class MySettings
+        Inherits Global.System.Configuration.ApplicationSettingsBase
+        
+        Private Shared defaultInstance As MySettings = CType(Global.System.Configuration.ApplicationSettingsBase.Synchronized(New MySettings),MySettings)
+        
+#Region "Funktion zum automatischen Speichern von My.Settings"
+#If _MyType = "WindowsForms" Then
+    Private Shared addedHandler As Boolean
+
+    Private Shared addedHandlerLockObject As New Object
+
+    <Global.System.Diagnostics.DebuggerNonUserCodeAttribute(), Global.System.ComponentModel.EditorBrowsableAttribute(Global.System.ComponentModel.EditorBrowsableState.Advanced)> _
+    Private Shared Sub AutoSaveSettings(ByVal sender As Global.System.Object, ByVal e As Global.System.EventArgs)
+        If My.Application.SaveMySettingsOnExit Then
+            My.Settings.Save()
+        End If
+    End Sub
+#End If
+#End Region
+        
+        Public Shared ReadOnly Property [Default]() As MySettings
+            Get
+                
+#If _MyType = "WindowsForms" Then
+               If Not addedHandler Then
+                    SyncLock addedHandlerLockObject
+                        If Not addedHandler Then
+                            AddHandler My.Application.Shutdown, AddressOf AutoSaveSettings
+                            addedHandler = True
+                        End If
+                    End SyncLock
+                End If
+#End If
+                Return defaultInstance
+            End Get
+        End Property
+    End Class
+End Namespace
+
+Namespace My
+    
+    <Global.Microsoft.VisualBasic.HideModuleNameAttribute(),  _
+     Global.System.Diagnostics.DebuggerNonUserCodeAttribute(),  _
+     Global.System.Runtime.CompilerServices.CompilerGeneratedAttribute()>  _
+    Friend Module MySettingsProperty
+        
+        <Global.System.ComponentModel.Design.HelpKeywordAttribute("My.Settings")>  _
+        Friend ReadOnly Property Settings() As Global.ConsoleApplication1.My.MySettings
+            Get
+                Return Global.ConsoleApplication1.My.MySettings.Default
+            End Get
+        End Property
+    End Module
+End Namespace

Added: trunk/tools/ratinggetter/windows/My Project/Settings.settings
===================================================================
--- trunk/tools/ratinggetter/windows/My Project/Settings.settings	2010-03-01 20:43:24 UTC (rev 2500)
+++ trunk/tools/ratinggetter/windows/My Project/Settings.settings	2010-03-03 23:23:46 UTC (rev 2501)
@@ -0,0 +1,7 @@
+?<?xml version='1.0' encoding='utf-8'?>
+<SettingsFile xmlns="http://schemas.microsoft.com/VisualStudio/2004/01/settings" CurrentProfile="(Default)" UseMySettingsClassName="true">
+  <Profiles>
+    <Profile Name="(Default)" />
+  </Profiles>
+  <Settings />
+</SettingsFile>

Added: trunk/tools/ratinggetter/windows/bin/Debug/ConsoleApplication1.vshost.exe
===================================================================
(Binary files differ)


Property changes on: trunk/tools/ratinggetter/windows/bin/Debug/ConsoleApplication1.vshost.exe
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/ratinggetter/windows/bin/Debug/gcvote.exe
===================================================================
(Binary files differ)


Property changes on: trunk/tools/ratinggetter/windows/bin/Debug/gcvote.exe
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/ratinggetter/windows/bin/Debug/gcvote.pdb
===================================================================
(Binary files differ)


Property changes on: trunk/tools/ratinggetter/windows/bin/Debug/gcvote.pdb
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/ratinggetter/windows/bin/Debug/gcvote.vshost.exe
===================================================================
(Binary files differ)


Property changes on: trunk/tools/ratinggetter/windows/bin/Debug/gcvote.vshost.exe
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/ratinggetter/windows/bin/Debug/gcvote.vshost.exe.manifest
===================================================================
--- trunk/tools/ratinggetter/windows/bin/Debug/gcvote.vshost.exe.manifest	2010-03-01 20:43:24 UTC (rev 2500)
+++ trunk/tools/ratinggetter/windows/bin/Debug/gcvote.vshost.exe.manifest	2010-03-03 23:23:46 UTC (rev 2501)
@@ -0,0 +1,11 @@
+?<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
+<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
+  <assemblyIdentity version="1.0.0.0" name="MyApplication.app"/>
+  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
+    <security>
+      <requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">
+        <requestedExecutionLevel level="asInvoker" uiAccess="false"/>
+      </requestedPrivileges>
+    </security>
+  </trustInfo>
+</assembly>

Added: trunk/tools/ratinggetter/windows/bin/Debug/gcvote.xml
===================================================================
--- trunk/tools/ratinggetter/windows/bin/Debug/gcvote.xml	2010-03-01 20:43:24 UTC (rev 2500)
+++ trunk/tools/ratinggetter/windows/bin/Debug/gcvote.xml	2010-03-03 23:23:46 UTC (rev 2501)
@@ -0,0 +1,24 @@
+?<?xml version="1.0"?>
+<doc>
+<assembly>
+<name>
+gcvote
+</name>
+</assembly>
+<members>
+<member name="P:ConsoleApplication1.My.Resources.Resources.ResourceManager">
+	<summary>
+  Gibt die zwischengespeicherte ResourceManager-Instanz zur?ck, die von dieser Klasse verwendet wird.
+</summary>
+</member><member name="P:ConsoleApplication1.My.Resources.Resources.Culture">
+	<summary>
+  ?berschreibt die CurrentUICulture-Eigenschaft des aktuellen Threads f?r alle
+  Ressourcenzuordnungen, die diese stark typisierte Ressourcenklasse verwenden.
+</summary>
+</member><member name="T:ConsoleApplication1.My.Resources.Resources">
+	<summary>
+  Eine stark typisierte Ressourcenklasse zum Suchen von lokalisierten Zeichenfolgen usw.
+</summary>
+</member>
+</members>
+</doc>
\ No newline at end of file

Added: trunk/tools/ratinggetter/windows/gcvote.sln
===================================================================
--- trunk/tools/ratinggetter/windows/gcvote.sln	2010-03-01 20:43:24 UTC (rev 2500)
+++ trunk/tools/ratinggetter/windows/gcvote.sln	2010-03-03 23:23:46 UTC (rev 2501)
@@ -0,0 +1,20 @@
+?
+Microsoft Visual Studio Solution File, Format Version 10.00
+# Visual Basic Express 2008
+Project("{F184B08F-C81C-45F6-A57F-5ABD9991F28F}") = "gcvote", "gcvote.vbproj", "{54428112-ADB6-4786-B2B3-893BD72F07D3}"
+EndProject
+Global
+	GlobalSection(SolutionConfigurationPlatforms) = preSolution
+		Debug|Any CPU = Debug|Any CPU
+		Release|Any CPU = Release|Any CPU
+	EndGlobalSection
+	GlobalSection(ProjectConfigurationPlatforms) = postSolution
+		{54428112-ADB6-4786-B2B3-893BD72F07D3}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
+		{54428112-ADB6-4786-B2B3-893BD72F07D3}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{54428112-ADB6-4786-B2B3-893BD72F07D3}.Release|Any CPU.ActiveCfg = Release|Any CPU
+		{54428112-ADB6-4786-B2B3-893BD72F07D3}.Release|Any CPU.Build.0 = Release|Any CPU
+	EndGlobalSection
+	GlobalSection(SolutionProperties) = preSolution
+		HideSolutionNode = FALSE
+	EndGlobalSection
+EndGlobal

Added: trunk/tools/ratinggetter/windows/gcvote.suo
===================================================================
(Binary files differ)


Property changes on: trunk/tools/ratinggetter/windows/gcvote.suo
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/ratinggetter/windows/gcvote.vbproj
===================================================================
--- trunk/tools/ratinggetter/windows/gcvote.vbproj	2010-03-01 20:43:24 UTC (rev 2500)
+++ trunk/tools/ratinggetter/windows/gcvote.vbproj	2010-03-03 23:23:46 UTC (rev 2501)
@@ -0,0 +1,98 @@
+?<?xml version="1.0" encoding="utf-8"?>
+<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="3.5">
+  <PropertyGroup>
+    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
+    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
+    <ProductVersion>8.0.50727</ProductVersion>
+    <SchemaVersion>2.0</SchemaVersion>
+    <ProjectGuid>{54428112-ADB6-4786-B2B3-893BD72F07D3}</ProjectGuid>
+    <OutputType>Exe</OutputType>
+    <StartupObject>ConsoleApplication1.Module1</StartupObject>
+    <RootNamespace>ConsoleApplication1</RootNamespace>
+    <AssemblyName>gcvote</AssemblyName>
+    <MyType>Console</MyType>
+    <FileUpgradeFlags>
+    </FileUpgradeFlags>
+    <UpgradeBackupLocation>
+    </UpgradeBackupLocation>
+    <OldToolsVersion>2.0</OldToolsVersion>
+    <TargetFrameworkVersion>v3.5</TargetFrameworkVersion>
+  </PropertyGroup>
+  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
+    <DebugSymbols>true</DebugSymbols>
+    <DebugType>full</DebugType>
+    <DefineDebug>true</DefineDebug>
+    <DefineTrace>true</DefineTrace>
+    <OutputPath>bin\Debug\</OutputPath>
+    <DocumentationFile>gcvote.xml</DocumentationFile>
+    <NoWarn>42016,41999,42017,42018,42019,42032,42036,42020,42021,42022</NoWarn>
+  </PropertyGroup>
+  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
+    <DebugType>pdbonly</DebugType>
+    <DefineDebug>false</DefineDebug>
+    <DefineTrace>true</DefineTrace>
+    <Optimize>true</Optimize>
+    <OutputPath>bin\Release\</OutputPath>
+    <DocumentationFile>gcvote.xml</DocumentationFile>
+    <NoWarn>42016,41999,42017,42018,42019,42032,42036,42020,42021,42022</NoWarn>
+  </PropertyGroup>
+  <ItemGroup>
+    <Reference Include="System" />
+    <Reference Include="System.Data" />
+    <Reference Include="System.Deployment" />
+    <Reference Include="System.Xml" />
+  </ItemGroup>
+  <ItemGroup>
+    <Import Include="Microsoft.VisualBasic" />
+    <Import Include="System" />
+    <Import Include="System.Collections" />
+    <Import Include="System.Collections.Generic" />
+    <Import Include="System.Data" />
+    <Import Include="System.Diagnostics" />
+  </ItemGroup>
+  <ItemGroup>
+    <Compile Include="Module1.vb" />
+    <Compile Include="My Project\AssemblyInfo.vb" />
+    <Compile Include="My Project\Application.Designer.vb">
+      <AutoGen>True</AutoGen>
+      <DependentUpon>Application.myapp</DependentUpon>
+    </Compile>
+    <Compile Include="My Project\Resources.Designer.vb">
+      <AutoGen>True</AutoGen>
+      <DesignTime>True</DesignTime>
+      <DependentUpon>Resources.resx</DependentUpon>
+    </Compile>
+    <Compile Include="My Project\Settings.Designer.vb">
+      <AutoGen>True</AutoGen>
+      <DependentUpon>Settings.settings</DependentUpon>
+      <DesignTimeSharedInput>True</DesignTimeSharedInput>
+    </Compile>
+  </ItemGroup>
+  <ItemGroup>
+    <EmbeddedResource Include="My Project\Resources.resx">
+      <Generator>VbMyResourcesResXFileCodeGenerator</Generator>
+      <LastGenOutput>Resources.Designer.vb</LastGenOutput>
+      <CustomToolNamespace>My.Resources</CustomToolNamespace>
+      <SubType>Designer</SubType>
+    </EmbeddedResource>
+  </ItemGroup>
+  <ItemGroup>
+    <None Include="My Project\Application.myapp">
+      <Generator>MyApplicationCodeGenerator</Generator>
+      <LastGenOutput>Application.Designer.vb</LastGenOutput>
+    </None>
+    <None Include="My Project\Settings.settings">
+      <Generator>SettingsSingleFileGenerator</Generator>
+      <CustomToolNamespace>My</CustomToolNamespace>
+      <LastGenOutput>Settings.Designer.vb</LastGenOutput>
+    </None>
+  </ItemGroup>
+  <Import Project="$(MSBuildBinPath)\Microsoft.VisualBasic.targets" />
+  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
+       Other similar extension points exist, see Microsoft.Common.targets.
+  <Target Name="BeforeBuild">
+  </Target>
+  <Target Name="AfterBuild">
+  </Target>
+  -->
+</Project>
\ No newline at end of file

Added: trunk/tools/ratinggetter/windows/obj/Debug/ConsoleApplication1.Resources.resources
===================================================================
(Binary files differ)


Property changes on: trunk/tools/ratinggetter/windows/obj/Debug/ConsoleApplication1.Resources.resources
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/ratinggetter/windows/obj/Debug/TempPE/My Project.Resources.Designer.vb.dll
===================================================================
(Binary files differ)


Property changes on: trunk/tools/ratinggetter/windows/obj/Debug/TempPE/My Project.Resources.Designer.vb.dll
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/ratinggetter/windows/obj/Debug/gcvote.exe
===================================================================
(Binary files differ)


Property changes on: trunk/tools/ratinggetter/windows/obj/Debug/gcvote.exe
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/ratinggetter/windows/obj/Debug/gcvote.pdb
===================================================================
(Binary files differ)


Property changes on: trunk/tools/ratinggetter/windows/obj/Debug/gcvote.pdb
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/ratinggetter/windows/obj/Debug/gcvote.vbproj.FileListAbsolute.txt
===================================================================
--- trunk/tools/ratinggetter/windows/obj/Debug/gcvote.vbproj.FileListAbsolute.txt	2010-03-01 20:43:24 UTC (rev 2500)
+++ trunk/tools/ratinggetter/windows/obj/Debug/gcvote.vbproj.FileListAbsolute.txt	2010-03-03 23:23:46 UTC (rev 2501)
@@ -0,0 +1,9 @@
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\ratinggetter\windows\obj\Debug\gcvote.exe
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\ratinggetter\windows\obj\Debug\gcvote.xml
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\ratinggetter\windows\obj\Debug\gcvote.pdb
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\ratinggetter\windows\bin\Debug\gcvote.exe
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\ratinggetter\windows\bin\Debug\gcvote.pdb
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\ratinggetter\windows\bin\Debug\gcvote.xml
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\ratinggetter\windows\obj\Debug\ResolveAssemblyReference.cache
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\ratinggetter\windows\obj\Debug\ConsoleApplication1.Resources.resources
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\ratinggetter\windows\obj\Debug\gcvote.vbproj.GenerateResource.Cache

Added: trunk/tools/ratinggetter/windows/obj/Debug/gcvote.vbproj.GenerateResource.Cache
===================================================================
(Binary files differ)


Property changes on: trunk/tools/ratinggetter/windows/obj/Debug/gcvote.vbproj.GenerateResource.Cache
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/ratinggetter/windows/obj/Debug/gcvote.xml
===================================================================
--- trunk/tools/ratinggetter/windows/obj/Debug/gcvote.xml	2010-03-01 20:43:24 UTC (rev 2500)
+++ trunk/tools/ratinggetter/windows/obj/Debug/gcvote.xml	2010-03-03 23:23:46 UTC (rev 2501)
@@ -0,0 +1,24 @@
+?<?xml version="1.0"?>
+<doc>
+<assembly>
+<name>
+gcvote
+</name>
+</assembly>
+<members>
+<member name="P:ConsoleApplication1.My.Resources.Resources.ResourceManager">
+	<summary>
+  Gibt die zwischengespeicherte ResourceManager-Instanz zur?ck, die von dieser Klasse verwendet wird.
+</summary>
+</member><member name="P:ConsoleApplication1.My.Resources.Resources.Culture">
+	<summary>
+  ?berschreibt die CurrentUICulture-Eigenschaft des aktuellen Threads f?r alle
+  Ressourcenzuordnungen, die diese stark typisierte Ressourcenklasse verwenden.
+</summary>
+</member><member name="T:ConsoleApplication1.My.Resources.Resources">
+	<summary>
+  Eine stark typisierte Ressourcenklasse zum Suchen von lokalisierten Zeichenfolgen usw.
+</summary>
+</member>
+</members>
+</doc>
\ No newline at end of file

Added: trunk/tools/ratinggetter/windows/obj/gcvote.vbproj.FileListAbsolute.txt
===================================================================
--- trunk/tools/ratinggetter/windows/obj/gcvote.vbproj.FileListAbsolute.txt	2010-03-01 20:43:24 UTC (rev 2500)
+++ trunk/tools/ratinggetter/windows/obj/gcvote.vbproj.FileListAbsolute.txt	2010-03-03 23:23:46 UTC (rev 2501)
@@ -0,0 +1,9 @@
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\rating\gcvote\bin\Debug\gcvote.exe
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\rating\gcvote\bin\Debug\gcvote.pdb
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\rating\gcvote\bin\Debug\gcvote.xml
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\rating\gcvote\obj\Debug\ResolveAssemblyReference.cache
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\rating\gcvote\obj\Debug\ConsoleApplication1.Resources.resources
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\rating\gcvote\obj\Debug\gcvote.vbproj.GenerateResource.Cache
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\rating\gcvote\obj\Debug\gcvote.exe
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\rating\gcvote\obj\Debug\gcvote.xml
+C:\Dateien_Entwicklung\Java_Projekte\CacheWolf\CacheWolf\tools\rating\gcvote\obj\Debug\gcvote.pdb



From haelmchen at mail.berlios.de  Thu Mar  4 23:21:44 2010
From: haelmchen at mail.berlios.de (haelmchen at mail.berlios.de)
Date: Thu, 4 Mar 2010 23:21:44 +0100
Subject: [Cachewolf-svn] r2504 - trunk/src/CacheWolf/navi/touchControls
Message-ID: <201003042221.o24MLivg024812@sheep.berlios.de>

Author: haelmchen
Date: 2010-03-04 23:21:00 +0100 (Thu, 04 Mar 2010)
New Revision: 2504

Modified:
   trunk/src/CacheWolf/navi/touchControls/ImageWithText.java
   trunk/src/CacheWolf/navi/touchControls/MovingMapControlItem.java
   trunk/src/CacheWolf/navi/touchControls/MovingMapControlItemButton.java
   trunk/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java
Log:
add loading of my_movingMapControls.xml

Modified: trunk/src/CacheWolf/navi/touchControls/ImageWithText.java
===================================================================
--- trunk/src/CacheWolf/navi/touchControls/ImageWithText.java	2010-03-04 08:57:29 UTC (rev 2503)
+++ trunk/src/CacheWolf/navi/touchControls/ImageWithText.java	2010-03-04 22:21:00 UTC (rev 2504)
@@ -10,7 +10,6 @@
 import ewe.fx.Rect;
 import ewe.graphics.AniImage;
 import ewe.ui.MainWindow;
-import ewe.util.mString;
 
 public class ImageWithText extends AniImage {
 

Modified: trunk/src/CacheWolf/navi/touchControls/MovingMapControlItem.java
===================================================================
--- trunk/src/CacheWolf/navi/touchControls/MovingMapControlItem.java	2010-03-04 08:57:29 UTC (rev 2503)
+++ trunk/src/CacheWolf/navi/touchControls/MovingMapControlItem.java	2010-03-04 22:21:00 UTC (rev 2504)
@@ -5,7 +5,6 @@
 import CacheWolf.navi.touchControls.MovingMapControls.Role;
 import ewe.fx.Image;
 import ewe.graphics.AniImage;
-import ewe.sys.Math;
 import ewe.sys.Vm;
 import ewe.util.Enumeration;
 import ewe.util.Hashtable;

Modified: trunk/src/CacheWolf/navi/touchControls/MovingMapControlItemButton.java
===================================================================
--- trunk/src/CacheWolf/navi/touchControls/MovingMapControlItemButton.java	2010-03-04 08:57:29 UTC (rev 2503)
+++ trunk/src/CacheWolf/navi/touchControls/MovingMapControlItemButton.java	2010-03-04 22:21:00 UTC (rev 2504)
@@ -4,7 +4,6 @@
 import ewe.fx.Image;
 import ewe.fx.mImage;
 import ewe.graphics.AniImage;
-import ewe.sys.Vm;
 
 public class MovingMapControlItemButton extends MovingMapControlItem {
 
@@ -27,7 +26,6 @@
 
 	
 	public int getWidth() {
-		
 		return aniImage.getWidth();
 	}
 

Modified: trunk/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java
===================================================================
--- trunk/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java	2010-03-04 08:57:29 UTC (rev 2503)
+++ trunk/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java	2010-03-04 22:21:00 UTC (rev 2504)
@@ -6,6 +6,7 @@
 import CacheWolf.navi.touchControls.MovingMapControlItemText.TextOptions;
 import CacheWolf.navi.touchControls.MovingMapControls.Role;
 import ewe.fx.Dimension;
+import ewe.io.File;
 import ewe.io.FileBase;
 import ewe.sys.Vm;
 import ewe.util.Hashtable;
@@ -17,6 +18,10 @@
 
 public class MovingMapControlSettings extends MinML {
 
+	public static final String CONFIG_FILE_NAME = "movingMapControls.xml";
+	
+	public static final String CONFIG_FILE_NAME_OVERWRITE = "my_movingMapControls.xml";
+	
 	public static final String SETTINGS = "settings";
 	/**
 	 * the size of the font on the icons
@@ -230,9 +235,9 @@
 				Vm.debug("Image for '" + localeDefault + "' not found");
 				return;
 			}
-
+			int localfontsize=getIntFromFile(attributes, SETTINGS_ATTR_FONTSIZE, fontsize);
 			// textoptions
-			TextOptions tOptions = new TextOptions(fontsize, getIntFromFile(
+			TextOptions tOptions = new TextOptions(localfontsize, getIntFromFile(
 					attributes, BUTTON_ATTR_TEXT_OFFSET_L, 0), getIntFromFile(
 					attributes, BUTTON_ATTR_TEXT_OFFSET_R, 0), getIntFromFile(
 					attributes, BUTTON_ATTR_TEXT_OFFSET_T, 0), getIntFromFile(
@@ -291,25 +296,29 @@
 
 	public boolean readFile(Dimension dest) {
 		setDocumentHandler(this);
-		String file = FileBase.makePath(FileBase.getProgramDirectory(),
-				"mmcOldStyle/movingMapControls.xml");
+		String path = FileBase.makePath(FileBase.getProgramDirectory(),
+				"mmcOldStyle/");
 
 		if (pref.touchControls) {
-			file = FileBase.makePath(FileBase.getProgramDirectory(),
-					"mmcDefault/movingMapControls.xml");
+			path = FileBase.makePath(FileBase.getProgramDirectory(),
+					"mmcDefault/");
 
 			if (dest.height <= 320 && dest.width <= 240) {
-				file = FileBase.makePath(FileBase.getProgramDirectory(),
-						"mmc240x320/movingMapControls.xml");
+				path = FileBase.makePath(FileBase.getProgramDirectory(),
+						"mmc240x320/");
 			} else if (dest.height <= 640 && dest.width <= 480) {
-				file = FileBase.makePath(FileBase.getProgramDirectory(),
-						"mmc480x640/movingMapControls.xml");
+				path = FileBase.makePath(FileBase.getProgramDirectory(),
+						"mmc480x640/");
 			}
 		}
-
+		path = path.replace('\\', '/');
+		File file = new File(path, CONFIG_FILE_NAME_OVERWRITE);
+		if (!file.exists()) {
+			file = new File(path, CONFIG_FILE_NAME);
+		}
+		
+		
 		try {
-			// Vm.debug("read mmc file " + file);
-			file = file.replace('\\', '/');
 			ewe.io.Reader r = new ewe.io.InputStreamReader(
 					new ewe.io.FileInputStream(file));
 			parse(r);
@@ -317,12 +326,12 @@
 		} catch (Exception e) {
 			if (e instanceof NullPointerException)
 				Global.getPref().log(
-						"Error reading " + file
+						"Error reading " + path
 								+ ": NullPointerException in Element " + ""
 								+ ". Wrong attribute, File not existing?", e,
 						true);
 			else
-				Global.getPref().log("Error reading " + file + ": ", e);
+				Global.getPref().log("Error reading " + path + ": ", e);
 			return false;
 		}
 		return true;



From mik77 at mail.berlios.de  Fri Mar  5 13:35:34 2010
From: mik77 at mail.berlios.de (mik77 at mail.berlios.de)
Date: Fri, 5 Mar 2010 13:35:34 +0100
Subject: [Cachewolf-svn] r2505 - trunk/res_noewe
Message-ID: <201003051235.o25CZYMu006037@sheep.berlios.de>

Author: mik77
Date: 2010-03-05 13:35:14 +0100 (Fri, 05 Mar 2010)
New Revision: 2505

Modified:
   trunk/res_noewe/spider.def
Log:
Better recognition of single logs. Not disturbed by images in logs.

Modified: trunk/res_noewe/spider.def
===================================================================
--- trunk/res_noewe/spider.def	2010-03-04 22:21:00 UTC (rev 2504)
+++ trunk/res_noewe/spider.def	2010-03-05 12:35:14 UTC (rev 2505)
@@ -35,6 +35,7 @@
 # Version 4.11- 20091023 Reverted last change, because it doesn't work with EWE/EXE
 # Version 5.0 - 20091105 adaption to new GC-design
 # Version 6.0 - 20100113 adaption to new GC-design
+# Version 6.1 - 20100305 better log recognition
 #============================================================
 # A suffix of Rex indicates a regular expression
 # A suffix of ExStart indicates the start of an Extractor search pattern
@@ -120,7 +121,7 @@
 # blockRex extrahiert zun?chst aus der gesamten Seite den Logbereich
 blockRex           = <table class="LogsTable Table">((?s).*?)</table></span></p>
 # singleLogEx extrahiert in einer Schleife alle Logs aus dem Logbereich
-singleLogExStart   = <strong>
+singleLogExStart   = ><strong><img src=
 singleLogExEnd     = <small><a\ href="
 # iconEx, nameTempEx, dateEx, singleLogEx werden auf einen singleLog angewendet
 iconExStart        = www.geocaching.com/images/icons/



From araber95 at mail.berlios.de  Sun Mar  7 19:44:10 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun, 7 Mar 2010 19:44:10 +0100
Subject: [Cachewolf-svn] r2506 - in trunk: res_noewe res_noewe/attributes
	res_noewe/languages src/CacheWolf src/CacheWolf/imp
Message-ID: <201003071844.o27IiAiQ011205@sheep.berlios.de>

Author: araber95
Date: 2010-03-07 19:41:44 +0100 (Sun, 07 Mar 2010)
New Revision: 2506

Added:
   trunk/res_noewe/attributes/aircraft-no.gif
   trunk/res_noewe/attributes/aircraft-non.gif
   trunk/res_noewe/attributes/aircraft-yes.gif
   trunk/res_noewe/attributes/animals-no.gif
   trunk/res_noewe/attributes/animals-non.gif
   trunk/res_noewe/attributes/animals-yes.gif
   trunk/res_noewe/attributes/arith_prob-no.gif
   trunk/res_noewe/attributes/arith_prob-non.gif
   trunk/res_noewe/attributes/arith_prob-yes.gif
   trunk/res_noewe/attributes/ask-no.gif
   trunk/res_noewe/attributes/ask-non.gif
   trunk/res_noewe/attributes/ask-yes.gif
   trunk/res_noewe/attributes/car-no.gif
   trunk/res_noewe/attributes/car-non.gif
   trunk/res_noewe/attributes/car-yes.gif
   trunk/res_noewe/attributes/cave-no.gif
   trunk/res_noewe/attributes/cave-non.gif
   trunk/res_noewe/attributes/cave-yes.gif
   trunk/res_noewe/attributes/date-no.gif
   trunk/res_noewe/attributes/date-non.gif
   trunk/res_noewe/attributes/date-yes.gif
   trunk/res_noewe/attributes/day-no.gif
   trunk/res_noewe/attributes/day-non.gif
   trunk/res_noewe/attributes/day-yes.gif
   trunk/res_noewe/attributes/indoor-no.gif
   trunk/res_noewe/attributes/indoor-non.gif
   trunk/res_noewe/attributes/indoor-yes.gif
   trunk/res_noewe/attributes/interestsign-no.gif
   trunk/res_noewe/attributes/interestsign-non.gif
   trunk/res_noewe/attributes/interestsign-yes.gif
   trunk/res_noewe/attributes/letter-no.gif
   trunk/res_noewe/attributes/letter-non.gif
   trunk/res_noewe/attributes/letter-yes.gif
   trunk/res_noewe/attributes/moving-no.gif
   trunk/res_noewe/attributes/moving-non.gif
   trunk/res_noewe/attributes/moving-yes.gif
   trunk/res_noewe/attributes/naturschutz-no.gif
   trunk/res_noewe/attributes/naturschutz-non.gif
   trunk/res_noewe/attributes/naturschutz-yes.gif
   trunk/res_noewe/attributes/nogps-no.gif
   trunk/res_noewe/attributes/nogps-non.gif
   trunk/res_noewe/attributes/nogps-yes.gif
   trunk/res_noewe/attributes/oconly-no.gif
   trunk/res_noewe/attributes/oconly-non.gif
   trunk/res_noewe/attributes/oconly-yes.gif
   trunk/res_noewe/attributes/othercache-no.gif
   trunk/res_noewe/attributes/othercache-non.gif
   trunk/res_noewe/attributes/othercache-yes.gif
   trunk/res_noewe/attributes/overnight-no.gif
   trunk/res_noewe/attributes/overnight-non.gif
   trunk/res_noewe/attributes/overnight-yes.gif
   trunk/res_noewe/attributes/plants-no.gif
   trunk/res_noewe/attributes/plants-non.gif
   trunk/res_noewe/attributes/plants-yes.gif
   trunk/res_noewe/attributes/riddle-no.gif
   trunk/res_noewe/attributes/riddle-non.gif
   trunk/res_noewe/attributes/riddle-yes.gif
   trunk/res_noewe/attributes/steep-no.gif
   trunk/res_noewe/attributes/steep-non.gif
   trunk/res_noewe/attributes/steep-yes.gif
   trunk/res_noewe/attributes/tide-no.gif
   trunk/res_noewe/attributes/tide-non.gif
   trunk/res_noewe/attributes/tide-yes.gif
   trunk/res_noewe/attributes/time-no.gif
   trunk/res_noewe/attributes/time-non.gif
   trunk/res_noewe/attributes/time-yes.gif
   trunk/res_noewe/attributes/tools-no.gif
   trunk/res_noewe/attributes/tools-non.gif
   trunk/res_noewe/attributes/tools-yes.gif
   trunk/res_noewe/attributes/train-no.gif
   trunk/res_noewe/attributes/train-non.gif
   trunk/res_noewe/attributes/train-yes.gif
   trunk/res_noewe/attributes/webcam-no.gif
   trunk/res_noewe/attributes/webcam-non.gif
   trunk/res_noewe/attributes/webcam-yes.gif
   trunk/res_noewe/attributes/wiki-no.gif
   trunk/res_noewe/attributes/wiki-non.gif
   trunk/res_noewe/attributes/wiki-yes.gif
   trunk/res_noewe/attributes/wwwlink-no.gif
   trunk/res_noewe/attributes/wwwlink-non.gif
   trunk/res_noewe/attributes/wwwlink-yes.gif
Removed:
   trunk/res_noewe/attributes-big/
   trunk/res_noewe/attributes/Thumbs.db
Modified:
   trunk/res_noewe/attributes/available-no.gif
   trunk/res_noewe/attributes/available-non.gif
   trunk/res_noewe/attributes/available-yes.gif
   trunk/res_noewe/attributes/bicycles-no.gif
   trunk/res_noewe/attributes/bicycles-yes.gif
   trunk/res_noewe/attributes/boat-no.gif
   trunk/res_noewe/attributes/boat-non.gif
   trunk/res_noewe/attributes/boat-yes.gif
   trunk/res_noewe/attributes/cactus-no.gif
   trunk/res_noewe/attributes/cactus-yes.gif
   trunk/res_noewe/attributes/campfires-no.gif
   trunk/res_noewe/attributes/campfires-yes.gif
   trunk/res_noewe/attributes/camping-no.gif
   trunk/res_noewe/attributes/camping-yes.gif
   trunk/res_noewe/attributes/cliff-no.gif
   trunk/res_noewe/attributes/cliff-non.gif
   trunk/res_noewe/attributes/cliff-yes.gif
   trunk/res_noewe/attributes/climbing-no.gif
   trunk/res_noewe/attributes/climbing-non.gif
   trunk/res_noewe/attributes/climbing-yes.gif
   trunk/res_noewe/attributes/compass-no.gif
   trunk/res_noewe/attributes/compass-non.gif
   trunk/res_noewe/attributes/compass-yes.gif
   trunk/res_noewe/attributes/cow-no.gif
   trunk/res_noewe/attributes/cow-yes.gif
   trunk/res_noewe/attributes/danger-no.gif
   trunk/res_noewe/attributes/danger-non.gif
   trunk/res_noewe/attributes/danger-yes.gif
   trunk/res_noewe/attributes/dogs-no.gif
   trunk/res_noewe/attributes/dogs-yes.gif
   trunk/res_noewe/attributes/error.gif
   trunk/res_noewe/attributes/fee-no.gif
   trunk/res_noewe/attributes/fee-non.gif
   trunk/res_noewe/attributes/fee-yes.gif
   trunk/res_noewe/attributes/firstaid-no.gif
   trunk/res_noewe/attributes/firstaid-non.gif
   trunk/res_noewe/attributes/firstaid-yes.gif
   trunk/res_noewe/attributes/flashlight-no.gif
   trunk/res_noewe/attributes/flashlight-non.gif
   trunk/res_noewe/attributes/flashlight-yes.gif
   trunk/res_noewe/attributes/hiking-no.gif
   trunk/res_noewe/attributes/hiking-non.gif
   trunk/res_noewe/attributes/hiking-yes.gif
   trunk/res_noewe/attributes/horses-no.gif
   trunk/res_noewe/attributes/horses-yes.gif
   trunk/res_noewe/attributes/hunting-no.gif
   trunk/res_noewe/attributes/hunting-non.gif
   trunk/res_noewe/attributes/hunting-yes.gif
   trunk/res_noewe/attributes/jeeps-no.gif
   trunk/res_noewe/attributes/jeeps-yes.gif
   trunk/res_noewe/attributes/kids-no.gif
   trunk/res_noewe/attributes/kids-non.gif
   trunk/res_noewe/attributes/kids-yes.gif
   trunk/res_noewe/attributes/mine-no.gif
   trunk/res_noewe/attributes/mine-non.gif
   trunk/res_noewe/attributes/mine-yes.gif
   trunk/res_noewe/attributes/motorcycles-no.gif
   trunk/res_noewe/attributes/motorcycles-yes.gif
   trunk/res_noewe/attributes/night-no.gif
   trunk/res_noewe/attributes/night-non.gif
   trunk/res_noewe/attributes/night-yes.gif
   trunk/res_noewe/attributes/onehour-no.gif
   trunk/res_noewe/attributes/onehour-yes.gif
   trunk/res_noewe/attributes/parking-no.gif
   trunk/res_noewe/attributes/parking-non.gif
   trunk/res_noewe/attributes/parking-yes.gif
   trunk/res_noewe/attributes/phone-no.gif
   trunk/res_noewe/attributes/phone-non.gif
   trunk/res_noewe/attributes/phone-yes.gif
   trunk/res_noewe/attributes/picnic-no.gif
   trunk/res_noewe/attributes/picnic-yes.gif
   trunk/res_noewe/attributes/poisonoak-no.gif
   trunk/res_noewe/attributes/poisonoak-non.gif
   trunk/res_noewe/attributes/poisonoak-yes.gif
   trunk/res_noewe/attributes/public-no.gif
   trunk/res_noewe/attributes/public-non.gif
   trunk/res_noewe/attributes/public-yes.gif
   trunk/res_noewe/attributes/quads-no.gif
   trunk/res_noewe/attributes/quads-yes.gif
   trunk/res_noewe/attributes/rappelling-no.gif
   trunk/res_noewe/attributes/rappelling-non.gif
   trunk/res_noewe/attributes/rappelling-yes.gif
   trunk/res_noewe/attributes/restrooms-no.gif
   trunk/res_noewe/attributes/restrooms-non.gif
   trunk/res_noewe/attributes/restrooms-yes.gif
   trunk/res_noewe/attributes/scenic-no.gif
   trunk/res_noewe/attributes/scenic-yes.gif
   trunk/res_noewe/attributes/scuba-no.gif
   trunk/res_noewe/attributes/scuba-non.gif
   trunk/res_noewe/attributes/scuba-yes.gif
   trunk/res_noewe/attributes/snakes-no.gif
   trunk/res_noewe/attributes/snakes-yes.gif
   trunk/res_noewe/attributes/snowmobiles-no.gif
   trunk/res_noewe/attributes/snowmobiles-yes.gif
   trunk/res_noewe/attributes/stealth-no.gif
   trunk/res_noewe/attributes/stealth-yes.gif
   trunk/res_noewe/attributes/stroller-no.gif
   trunk/res_noewe/attributes/stroller-yes.gif
   trunk/res_noewe/attributes/swimming-no.gif
   trunk/res_noewe/attributes/swimming-non.gif
   trunk/res_noewe/attributes/swimming-yes.gif
   trunk/res_noewe/attributes/thorn-no.gif
   trunk/res_noewe/attributes/thorn-non.gif
   trunk/res_noewe/attributes/thorn-yes.gif
   trunk/res_noewe/attributes/ticks-no.gif
   trunk/res_noewe/attributes/ticks-non.gif
   trunk/res_noewe/attributes/ticks-yes.gif
   trunk/res_noewe/attributes/wading-no.gif
   trunk/res_noewe/attributes/wading-non.gif
   trunk/res_noewe/attributes/wading-yes.gif
   trunk/res_noewe/attributes/water-no.gif
   trunk/res_noewe/attributes/water-non.gif
   trunk/res_noewe/attributes/water-yes.gif
   trunk/res_noewe/attributes/wheelchair-no.gif
   trunk/res_noewe/attributes/wheelchair-yes.gif
   trunk/res_noewe/attributes/winter-no.gif
   trunk/res_noewe/attributes/winter-non.gif
   trunk/res_noewe/attributes/winter-yes.gif
   trunk/res_noewe/languages/DE.cfg
   trunk/res_noewe/languages/EN.cfg
   trunk/res_noewe/languages/FR.cfg
   trunk/res_noewe/languages/NL.cfg
   trunk/res_noewe/languages/PL.cfg
   trunk/res_noewe/languages/SV.cfg
   trunk/src/CacheWolf/Attribute.java
   trunk/src/CacheWolf/Attributes.java
   trunk/src/CacheWolf/AttributesSelector.java
   trunk/src/CacheWolf/AttributesViewer.java
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/Filter.java
   trunk/src/CacheWolf/FilterData.java
   trunk/src/CacheWolf/FilterScreen.java
   trunk/src/CacheWolf/Preferences.java
   trunk/src/CacheWolf/Profile.java
   trunk/src/CacheWolf/ShowCacheInBrowser.java
   trunk/src/CacheWolf/imp/GPXImporter.java
   trunk/src/CacheWolf/imp/OCXMLImporter.java
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
import cache attributes from OC(de) and gpx-files (GC). Extending attributes with new ones from OC.

Deleted: trunk/res_noewe/attributes/Thumbs.db
===================================================================
(Binary files differ)

Added: trunk/res_noewe/attributes/aircraft-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/aircraft-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/aircraft-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/aircraft-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/aircraft-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/aircraft-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/animals-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/animals-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/animals-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/animals-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/animals-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/animals-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/arith_prob-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/arith_prob-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/arith_prob-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/arith_prob-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/arith_prob-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/arith_prob-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/ask-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/ask-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/ask-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/ask-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/ask-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/ask-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/attributes/available-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/available-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/available-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/bicycles-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/bicycles-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/boat-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/boat-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/boat-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/cactus-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/cactus-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/campfires-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/campfires-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/camping-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/camping-yes.gif
===================================================================
(Binary files differ)

Added: trunk/res_noewe/attributes/car-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/car-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/car-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/car-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/car-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/car-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/cave-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/cave-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/cave-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/cave-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/cave-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/cave-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/attributes/cliff-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/cliff-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/cliff-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/climbing-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/climbing-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/climbing-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/compass-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/compass-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/compass-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/cow-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/cow-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/danger-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/danger-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/danger-yes.gif
===================================================================
(Binary files differ)

Added: trunk/res_noewe/attributes/date-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/date-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/date-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/date-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/date-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/date-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/day-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/day-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/day-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/day-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/day-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/day-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/attributes/dogs-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/dogs-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/error.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/fee-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/fee-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/fee-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/firstaid-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/firstaid-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/firstaid-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/flashlight-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/flashlight-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/flashlight-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/hiking-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/hiking-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/hiking-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/horses-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/horses-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/hunting-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/hunting-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/hunting-yes.gif
===================================================================
(Binary files differ)

Added: trunk/res_noewe/attributes/indoor-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/indoor-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/indoor-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/indoor-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/indoor-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/indoor-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/interestsign-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/interestsign-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/interestsign-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/interestsign-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/interestsign-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/interestsign-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/attributes/jeeps-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/jeeps-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/kids-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/kids-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/kids-yes.gif
===================================================================
(Binary files differ)

Added: trunk/res_noewe/attributes/letter-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/letter-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/letter-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/letter-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/letter-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/letter-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/attributes/mine-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/mine-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/mine-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/motorcycles-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/motorcycles-yes.gif
===================================================================
(Binary files differ)

Added: trunk/res_noewe/attributes/moving-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/moving-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/moving-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/moving-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/moving-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/moving-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/naturschutz-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/naturschutz-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/naturschutz-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/naturschutz-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/naturschutz-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/naturschutz-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/attributes/night-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/night-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/night-yes.gif
===================================================================
(Binary files differ)

Added: trunk/res_noewe/attributes/nogps-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/nogps-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/nogps-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/nogps-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/nogps-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/nogps-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/oconly-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/oconly-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/oconly-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/oconly-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/oconly-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/oconly-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/attributes/onehour-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/onehour-yes.gif
===================================================================
(Binary files differ)

Added: trunk/res_noewe/attributes/othercache-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/othercache-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/othercache-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/othercache-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/othercache-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/othercache-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/overnight-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/overnight-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/overnight-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/overnight-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/overnight-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/overnight-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/attributes/parking-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/parking-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/parking-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/phone-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/phone-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/phone-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/picnic-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/picnic-yes.gif
===================================================================
(Binary files differ)

Added: trunk/res_noewe/attributes/plants-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/plants-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/plants-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/plants-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/plants-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/plants-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/attributes/poisonoak-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/poisonoak-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/poisonoak-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/public-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/public-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/public-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/quads-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/quads-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/rappelling-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/rappelling-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/rappelling-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/restrooms-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/restrooms-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/restrooms-yes.gif
===================================================================
(Binary files differ)

Added: trunk/res_noewe/attributes/riddle-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/riddle-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/riddle-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/riddle-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/riddle-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/riddle-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/attributes/scenic-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/scenic-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/scuba-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/scuba-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/scuba-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/snakes-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/snakes-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/snowmobiles-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/snowmobiles-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/stealth-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/stealth-yes.gif
===================================================================
(Binary files differ)

Added: trunk/res_noewe/attributes/steep-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/steep-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/steep-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/steep-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/steep-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/steep-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/attributes/stroller-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/stroller-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/swimming-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/swimming-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/swimming-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/thorn-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/thorn-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/thorn-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/ticks-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/ticks-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/ticks-yes.gif
===================================================================
(Binary files differ)

Added: trunk/res_noewe/attributes/tide-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/tide-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/tide-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/tide-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/tide-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/tide-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/time-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/time-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/time-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/time-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/time-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/time-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/tools-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/tools-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/tools-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/tools-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/tools-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/tools-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/train-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/train-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/train-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/train-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/train-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/train-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/attributes/wading-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/wading-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/wading-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/water-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/water-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/water-yes.gif
===================================================================
(Binary files differ)

Added: trunk/res_noewe/attributes/webcam-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/webcam-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/webcam-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/webcam-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/webcam-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/webcam-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/attributes/wheelchair-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/wheelchair-yes.gif
===================================================================
(Binary files differ)

Added: trunk/res_noewe/attributes/wiki-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/wiki-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/wiki-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/wiki-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/wiki-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/wiki-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/attributes/winter-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/winter-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/winter-yes.gif
===================================================================
(Binary files differ)

Added: trunk/res_noewe/attributes/wwwlink-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/wwwlink-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/wwwlink-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/wwwlink-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/wwwlink-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/wwwlink-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/languages/DE.cfg
===================================================================
--- trunk/res_noewe/languages/DE.cfg	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/res_noewe/languages/DE.cfg	2010-03-07 18:41:44 UTC (rev 2506)
@@ -31,7 +31,7 @@
 		127=Speichern
 		128=%fcber Template
 		129=aus GPX Datei
-		130=von opencaching de,pl,cz,uk
+		130=von opencaching
 		131=von geocaching.com
 		132=nach Explorist
 		133=Suche alle
@@ -517,8 +517,8 @@
 		1740=Kreuzpeilungswinkel m?ssen im Bereich [0;360] sein
 		1741=Kreuzpeilungswinkel m?ssen im Bereich [0;2*PI] sein
 		1742=Abstand der Punkte in der Kreuzpeilung ist zu klein
-		1743=Kreuzpeilung nicht m?glich. Bitte Entwickler auf geoclub.de informieren!
-		1744=Kreuzpeilung mit identischen Peilungswinkeln nicht m?glich
+		1743=Kreuzpeilung nicht m%f6glich. Bitte Entwickler auf geoclub.de informieren!
+		1744=Kreuzpeilung mit identischen Peilungswinkeln nicht m%f6glich
 		1800=Georeferenzierte Karten herunterladen
 		1801=Kacheln herunterladen
 		1802=Laden georeferenzierter Karten%0a W%e4hle Onlinedienst:
@@ -552,7 +552,7 @@
 		1830=Der gew%e4hlte Kartendienst bietet Karten in einem Ma%dfstab von
 		1831= bis
 		1832=%0a Bitte 'Ca. m pro Pixel' entsprechend anpassen
-		1833=Bitte w?hlen Sie nicht die Trennlinie als WMS-Service
+		1833=Bitte w%e4hlen Sie nicht die Trennlinie als WMS-Service
 		1834=Bitte den Pfad zur Kosmos.Console.exe in die wms-Datei richtig eintragen.
 		2000=GPX Export
 		2001=von
@@ -566,91 +566,152 @@
 		2502=Immer zug%e4nglich (24/7)
 		2503=Keine Fahrr%e4der
 		2504=Fahrr%e4der erlaubt
-		2505=*boat-no
-		2506=*boat-yes
-		2507=*cactus-no
-		2508=*cactus-yes
+		2505=ohne Wasserfahrzeug
+		2506=Wasserfahrzeug erforderlich
+		2507=keine Kakteen
+		2508=Kakteen
 		2509=Keine Lagerfeuer
 		2510=Lagerfeuer erlaubt
 		2511=Kein Camping
 		2512=Camping erlaubt
-		2513=*cliff-no
-		2514=Gefahr durch Steinfall
-		2515=Kein schwieriges Klettern
-		2516=Schwieriges Klettern
-		2517=*compass-no
-		2518=*compass-yes
-		2519=*cow-no
+		2513=keine Klippen / Felsen
+		2514=!!! Steinschlag / Absturz
+		2515=Kein Klettern
+		2516=Klettern (ohne Ausr%fcstung)
+		2517=kein Kompass notwendig
+		2518=Kompass notwendig
+		2519=kein Weidevieh
 		2520=Achtung Weidevieh
-		2521=*danger-no
-		2522=Gef%e4hrliches Gebiet
+		2521=ungef%e4hrliches Gebiet
+		2522=!!! gef%e4hrliches Gebiet
 		2523=Keine Hunde
 		2524=Hunde erlaubt
-		2525=*fee-no
-		2526=Eintritts-/Parkgeb%fchr
-		2527=*hiking-no
+		2525=keine Eintritts- / Parkgeb%fchr
+		2526=Eintritts- / Parkgeb%fchr
+		2527=kein Wandern
 		2528=Anstrengende Wanderung
 		2529=Keine Pferde
 		2530=Pferde erlaubt
-		2531=*hunting-no
-		2532=Jagdgebiet
+		2531=kein Jagdgebiet
+		2532=!!! Jagdgebiet
 		2533=Keine Gel%e4ndefahrzeuge
 		2534=Gel%e4ndefahrzeuge erlaubt
-		2535=Keine Kinder
-		2536=Kinderfreundlich
-		2537=*mine-no
-		2538=*mine-yes
+		2535=nicht f%fcr Kinder geeignet
+		2536=kindgerechter Cache
+		2537=kein Bergbaugebiet
+		2538=!!! Bergbaugebiet (ehemaliges)
 		2539=Keine Motorr%e4der
 		2540=Motorr%e4der erlaubt
 		2541=Nicht bei Nacht empfohlen
-		2542=Auch bei Nacht m%f6glich
-		2543=Dauert l%e4nger als eine Stunde
-		2544=In weniger als 1 Stunde m%f6glich
-		2545=*parking-no
+		2542=Nur bei Nacht m%f6glich
+		2543=Dauert l%e4nger als 1 Stunde
+		2544=Dauert weniger als 1 Stunde
+		2545=kein Parkplatz
 		2546=Parkplatz verf%fcgbar
-		2547=*phone-no
+		2547=kein Telefon
 		2548=Telefon verf%fcgbar
-		2549=*picnic-no
-		2550=Picnictische verf%fcgbar
-		2551=*poisonoak-no
-		2552=*poisonoak-yes
-		2553=*public-no
-		2554=%d6ffentliches Verkehrsmittel verf%fcgbar
+		2549=kein Picnic
+		2550=Grillplatz
+		2551=keine giftigen Pflanzen
+		2552=giftige Pflanzen
+		2553=nicht mit %d6PNV erreichbar
+		2554=%d6PNV erreichbar
 		2555=Keine Quadbikes
 		2556=Quadbikes erlaubt
-		2557=*rappelling-no
-		2558=Kletterausr%fcstung notwendig
-		2559=*restrooms-no
+		2557=ohne Kletterausr%fcstung
+		2558=Kletterausr%fcstung erforderlich
+		2559=keine Toiletten
 		2560=Toiletten verf%fcgbar
-		2561=*scenic-no
+		2561=kein Ausblick
 		2562=Sch%f6ner Ausblick
-		2563=*scuba-no
-		2564=*scuba-yes
-		2565=*snakes-no
-		2566=*snakes-yes
-		2567=Keine Snowmobile
-		2568=*snowmobiles-yes
+		2563=kein Tauchger%e4t n%f6tig
+		2564=Tauchger%e4t erforderlich
+		2565=keine Schlangen
+		2566=Schlangen
+		2567=Keine Schneemobile
+		2568=Schneemobil erlaubt
 		2569=Kein heimliches Agieren notwendig
-		2570=Heimliches Agieren notwendig
+		2570=Heimlich / listig
 		2571=F%fcr Kinderwagen nicht geeignet
 		2572=F%fcr Kinderwagen geeignet
-		2573=*swimming-no
-		2574=*swimming-yes
-		2575=*thorn-no
-		2576=Dornen!
-		2577=*ticks-no
-		2578=Zecken!
-		2579=*wading-no
-		2580=Waten m%f6glich
-		2581=*water-no
+		2573=kein Schwimmen
+		2574=Schwimmen
+		2575=keine Dornen
+		2576=!!! Dornen
+		2577=keine Zecken
+		2578=!!! Zecken
+		2579=Waten nicht notwendig
+		2580=Waten notwendig
+		2581=kein Trinkwasser
 		2582=Trinkwasser verf%fcgbar
-		2583=F%fcr Rollst%fchle nicht geeignet
-		2584=Geeignet f%fc Rollst%fchle
-		2585=Im Winter nicht verf%fcgbar
-		2586=Auch im Winter verf%fcgbar
-		2587=Keine Cachewartung notwendig
-		2588=Cache-wartung notwendig
-		2589=Taschenlampe notwendig
+		2583=nicht f%fcr Rollst%fchle
+		2584=Geeignet f%fcr Rollst%fchle
+		2585=nicht im Winter
+		2586=Schneesicher / im Winter
+		2587=Erste Hilfe nicht verf%fcgbar
+		2588=Erste Hilfe verf%fcgbar
+		2589=Keine Taschenlampe notwendig
+		2590=Taschenlampe notwendig
+		2591=kein Flugger%e4t notwendig
+		2592=Flugger%e4t erforderlich
+		2593=keine giftigen/gef%e4hrliche Tiere
+		2594=!!! Giftige/gef%e4hrliche Tiere
+		2595=keine Rechenaufgabe
+		2596=Rechenaufgabe
+		2597=keine Startbedingungen
+		2598=Startbedingungen erfragen
+		2599=nicht mit dem Auto erreichbar
+		2600=Nahe beim Auto
+		2601=keine H%f6hlenausr%fcstung n%f6tig
+		2602=H%f6hlenausr%fcstung erforderlich
+		2603=nicht ganzj%e4hrig
+		2604=w%e4hrend des ganzen Jahres
+		2605=nicht tags%fcber
+		2606=nur tags%fcber
+		2607=nicht in geschlossenen R%e4umen
+		2608=In geschlossenen R%e4umen
+		2609=kein interessanter Ort
+		2610=Interessanter Ort
+		2611=keine Letterbox (kein Stempel)
+		2612=Letterbox (ben%f6tigt Stempel)
+		2613=festes Ziel
+		2614=Bewegliches Ziel
+		2615=kein/e Brutsaison / Naturschutz
+		2616=Brutsaison / Naturschutz
+		2617=GPS erforderlich
+		2618=Ohne GPS machbar
+		2619=nicht nur bei Opencaching logbar
+		2620=Nur bei Opencaching logbar
+		2621=normaler Cachetype
+		2622=Besonderer Cachetype
+		2623=keine %dcbernachtung erforderlich
+		2624=%dcbernachtung erforderlich
+		2625=
+		2626=
+		2627=
+		2628=
+		2629=kein R%e4tsel
+		2630=R%e4tsel
+		2631=
+		2632=
+		2633=ebenes Gel%e4nde
+		2634=H%fcgeliges Gel%e4nde
+		2635=nicht im Wasser
+		2636=Im Wasser
+		2637=unabh%e4ngig von Gezeiten
+		2638=Gezeiten abh%e4ngig
+		2639=nicht an bestimmte Zeiten gebunden
+		2640=An bestimmte Zeiten gebunden
+		2641=Keine spezielle Ausr%fcstung
+		2642=Spezielle Ausr%fcstung
+		2643=keine nahe Eisenbahnlinie
+		2644=Eisenbahnlinie nahbei
+		2645=ohne Webcam
+		2646=Webcam am Ziel
+		2647=ohne Recherche
+		2648=Recherche
+		2649=kein Link zu GC,...
+		2650=Hyperlink zu GC,...
 		3000=Schlie%dfen
 		4000=Geladene Caches:+
 		4001=GPX-Dateien von Opencaching enthalten keine Informationen zu Bildern, sie werden nicht heruntergeladen. Am besten Caches von Opencaching holen per Men%fc /Anwendung/Import/von Opencaching

Modified: trunk/res_noewe/languages/EN.cfg
===================================================================
--- trunk/res_noewe/languages/EN.cfg	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/res_noewe/languages/EN.cfg	2010-03-07 18:41:44 UTC (rev 2506)
@@ -560,91 +560,152 @@
 		2502=available 24-7
 		2503=no bikes
 		2504=bikes allowed
-		2505=*boat-no
-		2506=*boat-yes
-		2507=*cactus-no
-		2508=*cactus-yes
+		2505=no boat needed
+		2506=boat needed
+		2507=no cactus
+		2508=cactus attention
 		2509=no campfires
 		2510=campfires allowed
 		2511=No camping
 		2512=Camping allowed
-		2513=*cliff-no
+		2513=no cliff/falling rock
 		2514=falling rocks nearby
-		2515=no difficult climbing
-		2516=difficult climbing
-		2517=*compass-no
-		2518=*compass-yes
-		2519=*cow-no
+		2515=no climbing
+		2516=climbing (without equipment)
+		2517=no compass
+		2518=compass needed
+		2519=no livestock
 		2520=watch for livestock
-		2521=*danger-no
+		2521=dangerous area
 		2522=dangerous area
 		2523=no dogs
 		2524=dogs allowed
-		2525=*fee-no
+		2525=no fees
 		2526=access/parking fees
-		2527=*hiking-no
+		2527=no significant hike
 		2528=significant hike
-		2529=no horses
+		2529=horses not allowed
 		2530=horses allowed
-		2531=*hunting-no
+		2531=no hunting area
 		2532=hunting area
 		2533=no off-road vehicles
 		2534=off-road vehicles allowed
-		2535=no kids
+		2535=not for kids
 		2536=kid friendly
-		2537=*mine-no
-		2538=*mine-yes
+		2537=no mine danger
+		2538=mine(former) danger
 		2539=no motorcycles
 		2540=motorcycles allowed
-		2541=not recommended at night
-		2542=recommended at night
+		2541=not ony at night
+		2542=only at night
 		2543=takes more than one hour
 		2544=takes less than one hour
-		2545=*parking-no
+		2545=no near parking
 		2546=parking available
-		2547=*phone-no
+		2547=no near public phone
 		2548=telephone nearby
-		2549=*picnic-no
+		2549=no picnic possible
 		2550=picnic tables available
-		2551=*poisonoak-no
-		2552=*poisonoak-yes
-		2553=*public-no
+		2551=no poisonoak
+		2552=!!! poisonoak
+		2553=no public transit available
 		2554=public transit available
 		2555=no quads
 		2556=quads allowed
-		2557=*rappelling-no
-		2558=climbing gear
-		2559=*restrooms-no
+		2557=climbing gear not needed
+		2558=climbing gear needed
+		2559=no restrooms available
 		2560=restrooms available
-		2561=*scenic-no
+		2561=no scenic view
 		2562=scenic view
-		2563=*scuba-no
-		2564=*scuba-yes
-		2565=*snakes-no
-		2566=*snakes-yes
-		2567=no snowmobiles
-		2568=*snowmobiles-yes
-		2569=no stealth required
+		2563=no scuba needed
+		2564=scuba needed
+		2565=no snakes
+		2566=!!! snakes
+		2567=no snowmobiles allowed
+		2568=snowmobiles allowed
+		2569=stealth not required
 		2570=stealth required
 		2571=not stroller accessible
 		2572=stroller accessible
-		2573=*swimming-no
-		2574=*swimming-yes
-		2575=*thorn-no
-		2576=thorns!
-		2577=*ticks-no
-		2578=ticks!
-		2579=*wading-no
+		2573=swimming not required
+		2574=swimming required
+		2575=no thorns
+		2576=!!! thorns
+		2577=no ticks
+		2578=!!! ticks
+		2579=wading not required
 		2580=may require wading
-		2581=*water-no
+		2581=no drinking water
 		2582=drinking water nearby
 		2583=not wheelchair accessible
 		2584=wheelchair accessible
 		2585=not available in winter
 		2586=available in winter
-		2587=No maintenance needed
-		2588=Needs maintenance
-		2589=Flashlight required
+		2587=No first aid there
+		2588=first aid there
+		2589=no Flashlight required
+		2590=Flashlight required
+		2591=no aircraft required
+		2592=aircraft required
+		2593=no poison / dangerous animals
+		2594=poison / dangerous animals
+		2595=no arithmetic problem
+		2596=arithmetic problem
+		2597=no further info
+		2598=ask owner for infos
+		2599=no drive in
+		2600=is near car (drive in)
+		2601=no cave
+		2602=cave utilities
+		2603=not whole year
+		2604=whole year
+		2605=not at daytime
+		2606=only daytime
+		2607=not in closed rooms
+		2608=in closed rooms
+		2609=no interesting place
+		2610=interesting place
+		2611=no letterbox (no stamp needed)
+		2612=letterbox (stamp needed)
+		2613=fixed target
+		2614=moving target
+		2615=no breeding season / conservation
+		2616=breeding season / conservation
+		2617=GPS needed
+		2618=no GPS needed
+		2619=not only listed at Opencaching
+		2620=only listed at Opencaching
+		2621=normal cache
+		2622=special type of cache
+		2623=no overnight stay required
+		2624=overnight stay required
+		2625=
+		2626=
+		2627=
+		2628=
+		2629=no riddle
+		2630=riddle
+		2631=
+		2632=
+		2633=flat terrain
+		2634=Hilly terrain
+		2635=not in water
+		2636=in water
+		2637=tides independant
+		2638=tides dependant
+		2639=not tied to specific times
+		2640=tied to specific times
+		2641=no special equipment needed
+		2642=special equipment needed
+		2643=no railway line close up
+		2644=railway line close up
+		2645=without webcam
+		2646=webcam at the target
+		2647=no investigations necessary
+		2648=investigations necessary
+		2649=no link to GC,...
+		2650=hyperlink to GC,...
 		3000=Close
 		4000=Loaded caches:+
 		4001=GPX files from opencaching don't contain information of images, they cannot be laoded. Best you get caches from opencaching by menu /Application/Import/Download from Opencaching

Modified: trunk/res_noewe/languages/FR.cfg
===================================================================
--- trunk/res_noewe/languages/FR.cfg	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/res_noewe/languages/FR.cfg	2010-03-07 18:41:44 UTC (rev 2506)
@@ -424,7 +424,7 @@
 		1409=Yards
 		1410=Mille
 		1411=Entrez coordonn%e9es valides, svp.
-		1412=Coordonn%e9es pas valides. Prendre-les quand-m?me ?
+		1412=Coordonn%e9es pas valides. Prendre-les quand-m%eame ?
 		1413=Effacer
 		1414=Recherche
 		1500=Destination:
@@ -484,7 +484,7 @@
 		1708=Nom de fonction pas unique:
 		1709=Fonction inconnue:
 		1710=Ne peut pas compter cha%eene de caract%e8res vide
-		1711=Cha%eenes de caract%e8res de remplacement doivent avoir la m?me longuer
+		1711=Cha%eenes de caract%e8res de remplacement doivent avoir la m%eame longuer
 		1712=Coordonn%e9e invalide:
 		1713=Format de coordonn%e9es pas valide. Faut avoir cw / dd / dmm / dms /+
 		1714=Goto: Waypoint n'existe pas:
@@ -492,7 +492,7 @@
 		1716=mid: Attendu param%e8tre en nombre entier
 		1717=mid: Param%e8tre hors domaine valide
 		1718=Ne peut pas projeter une distance negative
-		1719=Angle doit ?tre dans la domaine [0;360]
+		1719=Angle doit %eatre dans la domaine [0;360]
 		1720=Ne peut pas extraire la racine d'un nombre negativ
 		1723=Attendu un operateur de comparaison
 		1724=Variable n'a pas de valeur:
@@ -510,7 +510,7 @@
 		1736=Charger
 		1737=Enregistrer
 		1738=Enregistrer sous
-		1739=Angle doit ?tre dans la domaine [0;2*PI]
+		1739=Angle doit %eatre dans la domaine [0;2*PI]
 		1739=[Projection degrees must be in interval [0;2*PI]]
 		1740=[Crossbearing degrees  must be in interval [0;360]]
 		1741=[Crossbearing degrees  must be in interval [0;2*PI]]
@@ -543,8 +543,8 @@
 		1824=T%e9l%e9charge carte synoptique
 		1825=Carte synoptique: Ignore erreurs:
 		1826=Charger et calibrer des cartes fini
-		1827='Radius' doit ?tre plus grand que zero
-		1828='Chevauchement' ne doit pas ?tre moins que zero
+		1827='Radius' doit %eatre plus grand que zero
+		1828='Chevauchement' ne doit pas %eatre moins que zero
 		1829=Entrez un 'centre' autour duquel les cartes seront charg%e9es.
 		1830=Le service de cartes choisi offre cartes en %e9chelle de
 		1831= %e0
@@ -647,7 +647,68 @@
 		2586=Disponible en hiver
 		2587=Entretien de la cache pas n%e9cessaire
 		2588=Entretien de la cache n%e9cessaire
-		2589=Lampe n%e9cessaire
+2589 = pas de lampe de poche n%e9cessaire
+2590 = Lampe de poche n%e9cessaire
+2591 = pas d'avions n%e9cessaire
+2592 = avions n%e9cessaire
+2593 = animaux pas de poison / dangereux
+2594 = dangereux poison / animaux
+2595 = pas de probl%e8me d'arithm%e9tique
+2596 = probl%e8me arithm%e9tique
+2597 = Pas d'infos suppl%e9mentaires
+2598 = demander au propri%e9taire d'infos
+2599 = pas de disque dans
+2600 = est pr%e8s de voiture (drive in)
+2601 = pas de cave
+2602 = grotte Utilities
+2603 = ann%e9es pas entier
+2604 = ann%e9e enti%e8re
+2605 = pas du jour
+2606 = uniquement pendant la journ%e9e
+2607 = pas dans des pi%e8ces ferm%e9es
+2608 = dans des locaux ferm%e9s
+2609 = pas de place int%e9ressante
+2610 = place int%e9ressant
+2611 = pas de bo%eete aux lettres (pas de tampon n%e9cessaire)
+2612 = letterbox (timbre n%e9cessaire)
+2613 = cible fixe
+2614 = Moving Target
+2615 = pas de saison de reproduction / conservation
+2616 = saison de reproduction / conservation
+2617 = GPS n%e9cessaires
+2618 = pas besoin de GPS
+2619 = non seulement r%e9pertori%e9s au Opencaching
+2620 = uniquement r%e9pertori%e9s au Opencaching
+2621 = cache normal
+2622 = type particulier de m%e9moire cache
+2623 = pas de s%e9jour n%e9cessaire
+2624 = s%e9jour n%e9cessaire
+2625 =
+2626 =
+2627 =
+2628 =
+2629 = pas de devinette
+2630 = %e9nigme
+2631 =
+2632 =
+2633 = terrain plat
+2634 = Les terrains montagneux
+2635 = pas dans l'eau
+2636 = dans l'eau
+2637 = mar%e9es ind%e9pendante
+2638 = mar%e9es %e0 charge
+2639 = pas li%e9e %e0 des moments pr%e9cis
+2640 = li%e9e %e0 des moments pr%e9cis
+2641 = pas d'%e9quipement sp%e9cial n%e9cessaire
+2642 = %e9quipements sp%e9ciaux n%e9cessaires
+2643 = pas de ligne de chemin de fer de pr%e8s
+2644 = ligne de chemin de fer de pr%e8s
+2645 = sans webcam
+2646 = webcam %e0 la cible
+2647 = no investigations n%e9cessaires
+2648 = enqu%eates n%e9cessaires
+2649 = pas de lien avec GC, ...
+2650 = hyperlink %e0 GC, ...
 		3000=Fermer
 		4000=Caches charg%e9es:
 		4100=Choisir dossier:
@@ -661,7 +722,7 @@
 		4108=Coordon%e9es:
 		4109=Chargeant Cartes...
 		4110=Chargeant
-		4111=Les coordonn%e9es doivent ?tre en format N XX XX,XXX E XXX XX,XXX
+		4111=Les coordonn%e9es doivent %eatre en format N XX XX,XXX E XXX XX,XXX
 		4112=Erreur E/S en copyant:+
 		4113=+%e0:+
 		4114=+Erreur:+
@@ -727,7 +788,7 @@
 		4266=[Fill white areas]
 		4267=[Show white areas]
 		4268=voir toutes les caches
-		4269=voir marqu?s caches
+		4269=voir marqu%e9s caches
 		4270=Ouvre
 		4271=Cartes
 		4272=--- Cartes de la pos. actuelle et de la dest. ---

Modified: trunk/res_noewe/languages/NL.cfg
===================================================================
--- trunk/res_noewe/languages/NL.cfg	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/res_noewe/languages/NL.cfg	2010-03-07 18:41:44 UTC (rev 2506)
@@ -589,7 +589,68 @@
 		2586=In de winter beschikbaar
 		2587=Geen onderhoud nodig
 		2588=Onderhoud noodzakelijk
-		2589=Zaklamp nodig
+2589 = geen zaklamp nodig
+2590 = zaklamp nodig
+2591 = geen vliegtuigen nodig
+2592 = vliegtuigen nodig
+2593 = geen gif / gevaarlijke dieren
+2594 = gif / gevaarlijke dieren
+2595 = geen rekenkundig probleem
+2596 = rekenkundig probleem
+2597 = geen verdere info
+2598 = vragen eigenaar voor info
+2599 = geen drive in
+2600 = is in de buurt van de auto (drive in)
+2601 = geen grot
+2602 = grot nutsbedrijven
+2603 = niet het hele jaar
+2604 = hele jaar
+2605 = niet overdag
+2606 = alleen overdag
+2607 = niet in afgesloten ruimten
+2608 = in afgesloten ruimten
+2609 = geen interessante plek
+2610 = interessante plek
+2611 = geen brievenbus (geen postzegel nodig)
+2612 = brievenbus (postzegel nodig)
+2613 = vast doel
+2614 = bewegend doel
+2615 = geen broedseizoen / instandhouding
+2616 = broedseizoen / instandhouding
+2617 = GPS nodig
+2618 = geen GPS nodig
+2619 = niet alleen opgenomen op Opencaching
+2620 = alleen opgenomen op Opencaching
+2621 = normaal cache
+2622 = speciaal soort cache
+2623 = geen overnachting nodig
+2624 = overnachting nodig
+2625 =
+2626 =
+2627 =
+2628 =
+2629 = geen raadsel
+2630 = raadsel
+2631 =
+2632 =
+2633 = vlak terrein
+2634 = Heuvelachtig terrein
+2635 = niet in het water
+2636 = in het water
+2637 = getijden onafhankelijk
+2638 = getijden afhankelijk
+2639 = niet gebonden aan specifieke tijden
+2640 = gebonden aan specifieke tijden
+2641 = geen speciale apparatuur nodig
+2642 = speciale apparatuur nodig
+2643 = geen spoorlijn close-up
+2644 = spoorlijn close-up
+2645 = zonder webcam
+2646 = webcam op het doel
+2647 = geen onderzoek nodig
+2648 = onderzoeken nodig
+2649 = geen link naar GC, ...
+2650 = hyperlink naar GC, ...
 		3000=Sluiten
 		4000=Geladen caches
 		4101=Kaarten

Modified: trunk/res_noewe/languages/PL.cfg
===================================================================
--- trunk/res_noewe/languages/PL.cfg	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/res_noewe/languages/PL.cfg	2010-03-07 18:41:44 UTC (rev 2506)
@@ -643,7 +643,68 @@
                 2586=dostepna zima
                 2587=Nie trzeba serwisu
                 2588=Potrzeba serwisu
-                2589=Potrzebna latarka
+2589 = nie wymaga Latarka
+2590 = Latarka wymagane
+2591 = nie wymaga samolotu
+2592 = wymagane samolotu
+2593 = brak Poison / niebezpieczne zwierzeta
+2594 = trucizna / niebezpieczne zwierzeta
+2595 = no problem arytmetyczny
+2596 = problem arytmetyczny
+2597 = brak dalszych informacji
+2598 = poprosic wlasciciela infos
+2599 = brak jazdy w
+2600 = znajduje sie w poblizu samochodu (drive in)
+2601 = no jaskini
+2602 = jaskini narzedzia
+2603 = Nie caly rok
+2604 = caly rok
+2605 = Nie w dzien
+2606 = tylko w ciagu dnia
+2607 = nie w zamknietych pomieszczeniach
+2608 = w pomieszczeniach zamknietych
+2609 = no ciekawe miejsce
+2610 = ciekawe miejsce
+2611 = brak skrzynki pocztowej (nie potrzebne pieczec)
+2612 = letterbox (pieczec potrzebne)
+2613 = ustalony cel
+2614 = moving target
+2615 = nie hodowlanych sezonu / konserwacji
+2616 = legowym / konserwacji
+2617 = GPS potrzebny
+2618 = brak GPS potrzebny
+2619 = nie tylko wymienionych w Opencaching
+2620 = tylko wymienionych w Opencaching
+2621 = normalny cache
+2622 = specjalny typ pamieci podrecznej
+2623 = bez noclegu wymagane
+2624 = nocleg wymagane
+2625 =
+2626 =
+2627 =
+2628 =
+2629 = no riddle
+2630 = zagadka
+2631 =
+2632 =
+2633 = plaskim terenie
+2634 = tereny g%f3rzyste
+2635 = Nie w wodzie
+2636 = w wodzie
+2637 = plyw%f3w niezalezne
+2638 = plyw%f3w utrzymaniu
+2639 = nie zwiazane z okreslonym czasie
+2640 = zwiazane z okreslonym czasie
+2641 = bez potrzeby uzycia specjalnego sprzetu
+2642 = potrzeby uzycia specjalnego sprzetu
+2643 = brak linii kolejowej z bliska
+2644 = linii kolejowej z bliska
+2645 = bez kamery
+2646 = kamery na cel
+2647 = brak koniecznych badan
+2648 = koniecznych badan
+2649 = no link do GC, ...
+2650 = hiperlacze do GC, ...
                 3000=Zamknij
                 4000=Wczytaj skrzynki:+
                 4001=Pliki GPX z opencaching nie zawieraja informacji o obrazach, nie moga byc one wczytane. Najlepiej pobierz skrzynki z opencaching przez menu /Aplikacja/Importuj/Sciagnij Z Opencaching

Modified: trunk/res_noewe/languages/SV.cfg
===================================================================
--- trunk/res_noewe/languages/SV.cfg	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/res_noewe/languages/SV.cfg	2010-03-07 18:41:44 UTC (rev 2506)
@@ -644,7 +644,68 @@
         	2586=tillg%e4nglig i vinter
         	2587=Inget underh%e5ll beh%f6vs
         	2588=underh%e5llsbehov
-        	2589=Ficklampa som kr%e4vs
+2589 = ingen ficklampa kr%e4vs
+2590 = Ficklampa som kr%e4vs
+2591 = no flygplan kr%e4vs
+2592 = flygplan kr%e4vs
+2593 = no gift / farliga djur
+2594 = gift / farliga djur
+2595 = no aritmetiska problem
+2596 = aritmetiska problem
+2597 = ingen ytterligare information
+2598 = be %e4gare f%f6r infos
+2599 = no k%f6ra i
+2600 = %e4r n%e4ra bilen (drive in)
+2601 = no grotta
+2602 = grotta utilities
+2603 = inte hela %e5ret
+2604 = hela %e5ret
+2605 = inte dagtid
+2606 = endast dagtid
+2607 = inte i slutna rum
+2608 = i slutna rum
+2609 = no intressant plats
+2610 = intressant st%e4lle
+2611 = no letterbox (inget frim%e4rke beh%f6vs)
+2612 = letterbox (frim%e4rke beh%f6vs)
+2613 = fast m%e5l
+2614 = r%f6rligt m%e5l "
+2615 = no h%e4ckningss%e4song / bevarande
+2616 = parningss%e4songen / bevarande
+2617 = GPS beh%f6vs
+2618 = ingen GPS beh%f6vs
+2619 = inte bara n%e4mns i Opencaching
+2620 = endast anges p%e5 Opencaching
+2621 = normal cache
+2622 = speciell typ av cache
+2623 = ingen %f6vernattning kr%e4vs
+2624 = %f6vernattning kr%e4vs
+2625 =
+2626 =
+2627 =
+2628 =
+2629 = ingen g%e5ta
+2630 = g%e5ta
+2631 =
+2632 =
+2633 = platt terr%e4ng
+2634 = kuperad terr%e4ng
+2635 = inte i vatten
+2636 = i vatten
+2637 = tidvatten oberoende
+2638 = tidvatten beroende
+2639 = inte bundet till vissa tider
+2640 = bundna till vissa tider
+2641 = ingen speciell utrustning beh%f6vs
+2642 = speciell utrustning beh%f6vs
+2643 = no j%e4rnv%e4gslinje n%e4rbild
+2644 = j%e4rnv%e4gslinjen n%e4rbild
+2645 = utan webbkamera
+2646 = webbkamera vid m%e5let
+2647 = inga utredningar som kr%e4vs
+2648 = utredningar som kr%e4vs
+2649 = ingen koppling till GC, ...
+2650 = hyperl%e4nk till GC, ...
         	3000=St%e4ng
         	4000=Loaded cachar: +
         	4001=GPX filer fr%e5n opencaching inte inneh%e5ller n%e5gon information av bilder, kan de inte laoded. B%e4st du cachar fr%e5n opencaching genom menyn / Application / Import / Download fr%e5n Opencaching

Modified: trunk/src/CacheWolf/Attribute.java
===================================================================
--- trunk/src/CacheWolf/Attribute.java	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/src/CacheWolf/Attribute.java	2010-03-07 18:41:44 UTC (rev 2506)
@@ -10,179 +10,282 @@
  */
 public class Attribute {
 	// Constructors
-	public Attribute() { attNo=0; }
-	public Attribute(String attributeName) { attNo=attName2int(attributeName); }
+	public Attribute(int id, int inc) {_Id=id;setInc(inc);setIdBit();}
+	public Attribute(String attributeName) { attName2attNo(attributeName); setIdBit();}
+	public Attribute(int attIdOC) { OCAttNo2attNo(attIdOC); setIdBit();}
+	public Attribute(int attIdGC, String Yes0No1) { GCAttNo2attNo(attIdGC, Yes0No1); setIdBit();}
+	// Constructors end
+	private int _Id;
+	private int _Inc; // Yes=0 No=1 non=2
+	private String _ImageName;
+	private long[] _bit = {0l,0l};
+	// for GC Constructor Spider
+	private void attName2attNo(String attributeName) {
+    	for (int i=0; i<maxAttRef; i++) {
+    		if (attributeName.toLowerCase().startsWith(attRef[i][PIC_NAME])) {
+				_Id=i;
+				_Inc=attributeName.toLowerCase().endsWith("-no.gif") ? 1 : 0;
+				_ImageName=attRef[i][PIC_NAME]+(_Inc==1 ? "-no.gif" : "-yes.gif");
+				return;
+    		}
+    	}
+    	_Id=-1; // Error
+    	_ImageName="error.gif";
+    	}
+	// for OC Constructor
+    private void OCAttNo2attNo(int attIdOC) {
+    	for (int i=0; i<maxAttRef; i++) {
+    		if (attIdOC == Integer.parseInt(attRef[i][OC_ID])) {
+				_Id=i;
+				_Inc=0;
+				_ImageName=attRef[i][PIC_NAME]+"-yes.gif";
+				return;
+    		}
+    	}
+    	_Id=-1; // Error
+    	_ImageName="error.gif";
+    }
+    // for GC Constructor gpx-Import
+    private void GCAttNo2attNo(int attIdGC, String Yes0No1 ) {
+    	for (int i=0; i<maxAttRef; i++) {
+    		if (attIdGC == Integer.parseInt(attRef[i][GC_ID])) {
+				_Id=i;
+    			_Inc=Yes0No1.equals("1") ? 1 : 0;
+				_ImageName=attRef[i][PIC_NAME]+(_Inc==1 ? "-no.gif" : "-yes.gif");
+    		}
+    	}
+    	_Id=-1; // Error
+    	_ImageName="error.gif";
+    }
+    // used by all Constructors
+    private void setIdBit() {
+    	_bit=getIdBit(_Id);
+    }
+
+    // *** public part
+    public static long[] getIdBit(int id) {
+    	long [] bit = new long[2];
+    	if (id>-1) {
+        	int b = Integer.parseInt(attRef[id][BIT_NR]);
+    		bit[0] = b>63 ? 0l : (1L << b);
+    		bit[1] = b>63 ? (1L << 64-b) : 0;
+    	}
+    	else {
+        	bit[0]=0;
+        	bit[1]=0;
+    	}
+    	return bit;
+    }    
+    //
+	//public int getAttId () { return _Id; }
+	//
+    /**
+     * getting attribute given=0,negative=1,not specified=2  
+     */
+	public int getInc () { return _Inc; }
+    /**
+     * setting/changing attribute given=0,negative=1,not specified=2  
+     */
+    public void setInc(int inc) {
+    	_Inc=inc;
+		_ImageName=attRef[_Id][PIC_NAME];
+		if (inc==1) _ImageName+="-no.gif";
+		else if (inc==0) _ImageName+="-yes.gif";
+		else _ImageName+="-non.gif";
+    }
+    /**
+     * getting name of corresponding image stored in attributes subdirectory 
+     */
+    public String getImageName() {
+    	return _ImageName;
+    }   
+    /**
+     * getting path+name of corresponding image stored in attributes subdirectory 
+     */
+    public String getPathAndImageName() {
+    	return IMAGEDIR+_ImageName;
+    }
+    /**
+     * set/unset the bit in the long array that belongs to the Id of the attribute  
+     */
+    public long[] getYesBit(long[] yes) {
+    	if (_Inc==0) {
+    		yes[0]|=_bit[0];
+    		yes[1]|=_bit[1];    		
+    	}
+    	else {
+    		yes[0]&=~_bit[0];
+    		yes[1]&=~_bit[1];    		
+    	}
+    	return yes;
+    }
+    /**
+     * set/unset the bit in the long array that belongs to the Id of the attribute  
+     */
+    public long[] getNoBit(long[] no) {
+    	if (_Inc==1) {
+    		no[0]|=_bit[0];
+    		no[1]|=_bit[1];
+    	}
+    	else {
+    		no[0]&=~_bit[0];
+    		no[1]&=~_bit[1];    		
+    	}
+    	return no;
+    }
+    /**
+     * get the language dependant description of the attribute  
+     */
+    public String getMsg() {
+    	return getMsg(_Id,_Inc);
+    }
 	
-	private int attNo;
+	private final static int BIT_NR = 0; 
+	private final static int MSG_NR = 1;
+	private final static int PIC_NAME = 2;
+	private final static int OC_ID = 3;
+	private final static int GC_ID = 4;
+	//private final static int GC_TEXT = 5; // for export , didn't extract by myself, copied from forum	
+	private static final String[][] attRef = {
+		// Empfehlungen / Personen
+		{"30","2562","scenic","","8","Scenic view"},//62 scenic view
+		{"17","2536","kids","59","6","Recommended for kids"},//36 kid friendly
+		{"35","2572","stroller","","41","Stroller accessible"},//72 stroller accessible	
+		{"41","2584","wheelchair","","24","Wheelchair accessible"},//84 wheelchair accessible
+		//  vorhanden / Eigenschaften / Infrastruktur
+		{"22","2546","parking","18","25","Parking available"},//46 parking available
+		{"26","2554","public","19","26","Public transportation"},//54 public transit available
+		{"40","2582","water","20","27","Drinking water nearby"},//82 drinking water nearby
+		{"29","2560","restrooms","21","28","Public restrooms nearby"},//60 restrooms available
+		{"23","2548","phone","22","29","Telephone nearby"},//48 telephone nearby
+		{"24","2550","picnic","","30","Picnic tables nearby"},//50 picnic tables available
+		{"43","2588","firstaid","23","42","Firstaid"}, //88 erste Hilfe
+		// Erlaubt
+		{"11","2524","dogs","","1","Dogs"},//24 dogs allowed
+		{"05","2512","camping","","31","Camping available"},//12 Camping allowed
+		{"01","2504","bicycles","","32","Bicycles"},//04 bikes allowed
+		{"19","2540","motorcycles","","33","Motorcycles"},//40 motorcycles allowed
+		{"27","2556","quads","","34","Quads"},//56 quads allowed
+		{"16","2534","jeeps","","35","Off-road vehicles"},//34 off-road vehicles allowed
+		{"33","2568","snowmobiles","","36","Snowmobiles"},//68
+		{"14","2530","horses","","37","Horses"},//30 horses allowed
+		{"04","2510","campfires","","38","Campfires"},//10 campfires allowed
+		// Eigenschaften / Gefahren
+		{"10","2522","danger","9","23","Dangerous area"},//22 dangerous area
+		{"62","2644","train","10","",""},// 144 aktive Eisenbahnlinien in der N?he
+		{"06","2514","cliff","11","21","Cliff / falling rocks"},//14 falling-rocks nearby
+		{"15","2532","hunting","12","22","Hunting"},//32 hunting area
+		{"37","2576","thorn","13","39","Thorns"},//76 thorns!
+		{"38","2578","ticks","14","19","Ticks"},//78 ticks!
+		{"18","2538","mine","15","20","Abandoned mines"},//38
+		{"25","2552","poisonoak","16","17","Poison plants"},//52 Giftige Pflanzen
+		{"46","2594","animals","17","",""},// 94 Giftige/gef%e4hrliche Tiere
+		{"03","2508","cactus","","",""},//08
+		{"32","2566","snakes","","18","Snakes"},//66
+		{"09","2520","cow","","43","Watch for livestock"},//20 watch for livestock
+		// Eigenschaften / Der Weg
+		{"49","2600","car","24","",""},// 100 Nahe beim Auto
+		{"21","2544","onehour","","7","Takes less than an hour"},//44 takes less than one hour
+		{"13","2528","hiking","25","9","Significant hike"},//28 significant hike
+		{"39","2580","wading","26","11","May require wading"},//80 may require wading
+		{"65","2634","steep","27","",""},// 134 H?geliges Gel?nde
+		{"07","2516","climbing","28","10","Difficult climbing"},//16 easy climbing(OC-28), difficult climbing(GC-10) 
+		{"36","2574","swimming","29","12","May require swimming"},//74
+		// Eigenschaften / Wegpunkte
+		{"55","2612","letter","8","",""},// 112 Letterbox (ben?tigt Stempel)
+		{"54","2610","interestsign","30","",""},// 110 Interessanter Ort ev mit scenic zusammenfassen?
+		{"56","2614","moving","31","",""},// 114 Bewegliches Ziel
+		{"64","2646","webcam","32","",""},// 146 Webcam am Ziel
+		{"53","2608","indoor","33","",""},// 108 In geschlossenen R?umen
+		{"66","2636","submerged","34","",""},// 136 Im Wasser
+		{"58","2618","nogps","35","",""},// 118 Ohne GPS
+		{"34","2570","stealth","","40","Stealth required"},//70 stealth required (Heimlich,List,Schl?ue)
+		// Einschr?nkungen und Voraussetzungen / Allgemein
+		{"12","2526","fee","36","2","Access or parking fee"},//26 access/parking fees
+		{"61","2624","overnight","37","",""},// 124 ?bernachtung erforderlich
+		// Einschr?nkungen und Voraussetzungen / Zeitlich
+		{"20","2542","night","1","14","Recommended at night"},//42 recommended at night
+		{"00","2502","available","38","13","Available at all times"},//02 available 24-7
+		{"68","2640","time","39","",""},// 140 An bestimmte Zeiten gebunden
+		{"52","2606","day","40","",""},// 106 nur tags?ber
+		{"67","2638","tide","41","",""},// 138 Gezeiten
+		// Einschr?nkungen und Voraussetzungen / Saisonbedingt
+		{"51","2604","date","42","",""},// 104 w?hrend des ganzen Jahres zug?nglich
+		{"57","2616","naturschutz","43","",""},// 116 Brutsaison/Naturschutz
+		{"42","2586","winter","44","15","Available during winter"},//86 available in winter 132 Schneesicheres Versteck
+		// Einschr?nkungen und Voraussetzungen / Systembedingt
+		{"59","2620","oconly","6","",""},// 120 Nur bei Opencaching logbar
+		{"71","2650","wwwlink","7","",""},// 150 Nur Hyperlink zu OC-externen Portalen
+		// Einschr?nkungen und Voraussetzungen / Ben?tigt Werkzeug
+		{"69","2642","tools","46","",""},// 142 Spezielle Ausr?stung
+		{"08","2518","compass","47","",""},//18 Kompass
+		{"44","2590","flashlight","48","44","Flashlight required"}, // 90 Flashlight required
+		{"28","2558","rappelling","49","3","Climbing gear"},//58 climbing gear Kletterausr?stung
+		{"50","2602","cave","50","",""},// 102 H?hlenausr?stung
+		{"31","2564","scuba","51","5","Scuba gear"},//64 Tauchausr?stung
+		{"02","2506","boat","52","4","Boat"},//06 Wasserfahrzeug
+		{"45","2592","aircraft","53","38",""},// 92
+		// Einschr?nkungen und Voraussetzungen / Ben?tigt Vorarbeit
+		{"70","2648","wiki","54","",""},// 148 Recherche
+		{"63","2630","riddle","55","",""},// 130 R?tsel
+		{"47","2596","arith_prob","56",""},// 96 Rechenaufgabe
+		{"60","2622","othercache","57","",""},// 122 besondere Cacheart
+		{"48","2598","ask","58","",""},// 98 Startbedingungen beim Owner erfragen
 
-	public int getAttrNr () { return attNo; }
-
-	/**
-	 * The attribute names are identical to the image names.
-	 * Internally the first image name has number 0, the next number 1 and so on.
-	 */
-	public static final String [] attributeNames= {
-			"error.gif",			//00 Unknown attribute
-			"available-no.gif", 	//01 not 24-7
-			"available-yes.gif", 	//02 available 24-7
-			"bicycles-no.gif", 		//03 no bikes
-			"bicycles-yes.gif", 	//04 bikes allowed
-			"boat-no.gif", 			//05
-			"boat-yes.gif", 		//06
-			"cactus-no.gif", 		//07
-			"cactus-yes.gif",		//08
-			"campfires-no.gif", 	//09 no campfires
-			"campfires-yes.gif", 	//10 campfires allowed
-			"camping-no.gif", 		//11 No camping
-			"camping-yes.gif", 		//12 Camping allowed
-			"cliff-no.gif", 		//13
-			"cliff-yes.gif", 		//14 falling-rocks nearby
-			"climbing-no.gif", 		//15 no difficult climbing
-			"climbing-yes.gif", 	//16 difficult climbing
-			"compass-no.gif", 		//17 
-			"compass-yes.gif",		//18
-			"cow-no.gif", 			//19
-			"cow-yes.gif", 			//20 watch for livestock
-			"danger-no.gif", 		//21
-			"danger-yes.gif", 		//22 dangerous area
-			"dogs-no.gif", 			//23 no dogs
-			"dogs-yes.gif", 		//24 dogs allowed
-			"fee-no.gif", 			//25
-			"fee-yes.gif", 			//26 access/parking fees
-			"hiking-no.gif", 		//27
-			"hiking-yes.gif", 		//28 significant hike
-			"horses-no.gif", 		//29 no horses
-			"horses-yes.gif", 		//30 horses allowed
-			"hunting-no.gif", 		//31
-			"hunting-yes.gif", 		//32 hunting area
-			"jeeps-no.gif", 		//33 no off-road vehicles
-			"jeeps-yes.gif", 		//34 off-road vehicles allowed
-			"kids-no.gif", 			//35 no kids
-			"kids-yes.gif", 		//36 kid friendly
-			"mine-no.gif", 			//37
-			"mine-yes.gif", 		//38
-			"motorcycles-no.gif", 	//39 no motorcycles
-			"motorcycles-yes.gif", 	//40 motorcycles allowed
-			"night-no.gif", 		//41 not recommended at night
-			"night-yes.gif", 		//42 recommended at night
-			"onehour-no.gif", 		//43 takes more than one hour
-			"onehour-yes.gif", 		//44 takes less than one hour
-			"parking-no.gif", 		//45
-			"parking-yes.gif", 		//46 parking available
-			"phone-no.gif", 		//47
-			"phone-yes.gif", 		//48 telephone nearby
-			"picnic-no.gif", 		//49
-			"picnic-yes.gif", 		//50 picnic tables available
-			"poisonoak-no.gif", 	//51
-			"poisonoak-yes.gif", 	//52
-			"public-no.gif", 		//53
-			"public-yes.gif", 		//54 public transit available
-			"quads-no.gif", 		//55 no quads
-			"quads-yes.gif", 		//56 quads allowed
-			"rappelling-no.gif", 	//57
-			"rappelling-yes.gif", 	//58 climbing gear
-			"restrooms-no.gif", 	//59
-			"restrooms-yes.gif", 	//60 restrooms available
-			"scenic-no.gif", 		//61
-			"scenic-yes.gif", 		//62 scenic view
-			"scuba-no.gif", 		//63
-			"scuba-yes.gif", 		//64
-			"snakes-no.gif", 		//65
-			"snakes-yes.gif", 		//66
-			"snowmobiles-no.gif", 	//67 no snowmobiles
-			"snowmobiles-yes.gif", 	//68
-			"stealth-no.gif", 		//69 no stealth required
-			"stealth-yes.gif", 		//70 stealth required
-			"stroller-no.gif",		//71 not stroller accessible
-			"stroller-yes.gif", 	//72 stroller accessible
-			"swimming-no.gif", 		//73
-			"swimming-yes.gif", 	//74
-			"thorn-no.gif", 		//75
-			"thorn-yes.gif", 		//76 thorns!
-			"ticks-no.gif", 		//77
-			"ticks-yes.gif", 		//78 ticks!
-			"wading-no.gif", 		//79
-			"wading-yes.gif", 		//80 may require wading
-			"water-no.gif", 		//81
-			"water-yes.gif", 		//82 drinking water nearby
-			"wheelchair-no.gif", 	//83 not wheelchair accessible
-			"wheelchair-yes.gif", 	//84 wheelchair accessible
-			"winter-no.gif", 		//85 not available for winter
-			"winter-yes.gif", 		//86 available in winter
-			"firstaid-no.gif",              //87 does not need maintenance
-			"firstaid-yes.gif",              //88 needs maintenance
-			"flashlight-yes.gif"    // 89 Flashlight required
 	};
-	private static mImage [] attributeImages=new mImage[90];
-	private static String IMAGEDIR=STRreplace.replace(FileBase.getProgramDirectory()+"/attributes/", "//", "/");
-	
-	public static String getImageDir() {
-		return IMAGEDIR; 
-	}
-    
-    /**
-     * Returns the image name for a give attribute number
-     * @return Image Name
-     */
-	public String getImageName(){
-		if (attNo>attributeNames.length)
+    public static int maxAttRef=attRef.length;	
+    private static String IMAGEDIR=STRreplace.replace(FileBase.getProgramDirectory()+"/attributes/", "//", "/");
+    /*
+    private static String getImageName(int cw_Id, int cw_Inc){
+		if (cw_Id<0 || cw_Id>maxAttRef)
 			return "error.gif";
-		else return attributeNames[attNo];
+		else {
+			switch (cw_Inc) {
+			case 0: return attRef[cw_Id][PIC_NAME]+"-yes.gif";
+			case 1: return attRef[cw_Id][PIC_NAME]+"-no.gif";
+			case 2: return attRef[cw_Id][PIC_NAME]+"-non.gif";
+			default:return "error.gif";
+			}
+		}
 	}
-	
-	/**
-	 * Returns the text description of the image
-	 * @return Text description of Image
-	 */
-	public String getInfo(){
-		return MyLocale.getMsg(2500+attNo,"No attribute info found");
+	*/
+    private static String getMsg(int cw_Id, int cw_Inc){
+		if (cw_Inc==1)
+			return MyLocale.getMsg(Integer.parseInt(attRef[cw_Id][MSG_NR])-1,"");
+		else
+			return MyLocale.getMsg(Integer.parseInt(attRef[cw_Id][MSG_NR]),"");
 	}
-	
+    private static mImage[] yesImages=new mImage[maxAttRef];
+	private static mImage[] noImages=new mImage[maxAttRef];
+	private static mImage[] nonImages=new mImage[maxAttRef];
+	private static final mImage errorImage=new mImage(IMAGEDIR+"error.gif");	
 	/**
 	 * Returns the width of the attribute icons
 	 * @return The width of the images 
 	 */
 	public static int getImageWidth() {
-		initErrorImg();
-		return attributeImages[0].image.getWidth();
-	}
-	
+		return errorImage.image.getWidth();
+	}	
     /**
-     * Get the image for a given attribute number. We use lazy initialisation here, i.e. the images are only
-     * loaded when they are requested. 
-     * @param attNo The attribute number
+     * Get the image for a given attribute number. 
+     * We use lazy initialisation here, i.e. the images are only loaded when they are requested. 
      * @return
      */
     public mImage getImage() {
-    	if (attNo<0 || attNo>=attributeNames.length) {
-    		return attributeImages[0];
+    	if (_Id<0 || _Id>=maxAttRef) {
+    		return errorImage;
     	}
-    	if (attributeImages[attNo]==null) {
-    		attributeImages[attNo]=new mImage(IMAGEDIR+attributeNames[attNo]);
+    	if (_Inc==0) {
+    		if (yesImages[_Id]==null) {yesImages[_Id]=new mImage(IMAGEDIR+getImageName());}
+    		return yesImages[_Id];
     	}
-    	return attributeImages[attNo];
-    }
-    
-	/**
-     * Encode an attribute name with the internal attribute number
-     * @param attributeName The attribute name (=filename) to encode
-     * @return The number of the attribute
-     */
-    private int attName2int(String attributeName) {
-    	int size=attributeNames.length;
-    	for (int i=1; i<size; i++) {
-    		if (attributeName.equalsIgnoreCase(attributeNames[i])) return i;
+    	else if (_Inc==1) {
+    		if (noImages[_Id]==null) {noImages[_Id]=new mImage(IMAGEDIR+getImageName());}
+    		return noImages[_Id];
     	}
-    	return 0; // Error
-    }
-
-    private static void initErrorImg() {
-		if (attributeImages[0]==null) attributeImages[0]=new mImage(IMAGEDIR+"error.gif");
-    }
-    
-    { // Static initialisation of error image
-    	initErrorImg();
-    }
-
-	
+    	else {
+    		if (nonImages[_Id]==null) {nonImages[_Id]=new mImage(IMAGEDIR+getImageName());}
+    		return nonImages[_Id];
+    	}
+    }	
 }

Modified: trunk/src/CacheWolf/Attributes.java
===================================================================
--- trunk/src/CacheWolf/Attributes.java	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/src/CacheWolf/Attributes.java	2010-03-07 18:41:44 UTC (rev 2506)
@@ -1,47 +1,39 @@
 package CacheWolf;
-
-import ewe.fx.*;
-
 public class Attributes {
+	public Attributes(){} // Just a public constructor
 	public final static int MAXATTRIBS=12;
 	/**
 	 * The number of attributes for this cache (=number of array elements in use in attribs)
 	 */
 	private int count=0;
 	/**
-	 * The attributes are represented as a byte array with each element encoding one attribute
+	 * The attributes as array of MAXATTRIBS Attribute
 	 */
 	private Attribute attribs[]=new Attribute[MAXATTRIBS];
-
-	public long attributesYes;
-	public long attributesNo;
-
-	public Attributes(){ // Just a public constructor
-	}
-	
 	/**
+	 * The attributes presence in Bit Representation 
+	 */
+	private long[] attrYes = {0l,0l};
+	private long[] attrNo = {0l,0l};	
+	/**
 	 * Get the number of attributes in the list
 	 * @return number of attributes
-	 */public int getCount(){
-		return count;
-	}
-	
+	 */
+	public int getCount(){return count;}	
 	/**
-	 * Clear the attributes list
-	 *
+	 * getting an empty attributes list for this Cache 
 	 */
-	 public void clear() {
+	public void clear() {
 		count=0;
-		attributesYes=0;
-		attributesNo=0;
+		attrYes[0]=0l;
+		attrYes[1]=0l;
+		attrNo[0]=0l;
+		attrNo[1]=0l;
 	}
-	
-    ////////////////////////////////////////////////
-    // Attribute set functions
-    ////////////////////////////////////////////////
-	
-	public void XmlAttributesStart() { // Any reason for this?		
-	}  
+	/**
+	 *  Filling the Attributes from Cache.xml (CacheHolderDetail)
+	 *  todo : remove this "historic" reprensentation , saving as Bits should be enough (araber95)
+	 */
 	public void XmlAttributesEnd(String elem){
 		clear();
 		Extractor ex=new Extractor(elem,"<ATT>","</ATT>",0,true);
@@ -51,15 +43,9 @@
 			dummy = ex.findNext();
 		}
 	}
-
-	public void XmlAttributeStart(){  // Any reason for this?
-	}
-	public void XmlAttributeEnd(String elem){
-		add(elem);
-	}
-
-	/*
+	/**
 	 * Prepare for attributes to be written to cache.xml file 
+	 *  todo : remove this "historic" reprensentation , saving as Bits should be enough (araber95)
 	 */
 	public String XmlAttributesWrite(){
 		StringBuffer sb=new StringBuffer(1000);
@@ -71,10 +57,9 @@
 		}
 		sb.append("</ATTRIBUTES>\n");
 		return sb.toString();
-	}
-	
+	}	
 	/**
-	 * Add a new attributes
+	 * Add a new attribute to the array by Name, meaning its icon picture name
 	 * @param attributeName
 	 */
 	public void add(String attributeName){
@@ -82,42 +67,54 @@
 			if ( !attributeName.equalsIgnoreCase( "attribute-blank.gif" ) ) {
 				Attribute attr = new Attribute(attributeName);
 				attribs[count++] = attr;
-				if (attributeName.endsWith("-yes.gif"))
-					attributesYes |= (1l << ( (long)(Math.ceil(attr.getAttrNr() / 2.0) - 1.0) ) );
-				else
-					attributesNo |= (1l << ( (long)(Math.ceil(attr.getAttrNr() / 2.0) - 1.0) ) );
+				attrYes=attr.getYesBit(attrYes);
+				attrNo=attr.getNoBit(attrNo);
 			}
 		}
 	}
-
 	/**
-	 * Get the name of the i'th attribute in the list
-	 * @param i The number of the attribute to retrieve
-	 * @return The name of the attribute (e.g. horses-no.gif)
+	 * Add a new attribute to the array by ID and Inc as you get it from GC gpx-File
+	 * @param GC attribute ID
+	 * @param GC attribute Inc (attribute set = 0 ,attribute  not set = 1)
 	 */
-	public String getName(int i) {
-		if (i>=0 && i<count) return attribs[i].getImageName();
-		return "error.gif";
+	public void add(int attIdGC, String Yes0No1) {
+		if (count<attribs.length) {
+			Attribute attr = new Attribute(attIdGC, Yes0No1);
+			attribs[count++] = attr;
+			attrYes=attr.getYesBit(attrYes);
+			attrNo=attr.getNoBit(attrNo);			
+		}
 	}
-	
 	/**
-	 * Get the image corresponding to an attribute
-	 * @param i The number of the attribute for which the image is to be retrieved
-	 * @return The mImage of the attribute
+	 * Add a new attribute to the array by OC-IDas you get it from OC xml/zip-download 
+	 * @param OC attribute ID
 	 */
-	public mImage getImage(int i) {
-		if (i>=0 && i<count) return attribs[i].getImage();
-		return new Attribute().getImage();
+	public void add(int attIdOC) {
+		if (count<attribs.length) {
+			Attribute attr = new Attribute(attIdOC);
+			attribs[count++] = attr;
+			attrYes=attr.getYesBit(attrYes);
+		}
 	}
-
 	/**
-	 * Get the infotext for an attribute
-	 * @param i The number of the attribute for which the infotext is to be retrieved
-	 * @return The infotext of the attribute
+	 * to get the Bit Representation of the Attributs of this Cache
+	 * @return the Long array representing the Attributes of this Cache
 	 */
-	public String getInfo(int i) {
-		if (i>=0 && i<count) return attribs[i].getInfo();
-		return "No info";
+	public long[] getAttribsAsBits() {
+		long ret[] = new long[4];
+		ret[0]=attrYes[0];
+		ret[1]=attrYes[1];
+		ret[2]=attrNo[0];
+		ret[3]=attrNo[1];
+		return ret;
 	}
+	/**
+	 * Get the i-th attribute
+	 * @param i The number for which the attribute is to be retrieved
+	 * @return The attribute
+	 */
+	public Attribute getAttribute(int i) {
+		return attribs[i];
+	}
 }
 

Modified: trunk/src/CacheWolf/AttributesSelector.java
===================================================================
--- trunk/src/CacheWolf/AttributesSelector.java	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/src/CacheWolf/AttributesSelector.java	2010-03-07 18:41:44 UTC (rev 2506)
@@ -12,56 +12,63 @@
 import ewe.ui.mLabel;
 
 public class AttributesSelector extends Panel {
-	protected static int TILESIZE=22; // Here we always use the small icons thus tilesize=22
-	public long selectionMaskYes = 0;
-	public long selectionMaskNo = 0;
+	protected static int TILESIZE=17; // for small screen 
+	protected static int PREF_WIDTH=180; // for small screen 
+	protected static int PREF_HEIGHT=145; // for small screen 
+	private long[] selectionMaskYes = {0l,0l};
+	private long[] selectionMaskNo = {0l,0l};
 	protected mLabel mInfo;
 
 	public AttributesSelector() {
+		if (MyLocale.getScreenWidth() > 240) { TILESIZE=22; PREF_HEIGHT=180; PREF_WIDTH=205;}
 		//Rect r = new Rect(0,0,TILESIZE * ICONS_PER_ROW,TILESIZE * ICONROWS); // As on GC: 6 wide, 2 high
-		iap.virtualSize = new Rect(0,0,200,200);
-		iap.setPreferredSize(170, 155);
+		iap.virtualSize =  new Rect(0,0,200,200);
+		iap.setPreferredSize(PREF_WIDTH, PREF_HEIGHT);
 		addLast(iap,CellConstants.STRETCH,FILL);
 		addLast(mInfo=new mLabel(""),HSTRETCH,HFILL);
 	}
 
-	public void setSelectionMasks(long yes, long no) {
-		selectionMaskYes = yes;
-		selectionMaskNo = no;
+	public void setSelectionMasks(long[] SelectionMasks) {
+		selectionMaskYes[0] = SelectionMasks[0];
+		selectionMaskYes[1] = SelectionMasks[1];
+		selectionMaskNo[0] = SelectionMasks[2];
+		selectionMaskNo[1] = SelectionMasks[3];		
 		showAttributePalette();
 	}
+	
+	public long[] getSelectionMasks() {
+		long[] SelectionMasks = new long[4];
+		SelectionMasks[0] = selectionMaskYes[0];
+		SelectionMasks[1] = selectionMaskYes[1];
+		SelectionMasks[2] = selectionMaskNo[0];
+		SelectionMasks[3] = selectionMaskNo[1];		
+		return SelectionMasks;
+	}
+	
+	public boolean isSetSelectionMask() {
+		return  selectionMaskYes[0] != 0l || selectionMaskNo[0] != 0l ||
+				selectionMaskYes[1] != 0l || selectionMaskNo[1] != 0l;
+	}
 
-	//FIXME: explain the usefulness of animated images in this context since it is not obvious
-	protected class attAniImage extends AniImage {
-		private String info;
-		private String attrName;
-		private String value;
-		private int attrNr;
-		private long bitMask;
-		
-		attAniImage (mImage img) {
+	protected class attImage extends AniImage {
+		public Attribute att;		
+		attImage (mImage img, Attribute _att) {
 			super(img);
-		}
-		
-		attAniImage (attAniImage cp, String val) {
-			//super(null);
-			mImage rawImg=new mImage(Attribute.getImageDir() + cp.attrName + val );
-			setMImage (rawImg.getHeight()!=20 ? rawImg.scale(20,20,null,Image.FOR_DISPLAY) : rawImg  );
-			value = val;
-			info = MyLocale.getMsg( value.equals("-no.gif") ? (2500+cp.attrNr-1) : 2500+cp.attrNr,"No attribute info found");
-			attrName = cp.attrName;
+			att=_att;
+		}		
+		attImage(attImage cp, int val) {
+			att=cp.att;
+			att.setInc(val);
+			mImage rawImg=att.getImage();
+			setMImage (rawImg.getHeight()!=TILESIZE-2 ? rawImg.scale(TILESIZE-2,TILESIZE-2,null,Image.FOR_DISPLAY) : rawImg  );
 			location = cp.location;
-			attrNr = cp.attrNr;
-			bitMask = cp.bitMask;
 		}
 	}
 	
 	protected class attInteractivePanel extends InteractivePanel {
 		public boolean imageMovedOn(AniImage which) {
-			if (!((attAniImage)which).info.startsWith("*")) { // If text starts with * we have no explanation yet
-				mInfo.setText(((attAniImage)which).info);
-				mInfo.repaintNow();
-			}
+			mInfo.setText(((attImage)which).att.getMsg());			
+			mInfo.repaintNow();
 			return true;
 		}
 		public boolean imageMovedOff(AniImage which) {
@@ -71,25 +78,14 @@
 		}
 		public boolean imagePressed(AniImage which, Point pos) {
 			if (which != null) {
-				String value = ((attAniImage)which).value;
-				long bit = ((attAniImage)which).bitMask;
-				if (value.equals("-non.gif")) {
-					selectionMaskYes |= bit;
-					selectionMaskNo  &= ~bit;
-					value="-yes.gif";
-				} else if (value.equals("-yes.gif")) {
-					selectionMaskYes &= ~bit;
-					selectionMaskNo  |= bit;
-					value="-no.gif";
-				} else {
-					selectionMaskYes &= ~bit;
-					selectionMaskNo  &= ~bit;
-					value="-non.gif";
-				}
-				attAniImage tmpImg = new attAniImage( (attAniImage)which, value );
+				int value=((attImage)which).att.getInc();
+				value=(value + 1) % 3;
+				((attImage)which).att.setInc(value);
+				selectionMaskNo=((attImage)which).att.getNoBit(selectionMaskNo);
+				selectionMaskYes=((attImage)which).att.getYesBit(selectionMaskYes);
+				attImage tmpImg = new attImage(((attImage)which), value );
 				removeImage(which);
 				addImage(tmpImg);
-				//System.out.println ("AniImage pressed: " + ((attAniImage)which).info);
 				refresh();
 				notifyDataChange(new DataChangeEvent(DataChangeEvent.DATA_CHANGED,this));
 			}
@@ -100,38 +96,31 @@
 
 	private void showAttributePalette() {
 		iap.images.clear();
-		int myWidth = 170;
+		int myWidth = PREF_WIDTH;
 		int myX = 2; int myY = 2;
-		long bitMask = 0;
-		String attrName;
-		String value;
-		for (int i=0; i < Attribute.attributeNames.length; ++i) {
-			if (Attribute.attributeNames[i].endsWith("-yes.gif")) {
-				attrName = Attribute.attributeNames[i].substring(0,Attribute.attributeNames[i].length()-8);
-				bitMask = ( 1l << ( (long)(java.lang.Math.ceil(i / 2.0) - 1.0) ) );
-				if ( (selectionMaskYes & bitMask) != 0 )
-					value = "-yes.gif";
-				else if ( (selectionMaskNo & bitMask) != 0 )
-					value = "-no.gif";
-				else
-					value = "-non.gif";
-				mImage rawImg=new mImage(Attribute.getImageDir()+attrName+value);	
-				attAniImage img=new attAniImage(rawImg.getHeight()!=20 ? rawImg.scale(20,20,null,Image.FOR_DISPLAY) : rawImg );
-				img.info=MyLocale.getMsg(2500+i,"No attribute info found");
-				img.value=value;
-				img.attrName=attrName;
-				img.attrNr = i;
-				img.bitMask = bitMask;
+		int inc = 2;
+		for (int i = 0; i < Attribute.maxAttRef; i++) {
+			long[] bitMask = Attribute.getIdBit(i);
+			if ( ((selectionMaskYes[0] & bitMask[0]) != 0 ) || 
+					((selectionMaskYes[1] & bitMask[1]) != 0 ))
+				inc = 0;
+			else if ( ((selectionMaskNo[0] & bitMask[0]) != 0 ) ||
+					((selectionMaskNo[1] & bitMask[1]) != 0 ))
+				inc = 1;
+			else
+				inc = 2;			
+			Attribute att = new Attribute(i,inc); 
+			mImage rawImg=att.getImage();
+			attImage img=new attImage(rawImg.getHeight()!=TILESIZE-2 ? rawImg.scale(TILESIZE-2,TILESIZE-2,null,Image.FOR_DISPLAY) : rawImg, att);
 
-				if (myX+TILESIZE > myWidth) {
-					myX = 2;
-					myY += TILESIZE;
-				}
-				img.location=new Rect(myX,myY,TILESIZE,TILESIZE);
-				//System.out.println("img.location=new Rect("+x+","+y+","+TILESIZE+","+TILESIZE+");");
-				iap.addImage(img);
-				myX += TILESIZE;
+			if (myX+TILESIZE > myWidth) {
+				myX = 2;
+				myY += TILESIZE;
 			}
+			img.location=new Rect(myX,myY,TILESIZE,TILESIZE);
+			iap.addImage(img);
+			myX += TILESIZE;
+			
 		}
 		iap.repaintNow();
 	}

Modified: trunk/src/CacheWolf/AttributesViewer.java
===================================================================
--- trunk/src/CacheWolf/AttributesViewer.java	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/src/CacheWolf/AttributesViewer.java	2010-03-07 18:41:44 UTC (rev 2506)
@@ -41,11 +41,11 @@
 	}
 	protected InteractivePanel iap=new attInteractivePanel();
 	
-	public void showImages(Attributes att) {
+	public void showImages(Attributes atts) {
 		iap.images.clear();
-		for (int i=0; i<att.getCount(); i++) {
-			attAniImage img=new attAniImage( att.getImage(i));
-			img.info=att.getInfo(i);
+		for (int i=0; i<atts.getCount(); i++) {
+			attAniImage img=new attAniImage( atts.getAttribute(i).getImage());
+			img.info=atts.getAttribute(i).getMsg();
 			img.location=new Rect((i % ICONS_PER_ROW)*TILESIZE,(i / ICONS_PER_ROW)*TILESIZE,TILESIZE,TILESIZE);
 			iap.addImage(img);			
 		}

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-03-07 18:41:44 UTC (rev 2506)
@@ -1,6 +1,5 @@
 package CacheWolf;
 
-import CacheWolf.imp.OCXMLImporter;
 import CacheWolf.navi.Metrics;
 
 import com.stevesoft.ewe_pat.Regex;
@@ -113,8 +112,7 @@
 	public String sort;
 	private static StringBuffer sb=new StringBuffer(530); // Used in toXML()
 
-	private long attributesYes = 0;
-	private long attributesNo  = 0;
+	private long[] attributesBits = {0l,0l,0l,0l};
 	
 	private IconAndText iconAndTextWP = null;
 	private int iconAndTextWPLevel = 0;
@@ -122,7 +120,7 @@
 	static char decSep,notDecSep;
 	static {
 		decSep=MyLocale.getDigSeparator().charAt(0);
-		notDecSep=decSep=='.'?',':'.';
+		notDecSep = (decSep == '.'?',':'.');
 	}
 
 	public CacheHolder() {
@@ -294,15 +292,16 @@
 	
 			        start = xmlString.indexOf('"', end + 1);
 		            end = xmlString.indexOf('"', start + 1);
+		            long[] attribsBits={0l,0l,0l,0l};
 		            if (start > -1 && end > -1) {
-			            setAttributesYes(Convert.parseLong(xmlString.substring(start + 1, end)));
-	
-	
-			        start = xmlString.indexOf('"', end + 1);
-			        end = xmlString.indexOf('"', start + 1);
-			            if (start > -1 && end > -1)
-				            setAttributesNo(Convert.parseLong(xmlString.substring(start + 1, end)));
+		            	attribsBits[0]=(Convert.parseLong(xmlString.substring(start + 1, end)));
+		        		
+				        start = xmlString.indexOf('"', end + 1);
+				        end = xmlString.indexOf('"', start + 1);
+				        if (start > -1 && end > -1)
+			            	attribsBits[2]=(Convert.parseLong(xmlString.substring(start + 1, end)));
 		            }
+		            setAttribsAsBits(attribsBits);
 	            } else if (version == 3 || version == 2) {
 		            start = xmlString.indexOf('"');
 		            end = xmlString.indexOf('"', start + 1);
@@ -359,14 +358,16 @@
 		            
 		            start = xmlString.indexOf('"', end + 1);
 		            end = xmlString.indexOf('"', start + 1);
+		            long[] attribsBits={0l,0l,0l,0l};
 			        if (start > -1 && end > -1) {
-				        setAttributesYes(Convert.parseLong(xmlString.substring(start + 1, end)));
+			        	attribsBits[0]=(Convert.parseLong(xmlString.substring(start + 1, end)));
 	
 				        start = xmlString.indexOf('"', end + 1);
 				        end = xmlString.indexOf('"', start + 1);
 				        if (start > -1 && end > -1)
-					        setAttributesNo(Convert.parseLong(xmlString.substring(start + 1, end)));
+				        	attribsBits[2]=(Convert.parseLong(xmlString.substring(start + 1, end)));
 			        }
+			        setAttribsAsBits(attribsBits);
 			        
 		            start = xmlString.indexOf('"', end + 1);
 		            end = xmlString.indexOf('"', start + 1);
@@ -503,8 +504,7 @@
 		this.sort=ch.sort;
 		this.setLastSync(ch.getLastSync());
 
-		this.setAttributesYes(ch.getAttributesYes());
-		this.setAttributesNo(ch.getAttributesNo());
+		this.setAttribsAsBits(ch.getAttributesBits());
 		if (ch.detailsLoaded()) {
 			this.getFreshDetails().update(ch.getFreshDetails());
 		}	
@@ -554,10 +554,13 @@
 		sb.append("\" lastSyncOC = \"" );sb.append(getLastSync()); 
 		sb.append("\" num_recommended = \"");sb.append(Convert.formatInt(getNumRecommended())); 
 		sb.append("\" num_found = \"" );sb.append(Convert.formatInt(getNumFoundsSinceRecommendation()));
-		sb.append("\" attributesYes = \"" ); sb.append(Convert.formatLong(getAttributesYes()));
-		sb.append("\" attributesNo = \"" ); sb.append(Convert.formatLong(getAttributesNo()));
+		long[] attribsBits = getAttributesBits();
+		sb.append("\" attributesYes = \"" ); sb.append(Convert.formatLong(attribsBits[0]));
+		sb.append("\" attributesNo = \"" ); sb.append(Convert.formatLong(attribsBits[2]));
 		sb.append("\" boolFields=\"" ); sb.append(Convert.formatLong(this.boolFields2long()));
 		sb.append("\" byteFields=\"" ); sb.append(Convert.formatLong(this.byteFields2long()));
+		sb.append("\" attributesYes1 = \"" ); sb.append(Convert.formatLong(attribsBits[1]));
+		sb.append("\" attributesNo1 = \"" ); sb.append(Convert.formatLong(attribsBits[3]));
 		sb.append("\" />\n");
 		return sb.toString();
 	}
@@ -876,7 +879,7 @@
 	private final static int GC_MSG = 1; 
 	private final static int IDX_WRITENOTE = 4; 	
 	private final static int IDX_FOUNDIT = 1; 	
-	private final static int IDX_NOTFOUND = 3; 	
+	//private final static int IDX_NOTFOUND = 3; 	
 	private final static String[][] _logType = {	
 			{"353", ""},
 			{"318", "Found it"},
@@ -1107,10 +1110,10 @@
 				||
 			   (profile.showSearchResult() && !this.is_flaged)   
 			    ||
-			   ( (filter==Filter.FILTER_ACTIVE||filter==Filter.FILTER_MARKED_ONLY) &&	
+			   ( (filter == Filter.FILTER_ACTIVE||filter == Filter.FILTER_MARKED_ONLY) &&	
 			  	 (this.is_filtered())^profile.isFilterInverted())                            
 			  	||
-			   (filter==Filter.FILTER_CACHELIST) && 
+			   (filter == Filter.FILTER_CACHELIST) && 
 			     !Global.mainForm.cacheList.contains(this.getWayPoint())
 			);
 		boolean showAddi = this.showAddis() && this.mainCache != null && this.mainCache.isVisible();
@@ -1362,7 +1365,7 @@
 
 	public void setLog_updated(boolean is_log_updated) {
 		Global.getProfile().notifyUnsavedChanges(is_log_updated != this.log_updated);		
-		if (is_log_updated && iconAndTextWPLevel==1) iconAndTextWP = null;
+		if (is_log_updated && iconAndTextWPLevel == 1) iconAndTextWP = null;
     	this.log_updated = is_log_updated;
     }
 
@@ -1372,7 +1375,7 @@
 
 	public void setUpdated(boolean is_updated) {
 		Global.getProfile().notifyUnsavedChanges(is_updated != this.cache_updated);		
-		if (is_updated && iconAndTextWPLevel==2) iconAndTextWP = null;
+		if (is_updated && iconAndTextWPLevel == 2) iconAndTextWP = null;
     	this.cache_updated = is_updated;
     }
 
@@ -1382,7 +1385,7 @@
 
 	public void setIncomplete(boolean is_incomplete) {
 		Global.getProfile().notifyUnsavedChanges(is_incomplete != this.incomplete);	
-		if (is_incomplete && iconAndTextWPLevel==4) iconAndTextWP = null;
+		if (is_incomplete && iconAndTextWPLevel == 4) iconAndTextWP = null;
     	this.incomplete = is_incomplete;
     }
 	
@@ -1460,7 +1463,7 @@
 
 	public void setNew(boolean is_new) {
 		Global.getProfile().notifyUnsavedChanges(is_new != this.newCache);		
-		if (is_new && iconAndTextWPLevel==3) iconAndTextWP = null;
+		if (is_new && iconAndTextWPLevel == 3) iconAndTextWP = null;
 		this.newCache = is_new;
     }
 
@@ -1527,23 +1530,14 @@
     	this.lastSync = lastSync;
     }
 
-	public long getAttributesYes() {
-    	return attributesYes;
+	public long[] getAttributesBits() {
+    	return this.attributesBits;
     }
 
-	public void setAttributesYes(long attributesYes) {
-		Global.getProfile().notifyUnsavedChanges(attributesYes != this.attributesYes);		
-    	this.attributesYes = attributesYes;
+	public void setAttribsAsBits(long[] attributesBits) {
+		Global.getProfile().notifyUnsavedChanges(attributesBits != this.attributesBits);		
+    	this.attributesBits = attributesBits;
     }
-
-	public long getAttributesNo() {
-    	return attributesNo;
-    }
-
-	public void setAttributesNo(long attributesNo) {
-		Global.getProfile().notifyUnsavedChanges(attributesNo != this.attributesNo);		
-    	this.attributesNo = attributesNo;
-    }
 	
 	public boolean hasSolver() {
 		return hasSolver;

Modified: trunk/src/CacheWolf/Filter.java
===================================================================
--- trunk/src/CacheWolf/Filter.java	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/src/CacheWolf/Filter.java	2010-03-07 18:41:44 UTC (rev 2506)
@@ -104,8 +104,7 @@
 	private boolean notAvailable = false;
 	double pi180=java.lang.Math.PI / 180.0;
 
-	private long attributesYesPattern = 0;
-	private long attributesNoPattern = 0;
+	private long[] attributesPattern = {0l,0l,0l,0l};
 	private int attributesChoice = 0;
 	
 	/**
@@ -318,8 +317,7 @@
 		terrdirec = profile.getFilterTerr().charAt(0) == 'L' ? SMALLER : 
 				(profile.getFilterTerr().charAt(0) == '=' ? EQUAL : GREATER );
 		fscTerr = Common.parseDouble(profile.getFilterTerr().substring(1));  // Terrain
-		attributesYesPattern = profile.getFilterAttrYes();
-		attributesNoPattern = profile.getFilterAttrNo();
+		attributesPattern = profile.getFilterAttr();
 		attributesChoice = profile.getFilterAttrChoice();
 	}
 	
@@ -553,25 +551,36 @@
 	        ///////////////////////////////
 	        // Filter criterium 11: Attributes
 	        ///////////////////////////////
-	        if ((attributesYesPattern != 0 || attributesNoPattern != 0) && ch.mainCache == null) {
+	        if ((attributesPattern[0] != 0 || attributesPattern[1] != 0 || attributesPattern[2] != 0 || attributesPattern[3] != 0) 
+	        		&& ch.mainCache == null) {
+	        	long[] chAtts=ch.getAttributesBits();
 		        if (attributesChoice == 0) {
 			        // AND-condition:
-			        if ((ch.getAttributesYes() & attributesYesPattern) != attributesYesPattern
-			                || (ch.getAttributesNo() & attributesNoPattern) != attributesNoPattern) {
+			        if ((chAtts[0] & attributesPattern[0]) != attributesPattern[0] ||
+				        	(chAtts[1] & attributesPattern[1]) != attributesPattern[1] ||
+				        	(chAtts[2] & attributesPattern[2]) != attributesPattern[2] ||
+				        	(chAtts[3] & attributesPattern[3]) != attributesPattern[3] )
+				        {
 				        cacheFiltered = true;
 				        break;
 			        }
 		        } else if (attributesChoice == 1) {
 			        // OR-condition:
-			        if ((ch.getAttributesYes() & attributesYesPattern) == 0
-			                && (ch.getAttributesNo() & attributesNoPattern) == 0) {
+			        if ((chAtts[0] & attributesPattern[0]) == 0 ||
+				        	(chAtts[1] & attributesPattern[1]) == 0 ||
+				        	(chAtts[2] & attributesPattern[2]) == 0 ||
+				        	(chAtts[3] & attributesPattern[3]) == 0 )
+				        {
 				        cacheFiltered = true;
 				        break;
 			        }
 		        } else {
 			        // NOT-condition:
-			        if ((ch.getAttributesYes() & attributesYesPattern) != 0
-			                || (ch.getAttributesNo() & attributesNoPattern) != 0) {
+			        if ((chAtts[0] & attributesPattern[0]) != 0 ||
+				        	(chAtts[1] & attributesPattern[1]) != 0 ||
+				        	(chAtts[2] & attributesPattern[2]) != 0 ||
+				        	(chAtts[3] & attributesPattern[3]) != 0 )
+				        {
 				        cacheFiltered = true;
 				        break;
 			        }
@@ -630,6 +639,7 @@
 
 		public boolean hasFilter() {
 		Profile prof=Global.getProfile();
+		long[] attribs=prof.getFilterAttr();
 		return !(prof.getFilterType().equals(FilterData.FILTERTYPE) &&
 		    prof.getFilterRose().equals(FilterData.FILTERROSE) &&
 		    prof.getFilterVar().equals(FilterData.FILTERVAR) &&
@@ -637,8 +647,10 @@
 		    prof.getFilterDist().equals("L") &&
 		    prof.getFilterDiff().equals("L") &&
 		    prof.getFilterTerr().equals("L") &&
-		    prof.getFilterAttrYes() == 0l &&
-		    prof.getFilterAttrNo() == 0l &&
+		    attribs[0] == 0l &&
+		    attribs[1] == 0l &&
+		    attribs[2] == 0l &&
+		    attribs[3] == 0l &&
 		    prof.getFilterStatus().equals("") &&
         prof.getFilterNoCoord());
 	}

Modified: trunk/src/CacheWolf/FilterData.java
===================================================================
--- trunk/src/CacheWolf/FilterData.java	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/src/CacheWolf/FilterData.java	2010-03-07 18:41:44 UTC (rev 2506)
@@ -25,8 +25,7 @@
 	private String filterDiff = new String("L");
 	private String filterTerr = new String("L");
 
-	private long filterAttrYes = 0l;
-	private long filterAttrNo = 0l;
+	private long[] filterAttr = {0l,0l,0l,0l};
 	private int filterAttrChoice = 0;
 
 	// filter setting for state of cache
@@ -41,23 +40,36 @@
 	}
 
 	/**
-	 * Returns an XML representation of the filter data. If a non empty String is passed as
-	 * parameter, then this String is used as ID-tag for the filter. If it is empty, then the ID
-	 * tag will not appear in the cache data. The ID tag is the string which is used in the filter
-	 * screen to appear in the filter list.
+	 * Returns an XML representation of the filter data.
+	 * If a non empty String is passed as parameter, then this String is used as ID-tag for the filter.
+	 * If it is empty, then the ID tag will not appear in the cache data. 
+	 * The ID tag is the string which is used in the filter screen to appear in the filter list.
 	 * @param ID ID tag of filter 
 	 * @return XML represenation of filter
 	 */
 	public String toXML(String ID) {
+		// do not change order, cause reading this is done in simple way
 		String saveID="";
 		if (ID != null && ! ID.equals("")) {
 			saveID = "id = \""+SafeXML.clean(ID)+"\" ";
 		}
-	    return "    <FILTERDATA "+saveID+"rose = \""+getFilterRose()+"\" type = \""+getFilterType()+
-		"\" var = \""+getFilterVar()+"\" dist = \""+getFilterDist().replace('"',' ')+"\" diff = \""+
-		getFilterDiff()+"\" terr = \""+getFilterTerr()+"\" size = \""+getFilterSize()+"\" attributesYes = \""+getFilterAttrYes()+
-		"\" attributesNo = \""+getFilterAttrNo()+"\" attributesChoice = \""+getFilterAttrChoice()+
-		"\" status = \""+SafeXML.clean(getFilterStatus())+"\" useRegexp = \""+useRegexp()+"\" noCoord = \""+getFilterNoCoord()+"\" />\n";	
+	    return "    <FILTERDATA "+saveID+
+	    "rose = \""+getFilterRose()+ "\"" +
+	    " type = \""+getFilterType()+ "\"" +
+		" var = \""+getFilterVar()+ "\"" +
+		" dist = \""+getFilterDist().replace('"',' ')+ "\"" +
+		" diff = \""+getFilterDiff()+ "\"" +
+		" terr = \""+getFilterTerr()+ "\"" +
+		" size = \""+getFilterSize()+ "\"" +
+		" attributesYes = \""+filterAttr[0]+ "\"" +
+		" attributesNo = \""+filterAttr[2]+ "\"" +
+		" attributesChoice = \""+getFilterAttrChoice()+ "\"" +
+		" status = \""+SafeXML.clean(getFilterStatus())+ "\"" +
+		" useRegexp = \""+useRegexp()+ "\"" +
+		" noCoord = \""+getFilterNoCoord()+ "\"" +
+		" attributesYes1 = \""+filterAttr[1]+ "\"" +
+		" attributesNo1 = \""+filterAttr[3]+ "\"" +
+		" />\n";	
 	}
 	/**
 	 * Ensure that all filters have the proper length so that the 'charAt' access in the filter do
@@ -143,22 +155,14 @@
 		this.filterTerr = filterTerr;
 	}
 
-	public long getFilterAttrYes() {
-		return filterAttrYes;
+	public long[] getFilterAttr() {
+		return filterAttr;
 	}
 
-	public void setFilterAttrYes(long filterAttrYes) {
-		this.filterAttrYes = filterAttrYes;
+	public void setFilterAttr(long[] filterAttr ) {
+		this.filterAttr=filterAttr;
 	}
-
-	public long getFilterAttrNo() {
-		return filterAttrNo;
-	}
-
-	public void setFilterAttrNo(long filterAttrNo) {
-		this.filterAttrNo = filterAttrNo;
-	}
-
+	
 	public int getFilterAttrChoice() {
 		return filterAttrChoice;
 	}

Modified: trunk/src/CacheWolf/FilterScreen.java
===================================================================
--- trunk/src/CacheWolf/FilterScreen.java	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/src/CacheWolf/FilterScreen.java	2010-03-07 18:41:44 UTC (rev 2506)
@@ -269,7 +269,9 @@
 
 		attV=new AttributesSelector();
 		pnlCacheAttributes.addLast(attV, CellConstants.STRETCH|CellConstants.LEFT/*|CellConstants.BORDER*/, CellConstants.STRETCH);
-		attV.setSelectionMasks( 0l, 0l );
+
+		long[] ini = {0l,0l,0l,0l};
+		attV.setSelectionMasks(ini);
 		
 		Frame frmScreen=new Frame();
 		mLabel lblInfo; 
@@ -481,7 +483,7 @@
 		//////////////////////////
 		// Panel 8 - Cache attributes
 		//////////////////////////
-		attV.setSelectionMasks( data.getFilterAttrYes(), data.getFilterAttrNo() );
+		attV.setSelectionMasks( data.getFilterAttr());
 		chcAttrib.select(data.getFilterAttrChoice());
 		
 		// Adjust colors of buttons depending on which filters are active
@@ -578,10 +580,10 @@
 		// Panel 7 - Search
 
 		// Panel 8 - Cache attributes
-		if ( attV.selectionMaskYes == 0l && attV.selectionMaskNo == 0l)
+		if (attV.isSetSelectionMask()) 
+			btnCacheAttributes.backGround=COLOR_FILTERACTIVE;
+		else
 			btnCacheAttributes.backGround=COLOR_FILTERINACTIVE;
-		else
-			btnCacheAttributes.backGround=COLOR_FILTERACTIVE;
 		btnCacheAttributes.repaint();
 
 		
@@ -831,8 +833,7 @@
 	    } else { 
 	    	data.setFilterTerr("G"+inpTerr.getText());
 	    }
-	    data.setFilterAttrYes(attV.selectionMaskYes);
-	    data.setFilterAttrNo(attV.selectionMaskNo);
+	    data.setFilterAttr(attV.getSelectionMasks());
 	    data.setFilterAttrChoice(chcAttrib.selectedIndex);
 	    data.setFilterStatus(chcStatus.getText());
 	    data.setUseRegexp(chkUseRegexp.getState());

Modified: trunk/src/CacheWolf/Preferences.java
===================================================================
--- trunk/src/CacheWolf/Preferences.java	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/src/CacheWolf/Preferences.java	2010-03-07 18:41:44 UTC (rev 2506)
@@ -387,11 +387,18 @@
 	/** Helper variables for XML parser */
 	private StringBuffer collectElement=null;
 	private String lastName; // The string to the last XML that was processed
+	private long getLongAttr(AttributeList atts, String name) {
+		String stmp=atts.getValue(name);
+		long ret = 0l;
+		if (stmp != null) {
+			ret = Convert.parseLong(stmp);
+		}
+		return ret;
+	}
 
 	/**
 	 * Method that gets called when a new element has been identified in pref.xml
 	 */
-
 	public void startElement(String name, AttributeList atts){
 		//Vm.debug("name = "+name);
 		lastName=name;
@@ -576,8 +583,12 @@
 			data.setFilterDiff(atts.getValue("diff"));
 			data.setFilterTerr(atts.getValue("terr"));
 			data.setFilterSize(atts.getValue("size"));
-			data.setFilterAttrYes(Convert.parseLong(atts.getValue("attributesYes")));
-			data.setFilterAttrNo(Convert.parseLong(atts.getValue("attributesNo")));
+			long[] filterAttr = { 0l,0l,0l,0l };
+			filterAttr[0] = getLongAttr(atts, "attributesYes");
+			filterAttr[1] = getLongAttr(atts, "attributesYes1");
+			filterAttr[2] = getLongAttr(atts, "attributesNo");
+			filterAttr[3] = getLongAttr(atts, "attributesNo1");
+			data.setFilterAttr(filterAttr);
 			data.setFilterAttrChoice(Convert.parseInt(atts.getValue("attributesChoice")));
 			data.setFilterStatus(SafeXML.cleanback(atts.getValue("status")));
 			data.setUseRegexp(Boolean.valueOf(atts.getValue("useRegexp")).booleanValue());

Modified: trunk/src/CacheWolf/Profile.java
===================================================================
--- trunk/src/CacheWolf/Profile.java	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/src/CacheWolf/Profile.java	2010-03-07 18:41:44 UTC (rev 2506)
@@ -1,6 +1,5 @@
 package CacheWolf;
 
-import CacheWolf.imp.OCXMLImporter;
 import CacheWolf.navi.Area;
 import CacheWolf.navi.TransformCoordinates;
 import CacheWolf.utils.FileBugfix;
@@ -364,12 +363,14 @@
 					setFilterTerr(ex.findNext());
 					setFilterSize(ex.findNext());
 					String attr = ex.findNext();
+					long[] filterAttr = { 0l,0l,0l,0l };					
 					if (attr != null && !attr.equals(""))
-						setFilterAttrYes(Convert.parseLong(attr));
+						filterAttr[0] = Convert.parseLong(attr);
 					attr = ex.findNext();
 					if (attr != null && !attr.equals(""))
-						setFilterAttrNo(Convert.parseLong(attr));
+						filterAttr[2] = Convert.parseLong(attr);
 					attr = ex.findNext();
+					setFilterAttr(filterAttr);					
 					if (attr != null && !attr.equals(""))
 						setFilterAttrChoice(Convert.parseInt(attr));
 					setShowBlacklisted(Boolean.valueOf(ex.findNext()).booleanValue());
@@ -387,19 +388,32 @@
 					setFilterTerr(ex.findNext());
 					setFilterSize(ex.findNext());
 					String attr = ex.findNext();
-					setFilterAttrYes(Convert.parseLong(attr));
+					long[] filterAttr = { 0l,0l,0l,0l };					
+					if (attr != null && !attr.equals(""))
+						filterAttr[0] = Convert.parseLong(attr);
 					attr = ex.findNext();
-					setFilterAttrNo(Convert.parseLong(attr));
+					if (attr != null && !attr.equals(""))
+						filterAttr[2] = Convert.parseLong(attr);
+					setFilterAttr(filterAttr);
 					attr = ex.findNext();
 					setFilterAttrChoice(Convert.parseInt(attr));
 					setFilterStatus(SafeXML.cleanback(ex.findNext()));
 					setFilterUseRegexp(Boolean.valueOf(ex.findNext()).booleanValue());
-					attr = ex.findNext();
-  				if (attr != null && !attr.equals("")) {
-  					setFilterNoCoord(Boolean.valueOf(attr).booleanValue());
-          } else {
-            setFilterNoCoord(true);
-          }
+					attr = ex.findNext();					
+	  				if (attr != null && !attr.equals("")) {
+	  					setFilterNoCoord(Boolean.valueOf(attr).booleanValue());
+
+	  				}
+	  				else {
+	  					setFilterNoCoord(true);
+	  				}
+	  				attr = ex.findNext();					
+	  				if (attr != null && !attr.equals(""))
+	  					filterAttr[1] = Convert.parseLong(attr);
+	  				attr = ex.findNext();
+	  				if (attr != null && !attr.equals(""))
+	  					filterAttr[3] = Convert.parseLong(attr);
+	  				setFilterAttr(filterAttr);
 				} else if (text.indexOf("<FILTERCONFIG")>=0){
 					ex.setSource(text.substring(text.indexOf("<FILTERCONFIG")));
 					String temp=ex.findNext();
@@ -741,26 +755,17 @@
 		this.showSearchResult = showSearchResult;
 	}
 
-	public long getFilterAttrYes() {
-		return currentFilter.getFilterAttrYes();
+	public void setFilterAttr(long[] filterAttr) {
+		this.notifyUnsavedChanges(filterAttr != this.getFilterAttr());
+		this.currentFilter.setFilterAttr(filterAttr);
 	}
 
-	public void setFilterAttrYes(long filterAttrYes) {
-		this.notifyUnsavedChanges(filterAttrYes != this.getFilterAttrYes());
-		this.currentFilter.setFilterAttrYes(filterAttrYes);
+	public long[] getFilterAttr() {
+		return currentFilter.getFilterAttr();
 	}
 
-	public long getFilterAttrNo() {
-		return currentFilter.getFilterAttrNo();
-	}
-
-	public void setFilterAttrNo(long filterAttrNo) {
-		this.notifyUnsavedChanges(filterAttrNo != this.getFilterAttrNo());
-		this.currentFilter.setFilterAttrNo(filterAttrNo);
-	}
-
 	public int getFilterAttrChoice() {
-		return currentFilter.getFilterAttrChoice();
+		return this.currentFilter.getFilterAttrChoice();
 	}
 
 	public void setFilterAttrChoice(int filterAttrChoice) {

Modified: trunk/src/CacheWolf/ShowCacheInBrowser.java
===================================================================
--- trunk/src/CacheWolf/ShowCacheInBrowser.java	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/src/CacheWolf/ShowCacheInBrowser.java	2010-03-07 18:41:44 UTC (rev 2506)
@@ -94,13 +94,13 @@
 						for (int i=0; i<chD.getExistingDetails().attributes.getCount(); i++) {
 							Hashtable atts=new Hashtable();
 							atts.put("IMAGE","<img src=\"file://"+
-									   Attribute.getImageDir()+chD.getExistingDetails().attributes.getName(i)+
-									   "\" border=0 alt=\""+chD.getExistingDetails().attributes.getInfo(i)+"\">");
+									 chD.getExistingDetails().attributes.getAttribute(i).getPathAndImageName()+
+									 "\" border=0 alt=\""+chD.getExistingDetails().attributes.getAttribute(i).getMsg()+"\">");
 							if (i % 5 ==4)
 								atts.put("BR","<br/>");
 							else
 								atts.put("BR","");
-							atts.put("INFO",chD.getExistingDetails().attributes.getInfo(i));
+							atts.put("INFO",chD.getExistingDetails().attributes.getAttribute(i).getMsg());
 							attVect.add(atts);
 						}
 						tpl.setParam("ATTRIBUTES",attVect);

Modified: trunk/src/CacheWolf/imp/GPXImporter.java
===================================================================
--- trunk/src/CacheWolf/imp/GPXImporter.java	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/src/CacheWolf/imp/GPXImporter.java	2010-03-07 18:41:44 UTC (rev 2506)
@@ -257,7 +257,13 @@
 			for (int i = 0; i < atts.getLength(); i++) {
 				Vm.debug("Type: " + atts.getType(i) + " Name: " + atts.getName(i)+ " Value: "+atts.getValue(i));
 			}
-		}
+		}	
+		if (name.equals("attribute")) {
+			int id = Integer.parseInt(atts.getValue("id"));
+			holder.getFreshDetails().attributes.add(id,atts.getValue("inc")); // from GC!
+			holder.setAttribsAsBits(holder.getFreshDetails().attributes.getAttribsAsBits());
+			return;
+		}		
 	}
 	
 	public void endElement(String name){
@@ -307,8 +313,8 @@
 				cacheDB.add(holder);
 				// don't spider additional waypoints, so check
 				// if waypoint starts with "GC"
-				if(doSpider == true) {
-					if(spiderOK == true && holder.is_archived() == false){
+				if(doSpider) {
+					if(spiderOK && holder.is_archived() == false){
 							if(holder.LatLon.length() > 1){
 							if(getMaps){
 								ParseLatLon pll = new ParseLatLon(holder.LatLon,".");
@@ -329,7 +335,7 @@
 							Extractor ex = new Extractor(orig, "<img src=\"", ">", 0, false);
 							text = ex.findNext();
 							int num = 0;
-							while(ex.endOfSearch() == false && spiderOK == true){
+							while(ex.endOfSearch() == false && spiderOK){
 								//Vm.debug("Replacing: " + text);
 								if (num >= holder.getFreshDetails().images.size())break;
 								imgName = holder.getFreshDetails().images.get(num).getTitle();

Modified: trunk/src/CacheWolf/imp/OCXMLImporter.java
===================================================================
--- trunk/src/CacheWolf/imp/OCXMLImporter.java	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/src/CacheWolf/imp/OCXMLImporter.java	2010-03-07 18:41:44 UTC (rev 2506)
@@ -380,6 +380,7 @@
 		}
 		if(name.equals("type")){
 			holder.setType(CacheType.ocType2CwType(atts.getValue("id")));
+			holder.getFreshDetails().attributes.clear();
 			return;
 		}
 		if(name.equals("status")){
@@ -411,6 +412,13 @@
 			if (holder.getWayPoint().length()==0) throw new IllegalArgumentException("empty waypointname"); // this should not happen - it is likey a bug in opencaching / it happens on 27-12-2006 on cache OC143E
 			return;
 		}
+		
+		if (name.equals("attribute")) {
+			int id = Integer.parseInt(atts.getValue("id"));
+			holder.getFreshDetails().attributes.add(id);
+			holder.setAttribsAsBits(holder.getFreshDetails().attributes.getAttribsAsBits());
+			return;
+		}
 
 	}
 
@@ -443,10 +451,12 @@
 			case 1:
 				logIcon = GPXImporter.typeText2Image("Found");
 				break;
-			case 2:	logIcon = GPXImporter.typeText2Image("Not Found");
-			holder.setNoFindLogs((byte)(holder.getNoFindLogs()+1));
-			break;
-			case 3: logIcon = GPXImporter.typeText2Image("Note");
+			case 2:	
+				logIcon = GPXImporter.typeText2Image("Not Found");
+				holder.setNoFindLogs((byte)(holder.getNoFindLogs()+1));
+				break;
+			case 3: 
+				logIcon = GPXImporter.typeText2Image("Note");
 			}
 			loggerRecommended = atts.getValue("recommended").equals("1");
 			return;
@@ -582,8 +592,7 @@
 			if (holder.is_HTML())	linebraek = "<br>\n";
 			else 					linebraek = "\n";
 
-			if (holder.is_updated())	holder.getFreshDetails().LongDescription += linebraek + processingDescLang + ":" +  linebraek + strData; // if a long description is already updated, then this one is likely to be in another language
-			else 					 	holder.getFreshDetails().LongDescription =              processingDescLang + ":" +  linebraek + strData;
+			holder.getFreshDetails().LongDescription =              processingDescLang + ":" +  linebraek + strData;
 			return;
 		}
 
@@ -593,9 +602,7 @@
 			return;
 		}
 		if (name.equals("hint")){
-			if (holder.is_updated())
-				holder.getFreshDetails().Hints += "\n" +  processingDescLang + ": " + Common.rot13(strData);
-			else						holder.getFreshDetails().Hints = Common.rot13(strData);
+			holder.getFreshDetails().Hints = Common.rot13(strData);
 			holder.setUpdated(true); // remark: this is used in "shortdesc" to decide weather the description should be appended or replaced
 			return;
 		}

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-03-05 12:35:14 UTC (rev 2505)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-03-07 18:41:44 UTC (rev 2506)
@@ -1843,8 +1843,7 @@
 			chD.attributes.add(attribute);
 			attribute=attEx.findNext();
 		}
-		chD.getParent().setAttributesYes(chD.attributes.attributesYes);
-		chD.getParent().setAttributesNo(chD.attributes.attributesNo);
+		chD.getParent().setAttribsAsBits(chD.attributes.getAttribsAsBits());
 	}
 
 



From araber95 at mail.berlios.de  Sun Mar  7 19:46:20 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun, 7 Mar 2010 19:46:20 +0100
Subject: [Cachewolf-svn] r2507 - trunk/res_noewe/attributes
Message-ID: <201003071846.o27IkKUr012319@sheep.berlios.de>

Author: araber95
Date: 2010-03-07 19:46:17 +0100 (Sun, 07 Mar 2010)
New Revision: 2507

Added:
   trunk/res_noewe/attributes/submerged-no.gif
   trunk/res_noewe/attributes/submerged-non.gif
   trunk/res_noewe/attributes/submerged-yes.gif
Log:
didn't see these attribs

Added: trunk/res_noewe/attributes/submerged-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/submerged-no.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/submerged-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/submerged-non.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/submerged-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/submerged-yes.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From araber95 at mail.berlios.de  Mon Mar  8 12:39:36 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 8 Mar 2010 12:39:36 +0100
Subject: [Cachewolf-svn] r2508 - trunk
Message-ID: <201003081139.o28Bdauv014261@sheep.berlios.de>

Author: araber95
Date: 2010-03-08 12:39:34 +0100 (Mon, 08 Mar 2010)
New Revision: 2508

Modified:
   trunk/build.xml
Log:
build failed (perhaps caused by now missing attributes-big) try again

Modified: trunk/build.xml
===================================================================
--- trunk/build.xml	2010-03-07 18:46:17 UTC (rev 2507)
+++ trunk/build.xml	2010-03-08 11:39:34 UTC (rev 2508)
@@ -14,8 +14,8 @@
 		need: http://www.geoclub.de/viewtopic.php?f=40&t=32351&p=674236 to
 		install it in linux / ubuntu. For
 		windows make sure to check the prerequisites on
-		http://ant.apache.org/manual/OptionalTasks/cab.html 
-		Further information about ant can be found at 
+		http://ant.apache.org/manual/OptionalTasks/cab.html
+		Further information about ant can be found at
 		http://ant.apache.org/manual/
 		http://help.eclipse.org/help33/topic/org.eclipse.platform.doc.user/gettingStarted/qs-81_basics.htm
 		or check one of the many ant tutorials on the web
@@ -178,13 +178,13 @@
 		<mkdir dir="${pkg.dir}" />
 
 		<copy file="${ewe.progdir}/PocketPC2003/CacheWolf.exe" todir="${assemble.dir}" />
-		<!-- copy big attributes -->
-		<copy todir="${assemble.dir}/attributes-big">
-			<fileset dir="res_noewe/attributes-big" />
-		</copy>
 		<antcall target="copyres" />
+	<!--
+	dll can be downloaded separately and is needed for all PDA - Versions
+	so why assemble only for PPC2003
+	the space is not really a problem, but as long as there are these massive hint in cw homepage for installing the ewe - VM ...
 		<antcall target="copyppcdll" />
-
+	-->
 		<zip destfile="${pkg.dir}/CacheWolf-PPC2003.zip" basedir="${assemble.dir}" />
 
 		<delete dir="${assemble.dir}" />
@@ -218,14 +218,14 @@
 		<delete dir="${assemble.dir}" />
 	</target>
 
-	<!-- 
+	<!--
 	   This target will make a html file from the docbook manual to Cachewolf
 	   You need to set
 	   -DdocbookTo=/usr/local/serna-4.1/xml/stylesheets/docbook-xsl-1.68.1/html/docbook
 	   (leave out the .xsl)
 	   on Ubuntu 9.10
 	-->
-	
+
 	<!--
 		I installed "Serna Free Open Source XML Editor" in Ubuntu 9.10 to
 		compile the docbook to html, but I guess installung docbook-xsl would
@@ -236,8 +236,8 @@
 		<mkdir dir="${assemble.dir}" />
 		<mkdir dir="${assemble.dir}/doku_html_de" />
 		<echo message="taking conversion infos from ${docbookTo}" />
-		
-	    <!-- generate html file and pics dir in the source folder -->		
+
+	    <!-- generate html file and pics dir in the source folder -->
 		<exec executable="xsltproc">
 			<arg value="--xinclude" />
 			<arg value="-o" />
@@ -371,7 +371,6 @@
 			verbose="true">
 			<fileset dir="res_noewe/attributes" />
 		</copy>
-		<!-- copy attributes big will be done only for PPC2003 -->
 
 		<!-- copy exporticons -->
 		<copy todir="${assemble.dir}/exporticons" failonerror="true"



From araber95 at mail.berlios.de  Mon Mar  8 19:29:59 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 8 Mar 2010 19:29:59 +0100
Subject: [Cachewolf-svn] r2509 - trunk
Message-ID: <201003081829.o28ITxNP031942@sheep.berlios.de>

Author: araber95
Date: 2010-03-08 19:29:56 +0100 (Mon, 08 Mar 2010)
New Revision: 2509

Modified:
   trunk/getRes.bat
Log:
getting the attributes to work

Modified: trunk/getRes.bat
===================================================================
--- trunk/getRes.bat	2010-03-08 11:39:34 UTC (rev 2508)
+++ trunk/getRes.bat	2010-03-08 18:29:56 UTC (rev 2509)
@@ -15,8 +15,7 @@
 REM fill .\work subdirs
 REM
 mkdir .\work\attributes
-copy .\res_noewe\attributes-big\*.* .\work\attributes\*.*
-copy .\res_noewe\attributes\*-non.gif .\work\attributes\*.*
+copy .\res_noewe\attributes\*.* .\work\attributes\*.*
 REM
 mkdir .\work\mmcDefault
 copy .\res_noewe\mmcDefault\*.* .\work\mmcDefault\*.*



From araber95 at mail.berlios.de  Mon Mar  8 23:05:14 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 8 Mar 2010 23:05:14 +0100
Subject: [Cachewolf-svn] r2510 - trunk/src/CacheWolf
Message-ID: <201003082205.o28M5Ets007218@sheep.berlios.de>

Author: araber95
Date: 2010-03-08 23:05:13 +0100 (Mon, 08 Mar 2010)
New Revision: 2510

Modified:
   trunk/src/CacheWolf/TablePanel.java
Log:
Bugfix for statusline disabled

Modified: trunk/src/CacheWolf/TablePanel.java
===================================================================
--- trunk/src/CacheWolf/TablePanel.java	2010-03-08 18:29:56 UTC (rev 2509)
+++ trunk/src/CacheWolf/TablePanel.java	2010-03-08 22:05:13 UTC (rev 2510)
@@ -39,7 +39,7 @@
 		myMod.hasRowHeaders = false;
 		myMod.hasColumnHeaders  = true;
 		tc.setTableModel(myMod);
-		statBar.setMyTableModel(myMod);
+		if (statBar!=null) statBar.setMyTableModel(myMod);
 		pref.setMyTableModel(myMod);
 	}
 	



From araber95 at mail.berlios.de  Mon Mar  8 23:06:24 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 8 Mar 2010 23:06:24 +0100
Subject: [Cachewolf-svn] r2511 - trunk/src/CacheWolf
Message-ID: <201003082206.o28M6Oll007265@sheep.berlios.de>

Author: araber95
Date: 2010-03-08 23:06:22 +0100 (Mon, 08 Mar 2010)
New Revision: 2511

Added:
   trunk/src/CacheWolf/InputScreen.java
Modified:
   trunk/src/CacheWolf/CalcPanel.java
   trunk/src/CacheWolf/CoordsScreen.java
Log:
touch input for coordinates (testversion)

Modified: trunk/src/CacheWolf/CalcPanel.java
===================================================================
--- trunk/src/CacheWolf/CalcPanel.java	2010-03-08 22:05:13 UTC (rev 2510)
+++ trunk/src/CacheWolf/CalcPanel.java	2010-03-08 22:06:22 UTC (rev 2511)
@@ -2,6 +2,8 @@
 
 import CacheWolf.navi.Metrics;
 import CacheWolf.navi.TransformCoordinates;
+import CacheWolf.InputScreen;
+import ewe.sys.Vm;
 import ewe.ui.*;
 import ewe.ui.formatted.TextDisplay;
 import ewe.fx.Dimension;
@@ -53,6 +55,7 @@
 	CellPanel BottomP = new CellPanel();
 	
 	String lastWaypoint = "";
+	boolean bBearing, bDistance;
 	
 	int currFormat;
 	mButton btnChangeLatLon;
@@ -186,6 +189,23 @@
 	public void onEvent(Event ev){
 
 		//Vm.debug(ev.toString());
+		if(ev instanceof ControlEvent && ev.type == ControlEvent.FOCUS_IN && Vm.isMobile()){
+			if (ev.target == inpBearing && !bBearing){
+				bBearing = true;
+				InputScreen inpScreen = new InputScreen(inpBearing, MyLocale.getMsg(1403,"Bearing"));
+				inpScreen.execute();
+				bDistance = false;
+			}
+			
+			if (ev.target == inpDistance && !bDistance){
+				bDistance = true;
+				InputScreen inpScreen = new InputScreen(inpDistance, MyLocale.getMsg(1404,"Distance"));
+				inpScreen.execute();
+				bBearing = false;
+			}
+		}
+		
+		
 		if(ev instanceof ControlEvent && ev.type == ControlEvent.PRESSED){
 			if (ev.target == chkFormat 
 					|| ((ev.type == ControlEvent.PRESSED) && (ev.target == localCooSystem )) ) {

Modified: trunk/src/CacheWolf/CoordsScreen.java
===================================================================
--- trunk/src/CacheWolf/CoordsScreen.java	2010-03-08 22:05:13 UTC (rev 2510)
+++ trunk/src/CacheWolf/CoordsScreen.java	2010-03-08 22:06:22 UTC (rev 2511)
@@ -4,6 +4,7 @@
 import CacheWolf.navi.Navigate;
 import CacheWolf.navi.ProjectedPoint;
 import CacheWolf.navi.TransformCoordinates;
+import CacheWolf.InputScreen;
 import ewe.ui.*;
 import ewe.fx.Dimension;
 import ewe.sys.*;
@@ -24,12 +25,24 @@
 	mInput inpUTMZone, inpUTMNorthing, inpUTMEasting;
 	mInput inpText;
 	mButton btnCancel, btnApply, btnCopy, btnPaste, btnParse, btnGps, btnClear, btnSearch;
+	InputScreen inpScreen;
+
 	CWPoint coordInp = new CWPoint();
 	CellPanel topLinePanel = new CellPanel();
 	CellPanel mainPanel = new CellPanel();
 	int exitKeys[]={75009};
 	int currFormat;
 
+	boolean bNSDeg = false;
+	boolean bNSm = false;
+	boolean	bNSs = false;
+	boolean bEWDeg = false;
+	boolean bEWm = false;
+	boolean bEWs = false;
+	boolean bUTMNorthing = false;
+	boolean bUTMEasting = false;
+	
+
 	private boolean allowInvalid = false;
 
 	public CoordsScreen(boolean allowInvalidCoords)
@@ -116,27 +129,30 @@
 		//add Panels
 		this.addLast(mainPanel,CellConstants.DONTSTRETCH, CellConstants.WEST);
 		chcNS.takeFocus(ControlConstants.ByKeyboard);
+		
+		
 	}
 
 	public void activateFields(int format){
-		inpEWDeg.wantReturn=false; inpEWm.wantReturn=false; inpEWs.wantReturn=false; inpUTMNorthing.wantReturn=false;
+		//inpEWDeg.wantReturn=false; inpEWm.wantReturn=false; inpEWs.wantReturn=false; inpUTMNorthing.wantReturn=false;
+
 		switch (format){
 		case TransformCoordinates.DD:
 			enable(chcNS); enable(inpNSDeg); disable(inpNSm); disable(inpNSs);
 			enable(chcEW); enable(inpEWDeg); disable(inpEWm); disable(inpEWs);
-			inpEWDeg.wantReturn=true;
+			//inpEWDeg.wantReturn=true;
 			disable(inpUTMZone); disable(inpUTMNorthing); disable(inpUTMEasting);
 			break;
 		case TransformCoordinates.DMM: 	
 			enable(chcNS); enable(inpNSDeg); enable(inpNSm); disable(inpNSs);
 			enable(chcEW); enable(inpEWDeg); enable(inpEWm); disable(inpEWs);
-			inpEWm.wantReturn=true;
+			//inpEWm.wantReturn=true;
 			disable(inpUTMZone); disable(inpUTMNorthing); disable(inpUTMEasting);
 			break;
 		case TransformCoordinates.DMS: 	
 			enable(chcNS); enable(inpNSDeg); enable(inpNSm); enable(inpNSs);
 			enable(chcEW); enable(inpEWDeg); enable(inpEWm); enable(inpEWs);
-			inpEWs.wantReturn=true;
+			//inpEWs.wantReturn=true;
 			disable(inpUTMZone); disable(inpUTMNorthing); disable(inpUTMEasting);
 			break;
 		default: 	
@@ -145,7 +161,7 @@
 			if (TransformCoordinates.localSystems[localCooSystem.getInt()].zoneSeperatly) enable(inpUTMZone);
 			else disable(inpUTMZone); 
 			enable(inpUTMNorthing); enable(inpUTMEasting);
-			inpUTMNorthing.wantReturn=true;
+			//inpUTMNorthing.wantReturn=true;
 			break;
 		}
 
@@ -216,12 +232,86 @@
 	}
 
 
+	
 	public void onEvent(Event ev){
 
 		//Vm.debug(ev.toString());
 		// Ensure that the Enter key moves to the appropriate field
 		// for Checkboxes and Choice controls this is done via the exitKeys
 		// For input fields we use the wantReturn field
+
+		if(ev instanceof ControlEvent && ev.type == ControlEvent.FOCUS_IN  && Vm.isMobile()){
+		//if(ev instanceof ControlEvent && ev.type == ControlEvent.FOCUS_IN){
+			if (ev.target == inpNSDeg && !bNSDeg){
+				bNSDeg = true;
+				if(chkFormat.getSelectedIndex() == 0)
+					inpScreen = new InputScreen(inpNSDeg,"Format: d.d?");
+				else
+					inpScreen = new InputScreen(inpNSDeg,"Format: d?");					
+				inpScreen.execute();
+				bNSm = bNSs = bEWDeg = bEWm = bEWs = bUTMNorthing = bUTMEasting = false;
+			}
+			
+			if (ev.target == inpNSm && !bNSm){
+				bNSm = true;
+				if(chkFormat.getSelectedIndex() == 2)
+					inpScreen = new InputScreen(inpNSm,"Format: m");
+				else
+					inpScreen = new InputScreen(inpNSm,"Format: m.s");					
+				inpScreen.execute();
+				bNSDeg = bNSs = bEWDeg = bEWm = bEWs = bUTMNorthing = bUTMEasting = false;
+			}
+			
+			if (ev.target == inpNSs && !bNSs){
+				bNSs = true;
+				inpScreen = new InputScreen(inpNSs,"Format: s");
+				inpScreen.execute();
+				bNSDeg = bNSm = bEWDeg = bEWm = bEWs = bUTMNorthing = bUTMEasting = false;
+			}
+			
+			if (ev.target == inpEWDeg && !bEWDeg){
+				bEWDeg = true;
+				if(chkFormat.getSelectedIndex() == 0)
+					inpScreen = new InputScreen(inpEWDeg,"Format: d.d?");
+				else
+					inpScreen = new InputScreen(inpEWDeg,"Format: d?");	
+				inpScreen.execute();
+				bNSDeg = bNSm = bNSs = bEWm = bEWs = bUTMNorthing = bUTMEasting = false;
+			}
+			
+			if (ev.target == inpEWm && !bEWm){
+				bEWm = true;
+				if(chkFormat.getSelectedIndex() == 2)
+					inpScreen = new InputScreen(inpEWm,"Format: m");
+				else
+					inpScreen = new InputScreen(inpEWm,"Format: m.s");
+				inpScreen.execute();
+				bNSDeg = bNSm = bNSs = bEWDeg = bEWs = bUTMNorthing = bUTMEasting = false;
+			}
+			
+			if (ev.target == inpEWs && !bEWs){
+				bEWs = true;
+				inpScreen = new InputScreen(inpEWs,"Format: s");
+				inpScreen.execute();
+				bNSDeg = bNSm = bNSs = bEWDeg = bEWm = bUTMNorthing = bUTMEasting = false;
+			}
+
+			if (ev.target == inpUTMNorthing && !bUTMNorthing){
+				bUTMNorthing = true;
+				inpScreen = new InputScreen(inpUTMNorthing,"Format: " + MyLocale.getMsg(1401,"Northing"));
+				inpScreen.execute();
+				bNSDeg = bNSm = bNSs = bEWDeg = bEWm = bEWs = bUTMEasting = false;
+			}
+			
+			if (ev.target == inpUTMEasting && !bUTMEasting){
+				bUTMEasting = true;
+				inpScreen = new InputScreen(inpUTMEasting,"Format: " + MyLocale.getMsg(1402,"Easting"));
+				inpScreen.execute();
+				bNSDeg = bNSm = bNSs = bEWDeg = bEWm = bEWs = bUTMNorthing = false;
+			}
+			
+		}
+			
 		if(ev instanceof ControlEvent && ev.type == ControlEvent.EXITED){
 			if (((ControlEvent)ev).target==chkDD || ((ControlEvent)ev).target==chkDMM ||
 					((ControlEvent)ev).target==chkDMS) Gui.takeFocus(chcNS,ControlConstants.ByKeyboard);	
@@ -233,6 +323,7 @@
 			if (((ControlEvent)ev).target==inpEWDeg || ((ControlEvent)ev).target==inpEWm ||
 					((ControlEvent)ev).target==inpEWs || ((ControlEvent)ev).target==inpUTMNorthing) Gui.takeFocus(btnApply,ControlConstants.ByKeyboard);	
 			
+			
 			if (ev.target == chkFormat || ev.target == localCooSystem){
 				if (ev.target == localCooSystem) chkFormat.selectIndex(3);
 				readFields(coordInp);
@@ -314,6 +405,7 @@
 		}
 		super.onEvent(ev);
 	}
+	
 
 	private static final int[] formatSelToLocalSystem = {
 		TransformCoordinates.DD,

Added: trunk/src/CacheWolf/InputScreen.java
===================================================================
--- trunk/src/CacheWolf/InputScreen.java	2010-03-08 22:05:13 UTC (rev 2510)
+++ trunk/src/CacheWolf/InputScreen.java	2010-03-08 22:06:22 UTC (rev 2511)
@@ -0,0 +1,210 @@
+package CacheWolf;
+
+import ewe.ui.*;
+import ewe.fx.Font;
+
+/**
+*	Class for entering coordinates<br>
+*	Class IDs 1400 and 600 (same as calc panel and preferences screen)<br>
+*/
+
+
+public class InputScreen extends Form {
+
+	String sText = "";
+	mButton btn9, btn8, btn7, btn6, btn5, btn4, btn3, btn2, btn1, btn0, btnPoint, btnOk, btnDEL, btnDELAll;
+	mInput inpText = new mInput();
+	CellPanel mainPanel = new CellPanel();
+	mLabel lblValueShow = new mLabel("0.0");
+	mLabel lblTextShow = new mLabel("Info");
+
+
+	public InputScreen(mInput inpAnz, String sAnz)
+	{
+		inpText = inpAnz;
+		lblValueShow.setText(inpText.getText());
+		lblTextShow.setText(sAnz);
+		//inpText.setText(sText);
+		InitInputScreen();
+	}
+
+	private void InitInputScreen()
+	{
+		int sw = MyLocale.getScreenWidth(); int sh = MyLocale.getScreenHeight();
+		Preferences pref = Global.getPref();int fs = pref.fontSize;
+		int psx; int psy;
+		if((sw>300) && (sh>300)){
+			// larger screens: size according to fontsize
+			psx=240;psy=260;
+			if(fs > 12){psx=300;psy=330;}
+			if(fs > 17){psx=400;psy=340;}
+			if(fs > 23){psx=500;psy=350;}
+			this.setPreferredSize(psx,psy);
+		}
+		else{
+			// small screens: fixed size
+			if (sh>240)
+				this.setPreferredSize(240,260);
+			else
+				this.setPreferredSize(240,240);
+		}
+
+		this.setTitle("InputConsole");
+		mainPanel.addLast(lblValueShow,CellConstants.DONTSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		mainPanel.addLast(lblTextShow,CellConstants.DONTSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btn7 = new mButton(" 7 ");
+		mainPanel.addNext(btn7,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btn8 = new mButton(" 8 ");
+		mainPanel.addNext(btn8,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btn9 = new mButton(" 9 ");
+		mainPanel.addNext(btn9,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnDEL = new mButton("DEL");
+		mainPanel.addLast(btnDEL,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btn4 = new mButton(" 4 ");
+		mainPanel.addNext(btn4,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btn5 = new mButton(" 5 ");
+		mainPanel.addNext(btn5,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btn6 = new mButton(" 6 ");
+		mainPanel.addNext(btn6,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnDELAll = new mButton("DEL All");
+		mainPanel.addLast(btnDELAll,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btn1 = new mButton(" 1 ");
+		mainPanel.addNext(btn1,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btn2 = new mButton(" 2 ");
+		mainPanel.addNext(btn2,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btn3 = new mButton(" 3 ");
+		mainPanel.addLast(btn3,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btn0 = new mButton(" 0 ");
+		mainPanel.addNext(btn0,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnPoint = new mButton(" . ");
+		mainPanel.addNext(btnPoint,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnOk = new mButton("OK");
+		mainPanel.addLast(btnOk,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+
+		this.addLast(mainPanel,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnOk.takeFocus(ControlConstants.ByRequest);
+
+		int inpFontSize = ( 6 * pref.fontSize ) / 2;
+		Font inpNewFont = new Font("Helvetica", Font.PLAIN, inpFontSize );
+		lblValueShow.setFont(inpNewFont);
+
+		int btnFontSize = ( 3 * pref.fontSize ) / 2;
+		Font btnNewFont = new Font("Helvetica", Font.PLAIN, btnFontSize );
+		lblTextShow.setFont(btnNewFont);
+		btnPoint.setFont(btnNewFont);
+		btn9.setFont(btnNewFont);
+		btn8.setFont(btnNewFont);
+		btn7.setFont(btnNewFont);
+		btn6.setFont(btnNewFont);
+		btn5.setFont(btnNewFont);
+		btn4.setFont(btnNewFont);
+		btn3.setFont(btnNewFont);
+		btn2.setFont(btnNewFont);
+		btn1.setFont(btnNewFont);
+		btn0.setFont(btnNewFont);
+		btnOk.setFont(btnNewFont);
+		btnDEL.setFont(btnNewFont);
+		btnDELAll.setFont(btnNewFont);
+
+	}
+
+	public void onEvent(Event ev){
+		if(ev instanceof ControlEvent && ev.type == ControlEvent.PRESSED){
+			if (ev.target == btn1){
+			   sText = lblValueShow.getText();
+			   sText += "1";
+			   //inpText.setText(sText);
+			   lblValueShow.setText(sText);
+			}
+
+			if (ev.target == btn2){
+			   sText = lblValueShow.getText();
+			   sText += "2";
+			   //inpText.setText(sText);
+			   lblValueShow.setText(sText);
+			}
+
+			if (ev.target == btn3){
+			   sText = lblValueShow.getText();
+			   sText += "3";
+			   //inpText.setText(sText);
+			   lblValueShow.setText(sText);
+			}
+
+			if (ev.target == btn4){
+			   sText = lblValueShow.getText();
+			   sText += "4";
+			   //inpText.setText(sText);
+			   lblValueShow.setText(sText);
+			}
+
+			if (ev.target == btn5){
+			   sText = lblValueShow.getText();
+			   sText += "5";
+			   //inpText.setText(sText);
+			   lblValueShow.setText(sText);
+			}
+
+			if (ev.target == btn6){
+			   sText = lblValueShow.getText();
+			   sText += "6";
+			   //inpText.setText(sText);
+			   lblValueShow.setText(sText);
+			}
+
+			if (ev.target == btn7){
+			   sText = lblValueShow.getText();
+			   sText += "7";
+			   //inpText.setText(sText);
+			   lblValueShow.setText(sText);
+			}
+
+			if (ev.target == btn8){
+			   sText = lblValueShow.getText();
+			   sText += "8";
+			   //inpText.setText(sText);
+			   lblValueShow.setText(sText);
+			}
+
+			if (ev.target == btn9){
+			   sText = lblValueShow.getText();
+			   sText += "9";
+			   //inpText.setText(sText);
+			   lblValueShow.setText(sText);
+			}
+
+			if (ev.target == btn0){
+			   sText = lblValueShow.getText();
+			   sText += "0";
+			   //inpText.setText(sText);
+			   lblValueShow.setText(sText);
+			}
+
+			if (ev.target == btnPoint){
+			   sText = lblValueShow.getText();
+			   sText += ".";
+			   //inpText.setText(sText);
+			   lblValueShow.setText(sText);
+			}
+
+			if (ev.target == btnOk ){
+				inpText.setText(lblValueShow.getText());
+				this.close(0);
+			}
+
+			if (ev.target == btnDEL){
+			   sText = lblValueShow.getText();
+			   if(sText != "")
+				sText = sText.substring(0, sText.length()-1);
+			   //inpText.setText(sText);
+			   lblValueShow.setText(sText);
+			}
+
+			if (ev.target == btnDELAll){
+			   //inpText.setText("");
+				lblValueShow.setText("");
+			}
+		}
+	}
+
+}



From araber95 at mail.berlios.de  Tue Mar  9 09:38:32 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Tue, 9 Mar 2010 09:38:32 +0100
Subject: [Cachewolf-svn] r2512 - trunk/src/CacheWolf
Message-ID: <201003090838.o298cW1R014274@sheep.berlios.de>

Author: araber95
Date: 2010-03-09 09:38:30 +0100 (Tue, 09 Mar 2010)
New Revision: 2512

Modified:
   trunk/src/CacheWolf/StatusBar.java
Log:
not enough place for centre coords in statbar at screenwidth 320 (otherwise scrollbar visible)

Modified: trunk/src/CacheWolf/StatusBar.java
===================================================================
--- trunk/src/CacheWolf/StatusBar.java	2010-03-08 22:06:22 UTC (rev 2511)
+++ trunk/src/CacheWolf/StatusBar.java	2010-03-09 08:38:30 UTC (rev 2512)
@@ -82,7 +82,8 @@
 		// Current centre can only be displayed if screen is big
 		// Otherwise it forces a scrollbar
 		// This can happen even on bigger screens with big fonts
-		if ((MyLocale.getScreenWidth()>=320) && !(MobileVGA && (pref.fontSize > 20)))
+		// >=320 --> >=640 Das ist mir zu bl?d, dann sieht man eben keine Zentrumskoordinaten
+		if ((MyLocale.getScreenWidth()>=640) && !(MobileVGA && (pref.fontSize > 20)))
 			strCenter="  \u00a4 " + pref.getCurCentrePt().toString();
 		if (Global.getPref().sortAutomatic) {
 			this.btnNoSorting.backGround=new Color(0,255,255);



From araber95 at mail.berlios.de  Wed Mar 10 00:11:07 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 10 Mar 2010 00:11:07 +0100
Subject: [Cachewolf-svn] r2513 - in trunk/tools: . pgn Konvertierung pgn
	Konvertierung/DoFiles pgn Konvertierung/DoFiles/My Project
	pgn Konvertierung/DoFiles/bin pgn
	Konvertierung/DoFiles/bin/Debug pgn Konvertierung/DoFiles/obj
	pgn Konvertierung/DoFiles/obj/Debug
Message-ID: <201003092311.o29NB7Wi019099@sheep.berlios.de>

Author: araber95
Date: 2010-03-10 00:10:56 +0100 (Wed, 10 Mar 2010)
New Revision: 2513

Added:
   trunk/tools/pgn Konvertierung/
   trunk/tools/pgn Konvertierung/DoFiles.sln
   trunk/tools/pgn Konvertierung/DoFiles.suo
   trunk/tools/pgn Konvertierung/DoFiles/
   trunk/tools/pgn Konvertierung/DoFiles/DoFiles.Designer.vb
   trunk/tools/pgn Konvertierung/DoFiles/DoFiles.resx
   trunk/tools/pgn Konvertierung/DoFiles/DoFiles.vb
   trunk/tools/pgn Konvertierung/DoFiles/DoFiles.vbproj
   trunk/tools/pgn Konvertierung/DoFiles/DoFiles.vbproj.user
   trunk/tools/pgn Konvertierung/DoFiles/My Project/
   trunk/tools/pgn Konvertierung/DoFiles/My Project/Application.Designer.vb
   trunk/tools/pgn Konvertierung/DoFiles/My Project/Application.myapp
   trunk/tools/pgn Konvertierung/DoFiles/My Project/AssemblyInfo.vb
   trunk/tools/pgn Konvertierung/DoFiles/My Project/Resources.Designer.vb
   trunk/tools/pgn Konvertierung/DoFiles/My Project/Resources.resx
   trunk/tools/pgn Konvertierung/DoFiles/My Project/Settings.Designer.vb
   trunk/tools/pgn Konvertierung/DoFiles/My Project/Settings.settings
   trunk/tools/pgn Konvertierung/DoFiles/bin/
   trunk/tools/pgn Konvertierung/DoFiles/bin/Debug/
   trunk/tools/pgn Konvertierung/DoFiles/bin/Debug/DoFiles.exe
   trunk/tools/pgn Konvertierung/DoFiles/bin/Debug/DoFiles.pdb
   trunk/tools/pgn Konvertierung/DoFiles/bin/Debug/DoFiles.vshost.exe
   trunk/tools/pgn Konvertierung/DoFiles/bin/Debug/DoFiles.xml
   trunk/tools/pgn Konvertierung/DoFiles/bin/Release/
   trunk/tools/pgn Konvertierung/DoFiles/obj/
   trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/
   trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.DoFiles.resources
   trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.Resources.resources
   trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.exe
   trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.pdb
   trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.vbproj.GenerateResource.Cache
   trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.xml
   trunk/tools/pgn Konvertierung/DoFiles/obj/DoFiles.vbproj.FileListAbsolute.txt
Log:
some bits, that belong to the project too.
Black backgrnd png's .. par example saxonia wms-server

Added: trunk/tools/pgn Konvertierung/DoFiles/DoFiles.Designer.vb
===================================================================
--- trunk/tools/pgn Konvertierung/DoFiles/DoFiles.Designer.vb	2010-03-09 08:38:30 UTC (rev 2512)
+++ trunk/tools/pgn Konvertierung/DoFiles/DoFiles.Designer.vb	2010-03-09 23:10:56 UTC (rev 2513)
@@ -0,0 +1,74 @@
+<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
+Partial Class DoFiles
+    Inherits System.Windows.Forms.Form
+
+    'Das Formular ?berschreibt den L?schvorgang, um die Komponentenliste zu bereinigen.
+    <System.Diagnostics.DebuggerNonUserCode()> _
+    Protected Overrides Sub Dispose(ByVal disposing As Boolean)
+        Try
+            If disposing AndAlso components IsNot Nothing Then
+                components.Dispose()
+            End If
+        Finally
+            MyBase.Dispose(disposing)
+        End Try
+    End Sub
+
+    'Wird vom Windows Form-Designer ben?tigt.
+    Private components As System.ComponentModel.IContainer
+
+    'Hinweis: Die folgende Prozedur ist f?r den Windows Form-Designer erforderlich.
+    'Das Bearbeiten ist mit dem Windows Form-Designer m?glich.  
+    'Das Bearbeiten mit dem Code-Editor ist nicht m?glich.
+    <System.Diagnostics.DebuggerStepThrough()> _
+    Private Sub InitializeComponent()
+        Me.FBDialog = New System.Windows.Forms.FolderBrowserDialog
+        Me.Abbruch = New System.Windows.Forms.Button
+        Me.OK = New System.Windows.Forms.Button
+        Me.OpenFileDialog1 = New System.Windows.Forms.OpenFileDialog
+        Me.SuspendLayout()
+        '
+        'Abbruch
+        '
+        Me.Abbruch.Anchor = CType((System.Windows.Forms.AnchorStyles.Bottom Or System.Windows.Forms.AnchorStyles.Right), System.Windows.Forms.AnchorStyles)
+        Me.Abbruch.DialogResult = System.Windows.Forms.DialogResult.Abort
+        Me.Abbruch.Location = New System.Drawing.Point(99, 57)
+        Me.Abbruch.Name = "Abbruch"
+        Me.Abbruch.Size = New System.Drawing.Size(75, 23)
+        Me.Abbruch.TabIndex = 0
+        Me.Abbruch.Text = "Ende"
+        Me.Abbruch.UseVisualStyleBackColor = True
+        '
+        'OK
+        '
+        Me.OK.Anchor = CType((System.Windows.Forms.AnchorStyles.Bottom Or System.Windows.Forms.AnchorStyles.Right), System.Windows.Forms.AnchorStyles)
+        Me.OK.DialogResult = System.Windows.Forms.DialogResult.OK
+        Me.OK.Location = New System.Drawing.Point(10, 17)
+        Me.OK.Name = "OK"
+        Me.OK.Size = New System.Drawing.Size(164, 23)
+        Me.OK.TabIndex = 1
+        Me.OK.Text = "Verz. ausw?hlen"
+        Me.OK.UseVisualStyleBackColor = True
+        '
+        'OpenFileDialog1
+        '
+        Me.OpenFileDialog1.FileName = "OpenFileDialog1"
+        '
+        'DoFiles
+        '
+        Me.AutoScaleDimensions = New System.Drawing.SizeF(6.0!, 13.0!)
+        Me.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font
+        Me.ClientSize = New System.Drawing.Size(186, 95)
+        Me.Controls.Add(Me.OK)
+        Me.Controls.Add(Me.Abbruch)
+        Me.Name = "DoFiles"
+        Me.Text = "png Konvertierung"
+        Me.ResumeLayout(False)
+
+    End Sub
+    Private WithEvents Abbruch As System.Windows.Forms.Button
+    Private WithEvents OK As System.Windows.Forms.Button
+    Private WithEvents FBDialog As System.Windows.Forms.FolderBrowserDialog
+    Friend WithEvents OpenFileDialog1 As System.Windows.Forms.OpenFileDialog
+
+End Class

Added: trunk/tools/pgn Konvertierung/DoFiles/DoFiles.resx
===================================================================
--- trunk/tools/pgn Konvertierung/DoFiles/DoFiles.resx	2010-03-09 08:38:30 UTC (rev 2512)
+++ trunk/tools/pgn Konvertierung/DoFiles/DoFiles.resx	2010-03-09 23:10:56 UTC (rev 2513)
@@ -0,0 +1,126 @@
+<?xml version="1.0" encoding="utf-8"?>
+<root>
+  <!-- 
+    Microsoft ResX Schema 
+    
+    Version 2.0
+    
+    The primary goals of this format is to allow a simple XML format 
+    that is mostly human readable. The generation and parsing of the 
+    various data types are done through the TypeConverter classes 
+    associated with the data types.
+    
+    Example:
+    
+    ... ado.net/XML headers & schema ...
+    <resheader name="resmimetype">text/microsoft-resx</resheader>
+    <resheader name="version">2.0</resheader>
+    <resheader name="reader">System.Resources.ResXResourceReader, System.Windows.Forms, ...</resheader>
+    <resheader name="writer">System.Resources.ResXResourceWriter, System.Windows.Forms, ...</resheader>
+    <data name="Name1"><value>this is my long string</value><comment>this is a comment</comment></data>
+    <data name="Color1" type="System.Drawing.Color, System.Drawing">Blue</data>
+    <data name="Bitmap1" mimetype="application/x-microsoft.net.object.binary.base64">
+        <value>[base64 mime encoded serialized .NET Framework object]</value>
+    </data>
+    <data name="Icon1" type="System.Drawing.Icon, System.Drawing" mimetype="application/x-microsoft.net.object.bytearray.base64">
+        <value>[base64 mime encoded string representing a byte array form of the .NET Framework object]</value>
+        <comment>This is a comment</comment>
+    </data>
+                
+    There are any number of "resheader" rows that contain simple 
+    name/value pairs.
+    
+    Each data row contains a name, and value. The row also contains a 
+    type or mimetype. Type corresponds to a .NET class that support 
+    text/value conversion through the TypeConverter architecture. 
+    Classes that don't support this are serialized and stored with the 
+    mimetype set.
+    
+    The mimetype is used for serialized objects, and tells the 
+    ResXResourceReader how to depersist the object. This is currently not 
+    extensible. For a given mimetype the value must be set accordingly:
+    
+    Note - application/x-microsoft.net.object.binary.base64 is the format 
+    that the ResXResourceWriter will generate, however the reader can 
+    read any of the formats listed below.
+    
+    mimetype: application/x-microsoft.net.object.binary.base64
+    value   : The object must be serialized with 
+            : System.Runtime.Serialization.Formatters.Binary.BinaryFormatter
+            : and then encoded with base64 encoding.
+    
+    mimetype: application/x-microsoft.net.object.soap.base64
+    value   : The object must be serialized with 
+            : System.Runtime.Serialization.Formatters.Soap.SoapFormatter
+            : and then encoded with base64 encoding.
+
+    mimetype: application/x-microsoft.net.object.bytearray.base64
+    value   : The object must be serialized into a byte array 
+            : using a System.ComponentModel.TypeConverter
+            : and then encoded with base64 encoding.
+    -->
+  <xsd:schema id="root" xmlns="" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
+    <xsd:import namespace="http://www.w3.org/XML/1998/namespace" />
+    <xsd:element name="root" msdata:IsDataSet="true">
+      <xsd:complexType>
+        <xsd:choice maxOccurs="unbounded">
+          <xsd:element name="metadata">
+            <xsd:complexType>
+              <xsd:sequence>
+                <xsd:element name="value" type="xsd:string" minOccurs="0" />
+              </xsd:sequence>
+              <xsd:attribute name="name" use="required" type="xsd:string" />
+              <xsd:attribute name="type" type="xsd:string" />
+              <xsd:attribute name="mimetype" type="xsd:string" />
+              <xsd:attribute ref="xml:space" />
+            </xsd:complexType>
+          </xsd:element>
+          <xsd:element name="assembly">
+            <xsd:complexType>
+              <xsd:attribute name="alias" type="xsd:string" />
+              <xsd:attribute name="name" type="xsd:string" />
+            </xsd:complexType>
+          </xsd:element>
+          <xsd:element name="data">
+            <xsd:complexType>
+              <xsd:sequence>
+                <xsd:element name="value" type="xsd:string" minOccurs="0" msdata:Ordinal="1" />
+                <xsd:element name="comment" type="xsd:string" minOccurs="0" msdata:Ordinal="2" />
+              </xsd:sequence>
+              <xsd:attribute name="name" type="xsd:string" use="required" msdata:Ordinal="1" />
+              <xsd:attribute name="type" type="xsd:string" msdata:Ordinal="3" />
+              <xsd:attribute name="mimetype" type="xsd:string" msdata:Ordinal="4" />
+              <xsd:attribute ref="xml:space" />
+            </xsd:complexType>
+          </xsd:element>
+          <xsd:element name="resheader">
+            <xsd:complexType>
+              <xsd:sequence>
+                <xsd:element name="value" type="xsd:string" minOccurs="0" msdata:Ordinal="1" />
+              </xsd:sequence>
+              <xsd:attribute name="name" type="xsd:string" use="required" />
+            </xsd:complexType>
+          </xsd:element>
+        </xsd:choice>
+      </xsd:complexType>
+    </xsd:element>
+  </xsd:schema>
+  <resheader name="resmimetype">
+    <value>text/microsoft-resx</value>
+  </resheader>
+  <resheader name="version">
+    <value>2.0</value>
+  </resheader>
+  <resheader name="reader">
+    <value>System.Resources.ResXResourceReader, System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</value>
+  </resheader>
+  <resheader name="writer">
+    <value>System.Resources.ResXResourceWriter, System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</value>
+  </resheader>
+  <metadata name="FBDialog.TrayLocation" type="System.Drawing.Point, System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a">
+    <value>17, 17</value>
+  </metadata>
+  <metadata name="OpenFileDialog1.TrayLocation" type="System.Drawing.Point, System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a">
+    <value>112, 17</value>
+  </metadata>
+</root>
\ No newline at end of file

Added: trunk/tools/pgn Konvertierung/DoFiles/DoFiles.vb
===================================================================
--- trunk/tools/pgn Konvertierung/DoFiles/DoFiles.vb	2010-03-09 08:38:30 UTC (rev 2512)
+++ trunk/tools/pgn Konvertierung/DoFiles/DoFiles.vb	2010-03-09 23:10:56 UTC (rev 2513)
@@ -0,0 +1,83 @@
+Imports System.Drawing.Imaging
+Imports System.Runtime.InteropServices
+Public Class DoFiles
+    Private Sub OpenSave(ByVal fn As String)
+        Dim img As Bitmap = Bitmap.FromFile(fn)
+        Dim rect As Rectangle = New Rectangle(0, 0, img.Width, img.Height)
+        Dim bmpData As BitmapData = img.LockBits(rect, ImageLockMode.ReadWrite, img.PixelFormat)
+
+        'Get the address of the first line of the bitmap.
+        Dim ptr As IntPtr = bmpData.Scan0
+
+        ' Declare an array to hold the bytes of the bitmap.
+        Dim numBytes As Integer = bmpData.Stride * img.Height
+        Dim rgbValues(numBytes) As Byte
+
+        ' Copy the RGB values into the array.
+        Marshal.Copy(ptr, rgbValues, 0, numBytes)
+
+        ' Manipulate the bitmap
+        For counter As Integer = 0 To rgbValues.Length - 3 Step 4
+            If ((rgbValues(counter) = 0) And _
+               (rgbValues(counter + 1) = 0) And _
+               (rgbValues(counter + 2) = 0) And _
+               (rgbValues(counter + 3) = 0)) Then
+                rgbValues(counter) = 255
+                rgbValues(counter + 1) = 255
+                rgbValues(counter + 2) = 255
+                rgbValues(counter + 3) = 255
+            End If
+        Next counter
+
+        ' Copy the RGB values back to the bitmap
+        Marshal.Copy(rgbValues, 0, ptr, numBytes)
+        ' Unlock the bits.
+        img.UnlockBits(bmpData)
+
+        Dim ImageEncoder As ImageCodecInfo = Nothing
+        Dim Encoders() As ImageCodecInfo = ImageCodecInfo.GetImageEncoders()
+        For i As Integer = 0 To Encoders.Length - 1
+            If Encoders(i).FilenameExtension.ToLower.EndsWith("png") Then
+                ImageEncoder = Encoders(i)
+                Exit For
+            End If
+        Next
+
+        Dim EncoderParams As EncoderParameters = New EncoderParameters(1)
+        'Dim Pars As New Encoder(ImageEncoder.Clsid)
+        EncoderParams.Param(0) = New EncoderParameter(Encoder.ColorDepth, ColorDepth.Depth8Bit)
+        'IO.File.Delete(fn)
+
+        'img.Save("c:\test.png", ImageEncoder, EncoderParams)
+        img.Save(IO.Path.ChangeExtension(fn, ".gif"), ImageFormat.Gif)
+
+    End Sub
+
+    Private Function HandleFiles(ByVal path As String) As Boolean
+        Dim d As New System.IO.DirectoryInfo(path)
+        Dim fs As System.IO.FileInfo()
+        fs = d.GetFiles()
+        For Each f As System.IO.FileInfo In fs
+            Dim fn As String = f.FullName
+            Dim fe As String = IO.Path.GetExtension(fn).ToLower
+            If fe.ToLower = ".png" Then
+                OpenSave(fn)
+            End If
+        Next
+        'For Each g As System.IO.DirectoryInfo In d.GetDirectories
+        '    HandleFiles(g.FullName)
+        'Next
+    End Function
+
+    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles OK.Click
+        Me.FBDialog.RootFolder = Environment.SpecialFolder.MyComputer
+        Me.FBDialog.SelectedPath = "C:"
+        If Me.FBDialog.ShowDialog = Windows.Forms.DialogResult.OK Then
+            HandleFiles(FBDialog.SelectedPath)
+        End If
+    End Sub
+
+    Private Sub Abbruch_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Abbruch.Click
+        Me.Close()
+    End Sub
+End Class

Added: trunk/tools/pgn Konvertierung/DoFiles/DoFiles.vbproj
===================================================================
--- trunk/tools/pgn Konvertierung/DoFiles/DoFiles.vbproj	2010-03-09 08:38:30 UTC (rev 2512)
+++ trunk/tools/pgn Konvertierung/DoFiles/DoFiles.vbproj	2010-03-09 23:10:56 UTC (rev 2513)
@@ -0,0 +1,106 @@
+?<?xml version="1.0" encoding="utf-8"?>
+<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
+  <PropertyGroup>
+    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
+    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
+    <ProductVersion>8.0.50727</ProductVersion>
+    <SchemaVersion>2.0</SchemaVersion>
+    <ProjectGuid>{59EFF075-C78C-45D6-9F3F-863F157C8AD0}</ProjectGuid>
+    <OutputType>WinExe</OutputType>
+    <StartupObject>DoFiles.My.MyApplication</StartupObject>
+    <RootNamespace>DoFiles</RootNamespace>
+    <AssemblyName>DoFiles</AssemblyName>
+    <MyType>WindowsForms</MyType>
+  </PropertyGroup>
+  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
+    <DebugSymbols>true</DebugSymbols>
+    <DebugType>full</DebugType>
+    <DefineDebug>true</DefineDebug>
+    <DefineTrace>true</DefineTrace>
+    <OutputPath>bin\Debug\</OutputPath>
+    <DocumentationFile>DoFiles.xml</DocumentationFile>
+    <NoWarn>42016,41999,42017,42018,42019,42032,42036,42020,42021,42022</NoWarn>
+  </PropertyGroup>
+  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
+    <DebugType>pdbonly</DebugType>
+    <DefineDebug>false</DefineDebug>
+    <DefineTrace>true</DefineTrace>
+    <Optimize>true</Optimize>
+    <OutputPath>bin\Release\</OutputPath>
+    <DocumentationFile>DoFiles.xml</DocumentationFile>
+    <NoWarn>42016,41999,42017,42018,42019,42032,42036,42020,42021,42022</NoWarn>
+  </PropertyGroup>
+  <ItemGroup>
+    <Reference Include="System" />
+    <Reference Include="System.Data" />
+    <Reference Include="System.Deployment" />
+    <Reference Include="System.Drawing" />
+    <Reference Include="System.Windows.Forms" />
+    <Reference Include="System.Xml" />
+  </ItemGroup>
+  <ItemGroup>
+    <Import Include="Microsoft.VisualBasic" />
+    <Import Include="System" />
+    <Import Include="System.Collections" />
+    <Import Include="System.Collections.Generic" />
+    <Import Include="System.Data" />
+    <Import Include="System.Drawing" />
+    <Import Include="System.Diagnostics" />
+    <Import Include="System.Windows.Forms" />
+  </ItemGroup>
+  <ItemGroup>
+    <Compile Include="DoFiles.vb">
+      <SubType>Form</SubType>
+    </Compile>
+    <Compile Include="DoFiles.Designer.vb">
+      <DependentUpon>DoFiles.vb</DependentUpon>
+      <SubType>Form</SubType>
+    </Compile>
+    <Compile Include="My Project\AssemblyInfo.vb" />
+    <Compile Include="My Project\Application.Designer.vb">
+      <AutoGen>True</AutoGen>
+      <DependentUpon>Application.myapp</DependentUpon>
+    </Compile>
+    <Compile Include="My Project\Resources.Designer.vb">
+      <AutoGen>True</AutoGen>
+      <DesignTime>True</DesignTime>
+      <DependentUpon>Resources.resx</DependentUpon>
+    </Compile>
+    <Compile Include="My Project\Settings.Designer.vb">
+      <AutoGen>True</AutoGen>
+      <DependentUpon>Settings.settings</DependentUpon>
+      <DesignTimeSharedInput>True</DesignTimeSharedInput>
+    </Compile>
+  </ItemGroup>
+  <ItemGroup>
+    <EmbeddedResource Include="DoFiles.resx">
+      <SubType>Designer</SubType>
+      <DependentUpon>DoFiles.vb</DependentUpon>
+    </EmbeddedResource>
+    <EmbeddedResource Include="My Project\Resources.resx">
+      <Generator>VbMyResourcesResXFileCodeGenerator</Generator>
+      <LastGenOutput>Resources.Designer.vb</LastGenOutput>
+      <CustomToolNamespace>My.Resources</CustomToolNamespace>
+      <SubType>Designer</SubType>
+    </EmbeddedResource>
+  </ItemGroup>
+  <ItemGroup>
+    <None Include="My Project\Application.myapp">
+      <Generator>MyApplicationCodeGenerator</Generator>
+      <LastGenOutput>Application.Designer.vb</LastGenOutput>
+    </None>
+    <None Include="My Project\Settings.settings">
+      <Generator>SettingsSingleFileGenerator</Generator>
+      <CustomToolNamespace>My</CustomToolNamespace>
+      <LastGenOutput>Settings.Designer.vb</LastGenOutput>
+    </None>
+  </ItemGroup>
+  <Import Project="$(MSBuildBinPath)\Microsoft.VisualBasic.targets" />
+  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
+       Other similar extension points exist, see Microsoft.Common.targets.
+  <Target Name="BeforeBuild">
+  </Target>
+  <Target Name="AfterBuild">
+  </Target>
+  -->
+</Project>
\ No newline at end of file

Added: trunk/tools/pgn Konvertierung/DoFiles/DoFiles.vbproj.user
===================================================================
--- trunk/tools/pgn Konvertierung/DoFiles/DoFiles.vbproj.user	2010-03-09 08:38:30 UTC (rev 2512)
+++ trunk/tools/pgn Konvertierung/DoFiles/DoFiles.vbproj.user	2010-03-09 23:10:56 UTC (rev 2513)
@@ -0,0 +1,5 @@
+?<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
+  <PropertyGroup>
+    <ProjectView>ShowAllFiles</ProjectView>
+  </PropertyGroup>
+</Project>
\ No newline at end of file

Added: trunk/tools/pgn Konvertierung/DoFiles/My Project/Application.Designer.vb
===================================================================
--- trunk/tools/pgn Konvertierung/DoFiles/My Project/Application.Designer.vb	2010-03-09 08:38:30 UTC (rev 2512)
+++ trunk/tools/pgn Konvertierung/DoFiles/My Project/Application.Designer.vb	2010-03-09 23:10:56 UTC (rev 2513)
@@ -0,0 +1,38 @@
+?'------------------------------------------------------------------------------
+' <auto-generated>
+'     This code was generated by a tool.
+'     Runtime Version:2.0.50727.832
+'
+'     Changes to this file may cause incorrect behavior and will be lost if
+'     the code is regenerated.
+' </auto-generated>
+'------------------------------------------------------------------------------
+
+Option Strict On
+Option Explicit On
+
+
+Namespace My
+    
+    'NOTE: This file is auto-generated; do not modify it directly.  To make changes,
+    ' or if you encounter build errors in this file, go to the Project Designer
+    ' (go to Project Properties or double-click the My Project node in
+    ' Solution Explorer), and make changes on the Application tab.
+    '
+    Partial Friend Class MyApplication
+        
+        <Global.System.Diagnostics.DebuggerStepThroughAttribute()>  _
+        Public Sub New()
+            MyBase.New(Global.Microsoft.VisualBasic.ApplicationServices.AuthenticationMode.Windows)
+            Me.IsSingleInstance = false
+            Me.EnableVisualStyles = true
+            Me.SaveMySettingsOnExit = true
+            Me.ShutDownStyle = Global.Microsoft.VisualBasic.ApplicationServices.ShutdownMode.AfterMainFormCloses
+        End Sub
+        
+        <Global.System.Diagnostics.DebuggerStepThroughAttribute()>  _
+        Protected Overrides Sub OnCreateMainForm()
+            Me.MainForm = Global.DoFiles.DoFiles
+        End Sub
+    End Class
+End Namespace

Added: trunk/tools/pgn Konvertierung/DoFiles/My Project/Application.myapp
===================================================================
--- trunk/tools/pgn Konvertierung/DoFiles/My Project/Application.myapp	2010-03-09 08:38:30 UTC (rev 2512)
+++ trunk/tools/pgn Konvertierung/DoFiles/My Project/Application.myapp	2010-03-09 23:10:56 UTC (rev 2513)
@@ -0,0 +1,10 @@
+?<?xml version="1.0" encoding="utf-16"?>
+<MyApplicationData xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
+  <MySubMain>true</MySubMain>
+  <MainForm>DoFiles</MainForm>
+  <SingleInstance>false</SingleInstance>
+  <ShutdownMode>0</ShutdownMode>
+  <EnableVisualStyles>true</EnableVisualStyles>
+  <AuthenticationMode>0</AuthenticationMode>
+  <SaveMySettingsOnExit>true</SaveMySettingsOnExit>
+</MyApplicationData>
\ No newline at end of file

Added: trunk/tools/pgn Konvertierung/DoFiles/My Project/AssemblyInfo.vb
===================================================================
--- trunk/tools/pgn Konvertierung/DoFiles/My Project/AssemblyInfo.vb	2010-03-09 08:38:30 UTC (rev 2512)
+++ trunk/tools/pgn Konvertierung/DoFiles/My Project/AssemblyInfo.vb	2010-03-09 23:10:56 UTC (rev 2513)
@@ -0,0 +1,35 @@
+?Imports System
+Imports System.Reflection
+Imports System.Runtime.InteropServices
+
+' Allgemeine Informationen ?ber eine Assembly werden ?ber die folgenden 
+' Attribute gesteuert. ?ndern Sie diese Attributwerte, um die Informationen zu ?ndern,
+' die mit einer Assembly verkn?pft sind.
+
+' Die Werte der Assemblyattribute ?berpr?fen
+
+<Assembly: AssemblyTitle("DoFiles")> 
+<Assembly: AssemblyDescription("")> 
+<Assembly: AssemblyCompany("CF Computer")> 
+<Assembly: AssemblyProduct("DoFiles")> 
+<Assembly: AssemblyCopyright("Copyright ? CF Computer 2008")> 
+<Assembly: AssemblyTrademark("")> 
+
+<Assembly: ComVisible(False)>
+
+'Die folgende GUID bestimmt die ID der Typbibliothek, wenn dieses Projekt f?r COM verf?gbar gemacht wird
+<Assembly: Guid("43694bec-34c6-420a-8081-b943f846f070")> 
+
+' Versionsinformationen f?r eine Assembly bestehen aus den folgenden vier Werten:
+'
+'      Hauptversion
+'      Nebenversion 
+'      Buildnummer
+'      Revision
+'
+' Sie k?nnen alle Werte angeben oder die standardm??igen Build- und Revisionsnummern 
+' ?bernehmen, indem Sie "*" eingeben:
+' <Assembly: AssemblyVersion("1.0.*")> 
+
+<Assembly: AssemblyVersion("1.0.0.0")> 
+<Assembly: AssemblyFileVersion("1.0.0.0")> 

Added: trunk/tools/pgn Konvertierung/DoFiles/My Project/Resources.Designer.vb
===================================================================
--- trunk/tools/pgn Konvertierung/DoFiles/My Project/Resources.Designer.vb	2010-03-09 08:38:30 UTC (rev 2512)
+++ trunk/tools/pgn Konvertierung/DoFiles/My Project/Resources.Designer.vb	2010-03-09 23:10:56 UTC (rev 2513)
@@ -0,0 +1,62 @@
+?'------------------------------------------------------------------------------
+' <auto-generated>
+'     This code was generated by a tool.
+'     Runtime Version:2.0.50727.832
+'
+'     Changes to this file may cause incorrect behavior and will be lost if
+'     the code is regenerated.
+' </auto-generated>
+'------------------------------------------------------------------------------
+
+Option Strict On
+Option Explicit On
+
+
+Namespace My.Resources
+    
+    'This class was auto-generated by the StronglyTypedResourceBuilder
+    'class via a tool like ResGen or Visual Studio.
+    'To add or remove a member, edit your .ResX file then rerun ResGen
+    'with the /str option, or rebuild your VS project.
+    '<summary>
+    '  A strongly-typed resource class, for looking up localized strings, etc.
+    '</summary>
+    <Global.System.CodeDom.Compiler.GeneratedCodeAttribute("System.Resources.Tools.StronglyTypedResourceBuilder", "2.0.0.0"),  _
+     Global.System.Diagnostics.DebuggerNonUserCodeAttribute(),  _
+     Global.System.Runtime.CompilerServices.CompilerGeneratedAttribute(),  _
+     Global.Microsoft.VisualBasic.HideModuleNameAttribute()>  _
+    Friend Module Resources
+        
+        Private resourceMan As Global.System.Resources.ResourceManager
+        
+        Private resourceCulture As Global.System.Globalization.CultureInfo
+        
+        '<summary>
+        '  Returns the cached ResourceManager instance used by this class.
+        '</summary>
+        <Global.System.ComponentModel.EditorBrowsableAttribute(Global.System.ComponentModel.EditorBrowsableState.Advanced)>  _
+        Friend ReadOnly Property ResourceManager() As Global.System.Resources.ResourceManager
+            Get
+                If Object.ReferenceEquals(resourceMan, Nothing) Then
+                    Dim temp As Global.System.Resources.ResourceManager = New Global.System.Resources.ResourceManager("DoFiles.Resources", GetType(Resources).Assembly)
+                    resourceMan = temp
+                End If
+                Return resourceMan
+            End Get
+        End Property
+        
+        '<summary>
+        '  Overrides the current thread's CurrentUICulture property for all
+        '  resource lookups using this strongly typed resource class.
+        '</summary>
+        <Global.System.ComponentModel.EditorBrowsableAttribute(Global.System.ComponentModel.EditorBrowsableState.Advanced)>  _
+        Friend Property Culture() As Global.System.Globalization.CultureInfo
+            Get
+                Return resourceCulture
+            End Get
+            Set(ByVal value As Global.System.Globalization.CultureInfo)
+                resourceCulture = value
+            End Set
+        End Property
+    End Module
+End Namespace

Added: trunk/tools/pgn Konvertierung/DoFiles/My Project/Resources.resx
===================================================================
--- trunk/tools/pgn Konvertierung/DoFiles/My Project/Resources.resx	2010-03-09 08:38:30 UTC (rev 2512)
+++ trunk/tools/pgn Konvertierung/DoFiles/My Project/Resources.resx	2010-03-09 23:10:56 UTC (rev 2513)
@@ -0,0 +1,117 @@
+?<?xml version="1.0" encoding="utf-8"?>
+<root>
+  <!-- 
+    Microsoft ResX Schema 
+    
+    Version 2.0
+    
+    The primary goals of this format is to allow a simple XML format 
+    that is mostly human readable. The generation and parsing of the 
+    various data types are done through the TypeConverter classes 
+    associated with the data types.
+    
+    Example:
+    
+    ... ado.net/XML headers & schema ...
+    <resheader name="resmimetype">text/microsoft-resx</resheader>
+    <resheader name="version">2.0</resheader>
+    <resheader name="reader">System.Resources.ResXResourceReader, System.Windows.Forms, ...</resheader>
+    <resheader name="writer">System.Resources.ResXResourceWriter, System.Windows.Forms, ...</resheader>
+    <data name="Name1"><value>this is my long string</value><comment>this is a comment</comment></data>
+    <data name="Color1" type="System.Drawing.Color, System.Drawing">Blue</data>
+    <data name="Bitmap1" mimetype="application/x-microsoft.net.object.binary.base64">
+        <value>[base64 mime encoded serialized .NET Framework object]</value>
+    </data>
+    <data name="Icon1" type="System.Drawing.Icon, System.Drawing" mimetype="application/x-microsoft.net.object.bytearray.base64">
+        <value>[base64 mime encoded string representing a byte array form of the .NET Framework object]</value>
+        <comment>This is a comment</comment>
+    </data>
+                
+    There are any number of "resheader" rows that contain simple 
+    name/value pairs.
+    
+    Each data row contains a name, and value. The row also contains a 
+    type or mimetype. Type corresponds to a .NET class that support 
+    text/value conversion through the TypeConverter architecture. 
+    Classes that don't support this are serialized and stored with the 
+    mimetype set.
+    
+    The mimetype is used for serialized objects, and tells the 
+    ResXResourceReader how to depersist the object. This is currently not 
+    extensible. For a given mimetype the value must be set accordingly:
+    
+    Note - application/x-microsoft.net.object.binary.base64 is the format 
+    that the ResXResourceWriter will generate, however the reader can 
+    read any of the formats listed below.
+    
+    mimetype: application/x-microsoft.net.object.binary.base64
+    value   : The object must be serialized with 
+            : System.Serialization.Formatters.Binary.BinaryFormatter
+            : and then encoded with base64 encoding.
+    
+    mimetype: application/x-microsoft.net.object.soap.base64
+    value   : The object must be serialized with 
+            : System.Runtime.Serialization.Formatters.Soap.SoapFormatter
+            : and then encoded with base64 encoding.
+
+    mimetype: application/x-microsoft.net.object.bytearray.base64
+    value   : The object must be serialized into a byte array 
+            : using a System.ComponentModel.TypeConverter
+            : and then encoded with base64 encoding.
+    -->
+  <xsd:schema id="root" xmlns="" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
+    <xsd:element name="root" msdata:IsDataSet="true">
+      <xsd:complexType>
+        <xsd:choice maxOccurs="unbounded">
+          <xsd:element name="metadata">
+            <xsd:complexType>
+              <xsd:sequence>
+                <xsd:element name="value" type="xsd:string" minOccurs="0" />
+              </xsd:sequence>
+              <xsd:attribute name="name" type="xsd:string" />
+              <xsd:attribute name="type" type="xsd:string" />
+              <xsd:attribute name="mimetype" type="xsd:string" />
+            </xsd:complexType>
+          </xsd:element>
+          <xsd:element name="assembly">
+            <xsd:complexType>
+              <xsd:attribute name="alias" type="xsd:string" />
+              <xsd:attribute name="name" type="xsd:string" />
+            </xsd:complexType>
+          </xsd:element>
+          <xsd:element name="data">
+            <xsd:complexType>
+              <xsd:sequence>
+                <xsd:element name="value" type="xsd:string" minOccurs="0" msdata:Ordinal="1" />
+                <xsd:element name="comment" type="xsd:string" minOccurs="0" msdata:Ordinal="2" />
+              </xsd:sequence>
+              <xsd:attribute name="name" type="xsd:string" msdata:Ordinal="1" />
+              <xsd:attribute name="type" type="xsd:string" msdata:Ordinal="3" />
+              <xsd:attribute name="mimetype" type="xsd:string" msdata:Ordinal="4" />
+            </xsd:complexType>
+          </xsd:element>
+          <xsd:element name="resheader">
+            <xsd:complexType>
+              <xsd:sequence>
+                <xsd:element name="value" type="xsd:string" minOccurs="0" msdata:Ordinal="1" />
+              </xsd:sequence>
+              <xsd:attribute name="name" type="xsd:string" use="required" />
+            </xsd:complexType>
+          </xsd:element>
+        </xsd:choice>
+      </xsd:complexType>
+    </xsd:element>
+  </xsd:schema>
+  <resheader name="resmimetype">
+    <value>text/microsoft-resx</value>
+  </resheader>
+  <resheader name="version">
+    <value>2.0</value>
+  </resheader>
+  <resheader name="reader">
+    <value>System.Resources.ResXResourceReader, System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</value>
+  </resheader>
+  <resheader name="writer">
+    <value>System.Resources.ResXResourceWriter, System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</value>
+  </resheader>
+</root>
\ No newline at end of file

Added: trunk/tools/pgn Konvertierung/DoFiles/My Project/Settings.Designer.vb
===================================================================
--- trunk/tools/pgn Konvertierung/DoFiles/My Project/Settings.Designer.vb	2010-03-09 08:38:30 UTC (rev 2512)
+++ trunk/tools/pgn Konvertierung/DoFiles/My Project/Settings.Designer.vb	2010-03-09 23:10:56 UTC (rev 2513)
@@ -0,0 +1,73 @@
+?'------------------------------------------------------------------------------
+' <auto-generated>
+'     This code was generated by a tool.
+'     Runtime Version:2.0.50727.832
+'
+'     Changes to this file may cause incorrect behavior and will be lost if
+'     the code is regenerated.
+' </auto-generated>
+'------------------------------------------------------------------------------
+
+Option Strict On
+Option Explicit On
+
+
+Namespace My
+
+    <Global.System.Runtime.CompilerServices.CompilerGeneratedAttribute(),  _
+     Global.System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.Editors.SettingsDesigner.SettingsSingleFileGenerator", "8.0.0.0"),  _
+     Global.System.ComponentModel.EditorBrowsableAttribute(Global.System.ComponentModel.EditorBrowsableState.Advanced)>  _
+    Partial Friend NotInheritable Class MySettings
+        Inherits Global.System.Configuration.ApplicationSettingsBase
+        
+        Private Shared defaultInstance As MySettings = CType(Global.System.Configuration.ApplicationSettingsBase.Synchronized(New MySettings), MySettings)
+        
+#Region "My.Settings Auto-Save Functionality"
+#If _MyType = "WindowsForms" Then
+        Private Shared addedHandler As Boolean
+
+        Private Shared addedHandlerLockObject As New Object
+
+        <Global.System.Diagnostics.DebuggerNonUserCodeAttribute(), Global.System.ComponentModel.EditorBrowsableAttribute(Global.System.ComponentModel.EditorBrowsableState.Advanced)> _
+        Private Shared Sub AutoSaveSettings(ByVal sender As Global.System.Object, ByVal e As Global.System.EventArgs)
+            If My.Application.SaveMySettingsOnExit Then
+                My.Settings.Save()
+            End If
+        End Sub
+#End If
+#End Region
+        
+        Public Shared ReadOnly Property [Default]() As MySettings
+            Get
+                
+#If _MyType = "WindowsForms" Then
+                   If Not addedHandler Then
+                        SyncLock addedHandlerLockObject
+                            If Not addedHandler Then
+                                AddHandler My.Application.Shutdown, AddressOf AutoSaveSettings
+                                addedHandler = True
+                            End If
+                        End SyncLock
+                    End If
+#End If
+                Return defaultInstance
+            End Get
+        End Property
+    End Class
+End Namespace
+
+Namespace My
+    
+    <Global.Microsoft.VisualBasic.HideModuleNameAttribute(),  _
+     Global.System.Diagnostics.DebuggerNonUserCodeAttribute(),  _
+     Global.System.Runtime.CompilerServices.CompilerGeneratedAttribute()>  _
+    Friend Module MySettingsProperty
+        
+        <Global.System.ComponentModel.Design.HelpKeywordAttribute("My.Settings")>  _
+        Friend ReadOnly Property Settings() As Global.DoFiles.My.MySettings
+            Get
+                Return Global.DoFiles.My.MySettings.Default
+            End Get
+        End Property
+    End Module
+End Namespace

Added: trunk/tools/pgn Konvertierung/DoFiles/My Project/Settings.settings
===================================================================
--- trunk/tools/pgn Konvertierung/DoFiles/My Project/Settings.settings	2010-03-09 08:38:30 UTC (rev 2512)
+++ trunk/tools/pgn Konvertierung/DoFiles/My Project/Settings.settings	2010-03-09 23:10:56 UTC (rev 2513)
@@ -0,0 +1,7 @@
+?<?xml version='1.0' encoding='utf-8'?>
+<SettingsFile xmlns="http://schemas.microsoft.com/VisualStudio/2004/01/settings" CurrentProfile="(Default)" UseMySettingsClassName="true">
+  <Profiles>
+    <Profile Name="(Default)" />
+  </Profiles>
+  <Settings />
+</SettingsFile>

Added: trunk/tools/pgn Konvertierung/DoFiles/bin/Debug/DoFiles.exe
===================================================================
(Binary files differ)


Property changes on: trunk/tools/pgn Konvertierung/DoFiles/bin/Debug/DoFiles.exe
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/pgn Konvertierung/DoFiles/bin/Debug/DoFiles.pdb
===================================================================
(Binary files differ)


Property changes on: trunk/tools/pgn Konvertierung/DoFiles/bin/Debug/DoFiles.pdb
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/pgn Konvertierung/DoFiles/bin/Debug/DoFiles.vshost.exe
===================================================================
(Binary files differ)


Property changes on: trunk/tools/pgn Konvertierung/DoFiles/bin/Debug/DoFiles.vshost.exe
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/pgn Konvertierung/DoFiles/bin/Debug/DoFiles.xml
===================================================================
--- trunk/tools/pgn Konvertierung/DoFiles/bin/Debug/DoFiles.xml	2010-03-09 08:38:30 UTC (rev 2512)
+++ trunk/tools/pgn Konvertierung/DoFiles/bin/Debug/DoFiles.xml	2010-03-09 23:10:56 UTC (rev 2513)
@@ -0,0 +1,11 @@
+?<?xml version="1.0"?>
+<doc>
+<assembly>
+<name>
+DoFiles
+</name>
+</assembly>
+<members>
+
+</members>
+</doc>
\ No newline at end of file

Added: trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.DoFiles.resources
===================================================================
(Binary files differ)


Property changes on: trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.DoFiles.resources
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.Resources.resources
===================================================================
(Binary files differ)


Property changes on: trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.Resources.resources
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.exe
===================================================================
(Binary files differ)


Property changes on: trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.exe
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.pdb
===================================================================
(Binary files differ)


Property changes on: trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.pdb
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.vbproj.GenerateResource.Cache
===================================================================
(Binary files differ)


Property changes on: trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.vbproj.GenerateResource.Cache
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.xml
===================================================================
--- trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.xml	2010-03-09 08:38:30 UTC (rev 2512)
+++ trunk/tools/pgn Konvertierung/DoFiles/obj/Debug/DoFiles.xml	2010-03-09 23:10:56 UTC (rev 2513)
@@ -0,0 +1,11 @@
+?<?xml version="1.0"?>
+<doc>
+<assembly>
+<name>
+DoFiles
+</name>
+</assembly>
+<members>
+
+</members>
+</doc>
\ No newline at end of file

Added: trunk/tools/pgn Konvertierung/DoFiles/obj/DoFiles.vbproj.FileListAbsolute.txt
===================================================================
--- trunk/tools/pgn Konvertierung/DoFiles/obj/DoFiles.vbproj.FileListAbsolute.txt	2010-03-09 08:38:30 UTC (rev 2512)
+++ trunk/tools/pgn Konvertierung/DoFiles/obj/DoFiles.vbproj.FileListAbsolute.txt	2010-03-09 23:10:56 UTC (rev 2513)
@@ -0,0 +1,10 @@
+C:\Dateien_Entwicklung\pgn Konvertierung\DoFiles\bin\Debug\DoFiles.exe
+C:\Dateien_Entwicklung\pgn Konvertierung\DoFiles\bin\Debug\DoFiles.pdb
+C:\Dateien_Entwicklung\pgn Konvertierung\DoFiles\bin\Debug\DoFiles.xml
+C:\Dateien_Entwicklung\pgn Konvertierung\DoFiles\obj\Debug\ResolveAssemblyReference.cache
+C:\Dateien_Entwicklung\pgn Konvertierung\DoFiles\obj\Debug\DoFiles.DoFiles.resources
+C:\Dateien_Entwicklung\pgn Konvertierung\DoFiles\obj\Debug\DoFiles.Resources.resources
+C:\Dateien_Entwicklung\pgn Konvertierung\DoFiles\obj\Debug\DoFiles.vbproj.GenerateResource.Cache
+C:\Dateien_Entwicklung\pgn Konvertierung\DoFiles\obj\Debug\DoFiles.exe
+C:\Dateien_Entwicklung\pgn Konvertierung\DoFiles\obj\Debug\DoFiles.xml
+C:\Dateien_Entwicklung\pgn Konvertierung\DoFiles\obj\Debug\DoFiles.pdb

Added: trunk/tools/pgn Konvertierung/DoFiles.sln
===================================================================
--- trunk/tools/pgn Konvertierung/DoFiles.sln	2010-03-09 08:38:30 UTC (rev 2512)
+++ trunk/tools/pgn Konvertierung/DoFiles.sln	2010-03-09 23:10:56 UTC (rev 2513)
@@ -0,0 +1,20 @@
+?
+Microsoft Visual Studio Solution File, Format Version 9.00
+# Visual Studio 2005
+Project("{F184B08F-C81C-45F6-A57F-5ABD9991F28F}") = "DoFiles", "DoFiles\DoFiles.vbproj", "{59EFF075-C78C-45D6-9F3F-863F157C8AD0}"
+EndProject
+Global
+	GlobalSection(SolutionConfigurationPlatforms) = preSolution
+		Debug|Any CPU = Debug|Any CPU
+		Release|Any CPU = Release|Any CPU
+	EndGlobalSection
+	GlobalSection(ProjectConfigurationPlatforms) = postSolution
+		{59EFF075-C78C-45D6-9F3F-863F157C8AD0}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
+		{59EFF075-C78C-45D6-9F3F-863F157C8AD0}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{59EFF075-C78C-45D6-9F3F-863F157C8AD0}.Release|Any CPU.ActiveCfg = Release|Any CPU
+		{59EFF075-C78C-45D6-9F3F-863F157C8AD0}.Release|Any CPU.Build.0 = Release|Any CPU
+	EndGlobalSection
+	GlobalSection(SolutionProperties) = preSolution
+		HideSolutionNode = FALSE
+	EndGlobalSection
+EndGlobal

Added: trunk/tools/pgn Konvertierung/DoFiles.suo
===================================================================
(Binary files differ)


Property changes on: trunk/tools/pgn Konvertierung/DoFiles.suo
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From araber95 at mail.berlios.de  Wed Mar 10 00:13:01 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 10 Mar 2010 00:13:01 +0100
Subject: [Cachewolf-svn] r2514 - trunk/src/CacheWolf
Message-ID: <201003092313.o29ND11x019236@sheep.berlios.de>

Author: araber95
Date: 2010-03-10 00:13:00 +0100 (Wed, 10 Mar 2010)
New Revision: 2514

Modified:
   trunk/src/CacheWolf/StatusBar.java
Log:
Surely something overshot the mark

Modified: trunk/src/CacheWolf/StatusBar.java
===================================================================
--- trunk/src/CacheWolf/StatusBar.java	2010-03-09 23:10:56 UTC (rev 2513)
+++ trunk/src/CacheWolf/StatusBar.java	2010-03-09 23:13:00 UTC (rev 2514)
@@ -82,8 +82,8 @@
 		// Current centre can only be displayed if screen is big
 		// Otherwise it forces a scrollbar
 		// This can happen even on bigger screens with big fonts
-		// >=320 --> >=640 Das ist mir zu bl?d, dann sieht man eben keine Zentrumskoordinaten
-		if ((MyLocale.getScreenWidth()>=640) && !(MobileVGA && (pref.fontSize > 20)))
+		// >=320 --> >=480 Das ist mir zu bl?d, dann sieht man eben keine Zentrumskoordinaten
+		if ((MyLocale.getScreenWidth()>=480) && !(MobileVGA && (pref.fontSize > 20)))
 			strCenter="  \u00a4 " + pref.getCurCentrePt().toString();
 		if (Global.getPref().sortAutomatic) {
 			this.btnNoSorting.backGround=new Color(0,255,255);



From araber95 at mail.berlios.de  Wed Mar 10 00:42:08 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 10 Mar 2010 00:42:08 +0100
Subject: [Cachewolf-svn] r2515 - trunk/res_noewe/webmapservices
Message-ID: <201003092342.o29Ng8Z6025184@sheep.berlios.de>

Author: araber95
Date: 2010-03-10 00:42:05 +0100 (Wed, 10 Mar 2010)
New Revision: 2515

Modified:
   trunk/res_noewe/webmapservices/it-88_m.wms
   trunk/res_noewe/webmapservices/it-88_p.wms
   trunk/res_noewe/webmapservices/it-88_t10.wms
Log:
sardegna wms : changed from EPSG 3003 to 4326 , that works. layer adapted to ortofoto_it_2006

Modified: trunk/res_noewe/webmapservices/it-88_m.wms
===================================================================
--- trunk/res_noewe/webmapservices/it-88_m.wms	2010-03-09 23:13:00 UTC (rev 2514)
+++ trunk/res_noewe/webmapservices/it-88_m.wms	2010-03-09 23:42:05 UTC (rev 2515)
@@ -5,20 +5,10 @@
 MainUrl:   http://webgis.regione.sardegna.it/wmsconnector/com.esri.wms.Esrimap/ras_wms?
 ServiceTypeUrlPart:   SERVICE=WMS
 VersionUrlPart:   VERSION=1.1.1
-CoordinateReferenceSystemCacheWolf:   3003
-CoordinateReferenceSystemUrlPart:   SRS=EPSG:3003
+CoordinateReferenceSystemCacheWolf:   4326
+CoordinateReferenceSystemUrlPart:   SRS=EPSG:4326
 RequestUrlPart:   REQUEST=GetMap
-# Topographisch schwarz/weiss
-#LayersUrlPart:   LAYERS=CTR10K%20raster
-# Luftbild farbig
-#LayersUrlPart:   LAYERS=mosaico_2006IT_1,mosaico_2006IT_2,mosaico_2006IT_3,mosaico_2006IT_4,mosaico_2006IT_5,mosaico_2006IT_6,mosaico_2006IT_7,mosaico_2006IT_8,mosaico_2006IT_9,CTR10K%20raster
-# Luftbild schwarz/weiss
-#LayersUrlPart:   LAYERS=sardegna_2003gb_1,sardegna_2003gb_2,sardegna_2003gb_3,sardegna_2003gb_4,sardegna_2003gb_5,sardegna_2003gb_6,sardegna_2003gb_7,sardegna_2003gb_8,sardegna_2003gb_9,CTR10K%20raster
-# farbiges Luftbild mit Raterdaten ?berlagert 
-#LayersUrlPart:   LAYERS=mosaico_2006IT_1,CTR10K%20raster
-# farbiges Luftbild anscheinend nur die layer entsprchend der Skalierung angeben ( es tun nur die Skalierungen 1 bis 4)
-#LayersUrlPart:   LAYERS=mosaico_2006IT_1
-LayersUrlPart:   LAYERS=mosaico_2006IT_1,CTR10K%20raster
+LayersUrlPart:   LAYERS=ortofoto_it_2006,CTR10K%20raster
 StylesUrlPart:   STYLES=
 ImageFormatUrlPart:   FORMAT=image/png
 BoundingBoxTopLeftWGS84:   N 41.400307 E 7.964019

Modified: trunk/res_noewe/webmapservices/it-88_p.wms
===================================================================
--- trunk/res_noewe/webmapservices/it-88_p.wms	2010-03-09 23:13:00 UTC (rev 2514)
+++ trunk/res_noewe/webmapservices/it-88_p.wms	2010-03-09 23:42:05 UTC (rev 2515)
@@ -5,20 +5,10 @@
 MainUrl:   http://webgis.regione.sardegna.it/wmsconnector/com.esri.wms.Esrimap/ras_wms?
 ServiceTypeUrlPart:   SERVICE=WMS
 VersionUrlPart:   VERSION=1.1.1
-CoordinateReferenceSystemCacheWolf:   3003
-CoordinateReferenceSystemUrlPart:   SRS=EPSG:3003
+CoordinateReferenceSystemCacheWolf:  4326
+CoordinateReferenceSystemUrlPart: SRS=EPSG:4326
 RequestUrlPart:   REQUEST=GetMap
-# Topographisch schwarz/weiss
-#LayersUrlPart:   LAYERS=CTR10K%20raster
-# Luftbild farbig
-#LayersUrlPart:   LAYERS=mosaico_2006IT_1,mosaico_2006IT_2,mosaico_2006IT_3,mosaico_2006IT_4,mosaico_2006IT_5,mosaico_2006IT_6,mosaico_2006IT_7,mosaico_2006IT_8,mosaico_2006IT_9,CTR10K%20raster
-# Luftbild schwarz/weiss
-#LayersUrlPart:   LAYERS=sardegna_2003gb_1,sardegna_2003gb_2,sardegna_2003gb_3,sardegna_2003gb_4,sardegna_2003gb_5,sardegna_2003gb_6,sardegna_2003gb_7,sardegna_2003gb_8,sardegna_2003gb_9,CTR10K%20raster
-# farbiges Luftbild mit Raterdaten ?berlagert 
-#LayersUrlPart:   LAYERS=mosaico_2006IT_1,CTR10K%20raster
-# farbiges Luftbild anscheinend nur die layer entsprchend der Skalierung angeben ( es tun nur die Skalierungen 1 bis 4)
-#LayersUrlPart:   LAYERS=mosaico_2006IT_1
-LayersUrlPart:   LAYERS=mosaico_2006IT_4
+LayersUrlPart:   LAYERS=ortofoto_it_2006
 StylesUrlPart:   STYLES=
 ImageFormatUrlPart:   FORMAT=image/png
 BoundingBoxTopLeftWGS84:   N 41.400307 E 7.964019

Modified: trunk/res_noewe/webmapservices/it-88_t10.wms
===================================================================
--- trunk/res_noewe/webmapservices/it-88_t10.wms	2010-03-09 23:13:00 UTC (rev 2514)
+++ trunk/res_noewe/webmapservices/it-88_t10.wms	2010-03-09 23:42:05 UTC (rev 2515)
@@ -5,8 +5,8 @@
 MainUrl:   http://webgis.regione.sardegna.it/wmsconnector/com.esri.wms.Esrimap/ras_wms?
 ServiceTypeUrlPart:   SERVICE=WMS
 VersionUrlPart:   VERSION=1.1.1
-CoordinateReferenceSystemCacheWolf:   3003
-CoordinateReferenceSystemUrlPart:   SRS=EPSG:3003
+CoordinateReferenceSystemCacheWolf:  4326
+CoordinateReferenceSystemUrlPart: SRS=EPSG:4326
 RequestUrlPart:   REQUEST=GetMap
 # Topographisch schwarz/weiss
 #LayersUrlPart:   LAYERS=CTR10K%20raster
@@ -14,7 +14,7 @@
 #LayersUrlPart:   LAYERS=mosaico_2006IT_1,mosaico_2006IT_2,mosaico_2006IT_3,mosaico_2006IT_4,mosaico_2006IT_5,mosaico_2006IT_6,mosaico_2006IT_7,mosaico_2006IT_8,mosaico_2006IT_9,CTR10K%20raster
 # Luftbild schwarz/weiss
 #LayersUrlPart:   LAYERS=sardegna_2003gb_1,sardegna_2003gb_2,sardegna_2003gb_3,sardegna_2003gb_4,sardegna_2003gb_5,sardegna_2003gb_6,sardegna_2003gb_7,sardegna_2003gb_8,sardegna_2003gb_9,CTR10K%20raster
-# farbiges Luftbild mit Raterdaten ?berlagert 
+# farbiges Luftbild mit Raterdaten ?berlagert
 #LayersUrlPart:   LAYERS=mosaico_2006IT_1,CTR10K%20raster
 # farbiges Luftbild anscheinend nur die layer entsprchend der Skalierung angeben ( es tun nur die Skalierungen 1 bis 4)
 #LayersUrlPart:   LAYERS=mosaico_2006IT_1



From araber95 at mail.berlios.de  Wed Mar 10 22:16:48 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 10 Mar 2010 22:16:48 +0100
Subject: [Cachewolf-svn] r2516 - in trunk/src/CacheWolf: . navi
Message-ID: <201003102116.o2ALGmnf020182@sheep.berlios.de>

Author: araber95
Date: 2010-03-10 22:16:45 +0100 (Wed, 10 Mar 2010)
New Revision: 2516

Modified:
   trunk/src/CacheWolf/MainTab.java
   trunk/src/CacheWolf/navi/MovingMap.java
Log:
1. map cache context with switch to detail
2. removing context from SkyOrientation
3. unwanted dragging of map after contextmenu on PDA eliminated

Modified: trunk/src/CacheWolf/MainTab.java
===================================================================
--- trunk/src/CacheWolf/MainTab.java	2010-03-09 23:42:05 UTC (rev 2515)
+++ trunk/src/CacheWolf/MainTab.java	2010-03-10 21:16:45 UTC (rev 2516)
@@ -256,18 +256,26 @@
 			break;
 		}
 	}
-
-	public void openDescriptionPanel(CacheHolder chi) {
+	/**
+	 * this is called from MovingMap Cache context menu
+	 * @param chi , the CacheHolder for the Cache to switch to
+	 * @param panelNo 1=DetailsPanel 2=Description Panel
+	 */
+	public void openPanel(CacheHolder chi, int panelNo) {
 		MyLocale.setSIPOff();
 		// To change cache we need to be in panel 0
 		onLeavingPanel(oldCard);
 		onEnteringPanel(0); oldCard=0;
 		int row = profile.getCacheIndex(chi.getWayPoint());
 		tbP.selectRow(row);
-		//tbP.tc.scrollToVisible(row, 0);
-		//tbP.selectRow(row);
-		select(descP);
-		//descP.setText(chi);
+		switch (panelNo) {// Switch by panel number
+		case 1:  // DetailsPanel
+			select(detP);
+			break;
+		case 2: // Description Panel
+			select(descP);
+			break;
+		}		
 	}
 
 

Modified: trunk/src/CacheWolf/navi/MovingMap.java
===================================================================
--- trunk/src/CacheWolf/navi/MovingMap.java	2010-03-09 23:42:05 UTC (rev 2515)
+++ trunk/src/CacheWolf/navi/MovingMap.java	2010-03-10 21:16:45 UTC (rev 2516)
@@ -2069,7 +2069,7 @@
 	Menu kontextMenu;
 	MenuItem gotoMenuItem = new MenuItem(MyLocale.getMsg(4230, "Goto here$g"), 0, null);
 	MenuItem newWayPointMenuItem = new MenuItem(MyLocale.getMsg(4232, "Create new Waypoint here$n"), 0, null);;
-	MenuItem openCacheDescMenuItem,addCachetoListMenuItem,gotoCacheMenuItem;
+	MenuItem openCacheDescMenuItem,openCacheDetailMenuItem,addCachetoListMenuItem,gotoCacheMenuItem;
 
 	MenuItem miLuminary[];
 
@@ -2082,7 +2082,9 @@
 	
 	ImageList saveImageList = null;
 	int lastZoomWidth , lastZoomHeight;
-
+	
+	boolean ignoreNextDrag=false;
+	
 	public MovingMapPanel(MovingMap f){
 		this.mm = f;
 		miLuminary = new MenuItem[SkyOrientation.LUMINARY_NAMES.length];
@@ -2132,10 +2134,11 @@
 			saveMapLoc = new Point (ev.x, ev.y);
 			paintingZoomArea = true;
 			mm.zoomingMode = true;
-		}
+		}		
 		if (!mm.zoomingMode && ev.type == PenEvent.PEN_DOWN && ev.modifiers == PenEvent.RIGHT_BUTTON) {
+			// context penHeld is fired on PDA but not on PC (Java)
 			penHeld(new Point (ev.x, ev.y));
-		}
+		}		
 		if (mm.zoomingMode && ev.type == PenEvent.PEN_UP ) {
 			paintingZoomArea = false;
 			mm.zoomingMode = false;
@@ -2169,6 +2172,11 @@
 			dr.setPen(new Pen(new Color(255,0,0),Pen.SOLID,3));
 			dr.drawRect(left, top, java.lang.Math.abs(lastZoomWidth), java.lang.Math.abs(lastZoomHeight), 0); // bug in ewe: thickness parameter is ignored
 		}
+		if (ignoreNextDrag) {
+			// On PDA next event after a Kontext ist a drag, that will move the map unwanted
+			ignoreNextDrag=false;
+			if (ev.type == PenEvent.PEN_DRAG) return; // ignoring now
+		}
 		super.onPenEvent(ev);
 	}
 
@@ -2253,31 +2261,34 @@
 	}
 
 	public void penHeld(Point p){
-		//	if (!menuIsActive()) doMenu(p);
+		ignoreNextDrag=true;
 		if (!mm.zoomingMode) {
-			//( (ev.type == PenEvent.PEN_DOWN) && ((PenEvent)ev).modifiers == PenEvent.RIGHT_BUTTON)
-			//|| ((ev.type == PenEvent.RIGHT_BUTTON) ) )) ---> these events are not posted --> this overridering is the only solution
 			kontextMenu = new Menu();
-			if ( !(mm.directionArrows.onHotArea(p.x, p.y)) ) {
-				kontextMenu.addItem(gotoMenuItem);
-				kontextMenu.addItem(newWayPointMenuItem);
-				AniImage clickedOnImage = images.findHotImage(p);
-				if (clickedOnImage != null && clickedOnImage instanceof MapSymbol) {
-					if ( ((MapSymbol)clickedOnImage).mapObject instanceof CacheHolder) {
-						clickedCache = (CacheHolder)( ((MapSymbol)clickedOnImage).mapObject);
-						if (clickedCache != null) {
-							openCacheDescMenuItem = new MenuItem(MyLocale.getMsg(4270, "Open")+" '"+(clickedCache.getCacheName().length()>0 ? clickedCache.getCacheName() : clickedCache.getWayPoint())+"'$o"); // clickedCache == null can happen if clicked on the goto-symbol
-							kontextMenu.addItem(openCacheDescMenuItem);
-							gotoCacheMenuItem = new MenuItem(MyLocale.getMsg(4279, "Goto")+ " '"+(clickedCache.getCacheName().length()>0 ? clickedCache.getCacheName() : clickedCache.getWayPoint())+"'$g"); // clickedCache == null can happen if clicked on the goto-symbol
-							kontextMenu.addItem(gotoCacheMenuItem);
-							if (Global.mainForm.cacheListVisible) {
-								addCachetoListMenuItem = new MenuItem(MyLocale.getMsg(199,"Add to cachetour"));
-								kontextMenu.addItem(addCachetoListMenuItem);
-							}
+			kontextMenu.addItem(gotoMenuItem);
+			kontextMenu.addItem(newWayPointMenuItem);
+			AniImage clickedOnImage = images.findHotImage(p);
+			if (clickedOnImage != null && clickedOnImage instanceof MapSymbol) {
+				if ( ((MapSymbol)clickedOnImage).mapObject instanceof CacheHolder) {
+					clickedCache = (CacheHolder)( ((MapSymbol)clickedOnImage).mapObject);
+					if (clickedCache != null) {
+						openCacheDescMenuItem = new MenuItem(MyLocale.getMsg(201, "Open Desctiption")+" '"+(clickedCache.getCacheName().length()>0 ? clickedCache.getCacheName() : clickedCache.getWayPoint())+"'$o"); // clickedCache == null can happen if clicked on the goto-symbol
+						kontextMenu.addItem(openCacheDescMenuItem);
+						openCacheDetailMenuItem = new MenuItem(MyLocale.getMsg(200, "Open Details")+" '"+(clickedCache.getCacheName().length()>0 ? clickedCache.getCacheName() : clickedCache.getWayPoint())+"'$o"); // clickedCache == null can happen if clicked on the goto-symbol
+						kontextMenu.addItem(openCacheDetailMenuItem);
+						gotoCacheMenuItem = new MenuItem(MyLocale.getMsg(4279, "Goto")+ " '"+(clickedCache.getCacheName().length()>0 ? clickedCache.getCacheName() : clickedCache.getWayPoint())+"'$g"); // clickedCache == null can happen if clicked on the goto-symbol
+						kontextMenu.addItem(gotoCacheMenuItem);
+						if (Global.mainForm.cacheListVisible) {
+							addCachetoListMenuItem = new MenuItem(MyLocale.getMsg(199,"Add to cachetour"));
+							kontextMenu.addItem(addCachetoListMenuItem);
 						}
 					}
 				}
 			}
+			/*
+			 *  this kontext will be replaced by the settings of the rose in the goto panel
+			 *    
+			if ( !(mm.directionArrows.onHotArea(p.x, p.y)) ) {
+			}
 			else {
 				for (int i=0; i<SkyOrientation.LUMINARY_NAMES.length; i++) {
 					kontextMenu.addItem(miLuminary[i]);
@@ -2285,13 +2296,14 @@
 					else miLuminary[i].modifiers &= MenuItem.Checked;
 				}
 			}
+			*/
 			kontextMenu.exec(this, new Point(p.x, p.y), this);
 		}
 	}
 
 	public void onEvent(Event ev){
 		if (kontextMenu != null && ev instanceof PenEvent && ev.type == PenEvent.PEN_DOWN && ev.target == this)
-			{kontextMenu.close(); kontextMenu = null; }
+			{kontextMenu.close(); kontextMenu = null; return;}
 
 		if (ev instanceof MenuEvent) {
 			if (ev.target == kontextMenu) {
@@ -2301,15 +2313,17 @@
 						kontextMenu.close();
 						mm.myNavigation.setDestination(mm.ScreenXY2LatLon(saveMapLoc.x, saveMapLoc.y));
 					}
-					if (action == openCacheDescMenuItem) {
-						//mm.onEvent(new FormEvent(FormEvent.CLOSED, mm));
+					if (action == openCacheDescMenuItem || action == openCacheDetailMenuItem) {
 						kontextMenu.close();
 						WindowEvent close = new WindowEvent();
 						close.target = mm;
 						close.type = WindowEvent.CLOSE;
 						mm.postEvent(close);
 						MainTab mainT = Global.mainTab;
-						mainT.openDescriptionPanel(clickedCache);
+						if (action == openCacheDescMenuItem) 
+							mainT.openPanel(clickedCache,2);
+						else
+							mainT.openPanel(clickedCache,1);
 					}
 					if (action == gotoCacheMenuItem) {
 						kontextMenu.close();



From araber95 at mail.berlios.de  Tue Mar 16 17:24:13 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Tue, 16 Mar 2010 17:24:13 +0100
Subject: [Cachewolf-svn] r2517 - in trunk/src/CacheWolf: . exp imp navi
Message-ID: <201003161624.o2GGODun002471@sheep.berlios.de>

Author: araber95
Date: 2010-03-16 17:23:55 +0100 (Tue, 16 Mar 2010)
New Revision: 2517

Modified:
   trunk/src/CacheWolf/Attribute.java
   trunk/src/CacheWolf/Attributes.java
   trunk/src/CacheWolf/AttributesViewer.java
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/CacheHolderDetail.java
   trunk/src/CacheWolf/DescriptionPanel.java
   trunk/src/CacheWolf/DetailsPanel.java
   trunk/src/CacheWolf/MainMenu.java
   trunk/src/CacheWolf/MainTab.java
   trunk/src/CacheWolf/Parser.java
   trunk/src/CacheWolf/SearchCache.java
   trunk/src/CacheWolf/ShowCacheInBrowser.java
   trunk/src/CacheWolf/SolverPanel.java
   trunk/src/CacheWolf/TravelbugJourneyScreen.java
   trunk/src/CacheWolf/exp/ExploristExporter.java
   trunk/src/CacheWolf/exp/GPXExporter.java
   trunk/src/CacheWolf/exp/GpxExportNg.java
   trunk/src/CacheWolf/exp/HTMLExporter.java
   trunk/src/CacheWolf/exp/KMLExporter.java
   trunk/src/CacheWolf/exp/LocExporter.java
   trunk/src/CacheWolf/exp/MSARCSVExporter.java
   trunk/src/CacheWolf/exp/SpoilerPOIExporter.java
   trunk/src/CacheWolf/exp/TPLExporter.java
   trunk/src/CacheWolf/imp/GPXImporter.java
   trunk/src/CacheWolf/imp/LOCXMLImporter.java
   trunk/src/CacheWolf/imp/OCXMLImporter.java
   trunk/src/CacheWolf/imp/SpiderGC.java
   trunk/src/CacheWolf/myTableControl.java
   trunk/src/CacheWolf/navi/MovingMap.java
Log:
1. ExporterNG exporting attributes and travelbugs
2. internal : getting cachedetails

Modified: trunk/src/CacheWolf/Attribute.java
===================================================================
--- trunk/src/CacheWolf/Attribute.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/Attribute.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -76,10 +76,15 @@
     	}
     	return bit;
     }    
-    //
-	//public int getAttId () { return _Id; }
-	//
     /**
+     * get GC_ID string
+	 */
+    public String getGCText () { return attRef[_Id][GC_TEXT]; }
+    /**
+     * get GC_ID string
+	 */
+    public String getGCId () { return attRef[_Id][GC_ID]; }
+    /**
      * getting attribute given=0,negative=1,not specified=2  
      */
 	public int getInc () { return _Inc; }
@@ -145,22 +150,22 @@
 	private final static int PIC_NAME = 2;
 	private final static int OC_ID = 3;
 	private final static int GC_ID = 4;
-	//private final static int GC_TEXT = 5; // for export , didn't extract by myself, copied from forum	
+	private final static int GC_TEXT = 5; // for export , didn't extract by myself, copied from forum	
 	private static final String[][] attRef = {
-		// Empfehlungen / Personen
+		// Empfehlungen / Personen - Conditions (Yes/No)
 		{"30","2562","scenic","","8","Scenic view"},//62 scenic view
 		{"17","2536","kids","59","6","Recommended for kids"},//36 kid friendly
 		{"35","2572","stroller","","41","Stroller accessible"},//72 stroller accessible	
 		{"41","2584","wheelchair","","24","Wheelchair accessible"},//84 wheelchair accessible
-		//  vorhanden / Eigenschaften / Infrastruktur
+		//  vorhanden / Eigenschaften / Infrastruktur - Facilities (Yes/No)
 		{"22","2546","parking","18","25","Parking available"},//46 parking available
 		{"26","2554","public","19","26","Public transportation"},//54 public transit available
 		{"40","2582","water","20","27","Drinking water nearby"},//82 drinking water nearby
 		{"29","2560","restrooms","21","28","Public restrooms nearby"},//60 restrooms available
 		{"23","2548","phone","22","29","Telephone nearby"},//48 telephone nearby
 		{"24","2550","picnic","","30","Picnic tables nearby"},//50 picnic tables available
-		{"43","2588","firstaid","23","42","Firstaid"}, //88 erste Hilfe
-		// Erlaubt
+		{"43","2588","firstaid","23","42","Firstaid"}, //88 erste Hilfe !!! da 
+		// Erlaubt - Permissions (Allowed/Not Allowed)
 		{"11","2524","dogs","","1","Dogs"},//24 dogs allowed
 		{"05","2512","camping","","31","Camping available"},//12 Camping allowed
 		{"01","2504","bicycles","","32","Bicycles"},//04 bikes allowed
@@ -170,7 +175,7 @@
 		{"33","2568","snowmobiles","","36","Snowmobiles"},//68
 		{"14","2530","horses","","37","Horses"},//30 horses allowed
 		{"04","2510","campfires","","38","Campfires"},//10 campfires allowed
-		// Eigenschaften / Gefahren
+		// Eigenschaften / Gefahren - Hazards (Present/Not Present)
 		{"10","2522","danger","9","23","Dangerous area"},//22 dangerous area
 		{"62","2644","train","10","",""},// 144 aktive Eisenbahnlinien in der N?he
 		{"06","2514","cliff","11","21","Cliff / falling rocks"},//14 falling-rocks nearby
@@ -183,7 +188,7 @@
 		{"03","2508","cactus","","",""},//08
 		{"32","2566","snakes","","18","Snakes"},//66
 		{"09","2520","cow","","43","Watch for livestock"},//20 watch for livestock
-		// Eigenschaften / Der Weg
+		// Eigenschaften / Der Weg - Conditions (Yes/No)
 		{"49","2600","car","24","",""},// 100 Nahe beim Auto
 		{"21","2544","onehour","","7","Takes less than an hour"},//44 takes less than one hour
 		{"13","2528","hiking","25","9","Significant hike"},//28 significant hike
@@ -191,7 +196,7 @@
 		{"65","2634","steep","27","",""},// 134 H?geliges Gel?nde
 		{"07","2516","climbing","28","10","Difficult climbing"},//16 easy climbing(OC-28), difficult climbing(GC-10) 
 		{"36","2574","swimming","29","12","May require swimming"},//74
-		// Eigenschaften / Wegpunkte
+		// Eigenschaften / Wegpunkte  - Conditions (Yes/No)
 		{"55","2612","letter","8","",""},// 112 Letterbox (ben?tigt Stempel)
 		{"54","2610","interestsign","30","",""},// 110 Interessanter Ort ev mit scenic zusammenfassen?
 		{"56","2614","moving","31","",""},// 114 Bewegliches Ziel
@@ -216,7 +221,7 @@
 		// Einschr?nkungen und Voraussetzungen / Systembedingt
 		{"59","2620","oconly","6","",""},// 120 Nur bei Opencaching logbar
 		{"71","2650","wwwlink","7","",""},// 150 Nur Hyperlink zu OC-externen Portalen
-		// Einschr?nkungen und Voraussetzungen / Ben?tigt Werkzeug
+		// Einschr?nkungen und Voraussetzungen / Ben?tigt Werkzeug - Special Equipment (Required/Not Required)
 		{"69","2642","tools","46","",""},// 142 Spezielle Ausr?stung
 		{"08","2518","compass","47","",""},//18 Kompass
 		{"44","2590","flashlight","48","44","Flashlight required"}, // 90 Flashlight required

Modified: trunk/src/CacheWolf/Attributes.java
===================================================================
--- trunk/src/CacheWolf/Attributes.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/Attributes.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -5,7 +5,7 @@
 	/**
 	 * The number of attributes for this cache (=number of array elements in use in attribs)
 	 */
-	private int count=0;
+	private int _count=0;
 	/**
 	 * The attributes as array of MAXATTRIBS Attribute
 	 */
@@ -19,12 +19,12 @@
 	 * Get the number of attributes in the list
 	 * @return number of attributes
 	 */
-	public int getCount(){return count;}	
+	public int count(){return _count;}	
 	/**
 	 * getting an empty attributes list for this Cache 
 	 */
 	public void clear() {
-		count=0;
+		_count=0;
 		attrYes[0]=0l;
 		attrYes[1]=0l;
 		attrNo[0]=0l;
@@ -50,7 +50,7 @@
 	public String XmlAttributesWrite(){
 		StringBuffer sb=new StringBuffer(1000);
 		sb.append("<ATTRIBUTES>\n");
-		for (int i=0; i<count; i++) {
+		for (int i=0; i<_count; i++) {
 			sb.append("   <ATT>");
 			sb.append(attribs[i].getImageName());
 			sb.append("</ATT>\n");
@@ -63,10 +63,10 @@
 	 * @param attributeName
 	 */
 	public void add(String attributeName){
-		if (count<attribs.length) {
+		if (_count<attribs.length) {
 			if ( !attributeName.equalsIgnoreCase( "attribute-blank.gif" ) ) {
 				Attribute attr = new Attribute(attributeName);
-				attribs[count++] = attr;
+				attribs[_count++] = attr;
 				attrYes=attr.getYesBit(attrYes);
 				attrNo=attr.getNoBit(attrNo);
 			}
@@ -78,9 +78,9 @@
 	 * @param GC attribute Inc (attribute set = 0 ,attribute  not set = 1)
 	 */
 	public void add(int attIdGC, String Yes0No1) {
-		if (count<attribs.length) {
+		if (_count<attribs.length) {
 			Attribute attr = new Attribute(attIdGC, Yes0No1);
-			attribs[count++] = attr;
+			attribs[_count++] = attr;
 			attrYes=attr.getYesBit(attrYes);
 			attrNo=attr.getNoBit(attrNo);			
 		}
@@ -90,9 +90,9 @@
 	 * @param OC attribute ID
 	 */
 	public void add(int attIdOC) {
-		if (count<attribs.length) {
+		if (_count<attribs.length) {
 			Attribute attr = new Attribute(attIdOC);
-			attribs[count++] = attr;
+			attribs[_count++] = attr;
 			attrYes=attr.getYesBit(attrYes);
 		}
 	}

Modified: trunk/src/CacheWolf/AttributesViewer.java
===================================================================
--- trunk/src/CacheWolf/AttributesViewer.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/AttributesViewer.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -43,7 +43,7 @@
 	
 	public void showImages(Attributes atts) {
 		iap.images.clear();
-		for (int i=0; i<atts.getCount(); i++) {
+		for (int i=0; i<atts.count(); i++) {
 			attAniImage img=new attAniImage( atts.getAttribute(i).getImage());
 			img.info=atts.getAttribute(i).getMsg();
 			img.location=new Rect((i % ICONS_PER_ROW)*TILESIZE,(i / ICONS_PER_ROW)*TILESIZE,TILESIZE,TILESIZE);

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -105,7 +105,7 @@
 	private boolean hasSolver = false;
 	/** True if a note is entered for the cache */
 	private boolean hasNote = false;
-	public CacheHolderDetail details = null;
+	private CacheHolderDetail details = null;
 	/** When sorting the cacheDB this field is used. The relevant field is copied here and
 	 *  the sort is always done on this field to speed up the sorting process 
 	 */
@@ -383,7 +383,7 @@
 	            }
 				if (version < Profile.CURRENTFILEFORMAT) {
 		            // forceload of details, creates waypoint.xml if missing
-		            details = getCacheDetails(true, false);
+		            details = getCacheDetails(false);
 		            // make sure details get (re)written in new format
 		            details.hasUnsavedChanges = true;
 		            // update information on notes and solver info
@@ -506,7 +506,7 @@
 
 		this.setAttribsAsBits(ch.getAttributesBits());
 		if (ch.detailsLoaded()) {
-			this.getFreshDetails().update(ch.getFreshDetails());
+			this.getCacheDetails(false).update(ch.getCacheDetails(false));
 		}	
 	}
 	/**
@@ -519,7 +519,7 @@
 			// are already loaded. When they aren't loaded, then we assume
 			// that there is no change, so nothing to do.
 			if (this.detailsLoaded()) {
-				CacheHolderDetail chD = getCacheDetails(false, false);
+				CacheHolderDetail chD = getCacheDetails(true);
 				if (chD != null) {
 					chD.CacheLogs.calcRecommendations();
 					recommendationScore = chD.CacheLogs.recommendationRating;
@@ -662,19 +662,7 @@
 	public boolean detailsLoaded() {
 		return details!=null;
 	}
-	
-	/** 
-	 * Call this method to get the long-description and so on.
-	 * If the according .xml-file is already read, it will return
-	 * that one, otherwise it will be loaded.
-	 * To avoid memory problems this routine loads not for more caches than maxDetails
-	 * the details. If maxdetails is reached, it will remove from RAM the details 
-	 * of the 5 caches that were loaded most long ago.
-	 */
-	public CacheHolderDetail getCacheDetails(boolean maybenew) {
-		return getCacheDetails(maybenew, true);
-	}
-	
+
 	/**
 	 * Gets the detail object of a cache. The detail object stores information which is not needed
 	 * for every cache instantaneously, but can be loaded if the user decides to look at this cache.
@@ -684,66 +672,33 @@
 	 * or the user is warned that the file doesn't exist.
 	 * If more than <code>maxdetails</code> details are loaded, then the 5 last recently loaded 
 	 * caches are unloaded (to save ram). 
-	 * 
-	 * @param maybenew
-	 * 			  If true and the cache file could not be read, then an empty detail object is 
-	 *            returned.
 	 * @param alarmuser
 	 *            If true an error message will be displayed to the user, if the details could not
 	 *            be read, and the method returns null 
 	 * @return The respective CacheHolderDetail, or null
 	 */
-
-	public CacheHolderDetail getCacheDetails(boolean maybenew, boolean alarmuser) {
+	public CacheHolderDetail getCacheDetails(boolean alarmuser) {
 		if (details == null) {
-
 			details = new CacheHolderDetail(this);
 			try {
 				details.readCache(Global.getProfile().dataDir);
 			} catch (IOException e) {
-				if (! maybenew ) {
-					if (alarmuser) {
-						//FIXME: put a message to languages file
-						(new MessageBox(MyLocale.getMsg(31415,"Error"), MyLocale.getMsg(31415, "Could not read cache details for cache: ")
-						        + this.getWayPoint(), FormBase.OKB)).execute();
-					} else {
-				//		Global.getPref().log("Could not read details for waypoint " + getWayPoint());
-					}
-					details = null;
-					this.setIncomplete(true);
+				if (alarmuser) {
+					//FIXME: put a message to languages file
+					(new MessageBox(MyLocale.getMsg(31415,"Error"), MyLocale.getMsg(31415, "Could not read cache details for cache: ")
+					        + this.getWayPoint(), FormBase.OKB)).execute();
 				}
+				details = null;
+				this.setIncomplete(true);
 			}
-			if (details != null
-					  // for importing/spidering reasons helper objects with same waypoint are created
-					&& !cachesWithLoadedDetails.contains(this)
-					  // helper objects may have empty waypoint
-					//&& !this.getWayPoint().equals(CacheHolder.EMPTY)
-					) {
+			// for importing/spidering reasons helper objects with same waypoint are created
+			if (details != null && !cachesWithLoadedDetails.contains(this)) {
 				cachesWithLoadedDetails.add(this);
 				if (cachesWithLoadedDetails.size() >= Global.getPref().maxDetails) removeOldestDetails();
 			}
 		}
 		return details;
 	}
-	
-	/**
-	 * Gets a detail object for the cache. If the object is already created, then this object is
-	 * returned, otherwise it's created from the cache.xml file. If no such file is found, an empty
-	 * object is returned.
-	 * @return The object representing the cache details
-	 */
-	public CacheHolderDetail getFreshDetails() {
-		return this.getCacheDetails(true, false);
-	}
-	/**
-	 * Gets a detail object for the cache. If the object is already created, then this object is
-	 * returned, otherwise it's created from the cache.xml file. If no such file is found, an error
-	 * message is displayed and <code>null</code> is returned.
-	 * @return The object representing the cache details, or <code>null</code>.
-	 */
-	public CacheHolderDetail getExistingDetails() {
-		return this.getCacheDetails(false, true);
-	}
 
 	/**
 	 * Saves the cache to the corresponding <waypoint>.xml file, located in the profiles
@@ -752,7 +707,7 @@
 	 */
 	public void save() {
 		checkIncomplete();
-		this.getFreshDetails().saveCacheDetails(Global.getProfile().dataDir);
+		this.getCacheDetails(false).saveCacheDetails(Global.getProfile().dataDir);
 	}
 	
 	void releaseCacheDetails() {
@@ -798,7 +753,7 @@
 //			ch = Global.getProfile().cacheDB.get(wp);
 			ch = (CacheHolder) cachesWithLoadedDetails.get(i);
 			if (ch != null) {
-	            chD = ch.getExistingDetails();
+	            chD = ch.getCacheDetails(true);
 	            if (chD!=null && chD.hasUnsavedChanges) {
 		            //ch.calcRecommendationScore();
 		            chD.saveCacheDetails(Global.getProfile().dataDir);
@@ -1564,7 +1519,7 @@
 	 */
 	public boolean rename(String newWptId) {
 		newWptId = newWptId.toUpperCase();
-		getFreshDetails();
+		getCacheDetails(false);
 		if (details.rename(newWptId)) {
 			setWayPoint(newWptId);
 			save();

Modified: trunk/src/CacheWolf/CacheHolderDetail.java
===================================================================
--- trunk/src/CacheWolf/CacheHolderDetail.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/CacheHolderDetail.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -121,7 +121,7 @@
 		  }
 		  this.Travelbugs = newCh.Travelbugs;
 		  
-		  if (newCh.attributes.getCount() > 0) this.attributes = newCh.attributes;
+		  if (newCh.attributes.count() > 0) this.attributes = newCh.attributes;
 		  
 		  // URL
 		  this.URL = newCh.URL;

Modified: trunk/src/CacheWolf/DescriptionPanel.java
===================================================================
--- trunk/src/CacheWolf/DescriptionPanel.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/DescriptionPanel.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -49,14 +49,14 @@
             isHtml = cache.is_HTML();
             if (cache.isAddiWpt()) {
                 isHtml = cache.mainCache.is_HTML();
-                if (cache.getExistingDetails().LongDescription != null && cache.getExistingDetails().LongDescription.length() > 0)
-                    desc = cache.getExistingDetails().LongDescription + (isHtml ? "<hr>\n" : "\n")
-                            + cache.mainCache.getExistingDetails().LongDescription;
+                if (cache.getCacheDetails(true).LongDescription != null && cache.getCacheDetails(true).LongDescription.length() > 0)
+                    desc = cache.getCacheDetails(true).LongDescription + (isHtml ? "<hr>\n" : "\n")
+                            + cache.mainCache.getCacheDetails(true).LongDescription;
                 else
-                    desc = cache.mainCache.getExistingDetails().LongDescription;
+                    desc = cache.mainCache.getCacheDetails(true).LongDescription;
             } else
                 // not an addi-wpt
-                desc = cache.getExistingDetails().LongDescription;
+                desc = cache.getCacheDetails(true).LongDescription;
         }
         // HtmlDisplay does not show the <sup> tag correctly, so we need to replace with ^
         if (desc.indexOf("<sup>")>=0) {
@@ -74,7 +74,7 @@
                 } else {
                     chImages=cache;
                 }
-            	Images = chImages.getExistingDetails().images;
+            	Images = chImages.getCacheDetails(true).images;
                 StringBuffer s = new StringBuffer(desc.length() + Images.size() * 100);
                 int start = 0;
                 int pos;
@@ -108,7 +108,7 @@
                     s.append(desc.substring(start));
                 desc = s.toString();
                 if (imageNo<Images.size()) {
-                    desc += getPicDesc(imageNo, chImages.getExistingDetails());
+                    desc += getPicDesc(imageNo, chImages.getCacheDetails(true));
                 }
             }
             //disp.setHtml(desc);

Modified: trunk/src/CacheWolf/DetailsPanel.java
===================================================================
--- trunk/src/CacheWolf/DetailsPanel.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/DetailsPanel.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -416,7 +416,7 @@
 		lblAddiCount.setText(MyLocale.getMsg(1044, "Addis") + ": " + addiCount);
 
 		if (isBigScreen) {
-			waypointNotes.setText(ch.getExistingDetails().getCacheNotes());
+			waypointNotes.setText(ch.getCacheDetails(true).getCacheNotes());
 		}
 	}
 
@@ -806,10 +806,10 @@
 		dirtyNotes = false;
 		dirtyDetails = false;
 		needsTableUpdate = false;
-		cache.getFreshDetails().hasUnsavedChanges = true;
+		cache.getCacheDetails(false).hasUnsavedChanges = true;
 		if (!oldWaypoint.equals(cache.getWayPoint())){
 		 // Delete old XML - File
-			cache.getFreshDetails().deleteFile(Global.getProfile().dataDir+oldWaypoint+".xml");
+			cache.getCacheDetails(false).deleteFile(Global.getProfile().dataDir+oldWaypoint+".xml");
 		}
 	}
 

Modified: trunk/src/CacheWolf/MainMenu.java
===================================================================
--- trunk/src/CacheWolf/MainMenu.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/MainMenu.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -668,8 +668,8 @@
 					cwp.setPosition(i);
 					CacheHolder ch = cacheDB.get(i);
 					if (ch.mainCache==null) {
-						ch.setHasNote(!ch.getFreshDetails().getCacheNotes().equals(""));
-						ch.setHasSolver(!ch.getFreshDetails().getSolver().equals(""));
+						ch.setHasNote(!ch.getCacheDetails(false).getCacheNotes().equals(""));
+						ch.setHasSolver(!ch.getCacheDetails(false).getSolver().equals(""));
 					}
 					if (cwp.isClosed()) break;
 				} // for

Modified: trunk/src/CacheWolf/MainTab.java
===================================================================
--- trunk/src/CacheWolf/MainTab.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/MainTab.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -179,7 +179,7 @@
 					if (oldHasSolver != chD.getParent().hasSolver()) tbP.tc.update(true);
 				} else {
 					boolean oldHasSolver = chMain.hasSolver();
-					chMain.getExistingDetails().setSolver(solverP.getInstructions());
+					chMain.getCacheDetails(true).setSolver(solverP.getInstructions());
 					if (oldHasSolver != chMain.hasSolver()) tbP.tc.update(true);
 					chMain.save();//Vm.debug("mainT:SaveCache "+chMain.wayPoint+"/S:"+chMain.Solver);
 					chMain=null;

Modified: trunk/src/CacheWolf/Parser.java
===================================================================
--- trunk/src/CacheWolf/Parser.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/Parser.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -834,8 +834,8 @@
 					op.append(addiWpt.getCacheName());
 					op.append("] = \" $");
 					op.append(addiWpt.getWayPoint());
-					if (addiWpt.getExistingDetails().LongDescription.trim().length()>0)
-						op.append("\n   \""+STRreplace.replace(addiWpt.getExistingDetails().LongDescription,"\"","\"\"")+"\"");
+					if (addiWpt.getCacheDetails(true).LongDescription.trim().length()>0)
+						op.append("\n   \""+STRreplace.replace(addiWpt.getCacheDetails(true).LongDescription,"\"","\"\"")+"\"");
 					op.append("\n   goto($");
 					op.append(addiWpt.getWayPoint());
 					op.append("); STOP\nENDIF\n\n");

Modified: trunk/src/CacheWolf/SearchCache.java
===================================================================
--- trunk/src/CacheWolf/SearchCache.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/SearchCache.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -44,10 +44,10 @@
 				   ch.getCacheName().toUpperCase().indexOf(searchStr) <0 && 
 				   ch.getCacheStatus().toUpperCase().indexOf(searchStr)<0 &&
 				   (! searchInDescriptionAndNotes || 
-					ch.getExistingDetails().LongDescription.toUpperCase().indexOf(searchStr)<0 &&
-					ch.getExistingDetails().getCacheNotes().toUpperCase().indexOf(searchStr)<0)&&
+					ch.getCacheDetails(true).LongDescription.toUpperCase().indexOf(searchStr)<0 &&
+					ch.getCacheDetails(true).getCacheNotes().toUpperCase().indexOf(searchStr)<0)&&
 				   (! searchInLogs ||
-					ch.getExistingDetails().CacheLogs.allMessages().toUpperCase().indexOf(searchStr)<0)){
+					ch.getCacheDetails(true).CacheLogs.allMessages().toUpperCase().indexOf(searchStr)<0)){
 					ch.is_flaged = false;
 				} else
 					ch.is_flaged=true;

Modified: trunk/src/CacheWolf/ShowCacheInBrowser.java
===================================================================
--- trunk/src/CacheWolf/ShowCacheInBrowser.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/ShowCacheInBrowser.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -89,39 +89,39 @@
 						tpl.setParam("STATUS", chD.getCacheStatus());
 
 					// Cache attributes
-					if (chD.getExistingDetails().attributes.getCount()>0) {
-						Vector attVect=new Vector(chD.getExistingDetails().attributes.getCount()+1);
-						for (int i=0; i<chD.getExistingDetails().attributes.getCount(); i++) {
+					if (chD.getCacheDetails(true).attributes.count()>0) {
+						Vector attVect=new Vector(chD.getCacheDetails(true).attributes.count()+1);
+						for (int i=0; i<chD.getCacheDetails(true).attributes.count(); i++) {
 							Hashtable atts=new Hashtable();
 							atts.put("IMAGE","<img src=\"file://"+
-									 chD.getExistingDetails().attributes.getAttribute(i).getPathAndImageName()+
-									 "\" border=0 alt=\""+chD.getExistingDetails().attributes.getAttribute(i).getMsg()+"\">");
+									 chD.getCacheDetails(true).attributes.getAttribute(i).getPathAndImageName()+
+									 "\" border=0 alt=\""+chD.getCacheDetails(true).attributes.getAttribute(i).getMsg()+"\">");
 							if (i % 5 ==4)
 								atts.put("BR","<br/>");
 							else
 								atts.put("BR","");
-							atts.put("INFO",chD.getExistingDetails().attributes.getAttribute(i).getMsg());
+							atts.put("INFO",chD.getCacheDetails(true).attributes.getAttribute(i).getMsg());
 							attVect.add(atts);
 						}
 						tpl.setParam("ATTRIBUTES",attVect);
 					}
 
 					tpl.setParam("DATE", chD.getDateHidden());
-					tpl.setParam("URL", chD.getExistingDetails().URL);
-					if (chD.getExistingDetails().Travelbugs.size()>0) tpl.setParam("BUGS",chD.getExistingDetails().Travelbugs.toHtml());
-					if (chD.getExistingDetails().getCacheNotes().trim().length()>0) tpl.setParam("NOTES", STRreplace.replace(chD.getExistingDetails().getCacheNotes(),"\n","<br/>\n"));
-					if (chD.getExistingDetails().getSolver()!=null && chD.getExistingDetails().getSolver().trim().length()>0) tpl.setParam("SOLVER", STRreplace.replace(chD.getExistingDetails().getSolver(),"\n","<br/>\n"));
+					tpl.setParam("URL", chD.getCacheDetails(true).URL);
+					if (chD.getCacheDetails(true).Travelbugs.size()>0) tpl.setParam("BUGS",chD.getCacheDetails(true).Travelbugs.toHtml());
+					if (chD.getCacheDetails(true).getCacheNotes().trim().length()>0) tpl.setParam("NOTES", STRreplace.replace(chD.getCacheDetails(true).getCacheNotes(),"\n","<br/>\n"));
+					if (chD.getCacheDetails(true).getSolver()!=null && chD.getCacheDetails(true).getSolver().trim().length()>0) tpl.setParam("SOLVER", STRreplace.replace(chD.getCacheDetails(true).getSolver(),"\n","<br/>\n"));
 					// Look for images
 
-					StringBuffer s=new StringBuffer(chD.getExistingDetails().LongDescription.length());
+					StringBuffer s=new StringBuffer(chD.getCacheDetails(true).LongDescription.length());
 					int start=0;
 					int pos;
 					int imageNo=0;
 					Regex imgRex = new Regex("src=(?:\\s*[^\"|']*?)(?:\"|')(.*?)(?:\"|')");
-					while (start>=0 && (pos=chD.getExistingDetails().LongDescription.indexOf("<img",start))>0) {
-						if (imageNo >= chD.getExistingDetails().images.size())break;
-						s.append(chD.getExistingDetails().LongDescription.substring(start,pos));
-						imgRex.searchFrom(chD.getExistingDetails().LongDescription,pos);
+					while (start>=0 && (pos=chD.getCacheDetails(true).LongDescription.indexOf("<img",start))>0) {
+						if (imageNo >= chD.getCacheDetails(true).images.size())break;
+						s.append(chD.getCacheDetails(true).LongDescription.substring(start,pos));
+						imgRex.searchFrom(chD.getCacheDetails(true).LongDescription,pos);
 						String imgUrl=imgRex.stringMatched(1);
 						//Vm.debug("imgUrl "+imgUrl);
 						if (imgUrl.lastIndexOf('.')>0 && imgUrl.toLowerCase().startsWith("http")) {
@@ -129,27 +129,27 @@
 							// If we have an image which we stored when spidering, we can display it
         					if(imgType.startsWith(".png") || imgType.startsWith(".jpg") || imgType.startsWith(".gif")){
 								s.append("<img src=\"file://"+
-								   Global.getProfile().dataDir+chD.getExistingDetails().images.get(imageNo).getFilename()+"\">");
+								   Global.getProfile().dataDir+chD.getCacheDetails(true).images.get(imageNo).getFilename()+"\">");
 								imageNo++;
 							}
 						}
-						start=chD.getExistingDetails().LongDescription.indexOf(">",pos);
+						start=chD.getCacheDetails(true).LongDescription.indexOf(">",pos);
 						if (start>=0) start++;
 					}
-					if (start>=0) s.append(chD.getExistingDetails().LongDescription.substring(start));
+					if (start>=0) s.append(chD.getCacheDetails(true).LongDescription.substring(start));
 					tpl.setParam("DESCRIPTION", s.toString());
 
 					// Do the remaining pictures which are not included in main body of text
 					// They will be hidden initially and can be displayed by clicking on a link
-					if (imageNo<chD.getExistingDetails().images.size()) {
-						Vector imageVect=new Vector(chD.getExistingDetails().images.size()-imageNo);
-						for (; imageNo<chD.getExistingDetails().images.size(); imageNo++) {
+					if (imageNo<chD.getCacheDetails(true).images.size()) {
+						Vector imageVect=new Vector(chD.getCacheDetails(true).images.size()-imageNo);
+						for (; imageNo<chD.getCacheDetails(true).images.size(); imageNo++) {
 							Hashtable imgs=new Hashtable();
 							imgs.put("IMAGE","<img src=\"file://"+
-									   Global.getProfile().dataDir+chD.getExistingDetails().images.get(imageNo).getFilename()+"\" border=0>");
-							imgs.put("IMAGETEXT",chD.getExistingDetails().images.get(imageNo).getTitle());
-							if (imageNo<chD.getExistingDetails().images.size() && chD.getExistingDetails().images.get(imageNo).getComment()!=null)
-								imgs.put("IMAGECOMMENT",chD.getExistingDetails().images.get(imageNo).getComment());
+									   Global.getProfile().dataDir+chD.getCacheDetails(true).images.get(imageNo).getFilename()+"\" border=0>");
+							imgs.put("IMAGETEXT",chD.getCacheDetails(true).images.get(imageNo).getTitle());
+							if (imageNo<chD.getCacheDetails(true).images.size() && chD.getCacheDetails(true).images.get(imageNo).getComment()!=null)
+								imgs.put("IMAGECOMMENT",chD.getCacheDetails(true).images.get(imageNo).getComment());
 							else
 								imgs.put("IMAGECOMMENT","");
 							imgs.put("I","'img"+new Integer(imageNo).toString()+"'");
@@ -158,10 +158,10 @@
 						tpl.setParam("IMAGES",imageVect);
 					}
 
-					Vector logVect=new Vector(chD.getExistingDetails().CacheLogs.size());
-					for (int i=0; i<chD.getExistingDetails().CacheLogs.size(); i++) {
+					Vector logVect=new Vector(chD.getCacheDetails(true).CacheLogs.size());
+					for (int i=0; i<chD.getCacheDetails(true).CacheLogs.size(); i++) {
 						Hashtable logs=new Hashtable();
-						String log=STRreplace.replace(chD.getExistingDetails().CacheLogs.getLog(i).toHtml(),"http://www.geocaching.com/images/icons/","");
+						String log=STRreplace.replace(chD.getCacheDetails(true).CacheLogs.getLog(i).toHtml(),"http://www.geocaching.com/images/icons/","");
 						int posGt=log.indexOf('>'); // Find the icon which defines the type of log
 						if (posGt<0) {
 							logs.put("LOG",log);
@@ -181,7 +181,7 @@
 					}
 					tpl.setParam("LOGS",logVect);
 					if (!chD.is_available()) tpl.setParam("UNAVAILABLE","1");
-					if (!chD.getExistingDetails().Hints.equals("null"))tpl.setParam("HINT",Common.rot13(chD.getExistingDetails().Hints));
+					if (!chD.getCacheDetails(true).Hints.equals("null"))tpl.setParam("HINT",Common.rot13(chD.getCacheDetails(true).Hints));
 
 					if (chD.hasAddiWpt()) {
 						Vector addiVect=new Vector(chD.addiWpts.size());
@@ -192,7 +192,7 @@
 							addis.put("NAME",ch.getCacheName());
 							addis.put("LATLON",ch.LatLon);
 							addis.put("IMG","<img src=\""+CacheType.typeImageForId(ch.getType())+"\">");
-							addis.put("LONGDESC",ch.getExistingDetails().LongDescription); // Do we need to treat longDesc as above ?
+							addis.put("LONGDESC",ch.getCacheDetails(true).LongDescription); // Do we need to treat longDesc as above ?
 							addiVect.add(addis);
 						}
 						tpl.setParam("ADDIS",addiVect);

Modified: trunk/src/CacheWolf/SolverPanel.java
===================================================================
--- trunk/src/CacheWolf/SolverPanel.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/SolverPanel.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -67,7 +67,7 @@
 	 */
 	public void setInstructions(CacheHolder pCh) {
 		if (pCh != null) {
-	        this.setInstructions(pCh.getFreshDetails().getSolver());
+	        this.setInstructions(pCh.getCacheDetails(false).getSolver());
 	        if (!pCh.hasSameMainCache(ch)) {
 		        this.clearOutput();
 	        }

Modified: trunk/src/CacheWolf/TravelbugJourneyScreen.java
===================================================================
--- trunk/src/CacheWolf/TravelbugJourneyScreen.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/TravelbugJourneyScreen.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -67,8 +67,8 @@
 			ch=cacheDB.get(curCacheNo);
 			cache=MyLocale.getMsg(6022,": Current cache: ")+ch.getWayPoint()+" - "+ch.getCacheName();
 			waypoint=ch.getWayPoint();
-			chD=ch.getExistingDetails();
-			tblSrcCache=ch.getExistingDetails().Travelbugs;
+			chD=ch.getCacheDetails(true);
+			tblSrcCache=ch.getCacheDetails(true).Travelbugs;
 		}
 		title="Travelbugs"+cache;
 		tcTbJourneyList=new tbListControl();

Modified: trunk/src/CacheWolf/exp/ExploristExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/ExploristExporter.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/exp/ExploristExporter.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -193,7 +193,7 @@
 	 * @return formated cache data
 	 */
 	public String record(CacheHolder ch) {
-		CacheHolderDetail det = ch.getExistingDetails();
+		CacheHolderDetail det = ch.getCacheDetails(true);
 		/*
 		static protected final int GC_AW_PARKING = 50;
 		static protected final int GC_AW_STAGE_OF_MULTI = 51;

Modified: trunk/src/CacheWolf/exp/GPXExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/GPXExporter.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/exp/GPXExporter.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -52,7 +52,7 @@
 
 	public String record(CacheHolder ch, String lat, String lon, int counter) {
 		StringBuffer strBuf = new StringBuffer(1000);
-		CacheHolderDetail det = ch.getExistingDetails();
+		CacheHolderDetail det = ch.getCacheDetails(true);
 		try{
 			strBuf.append("  <wpt lat=\""+lat+"\" lon=\""+lon+"\">\r\n");
 

Modified: trunk/src/CacheWolf/exp/GpxExportNg.java
===================================================================
--- trunk/src/CacheWolf/exp/GpxExportNg.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/exp/GpxExportNg.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -1,5 +1,6 @@
 package CacheWolf.exp;
 
+import CacheWolf.Attribute;
 import CacheWolf.CWPoint;
 import CacheWolf.CacheHolder;
 import CacheWolf.CacheSize;
@@ -11,6 +12,7 @@
 import CacheWolf.LogList;
 import CacheWolf.MyLocale;
 import CacheWolf.SafeXML;
+import CacheWolf.Travelbug;
 import CacheWolf.utils.FileBugfix;
 
 import com.stevesoft.ewe_pat.Regex;
@@ -511,7 +513,7 @@
 			return "";
 
 		StringBuffer ret = new StringBuffer();
-		ch.getFreshDetails();
+		ch.getCacheDetails(true);
 
 		try {
 			ret.append(formatCompact(ch));
@@ -589,15 +591,15 @@
 		if (!ch.isCustomWpt()) {
 			if (exportIds == WPNAME_ID_SMART && exportStyle == STYLE_GPX_COMPACT) {
 				if (ch.isAddiWpt()) {
-					ret.append("    <cmt>".concat(SafeXML.cleanGPX(ch.getCacheName() + " " + ch.getFreshDetails().LongDescription)).concat("</cmt>".concat(newLine)));
+					ret.append("    <cmt>".concat(SafeXML.cleanGPX(ch.getCacheName() + " " + ch.getCacheDetails(true).LongDescription)).concat("</cmt>".concat(newLine)));
 				} else {
-					ret.append("    <cmt>".concat(SafeXML.cleanGPX(ch.getCacheName() + " " + Common.rot13(ch.getFreshDetails().Hints))).concat("</cmt>".concat(newLine)));
+					ret.append("    <cmt>".concat(SafeXML.cleanGPX(ch.getCacheName() + " " + Common.rot13(ch.getCacheDetails(true).Hints))).concat("</cmt>".concat(newLine)));
 				}
 			} else if (exportIds == WPNAME_NAME_SMART) {
 				// TBD
 			} else {
 				if (ch.isAddiWpt()) {
-					ret.append("    <cmt>".concat(SafeXML.cleanGPX(ch.getFreshDetails().LongDescription)).concat("</cmt>".concat(newLine)));
+					ret.append("    <cmt>".concat(SafeXML.cleanGPX(ch.getCacheDetails(true).LongDescription)).concat("</cmt>".concat(newLine)));
 				} // caches have no <cmt> in gc.com PQs
 			}
 		}
@@ -614,7 +616,7 @@
 
 		if (exportStyle != STYLE_GPX_COMPACT) {
 			if (!ch.isCustomWpt()) {
-				ret.append("    <url>".concat(ch.details.URL).concat("</url>".concat(newLine)));
+				ret.append("    <url>".concat(ch.getCacheDetails(true).URL).concat("</url>".concat(newLine)));
 				ret.append("    <urlname>".concat(SafeXML.cleanGPX(ch.getCacheName())).concat("</urlname>".concat(newLine)));
 			}
 		}
@@ -658,29 +660,71 @@
 		.concat("      <groundspeak:container>").concat(CacheSize.cw2ExportString(ch.getCacheSize())).concat("</groundspeak:container>".concat(newLine))
 		.concat("      <groundspeak:difficulty>").concat(CacheTerrDiff.shortDT(ch.getHard())).concat("</groundspeak:difficulty>".concat(newLine))
 		.concat("      <groundspeak:terrain>").concat(CacheTerrDiff.shortDT(ch.getTerrain())).concat("</groundspeak:terrain>".concat(newLine))
-		.concat("      <groundspeak:country>").concat(SafeXML.cleanGPX(ch.details.Country)).concat("</groundspeak:country>".concat(newLine))
-		.concat("      <groundspeak:state>").concat(SafeXML.cleanGPX(ch.details.State)).concat("</groundspeak:state>".concat(newLine))
+		.concat("      <groundspeak:country>").concat(SafeXML.cleanGPX(ch.getCacheDetails(true).Country)).concat("</groundspeak:country>".concat(newLine))
+		.concat("      <groundspeak:state>").concat(SafeXML.cleanGPX(ch.getCacheDetails(true).State)).concat("</groundspeak:state>".concat(newLine))
 		.concat("      <groundspeak:short_description html=\"").concat(ch.is_HTML() ? TRUE : FALSE).concat("\"></groundspeak:short_description>".concat(newLine))
 		.concat("      <groundspeak:long_description html=\"").concat(ch.is_HTML() ? TRUE : FALSE).concat("\">").concat(SafeXML.cleanGPX(formatLongDescription(ch))).concat("</groundspeak:long_description>".concat(newLine))
-		.concat("      <groundspeak:encoded_hints>").concat(SafeXML.cleanGPX(Common.rot13(ch.details.Hints))).concat("</groundspeak:encoded_hints>".concat(newLine))
+		.concat("      <groundspeak:encoded_hints>").concat(SafeXML.cleanGPX(Common.rot13(ch.getCacheDetails(true).Hints))).concat("</groundspeak:encoded_hints>".concat(newLine))
+		.concat("      <groundspeak:attributes>".concat(newLine))
+		.concat(formatAttributes(ch))
+		.concat("      </groundspeak:attributes>".concat(newLine))
 		.concat("      <groundspeak:logs>".concat(newLine))
 		.concat(formatLogs(ch))
 		.concat("      </groundspeak:logs>".concat(newLine))
 		.concat("      <groundspeak:travelbugs>".concat(newLine))
-//		.concat(formatTbs(ch))
+		.concat(formatTbs(ch))
 		.concat("      </groundspeak:travelbugs>".concat(newLine))
 		.concat("    </groundspeak:cache>".concat(newLine));
-
 	}
-
-
 	/**
+	 * 
+	 */
+	private String formatTbs(CacheHolder ch) {
+		StringBuffer ret = new StringBuffer();
+		Travelbug Tb;
+		for (int i = 0; i < ch.getCacheDetails(true).Travelbugs.size(); i++) {
+			Tb=ch.getCacheDetails(true).Travelbugs.getTB(i);
+			ret.append("        <groundspeak:travelbug id=\"").
+			append(Integer.toString(i)).
+			append("\" ref=\"TB\">").
+			// append(newLine).
+			// append("          <groundspeak:name>").
+			append("<groundspeak:name>").
+			append(SafeXML.cleanGPX(Tb.getName())).
+			append("</groundspeak:name>").
+			// append(newLine).
+			// append("        </groundspeak:travelbug>\r\n");
+			append("</groundspeak:travelbug>\r\n");
+		}
+		return ret.toString();
+	}
+	/**
+	 * 
+	 */
+	private String formatAttributes(CacheHolder ch){
+		StringBuffer ret = new StringBuffer();
+		Attribute attrib;
+		for (int i = 0; i < ch.getCacheDetails(true).attributes.count(); i++) {
+			// <groundspeak:attribute id="X" inc="Y">text f?r X</groundspeak:attribute>
+			attrib=ch.getCacheDetails(true).attributes.getAttribute(i);
+			ret.append("        <groundspeak:attribute id=\"").
+			append(attrib.getGCId()).
+			append("\" inc=\"").
+			append(attrib.getInc()).
+			append("\">").
+			append(attrib.getGCText()).
+			append("</groundspeak:attribute>").
+			append(newLine);
+		}
+		return ret.toString();
+	}
+	/**
 	 * format cache logs as found in a gc.com GPX file
 	 * @param ch CacheHolder containing the logs
 	 * @return formatted logs or empty string if no logs are present
 	 */
-	public String formatLogs(CacheHolder ch) {
-		LogList logs = ch.getFreshDetails().CacheLogs;
+	private String formatLogs(CacheHolder ch) {
+		LogList logs = ch.getCacheDetails(true).CacheLogs;
 		StringBuffer ret = new StringBuffer();
 		int exportlogs;
 		if (exportStyle == STYLE_GPX_PQLIKE && maxLogs < logs.size())
@@ -688,11 +732,11 @@
 		else {exportlogs = logs.size();}
 		if (exportStyle == STYLE_GPX_MYFINDS) {
 			// only own log
-			if (ch.details.OwnLogId.equals("")) 
+			if (ch.getCacheDetails(true).OwnLogId.equals("")) 
 				return "";
-			if(ch.details.OwnLog == null) 
+			if(ch.getCacheDetails(true).OwnLog == null) 
 				return "";
-			addLog(ch.details.OwnLogId, ch.details.OwnLog, finderid ,ret);
+			addLog(ch.getCacheDetails(true).OwnLogId, ch.getCacheDetails(true).OwnLog, finderid ,ret);
 		}
 		else {
 			for (int i = 0; i < exportlogs; i++) {
@@ -719,7 +763,7 @@
 	 * format the header of the GPX file
 	 * @return
 	 */
-	public String formatHeader() {
+	private String formatHeader() {
 		//FIXME: extend profile to add <bounds minlat=\"50.91695\" minlon=\"6.876383\" maxlat=\"50.935183\" maxlon=\"6.918817\" />
 		//Global.getProfile().getSourroundingArea(false);
 		Transformer trans = new Transformer(true);
@@ -742,13 +786,13 @@
 	 * @param ch CacheHolder to format
 	 * @return formatted output
 	 */
-	public String formatLongDescription(CacheHolder ch) {
+	private String formatLongDescription(CacheHolder ch) {
 		if (ch.isAddiWpt() || ch.isCustomWpt()) {
-			return ch.details.LongDescription;
+			return ch.getCacheDetails(true).LongDescription;
 		} else {
 			StringBuffer ret = new StringBuffer();
 			String delim = "";
-			ret.append(ch.details.LongDescription);
+			ret.append(ch.getCacheDetails(true).LongDescription);
 			if (ch.is_HTML()) {
 				delim = "<br />";
 			} else {
@@ -772,7 +816,7 @@
 					trans.add(new Regex("@@ADDIDELIM@@", delim));
 					trans.add(new Regex("@@ADDILAT@@",formatAddiLatLon(addi.pos)));
 					trans.add(new Regex("@@ADDILON@@", ""));
-					trans.add(new Regex("@@ADDILONG@@",addi.getFreshDetails().LongDescription));
+					trans.add(new Regex("@@ADDILONG@@",addi.getCacheDetails(true).LongDescription));
 					ret.append(trans.replaceAll(GPXADDIINMAIN));
 				}
 				ret.append(delim).append(newLine);
@@ -786,7 +830,7 @@
 	 * @param image name of the image to display
 	 * @return log type. will default to "Write note" for unknown logtypes
 	 */
-	public String image2TypeText(String image) {
+	private String image2TypeText(String image) {
 		if (image.equals("icon_smile.gif"))
 			return "Found it";
 		if (image.equals("icon_sad.gif"))
@@ -925,13 +969,12 @@
 		/**
 		 * set up the form / dialog
 		 */
-		public GpxExportNgForm(boolean hasGarminMap, boolean hasBitmaps, boolean hasGpsbabel) {
+		private GpxExportNgForm(boolean hasGarminMap, boolean hasBitmaps, boolean hasGpsbabel) {
 
 			this.hasBitmapsFrm = hasBitmaps;
 			this.hasGarminMapFrm = hasGarminMap;
 			this.hasGpsbabelFrm = hasGpsbabel;
 
-			// TODO: get/set defaults from profile
 			chosenStyle = Global.getProfile().getGpxStyle();
 			chosenTarget = Global.getProfile().getGpxTarget();
 			chosenIds = Global.getProfile().getGpxId();
@@ -1202,7 +1245,7 @@
 		 * amount of data to be exported
 		 * @return 0 Compact, 1 PQ like, 2 MyFinds
 		 */
-		public int getExportStyle () {
+		private int getExportStyle () {
 			return chosenStyle;
 		}
 
@@ -1210,7 +1253,7 @@
 		 * style of waypoint identifiers
 		 * @return 0 Classic IDs, 1 Smart IDs, 3 Smart Names (should only be used with gpsbabel)
 		 */
-		public int getWpNameStyle() {
+		private int getWpNameStyle() {
 			return chosenIds;
 		}
 
@@ -1218,7 +1261,7 @@
 		 * what kind of output should be generated
 		 * @return 0 single file, 1 separate files, 2 POI (GPI) files
 		 */
-		public int getOutputTarget() {
+		private int getOutputTarget() {
 			return chosenTarget;
 		}
 
@@ -1227,7 +1270,7 @@
 		 *
 		 * @return true for GPSr transfer, false otherwise
 		 */
-		public boolean getSendToGarmin() {
+		private boolean getSendToGarmin() {
 			return cbSendToGarmin.state;
 		}
 
@@ -1236,7 +1279,7 @@
 		 *
 		 * @return true if user wants custom icons, false otherwise
 		 */
-		public boolean getCustomIcons() {
+		private boolean getCustomIcons() {
 			return cbCustomIcons.state;
 		}
 
@@ -1245,7 +1288,7 @@
 		 *
 		 * @return number of logs to export
 		 */
-		public int getMaxLogs() {
+		private int getMaxLogs() {
 			return Convert.parseInt(ibMaxLogs.getText());
 		}
 
@@ -1254,7 +1297,7 @@
 		 *
 		 * @return prefix for separate file export
 		 */
-		public String getPrefix() {
+		private String getPrefix() {
 			return ibPrefix.getText();
 		}
 

Modified: trunk/src/CacheWolf/exp/HTMLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/HTMLExporter.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/exp/HTMLExporter.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -88,7 +88,7 @@
 						Global.getPref().log("HTMLExport: skipping export of incomplete waypoint "+ch.getWayPoint());
 						continue;
 					}
-					det=ch.getCacheDetails(false,false);
+					det=ch.getCacheDetails(true);
 					varParams = new Hashtable();
 					varParams.put("TYPE", CacheType.type2TypeTag(ch.getType())); //<type>
 					varParams.put("SYM", CacheType.type2SymTag(ch.getType())); //<sym>

Modified: trunk/src/CacheWolf/exp/KMLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/KMLExporter.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/exp/KMLExporter.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -271,7 +271,7 @@
 
 	public String record(CacheHolder ch, String lat, String lon){
 		StringBuffer strBuf = new StringBuffer(200);
-		CacheHolderDetail det = ch.getExistingDetails();
+		CacheHolderDetail det = ch.getCacheDetails(true);
 
 		strBuf.append("   <Placemark>\r\n");
 		if (det.URL != null){

Modified: trunk/src/CacheWolf/exp/LocExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/LocExporter.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/exp/LocExporter.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -57,7 +57,7 @@
 			if ( !Global.getPref().addDetailsToWaypoint ) {
 				strBuf.append( getShortDetails( ch ) );
 			}
-			CacheHolderDetail det = ch.getExistingDetails();
+			CacheHolderDetail det = ch.getCacheDetails(true);
 			if ( (!det.Hints.equals("null")) && (det.Hints.length() > 0) ) {
 				strBuf.append(":");
 				strBuf.append( simplifyString(Common.rot13(det.Hints)) );

Modified: trunk/src/CacheWolf/exp/MSARCSVExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/MSARCSVExporter.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/exp/MSARCSVExporter.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -30,7 +30,7 @@
 		str.append("\"" + CacheSize.cw2ExportString(ch.getCacheSize()) + "\";");
 		str.append("\"" + ch.getWayPoint() + "\";");
 		str.append("\"" + ch.getDateHidden() + "\";");
-		str.append("\"" + ch.getExistingDetails().URL + "\"\r\n");
+		str.append("\"" + ch.getCacheDetails(true).URL + "\"\r\n");
 
 		return str.toString();
 	}

Modified: trunk/src/CacheWolf/exp/SpoilerPOIExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/SpoilerPOIExporter.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/exp/SpoilerPOIExporter.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -59,11 +59,11 @@
 		if (ch.isAddiWpt()) return null;
 		
 		// First check, if there a any pictures in the db for the wpt
-		ch.getCacheDetails(false);
+		ch.getCacheDetails(true);
 		if (! ch.detailsLoaded()) return null;
-		if (ch.details.images.size() == 0) return null;
+		if (ch.getCacheDetails(true).images.size() == 0) return null;
 		
-		images = ch.details.images.getDisplayImages(ch.getWayPoint());
+		images = ch.getCacheDetails(true).images.getDisplayImages(ch.getWayPoint());
 		picCounter = 0;
 		for (int i=0; i < images.size(); i++ ) {
 			filename = images.get(i).getFilename();
@@ -81,8 +81,8 @@
 			strBuf.append("<wpt lat=\"" + lat + "\" lon=\"" + lon + "\">\r\n");
 			strBuf.append("  <name>Sp " + picCounter + ": " + SafeXML.cleanGPX(ch.cacheName) + "</name>\r\n");
 			strBuf.append("  <cmt>\r\n");
-			if (ch.details.Hints.length()> 0){
-				strBuf.append("  Hint: " + SafeXML.cleanGPX(Common.rot13(ch.details.Hints)) + "\r\n");
+			if (ch.getCacheDetails(true).Hints.length()> 0){
+				strBuf.append("  Hint: " + SafeXML.cleanGPX(Common.rot13(ch.getCacheDetails(true).Hints)) + "\r\n");
 			}
 			if (comment != null){
 				strBuf.append("  Comment: " + SafeXML.cleanGPX(SafeXML.cleanback(comment)) + "\r\n");

Modified: trunk/src/CacheWolf/exp/TPLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/TPLExporter.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/exp/TPLExporter.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -164,18 +164,14 @@
 	}
 
 	public void doIt(){
-		CacheHolderDetail det;
-		CacheHolder ch;
+
 		ProgressBarForm pbf = new ProgressBarForm();
 		ewe.sys.Handle h = new ewe.sys.Handle();
 		int counter = cacheDB.countVisible();
 		pbf.showMainTask = false;
 		pbf.setTask(h,"Exporting ...");
 		pbf.exec();
-		// Vm.gc(); // all this doesn't really work :-(
-		// System.runFinalization();
-		// Vm.gc();
-		//Vm.debug("v: "+Vm.countObjects(true));
+
 		String selbstLaute="aeiouAEIOU";
 		StringBuffer lower=new StringBuffer(26);// region/language dependent ?
 		for (int i=97; i<=122; i++ ) {
@@ -183,11 +179,8 @@
 		}
 		String mitLauteKlein=lower.toString();
 		try {
-			Vector cache_index = new Vector(); // declare variables inside try {} -> in case of OutOfMemoryError, they can be garbage collected - anyhow it doesn't work :-(
-			Hashtable varParams;
-			TplFilter myFilter;
+			TplFilter myFilter = new TplFilter();			
 			Hashtable args = new Hashtable();
-			myFilter = new TplFilter();
 			//args.put("debug", "true");
 			args.put("filename", tplFile);
 			args.put("case_sensitive", "true");
@@ -202,14 +195,16 @@
 			if(fc.execute() == FormBase.IDCANCEL) return;
 			File saveTo = fc.getChosenFile();
 			pref.setExportPath(expName, saveTo.getPath());
+			
 			Time nowdate = new Time();
 			nowdate = nowdate.setFormat("yyyy-MM-dd");
 			Time nowtime = new Time();
 			nowtime = nowtime.setFormat("HH:mm");
 
+			Vector cache_index = new Vector(); 			
 			for(int i = 0; i<counter;i++){
-				ch = cacheDB.get(i);
-				det = ch.getExistingDetails();
+				CacheHolder ch = cacheDB.get(i);
+				CacheHolderDetail det = ch.getCacheDetails(true);
 				h.progress = (float)i/(float)counter;
 				h.changed();
 				if(ch.isVisible()){
@@ -217,7 +212,7 @@
 					try {
 						Regex dec = new Regex("[,.]",myFilter.decSep);
 						if (myFilter.badChars != null) rex = new Regex("["+myFilter.badChars+"]","");
-						varParams = new Hashtable();
+						Hashtable varParams = new Hashtable();
 						varParams.put("TYPE", CacheType.type2TypeTag(ch.getType())); //<type>
 						varParams.put("SYM", CacheType.type2SymTag(ch.getType())); //<sym>
 						varParams.put("GSTYPE", CacheType.type2GSTypeTag(ch.getType())); //<groundspeak:type>

Modified: trunk/src/CacheWolf/imp/GPXImporter.java
===================================================================
--- trunk/src/CacheWolf/imp/GPXImporter.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/imp/GPXImporter.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -201,7 +201,7 @@
 		}
 		
 		if (name.equals("link")&& inWpt){
-			holder.getFreshDetails().URL = atts.getValue("href");
+			holder.getCacheDetails(false).URL = atts.getValue("href");
 			return;
 		}
 
@@ -260,8 +260,8 @@
 		}	
 		if (name.equals("attribute")) {
 			int id = Integer.parseInt(atts.getValue("id"));
-			holder.getFreshDetails().attributes.add(id,atts.getValue("inc")); // from GC!
-			holder.setAttribsAsBits(holder.getFreshDetails().attributes.getAttribsAsBits());
+			holder.getCacheDetails(false).attributes.add(id,atts.getValue("inc")); // from GC!
+			holder.setAttribsAsBits(holder.getCacheDetails(false).attributes.getAttribsAsBits());
 			return;
 		}		
 	}
@@ -289,13 +289,13 @@
 				return;
 			}
 			if (name.equals("groundspeak:log") || name.equals("log") || name.equals("terra:log") ) {
-				holder.getFreshDetails().CacheLogs.add(new Log(logIcon,logDate,logFinder,logData));
+				holder.getCacheDetails(false).CacheLogs.add(new Log(logIcon,logDate,logFinder,logData));
 				if((logIcon.equals("icon_smile.gif") || logIcon.equals("icon_camera.gif") || logIcon.equals("icon_attended.gif")) && 
 						  (logFinder.equalsIgnoreCase(pref.myAlias) || (pref.myAlias2.length()>0 && logFinder.equalsIgnoreCase(pref.myAlias2)))) {
 							holder.setCacheStatus(logDate);
 							holder.setFound(true);
-							holder.getFreshDetails().OwnLogId = logId;
-							holder.getFreshDetails().OwnLog = new Log(logIcon,logDate,logFinder,logData);
+							holder.getCacheDetails(false).OwnLogId = logId;
+							holder.getCacheDetails(false).OwnLog = new Log(logIcon,logDate,logFinder,logData);
 				}
 				return;
 			}
@@ -308,7 +308,7 @@
 			//Vm.debug("here ?!?!?");
 			//Vm.debug("could be new!!!!");
 			if (index == -1){
-				holder.setNoFindLogs(holder.getFreshDetails().CacheLogs.countNotFoundLogs());
+				holder.setNoFindLogs(holder.getCacheDetails(false).CacheLogs.countNotFoundLogs());
 				holder.setNew(true);
 				cacheDB.add(holder);
 				// don't spider additional waypoints, so check
@@ -331,15 +331,15 @@
 							String text;
 							String orig;
 							String imgName;
-							orig = holder.getFreshDetails().LongDescription;
+							orig = holder.getCacheDetails(false).LongDescription;
 							Extractor ex = new Extractor(orig, "<img src=\"", ">", 0, false);
 							text = ex.findNext();
 							int num = 0;
 							while(ex.endOfSearch() == false && spiderOK){
 								//Vm.debug("Replacing: " + text);
-								if (num >= holder.getFreshDetails().images.size())break;
-								imgName = holder.getFreshDetails().images.get(num).getTitle();
-								holder.getFreshDetails().LongDescription = replace(holder.getFreshDetails().LongDescription, text, "[[Image: " + imgName + "]]");
+								if (num >= holder.getCacheDetails(false).images.size())break;
+								imgName = holder.getCacheDetails(false).images.get(num).getTitle();
+								holder.getCacheDetails(false).LongDescription = replace(holder.getCacheDetails(false).LongDescription, text, "[[Image: " + imgName + "]]");
 								num++;
 								text = ex.findNext();
 							}
@@ -354,7 +354,7 @@
 				CacheHolder oldCh= cacheDB.get(index);
 				// Preserve images: Copy images from old cache version because here we didn't add
 				// any image information to the holder object.
-				holder.getFreshDetails().images = oldCh.getExistingDetails().images;
+				holder.getCacheDetails(false).images = oldCh.getCacheDetails(true).images;
 				oldCh.update(holder);
 				oldCh.save();
 			}
@@ -374,7 +374,7 @@
 
 		if (name.equals("groundspeak:name")&& inBug) {
 			Travelbug tb=new Travelbug(strData);
-			holder.getFreshDetails().Travelbugs.add(tb);
+			holder.getCacheDetails(false).Travelbugs.add(tb);
 			holder.setHas_bugs(true);
 			return;
 		}
@@ -419,13 +419,13 @@
 			return;
 		}
 		if (name.equals("url")&& inWpt){
-			holder.getFreshDetails().URL = strData;
+			holder.getCacheDetails(false).URL = strData;
 			return;
 		}
 		
 		// Text for additional waypoints, no HTML
 		if (name.equals("cmt")&& inWpt){
-			holder.getFreshDetails().LongDescription = strData;
+			holder.getCacheDetails(false).LongDescription = strData;
 			holder.setHTML(false);
 			return;
 		}
@@ -470,11 +470,11 @@
 			return;
 		}
 		if (name.equals("groundspeak:country")|| name.equals("country")){
-			holder.getFreshDetails().Country = strData;
+			holder.getCacheDetails(false).Country = strData;
 			return;
 		}
 		if (name.equals("groundspeak:state")|| name.equals("state")){
-			holder.getFreshDetails().State = strData;
+			holder.getCacheDetails(false).State = strData;
 			return;
 		}
 		if (name.equals("terra:size")){
@@ -482,25 +482,25 @@
 		}
 
 		if (name.equals("groundspeak:short_description")|| name.equals("summary")) {
-			if (holder.is_HTML())	holder.getFreshDetails().LongDescription =SafeXML.cleanback(strData)+"<br>"; // <br> needed because we also use a <br> in SpiderGC. Without it the comparison in ch.update fails
-			else holder.getFreshDetails().LongDescription =strData+"\n";
+			if (holder.is_HTML())	holder.getCacheDetails(false).LongDescription =SafeXML.cleanback(strData)+"<br>"; // <br> needed because we also use a <br> in SpiderGC. Without it the comparison in ch.update fails
+			else holder.getCacheDetails(false).LongDescription =strData+"\n";
 			return;
 		}
 
 		if (name.equals("groundspeak:long_description")|| name.equals("description")|| name.equals("terra:description")) {
-			if (holder.is_HTML())	holder.getFreshDetails().LongDescription +=SafeXML.cleanback(strData);
-			else holder.getFreshDetails().LongDescription +=strData;
+			if (holder.is_HTML())	holder.getCacheDetails(false).LongDescription +=SafeXML.cleanback(strData);
+			else holder.getCacheDetails(false).LongDescription +=strData;
 			return;
 		}
 		if (name.equals("groundspeak:encoded_hints") || name.equals("hints")) {
-			holder.getFreshDetails().Hints = Common.rot13(strData);
+			holder.getCacheDetails(false).Hints = Common.rot13(strData);
 			return;
 		}
 		
 		if (name.equals("terra:hint")) {
 			// remove "&lt;br&gt;<br>" from the end
 			int indexTrash = strData.indexOf("&lt;br&gt;<br>");
-			if (indexTrash > 0)	holder.getFreshDetails().Hints = Common.rot13(strData.substring(0,indexTrash));
+			if (indexTrash > 0)	holder.getCacheDetails(false).Hints = Common.rot13(strData.substring(0,indexTrash));
 			return;
 		}
 
@@ -574,15 +574,15 @@
 		if (imgSpider == null) imgSpider = new SpiderGC(pref, profile, false);
 		
 		if (fromTC) {
-				imgSpider.getImages(holder.getFreshDetails().LongDescription, holder.getFreshDetails());
+				imgSpider.getImages(holder.getCacheDetails(false).LongDescription, holder.getCacheDetails(false));
 		}
 		else {
 			addr = "http://www.geocaching.com/seek/cache_details.aspx?wp=" + holder.getWayPoint() ;
 			//Vm.debug(addr + "|");
 			cacheText = SpiderGC.fetch(addr);
-			imgSpider.getImages(cacheText, holder.getFreshDetails());
+			imgSpider.getImages(cacheText, holder.getCacheDetails(false));
 			try {
-				imgSpider.getAttributes(cacheText, holder.getFreshDetails());
+				imgSpider.getAttributes(cacheText, holder.getCacheDetails(false));
 			} catch (Exception e) {
 				if (Global.getPref().debug) Global.getPref().log("unable to fetch attrivbutes for"+holder.getWayPoint(), e);
 			}

Modified: trunk/src/CacheWolf/imp/LOCXMLImporter.java
===================================================================
--- trunk/src/CacheWolf/imp/LOCXMLImporter.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/imp/LOCXMLImporter.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -121,7 +121,7 @@
 		}
 
 		if (name.equals("link")) {
-			holder.getFreshDetails().URL = strData;
+			holder.getCacheDetails(false).URL = strData;
 			return;
 		}
 	}

Modified: trunk/src/CacheWolf/imp/OCXMLImporter.java
===================================================================
--- trunk/src/CacheWolf/imp/OCXMLImporter.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/imp/OCXMLImporter.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -380,7 +380,7 @@
 		}
 		if(name.equals("type")){
 			holder.setType(CacheType.ocType2CwType(atts.getValue("id")));
-			holder.getFreshDetails().attributes.clear();
+			holder.getCacheDetails(false).attributes.clear();
 			return;
 		}
 		if(name.equals("status")){
@@ -415,8 +415,8 @@
 		
 		if (name.equals("attribute")) {
 			int id = Integer.parseInt(atts.getValue("id"));
-			holder.getFreshDetails().attributes.add(id);
-			holder.setAttribsAsBits(holder.getFreshDetails().attributes.getAttribsAsBits());
+			holder.getCacheDetails(false).attributes.add(id);
+			holder.setAttribsAsBits(holder.getCacheDetails(false).attributes.getAttribsAsBits());
 			return;
 		}
 
@@ -488,12 +488,12 @@
 			}
 			// clear data (picture, logs) if we do a complete Update
 			if (incUpdate == false){
-				holder.getFreshDetails().CacheLogs.clear();
-				holder.getFreshDetails().images.clear();
+				holder.getCacheDetails(false).CacheLogs.clear();
+				holder.getCacheDetails(false).images.clear();
 			}
 
 			// save all
-			holder.getFreshDetails().hasUnsavedChanges = true; // this makes CachHolder save the details in case that they are unloaded from memory
+			holder.getCacheDetails(false).hasUnsavedChanges = true; // this makes CachHolder save the details in case that they are unloaded from memory
 			// chD.saveCacheDetails(profile.dataDir);
 			// profile.saveIndex(pref,Profile.NO_SHOW_PROGRESS_BAR); // this is done after .xml is completly processed
 			return;
@@ -502,7 +502,7 @@
 			holder = getHolder(strData); // Allocate a new CacheHolder object
 			holder.setOcCacheID(strData);
 			String ocSeekUrl = new String("http://" + hostname + "/viewcache.php?cacheid=");
-			holder.getFreshDetails().URL = ocSeekUrl + cacheID;
+			holder.getCacheDetails(false).URL = ocSeekUrl + cacheID;
 			return;
 		}
 
@@ -538,7 +538,7 @@
 			return;
 		}
 		if (name.equals("country")){
-			holder.getFreshDetails().Country = strData;
+			holder.getCacheDetails(false).Country = strData;
 			return;
 		}
 	}
@@ -553,7 +553,7 @@
 				imgRegexUrl.setIgnoreCase(true);
 				int descIndex=0;
 				int numDownloaded=1;
-				while (imgRegexUrl.searchFrom(holder.getFreshDetails().LongDescription, descIndex)) { // "img" found
+				while (imgRegexUrl.searchFrom(holder.getCacheDetails(false).LongDescription, descIndex)) { // "img" found
 					imgTag=imgRegexUrl.stringMatched(1); // (1) enthlt das gesamte <img ...>-tag
 					fetchUrl=imgRegexUrl.stringMatched(2); // URL in Anfhrungszeichen in (2) falls ohne in (3) Ergebnis ist auf jeden Fall ohne Anfhrungszeichen
 					if (fetchUrl==null) { fetchUrl=imgRegexUrl.stringMatched(3); }
@@ -575,7 +575,7 @@
 					getPic(fetchUrl, imgAltText);
 				}
 			}
-			holder.getFreshDetails().hasUnsavedChanges = true;
+			holder.getCacheDetails(false).hasUnsavedChanges = true;
 			return;
 		}
 
@@ -592,17 +592,17 @@
 			if (holder.is_HTML())	linebraek = "<br>\n";
 			else 					linebraek = "\n";
 
-			holder.getFreshDetails().LongDescription =              processingDescLang + ":" +  linebraek + strData;
+			holder.getCacheDetails(false).LongDescription =              processingDescLang + ":" +  linebraek + strData;
 			return;
 		}
 
 		if (name.equals("desc")){ // </desc>
-			if (holder.is_HTML())	holder.getFreshDetails().LongDescription +=SafeXML.cleanback(strData);
-			else holder.getFreshDetails().LongDescription +=strData;
+			if (holder.is_HTML())	holder.getCacheDetails(false).LongDescription +=SafeXML.cleanback(strData);
+			else holder.getCacheDetails(false).LongDescription +=strData;
 			return;
 		}
 		if (name.equals("hint")){
-			holder.getFreshDetails().Hints = Common.rot13(strData);
+			holder.getCacheDetails(false).Hints = Common.rot13(strData);
 			holder.setUpdated(true); // remark: this is used in "shortdesc" to decide weather the description should be appended or replaced
 			return;
 		}
@@ -623,7 +623,7 @@
 			ImageInfo imageInfo = new ImageInfo();
 			// add title
 			imageInfo.setTitle(picDesc);
-			holder.getFreshDetails().images.add(imageInfo);
+			holder.getCacheDetails(false).images.add(imageInfo);
 			try {
 				File ftest = new FileBugfix(profile.dataDir + fileName);
 				if (ftest.exists()){
@@ -688,21 +688,21 @@
 		if(name.equals("picture")){
 			//String fileName = holder.wayPoint + "_" + picUrl.substring(picUrl.lastIndexOf("/")+1);
 			getPic(picUrl,picTitle);
-			holder.getFreshDetails().hasUnsavedChanges = true; //saveCacheDetails(profile.dataDir);
+			holder.getCacheDetails(false).hasUnsavedChanges = true; //saveCacheDetails(profile.dataDir);
 			return;
 		}
 	}
 
 	private void endCacheLog(String name){
 		if (name.equals("cachelog")){ // </cachelog>
-			holder.getFreshDetails().CacheLogs.merge(new Log(logIcon, logDate, logFinder, logData, loggerRecommended));
+			holder.getCacheDetails(false).CacheLogs.merge(new Log(logIcon, logDate, logFinder, logData, loggerRecommended));
 			if((logFinder.toLowerCase().compareTo(user) == 0 || logFinder.equalsIgnoreCase(pref.myAlias2)) && logtype == 1) {
 						holder.setCacheStatus(logDate);
 						holder.setFound(true);
-						holder.getFreshDetails().OwnLogId = logId;
-						holder.getFreshDetails().OwnLog = new Log(logIcon, logDate, logFinder, logData, loggerRecommended);
+						holder.getCacheDetails(false).OwnLogId = logId;
+						holder.getCacheDetails(false).OwnLog = new Log(logIcon, logDate, logFinder, logData, loggerRecommended);
 			}
-			holder.getFreshDetails().hasUnsavedChanges = true; //chD.saveCacheDetails(profile.dataDir);
+			holder.getCacheDetails(false).hasUnsavedChanges = true; //chD.saveCacheDetails(profile.dataDir);
 			return;
 		}
 

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -525,10 +525,10 @@
 				ch.setNumRecommended(cacheInDB.getNumRecommended());
 				if (pref.downloadPics) {
 					// delete obsolete images when we have current set
-					CacheImages.cleanupOldImages(cacheInDB.getExistingDetails().images, ch.getFreshDetails().images);
+					CacheImages.cleanupOldImages(cacheInDB.getCacheDetails(true).images, ch.getCacheDetails(false).images);
 				} else {
 					// preserve images if not downloaded
-					ch.getFreshDetails().images = cacheInDB.getExistingDetails().images;
+					ch.getCacheDetails(false).images = cacheInDB.getCacheDetails(true).images;
 				}
 				cacheInDB.update(ch);
 				cacheInDB.save();
@@ -847,7 +847,7 @@
 		boolean save = false;
 		boolean is_archived_GC=false;
 		boolean is_found_GC=false;
-		CacheHolderDetail chd = ch.getFreshDetails();
+		CacheHolderDetail chd = ch.getCacheDetails(false);
 		if (spiderAllFinds) {
 			if(!ch.is_found()) { ch.setFound(true); save=true; numFoundUpdates+=1; ret=true;}
 			is_archived_GC=CacheDescription.indexOf(propArchived)!=-1;
@@ -1018,7 +1018,7 @@
 		if(!pref.checkLog) return false;
 		// String[] CacheDesc=mString.split(cacheDescrition,'\n');
 		Time lastLogCW = new Time();
-		String slastLogCW=ch.details.CacheLogs.getLog(0).getDate();
+		String slastLogCW=ch.getCacheDetails(true).CacheLogs.getLog(0).getDate();
 		if (slastLogCW.equals("")) return true; // or check cacheDescGC also no log?
 		lastLogCW.parse(slastLogCW,"yyyy-MM-dd");
 
@@ -1134,14 +1134,14 @@
 						// int logsz = chD.CacheLogs.size();
 						//chD.CacheLogs.clear();
 						ch.addiWpts.clear();
-						ch.getFreshDetails().images.clear();
+						ch.getCacheDetails(false).images.clear();
 
 						ch.setAvailable(!(completeWebPage.indexOf(p.getProp("cacheUnavailable")) >= 0));
 						ch.setArchived(completeWebPage.indexOf(p.getProp("cacheArchived")) >= 0);
 						//==========
 						// Logs first (for check early for break)
 						//==========
-						ch.getFreshDetails().setCacheLogs(getLogs(completeWebPage, ch.getFreshDetails()));
+						ch.getCacheDetails(false).setCacheLogs(getLogs(completeWebPage, ch.getCacheDetails(false)));
 						pref.log("Got logs");
 						// If the switch is set to not store found caches and we found the cache => return
 						if (ch.is_found() && doNotGetFound) {
@@ -1157,7 +1157,7 @@
 						ch.setLatLon(latLon);
 						pref.log("LatLon: " + ch.LatLon);
 
-						ch.getFreshDetails().setLongDescription(getLongDesc(completeWebPage));
+						ch.getCacheDetails(false).setLongDescription(getLongDesc(completeWebPage));
 						pref.log("Got description");
 
 						ch.setCacheName(SafeXML.cleanback(getName(completeWebPage)));
@@ -1167,16 +1167,16 @@
 						if (location.length() != 0) {
 							int countryStart = location.indexOf(",");
 							if (countryStart > -1) {
-								ch.getFreshDetails().Country = SafeXML.cleanback(location.substring(countryStart + 1).trim());
-								ch.getFreshDetails().State = SafeXML.cleanback(location.substring(0, countryStart).trim());
+								ch.getCacheDetails(false).Country = SafeXML.cleanback(location.substring(countryStart + 1).trim());
+								ch.getCacheDetails(false).State = SafeXML.cleanback(location.substring(0, countryStart).trim());
 							} else {
-								ch.getFreshDetails().Country = location.trim();
-								ch.getFreshDetails().State = "";
+								ch.getCacheDetails(false).Country = location.trim();
+								ch.getCacheDetails(false).State = "";
 							}
 							pref.log("Got location (country/state)");
 						} else {
-							ch.getFreshDetails().Country = "";
-							ch.getFreshDetails().State = "";
+							ch.getCacheDetails(false).Country = "";
+							ch.getCacheDetails(false).State = "";
 							pref.log("No location (country/state) found");
 						}
 
@@ -1187,8 +1187,8 @@
 						ch.setDateHidden(DateFormat.MDY2YMD(getDateHidden(completeWebPage)));
 						pref.log("Hidden: " + ch.getDateHidden());
 
-						ch.getFreshDetails().setHints(getHints(completeWebPage));
-						pref.log("Hints: " + ch.getFreshDetails().Hints);
+						ch.getCacheDetails(false).setHints(getHints(completeWebPage));
+						pref.log("Hints: " + ch.getCacheDetails(false).Hints);
 
 						ch.setCacheSize(CacheSize.gcSpiderString2Cw(getSize(completeWebPage)));
 						pref.log("Size: " + ch.getCacheSize());
@@ -1204,14 +1204,14 @@
 						//==========
 						// Bugs
 						//==========
-						if (fetchTBs) getBugs(ch.getFreshDetails(),completeWebPage);
-						ch.setHas_bugs(ch.getFreshDetails().Travelbugs.size()>0);
+						if (fetchTBs) getBugs(ch.getCacheDetails(false),completeWebPage);
+						ch.setHas_bugs(ch.getCacheDetails(false).Travelbugs.size()>0);
 						pref.log("Got TBs");
 						//==========
 						// Images
 						//==========
 						if(fetchImages){
-							getImages(completeWebPage, ch.getFreshDetails());
+							getImages(completeWebPage, ch.getCacheDetails(false));
 							pref.log("Got images");
 						}
 						//==========
@@ -1222,7 +1222,7 @@
 						//==========
 						// Attributes
 						//==========
-						getAttributes(completeWebPage, ch.getFreshDetails());
+						getAttributes(completeWebPage, ch.getCacheDetails(false));
 						pref.log("Got attributes");
 						//==========
 						// Last sync date
@@ -1526,7 +1526,7 @@
 		// First: Get current image object of waypoint before spidering images.
 		CacheHolder oldCh = Global.getProfile().cacheDB.get(chD.getParent().getWayPoint());
 		if (oldCh != null) {
-			lastImages = oldCh.getFreshDetails().images;
+			lastImages = oldCh.getCacheDetails(false).images;
 		}
 
 		//========
@@ -1795,7 +1795,7 @@
 					// Creating new CacheHolder, but accessing old cache.xml file
 					hd=new CacheHolder();
 					hd.setWayPoint(adWayPoint);
-					hd.getExistingDetails(); // Accessing Details reads file if not yet done
+					hd.getCacheDetails(true); // Accessing Details reads file if not yet done
 				} else {
 					hd=new CacheHolder();
 					hd.setWayPoint(adWayPoint);
@@ -1809,7 +1809,7 @@
 				if(typeRex.didMatch()) hd.setType(CacheType.gpxType2CwType("Waypoint|"+typeRex.stringMatched(1)));
 				rowBlock = exRowBlock.findNext();
 				descRex.search(rowBlock);
-				hd.getFreshDetails().setLongDescription(descRex.stringMatched(1));
+				hd.getCacheDetails(false).setLongDescription(descRex.stringMatched(1));
 				hd.setFound(is_found);
 				hd.setCacheSize(CacheSize.CW_SIZE_NOTCHOSEN);
 				hd.setHard(CacheTerrDiff.CW_DT_UNSET);

Modified: trunk/src/CacheWolf/myTableControl.java
===================================================================
--- trunk/src/CacheWolf/myTableControl.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/myTableControl.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -268,7 +268,7 @@
 
 		if (selectedItem == miOpenOnline){
 				ch = cacheDB.get(tbp.getSelectedCache());
-				CacheHolderDetail chD=ch.getCacheDetails(false, true);
+				CacheHolderDetail chD=ch.getCacheDetails(true);
 				if (chD != null) { callExternalProgram(pref.browser, chD.URL); }
 		} else
 
@@ -296,7 +296,7 @@
 					mainCache = ch.mainCache;
 				}
 				if (mainCache.isCacheWpt()) {
-					CacheHolderDetail chD=mainCache.getCacheDetails(false, true);
+					CacheHolderDetail chD=mainCache.getCacheDetails(true);
 						if (chD != null) {
 							String URL = "";
 							if (ch.isOC()) {

Modified: trunk/src/CacheWolf/navi/MovingMap.java
===================================================================
--- trunk/src/CacheWolf/navi/MovingMap.java	2010-03-10 21:16:45 UTC (rev 2516)
+++ trunk/src/CacheWolf/navi/MovingMap.java	2010-03-16 16:23:55 UTC (rev 2517)
@@ -2125,58 +2125,64 @@
 	}
 
 	public void onPenEvent(PenEvent ev) {
-		if (!mm.zoomingMode && ev.type == PenEvent.PEN_DOWN) {
-			saveMapLoc = new Point (ev.x, ev.y);
-		}
-		if (mm.zoomingMode && ev.type == PenEvent.PEN_DOWN) {
-			saveGpsIgnoreStatus = mm.dontUpdatePos;
-			mm.dontUpdatePos = true;
-			saveMapLoc = new Point (ev.x, ev.y);
-			paintingZoomArea = true;
-			mm.zoomingMode = true;
-		}		
-		if (!mm.zoomingMode && ev.type == PenEvent.PEN_DOWN && ev.modifiers == PenEvent.RIGHT_BUTTON) {
-			// context penHeld is fired on PDA but not on PC (Java)
-			penHeld(new Point (ev.x, ev.y));
-		}		
-		if (mm.zoomingMode && ev.type == PenEvent.PEN_UP ) {
-			paintingZoomArea = false;
-			mm.zoomingMode = false;
-			mm.getControlsLayer().changeRoleState("zoom_manually", false);
-			mm.dontUpdatePos = saveGpsIgnoreStatus;
-			if (java.lang.Math.abs(lastZoomWidth) < 15 || java.lang.Math.abs(lastZoomHeight) < 15)  {
-				repaintNow();
-				return; // dont make to big zoom jumps - it is most probable not an intentional zoom
-			}
-			mm.zoomScreenRect(saveMapLoc, lastZoomWidth, lastZoomHeight);
-		}
-
-		if (mm.zoomingMode && paintingZoomArea && (ev.type == PenEvent.PEN_MOVED_ON || ev.type == PenEvent.PEN_MOVE || ev.type == PenEvent.PEN_DRAG)) {
-			int left, top;
-			Graphics dr = this.getGraphics();
-			if (lastZoomWidth < 0)left = saveMapLoc.x + lastZoomWidth;
-			else left = saveMapLoc.x;
-			if (lastZoomHeight < 0)top = saveMapLoc.y + lastZoomHeight;
-			else top = saveMapLoc.y;
-			left -= 2;
-			top -= 2;
-			if (top < 0) top = 0;
-			if (left < 0) left = 0;
-			this.repaintNow(dr, new Rect(left, top, java.lang.Math.abs(lastZoomWidth)+4, java.lang.Math.abs(lastZoomHeight)+4));
-			lastZoomWidth = ev.x - saveMapLoc.x;
-			lastZoomHeight =  ev.y - saveMapLoc.y;
-			if (lastZoomWidth < 0) left = saveMapLoc.x + lastZoomWidth;
-			else left = saveMapLoc.x;
-			if (lastZoomHeight < 0)top = saveMapLoc.y + lastZoomHeight;
-			else top = saveMapLoc.y;
-			dr.setPen(new Pen(new Color(255,0,0),Pen.SOLID,3));
-			dr.drawRect(left, top, java.lang.Math.abs(lastZoomWidth), java.lang.Math.abs(lastZoomHeight), 0); // bug in ewe: thickness parameter is ignored
-		}
 		if (ignoreNextDrag) {
 			// On PDA next event after a Kontext ist a drag, that will move the map unwanted
 			ignoreNextDrag=false;
 			if (ev.type == PenEvent.PEN_DRAG) return; // ignoring now
 		}
+		if (ev.type == PenEvent.PEN_DOWN) {
+			if (mm.zoomingMode) {
+				saveGpsIgnoreStatus = mm.dontUpdatePos;
+				mm.dontUpdatePos = true;
+				saveMapLoc = new Point (ev.x, ev.y);
+				paintingZoomArea = true;
+				mm.zoomingMode = true;
+			}
+			else {
+				saveMapLoc = new Point (ev.x, ev.y);
+				if (ev.modifiers == PenEvent.RIGHT_BUTTON) {
+					// context penHeld is fired on PDA but not on PC (Java)
+					penHeld(new Point (ev.x, ev.y));
+				}
+			}
+		}
+		else {
+			if (mm.zoomingMode) {
+				if ( ev.type == PenEvent.PEN_UP ) {
+					paintingZoomArea = false;
+					mm.zoomingMode = false;
+					mm.getControlsLayer().changeRoleState("zoom_manually", false);
+					mm.dontUpdatePos = saveGpsIgnoreStatus;
+					if (java.lang.Math.abs(lastZoomWidth) < 15 || java.lang.Math.abs(lastZoomHeight) < 15)  {
+						repaintNow();
+						return; // dont make to big zoom jumps - it is most probable not an intentional zoom
+					}
+					mm.zoomScreenRect(saveMapLoc, lastZoomWidth, lastZoomHeight);
+				}
+				if (paintingZoomArea && 
+					(ev.type == PenEvent.PEN_MOVED_ON || ev.type == PenEvent.PEN_MOVE || ev.type == PenEvent.PEN_DRAG)) {
+					int left, top;
+					Graphics dr = this.getGraphics();
+					if (lastZoomWidth < 0)left = saveMapLoc.x + lastZoomWidth;
+					else left = saveMapLoc.x;
+					if (lastZoomHeight < 0)top = saveMapLoc.y + lastZoomHeight;
+					else top = saveMapLoc.y;
+					left -= 2;
+					top -= 2;
+					if (top < 0) top = 0;
+					if (left < 0) left = 0;
+					this.repaintNow(dr, new Rect(left, top, java.lang.Math.abs(lastZoomWidth)+4, java.lang.Math.abs(lastZoomHeight)+4));
+					lastZoomWidth = ev.x - saveMapLoc.x;
+					lastZoomHeight =  ev.y - saveMapLoc.y;
+					if (lastZoomWidth < 0) left = saveMapLoc.x + lastZoomWidth;
+					else left = saveMapLoc.x;
+					if (lastZoomHeight < 0)top = saveMapLoc.y + lastZoomHeight;
+					else top = saveMapLoc.y;
+					dr.setPen(new Pen(new Color(255,0,0),Pen.SOLID,3));
+					dr.drawRect(left, top, java.lang.Math.abs(lastZoomWidth), java.lang.Math.abs(lastZoomHeight), 0); // bug in ewe: thickness parameter is ignored
+				}
+			}
+		}
 		super.onPenEvent(ev);
 	}
 



From araber95 at mail.berlios.de  Wed Mar 17 01:08:36 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 17 Mar 2010 01:08:36 +0100
Subject: [Cachewolf-svn] r2518 - in trunk/src/CacheWolf: . exp imp navi
Message-ID: <201003170008.o2H08aKn008360@sheep.berlios.de>

Author: araber95
Date: 2010-03-17 01:08:03 +0100 (Wed, 17 Mar 2010)
New Revision: 2518

Modified:
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/CalcPanel.java
   trunk/src/CacheWolf/DetailsPanel.java
   trunk/src/CacheWolf/Filter.java
   trunk/src/CacheWolf/MyComparer.java
   trunk/src/CacheWolf/Parser.java
   trunk/src/CacheWolf/Profile.java
   trunk/src/CacheWolf/ShowCacheInBrowser.java
   trunk/src/CacheWolf/exp/GarminMap.java
   trunk/src/CacheWolf/exp/HTMLExporter.java
   trunk/src/CacheWolf/exp/TPLExporter.java
   trunk/src/CacheWolf/imp/GPXImporter.java
   trunk/src/CacheWolf/imp/LOCXMLImporter.java
   trunk/src/CacheWolf/imp/OCXMLImporter.java
   trunk/src/CacheWolf/imp/SpiderGC.java
   trunk/src/CacheWolf/myTableControl.java
   trunk/src/CacheWolf/myTableModel.java
   trunk/src/CacheWolf/navi/GotoPanel.java
   trunk/src/CacheWolf/navi/MapLoaderGui.java
   trunk/src/CacheWolf/navi/MovingMap.java
Log:
correcting reading of cachedetails, if there are none (intermediate state)

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -1,15 +1,21 @@
 package CacheWolf;
 
+import CacheWolf.exp.Exporter;
+import CacheWolf.exp.GarminMap;
 import CacheWolf.navi.Metrics;
 
 import com.stevesoft.ewe_pat.Regex;
 
 import ewe.fx.FontMetrics;
 import ewe.fx.IconAndText;
+import ewe.io.AsciiCodec;
 import ewe.io.IOException;
+import ewe.io.TextCodec;
 import ewe.sys.Convert;
+import ewe.sys.Time;
 import ewe.ui.FormBase;
 import ewe.ui.MessageBox;
+import ewe.util.Hashtable;
 import ewe.util.Vector;
 
 /**
@@ -33,7 +39,7 @@
 	/** The coordinates of the cache */
 	public CWPoint pos = new CWPoint();
 	/** The coordinates of the cache */
-	public String LatLon = pos.toString();
+	private String LatLon = pos.toString();
 	/** The date when the cache was hidden in format yyyy-mm-dd */
 	private String dateHidden = EMPTY;
 	/** The size of the cache (as per GC cache sizes Micro, Small, ....) */
@@ -44,7 +50,7 @@
 	public int lastMetric = -1; // Cache last metric
 	public String lastDistance = ""; // Cache last distance
 	/** The bearing N, NNE, NE, ENE ... from the current centre to this point */
-	public String bearing = NOBEARING;
+	private String bearing = NOBEARING;
 	/** The angle (0=North, 180=South) from the current centre to this point */
 	public double degrees = 0;
 	/** The difficulty of the cache from 1 to 5 in .5 incements */ 
@@ -564,27 +570,128 @@
 		sb.append("\" />\n");
 		return sb.toString();
 	}
+	
+	/** Return a Hashtable containing all the cache data for Templates */
+	public Hashtable toHashtable(Regex dec, Regex rex, int shortWaypointLength, int shortNameLength, TextCodec codec, GarminMap gm) {
+		Hashtable varParams = new Hashtable();
+		CacheHolderDetail det = this.getCacheDetails(false);
+		varParams.put("TYPE", CacheType.type2TypeTag(type)); //<type>
+		varParams.put("SYM", CacheType.type2SymTag(type)); //<sym>
+		varParams.put("GSTYPE", CacheType.type2GSTypeTag(type)); //<groundspeak:type>
+		varParams.put("SHORTTYPE", CacheType.getExportShortId(type));
+		varParams.put("SIZE", CacheSize.cw2ExportString(cacheSize));
+		varParams.put("SHORTSIZE", CacheSize.getExportShortId(cacheSize));
+		if (isAddiWpt()) {
+			varParams.put("MAINWP",this.mainCache.getWayPoint());
+		}
+		else {
+			varParams.put("MAINWP", "");
+		}
+		if (isCustomWpt()) {
 
-	public void setLatLon(String latLon) {
-		latLon=latLon.trim();
-		if (!latLon.equals(LatLon.trim())) setUpdated(true);
-		LatLon = latLon;
-		pos.set(latLon);
+		}
+		varParams.put("WAYPOINT", wayPoint); //<name>
+		int wpl = wayPoint.length();
+		int wps = (wpl < shortWaypointLength) ? 0 : wpl - shortWaypointLength;
+		varParams.put("SHORTWAYPOINT", wayPoint.substring(wps, wpl));
+		varParams.put("OWNER", cacheOwner);
+		varParams.put("DIFFICULTY", (isAddiWpt() || isCustomWpt() || hard < 0)?"":dec.replaceAll(CacheTerrDiff.longDT(hard)));
+		String sHard = Integer.toString(hard);
+		varParams.put("SHORTDIFFICULTY", (isAddiWpt() || isCustomWpt() || hard < 0)?"":sHard);
+		varParams.put("SHDIFFICULTY", (isAddiWpt() || isCustomWpt() || hard < 0)?"":sHard.substring(0,1));
+		varParams.put("TERRAIN", (isAddiWpt() || isCustomWpt() || terrain < 0)?"":dec.replaceAll(CacheTerrDiff.longDT(terrain)));
+		String sTerrain = Integer.toString(terrain);
+		varParams.put("SHORTTERAIN", (isAddiWpt() || isCustomWpt() || terrain < 0)?"":sTerrain);
+		varParams.put("SHTERRAIN", (isAddiWpt() || isCustomWpt() || terrain < 0)?"":sTerrain.substring(0,1));
+		varParams.put("DISTANCE", dec.replaceAll(getDistance()));
+		varParams.put("BEARING", bearing);
+		varParams.put("LATLON", LatLon);
+		varParams.put("LAT", dec.replaceAll(pos.getLatDeg(CWPoint.DD)));
+		varParams.put("LON", dec.replaceAll(pos.getLonDeg(CWPoint.DD)));
+		varParams.put("STATUS", cacheStatus);
+		varParams.put("GC_LOGTYPE", GetGCLogType());
+		varParams.put("STATUS_DATE", GetStatusDate());
+		varParams.put("STATUS_TIME", GetStatusTime());
+		varParams.put("DATE", dateHidden);
+		varParams.put("URL", det != null ? det.URL : "");
+		varParams.put("DESCRIPTION", det != null ? det.LongDescription : "");
+		if (codec instanceof AsciiCodec) {
+			cacheName=Exporter.simplifyString(cacheName);
+		}
+		if (rex != null) {
+			cacheName=rex.replaceAll(cacheName);
+			varParams.put("NOTES", det != null ? rex.replaceAll(det.getCacheNotes()): "");
+			varParams.put("HINTS", det != null ? rex.replaceAll(det.Hints): "");
+			varParams.put("DECRYPTEDHINTS", det != null ? rex.replaceAll(Common.rot13(det.Hints)): "");
+		} else {
+			varParams.put("NOTES", det != null ? det.getCacheNotes(): "");
+			varParams.put("HINTS", det != null ? det.Hints: "");
+			varParams.put("DECRYPTEDHINTS", det != null ? Common.rot13(det.Hints): "");
+		}
+		varParams.put("NAME", cacheName);
+		String shortName=removeCharsfromString(cacheName, shortNameLength, selbstLaute);
+		if (shortName.length()>shortNameLength) {
+			shortName=removeCharsfromString(shortName, shortNameLength, mitLauteKlein());
+		}
+		varParams.put("SHORTNAME", shortName);
+		varParams.put("TRAVELBUG", (bugs?"Y":"N"));
+		varParams.put("GMTYPE", gm != null ? gm.getIcon(this) : "");
+		varParams.put("NOW_DATE",nowdate().setToCurrentTime().toString());
+		varParams.put("NOW_TIME",nowtime().setToCurrentTime().toString());
+		return varParams;
+	}	
+	private final static Time nowdate() {
+		Time nd = new Time();
+		return nd.setFormat("yyyy-MM-dd");
 	}
+	private final static Time nowtime() {
+		Time nt = new Time();
+		return nt.setFormat("HH:mm");
+	}	
+	private final static String selbstLaute="aeiouAEIOU";
+	private final static String mitLauteKlein() {
+		final StringBuffer lower=new StringBuffer(26);// region/language dependent ?
+		for (int i=97; i<=122; i++ ) {
+			lower.append((char) i);
+		}
+		return lower.toString();
+	}
+    private static String removeCharsfromString( String text, int MaxLength, String chars ) {
+        if ( text == null ) return null;
+        int originalTextLength = text.length();
+        int anzToRemove=originalTextLength-MaxLength;
+        if (anzToRemove<=0) return text;
+        int anzRemoved=0;
+        StringBuffer sb = new StringBuffer( 50 );
+        for ( int i = originalTextLength-1; i >= 0; i-- ) {
+            char c = text.charAt( i );
+            if (chars.indexOf(c) == -1) {
+            	sb.insert(0,c);
+            }
+            else {
+            	anzRemoved++;
+            	if (anzRemoved==anzToRemove) {
+            		sb.insert(0, text.substring(0,i));
+            		i=0; // exit for
+            	}
+            }
+        }
+        return sb.toString();
+    }
 
 	/** return true if waypoint is an additional waypoint of a cache */
 	public boolean isAddiWpt() {
-		return CacheType.isAddiWpt(this.getType());
+		return CacheType.isAddiWpt(type);
 	}
 	
 	/** return true if waypoint is a custom waypoint */
 	public boolean isCustomWpt() {
-		return CacheType.isCustomWpt(getType());
+		return CacheType.isCustomWpt(type);
 	}
 	
 	/** return true if waypoint is a cache main waypoint */
 	public boolean isCacheWpt() {
-		return CacheType.isCacheWpt(getType());
+		return CacheType.isCacheWpt(type);
 	}
 
 	/** return true waypoint has one or more additional waypoints */
@@ -688,7 +795,7 @@
 					(new MessageBox(MyLocale.getMsg(31415,"Error"), MyLocale.getMsg(31415, "Could not read cache details for cache: ")
 					        + this.getWayPoint(), FormBase.OKB)).execute();
 				}
-				details = null;
+				// details = null;
 				this.setIncomplete(true);
 			}
 			// for importing/spidering reasons helper objects with same waypoint are created
@@ -1078,6 +1185,16 @@
 
 	// Getter and Setter for private properties
 
+	public String getLatLon() { return LatLon; }
+	public void setLatLon(String _LatLon) {
+		_LatLon=_LatLon.trim();
+		if (!_LatLon.equals(LatLon.trim())) setUpdated(true);
+		LatLon = _LatLon;
+		pos.set(_LatLon);
+	}
+
+	public String getBearing() {return bearing;}
+	
 	/**
 	 * Gets an IconAndText object for the cache. If the level of the Icon is equal to the 
 	 * last call of the method, the same (cached) object is returned. If the object is
@@ -1099,9 +1216,7 @@
 		return iconAndTextWP;
 	}
 	
-	public String getCacheStatus() {
-    	return cacheStatus;
-    }
+	public String getCacheStatus() { return cacheStatus; }
 
 	public void setCacheStatus(String cacheStatus) {
         if (!cacheStatus.equals(this.cacheStatus)) {

Modified: trunk/src/CacheWolf/CalcPanel.java
===================================================================
--- trunk/src/CacheWolf/CalcPanel.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/CalcPanel.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -172,8 +172,8 @@
 				inpDistance.setText("0");
 
 				//currFormat = 1;
-				if (ch.LatLon.length()== 0) coordInp.set(0,0);
-				else coordInp.set(ch.LatLon, TransformCoordinates.CW);
+				if (ch.getLatLon().length()== 0) coordInp.set(0,0);
+				else coordInp.set(ch.getLatLon(), TransformCoordinates.CW);
 				setFields();				
 			}
 		}
@@ -227,7 +227,7 @@
 				CacheHolder ch = new CacheHolder();
 				readFields(coordInp, bd);
 				coordOut = coordInp.project(bd.degrees, bd.distance);
-				ch.LatLon = coordOut.toString();
+				ch.setLatLon(coordOut.toString());
 				ch.pos.set(coordOut);
 				ch.setType(CacheType.CW_TYPE_STAGE); // TODO unfertig
 				mainT.newWaypoint(ch);

Modified: trunk/src/CacheWolf/DetailsPanel.java
===================================================================
--- trunk/src/CacheWolf/DetailsPanel.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/DetailsPanel.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -577,7 +577,7 @@
 				blackStatusChanged = true;
 			} else if (ev.target == btnNewWpt) {
 				final CacheHolder ch = new CacheHolder();
-				ch.LatLon = cache.LatLon;
+				ch.setLatLon(cache.getLatLon());
 				ch.pos = new CWPoint(cache.pos);
 				ch.setType(CacheType.CW_TYPE_STAGE);
 				ch.setHard(CacheTerrDiff.CW_DT_UNSET);
@@ -597,7 +597,7 @@
 					Global.getProfile().notifyUnsavedChanges(!cache.pos.toString().equals(coords.toString()));
 					cache.pos.set(coords);
 					btnCoordinates.setText(coords.toString());
-					cache.LatLon = coords.toString();
+					cache.setLatLon(coords.toString());
 					// If the current centre is valid, calculate the distance and bearing to it
 					final CWPoint centre = Global.getPref().getCurCentrePt();
 					if (centre.isValid()) {
@@ -772,7 +772,7 @@
 		if (cache.getWayPoint().length() < 2)
 			cache.setWayPoint(cache.getWayPoint() + " ");
 		cache.setCacheName(inpName.getText().trim());
-		cache.LatLon = cache.pos.toString();
+		cache.setLatLon(cache.pos.toString());
 		if (!cache.isAddiWpt()) {
 			cache.setDateHidden(inpHidden.getText().trim());
 		}

Modified: trunk/src/CacheWolf/Filter.java
===================================================================
--- trunk/src/CacheWolf/Filter.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/Filter.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -173,7 +173,7 @@
 				//... go through the current cache database
 				for(int i = cacheDB.size()-1; i >=0 ; i--){
 					ch = cacheDB.get(i);
-					cwp = new CWPoint(ch.LatLon, TransformCoordinates.CW);
+					cwp = new CWPoint(ch.getLatLon(), TransformCoordinates.CW);
 					calcDistance = DistToSegment(fromPoint, toPoint, cwp);
 					calcDistance = (calcDistance*180*60)/java.lang.Math.PI;
 					calcDistance = calcDistance * 1.852;
@@ -429,41 +429,41 @@
 	        // By first checking the first letter, we can reduce the average number further to
 	        // just under 5
 	        if (hasRoseMatchPattern) {
-		        if (ch.bearing.startsWith("N")) {
-			        if (ch.bearing.equals("NW"))
+		        if (ch.getBearing().startsWith("N")) {
+			        if (ch.getBearing().equals("NW"))
 				        cacheRosePattern = NW;
-			        else if (ch.bearing.equals("NNW"))
+			        else if (ch.getBearing().equals("NNW"))
 				        cacheRosePattern = NNW;
-			        else if (ch.bearing.equals("N"))
+			        else if (ch.getBearing().equals("N"))
 				        cacheRosePattern = N;
-			        else if (ch.bearing.equals("NNE"))
+			        else if (ch.getBearing().equals("NNE"))
 				        cacheRosePattern = NNE;
 			        else
 				        cacheRosePattern = NE;
-		        } else if (ch.bearing.startsWith("E")) {
-			        if (ch.bearing.equals("ENE"))
+		        } else if (ch.getBearing().startsWith("E")) {
+			        if (ch.getBearing().equals("ENE"))
 				        cacheRosePattern = ENE;
-			        else if (ch.bearing.equals("E"))
+			        else if (ch.getBearing().equals("E"))
 				        cacheRosePattern = E;
 			        else
 				        cacheRosePattern = ESE;
-		        } else if (ch.bearing.startsWith("S")) {
-			        if (ch.bearing.equals("SW"))
+		        } else if (ch.getBearing().startsWith("S")) {
+			        if (ch.getBearing().equals("SW"))
 				        cacheRosePattern = SW;
-			        else if (ch.bearing.equals("SSW"))
+			        else if (ch.getBearing().equals("SSW"))
 				        cacheRosePattern = SSW;
-			        else if (ch.bearing.equals("S"))
+			        else if (ch.getBearing().equals("S"))
 				        cacheRosePattern = S;
-			        else if (ch.bearing.equals("SSE"))
+			        else if (ch.getBearing().equals("SSE"))
 				        cacheRosePattern = SSE;
 			        else
 				        cacheRosePattern = SE;
 		        } else {
-			        if (ch.bearing.equals("WNW"))
+			        if (ch.getBearing().equals("WNW"))
 				        cacheRosePattern = WNW;
-			        else if (ch.bearing.equals("W"))
+			        else if (ch.getBearing().equals("W"))
 				        cacheRosePattern = W;
-			        else if (ch.bearing.equals("WSW"))
+			        else if (ch.getBearing().equals("WSW"))
 				        cacheRosePattern = WSW;
 			        else
 				        cacheRosePattern = 0;

Modified: trunk/src/CacheWolf/MyComparer.java
===================================================================
--- trunk/src/CacheWolf/MyComparer.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/MyComparer.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -45,7 +45,7 @@
 		} else if (colToCompare==6) {
 			for (int i=0; i<visibleSize; i++) {
 				CacheHolder ch=cacheDB.get(i);
-				ch.sort=ch.LatLon;
+				ch.sort=ch.getLatLon();
 			}
 		} else if (colToCompare==7) {
 			for (int i=0; i<visibleSize; i++) {
@@ -76,11 +76,11 @@
 		} else if (colToCompare==11) {
 			for (int i=0; i<visibleSize; i++) {
 				CacheHolder ch=cacheDB.get(i);
-				if (ch.bearing.equals("?")) {
+				if (ch.getBearing().equals("?")) {
 					ch.sort="\uFFFF";
 				}
 				else {
-					ch.sort=ch.bearing;
+					ch.sort=ch.getBearing();
 				}			
 			}
 			

Modified: trunk/src/CacheWolf/Parser.java
===================================================================
--- trunk/src/CacheWolf/Parser.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/Parser.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -550,7 +550,7 @@
     			err(MyLocale.getMsg(1714,"Goto: Waypoint does not exist: ")+waypointName);
     			return;
     		}
-    		ch.LatLon=cwPt.toString(TransformCoordinates.CW);
+    		ch.setLatLon(cwPt.toString(TransformCoordinates.CW));
     		ch.pos.set(cwPt);
     		ch.calcDistance(Global.getPref().getCurCentrePt()); // Update distance/bearing
     		nav.setDestination(ch);
@@ -1000,7 +1000,7 @@
 				String coord=popCalcStackAsString();
 				cwPt.set(coord);
 				if (cwPt.isValid() || coord.equals("")) { // Can clear coord with empty string
-					ch.LatLon=cwPt.toString(TransformCoordinates.CW);
+					ch.setLatLon(cwPt.toString(TransformCoordinates.CW));
 					ch.pos.set(cwPt);
 					ch.calcDistance(Global.getPref().getCurCentrePt()); // Update distance and bearing
 		    	    Global.getProfile().selectionChanged=true; // Tell moving map to updated displayed waypoints

Modified: trunk/src/CacheWolf/Profile.java
===================================================================
--- trunk/src/CacheWolf/Profile.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/Profile.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -568,7 +568,7 @@
 			ch = cacheDB.get(i);
 			if (!onlyOfSelected || ch.is_Checked) {
 				if (ch.pos == null) { // this can not happen
-					tmpca.set(ch.LatLon);
+					tmpca.set(ch.getLatLon());
 					ch.pos = new CWPoint(tmpca);
 				}
 				if (ch.pos.isValid() ){ // done: && ch.pos.latDec != 0 && ch.pos.lonDec != 0 TO-DO != 0 sollte rausgenommen werden sobald in der Liste vern?nftig mit nicht gesetzten pos umgegangen wird

Modified: trunk/src/CacheWolf/ShowCacheInBrowser.java
===================================================================
--- trunk/src/CacheWolf/ShowCacheInBrowser.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/ShowCacheInBrowser.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -76,9 +76,9 @@
 					tpl.setParam("DIFFICULTY", CacheTerrDiff.longDT(chD.getHard()));
 					tpl.setParam("TERRAIN", CacheTerrDiff.longDT(chD.getTerrain()));
 					tpl.setParam("DISTANCE", chD.getDistance().replace(',','.'));
-					tpl.setParam("BEARING", chD.bearing);
+					tpl.setParam("BEARING", chD.getBearing());
 					if (chD.pos!=null && chD.pos.isValid()) {
-						tpl.setParam("LATLON", chD.LatLon);
+						tpl.setParam("LATLON", chD.getLatLon());
 					} else {
 						tpl.setParam("LATLON", "unknown");
 					}
@@ -190,7 +190,7 @@
 							CacheHolder ch=(CacheHolder) chD.addiWpts.get(i);
 							addis.put("WAYPOINT",ch.getWayPoint());
 							addis.put("NAME",ch.getCacheName());
-							addis.put("LATLON",ch.LatLon);
+							addis.put("LATLON",ch.getLatLon());
 							addis.put("IMG","<img src=\""+CacheType.typeImageForId(ch.getType())+"\">");
 							addis.put("LONGDESC",ch.getCacheDetails(true).LongDescription); // Do we need to treat longDesc as above ?
 							addiVect.add(addis);

Modified: trunk/src/CacheWolf/exp/GarminMap.java
===================================================================
--- trunk/src/CacheWolf/exp/GarminMap.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/exp/GarminMap.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -15,7 +15,7 @@
  * @author salzkammergut
  *
  */
-class GarminMap extends MinML {
+public class GarminMap extends MinML {
 
 	private Vector symbols=new Vector(24);
 

Modified: trunk/src/CacheWolf/exp/HTMLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/HTMLExporter.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/exp/HTMLExporter.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -88,33 +88,8 @@
 						Global.getPref().log("HTMLExport: skipping export of incomplete waypoint "+ch.getWayPoint());
 						continue;
 					}
-					det=ch.getCacheDetails(true);
-					varParams = new Hashtable();
-					varParams.put("TYPE", CacheType.type2TypeTag(ch.getType())); //<type>
-					varParams.put("SYM", CacheType.type2SymTag(ch.getType())); //<sym>
-					varParams.put("GSTYPE", CacheType.type2GSTypeTag(ch.getType())); //<groundspeak:type>
-					varParams.put("WAYPOINT", ch.getWayPoint()); //<name>
-					varParams.put("NAME", ch.getCacheName());
-					varParams.put("OWNER", ch.getCacheOwner());
-					if (ch.isAddiWpt() || ch.isCustomWpt()) {
-						varParams.put("SIZE", "");
-						varParams.put("DIFFICULTY", "");
-						varParams.put("TERRAIN", "");
-					} else {
-						varParams.put("SIZE", CacheSize.isValidSize(ch.getCacheSize())?
-								CacheSize.cw2ExportString(ch.getCacheSize()):"");
-						varParams.put("DIFFICULTY", CacheTerrDiff.isValidTD(ch.getHard())?
-								CacheTerrDiff.longDT(ch.getHard()):"");
-						varParams.put("TERRAIN", CacheTerrDiff.isValidTD(ch.getTerrain())?
-								CacheTerrDiff.longDT(ch.getTerrain()):"");
-					}
-					varParams.put("DISTANCE", ch.getDistance());
-					varParams.put("BEARING", ch.bearing);
-					varParams.put("LATLON", ch.LatLon);
-					varParams.put("LAT", dec.replaceAll(ch.pos.getLatDeg(CWPoint.DD)));
-					varParams.put("LON", dec.replaceAll(ch.pos.getLonDeg(CWPoint.DD)));
-					varParams.put("STATUS", ch.getCacheStatus());
-					varParams.put("DATE", ch.getDateHidden());
+					det=ch.getCacheDetails(false);
+					varParams=ch.toHashtable(dec, null, 0, 30, new AsciiCodec(), null);
 					cache_index.add(varParams);
 					//We can generate the individual page here!
 					try{
@@ -130,8 +105,8 @@
 						page_tpl.setParam("DIFFICULTY", varParams.get("DIFFICULTY").toString());
 						page_tpl.setParam("TERRAIN", varParams.get("TERRAIN").toString());
 						page_tpl.setParam("DISTANCE", ch.getDistance());
-						page_tpl.setParam("BEARING", ch.bearing);
-						page_tpl.setParam("LATLON", ch.LatLon);
+						page_tpl.setParam("BEARING", ch.getBearing());
+						page_tpl.setParam("LATLON", ch.getLatLon());
 						page_tpl.setParam("LAT", dec.replaceAll(ch.pos.getLatDeg(CWPoint.DD)));
 						page_tpl.setParam("LON", dec.replaceAll(ch.pos.getLonDeg(CWPoint.DD)));
 						page_tpl.setParam("STATUS", ch.getCacheStatus());

Modified: trunk/src/CacheWolf/exp/TPLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/TPLExporter.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/exp/TPLExporter.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -25,17 +25,11 @@
 
 package CacheWolf.exp;
 
-import CacheWolf.CWPoint;
 import CacheWolf.CacheDB;
 import CacheWolf.CacheHolder;
-import CacheWolf.CacheHolderDetail;
-import CacheWolf.CacheSize;
-import CacheWolf.CacheTerrDiff;
-import CacheWolf.CacheType;
 import CacheWolf.Global;
 import CacheWolf.Preferences;
 import CacheWolf.Profile;
-import CacheWolf.Common;
 import HTML.Template;
 import ewe.filechooser.FileChooser;
 import ewe.filechooser.FileChooserBase;
@@ -172,12 +166,6 @@
 		pbf.setTask(h,"Exporting ...");
 		pbf.exec();
 
-		String selbstLaute="aeiouAEIOU";
-		StringBuffer lower=new StringBuffer(26);// region/language dependent ?
-		for (int i=97; i<=122; i++ ) {
-			lower.append((char) i);
-		}
-		String mitLauteKlein=lower.toString();
 		try {
 			TplFilter myFilter = new TplFilter();			
 			Hashtable args = new Hashtable();
@@ -195,93 +183,18 @@
 			if(fc.execute() == FormBase.IDCANCEL) return;
 			File saveTo = fc.getChosenFile();
 			pref.setExportPath(expName, saveTo.getPath());
-			
-			Time nowdate = new Time();
-			nowdate = nowdate.setFormat("yyyy-MM-dd");
-			Time nowtime = new Time();
-			nowtime = nowtime.setFormat("HH:mm");
 
+			Regex dec = new Regex("[,.]",myFilter.decSep);
+			if (myFilter.badChars != null) rex = new Regex("["+myFilter.badChars+"]","");
+
 			Vector cache_index = new Vector(); 			
 			for(int i = 0; i<counter;i++){
 				CacheHolder ch = cacheDB.get(i);
-				CacheHolderDetail det = ch.getCacheDetails(true);
 				h.progress = (float)i/(float)counter;
 				h.changed();
-				if(ch.isVisible()){
-					if (ch.pos.isValid() == false) continue;
+				if(ch.isVisible() && ch.pos.isValid()){
 					try {
-						Regex dec = new Regex("[,.]",myFilter.decSep);
-						if (myFilter.badChars != null) rex = new Regex("["+myFilter.badChars+"]","");
-						Hashtable varParams = new Hashtable();
-						varParams.put("TYPE", CacheType.type2TypeTag(ch.getType())); //<type>
-						varParams.put("SYM", CacheType.type2SymTag(ch.getType())); //<sym>
-						varParams.put("GSTYPE", CacheType.type2GSTypeTag(ch.getType())); //<groundspeak:type>
-						varParams.put("SHORTTYPE", CacheType.getExportShortId(ch.getType()));
-						varParams.put("SIZE", CacheSize.cw2ExportString(ch.getCacheSize()));
-						varParams.put("SHORTSIZE", CacheSize.getExportShortId(ch.getCacheSize()));
-						if (ch.isAddiWpt()) {
-							varParams.put("MAINWP",ch.mainCache.getWayPoint());
-						}
-						else {
-							varParams.put("MAINWP", "");
-						}
-						if (ch.isCustomWpt()) {
-
-						}
-						String wp = ch.getWayPoint();
-						varParams.put("WAYPOINT", wp); //<name>
-						int wpl = wp.length();
-						int wps = (wpl < myFilter.shortWaypointLength) ? 0 : wpl - myFilter.shortWaypointLength;
-						varParams.put("SHORTWAYPOINT", wp.substring(wps, wpl));
-						varParams.put("OWNER", ch.getCacheOwner());
-						byte chGetHard=ch.getHard();
-						varParams.put("DIFFICULTY", (ch.isAddiWpt() || ch.isCustomWpt() || chGetHard < 0)?"":dec.replaceAll(CacheTerrDiff.longDT(chGetHard)));
-						String sHard = Integer.toString(chGetHard);
-						varParams.put("SHORTDIFFICULTY", (ch.isAddiWpt() || ch.isCustomWpt() || chGetHard < 0)?"":sHard);
-						varParams.put("SHDIFFICULTY", (ch.isAddiWpt() || ch.isCustomWpt() || chGetHard < 0)?"":sHard.substring(0,1));
-						byte chGetTerrain=ch.getTerrain();
-						varParams.put("TERRAIN", (ch.isAddiWpt() || ch.isCustomWpt() || chGetTerrain < 0)?"":dec.replaceAll(CacheTerrDiff.longDT(chGetTerrain)));
-						String sTerrain = Integer.toString(chGetTerrain);
-						varParams.put("SHORTTERAIN", (ch.isAddiWpt() || ch.isCustomWpt() || chGetTerrain < 0)?"":sTerrain);
-						varParams.put("SHTERRAIN", (ch.isAddiWpt() || ch.isCustomWpt() || chGetTerrain < 0)?"":sTerrain.substring(0,1));
-						varParams.put("DISTANCE", dec.replaceAll(ch.getDistance()));
-						varParams.put("BEARING", ch.bearing);
-						varParams.put("LATLON", ch.LatLon);
-						varParams.put("LAT", dec.replaceAll(ch.pos.getLatDeg(CWPoint.DD)));
-						varParams.put("LON", dec.replaceAll(ch.pos.getLonDeg(CWPoint.DD)));
-						varParams.put("STATUS", ch.getCacheStatus());
-						varParams.put("GC_LOGTYPE", ch.GetGCLogType());
-						varParams.put("STATUS_DATE", ch.GetStatusDate());
-						varParams.put("STATUS_TIME", ch.GetStatusTime());
-						varParams.put("DATE", ch.getDateHidden());
-						varParams.put("URL", det != null ? det.URL : "");
-						varParams.put("DESCRIPTION", det != null ? det.LongDescription : "");
-						String cacheName=ch.getCacheName();
-						if (myFilter.codec instanceof AsciiCodec) {
-							cacheName=Exporter.simplifyString(cacheName);
-						}
-						if (myFilter.badChars != null) {
-							cacheName=rex.replaceAll(cacheName);
-							varParams.put("NOTES", det != null ? rex.replaceAll(det.getCacheNotes()): "");
-							varParams.put("HINTS", det != null ? rex.replaceAll(det.Hints): "");
-							varParams.put("DECRYPTEDHINTS", det != null ? rex.replaceAll(Common.rot13(det.Hints)): "");
-						} else {
-							varParams.put("NOTES", det != null ? det.getCacheNotes(): "");
-							varParams.put("HINTS", det != null ? det.Hints: "");
-							varParams.put("DECRYPTEDHINTS", det != null ? Common.rot13(det.Hints): "");
-						}
-						varParams.put("NAME", cacheName);
-						String shortName=removeCharsfromString(cacheName, myFilter.shortNameLength, selbstLaute);
-						if (shortName.length()>myFilter.shortNameLength) {
-							shortName=removeCharsfromString(shortName, myFilter.shortNameLength, mitLauteKlein);
-						}
-						varParams.put("SHORTNAME", shortName);
-						varParams.put("TRAVELBUG", (ch.has_bugs()?"Y":"N"));
-						varParams.put("GMTYPE", gm.getIcon(ch));
-						varParams.put("NOW_DATE",nowdate.setToCurrentTime().toString());
-						varParams.put("NOW_TIME",nowtime.setToCurrentTime().toString());
-
-						cache_index.add(varParams);
+						cache_index.add(ch.toHashtable(dec, rex, myFilter.shortWaypointLength, myFilter.shortNameLength, myFilter.codec, gm));
 					}catch(Exception e){
 						Vm.debug("Problem getting Parameter, Cache: " + ch.getWayPoint());
 						e.printStackTrace();
@@ -311,29 +224,6 @@
 		}
 		pbf.exit(0);
 	}
-
-    private static String removeCharsfromString( String text, int MaxLength, String chars ) {
-        if ( text == null ) return null;
-        int originalTextLength = text.length();
-        int anzToRemove=originalTextLength-MaxLength;
-        if (anzToRemove<=0) return text;
-        int anzRemoved=0;
-        StringBuffer sb = new StringBuffer( 50 );
-        for ( int i = originalTextLength-1; i >= 0; i-- ) {
-            char c = text.charAt( i );
-            if (chars.indexOf(c) == -1) {
-            	sb.insert(0,c);
-            }
-            else {
-            	anzRemoved++;
-            	if (anzRemoved==anzToRemove) {
-            		sb.insert(0, text.substring(0,i));
-            		i=0; // exit for
-            	}
-            }
-        }
-        return sb.toString();
-    }
 }
 
 //##################################################################

Modified: trunk/src/CacheWolf/imp/GPXImporter.java
===================================================================
--- trunk/src/CacheWolf/imp/GPXImporter.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/imp/GPXImporter.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -190,7 +190,7 @@
 		if (name.equals("wpt")) {
 			holder = new CacheHolder();
 			holder.pos.set(Common.parseDouble(atts.getValue("lat")),Common.parseDouble(atts.getValue("lon")));
-			holder.LatLon=holder.pos.toString();
+			holder.setLatLon(holder.pos.toString());
 			inWpt = true;
 			inLogs = false;
 			inBug = false;
@@ -315,9 +315,9 @@
 				// if waypoint starts with "GC"
 				if(doSpider) {
 					if(spiderOK && holder.is_archived() == false){
-							if(holder.LatLon.length() > 1){
+							if(holder.getLatLon().length() > 1){
 							if(getMaps){
-								ParseLatLon pll = new ParseLatLon(holder.LatLon,".");
+								ParseLatLon pll = new ParseLatLon(holder.getLatLon(),".");
 								pll.parse();
 								//MapLoader mpl = new MapLoader(pref.myproxy, pref.myproxyport);
 								//mpl.loadTo(profile.dataDir + "/" + holder.wayPoint + "_map.gif", "3");

Modified: trunk/src/CacheWolf/imp/LOCXMLImporter.java
===================================================================
--- trunk/src/CacheWolf/imp/LOCXMLImporter.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/imp/LOCXMLImporter.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -93,7 +93,7 @@
 		if (name.equals("coord")) {
 			holder.pos.set(Common.parseDouble(atts.getValue("lat")), Common
 					.parseDouble(atts.getValue("lon")));
-			holder.LatLon = holder.pos.toString();
+			holder.setLatLon(holder.pos.toString());
 			return;
 		}
 	}

Modified: trunk/src/CacheWolf/imp/OCXMLImporter.java
===================================================================
--- trunk/src/CacheWolf/imp/OCXMLImporter.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/imp/OCXMLImporter.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -522,7 +522,7 @@
 		}
 		if(name.equals("latitude")) {
 			holder.pos.set(Common.parseDouble(strData),longitude);
-			holder.LatLon = holder.pos.toString();
+			holder.setLatLon(holder.pos.toString());
 			return;
 		}
 		if(name.equals("difficulty")) {

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -1155,7 +1155,7 @@
 						// General Cache Data
 						//==========
 						ch.setLatLon(latLon);
-						pref.log("LatLon: " + ch.LatLon);
+						pref.log("LatLon: " + ch.getLatLon());
 
 						ch.getCacheDetails(false).setLongDescription(getLongDesc(completeWebPage));
 						pref.log("Got description");

Modified: trunk/src/CacheWolf/myTableControl.java
===================================================================
--- trunk/src/CacheWolf/myTableControl.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/myTableControl.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -239,7 +239,7 @@
 				return;
 			}
 			CacheHolder thisCache = cacheDB.get(tbp.getSelectedCache());
-			CWPoint cp=new CWPoint(thisCache.LatLon);
+			CWPoint cp=new CWPoint(thisCache.getLatLon());
 			if (!cp.isValid()){
 				MessageBox tmpMB = new MessageBox(MyLocale.getMsg(321,"Error"), MyLocale.getMsg(4111,"Coordinates must be entered in the format N DD MM.MMM E DDD MM.MMM"), FormBase.OKB);
 				tmpMB.execute();

Modified: trunk/src/CacheWolf/myTableModel.java
===================================================================
--- trunk/src/CacheWolf/myTableModel.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/myTableModel.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -369,7 +369,7 @@
 						wpVal.addColumn(ch.getCacheName());
 						return wpVal;
 					case 6: // Location
-						return ch.LatLon;
+						return ch.getLatLon();
 					case 7: // Owner
 						return ch.getCacheOwner();
 					case 8: // Date hidden
@@ -379,7 +379,7 @@
 					case 10: // Distance
 						return ch.getDistance();
 					case 11: // Bearing
-						return ch.bearing;
+						return ch.getBearing();
 					case 12: // Size
 						if (ch.isAddiWpt()) {
 							return "";

Modified: trunk/src/CacheWolf/navi/GotoPanel.java
===================================================================
--- trunk/src/CacheWolf/navi/GotoPanel.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/navi/GotoPanel.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -374,7 +374,7 @@
 			// create new waypoint with current GPS-position
 			if (ev.target == btnSave){
 				CacheHolder ch = new CacheHolder();
-				ch.LatLon = myNavigation.gpsPos.toString();
+				ch.setLatLon(myNavigation.gpsPos.toString());
 				ch.pos = new CWPoint(myNavigation.gpsPos);
 				ch.setType(CacheType.CW_TYPE_STAGE); // see CacheType.GC_AW_STAGE_OF_MULTI // TODO unfertig
 				mainT.newWaypoint(ch);

Modified: trunk/src/CacheWolf/navi/MapLoaderGui.java
===================================================================
--- trunk/src/CacheWolf/navi/MapLoaderGui.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/navi/MapLoaderGui.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -270,7 +270,7 @@
 				ch = cacheDB.get(i);
 				if (!this.onlySelected || ch.is_Checked) {
 					if (ch.pos == null) { // this can not happen
-						tmpca.set(ch.LatLon);
+						tmpca.set(ch.getLatLon());
 						ch.pos = new CWPoint(tmpca);
 					}
 					if (ch.pos.isValid() && ch.pos.latDec != 0 && ch.pos.lonDec != 0) { // TODO != 0 sollte verschwinden, sobald das handling von nicht gesetzten Koos ?berall korrekt ist

Modified: trunk/src/CacheWolf/navi/MovingMap.java
===================================================================
--- trunk/src/CacheWolf/navi/MovingMap.java	2010-03-16 16:23:55 UTC (rev 2517)
+++ trunk/src/CacheWolf/navi/MovingMap.java	2010-03-17 00:08:03 UTC (rev 2518)
@@ -2343,7 +2343,7 @@
 						mm.postEvent(close);
 						CacheHolder newWP = new CacheHolder();
 						newWP.pos = mm.ScreenXY2LatLon(saveMapLoc.x, saveMapLoc.y);
-						newWP.LatLon=newWP.pos.toString();
+						newWP.setLatLon(newWP.pos.toString());
 						Global.mainTab.newWaypoint(newWP);
 					}
 					if (action == addCachetoListMenuItem) {



From haelmchen at mail.berlios.de  Wed Mar 17 21:32:45 2010
From: haelmchen at mail.berlios.de (haelmchen at mail.berlios.de)
Date: Wed, 17 Mar 2010 21:32:45 +0100
Subject: [Cachewolf-svn] r2519 - trunk/src/CacheWolf/navi/touchControls
Message-ID: <201003172032.o2HKWjux032646@sheep.berlios.de>

Author: haelmchen
Date: 2010-03-17 21:32:20 +0100 (Wed, 17 Mar 2010)
New Revision: 2519

Modified:
   trunk/src/CacheWolf/navi/touchControls/MovingMapControls.java
Log:
try to fix problem with double clicks in MM

Modified: trunk/src/CacheWolf/navi/touchControls/MovingMapControls.java
===================================================================
--- trunk/src/CacheWolf/navi/touchControls/MovingMapControls.java	2010-03-17 00:08:03 UTC (rev 2518)
+++ trunk/src/CacheWolf/navi/touchControls/MovingMapControls.java	2010-03-17 20:32:20 UTC (rev 2519)
@@ -257,10 +257,16 @@
 		int timenow = Vm.getTimeStamp();
 
 		// avoid double clicks
-		if (timenow < 200 + lastTime) {
+		if (timenow < 300 + lastTime) {
 			return false;
 		}
-		lastTime = timenow;
+		
+		boolean result = handleImageClicked(which);
+		lastTime = Vm.getTimeStamp();
+		return result;
+	}
+
+	private boolean handleImageClicked(AniImage which) {
 		for (int i = 0; i < buttons.size(); i++) {
 			MovingMapControlItem item = (MovingMapControlItem) buttons.get(i);
 			AniImage ani = item.getImage();
@@ -296,17 +302,6 @@
 		return false;
 	}
 
-	/**
-	 * Method to react to user.
-	 */
-	public boolean handleImageClickedEvent(AniImage which) {
-		if (which == null)
-			return false;
-
-		boolean imageClicked = imageClicked(which);
-		return imageClicked;
-	}
-
 	public boolean imageBeginDragged(AniImage which, Point pos) {
 		boolean contains = containsImage(which);
 



From araber95 at mail.berlios.de  Fri Mar 19 21:08:54 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Fri, 19 Mar 2010 21:08:54 +0100
Subject: [Cachewolf-svn] r2520 - in trunk/src/CacheWolf: . exp
Message-ID: <201003192008.o2JK8sM1008322@sheep.berlios.de>

Author: araber95
Date: 2010-03-19 21:08:50 +0100 (Fri, 19 Mar 2010)
New Revision: 2520

Modified:
   trunk/src/CacheWolf/Attribute.java
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/MainTab.java
   trunk/src/CacheWolf/ShowCacheInBrowser.java
   trunk/src/CacheWolf/exp/HTMLExporter.java
Log:
1. corrected http://www.geoclub.de/viewtopic.php?f=40&t=43152
2. template Exporter handling (intermediate)

Modified: trunk/src/CacheWolf/Attribute.java
===================================================================
--- trunk/src/CacheWolf/Attribute.java	2010-03-17 20:32:20 UTC (rev 2519)
+++ trunk/src/CacheWolf/Attribute.java	2010-03-19 20:08:50 UTC (rev 2520)
@@ -153,89 +153,89 @@
 	private final static int GC_TEXT = 5; // for export , didn't extract by myself, copied from forum	
 	private static final String[][] attRef = {
 		// Empfehlungen / Personen - Conditions (Yes/No)
-		{"30","2562","scenic","","8","Scenic view"},//62 scenic view
+		{"30","2562","scenic","0","8","Scenic view"},//62 scenic view
 		{"17","2536","kids","59","6","Recommended for kids"},//36 kid friendly
-		{"35","2572","stroller","","41","Stroller accessible"},//72 stroller accessible	
-		{"41","2584","wheelchair","","24","Wheelchair accessible"},//84 wheelchair accessible
+		{"35","2572","stroller","0","41","Stroller accessible"},//72 stroller accessible	
+		{"41","2584","wheelchair","0","24","Wheelchair accessible"},//84 wheelchair accessible
 		//  vorhanden / Eigenschaften / Infrastruktur - Facilities (Yes/No)
 		{"22","2546","parking","18","25","Parking available"},//46 parking available
 		{"26","2554","public","19","26","Public transportation"},//54 public transit available
 		{"40","2582","water","20","27","Drinking water nearby"},//82 drinking water nearby
 		{"29","2560","restrooms","21","28","Public restrooms nearby"},//60 restrooms available
 		{"23","2548","phone","22","29","Telephone nearby"},//48 telephone nearby
-		{"24","2550","picnic","","30","Picnic tables nearby"},//50 picnic tables available
+		{"24","2550","picnic","0","30","Picnic tables nearby"},//50 picnic tables available
 		{"43","2588","firstaid","23","42","Firstaid"}, //88 erste Hilfe !!! da 
 		// Erlaubt - Permissions (Allowed/Not Allowed)
-		{"11","2524","dogs","","1","Dogs"},//24 dogs allowed
-		{"05","2512","camping","","31","Camping available"},//12 Camping allowed
-		{"01","2504","bicycles","","32","Bicycles"},//04 bikes allowed
-		{"19","2540","motorcycles","","33","Motorcycles"},//40 motorcycles allowed
-		{"27","2556","quads","","34","Quads"},//56 quads allowed
-		{"16","2534","jeeps","","35","Off-road vehicles"},//34 off-road vehicles allowed
-		{"33","2568","snowmobiles","","36","Snowmobiles"},//68
-		{"14","2530","horses","","37","Horses"},//30 horses allowed
-		{"04","2510","campfires","","38","Campfires"},//10 campfires allowed
+		{"11","2524","dogs","0","1","Dogs"},//24 dogs allowed
+		{"05","2512","camping","0","31","Camping available"},//12 Camping allowed
+		{"01","2504","bicycles","0","32","Bicycles"},//04 bikes allowed
+		{"19","2540","motorcycles","0","33","Motorcycles"},//40 motorcycles allowed
+		{"27","2556","quads","0","34","Quads"},//56 quads allowed
+		{"16","2534","jeeps","0","35","Off-road vehicles"},//34 off-road vehicles allowed
+		{"33","2568","snowmobiles","0","36","Snowmobiles"},//68
+		{"14","2530","horses","0","37","Horses"},//30 horses allowed
+		{"04","2510","campfires","0","38","Campfires"},//10 campfires allowed
 		// Eigenschaften / Gefahren - Hazards (Present/Not Present)
 		{"10","2522","danger","9","23","Dangerous area"},//22 dangerous area
-		{"62","2644","train","10","",""},// 144 aktive Eisenbahnlinien in der N?he
+		{"62","2644","train","10","0",""},// 144 aktive Eisenbahnlinien in der N?he
 		{"06","2514","cliff","11","21","Cliff / falling rocks"},//14 falling-rocks nearby
 		{"15","2532","hunting","12","22","Hunting"},//32 hunting area
 		{"37","2576","thorn","13","39","Thorns"},//76 thorns!
 		{"38","2578","ticks","14","19","Ticks"},//78 ticks!
 		{"18","2538","mine","15","20","Abandoned mines"},//38
 		{"25","2552","poisonoak","16","17","Poison plants"},//52 Giftige Pflanzen
-		{"46","2594","animals","17","",""},// 94 Giftige/gef%e4hrliche Tiere
-		{"03","2508","cactus","","",""},//08
-		{"32","2566","snakes","","18","Snakes"},//66
-		{"09","2520","cow","","43","Watch for livestock"},//20 watch for livestock
+		{"46","2594","animals","17","0",""},// 94 Giftige/gef%e4hrliche Tiere
+		{"03","2508","cactus","0","0",""},//08
+		{"32","2566","snakes","0","18","Snakes"},//66
+		{"09","2520","cow","0","43","Watch for livestock"},//20 watch for livestock
 		// Eigenschaften / Der Weg - Conditions (Yes/No)
-		{"49","2600","car","24","",""},// 100 Nahe beim Auto
-		{"21","2544","onehour","","7","Takes less than an hour"},//44 takes less than one hour
+		{"49","2600","car","24","0",""},// 100 Nahe beim Auto
+		{"21","2544","onehour","0","7","Takes less than an hour"},//44 takes less than one hour
 		{"13","2528","hiking","25","9","Significant hike"},//28 significant hike
 		{"39","2580","wading","26","11","May require wading"},//80 may require wading
-		{"65","2634","steep","27","",""},// 134 H?geliges Gel?nde
+		{"65","2634","steep","27","0",""},// 134 H?geliges Gel?nde
 		{"07","2516","climbing","28","10","Difficult climbing"},//16 easy climbing(OC-28), difficult climbing(GC-10) 
 		{"36","2574","swimming","29","12","May require swimming"},//74
 		// Eigenschaften / Wegpunkte  - Conditions (Yes/No)
-		{"55","2612","letter","8","",""},// 112 Letterbox (ben?tigt Stempel)
-		{"54","2610","interestsign","30","",""},// 110 Interessanter Ort ev mit scenic zusammenfassen?
-		{"56","2614","moving","31","",""},// 114 Bewegliches Ziel
-		{"64","2646","webcam","32","",""},// 146 Webcam am Ziel
-		{"53","2608","indoor","33","",""},// 108 In geschlossenen R?umen
-		{"66","2636","submerged","34","",""},// 136 Im Wasser
-		{"58","2618","nogps","35","",""},// 118 Ohne GPS
-		{"34","2570","stealth","","40","Stealth required"},//70 stealth required (Heimlich,List,Schl?ue)
+		{"55","2612","letter","8","0",""},// 112 Letterbox (ben?tigt Stempel)
+		{"54","2610","interestsign","30","0",""},// 110 Interessanter Ort ev mit scenic zusammenfassen?
+		{"56","2614","moving","31","0",""},// 114 Bewegliches Ziel
+		{"64","2646","webcam","32","0",""},// 146 Webcam am Ziel
+		{"53","2608","indoor","33","0",""},// 108 In geschlossenen R?umen
+		{"66","2636","submerged","34","0",""},// 136 Im Wasser
+		{"58","2618","nogps","35","0",""},// 118 Ohne GPS
+		{"34","2570","stealth","0","40","Stealth required"},//70 stealth required (Heimlich,List,Schl?ue)
 		// Einschr?nkungen und Voraussetzungen / Allgemein
 		{"12","2526","fee","36","2","Access or parking fee"},//26 access/parking fees
-		{"61","2624","overnight","37","",""},// 124 ?bernachtung erforderlich
+		{"61","2624","overnight","37","0",""},// 124 ?bernachtung erforderlich
 		// Einschr?nkungen und Voraussetzungen / Zeitlich
 		{"20","2542","night","1","14","Recommended at night"},//42 recommended at night
 		{"00","2502","available","38","13","Available at all times"},//02 available 24-7
-		{"68","2640","time","39","",""},// 140 An bestimmte Zeiten gebunden
-		{"52","2606","day","40","",""},// 106 nur tags?ber
-		{"67","2638","tide","41","",""},// 138 Gezeiten
+		{"68","2640","time","39","0",""},// 140 An bestimmte Zeiten gebunden
+		{"52","2606","day","40","0",""},// 106 nur tags?ber
+		{"67","2638","tide","41","0",""},// 138 Gezeiten
 		// Einschr?nkungen und Voraussetzungen / Saisonbedingt
-		{"51","2604","date","42","",""},// 104 w?hrend des ganzen Jahres zug?nglich
-		{"57","2616","naturschutz","43","",""},// 116 Brutsaison/Naturschutz
+		{"51","2604","date","42","0",""},// 104 w?hrend des ganzen Jahres zug?nglich
+		{"57","2616","naturschutz","43","0",""},// 116 Brutsaison/Naturschutz
 		{"42","2586","winter","44","15","Available during winter"},//86 available in winter 132 Schneesicheres Versteck
 		// Einschr?nkungen und Voraussetzungen / Systembedingt
-		{"59","2620","oconly","6","",""},// 120 Nur bei Opencaching logbar
-		{"71","2650","wwwlink","7","",""},// 150 Nur Hyperlink zu OC-externen Portalen
+		{"59","2620","oconly","6","0",""},// 120 Nur bei Opencaching logbar
+		{"71","2650","wwwlink","7","0",""},// 150 Nur Hyperlink zu OC-externen Portalen
 		// Einschr?nkungen und Voraussetzungen / Ben?tigt Werkzeug - Special Equipment (Required/Not Required)
-		{"69","2642","tools","46","",""},// 142 Spezielle Ausr?stung
-		{"08","2518","compass","47","",""},//18 Kompass
+		{"69","2642","tools","46","0",""},// 142 Spezielle Ausr?stung
+		{"08","2518","compass","47","0",""},//18 Kompass
 		{"44","2590","flashlight","48","44","Flashlight required"}, // 90 Flashlight required
 		{"28","2558","rappelling","49","3","Climbing gear"},//58 climbing gear Kletterausr?stung
-		{"50","2602","cave","50","",""},// 102 H?hlenausr?stung
+		{"50","2602","cave","50","0",""},// 102 H?hlenausr?stung
 		{"31","2564","scuba","51","5","Scuba gear"},//64 Tauchausr?stung
 		{"02","2506","boat","52","4","Boat"},//06 Wasserfahrzeug
 		{"45","2592","aircraft","53","38",""},// 92
 		// Einschr?nkungen und Voraussetzungen / Ben?tigt Vorarbeit
-		{"70","2648","wiki","54","",""},// 148 Recherche
-		{"63","2630","riddle","55","",""},// 130 R?tsel
-		{"47","2596","arith_prob","56",""},// 96 Rechenaufgabe
-		{"60","2622","othercache","57","",""},// 122 besondere Cacheart
-		{"48","2598","ask","58","",""},// 98 Startbedingungen beim Owner erfragen
+		{"70","2648","wiki","54","0",""},// 148 Recherche
+		{"63","2630","riddle","55","0",""},// 130 R?tsel
+		{"47","2596","arith_prob","56","0",""},// 96 Rechenaufgabe
+		{"60","2622","othercache","57","0",""},// 122 besondere Cacheart
+		{"48","2598","ask","58","0",""},// 98 Startbedingungen beim Owner erfragen
 
 	};
     public static int maxAttRef=attRef.length;	

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-03-17 20:32:20 UTC (rev 2519)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-03-19 20:08:50 UTC (rev 2520)
@@ -613,18 +613,17 @@
 		varParams.put("STATUS_DATE", GetStatusDate());
 		varParams.put("STATUS_TIME", GetStatusTime());
 		varParams.put("DATE", dateHidden);
+		
 		varParams.put("URL", det != null ? det.URL : "");
 		varParams.put("DESCRIPTION", det != null ? det.LongDescription : "");
-		if (codec instanceof AsciiCodec) {
-			cacheName=Exporter.simplifyString(cacheName);
-		}
+		if (codec instanceof AsciiCodec) { cacheName=Exporter.simplifyString(cacheName);}
 		if (rex != null) {
 			cacheName=rex.replaceAll(cacheName);
-			varParams.put("NOTES", det != null ? rex.replaceAll(det.getCacheNotes()): "");
+			varParams.put("NOTES", det != null ? STRreplace.replace(rex.replaceAll(det.getCacheNotes()), "\n","<br>"): "");
 			varParams.put("HINTS", det != null ? rex.replaceAll(det.Hints): "");
 			varParams.put("DECRYPTEDHINTS", det != null ? rex.replaceAll(Common.rot13(det.Hints)): "");
 		} else {
-			varParams.put("NOTES", det != null ? det.getCacheNotes(): "");
+			varParams.put("NOTES", det != null ? STRreplace.replace(det.getCacheNotes(), "\n","<br>"): "");
 			varParams.put("HINTS", det != null ? det.Hints: "");
 			varParams.put("DECRYPTEDHINTS", det != null ? Common.rot13(det.Hints): "");
 		}
@@ -794,8 +793,8 @@
 					//FIXME: put a message to languages file
 					(new MessageBox(MyLocale.getMsg(31415,"Error"), MyLocale.getMsg(31415, "Could not read cache details for cache: ")
 					        + this.getWayPoint(), FormBase.OKB)).execute();
+					// details = null;
 				}
-				// details = null;
 				this.setIncomplete(true);
 			}
 			// for importing/spidering reasons helper objects with same waypoint are created

Modified: trunk/src/CacheWolf/MainTab.java
===================================================================
--- trunk/src/CacheWolf/MainTab.java	2010-03-17 20:32:20 UTC (rev 2519)
+++ trunk/src/CacheWolf/MainTab.java	2010-03-19 20:08:50 UTC (rev 2520)
@@ -316,7 +316,7 @@
 			lastselected=pCh.getWayPoint();
 		}
 		pCh.setCacheSize(CacheSize.CW_SIZE_NOTCHOSEN);
-		chD = pCh.getCacheDetails(true);
+		chD = pCh.getCacheDetails(false);
 		this.ch = pCh;
 		cacheDB.add(pCh);
 		Global.getProfile().notifyUnsavedChanges(true); // Just to be sure

Modified: trunk/src/CacheWolf/ShowCacheInBrowser.java
===================================================================
--- trunk/src/CacheWolf/ShowCacheInBrowser.java	2010-03-17 20:32:20 UTC (rev 2519)
+++ trunk/src/CacheWolf/ShowCacheInBrowser.java	2010-03-19 20:08:50 UTC (rev 2520)
@@ -204,8 +204,7 @@
 				}
 			}
 			PrintWriter detfile;
-			FileWriter fw = new FileWriter(saveTo);
-			detfile = new PrintWriter(new BufferedWriter(fw));
+			detfile = new PrintWriter(new BufferedWriter(new FileWriter(saveTo)));
 			tpl.printTo(detfile);
 			//detfile.print(tpl.output());
 			detfile.close();

Modified: trunk/src/CacheWolf/exp/HTMLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/HTMLExporter.java	2010-03-17 20:32:20 UTC (rev 2519)
+++ trunk/src/CacheWolf/exp/HTMLExporter.java	2010-03-19 20:08:50 UTC (rev 2520)
@@ -1,4 +1,5 @@
 package CacheWolf.exp;
+
 import com.stevesoft.ewe_pat.Regex;
 
 import CacheWolf.*;
@@ -8,6 +9,7 @@
 import ewe.ui.*;
 import ewe.filechooser.*;
 import HTML.*;
+import HTML.Tmpl.Element.Element;
 
 /**
 *	Class to export cache information to individual HTML files.<br>
@@ -94,31 +96,21 @@
 					//We can generate the individual page here!
 					try{
 						Template page_tpl = new Template(template_init_page);
-						page_tpl.setParam("TYPE", CacheType.type2TypeTag(ch.getType())); //<type>
-						// page_tpl.setParam("TYPE", varParams.get("TYPE").toString());
-						page_tpl.setParam("SYM", CacheType.type2SymTag(ch.getType())); //<sym>
-						page_tpl.setParam("GSTYPE", CacheType.type2GSTypeTag(ch.getType())); //<groundspeak:type>
-						page_tpl.setParam("SIZE", varParams.get("SIZE").toString());
-						page_tpl.setParam("WAYPOINT", ch.getWayPoint());
-						page_tpl.setParam("NAME", ch.getCacheName());
-						page_tpl.setParam("OWNER", ch.getCacheOwner());
-						page_tpl.setParam("DIFFICULTY", varParams.get("DIFFICULTY").toString());
-						page_tpl.setParam("TERRAIN", varParams.get("TERRAIN").toString());
-						page_tpl.setParam("DISTANCE", ch.getDistance());
-						page_tpl.setParam("BEARING", ch.getBearing());
-						page_tpl.setParam("LATLON", ch.getLatLon());
-						page_tpl.setParam("LAT", dec.replaceAll(ch.pos.getLatDeg(CWPoint.DD)));
-						page_tpl.setParam("LON", dec.replaceAll(ch.pos.getLonDeg(CWPoint.DD)));
-						page_tpl.setParam("STATUS", ch.getCacheStatus());
-						page_tpl.setParam("DATE", ch.getDateHidden());
+						
+						Enumeration de = varParams.keys();
+						while(de.hasMoreElements()) {
+							String s = de.nextElement().toString();
+							if (!s.equals("DESCRIPTION")) {
+								page_tpl.setParam(s,varParams.get(s).toString());
+							}
+						}
+						
 						if (det != null) {
 							if (ch.is_HTML()) {
 								page_tpl.setParam("DESCRIPTION", modifyLongDesc(det,targetDir));
 							} else {
 								page_tpl.setParam("DESCRIPTION",STRreplace.replace(det.LongDescription, "\n", "<br>"));
 							}
-							page_tpl.setParam("HINTS", det.Hints);
-							page_tpl.setParam("DECRYPTEDHINTS", Common.rot13(det.Hints));
 
 							StringBuffer sb=new StringBuffer(2000);
 							for(int j = 0; j<det.CacheLogs.size(); j++){
@@ -201,8 +193,6 @@
 							}
 						} else {
 							page_tpl.setParam("DESCRIPTION", "");
-							page_tpl.setParam("HINTS", "");
-							page_tpl.setParam("DECRYPTEDHINTS", "");
 							page_tpl.setParam("LOGS", "");
 							page_tpl.setParam("NOTES", "");
 							page_tpl.setParam("cacheImg", cacheImg);



From araber95 at mail.berlios.de  Sun Mar 21 14:45:26 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun, 21 Mar 2010 14:45:26 +0100
Subject: [Cachewolf-svn] r2521 - in trunk: res_noewe src/CacheWolf
	src/CacheWolf/exp
Message-ID: <201003211345.o2LDjQwj017422@sheep.berlios.de>

Author: araber95
Date: 2010-03-21 14:45:16 +0100 (Sun, 21 Mar 2010)
New Revision: 2521

Added:
   trunk/res_noewe/0.gif
   trunk/res_noewe/icon_smile_approve.gif
   trunk/res_noewe/icon_smile_big.gif
   trunk/res_noewe/icon_smile_cool.gif
   trunk/res_noewe/icon_smile_dead.gif
   trunk/res_noewe/icon_smile_shock.gif
   trunk/res_noewe/icon_smile_tongue.gif
   trunk/res_noewe/icon_smile_wink.gif
Modified:
   trunk/res_noewe/GCTemplate.html
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/ShowCacheInBrowser.java
   trunk/src/CacheWolf/exp/HTMLExporter.java
   trunk/src/CacheWolf/exp/TPLExporter.java
Log:
exporting with template (intermediate), concerns TPLExporter,HTMLExporter,ShowCacheInBrowserOffline

Added: trunk/res_noewe/0.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/0.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/GCTemplate.html
===================================================================
--- trunk/res_noewe/GCTemplate.html	2010-03-19 20:08:50 UTC (rev 2520)
+++ trunk/res_noewe/GCTemplate.html	2010-03-21 13:45:16 UTC (rev 2521)
@@ -1,20 +1,20 @@
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
 <!-- saved from url=(0014)http://localhost/ -->
 <!-- Note: The line above is needed to avoid the warning due to the javascript contained in this page.
-   Using javascript, various sections of the Cache listing can be hidden/unhidden. 
+   Using javascript, various sections of the Cache listing can be hidden/unhidden.
    Try clicking on anything that is underlined.
 -->
 <html>
 <META HTTP-EQUIV="content-type" content="text/html; charset=utf-8" />
 <META HTTP-EQUIV="expires" CONTENT="Wed, 26 Feb 1997 08:21:57 GMT">
-<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
+<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
 <script type="text/javascript">
 function toggleDivOL( elemID ) { // Hide or show a DIV
 	var elem = document.getElementById( elemID );
 	if (!elem.style.display || elem.style.display=='block') {
 		elem.style.display='none';
 	} else {
-		elem.style.display='block';	
+		elem.style.display='block';
 	}
 }
 var logsVisible=true;
@@ -22,7 +22,7 @@
 	logsVisible=!logsVisible;
 	var logs = document.getElementsByName("log");
 	for (logElem=0; logElem<logs.length; logElem++) {
-		if (logsVisible) 
+		if (logsVisible)
 			logs[logElem].style.display='block';
 		else
 			logs[logElem].style.display='none';
@@ -54,10 +54,10 @@
 <head>
 	<title>Cache: <tmpl_var WAYPOINT> <tmpl_var CACHE_NAME> by <tmpl_var OWNER></title>
 </head>
-	
+
 <body bgcolor="#FFFFFF" LINK="#000000" VLINK="#000000" ALINK="#000000" TEXT="#000000" marginwidth="20" marginheight="0" leftmargin="20" topmargin="0">
 <div style="float:left;">
-	<img src=<tmpl_var TYPE> BORDER=0 WIDTH=32 HEIGHT=32><FONT face="Verdana" size="4"><strong> <tmpl_var CACHE_NAME></strong></FONT>
+	<img src="file://<tmpl_var PROGDIR>/<tmpl_var TYPENO>.gif" BORDER=0 WIDTH=32 HEIGHT=32><FONT face="Verdana" size="4"><strong> <tmpl_var CACHE_NAME></strong></FONT>
 	<FONT face="Verdana" size="2" style="font-size:X-Small;font-weight:bold;"> by <tmpl_var OWNER></FONT>
 	<br/><br/>
     <strong><tmpl_var LATLON></strong> (WGS84)<br/>
@@ -84,11 +84,11 @@
 </div>
 <div style="float:left">
 	<hr>
-<tmpl_if UNAVAILABLE>	
+<tmpl_if UNAVAILABLE>
 	<FONT face="Verdana" color="red" size="+0">
 	<br/><strong>The cache is not currently available.<br/></strong>
 	</FONT>
-</tmpl_if>	
+</tmpl_if>
 
 	<br/>
 	<FONT face="Verdana" size="2">
@@ -102,7 +102,7 @@
 				<TH align=left>Waypoint</TH>
 				<TH align=left>Name</TH>
 				<TH align=left>Coordinate</TH>
-			<tmpl_loop ADDIS>	
+			<tmpl_loop ADDIS>
 			<TR bgColor=#ffffff>
 				<TD vAlign=top align=middle width=16><tmpl_var IMG></TD>
 				<TD vAlign=top align=left><tmpl_var WAYPOINT></TD>
@@ -111,11 +111,11 @@
 			<TR bgColor=#ffffff>
 				<TD vAlign=top align=middle width=16>Note:</TD>
 				<TD vAlign=top align=left ColSpan=3><tmpl_var LONGDESC></TD>
-			</tmpl_loop>	
+			</tmpl_loop>
 		</TBODY>
-	</TABLE><BR/></div>	
+	</TABLE><BR/></div>
 </tmpl_if>
-<tmpl_if IMAGES> 
+<tmpl_if IMAGES>
 	<tmpl_loop IMAGES>
 		<a href="javascript:toggleDivOL(<tmpl_var I>);"><image src="images.gif" border=0> <tmpl_var IMAGETEXT></a>&nbsp;<i><tmpl_var IMAGECOMMENT></i><br/>
 		<div id=<tmpl_var I> style="display:none"><tmpl_var IMAGE></div>
@@ -136,12 +136,12 @@
 		<div><center><div style="width:66%"><hr></div></center></div></div>
 	</tmpl_loop>
 	</div>
-<tmpl_else><br/><STRONG>No logs</STRONG><br/>	
+<tmpl_else><br/><STRONG>No logs</STRONG><br/>
 </tmpl_if>
 <tmpl_if BUGS>
 	<hr>
 	<a href="javascript:toggleDivOL('bugs');"><FONT face="Verdana" size="+0"><STRONG>Bugs</STRONG></FONT></a><span class="clickHint">Click to hide/unhide section</span><br/><br/>
-	<div id="bugs" class="bugs"><tmpl_var BUGS></div>	
+	<div id="bugs" class="bugs"><tmpl_var BUGS></div>
 </tmpl_if>
 <tmpl_if NOTES>
 <tmpl_if BUGS><TMPL_ELSE><hr></tmpl_if>

Added: trunk/res_noewe/icon_smile_approve.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/icon_smile_approve.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/icon_smile_big.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/icon_smile_big.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/icon_smile_cool.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/icon_smile_cool.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/icon_smile_dead.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/icon_smile_dead.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/icon_smile_shock.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/icon_smile_shock.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/icon_smile_tongue.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/icon_smile_tongue.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/icon_smile_wink.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/icon_smile_wink.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-03-19 20:08:50 UTC (rev 2520)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-03-21 13:45:16 UTC (rev 2521)
@@ -9,6 +9,7 @@
 import ewe.fx.FontMetrics;
 import ewe.fx.IconAndText;
 import ewe.io.AsciiCodec;
+import ewe.io.FileBase;
 import ewe.io.IOException;
 import ewe.io.TextCodec;
 import ewe.sys.Convert;
@@ -572,10 +573,17 @@
 	}
 	
 	/** Return a Hashtable containing all the cache data for Templates */
-	public Hashtable toHashtable(Regex dec, Regex rex, int shortWaypointLength, int shortNameLength, TextCodec codec, GarminMap gm) {
+	public Hashtable toHashtable(
+			Regex dec, Regex rex, 
+			int shortWaypointLength, int shortNameLength, 
+			TextCodec codec, GarminMap gm,
+			boolean withFoundText
+			) {
 		Hashtable varParams = new Hashtable();
 		CacheHolderDetail det = this.getCacheDetails(false);
+		varParams.put("PROGDIR", FileBase.getProgramDirectory());
 		varParams.put("TYPE", CacheType.type2TypeTag(type)); //<type>
+		varParams.put("TYPENO",""+type);
 		varParams.put("SYM", CacheType.type2SymTag(type)); //<sym>
 		varParams.put("GSTYPE", CacheType.type2GSTypeTag(type)); //<groundspeak:type>
 		varParams.put("SHORTTYPE", CacheType.getExportShortId(type));
@@ -605,17 +613,22 @@
 		varParams.put("SHTERRAIN", (isAddiWpt() || isCustomWpt() || terrain < 0)?"":sTerrain.substring(0,1));
 		varParams.put("DISTANCE", dec.replaceAll(getDistance()));
 		varParams.put("BEARING", bearing);
-		varParams.put("LATLON", LatLon);
+		varParams.put("LATLON", (pos!=null && pos.isValid())?LatLon:"unknown");
 		varParams.put("LAT", dec.replaceAll(pos.getLatDeg(CWPoint.DD)));
-		varParams.put("LON", dec.replaceAll(pos.getLonDeg(CWPoint.DD)));
-		varParams.put("STATUS", cacheStatus);
+		varParams.put("LON", dec.replaceAll(pos.getLonDeg(CWPoint.DD)));		
+		if (withFoundText && cacheStatus.length()>=10 && cacheStatus.charAt(4)=='-')
+			varParams.put("STATUS",MyLocale.getMsg(318,"Found")+" "+cacheStatus);
+		else
+			varParams.put("STATUS", cacheStatus);
 		varParams.put("GC_LOGTYPE", GetGCLogType());
 		varParams.put("STATUS_DATE", GetStatusDate());
 		varParams.put("STATUS_TIME", GetStatusTime());
 		varParams.put("DATE", dateHidden);
 		
 		varParams.put("URL", det != null ? det.URL : "");
+
 		varParams.put("DESCRIPTION", det != null ? det.LongDescription : "");
+		varParams.put("CACHE_NAME", cacheName);
 		if (codec instanceof AsciiCodec) { cacheName=Exporter.simplifyString(cacheName);}
 		if (rex != null) {
 			cacheName=rex.replaceAll(cacheName);

Modified: trunk/src/CacheWolf/ShowCacheInBrowser.java
===================================================================
--- trunk/src/CacheWolf/ShowCacheInBrowser.java	2010-03-19 20:08:50 UTC (rev 2520)
+++ trunk/src/CacheWolf/ShowCacheInBrowser.java	2010-03-21 13:45:16 UTC (rev 2521)
@@ -2,6 +2,7 @@
 
 import com.stevesoft.ewe_pat.Regex;
 
+import ewe.io.AsciiCodec;
 import ewe.io.BufferedWriter;
 import ewe.io.FileBase;
 import ewe.io.FileWriter;
@@ -65,28 +66,16 @@
 			if(chD.isVisible()){
 				Vm.showWait(true);
 				try {
-//					if (chD.getWayPoint().startsWith("OC"))
-//						tpl.setParam("TYPE", "\"file://"+FileBase.getProgramDirectory()+"/"+CacheType.transOCType(chD.getType())+".gif\"");
-//					else
-						tpl.setParam("TYPE", "\"file://"+FileBase.getProgramDirectory()+"/"+chD.getType()+".gif\"");
-					tpl.setParam("SIZE", CacheSize.cw2ExportString(chD.getCacheSize()));
-					tpl.setParam("WAYPOINT", chD.getWayPoint());
-					tpl.setParam("CACHE_NAME", chD.getCacheName());
-					tpl.setParam("OWNER", chD.getCacheOwner());
-					tpl.setParam("DIFFICULTY", CacheTerrDiff.longDT(chD.getHard()));
-					tpl.setParam("TERRAIN", CacheTerrDiff.longDT(chD.getTerrain()));
-					tpl.setParam("DISTANCE", chD.getDistance().replace(',','.'));
-					tpl.setParam("BEARING", chD.getBearing());
-					if (chD.pos!=null && chD.pos.isValid()) {
-						tpl.setParam("LATLON", chD.getLatLon());
-					} else {
-						tpl.setParam("LATLON", "unknown");
+					
+					Hashtable varParams;
+					varParams=chD.toHashtable(new Regex("[,.]","."), null, 0, 30, new AsciiCodec(), null, true);
+					Enumeration de = varParams.keys();
+					while(de.hasMoreElements()) {
+						String s = de.nextElement().toString();
+						if (!s.equals("DESCRIPTION")) {
+							tpl.setParam(s,varParams.get(s).toString());
+						}
 					}
-					// If status is of format yyyy-mm-dd prefix it with a "Found" message in local language
-					if (chD.getCacheStatus().length()>=10 && chD.getCacheStatus().charAt(4)=='-')
-						tpl.setParam("STATUS",MyLocale.getMsg(318,"Found")+" "+chD.getCacheStatus());
-					else
-						tpl.setParam("STATUS", chD.getCacheStatus());
 
 					// Cache attributes
 					if (chD.getCacheDetails(true).attributes.count()>0) {
@@ -105,11 +94,7 @@
 						}
 						tpl.setParam("ATTRIBUTES",attVect);
 					}
-
-					tpl.setParam("DATE", chD.getDateHidden());
-					tpl.setParam("URL", chD.getCacheDetails(true).URL);
 					if (chD.getCacheDetails(true).Travelbugs.size()>0) tpl.setParam("BUGS",chD.getCacheDetails(true).Travelbugs.toHtml());
-					if (chD.getCacheDetails(true).getCacheNotes().trim().length()>0) tpl.setParam("NOTES", STRreplace.replace(chD.getCacheDetails(true).getCacheNotes(),"\n","<br/>\n"));
 					if (chD.getCacheDetails(true).getSolver()!=null && chD.getCacheDetails(true).getSolver().trim().length()>0) tpl.setParam("SOLVER", STRreplace.replace(chD.getCacheDetails(true).getSolver(),"\n","<br/>\n"));
 					// Look for images
 

Modified: trunk/src/CacheWolf/exp/HTMLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/HTMLExporter.java	2010-03-19 20:08:50 UTC (rev 2520)
+++ trunk/src/CacheWolf/exp/HTMLExporter.java	2010-03-21 13:45:16 UTC (rev 2521)
@@ -91,7 +91,7 @@
 						continue;
 					}
 					det=ch.getCacheDetails(false);
-					varParams=ch.toHashtable(dec, null, 0, 30, new AsciiCodec(), null);
+					varParams=ch.toHashtable(dec, null, 0, 30, new AsciiCodec(), null, false);
 					cache_index.add(varParams);
 					//We can generate the individual page here!
 					try{

Modified: trunk/src/CacheWolf/exp/TPLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/TPLExporter.java	2010-03-19 20:08:50 UTC (rev 2520)
+++ trunk/src/CacheWolf/exp/TPLExporter.java	2010-03-21 13:45:16 UTC (rev 2521)
@@ -194,7 +194,7 @@
 				h.changed();
 				if(ch.isVisible() && ch.pos.isValid()){
 					try {
-						cache_index.add(ch.toHashtable(dec, rex, myFilter.shortWaypointLength, myFilter.shortNameLength, myFilter.codec, gm));
+						cache_index.add(ch.toHashtable(dec, rex, myFilter.shortWaypointLength, myFilter.shortNameLength, myFilter.codec, gm, false));
 					}catch(Exception e){
 						Vm.debug("Problem getting Parameter, Cache: " + ch.getWayPoint());
 						e.printStackTrace();



From araber95 at mail.berlios.de  Tue Mar 23 22:26:39 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Tue, 23 Mar 2010 22:26:39 +0100
Subject: [Cachewolf-svn] r2522 - in trunk: res_noewe/languages src/CacheWolf
	src/CacheWolf/navi
Message-ID: <201003232126.o2NLQdx6027527@sheep.berlios.de>

Author: araber95
Date: 2010-03-23 22:26:35 +0100 (Tue, 23 Mar 2010)
New Revision: 2522

Modified:
   trunk/res_noewe/languages/DE.cfg
   trunk/res_noewe/languages/EN.cfg
   trunk/src/CacheWolf/CalcPanel.java
   trunk/src/CacheWolf/CoordsScreen.java
   trunk/src/CacheWolf/InputScreen.java
   trunk/src/CacheWolf/navi/GotoPanel.java
Log:
fingertips for coordinates

Modified: trunk/res_noewe/languages/DE.cfg
===================================================================
--- trunk/res_noewe/languages/DE.cfg	2010-03-21 13:45:16 UTC (rev 2521)
+++ trunk/res_noewe/languages/DE.cfg	2010-03-23 21:26:35 UTC (rev 2522)
@@ -429,6 +429,7 @@
 		1412=Koordinaten ung%fcltig. Trotzdem %fcbernehmen?
 		1413=L%f6schen
 		1414=Suchen
+		1415=Peilung
 		1500=Ziel:
 		1501=Aktuell
 		1502=Grad

Modified: trunk/res_noewe/languages/EN.cfg
===================================================================
--- trunk/res_noewe/languages/EN.cfg	2010-03-21 13:45:16 UTC (rev 2521)
+++ trunk/res_noewe/languages/EN.cfg	2010-03-23 21:26:35 UTC (rev 2522)
@@ -429,6 +429,7 @@
 		1412=Coordinates invalid. Apply anyway?
 		1413=Clear
 		1414=Search
+		1415=bearing
 		1500=DST:
 		1501=Current
 		1502=deg

Modified: trunk/src/CacheWolf/CalcPanel.java
===================================================================
--- trunk/src/CacheWolf/CalcPanel.java	2010-03-21 13:45:16 UTC (rev 2521)
+++ trunk/src/CacheWolf/CalcPanel.java	2010-03-23 21:26:35 UTC (rev 2522)
@@ -2,7 +2,6 @@
 
 import CacheWolf.navi.Metrics;
 import CacheWolf.navi.TransformCoordinates;
-import CacheWolf.InputScreen;
 import ewe.sys.Vm;
 import ewe.ui.*;
 import ewe.ui.formatted.TextDisplay;
@@ -188,24 +187,6 @@
 
 	public void onEvent(Event ev){
 
-		//Vm.debug(ev.toString());
-		if(ev instanceof ControlEvent && ev.type == ControlEvent.FOCUS_IN && Vm.isMobile()){
-			if (ev.target == inpBearing && !bBearing){
-				bBearing = true;
-				InputScreen inpScreen = new InputScreen(inpBearing, MyLocale.getMsg(1403,"Bearing"));
-				inpScreen.execute();
-				bDistance = false;
-			}
-			
-			if (ev.target == inpDistance && !bDistance){
-				bDistance = true;
-				InputScreen inpScreen = new InputScreen(inpDistance, MyLocale.getMsg(1404,"Distance"));
-				inpScreen.execute();
-				bBearing = false;
-			}
-		}
-		
-		
 		if(ev instanceof ControlEvent && ev.type == ControlEvent.PRESSED){
 			if (ev.target == chkFormat 
 					|| ((ev.type == ControlEvent.PRESSED) && (ev.target == localCooSystem )) ) {

Modified: trunk/src/CacheWolf/CoordsScreen.java
===================================================================
--- trunk/src/CacheWolf/CoordsScreen.java	2010-03-21 13:45:16 UTC (rev 2521)
+++ trunk/src/CacheWolf/CoordsScreen.java	2010-03-23 21:26:35 UTC (rev 2522)
@@ -4,7 +4,6 @@
 import CacheWolf.navi.Navigate;
 import CacheWolf.navi.ProjectedPoint;
 import CacheWolf.navi.TransformCoordinates;
-import CacheWolf.InputScreen;
 import ewe.ui.*;
 import ewe.fx.Dimension;
 import ewe.sys.*;
@@ -240,78 +239,6 @@
 		// for Checkboxes and Choice controls this is done via the exitKeys
 		// For input fields we use the wantReturn field
 
-		if(ev instanceof ControlEvent && ev.type == ControlEvent.FOCUS_IN  && Vm.isMobile()){
-		//if(ev instanceof ControlEvent && ev.type == ControlEvent.FOCUS_IN){
-			if (ev.target == inpNSDeg && !bNSDeg){
-				bNSDeg = true;
-				if(chkFormat.getSelectedIndex() == 0)
-					inpScreen = new InputScreen(inpNSDeg,"Format: d.d?");
-				else
-					inpScreen = new InputScreen(inpNSDeg,"Format: d?");					
-				inpScreen.execute();
-				bNSm = bNSs = bEWDeg = bEWm = bEWs = bUTMNorthing = bUTMEasting = false;
-			}
-			
-			if (ev.target == inpNSm && !bNSm){
-				bNSm = true;
-				if(chkFormat.getSelectedIndex() == 2)
-					inpScreen = new InputScreen(inpNSm,"Format: m");
-				else
-					inpScreen = new InputScreen(inpNSm,"Format: m.s");					
-				inpScreen.execute();
-				bNSDeg = bNSs = bEWDeg = bEWm = bEWs = bUTMNorthing = bUTMEasting = false;
-			}
-			
-			if (ev.target == inpNSs && !bNSs){
-				bNSs = true;
-				inpScreen = new InputScreen(inpNSs,"Format: s");
-				inpScreen.execute();
-				bNSDeg = bNSm = bEWDeg = bEWm = bEWs = bUTMNorthing = bUTMEasting = false;
-			}
-			
-			if (ev.target == inpEWDeg && !bEWDeg){
-				bEWDeg = true;
-				if(chkFormat.getSelectedIndex() == 0)
-					inpScreen = new InputScreen(inpEWDeg,"Format: d.d?");
-				else
-					inpScreen = new InputScreen(inpEWDeg,"Format: d?");	
-				inpScreen.execute();
-				bNSDeg = bNSm = bNSs = bEWm = bEWs = bUTMNorthing = bUTMEasting = false;
-			}
-			
-			if (ev.target == inpEWm && !bEWm){
-				bEWm = true;
-				if(chkFormat.getSelectedIndex() == 2)
-					inpScreen = new InputScreen(inpEWm,"Format: m");
-				else
-					inpScreen = new InputScreen(inpEWm,"Format: m.s");
-				inpScreen.execute();
-				bNSDeg = bNSm = bNSs = bEWDeg = bEWs = bUTMNorthing = bUTMEasting = false;
-			}
-			
-			if (ev.target == inpEWs && !bEWs){
-				bEWs = true;
-				inpScreen = new InputScreen(inpEWs,"Format: s");
-				inpScreen.execute();
-				bNSDeg = bNSm = bNSs = bEWDeg = bEWm = bUTMNorthing = bUTMEasting = false;
-			}
-
-			if (ev.target == inpUTMNorthing && !bUTMNorthing){
-				bUTMNorthing = true;
-				inpScreen = new InputScreen(inpUTMNorthing,"Format: " + MyLocale.getMsg(1401,"Northing"));
-				inpScreen.execute();
-				bNSDeg = bNSm = bNSs = bEWDeg = bEWm = bEWs = bUTMEasting = false;
-			}
-			
-			if (ev.target == inpUTMEasting && !bUTMEasting){
-				bUTMEasting = true;
-				inpScreen = new InputScreen(inpUTMEasting,"Format: " + MyLocale.getMsg(1402,"Easting"));
-				inpScreen.execute();
-				bNSDeg = bNSm = bNSs = bEWDeg = bEWm = bEWs = bUTMNorthing = false;
-			}
-			
-		}
-			
 		if(ev instanceof ControlEvent && ev.type == ControlEvent.EXITED){
 			if (((ControlEvent)ev).target==chkDD || ((ControlEvent)ev).target==chkDMM ||
 					((ControlEvent)ev).target==chkDMS) Gui.takeFocus(chcNS,ControlConstants.ByKeyboard);	

Modified: trunk/src/CacheWolf/InputScreen.java
===================================================================
--- trunk/src/CacheWolf/InputScreen.java	2010-03-21 13:45:16 UTC (rev 2521)
+++ trunk/src/CacheWolf/InputScreen.java	2010-03-23 21:26:35 UTC (rev 2522)
@@ -1,8 +1,13 @@
 package CacheWolf;
 
+
+import CacheWolf.navi.Navigate;
+import CacheWolf.navi.TransformCoordinates;
+import ewe.fx.Font;
+import ewe.fx.Color;
 import ewe.ui.*;
-import ewe.fx.Font;
 
+
 /**
 *	Class for entering coordinates<br>
 *	Class IDs 1400 and 600 (same as calc panel and preferences screen)<br>
@@ -11,21 +16,56 @@
 
 public class InputScreen extends Form {
 
-	String sText = "";
-	mButton btn9, btn8, btn7, btn6, btn5, btn4, btn3, btn2, btn1, btn0, btnPoint, btnOk, btnDEL, btnDELAll;
-	mInput inpText = new mInput();
-	CellPanel mainPanel = new CellPanel();
-	mLabel lblValueShow = new mLabel("0.0");
-	mLabel lblTextShow = new mLabel("Info");
+	private static StringBuffer strBufCoords = new StringBuffer(30);
+	private static StringBuffer strBufDistanc = new StringBuffer(10);
+	private static StringBuffer strBufBear = new StringBuffer(3);
 
 
-	public InputScreen(mInput inpAnz, String sAnz)
+	private int iPosition;
+	private static final int POS_NDD=2, LEN_NDD=3;
+	private static final int POS_NMM=6, LEN_NMM=3;
+	private static final int POS_NSSS=9, LEN_NSSS=3;
+	private static final int POS_EDDD=15, LEN_EDDD=4;
+	private static final int POS_EMM=20, LEN_EMM=3;
+	private static final int POS_ESSS=23, LEN_ESSS=3;
+
+	public Navigate myNavigation;
+	int currFormatSel;
+	CWPoint CoordsBack = new CWPoint();
+	CWPoint CoordsBear = new CWPoint();
+
+	BearingDistance bd = new BearingDistance();
+	private boolean bBearingPanelOnTop = false;
+
+	static Color ColorEdit = new Color(0,255,0);// green
+	static Color ColorNormal = new Color(192,192,192);// grey
+	// different panels to avoid spanning
+	private CellPanel MainP = new CellPanel();
+	private CellPanel TopP = new CellPanel();
+	private SingleContainer TopSP = new SingleContainer();
+	private CellPanel BottomP = new CellPanel();
+	private CellPanel ExpertP = new CellPanel();
+	private CellPanel BearP = new CellPanel();
+	// all Buttons
+	private mButton btnNorth, btnWest;
+	private mButton btnNorthDD, btnEastDDD;
+	private mButton btnNorthMM, btnEastMM;
+	private mButton btnNorthSSS, btnEastSSS;
+	private mButton btn9, btn8, btn7, btn6, btn5, btn4, btn3, btn2, btn1, btn0, btnOk, btnEsc;
+	private mButton btnBear, btnGPS , btnExpert;
+	private mLabel lblDistanc = new mLabel(MyLocale.getMsg(1404,"Distance"));
+	private mLabel lblBearing = new mLabel(MyLocale.getMsg(1403,"Bearing"));
+	private mButton btnBearing, btnDistanc;
+	private mLabel lblDist = new mLabel("m");
+	private mLabel lblBear = new mLabel("?");
+
+
+	public InputScreen(Navigate nav, int FormSelect)
 	{
-		inpText = inpAnz;
-		lblValueShow.setText(inpText.getText());
-		lblTextShow.setText(sAnz);
-		//inpText.setText(sText);
+		myNavigation = nav;
+		currFormatSel = FormSelect;
 		InitInputScreen();
+	//	setTextButton(sCoords);
 	}
 
 	private void InitInputScreen()
@@ -40,170 +80,396 @@
 			if(fs > 17){psx=400;psy=340;}
 			if(fs > 23){psx=500;psy=350;}
 			this.setPreferredSize(psx,psy);
+			MainP.setPreferredSize(psx,psy);
 		}
 		else{
 			// small screens: fixed size
 			if (sh>240)
+			{
 				this.setPreferredSize(240,260);
+				MainP.setPreferredSize(240,260);
+			}
 			else
+			{
 				this.setPreferredSize(240,240);
+				MainP.setPreferredSize(240,240);
+			}
 		}
 
+
 		this.setTitle("InputConsole");
-		mainPanel.addLast(lblValueShow,CellConstants.DONTSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		mainPanel.addLast(lblTextShow,CellConstants.DONTSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		btn7 = new mButton(" 7 ");
-		mainPanel.addNext(btn7,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+
+
+		addLast(MainP,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		MainP.addLast(TopSP,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		MainP.addLast(BottomP,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		MainP.addLast(ExpertP,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnNorth = new mButton("N");
+		btnNorth.borderStyle = BDR_NOBORDER;
+		TopP.addNext(btnNorth,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnNorthDD = new mButton("DD?");
+		btnNorthDD.borderStyle = BDR_NOBORDER;
+		TopP.addNext(btnNorthDD,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnNorthMM = new mButton("MM.");
+		btnNorthMM.borderStyle = BDR_NOBORDER;
+		TopP.addNext(btnNorthMM,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnNorthSSS = new mButton("SSS");
+		btnNorthSSS.borderStyle = BDR_NOBORDER;
+		TopP.addLast(btnNorthSSS,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+
+		btnWest = new mButton("E");
+		btnWest.borderStyle = BDR_NOBORDER;
+		TopP.addNext(btnWest,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnEastDDD = new mButton("DDD?");
+		btnEastDDD.borderStyle = BDR_NOBORDER;
+		TopP.addNext(btnEastDDD,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnEastMM = new mButton("MM.");
+		btnEastMM.borderStyle = BDR_NOBORDER;
+		TopP.addNext(btnEastMM,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnEastSSS = new mButton("SSS");
+		btnEastSSS.borderStyle = BDR_NOBORDER;
+		TopP.addLast(btnEastSSS,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		TopSP.setControl(TopP);
+
+		btn7 = new mButton("  7  ");
+		BottomP.addNext(btn7,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
 		btn8 = new mButton(" 8 ");
-		mainPanel.addNext(btn8,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addNext(btn8,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
 		btn9 = new mButton(" 9 ");
-		mainPanel.addNext(btn9,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		btnDEL = new mButton("DEL");
-		mainPanel.addLast(btnDEL,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		btn4 = new mButton(" 4 ");
-		mainPanel.addNext(btn4,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addLast(btn9,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btn4 = new mButton("  4  ");
+		BottomP.addNext(btn4,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
 		btn5 = new mButton(" 5 ");
-		mainPanel.addNext(btn5,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addNext(btn5,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
 		btn6 = new mButton(" 6 ");
-		mainPanel.addNext(btn6,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		btnDELAll = new mButton("DEL All");
-		mainPanel.addLast(btnDELAll,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		btn1 = new mButton(" 1 ");
-		mainPanel.addNext(btn1,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addLast(btn6,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btn1 = new mButton("  1  ");
+		BottomP.addNext(btn1,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
 		btn2 = new mButton(" 2 ");
-		mainPanel.addNext(btn2,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addNext(btn2,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
 		btn3 = new mButton(" 3 ");
-		mainPanel.addLast(btn3,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		btn0 = new mButton(" 0 ");
-		mainPanel.addNext(btn0,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		btnPoint = new mButton(" . ");
-		mainPanel.addNext(btnPoint,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		btnOk = new mButton("OK");
-		mainPanel.addLast(btnOk,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addLast(btn3,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btn0 = new mButton("  0  ");
+		BottomP.addNext(btn0,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnEsc = new mButton("ESC");
+		BottomP.addNext(btnEsc,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnOk = new mButton("OK ");
+		BottomP.addLast(btnOk,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnBear = new mButton(MyLocale.getMsg(1415,"bearing"));
+		ExpertP.addNext(btnBear,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnGPS = new mButton(" GPS ");
+		ExpertP.addNext(btnGPS,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnExpert = new mButton("Expert");
+		ExpertP.addLast(btnExpert,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		//this.addLast(mainPanel,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
 
-		this.addLast(mainPanel,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		btnOk.takeFocus(ControlConstants.ByRequest);
+		//bearing Pannel
+		BearP.addNext(lblDistanc,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnDistanc = new mButton("        0");
+		btnDistanc.borderStyle = BDR_NOBORDER;
+		BearP.addNext(btnDistanc,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BearP.addLast(lblDist,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BearP.addNext(lblBearing,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		btnBearing = new mButton("        0");
+		btnBearing.borderStyle = BDR_NOBORDER;
+		BearP.addNext(btnBearing,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BearP.addLast(lblBear,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
 
-		int inpFontSize = ( 6 * pref.fontSize ) / 2;
+		int inpFontSize = ( 4 * pref.fontSize ) / 2;
 		Font inpNewFont = new Font("Helvetica", Font.PLAIN, inpFontSize );
-		lblValueShow.setFont(inpNewFont);
+		lblDistanc.setFont(inpNewFont);    lblBearing.setFont(inpNewFont);
+		btnDistanc.setFont(inpNewFont);    btnBearing.setFont(inpNewFont);
+		btnNorth.setFont(inpNewFont);      btnWest.setFont(inpNewFont);
+		btnNorthDD.setFont(inpNewFont);    btnEastDDD.setFont(inpNewFont);
+		btnNorthMM.setFont(inpNewFont);    btnEastMM.setFont(inpNewFont);
+		btnNorthSSS.setFont(inpNewFont);   btnEastSSS.setFont(inpNewFont);
+		lblBear.setFont(inpNewFont);	   lblDist.setFont(inpNewFont);
+		btnBear.setFont(inpNewFont);       btnExpert.setFont(inpNewFont);
+		btnGPS.setFont(inpNewFont);
 
+
 		int btnFontSize = ( 3 * pref.fontSize ) / 2;
 		Font btnNewFont = new Font("Helvetica", Font.PLAIN, btnFontSize );
-		lblTextShow.setFont(btnNewFont);
-		btnPoint.setFont(btnNewFont);
-		btn9.setFont(btnNewFont);
-		btn8.setFont(btnNewFont);
-		btn7.setFont(btnNewFont);
-		btn6.setFont(btnNewFont);
-		btn5.setFont(btnNewFont);
-		btn4.setFont(btnNewFont);
-		btn3.setFont(btnNewFont);
-		btn2.setFont(btnNewFont);
-		btn1.setFont(btnNewFont);
-		btn0.setFont(btnNewFont);
-		btnOk.setFont(btnNewFont);
-		btnDEL.setFont(btnNewFont);
-		btnDELAll.setFont(btnNewFont);
+		btn9.setFont(btnNewFont); btn8.setFont(btnNewFont);   btn7.setFont(btnNewFont);
+		btn6.setFont(btnNewFont); btn5.setFont(btnNewFont);   btn4.setFont(btnNewFont);
+		btn3.setFont(btnNewFont); btn2.setFont(btnNewFont);   btn1.setFont(btnNewFont);
+		btn0.setFont(btnNewFont); btnEsc.setFont(btnNewFont); btnOk.setFont(btnNewFont);
 
+		btnOk.takeFocus(ControlConstants.ByKeyboard);
+
+
 	}
 
+	private void disable(Control c) {c.modify(ControlConstants.Disabled,ControlConstants.TakesKeyFocus); }
+
+	private void changeTextButton()
+	{
+		btnNorthDD.setText(strBufCoords.substring(POS_NDD, LEN_NDD+POS_NDD));
+		btnNorthMM.setText(strBufCoords.substring(POS_NMM, LEN_NMM+POS_NMM));
+		btnNorthSSS.setText(strBufCoords.substring(POS_NSSS, LEN_NSSS+POS_NSSS));
+		btnEastDDD.setText(strBufCoords.substring(POS_EDDD, LEN_EDDD+POS_EDDD));
+		btnEastMM.setText(strBufCoords.substring(POS_EMM, LEN_EMM+POS_EMM));
+		btnEastSSS.setText(strBufCoords.substring(POS_ESSS, LEN_ESSS+POS_ESSS));
+		disable(btnBear);
+	}
+
+	private void changeTextButtonBearing()
+	{
+		btnDistanc.setText(strBufDistanc.toString());
+		btnBearing.setText(strBufBear.toString());
+	}
+
+
+	public void setCcords(CWPoint coords) {
+		StringBuffer strBufTemp =new StringBuffer(30);
+		strBufTemp.delete(0, strBufTemp.length());
+		strBufCoords.delete(0, strBufCoords.length());
+
+		if (coords.isValid()){
+
+				strBufTemp.append(coords.toString(TransformCoordinates.CW));
+
+				strBufCoords.append(strBufTemp.toString());
+				btnNorth.setText(strBufTemp.substring(0, 1));
+				btnNorthDD.setText(strBufTemp.substring(2, 5));
+				btnNorthMM.setText(strBufTemp.substring(6,9));
+				btnNorthSSS.setText(strBufTemp.substring(9,12));
+
+				btnWest.setText(strBufTemp.substring(13,14));
+				btnEastDDD.setText(strBufTemp.substring(15,19));
+				btnEastMM.setText(strBufTemp.substring(20,23));
+				btnEastSSS.setText(strBufTemp.substring(23,26));
+		}
+	}
+
+	private void setTextBuffer(char cValue)
+	{
+		if(bBearingPanelOnTop){
+			if(btnBearing.backGround  == ColorEdit){
+				if(strBufBear.length()  < 3) strBufBear.insert(strBufBear.length(), cValue);
+			    changeTextButtonBearing();
+			}else{
+				strBufDistanc.insert(strBufDistanc.length(), cValue);
+			    changeTextButtonBearing();
+			}
+
+		}else{
+		//'?' und '.' filtern
+			if(iPosition == POS_NMM-2
+				|| iPosition == POS_EMM-2
+				|| iPosition == POS_ESSS-1
+				|| iPosition == POS_NSSS-1
+				|| iPosition == POS_ESSS-1
+				|| iPosition == POS_EDDD-3)	iPosition++;
+
+			if(iPosition == POS_NMM-1
+				|| iPosition == POS_EMM-1
+				|| iPosition == POS_EDDD-2)	iPosition++;
+
+			if(iPosition == POS_EDDD-1)	iPosition++;
+
+			if(iPosition >= strBufCoords.length()){
+				iPosition = strBufCoords.length();
+				return;
+			}
+				strBufCoords.setCharAt(iPosition, cValue);
+			    iPosition++;
+			    changeTextButton();
+			    checkPosition();
+
+		}
+	}
+
+	private void checkPosition()
+	{
+		btnNorthDD.backGround  = btnNorthMM.backGround = btnNorthSSS.backGround = ColorNormal;
+		btnEastDDD.backGround  = btnEastSSS.backGround = btnEastMM.backGround = ColorNormal;
+		if(iPosition >= POS_NDD && iPosition < POS_NMM -2) btnNorthDD.backGround = ColorEdit;
+		if(iPosition >= POS_NMM-2 && iPosition < POS_NSSS -1) btnNorthMM.backGround = ColorEdit;
+		if(iPosition >= POS_NSSS-1 && iPosition < POS_EDDD-3) btnNorthSSS.backGround = ColorEdit;
+		if(iPosition >= POS_EDDD-3 && iPosition < POS_EMM -2) btnEastDDD.backGround  = ColorEdit;
+		if(iPosition >= POS_EMM-2 && iPosition < POS_ESSS -1) btnEastMM.backGround  = ColorEdit;
+		if(iPosition >= POS_ESSS-1) btnEastSSS.backGround  = ColorEdit;
+		this.repaint();
+	}
+
+	/*
+	 * set lat and lon by using coordinates in "CacheWolf" format
+	 * @param coord  String of type N 49? 33.167 E 011? 21.608
+	 * @param format only CWPoint.CW is supported
+	 */
+	public CWPoint getCoords(){
+		String CoordsNorth, CoordsEast;
+		CoordsNorth = btnNorth.getText()+ " " + btnNorthDD.getText()+ " " + btnNorthMM.getText()+ btnNorthSSS.getText();
+		CoordsEast = btnWest.getText()+ " " + btnEastDDD.getText()+ " " + btnEastMM.getText()+ btnEastSSS.getText();
+		CoordsBack.set(CoordsNorth + " " + CoordsEast , TransformCoordinates.CW);
+		return CoordsBack;
+	}
+
+
 	public void onEvent(Event ev){
 		if(ev instanceof ControlEvent && ev.type == ControlEvent.PRESSED){
+			// Button "E"
+			if (ev.target == btnWest){
+				if(btnWest.getText() == "E")
+					btnWest.setText("W");
+				else
+					btnWest.setText("E");
+			}
+			// Button "N"
+			if (ev.target == btnNorth){
+				if(btnNorth.getText() == "N")
+					btnNorth.setText("S");
+				else
+					btnNorth.setText("N");
+			}
+
+
+			// Button "Bearing"
+			if (ev.target == btnBearing){
+				btnBearing.backGround  = ColorEdit;
+				btnDistanc.backGround = ColorNormal;
+				strBufBear.delete(0, strBufBear.length());
+				changeTextButtonBearing();
+				this.repaint();
+			}
+
+			// Button "Distanc"
+			if (ev.target == btnDistanc){
+				btnBearing.backGround  = ColorNormal;
+				btnDistanc.backGround = ColorEdit;
+				strBufDistanc.delete(0, strBufDistanc.length());
+				changeTextButtonBearing();
+				this.repaint();
+			}
+
+
+			// Button "North DD"
+			if (ev.target == btnNorthDD){
+				iPosition=POS_NDD;
+				checkPosition();
+			}
+
+			// Button "North MM"
+			if (ev.target == btnNorthMM){
+				iPosition=POS_NMM;
+				checkPosition();
+			}
+
+			// Button "North SSS"
+			if (ev.target == btnNorthSSS){
+				iPosition=POS_NSSS;
+				checkPosition();
+			}
+
+			// Button "East DDD"
+			if (ev.target == btnEastDDD){
+				iPosition=POS_EDDD;
+				checkPosition();
+			}
+
+			// Button "East MM"
+			if (ev.target == btnEastMM){
+				iPosition=POS_EMM;
+				checkPosition();
+			}
+
+			// Button "East SSS"
+			if (ev.target == btnEastSSS){
+				iPosition=POS_ESSS;
+				checkPosition();
+			}
+
+			// Button "1"
 			if (ev.target == btn1){
-			   sText = lblValueShow.getText();
-			   sText += "1";
-			   //inpText.setText(sText);
-			   lblValueShow.setText(sText);
+				setTextBuffer('1');
 			}
-
+			// Button "2"
 			if (ev.target == btn2){
-			   sText = lblValueShow.getText();
-			   sText += "2";
-			   //inpText.setText(sText);
-			   lblValueShow.setText(sText);
+				setTextBuffer('2');
 			}
-
+			// Button "3"
 			if (ev.target == btn3){
-			   sText = lblValueShow.getText();
-			   sText += "3";
-			   //inpText.setText(sText);
-			   lblValueShow.setText(sText);
+				setTextBuffer('3');
 			}
-
+			// Button "4"
 			if (ev.target == btn4){
-			   sText = lblValueShow.getText();
-			   sText += "4";
-			   //inpText.setText(sText);
-			   lblValueShow.setText(sText);
+				setTextBuffer('4');
 			}
-
+			// Button "5"
 			if (ev.target == btn5){
-			   sText = lblValueShow.getText();
-			   sText += "5";
-			   //inpText.setText(sText);
-			   lblValueShow.setText(sText);
+				setTextBuffer('5');
 			}
-
+			// Button "6"
 			if (ev.target == btn6){
-			   sText = lblValueShow.getText();
-			   sText += "6";
-			   //inpText.setText(sText);
-			   lblValueShow.setText(sText);
+				setTextBuffer('6');
 			}
-
+			// Button "7"
 			if (ev.target == btn7){
-			   sText = lblValueShow.getText();
-			   sText += "7";
-			   //inpText.setText(sText);
-			   lblValueShow.setText(sText);
+				setTextBuffer('7');
 			}
-
+			// Button "8"
 			if (ev.target == btn8){
-			   sText = lblValueShow.getText();
-			   sText += "8";
-			   //inpText.setText(sText);
-			   lblValueShow.setText(sText);
+				setTextBuffer('8');
 			}
-
+			// Button "9"
 			if (ev.target == btn9){
-			   sText = lblValueShow.getText();
-			   sText += "9";
-			   //inpText.setText(sText);
-			   lblValueShow.setText(sText);
+				setTextBuffer('9');
 			}
-
+			// Button "0"
 			if (ev.target == btn0){
-			   sText = lblValueShow.getText();
-			   sText += "0";
-			   //inpText.setText(sText);
-			   lblValueShow.setText(sText);
+				setTextBuffer('0');
 			}
 
-			if (ev.target == btnPoint){
-			   sText = lblValueShow.getText();
-			   sText += ".";
-			   //inpText.setText(sText);
-			   lblValueShow.setText(sText);
+			// Button "OK"
+			if (ev.target == btnOk ){
+				iPosition = 0;
+				if(bBearingPanelOnTop){
+					CoordsBear = this.getCoords();
+					bd.degrees = Common.parseDouble(btnBearing.getText());
+					bd.distance = Common.parseDouble(btnDistanc.getText());
+					// only meters !!
+					setCcords(CoordsBear.project(bd.degrees, bd.distance/1000.0));
+					bBearingPanelOnTop = false;
+				}
+				this.close(IDOK);
 			}
-
-			if (ev.target == btnOk ){
-				inpText.setText(lblValueShow.getText());
+			// Button "ESC"
+			if (ev.target == btnEsc ){
+				iPosition = 0;
 				this.close(0);
 			}
 
-			if (ev.target == btnDEL){
-			   sText = lblValueShow.getText();
-			   if(sText != "")
-				sText = sText.substring(0, sText.length()-1);
-			   //inpText.setText(sText);
-			   lblValueShow.setText(sText);
+			// Button "Bearing"
+			if (ev.target == btnBear ){
+				    disable(btnExpert);
+				    disable(btnGPS);
+				    TopSP.setControl(BearP,true);
+				    bBearingPanelOnTop = true;
+
+				}
+
+			// Button "GPS"
+			if (ev.target == btnGPS){
+				Navigate nav=Global.mainTab.nav;
+				if (nav.gpsPos.isValid()){
+					setCcords(nav.gpsPos);
+				}
 			}
 
-			if (ev.target == btnDELAll){
-			   //inpText.setText("");
-				lblValueShow.setText("");
+
+			// Button "Expert"
+			if (ev.target == btnExpert ){
+				CoordsScreen cs = new CoordsScreen();
+				if (myNavigation.destination.isValid())	cs.setFields(myNavigation.destination, CoordsScreen.getLocalSystem(currFormatSel));
+				else cs.setFields(new CWPoint(0,0), CoordsScreen.getLocalSystem(currFormatSel));
+				if (cs.execute(null, CellConstants.TOP) == FormBase.IDOK){
+					setCcords(cs.getCoords());
+					this.close(IDOK);
+				}
+
 			}
+
 		}
 	}
 

Modified: trunk/src/CacheWolf/navi/GotoPanel.java
===================================================================
--- trunk/src/CacheWolf/navi/GotoPanel.java	2010-03-21 13:45:16 UTC (rev 2521)
+++ trunk/src/CacheWolf/navi/GotoPanel.java	2010-03-23 21:26:35 UTC (rev 2522)
@@ -5,6 +5,7 @@
 import CacheWolf.CacheHolder;
 import CacheWolf.CacheType;
 import CacheWolf.CoordsScreen;
+import CacheWolf.InputScreen;
 import CacheWolf.DetailsPanel;
 import CacheWolf.Global;
 import CacheWolf.MainTab;
@@ -381,11 +382,20 @@
 			}
 			// change destination waypoint
 			if (ev.target == btnGoto){
-				CoordsScreen cs = new CoordsScreen();
-				if (myNavigation.destination.isValid())	cs.setFields(myNavigation.destination, CoordsScreen.getLocalSystem(currFormatSel));
-				else cs.setFields(new CWPoint(0,0), CoordsScreen.getLocalSystem(currFormatSel));
-				if (cs.execute(null, CellConstants.TOP) == FormBase.IDOK)
-					setDestination(cs.getCoords());
+				if(Vm.isMobile()){
+					InputScreen InScr = new InputScreen(myNavigation , currFormatSel);
+					if (myNavigation.destination.isValid())	InScr.setCcords(myNavigation.destination);
+					else InScr.setCcords(new CWPoint(0,0));
+					if (InScr.execute(null, CellConstants.TOP) == FormBase.IDOK)
+						setDestination(InScr.getCoords());
+				}else
+				{
+				        CoordsScreen cs = new CoordsScreen();
+				        if (myNavigation.destination.isValid())	cs.setFields(myNavigation.destination, CoordsScreen.getLocalSystem(currFormatSel));
+				        else cs.setFields(new CWPoint(0,0), CoordsScreen.getLocalSystem(currFormatSel));
+				        if (cs.execute(null, CellConstants.TOP) == FormBase.IDOK)
+					        setDestination(cs.getCoords());
+                                }
 			}
 		}
 		super.onEvent(ev);



From araber95 at mail.berlios.de  Wed Mar 24 23:37:21 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 24 Mar 2010 23:37:21 +0100
Subject: [Cachewolf-svn] r2523 - trunk/src/CacheWolf/imp
Message-ID: <201003242237.o2OMbLHK002036@sheep.berlios.de>

Author: araber95
Date: 2010-03-24 23:37:20 +0100 (Wed, 24 Mar 2010)
New Revision: 2523

Modified:
   trunk/src/CacheWolf/imp/GPXImporter.java
Log:
"Update in Cachebeschreibung" bei GPX-Import : http://www.geoclub.de/viewtopic.php?f=40&t=43288&sid=86bc3adb334e6125ade6624231962718

Modified: trunk/src/CacheWolf/imp/GPXImporter.java
===================================================================
--- trunk/src/CacheWolf/imp/GPXImporter.java	2010-03-23 21:26:35 UTC (rev 2522)
+++ trunk/src/CacheWolf/imp/GPXImporter.java	2010-03-24 22:37:20 UTC (rev 2523)
@@ -355,6 +355,7 @@
 				// Preserve images: Copy images from old cache version because here we didn't add
 				// any image information to the holder object.
 				holder.getCacheDetails(false).images = oldCh.getCacheDetails(true).images;
+				oldCh.initStates(false);
 				oldCh.update(holder);
 				oldCh.save();
 			}



From apreisser at mail.berlios.de  Sat Mar 27 13:58:43 2010
From: apreisser at mail.berlios.de (apreisser at mail.berlios.de)
Date: Sat, 27 Mar 2010 13:58:43 +0100
Subject: [Cachewolf-svn] r2524 - trunk/src/CacheWolf/navi
Message-ID: <201003271258.o2RCwhUF002934@sheep.berlios.de>

Author: apreisser
Date: 2010-03-27 13:58:36 +0100 (Sat, 27 Mar 2010)
New Revision: 2524

Modified:
   trunk/src/CacheWolf/navi/MovingMap.java
Log:
Bugfix: Hide/unhide map does not hide all map-tiles.

Modified: trunk/src/CacheWolf/navi/MovingMap.java
===================================================================
--- trunk/src/CacheWolf/navi/MovingMap.java	2010-03-24 22:37:20 UTC (rev 2523)
+++ trunk/src/CacheWolf/navi/MovingMap.java	2010-03-27 12:58:36 UTC (rev 2524)
@@ -52,6 +52,7 @@
 import ewe.ui.WindowEvent;
 import ewe.ui.mButton;
 import ewe.ui.mList;
+import ewe.util.Iterator;
 import ewe.util.Vector;
 
 /**
@@ -1746,6 +1747,12 @@
 	public void hideMap() {
 		if (mmp != null && mmp.mapImage != null)
 			mmp.mapImage.hide();
+		for(Iterator i=mmp.images.iterator(); i.hasNext ();){
+			AniImage image = (AniImage) i.next();
+			if (image instanceof MapImage && !(image instanceof MapSymbol) && !(image instanceof TrackOverlay)){
+				((MapImage) image).hide();
+			}
+		}
 		mapHidden = true;
 		repaintNow();
 	}
@@ -1753,6 +1760,12 @@
 	public void showMap() {
 		if (mmp != null && mmp.mapImage != null) mmp.mapImage.unhide();
 		mapHidden = false;
+		for(Iterator i=mmp.images.iterator(); i.hasNext ();){
+			AniImage image = (AniImage) i.next();
+			if (image instanceof MapImage && !(image instanceof MapSymbol) && !(image instanceof TrackOverlay)){
+				((MapImage) image).unhide();
+			}
+		}
 		repaintNow();
 	}
 



From mik77 at mail.berlios.de  Sat Mar 27 15:47:45 2010
From: mik77 at mail.berlios.de (mik77 at mail.berlios.de)
Date: Sat, 27 Mar 2010 15:47:45 +0100
Subject: [Cachewolf-svn] r2525 - trunk/res_noewe/attributes
Message-ID: <201003271447.o2REljhv010101@sheep.berlios.de>

Author: mik77
Date: 2010-03-27 15:47:06 +0100 (Sat, 27 Mar 2010)
New Revision: 2525

Modified:
   trunk/res_noewe/attributes/available-no.gif
   trunk/res_noewe/attributes/available-non.gif
   trunk/res_noewe/attributes/available-yes.gif
   trunk/res_noewe/attributes/boat-no.gif
   trunk/res_noewe/attributes/boat-non.gif
   trunk/res_noewe/attributes/boat-yes.gif
   trunk/res_noewe/attributes/cliff-no.gif
   trunk/res_noewe/attributes/cliff-non.gif
   trunk/res_noewe/attributes/cliff-yes.gif
   trunk/res_noewe/attributes/climbing-no.gif
   trunk/res_noewe/attributes/climbing-non.gif
   trunk/res_noewe/attributes/climbing-yes.gif
   trunk/res_noewe/attributes/compass-no.gif
   trunk/res_noewe/attributes/compass-non.gif
   trunk/res_noewe/attributes/compass-yes.gif
   trunk/res_noewe/attributes/danger-no.gif
   trunk/res_noewe/attributes/danger-non.gif
   trunk/res_noewe/attributes/danger-yes.gif
   trunk/res_noewe/attributes/fee-no.gif
   trunk/res_noewe/attributes/fee-non.gif
   trunk/res_noewe/attributes/fee-yes.gif
   trunk/res_noewe/attributes/firstaid-no.gif
   trunk/res_noewe/attributes/firstaid-non.gif
   trunk/res_noewe/attributes/firstaid-yes.gif
   trunk/res_noewe/attributes/flashlight-no.gif
   trunk/res_noewe/attributes/flashlight-non.gif
   trunk/res_noewe/attributes/flashlight-yes.gif
   trunk/res_noewe/attributes/hiking-no.gif
   trunk/res_noewe/attributes/hiking-non.gif
   trunk/res_noewe/attributes/hiking-yes.gif
   trunk/res_noewe/attributes/hunting-no.gif
   trunk/res_noewe/attributes/hunting-non.gif
   trunk/res_noewe/attributes/hunting-yes.gif
   trunk/res_noewe/attributes/kids-no.gif
   trunk/res_noewe/attributes/kids-non.gif
   trunk/res_noewe/attributes/kids-yes.gif
   trunk/res_noewe/attributes/mine-no.gif
   trunk/res_noewe/attributes/mine-non.gif
   trunk/res_noewe/attributes/mine-yes.gif
   trunk/res_noewe/attributes/night-no.gif
   trunk/res_noewe/attributes/night-non.gif
   trunk/res_noewe/attributes/night-yes.gif
   trunk/res_noewe/attributes/oconly-no.gif
   trunk/res_noewe/attributes/onehour-yes.gif
   trunk/res_noewe/attributes/parking-no.gif
   trunk/res_noewe/attributes/parking-non.gif
   trunk/res_noewe/attributes/parking-yes.gif
   trunk/res_noewe/attributes/phone-no.gif
   trunk/res_noewe/attributes/phone-non.gif
   trunk/res_noewe/attributes/phone-yes.gif
   trunk/res_noewe/attributes/poisonoak-no.gif
   trunk/res_noewe/attributes/poisonoak-non.gif
   trunk/res_noewe/attributes/poisonoak-yes.gif
   trunk/res_noewe/attributes/public-no.gif
   trunk/res_noewe/attributes/public-non.gif
   trunk/res_noewe/attributes/public-yes.gif
   trunk/res_noewe/attributes/rappelling-no.gif
   trunk/res_noewe/attributes/rappelling-non.gif
   trunk/res_noewe/attributes/rappelling-yes.gif
   trunk/res_noewe/attributes/restrooms-no.gif
   trunk/res_noewe/attributes/restrooms-non.gif
   trunk/res_noewe/attributes/restrooms-yes.gif
   trunk/res_noewe/attributes/scuba-no.gif
   trunk/res_noewe/attributes/scuba-non.gif
   trunk/res_noewe/attributes/scuba-yes.gif
   trunk/res_noewe/attributes/swimming-no.gif
   trunk/res_noewe/attributes/swimming-non.gif
   trunk/res_noewe/attributes/swimming-yes.gif
   trunk/res_noewe/attributes/thorn-no.gif
   trunk/res_noewe/attributes/thorn-non.gif
   trunk/res_noewe/attributes/thorn-yes.gif
   trunk/res_noewe/attributes/ticks-no.gif
   trunk/res_noewe/attributes/ticks-non.gif
   trunk/res_noewe/attributes/ticks-yes.gif
   trunk/res_noewe/attributes/wading-no.gif
   trunk/res_noewe/attributes/wading-non.gif
   trunk/res_noewe/attributes/wading-yes.gif
   trunk/res_noewe/attributes/water-no.gif
   trunk/res_noewe/attributes/water-non.gif
   trunk/res_noewe/attributes/water-yes.gif
   trunk/res_noewe/attributes/wheelchair-yes.gif
   trunk/res_noewe/attributes/winter-no.gif
   trunk/res_noewe/attributes/winter-non.gif
   trunk/res_noewe/attributes/winter-yes.gif
Log:
reverted attributes to GC design when available

Modified: trunk/res_noewe/attributes/available-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/available-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/available-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/boat-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/boat-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/boat-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/cliff-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/cliff-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/cliff-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/climbing-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/climbing-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/climbing-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/compass-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/compass-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/compass-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/danger-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/danger-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/danger-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/fee-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/fee-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/fee-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/firstaid-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/firstaid-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/firstaid-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/flashlight-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/flashlight-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/flashlight-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/hiking-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/hiking-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/hiking-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/hunting-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/hunting-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/hunting-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/kids-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/kids-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/kids-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/mine-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/mine-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/mine-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/night-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/night-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/night-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/oconly-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/onehour-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/parking-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/parking-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/parking-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/phone-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/phone-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/phone-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/poisonoak-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/poisonoak-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/poisonoak-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/public-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/public-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/public-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/rappelling-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/rappelling-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/rappelling-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/restrooms-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/restrooms-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/restrooms-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/scuba-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/scuba-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/scuba-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/swimming-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/swimming-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/swimming-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/thorn-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/thorn-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/thorn-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/ticks-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/ticks-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/ticks-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/wading-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/wading-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/wading-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/water-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/water-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/water-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/wheelchair-yes.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/winter-no.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/winter-non.gif
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/attributes/winter-yes.gif
===================================================================
(Binary files differ)



From mik77 at mail.berlios.de  Sat Mar 27 16:34:33 2010
From: mik77 at mail.berlios.de (mik77 at mail.berlios.de)
Date: Sat, 27 Mar 2010 16:34:33 +0100
Subject: [Cachewolf-svn] r2526 - trunk/src/CacheWolf/imp
Message-ID: <201003271534.o2RFYXTV012873@sheep.berlios.de>

Author: mik77
Date: 2010-03-27 16:34:31 +0100 (Sat, 27 Mar 2010)
New Revision: 2526

Modified:
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
some improvements in spider aborting logic

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-03-27 14:47:06 UTC (rev 2525)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-03-27 15:34:31 UTC (rev 2526)
@@ -365,12 +365,13 @@
 						if(ch == null){ // not in DB
 							if ( gotDistance >= minDistance &&
 									 directionOK(directions,getDirection(CacheDescriptionGC))  &&
-									 doPMCache(CacheDescriptionGC) ){
+									 doPMCache(CacheDescriptionGC) &&
+									 cachesToLoad.size() < maxNew){
 							cachesToLoad.add(chWaypoint);
 							}
 							else {cachesToUpdate.remove( chWaypoint );}
 							if(cachesToLoad.size() >= maxNew) {
-								if(maxUpdate!=Integer.MAX_VALUE) { maxDistance=0; }
+								if(maxUpdate!=Integer.MAX_VALUE || cachesToUpdate.size() <= cachesShouldUpdate.size()) { maxDistance=0; }
 							}
 						}
 						else {



From araber95 at mail.berlios.de  Sat Mar 27 17:52:55 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sat, 27 Mar 2010 17:52:55 +0100
Subject: [Cachewolf-svn] r2527 - trunk/src/CacheWolf/exp
Message-ID: <201003271652.o2RGqtt4018722@sheep.berlios.de>

Author: araber95
Date: 2010-03-27 17:52:53 +0100 (Sat, 27 Mar 2010)
New Revision: 2527

Modified:
   trunk/src/CacheWolf/exp/HTMLExporter.java
Log:
changed relPath to absPath for html-templates (progdir/templates/): see http://www.geoclub.de/viewtopic.php?f=40&t=43342&sid=7f7984cf29e7b1ce33c16c429381769f


Modified: trunk/src/CacheWolf/exp/HTMLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/HTMLExporter.java	2010-03-27 15:34:31 UTC (rev 2526)
+++ trunk/src/CacheWolf/exp/HTMLExporter.java	2010-03-27 16:52:53 UTC (rev 2527)
@@ -23,13 +23,13 @@
 	Preferences pref;
 	Profile profile;
 	String [] template_init_index = {
-	 		"filename",  "templates"+FileBase.separator+"index.tpl",
+	 		"filename",  FileBase.getProgramDirectory()+FileBase.separator+"templates"+FileBase.separator+"index.tpl",
 	 		"case_sensitive", "true",
 	 		"max_includes",   "5"
 	 		//,"debug", "true"
 	 	};
 	String [] template_init_page = {
-	 		"filename",  "templates"+FileBase.separator+"page.tpl",
+	 		"filename",  FileBase.getProgramDirectory()+FileBase.separator+"templates"+FileBase.separator+"page.tpl",
 	 		"case_sensitive", "true",
 	 		"max_includes",   "5"
 	 	};



From mik77 at mail.berlios.de  Sun Mar 28 10:51:49 2010
From: mik77 at mail.berlios.de (mik77 at mail.berlios.de)
Date: Sun, 28 Mar 2010 10:51:49 +0200
Subject: [Cachewolf-svn] r2528 - trunk/src/CacheWolf/imp
Message-ID: <201003280851.o2S8pn2d029375@sheep.berlios.de>

Author: mik77
Date: 2010-03-28 10:51:46 +0200 (Sun, 28 Mar 2010)
New Revision: 2528

Modified:
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
Update archived caches even if number of updates is restricted (if number of updates does not exceed this restriction)

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-03-27 16:52:53 UTC (rev 2527)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-03-28 08:51:46 UTC (rev 2528)
@@ -308,33 +308,32 @@
 		Hashtable cachesToUpdate = new Hashtable(cacheDB.size());
 		Hashtable cachesShouldUpdate = new Hashtable(cacheDB.size()); // for don't loose the already done work
 
-		if (maxUpdate == Integer.MAX_VALUE) {
-			double distanceInKm = maxDistance;
-			if ( Global.getPref().metricSystem == Metrics.IMPERIAL ) {
-				distanceInKm = Metrics.convertUnit(maxDistance, Metrics.MILES, Metrics.KILOMETER);
-			}
-			// to get in meantime possibly archived caches
-			for(int i = 0; i<cacheDB.size();i++){
-				ch = cacheDB.get(i);
-				if (spiderAllFinds) {
-					if ( (ch.getWayPoint().substring(0,2).equalsIgnoreCase("GC"))
-					     && !ch.is_black() ) {
-						cachesToUpdate.put(ch.getWayPoint(), ch);
-					}
-				} else {
-					if ( (!ch.is_archived())
-						 && (ch.kilom <= distanceInKm)
-						 && !(doNotgetFound && (ch.is_found() || ch.is_owned()))
-						 && (ch.getWayPoint().substring(0,2).equalsIgnoreCase("GC"))
-						 && ( (restrictedCacheType == CacheType.CW_TYPE_ERROR) || (ch.getType() == restrictedCacheType) )
-						 && !ch.is_black() ) {
-						cachesToUpdate.put(ch.getWayPoint(), ch);
-					}
+		double distanceInKm = maxDistance;
+		if ( Global.getPref().metricSystem == Metrics.IMPERIAL ) {
+			distanceInKm = Metrics.convertUnit(maxDistance, Metrics.MILES, Metrics.KILOMETER);
+		}
+		// to get in meantime possibly archived caches
+		for(int i = 0; i<cacheDB.size();i++){
+			ch = cacheDB.get(i);
+			if (spiderAllFinds) {
+				if ( (ch.getWayPoint().substring(0,2).equalsIgnoreCase("GC"))
+						&& !ch.is_black() ) {
+					cachesToUpdate.put(ch.getWayPoint(), ch);
 				}
+			} else {
+				if ( (!ch.is_archived())
+						&& (ch.kilom <= distanceInKm)
+						&& !(doNotgetFound && (ch.is_found() || ch.is_owned()))
+						&& (ch.getWayPoint().substring(0,2).equalsIgnoreCase("GC"))
+						&& ( (restrictedCacheType == CacheType.CW_TYPE_ERROR) || (ch.getType() == restrictedCacheType) )
+						&& !ch.is_black() ) {
+					cachesToUpdate.put(ch.getWayPoint(), ch);
+				}
 			}
 		}
+
 		int startSize=cachesToUpdate.size();
-
+		
 		//=======
 		// Prepare list of all caches that are to be spidered
 		//=======
@@ -370,9 +369,6 @@
 							cachesToLoad.add(chWaypoint);
 							}
 							else {cachesToUpdate.remove( chWaypoint );}
-							if(cachesToLoad.size() >= maxNew) {
-								if(maxUpdate!=Integer.MAX_VALUE || cachesToUpdate.size() <= cachesShouldUpdate.size()) { maxDistance=0; }
-							}
 						}
 						else {
 							if (maxUpdate>0) {
@@ -383,6 +379,16 @@
 									if (maxUpdate == Integer.MAX_VALUE) cachesToUpdate.remove( chWaypoint );
 							}
 						}
+						if(cachesToLoad.size() >= maxNew) {
+							if(maxUpdate!=Integer.MAX_VALUE) {
+								maxDistance=0;
+								cachesToUpdate.clear();
+							} else {
+								if ( cachesToUpdate.size() <= cachesShouldUpdate.size() ) {
+									maxDistance=0;
+								}
+							}
+						}
 					} else maxDistance = 0; // finish listing
 					// get next row of table (next Cache Description) of this htmlListPage
 					RexPropLine.searchFrom(tableOfHtmlListPage, RexPropLine.matchedTo());
@@ -423,7 +429,7 @@
 
 		int spiderErrors = 0;
 		if (cachesToUpdate.size() == startSize) cachesToUpdate.clear(); // there must be something wrong
-		if (cachesToUpdate.size() == 0) cachesToUpdate=cachesShouldUpdate;
+		if (cachesToUpdate.size() == 0 || cachesToUpdate.size() > maxUpdate) cachesToUpdate=cachesShouldUpdate;
 
 		if ( cachesToUpdate.size() > 0 ) {
 			switch (pref.spiderUpdates) {



From araber95 at mail.berlios.de  Sun Mar 28 19:36:09 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun, 28 Mar 2010 19:36:09 +0200
Subject: [Cachewolf-svn] r2529 - trunk/src/CacheWolf/imp
Message-ID: <201003281736.o2SHa98d025677@sheep.berlios.de>

Author: araber95
Date: 2010-03-28 19:36:07 +0200 (Sun, 28 Mar 2010)
New Revision: 2529

Modified:
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
quick&dirty for http://www.geoclub.de/viewtopic.php?f=40&t=43379&p=688082#p688082

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-03-28 08:51:46 UTC (rev 2528)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-03-28 17:36:07 UTC (rev 2529)
@@ -366,6 +366,7 @@
 									 directionOK(directions,getDirection(CacheDescriptionGC))  &&
 									 doPMCache(CacheDescriptionGC) &&
 									 cachesToLoad.size() < maxNew){
+								if (CacheDescriptionGC.indexOf(propFound)!=-1) chWaypoint=chWaypoint+"found";
 							cachesToLoad.add(chWaypoint);
 							}
 							else {cachesToUpdate.remove( chWaypoint );}
@@ -451,12 +452,14 @@
 			if (infB.isClosed) break;
 
 			String wpt = (String)cachesToLoad.get(i);
+			boolean is_found = wpt.indexOf("found")!=-1;
+			if (is_found) wpt=wpt.substring(0,wpt.indexOf("found"));
 			// Get only caches not already available in the DB
 			if(cacheDB.getIndex(wpt) == -1){
 				infB.setInfo(MyLocale.getMsg(5513,"Loading: ") + wpt +" (" + (i+1) + " / " + totalCachesToLoad + ")");
 				CacheHolder holder = new CacheHolder();
 				holder.setWayPoint(wpt);
-				int test = getCacheByWaypointName(holder,false,getImages,getTBs,doNotgetFound,loadAllLogs);
+				int test = getCacheByWaypointName(holder,false,getImages,getTBs,doNotgetFound,loadAllLogs||is_found);
 				if (test == SPIDER_CANCEL) {
 					infB.close(0);
 					break;



From araber95 at mail.berlios.de  Wed Mar 31 12:52:54 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 31 Mar 2010 12:52:54 +0200
Subject: [Cachewolf-svn] r2530 - trunk/res_noewe/webmapservices
Message-ID: <201003311052.o2VAqsfj025714@sheep.berlios.de>

Author: araber95
Date: 2010-03-31 12:52:44 +0200 (Wed, 31 Mar 2010)
New Revision: 2530

Modified:
   trunk/res_noewe/webmapservices/cz-vy_p.wms
   trunk/res_noewe/webmapservices/cz-vy_t10.wms
   trunk/res_noewe/webmapservices/cz-vy_t50.wms
   trunk/res_noewe/webmapservices/de-bw_p.wms
   trunk/res_noewe/webmapservices/de-bw_t50.wms
   trunk/res_noewe/webmapservices/de-by_photo.wms
   trunk/res_noewe/webmapservices/de-by_topo_50.wms
   trunk/res_noewe/webmapservices/de-he_photo.wms
   trunk/res_noewe/webmapservices/de-he_topo_100.wms
   trunk/res_noewe/webmapservices/de-he_topo_50.wms
   trunk/res_noewe/webmapservices/de_topo_1000.wms
   trunk/res_noewe/webmapservices/de_topo_200.wms
   trunk/res_noewe/webmapservices/de_topo_500.wms
   trunk/res_noewe/webmapservices/eu_t_osm-uni-bonn.wms
   trunk/res_noewe/webmapservices/it-52_t10.wms
   trunk/res_noewe/webmapservices/it-52_t10bw.wms
Log:
check of wms-servers

Modified: trunk/res_noewe/webmapservices/cz-vy_p.wms
===================================================================
--- trunk/res_noewe/webmapservices/cz-vy_p.wms	2010-03-28 17:36:07 UTC (rev 2529)
+++ trunk/res_noewe/webmapservices/cz-vy_p.wms	2010-03-31 10:52:44 UTC (rev 2530)
@@ -1,37 +1,43 @@
-TakenFromUrl:       http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?
-GetCapabilitiesUrl: http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
-Name:               CZ.VY Vysocina  p SF=0,7
-MapType:                        photo
-MainUrl:            http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?
+#TakenFromUrl:       http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?
+#GetCapabilitiesUrl: http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
+Name:               CZ.VY Vysocina  p SF=..1,2..6,7..30,35..150
+#Name:               CZ.Region Hochland Hauptstadt Jihlava  t10 SF=1..3?
+#MapType:                        topo
+#MainUrl:            http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?
+TakenFromUrl:       http://www.kr-vysocina.cz/vismo5/dokumenty2.asp?id_org=450008&id=1478806&p1=30554
+GetCapabilitiesUrl: http://mapy.kr-vysocina.cz/cgi-bin/wms1?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
+MapType:                        topo
+MainUrl:            http://mapy.kr-vysocina.cz/cgi-bin/wms1?
 ServiceTypeUrlPart: SERVICE=WMS
 VersionUrlPart:     VERSION=1.1.1
 CoordinateReferenceSystemCacheWolf:  4326
 CoordinateReferenceSystemUrlPart: SRS=EPSG:4326
 RequestUrlPart:     REQUEST=GetMap
-#LayersUrlPart:     LAYERS=zm50|ZM 1:50 000||
-#LayersUrlPart:     LAYERS=rzm10|RZM 1:10 000||
-#LayersUrlPart:     LAYERS=orto_bw|Ortofoto BW 0,7m/px||
-#LayersUrlPart:     LAYERS=technol|Technologie||
-#LayersUrlPart:     LAYERS=plan|Planovan? stav||
-#LayersUrlPart:     LAYERS=hotspot|HOTSPOT||
-#LayersUrlPart:     LAYERS=cdoptika|CDoptika||
-#LayersUrlPart:     LAYERS=taliasonera|TeliaSonera||
-#LayersUrlPart:     LAYERS=selfnet|Selfnet||
-#LayersUrlPart:     LAYERS=jme_optika|JME_optika||
-#LayersUrlPart:     LAYERS=optokon|Optokon||
-#LayersUrlPart:     LAYERS=optika|Optika ostatn?||
-#LayersUrlPart:     LAYERS=obce2005|Obce|0|NaN
-#LayersUrlPart:     LAYERS=pov_hr|OPV|NaN|99999999
-#LayersUrlPart:     LAYERS=orp_hr|ORP|NaN|99999999
-#LayersUrlPart:     LAYERS=kraje_hr|Kraje||
-#LayersUrlPart:     LAYERS=cesko_hr|CR||
-LayersUrlPart:     LAYERS=orto_bw
+#LayersUrlPart:     LAYERS=wms_vysocina05|WMS Kraje Vysocina||
+#LayersUrlPart:     LAYERS=adresy|Adresn? body|0|19.9561139371855
+#LayersUrlPart:     LAYERS=okresy|Okresy||
+#LayersUrlPart:     LAYERS=ku|Katastr?ln? ?zem?|0|399.12227874371
+#LayersUrlPart:     LAYERS=obce|Obce||
+#LayersUrlPart:     LAYERS=obce2|Poveren? obce||
+#LayersUrlPart:     LAYERS=opv|Poveren? obce - hranice||
+#LayersUrlPart:     LAYERS=obce3|Obce s roz??renou pusobnost?||
+#LayersUrlPart:     LAYERS=orp|Obce s roz??renou pusobnost? - hranice||
+#LayersUrlPart:     LAYERS=stav|Stavebn? ?rady||
+#LayersUrlPart:     LAYERS=zm50|Z?kladn? mapy 1:50000|9.97805696859274|74.8354272644456
+#LayersUrlPart:     LAYERS=zm10|Z?kladn? mapy 1:10000|0|9.97805696859274
+#LayersUrlPart:     LAYERS=orto_bw.jpg|Ortofoto cernob?l?|0|14.9670854528891
+#LayersUrlPart:     LAYERS=barva.jpg|barva.jpg||
+#LayersUrlPart:     LAYERS=orto_col|Ortofoto barevn? 250m/px|1.99561139371855|14.9670854528891
+#LayersUrlPart:     LAYERS=copy_geodis|copy_geodis||
+LayersUrlPart:     LAYERS=wms_vysocina05
 StylesUrlPart:     STYLES=
 ImageFormatUrlPart:FORMAT=image/png
-BoundingBoxTopLeftWGS84: N 49.9457 E 14.7989
-BoundingBoxButtomRightWGS84: N 48.8765 E 16.5340
+#BoundingBoxTopLeftWGS84: N 49.9457 E 14.7989
+#BoundingBoxButtomRightWGS84: N 48.8765 E 16.5340
+BoundingBoxTopLeftWGS84: N 49.9841 E 14.7605
+BoundingBoxButtomRightWGS84: N 48.7959 E 16.5811
 #BBox_Mitte: N 49.41110624465 E 15.6664623227
 #MinScale:   0
 #MaxScale:   45
-RecommendedScale:   0,7
+RecommendedScale:   0,3 3 7 120
 ImageFileExtension: .png

Modified: trunk/res_noewe/webmapservices/cz-vy_t10.wms
===================================================================
--- trunk/res_noewe/webmapservices/cz-vy_t10.wms	2010-03-28 17:36:07 UTC (rev 2529)
+++ trunk/res_noewe/webmapservices/cz-vy_t10.wms	2010-03-31 10:52:44 UTC (rev 2530)
@@ -1,36 +1,41 @@
-TakenFromUrl:       http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?
-GetCapabilitiesUrl: http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
+#TakenFromUrl:       http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?
+#GetCapabilitiesUrl: http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
 Name:               CZ.VY Vysocina  t10 SF=1..3?
 #Name:               CZ.Region Hochland Hauptstadt Jihlava  t10 SF=1..3?
+#MapType:                        topo
+#MainUrl:            http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?
+TakenFromUrl:       http://www.kr-vysocina.cz/vismo5/dokumenty2.asp?id_org=450008&id=1478806&p1=30554
+GetCapabilitiesUrl: http://mapy.kr-vysocina.cz/cgi-bin/wms1?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
 MapType:                        topo
-MainUrl:            http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?
+MainUrl:            http://mapy.kr-vysocina.cz/cgi-bin/wms1?
 ServiceTypeUrlPart: SERVICE=WMS
 VersionUrlPart:     VERSION=1.1.1
 CoordinateReferenceSystemCacheWolf:  4326
 CoordinateReferenceSystemUrlPart: SRS=EPSG:4326
 RequestUrlPart:     REQUEST=GetMap
-#LayersUrlPart:     LAYERS=zm50|ZM 1:50 000||
-#LayersUrlPart:     LAYERS=rzm10|RZM 1:10 000||
-#LayersUrlPart:     LAYERS=orto_bw|Ortofoto BW 0,7m/px||
-#LayersUrlPart:     LAYERS=technol|Technologie||
-#LayersUrlPart:     LAYERS=plan|Planovan? stav||
-#LayersUrlPart:     LAYERS=hotspot|HOTSPOT||
-#LayersUrlPart:     LAYERS=cdoptika|CDoptika||
-#LayersUrlPart:     LAYERS=taliasonera|TeliaSonera||
-#LayersUrlPart:     LAYERS=selfnet|Selfnet||
-#LayersUrlPart:     LAYERS=jme_optika|JME_optika||
-#LayersUrlPart:     LAYERS=optokon|Optokon||
-#LayersUrlPart:     LAYERS=optika|Optika ostatn?||
-#LayersUrlPart:     LAYERS=obce2005|Obce|0|NaN
-#LayersUrlPart:     LAYERS=pov_hr|OPV|NaN|99999999
-#LayersUrlPart:     LAYERS=orp_hr|ORP|NaN|99999999
-#LayersUrlPart:     LAYERS=kraje_hr|Kraje||
-#LayersUrlPart:     LAYERS=cesko_hr|CR||
-LayersUrlPart:     LAYERS=rzm10
+#LayersUrlPart:     LAYERS=wms_vysocina05|WMS Kraje Vysocina||
+#LayersUrlPart:     LAYERS=adresy|Adresn? body|0|19.9561139371855
+#LayersUrlPart:     LAYERS=okresy|Okresy||
+#LayersUrlPart:     LAYERS=ku|Katastr?ln? ?zem?|0|399.12227874371
+#LayersUrlPart:     LAYERS=obce|Obce||
+#LayersUrlPart:     LAYERS=obce2|Poveren? obce||
+#LayersUrlPart:     LAYERS=opv|Poveren? obce - hranice||
+#LayersUrlPart:     LAYERS=obce3|Obce s roz??renou pusobnost?||
+#LayersUrlPart:     LAYERS=orp|Obce s roz??renou pusobnost? - hranice||
+#LayersUrlPart:     LAYERS=stav|Stavebn? ?rady||
+#LayersUrlPart:     LAYERS=zm50|Z?kladn? mapy 1:50000|9.97805696859274|74.8354272644456
+#LayersUrlPart:     LAYERS=zm10|Z?kladn? mapy 1:10000|0|9.97805696859274
+#LayersUrlPart:     LAYERS=orto_bw.jpg|Ortofoto cernob?l?|0|14.9670854528891
+#LayersUrlPart:     LAYERS=barva.jpg|barva.jpg||
+#LayersUrlPart:     LAYERS=orto_col|Ortofoto barevn? 250m/px|1.99561139371855|14.9670854528891
+#LayersUrlPart:     LAYERS=copy_geodis|copy_geodis||
+LayersUrlPart:     LAYERS=zm10
 StylesUrlPart:     STYLES=
 ImageFormatUrlPart:FORMAT=image/png
-BoundingBoxTopLeftWGS84: N 49.9457 E 14.7989
-BoundingBoxButtomRightWGS84: N 48.8765 E 16.5340
+#BoundingBoxTopLeftWGS84: N 49.9457 E 14.7989
+#BoundingBoxButtomRightWGS84: N 48.8765 E 16.5340
+BoundingBoxTopLeftWGS84: N 49.9841 E 14.7605
+BoundingBoxButtomRightWGS84: N 48.7959 E 16.5811
 #BBox_Mitte: N 49.41110624465 E 15.6664623227
 #MinScale:   0
 #MaxScale:   45

Modified: trunk/res_noewe/webmapservices/cz-vy_t50.wms
===================================================================
--- trunk/res_noewe/webmapservices/cz-vy_t50.wms	2010-03-28 17:36:07 UTC (rev 2529)
+++ trunk/res_noewe/webmapservices/cz-vy_t50.wms	2010-03-31 10:52:44 UTC (rev 2530)
@@ -1,35 +1,41 @@
-TakenFromUrl:       http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?
-GetCapabilitiesUrl: http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
+#TakenFromUrl:       http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?
+#GetCapabilitiesUrl: http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
 Name:               CZ.VY Vysocina  t50 SF=4..10?
+#Name:               CZ.Region Hochland Hauptstadt Jihlava  t10 SF=1..3?
+#MapType:                        topo
+#MainUrl:            http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?
+TakenFromUrl:       http://www.kr-vysocina.cz/vismo5/dokumenty2.asp?id_org=450008&id=1478806&p1=30554
+GetCapabilitiesUrl: http://mapy.kr-vysocina.cz/cgi-bin/wms1?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
 MapType:                        topo
-MainUrl:            http://gis.kr-vysocina.cz:80/wmsconnector/com.esri.wms.Esrimap/metropolitky?
+MainUrl:            http://mapy.kr-vysocina.cz/cgi-bin/wms1?
 ServiceTypeUrlPart: SERVICE=WMS
 VersionUrlPart:     VERSION=1.1.1
 CoordinateReferenceSystemCacheWolf:  4326
 CoordinateReferenceSystemUrlPart: SRS=EPSG:4326
 RequestUrlPart:     REQUEST=GetMap
-#LayersUrlPart:     LAYERS=zm50|ZM 1:50 000||
-#LayersUrlPart:     LAYERS=rzm10|RZM 1:10 000||
-#LayersUrlPart:     LAYERS=orto_bw|Ortofoto BW 0,7m/px||
-#LayersUrlPart:     LAYERS=technol|Technologie||
-#LayersUrlPart:     LAYERS=plan|Planovan? stav||
-#LayersUrlPart:     LAYERS=hotspot|HOTSPOT||
-#LayersUrlPart:     LAYERS=cdoptika|CDoptika||
-#LayersUrlPart:     LAYERS=taliasonera|TeliaSonera||
-#LayersUrlPart:     LAYERS=selfnet|Selfnet||
-#LayersUrlPart:     LAYERS=jme_optika|JME_optika||
-#LayersUrlPart:     LAYERS=optokon|Optokon||
-#LayersUrlPart:     LAYERS=optika|Optika ostatn?||
-#LayersUrlPart:     LAYERS=obce2005|Obce|0|NaN
-#LayersUrlPart:     LAYERS=pov_hr|OPV|NaN|99999999
-#LayersUrlPart:     LAYERS=orp_hr|ORP|NaN|99999999
-#LayersUrlPart:     LAYERS=kraje_hr|Kraje||
-#LayersUrlPart:     LAYERS=cesko_hr|CR||
+#LayersUrlPart:     LAYERS=wms_vysocina05|WMS Kraje Vysocina||
+#LayersUrlPart:     LAYERS=adresy|Adresn? body|0|19.9561139371855
+#LayersUrlPart:     LAYERS=okresy|Okresy||
+#LayersUrlPart:     LAYERS=ku|Katastr?ln? ?zem?|0|399.12227874371
+#LayersUrlPart:     LAYERS=obce|Obce||
+#LayersUrlPart:     LAYERS=obce2|Poveren? obce||
+#LayersUrlPart:     LAYERS=opv|Poveren? obce - hranice||
+#LayersUrlPart:     LAYERS=obce3|Obce s roz??renou pusobnost?||
+#LayersUrlPart:     LAYERS=orp|Obce s roz??renou pusobnost? - hranice||
+#LayersUrlPart:     LAYERS=stav|Stavebn? ?rady||
+#LayersUrlPart:     LAYERS=zm50|Z?kladn? mapy 1:50000|9.97805696859274|74.8354272644456
+#LayersUrlPart:     LAYERS=zm10|Z?kladn? mapy 1:10000|0|9.97805696859274
+#LayersUrlPart:     LAYERS=orto_bw.jpg|Ortofoto cernob?l?|0|14.9670854528891
+#LayersUrlPart:     LAYERS=barva.jpg|barva.jpg||
+#LayersUrlPart:     LAYERS=orto_col|Ortofoto barevn? 250m/px|1.99561139371855|14.9670854528891
+#LayersUrlPart:     LAYERS=copy_geodis|copy_geodis||
 LayersUrlPart:     LAYERS=zm50
 StylesUrlPart:     STYLES=
 ImageFormatUrlPart:FORMAT=image/png
-BoundingBoxTopLeftWGS84: N 49.9457 E 14.7989
-BoundingBoxButtomRightWGS84: N 48.8765 E 16.5340
+#BoundingBoxTopLeftWGS84: N 49.9457 E 14.7989
+#BoundingBoxButtomRightWGS84: N 48.8765 E 16.5340
+BoundingBoxTopLeftWGS84: N 49.9841 E 14.7605
+BoundingBoxButtomRightWGS84: N 48.7959 E 16.5811
 #BBox_Mitte: N 49.41110624465 E 15.6664623227
 #MinScale:   0
 #MaxScale:   45

Modified: trunk/res_noewe/webmapservices/de-bw_p.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-bw_p.wms	2010-03-28 17:36:07 UTC (rev 2529)
+++ trunk/res_noewe/webmapservices/de-bw_p.wms	2010-03-31 10:52:44 UTC (rev 2530)
@@ -1,6 +1,6 @@
 TakenFromUrl:       http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
-GetCapabilitiesUrl: http://www.lv-bw.de/dv/service/getrds.asp?login=dv&pw=anonymous&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
-Name:	de.Baden-Wuerttemberg p/bw SF=0.3..700
+GetCapabilitiesUrl: http://www.lv-bw.de/dv/service/getrds.asp?login=dv&pw=anonymous&SERVICE=WMS&REQUEST=GetCapabilities
+Name: de.Baden-Wuerttemberg p/bw SF=0.3..700
 MapType:                        photo
 MainUrl:            http://www.lv-bw.de/dv/service/getrds.asp?login=dv&pw=anonymous&
 ServiceTypeUrlPart: SERVICE=WMS

Modified: trunk/res_noewe/webmapservices/de-bw_t50.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-bw_t50.wms	2010-03-28 17:36:07 UTC (rev 2529)
+++ trunk/res_noewe/webmapservices/de-bw_t50.wms	2010-03-31 10:52:44 UTC (rev 2530)
@@ -1,6 +1,6 @@
 TakenFromUrl:       http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
-GetCapabilitiesUrl: http://www.lv-bw.de/dv/service/getrds.asp?login=dv&pw=anonymous&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
-Name:	de.Baden-Wuerttemberg t50 SF=0.3..700
+GetCapabilitiesUrl: http://www.lv-bw.de/dv/service/getrds.asp?login=dv&pw=anonymous&SERVICE=WMS&REQUEST=GetCapabilities
+Name: de.Baden-Wuerttemberg t50 SF=0.3..700
 MapType:                        topo
 MainUrl:            http://www.lv-bw.de/dv/service/getrds.asp?login=dv&pw=anonymous&
 ServiceTypeUrlPart: SERVICE=WMS

Modified: trunk/res_noewe/webmapservices/de-by_photo.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-by_photo.wms	2010-03-28 17:36:07 UTC (rev 2529)
+++ trunk/res_noewe/webmapservices/de-by_photo.wms	2010-03-31 10:52:44 UTC (rev 2530)
@@ -1,12 +1,12 @@
 # please refer to readme_wms.txt for an explantion of this file format
 TakenFromUrl:	http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
 GetCapabilitiesUrl:	http://www.geodaten.bayern.de/ogc/getogc.cgi?REQUEST=GetCapabilities&VERSION=1.1.0&SERVICE=WMS
-Name:	de.by Luftbild
+Name: not available @ 31.3.2010 de.by Luftbild
 MapType:	photo
 MainUrl:	http://www.geodaten.bayern.de/ogc/getogc.cgi?
-ServiceTypeUrlPart:	SERVICE=WMS 
-VersionUrlPart:	VERSION=1.1.1 
-CoordinateReferenceSystemCacheWolf: 31468 
+ServiceTypeUrlPart:	SERVICE=WMS
+VersionUrlPart:	VERSION=1.1.1
+CoordinateReferenceSystemCacheWolf: 31468
 CoordinateReferenceSystemUrlPart:	SRS=EPSG:31468
 RequestUrlPart:	REQUEST=GetMap
 LayersUrlPart:	LAYERS=DOP

Modified: trunk/res_noewe/webmapservices/de-by_topo_50.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-by_topo_50.wms	2010-03-28 17:36:07 UTC (rev 2529)
+++ trunk/res_noewe/webmapservices/de-by_topo_50.wms	2010-03-31 10:52:44 UTC (rev 2530)
@@ -1,12 +1,12 @@
 # please refere to readme_wms.txt for an explantion of this file format
 TakenFromUrl:	http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
 GetCapabilitiesUrl:	http://www.geodaten.bayern.de/ogc/getogc.cgi?REQUEST=GetCapabilities&VERSION=1.1.0&SERVICE=WMS
-Name:	de.by Topo 50
+Name: not available @ 31.3.2010 de.by Topo 50
 MapType:	topo
 MainUrl:	http://www.geodaten.bayern.de/ogc/getogc.cgi?
-ServiceTypeUrlPart:	SERVICE=WMS 
-VersionUrlPart:	VERSION=1.1.1 
-CoordinateReferenceSystemCacheWolf: 31468 
+ServiceTypeUrlPart:	SERVICE=WMS
+VersionUrlPart:	VERSION=1.1.1
+CoordinateReferenceSystemCacheWolf: 31468
 CoordinateReferenceSystemUrlPart:	SRS=EPSG:31468
 RequestUrlPart:	REQUEST=GetMap
 LayersUrlPart:	LAYERS=TK50

Modified: trunk/res_noewe/webmapservices/de-he_photo.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-he_photo.wms	2010-03-28 17:36:07 UTC (rev 2529)
+++ trunk/res_noewe/webmapservices/de-he_photo.wms	2010-03-31 10:52:44 UTC (rev 2530)
@@ -1,9 +1,9 @@
 TakenFromUrl:	http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
 GetCapabilitiesUrl:	http://lika.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-images.plx?REQUEST=GetCapabilities&VERSION=1.1.0&SERVICE=WMS
-Name:	de.he Luftbild
+Name: not available @ 31.3.2010 de.he Luftbild
 MapType:	photo
 MainUrl:	http://lika.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-images.plx?
-ServiceTypeUrlPart:	SERVICE=WMS 
+ServiceTypeUrlPart:	SERVICE=WMS
 VersionUrlPart:	VERSION=1.1.1
 CoordinateReferenceSystemCacheWolf:	31467
 CoordinateReferenceSystemUrlPart:	SRS=EPSG:31467

Modified: trunk/res_noewe/webmapservices/de-he_topo_100.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-he_topo_100.wms	2010-03-28 17:36:07 UTC (rev 2529)
+++ trunk/res_noewe/webmapservices/de-he_topo_100.wms	2010-03-31 10:52:44 UTC (rev 2530)
@@ -1,10 +1,10 @@
 TakenFromUrl:	http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
 GetCapabilitiesUrl:	http://lika.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-maps.plx?REQUEST=GetCapabilities&VERSION=1.1.0&SERVICE=WMS
-Name:	de.he Topo 100
+Name:	not available @ 31.3.2010 de.he Topo 100
 MapType:	topo
 MainUrl:	http://lika.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-maps.plx?
-LayersName: 
-ServiceTypeUrlPart:	SERVICE=WMS 
+LayersName:
+ServiceTypeUrlPart:	SERVICE=WMS
 VersionUrlPart:	VERSION=1.1.1
 CoordinateReferenceSystemCacheWolf:	31467
 CoordinateReferenceSystemUrlPart:	SRS=EPSG:31467

Modified: trunk/res_noewe/webmapservices/de-he_topo_50.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-he_topo_50.wms	2010-03-28 17:36:07 UTC (rev 2529)
+++ trunk/res_noewe/webmapservices/de-he_topo_50.wms	2010-03-31 10:52:44 UTC (rev 2530)
@@ -1,9 +1,9 @@
 TakenFromUrl:	http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
 GetCapabilitiesUrl:	http://lika.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-maps.plx?REQUEST=GetCapabilities&VERSION=1.1.0&SERVICE=WMS
-Name:	de.he Topo 50
+Name:	not available @ 31.3.2010 de.he Topo 50
 MapType:	topo
 MainUrl:	http://lika.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-maps.plx?
-ServiceTypeUrlPart:	SERVICE=WMS 
+ServiceTypeUrlPart:	SERVICE=WMS
 VersionUrlPart:	VERSION=1.1.1
 CoordinateReferenceSystemCacheWolf:	31467
 CoordinateReferenceSystemUrlPart:	SRS=EPSG:31467

Modified: trunk/res_noewe/webmapservices/de_topo_1000.wms
===================================================================
--- trunk/res_noewe/webmapservices/de_topo_1000.wms	2010-03-28 17:36:07 UTC (rev 2529)
+++ trunk/res_noewe/webmapservices/de_topo_1000.wms	2010-03-31 10:52:44 UTC (rev 2530)
@@ -1,21 +1,11 @@
-# For an example and explantion please see readme_wms.txt, which
-# you can find in the program directory of CacheWolf. There
-# you always get the newest information about .wms format.
-# plaese include this hint in any .wms you create
-#
-# Please include the two lines (TakenFromUrl: and GetCapabilitiesUrl:)
-# and fill in accordingly in any .wms file you make. They
-# are (still) not used by CacheWolf but they are usefull
-# for someone who wants to make his own changes to your file.
-# 
 TakenFromUrl:	http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
 GetCapabilitiesUrl:	http://gdz1.leipzig.ifag.de/servlet/com.esri.wms.Esrimap?servicename=dtk200_500_1000_a10_gk4_wms&service=WMS&version=1.1.1&request=GetCapabilities
-Name:	de Topo 1000
+Name: not available @ 31.3.2010 de Topo 1000
 MainUrl:	http://gdz1.leipzig.ifag.de/servlet/com.esri.wms.Esrimap?servicename=dtk200_500_1000_a10_gk4_wms&
 MapType:	topo
 ServiceTypeUrlPart:	SERVICE=WMS
 VersionUrlPart:	VERSION=1.1.0
-CoordinateReferenceSystemCacheWolf:	31468 
+CoordinateReferenceSystemCacheWolf:	31468
 CoordinateReferenceSystemUrlPart:	SRS=EPSG:31468
 RequestUrlPart:	REQUEST=GetMap
 LayersUrlPart:	LAYERS=DTK1000

Modified: trunk/res_noewe/webmapservices/de_topo_200.wms
===================================================================
--- trunk/res_noewe/webmapservices/de_topo_200.wms	2010-03-28 17:36:07 UTC (rev 2529)
+++ trunk/res_noewe/webmapservices/de_topo_200.wms	2010-03-31 10:52:44 UTC (rev 2530)
@@ -1,21 +1,11 @@
-# For an example and explantion please see readme_wms.txt, which
-# you can find in the program directory of CacheWolf. There
-# you always get the newest information about .wms format.
-# plaese include this hint in any .wms you create
-#
-# Please include the two lines (TakenFromUrl: and GetCapabilitiesUrl:)
-# and fill in accordingly in any .wms file you make. They
-# are (still) not used by CacheWolf but they are usefull
-# for someone who wants to make his own changes to your file.
-# 
 TakenFromUrl:	http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
 GetCapabilitiesUrl:	http://gdz1.leipzig.ifag.de/servlet/com.esri.wms.Esrimap?servicename=dtk200_500_1000_a10_gk4_wms&service=WMS&version=1.1.1&request=GetCapabilities
-Name:	de Topo 200
+Name: not available @ 31.3.2010 de Topo 200
 MainUrl:	http://gdz1.leipzig.ifag.de/servlet/com.esri.wms.Esrimap?servicename=dtk200_500_1000_a10_gk4_wms&
 MapType:	topo
 ServiceTypeUrlPart:	SERVICE=WMS
 VersionUrlPart:	VERSION=1.1.0
-CoordinateReferenceSystemCacheWolf:	31468 
+CoordinateReferenceSystemCacheWolf:	31468
 CoordinateReferenceSystemUrlPart:	SRS=EPSG:31468
 RequestUrlPart:	REQUEST=GetMap
 LayersUrlPart:	LAYERS=DTK200-V

Modified: trunk/res_noewe/webmapservices/de_topo_500.wms
===================================================================
--- trunk/res_noewe/webmapservices/de_topo_500.wms	2010-03-28 17:36:07 UTC (rev 2529)
+++ trunk/res_noewe/webmapservices/de_topo_500.wms	2010-03-31 10:52:44 UTC (rev 2530)
@@ -1,21 +1,11 @@
-# For an example and explantion please see readme_wms.txt, which
-# you can find in the program directory of CacheWolf. There
-# you always get the newest information about .wms format.
-# plaese include this hint in any .wms you create
-#
-# Please include the two lines (TakenFromUrl: and GetCapabilitiesUrl:)
-# and fill in accordingly in any .wms file you make. They
-# are (still) not used by CacheWolf but they are usefull
-# for someone who wants to make his own changes to your file.
-# 
 TakenFromUrl:	http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
 GetCapabilitiesUrl:	http://gdz1.leipzig.ifag.de/servlet/com.esri.wms.Esrimap?servicename=dtk200_500_1000_a10_gk4_wms&service=WMS&version=1.1.1&request=GetCapabilities
-Name:	de Topo 500
+Name: not available @ 31.3.2010 de Topo 500
 MainUrl:	http://gdz1.leipzig.ifag.de/servlet/com.esri.wms.Esrimap?servicename=dtk200_500_1000_a10_gk4_wms&
 MapType:	topo
 ServiceTypeUrlPart:	SERVICE=WMS
 VersionUrlPart:	VERSION=1.1.0
-CoordinateReferenceSystemCacheWolf:	31468 
+CoordinateReferenceSystemCacheWolf:	31468
 CoordinateReferenceSystemUrlPart:	SRS=EPSG:31468
 RequestUrlPart:	REQUEST=GetMap
 LayersUrlPart:	LAYERS=DTK500-V

Modified: trunk/res_noewe/webmapservices/eu_t_osm-uni-bonn.wms
===================================================================
--- trunk/res_noewe/webmapservices/eu_t_osm-uni-bonn.wms	2010-03-28 17:36:07 UTC (rev 2529)
+++ trunk/res_noewe/webmapservices/eu_t_osm-uni-bonn.wms	2010-03-31 10:52:44 UTC (rev 2530)
@@ -1,6 +1,6 @@
 TakenFromUrl:       http://services.giub.uni-bonn.de:80/geoserver/wms
 GetCapabilitiesUrl: http://services.giub.uni-bonn.de/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
-Name:               Europa t OSM(Server uni-bonn)
+Name: not available @ 31.3.2010 Europa t OSM(Server uni-bonn)
 MapType:                        topo
 MainUrl:            http://services.giub.uni-bonn.de/wms?
 ServiceTypeUrlPart: SERVICE=WMS

Modified: trunk/res_noewe/webmapservices/it-52_t10.wms
===================================================================
--- trunk/res_noewe/webmapservices/it-52_t10.wms	2010-03-28 17:36:07 UTC (rev 2529)
+++ trunk/res_noewe/webmapservices/it-52_t10.wms	2010-03-31 10:52:44 UTC (rev 2530)
@@ -1,14 +1,14 @@
 TakenFromUrl:   http://www.rete.toscana.it/sett/territorio/carto/repertorio/geoscopio_wms/
-GetCapabilitiesUrl:      http://web.rete.toscana.it/sgrwms/com.rt.wms.RTmap?ServiceName=_rt_wms_topogr&service=WMS&request=GetCapabilities
-Name:   it.Toskana topo 10
+GetCapabilitiesUrl:      http://web.rete.toscana.it/sgrwms/com.rt.wms.RTmap?service=WMS&request=GetCapabilities
+Name: it.Toskana topo 10
 MapType: topo
 #MainUrl:   http://web.rete.toscana.it:80/sgrwms/com.rt.wms.RTmap/_rt_wms_topogr?
 #MainUrl:   http://web.rete.toscana.it:80/sgrwms/com.rt.wms.RTmap/_rt_wms?
 MainUrl:    http://web.rete.toscana.it/sgrwms/com.rt.wms.RTmap?
 ServiceTypeUrlPart:   SERVICE=WMS
 VersionUrlPart:   VERSION=1.1.0
-CoordinateReferenceSystemCacheWolf:   3003
-CoordinateReferenceSystemUrlPart:   SRS=EPSG:3003
+CoordinateReferenceSystemCacheWolf:   4326
+CoordinateReferenceSystemUrlPart:   SRS=EPSG:4326
 RequestUrlPart:   REQUEST=GetMap
 #LayersUrlPart:     LAYERS=_idita|ITALIA||
 #LayersUrlPart:     LAYERS=_idbati|BATIMETRICHE||
@@ -286,7 +286,7 @@
 BoundingBoxTopLeftWGS84:   N 44.500805 E 9.642548
 BoundingBoxButtomRightWGS84:   N 42.168745 E 12.462359
 MinScale:   0
-MaxScale:   70 
+MaxScale:   70
 # maxscale 14.14214
 #H?henlinien nur bei Scale unter 4.0
 RecommendedScale:   1

Modified: trunk/res_noewe/webmapservices/it-52_t10bw.wms
===================================================================
--- trunk/res_noewe/webmapservices/it-52_t10bw.wms	2010-03-28 17:36:07 UTC (rev 2529)
+++ trunk/res_noewe/webmapservices/it-52_t10bw.wms	2010-03-31 10:52:44 UTC (rev 2530)
@@ -1,13 +1,13 @@
 TakenFromUrl:   http://www.rete.toscana.it/sett/territorio/carto/repertorio/geoscopio_wms/
-GetCapabilitiesUrl:      http://web.rete.toscana.it/sgrwms/com.rt.wms.RTmap?ServiceName=_rt_wms_cartografia&service=WMS&request=GetCapabilities
-Name:   it.Toskana topo 10 black/white
+GetCapabilitiesUrl:      http://web.rete.toscana.it/sgrwms/com.rt.wms.RTmap?service=WMS&request=GetCapabilities
+Name: it.Toskana topo 10 black/white
 #MainUrl:   http://web.rete.toscana.it:80/sgrwms/com.rt.wms.RTmap/_rt_wms_cartografia?
 MainUrl:   http://web.rete.toscana.it/sgrwms/com.rt.wms.RTmap?
 MapType: topo
 ServiceTypeUrlPart:   SERVICE=WMS
 VersionUrlPart:   VERSION=1.1.0
-CoordinateReferenceSystemCacheWolf:   3003
-CoordinateReferenceSystemUrlPart:   SRS=EPSG:3003
+CoordinateReferenceSystemCacheWolf:   4326
+CoordinateReferenceSystemUrlPart:   SRS=EPSG:4326
 RequestUrlPart:   REQUEST=GetMap
 #LayersUrlPart:     LAYERS=_idita|ITALIA||
 #LayersUrlPart:     LAYERS=_idbati|BATIMETRICHE||



From araber95 at mail.berlios.de  Wed Mar 31 12:56:32 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 31 Mar 2010 12:56:32 +0200
Subject: [Cachewolf-svn] r2531 - trunk/src/CacheWolf
Message-ID: <201003311056.o2VAuWTA004849@sheep.berlios.de>

Author: araber95
Date: 2010-03-31 12:56:30 +0200 (Wed, 31 Mar 2010)
New Revision: 2531

Modified:
   trunk/src/CacheWolf/Rebuild.java
Log:
removed input message box for older versions of cw

Modified: trunk/src/CacheWolf/Rebuild.java
===================================================================
--- trunk/src/CacheWolf/Rebuild.java	2010-03-31 10:52:44 UTC (rev 2530)
+++ trunk/src/CacheWolf/Rebuild.java	2010-03-31 10:56:30 UTC (rev 2531)
@@ -24,10 +24,10 @@
 
 		int orphans=0; // xml Files without entry in database : Changed to all entries!!!
 		int nAdded=0;  // caches added to database
-		boolean checkOlder;
-		MessageBox mBox = new MessageBox("", MyLocale.getMsg(5522,"Check for older Versions xml-Files ( without <CACHE... /> )") , FormBase.IDYES |FormBase.IDNO);
-		if (mBox.execute() == FormBase.IDOK){checkOlder=true;}
-		else {checkOlder=false;}
+		boolean checkOlder = false;
+		//MessageBox mBox = new MessageBox("", MyLocale.getMsg(5522,"Check for older Versions xml-Files ( without <CACHE... /> )") , FormBase.IDYES |FormBase.IDNO);
+		//if (mBox.execute() == FormBase.IDOK){checkOlder=true;}
+		//else {checkOlder=false;}
 		// still time consuming the list files
 		pbf.setTask(h, "Reading Directory, be patient");
 		pbf.exec();



From araber95 at mail.berlios.de  Wed Mar 31 22:24:57 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 31 Mar 2010 22:24:57 +0200
Subject: [Cachewolf-svn] r2532 - in trunk: res_noewe/templates src/CacheWolf
	src/CacheWolf/exp
Message-ID: <201003312024.o2VKOvtv028778@sheep.berlios.de>

Author: araber95
Date: 2010-03-31 22:24:53 +0200 (Wed, 31 Mar 2010)
New Revision: 2532

Modified:
   trunk/res_noewe/templates/Short documentation for the export via templates.htm
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/ShowCacheInBrowser.java
   trunk/src/CacheWolf/exp/HTMLExporter.java
   trunk/src/CacheWolf/exp/TPLExporter.java
Log:
extending the templates

Modified: trunk/res_noewe/templates/Short documentation for the export via templates.htm
===================================================================
--- trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-03-31 10:56:30 UTC (rev 2531)
+++ trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-03-31 20:24:53 UTC (rev 2532)
@@ -229,95 +229,106 @@
 lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></u></p>
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
-lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>TYPE<span
-style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>PROGDIR<span
+style='mso-tab-count:8'>?????????????????????????????????????????????????????????????????????????????????????????? </span>:
+<span class=SpellE>FileBase.getProgramDirectory</span>()<br>
+TYPE<span style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 &lt;type&gt; Type of cache, e.g. Regular, Multi<br>
+TYPENO<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????????? </span>:
+&lt;type&gt; as number string (see <span class=SpellE>CacheType.java</span> <span
+class=SpellE>e.g</span> : 0=Custom , 2=<span class=SpellE>Tradi</span> ,50=Parking
+104=Earth)<br>
 SYM<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 &lt;sym&gt;<br>
 GSTYPE<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????????? </span>:
-&lt;<span class=SpellE>groundspeak<span class=GramE>:type</span></span>&gt;<br>
+&lt;<span class=SpellE>groundspeak:type</span>&gt;<br>
 SHORTTYPE<span style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????? </span>:
 First Letter of &lt;type&gt; ???<br>
-</span><span style='font-size:10.0pt;font-family:Arial'>SIZE<span
-style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
-<span class=SpellE>Size</span> of Cache, <span class=SpellE>e.g</span>. <span
-class=SpellE>Regular</span>, <span class=SpellE>Micro</span><br>
+SIZE<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+Size of Cache, e.g. Regular, Micro<br>
 SHORTSIZE<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????? </span>:
-First <span class=SpellE>letter</span> of <span class=SpellE>size</span><br>
-WAYPOINT<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????? </span>:
-&lt;<span class=SpellE>name</span>&gt; GCXXXX, OCXXXX<br>
-NAME<span style='mso-tab-count:9'>??????????????????????????????????????????????????????????????????????????????????????????????? </span>:
-Name of <span class=SpellE>cache</span> (<span class=SpellE>badchars</span> <span
-class=SpellE>are</span> <span class=SpellE>removed</span>, <span class=SpellE>see</span>
-<span class=SpellE>below</span>) (neuerdings bei ASCII Simplifizierung von
-Zeichen)<br>
-SHORTNAME<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????? </span>:
-</span><span style='font-size:10.0pt;font-family:Helvetica'>Name der durch
-Weglassen von Vokalen von hinten und wenn das nicht reicht durch Weglassen von
-Kleinbuchstaben von hinten auf eine in den Einstellungen vorgegebene L?nge
-gek?rzt wird. (Hintergrund: das Notes -Feld der meisten <span class=SpellE>Garmins</span>
-kann nur 30 Buchstaben)<br>
-</span><span style='font-size:10.0pt;font-family:Arial'>OWNER<span
-style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????????? </span>:<br>
+First letter of size<br>
+</span><span lang=EN-GB style='font-size:10.0pt;font-family:Helvetica;
+mso-ansi-language:EN-GB'>MAINWP<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????????? </span>:
+?? if is <span class=SpellE>Mainwaypoint</span>, <span class=SpellE>Mainwaypointname</span>
+if is <span class=SpellE>Addi</span> Waypoint<br>
+</span><span lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:
+EN-GB'>WAYPOINT<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????? </span>:
+&lt;name&gt; GCXXXX, OCXXXX<br>
+</span><span lang=EN-GB style='font-size:10.0pt;font-family:Helvetica;
+mso-ansi-language:EN-GB'>SHORTWAYPOINT<span style='mso-tab-count:7'>????????????????????????????????????????????????????????????????????????????? </span>:
+</span><span class=SpellE><span lang=EN-GB style='font-size:10.0pt;font-family:
+Arial;mso-ansi-language:EN-GB'>ShortNameLength</span></span><span lang=EN-GB
+style='font-size:10.0pt;font-family:Helvetica;mso-ansi-language:EN-GB'> <span
+class=SpellE>Zeichen</span> des Waypoints (<span class=SpellE>f?r</span> <span
+class=SpellE>Benutzer</span> alter <span class=SpellE>Ger?te</span> <span
+class=SpellE>mit</span> <span class=SpellE>nur</span> 6 <span class=SpellE>Waypointzeichen</span>,
+<br>
+</span><span lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:
+EN-GB'>OWNER<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????????? </span>:
+<span class=SpellE>Cacheowner</span><br>
 DIFFICULTY<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????? </span>:<br>
-</span><span style='font-size:10.0pt;font-family:Helvetica'>SHORTDIFFICULTY<span
-style='mso-tab-count:7'>???????????????????????????????????????????????????????????????????????????? </span>:
-<span class=SpellE>Difficulty</span> mal 10 also 15 statt 1.5<br>
+</span><span lang=EN-GB style='font-size:10.0pt;font-family:Helvetica;
+mso-ansi-language:EN-GB'>SHORTDIFFICULTY<span style='mso-tab-count:7'>???????????????????????????????????????????????????????????????????????????? </span>:
+Difficulty mal 10 also 15 <span class=SpellE>statt</span> 1.5<br>
 SHDIFFICULTY<span style='mso-tab-count:8'>?????????????????????????????????????????????????????????????????????????????????? </span>:
-<span class=SpellE>Difficulty</span> abgerundet also 1 statt 1.5<br>
-</span><span style='font-size:10.0pt;font-family:Arial'>TERRAIN<span
-style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????????? </span>:<br>
-</span><span style='font-size:10.0pt;font-family:Helvetica'>SHORTTERAIN<span
-style='mso-tab-count:8'>?????????????????????????????????????????????????????????????????????????????????? </span>:
+Difficulty <span class=SpellE>abgerundet</span> also 1 <span class=SpellE>statt</span>
+1.5<br>
+</span><span lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:
+EN-GB'>TERRAIN<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????????? </span>:<br>
+</span><span lang=EN-GB style='font-size:10.0pt;font-family:Helvetica;
+mso-ansi-language:EN-GB'>SHORTTERAIN<span style='mso-tab-count:8'>?????????????????????????????????????????????????????????????????????????????????? </span>:
 Terrain mal 10<br>
 SHTERRAIN<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????? </span>:
-Terrain abgerundet<br>
-</span><span style='font-size:10.0pt;font-family:Arial'>DISTANCE<span
-style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????????? </span>:
-Distance <span class=SpellE>calculated</span> in <span class=SpellE>cachelist</span><br>
+Terrain <span class=SpellE>abgerundet</span><br>
+</span><span lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:
+EN-GB'>DISTANCE<span style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????????? </span>:
+Distance calculated in <span class=SpellE>cachelist</span><br>
 BEARING<span style='mso-tab-count:8'>?????????????????????????????????????????????????????????????????????????????????????????? </span>:
-Bearing <span class=SpellE>calculated</span> in <span class=SpellE>cachelist</span><br>
+Bearing calculated in <span class=SpellE>cachelist</span><br>
 LATON<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????? </span>:
-<span class=SpellE>Coordinates</span> in <span class=SpellE>long</span> <span
-class=SpellE>format</span>, <span class=SpellE>e.g</span>. N 50? 31.234 E 008?
-45.267<br>
+Coordinates in long format, e.g. N 50? 31.234 E 008? 45.267<br>
 LAT<span style='mso-tab-count:9'>??????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
-&lt;<span class=SpellE>wpt</span> <span class=SpellE>lat=?xx.yyyy</span>?
-??..&gt; </span><span lang=EN-GB style='font-size:10.0pt;font-family:Arial;
-mso-ansi-language:EN-GB'>Latitude in decimal format, e.g. 50.20147<br>
+&lt;<span class=SpellE>wpt</span> lat=?<span class=SpellE>xx.yyyy</span>?
+??..&gt; Latitude in decimal format, e.g. 50.20147<br>
 LON<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 &lt;<span class=SpellE>wpt</span> ?? <span class=SpellE>lon</span>=?<span
 class=SpellE>xx.yyyy</span>? &gt; Longitude in decimal format, e.g. 008.58132<br>
 STATUS<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????????? </span>:<span
 style='mso-spacerun:yes'>? </span>means found<br>
+GC_LOGTYPE<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????? </span>:
+the English Status texts (for <span class=SpellE>gpx</span> ? export)<br>
 STATUS_DATE<span style='mso-tab-count:8'>?????????????????????????????????????????????????????????????????????????????????? </span>:
 Get the date part of the status <br>
 STATUS_TIME<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????? </span>:
 Get the time part of the status<br>
 DATE<span style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 date hidden<br>
-URL<span style='mso-tab-count:9'>??????????????????????????????????????????????????????????????????????????????????????????????????? </span>:<br>
-DESCRIPTION<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????? </span>:
-Cache Description (possibly in HTML Format)<br>
-NOTES<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????? </span>:
-User Notes&nbsp;&nbsp; (<span class=SpellE>badchars</span> are removed, see
-below)<br>
-HINTS<span style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????? </span>:
-Encrypted hints&nbsp;&nbsp; (<span class=SpellE>badchars</span> are removed,
-see below)<br>
-DESCRYPTEDHINTS<span style='mso-tab-count:7'>?????????????????????????????????????????????????????????????????????????? </span>:
-Decrypted hints&nbsp;&nbsp;&nbsp; (<span class=SpellE>badchars</span> are
-removed, see below) <br>
+CACHE_NAME<span style='mso-tab-count:8'>?????????????????????????????????????????????????????????????????????????????????? </span>:
+original Name of cache<br>
+NAME<span style='mso-tab-count:9'>??????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+Name of cache (<span class=SpellE>badchars</span> are removed, see below) (<span
+class=SpellE>neuerdings</span> <span class=SpellE>bei</span> ASCII <span
+class=SpellE>Simplifizierung</span> von <span class=SpellE>Zeichen</span>)<br>
+SHORTNAME<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????? </span>:
 </span><span lang=EN-GB style='font-size:10.0pt;font-family:Helvetica;
-mso-ansi-language:EN-GB'>SHORTWAYPOINT<span style='mso-tab-count:7'>????????????????????????????????????????????????????????????????????????????? </span>:
-</span><span class=SpellE><span lang=EN-GB style='font-size:10.0pt;font-family:
-Arial;mso-ansi-language:EN-GB'>ShortNameLength</span></span><span lang=EN-GB
-style='font-size:10.0pt;font-family:Helvetica;mso-ansi-language:EN-GB'> <span
-class=SpellE>Zeichen</span> des Waypoints (<span class=SpellE>f?r</span> <span
-class=SpellE>Benutzer</span> alter <span class=SpellE>Ger?te</span> <span
-class=SpellE>mit</span> <span class=SpellE>nur</span> 6 <span class=SpellE>Waypointzeichen</span>,
-<br>
-<span style='mso-spacerun:yes'>?</span><span style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+mso-ansi-language:EN-GB'>Name <span class=SpellE>der</span> <span class=SpellE>durch</span>
+<span class=SpellE>Weglassen</span> von <span class=SpellE>Vokalen</span> von <span
+class=SpellE>hinten</span> und <span class=SpellE>wenn</span> <span
+class=SpellE>das</span> <span class=SpellE>nicht</span> <span class=SpellE>reicht</span>
+<span class=SpellE>durch</span> <span class=SpellE>Weglassen</span> von <span
+style='mso-spacerun:yes'>??</span><span style='mso-spacerun:yes'>??</span><span
+style='mso-tab-count:9'>????????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+<span class=SpellE>Kleinbuchstaben</span> von <span class=SpellE>hinten</span>
+auf <span class=SpellE>eine</span> in den <span class=SpellE>Einstellungen</span>
+<span class=SpellE>vorgegebene</span> <span class=SpellE>L?nge</span> <span
+class=SpellE>gek?rzt</span> <span class=SpellE>wird</span>. <br>
+<span style='mso-tab-count:9'>????????????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+(<span class=SpellE>Hintergrund</span>: <span class=SpellE>das</span> Notes -<span
+class=SpellE>Feld</span> <span class=SpellE>der</span> <span class=SpellE>meisten</span>
+<span class=SpellE>Garmins</span> <span class=SpellE>kann</span> <span
+class=SpellE>nur</span> 30 <span class=SpellE>Buchstaben</span>)<br>
+<span style='mso-tab-count:9'>????????????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 <span class=SpellE>dann</span> <span class=SpellE>kriegen</span> <span
 class=SpellE>sie</span> <span class=SpellE>noch</span> <span class=SpellE>Infos</span>
 <span class=SpellE>wie</span> Difficulty etc. rein)<br>
@@ -329,14 +340,28 @@
 class=SpellE>Garminmap.xml</span>, also <span class=SpellE>z.B</span>. Custom
 1, <span class=SpellE>zur</span> <span class=SpellE>Verwendung</span> <span
 class=SpellE>der</span> <span class=SpellE>Benutzerdefinierten</span> Icons<br>
-MAINWP<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????????? </span>:
-?? if is <span class=SpellE>Mainwaypoint</span>, <span class=SpellE>Mainwaypointname</span>
-if is <span class=SpellE>Addi</span> Waypoint<br>
 NOW</span><span lang=EN-GB style='font-size:10.0pt;font-family:Arial;
 mso-ansi-language:EN-GB'>_DATE<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????? </span>:
 Get the date part of now<br>
 NOW_TIME<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????? </span>:
-Get the time part of now<br style='mso-special-character:line-break'>
+Get the time part of now<br>
+URL<span style='mso-tab-count:9'>??????????????????????????????????????????????????????????????????????????????????????????????????? </span>:<br>
+DESCRIPTION<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????? </span>:
+Cache Description (possibly in HTML Format)<br>
+NOTES<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+User Notes&nbsp;&nbsp; (<span class=SpellE>badchars</span> are removed, see
+below)<br>
+HINTS<span style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+Encrypted hints&nbsp;&nbsp; (<span class=SpellE>badchars</span> are removed,
+see below)<br>
+DESCRYPTEDHINTS<span style='mso-tab-count:7'>?????????????????????????????????????????????????????????????????????????? </span>:
+Decrypted hints&nbsp;&nbsp;&nbsp; (<span class=SpellE>badchars</span> are
+removed, see below) <br>
+BUGS<span style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+<span class=SpellE>Liste</span> <span class=SpellE>der</span> <span
+class=SpellE>TBs</span> : <br>
+SOLVER<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????????? </span>:
+Solver Infos<br style='mso-special-character:line-break'>
 <![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
 <![endif]><o:p></o:p></span></p>
 
@@ -377,9 +402,9 @@
 name=LON&gt;;&quot;&lt;<span class=SpellE>tmpl_var</span>
 name=TYPE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
 name=SIZE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
-name=WAYPOINT&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
-name=DATE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
-name=URL&gt;&quot;&lt;<span class=SpellE>br</span> /&gt;<br>
+name=WAYPOINT&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span> name=DATE&gt;&quot;;&quot;&lt;<span
+class=SpellE>tmpl_var</span> name=URL&gt;&quot;&lt;<span class=SpellE>br</span>
+/&gt;<br>
 &lt;/<span class=SpellE>tmpl_loop</span>&gt;<br style='mso-special-character:
 line-break'>
 <![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
@@ -551,8 +576,8 @@
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
 lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>If
-you set <span class=SpellE>loop_context_vars</span> to true in your Template's constructor,
-then you will have access to five special</span><span lang=EN-GB
+you set <span class=SpellE>loop_context_vars</span> to true in your Template's
+constructor, then you will have access to five special</span><span lang=EN-GB
 style='mso-ansi-language:EN-GB'> </span><span lang=EN-GB style='font-size:10.0pt;
 font-family:Arial;mso-ansi-language:EN-GB'>variables in all your loops. These
 are:</span><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-03-31 10:56:30 UTC (rev 2531)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-03-31 20:24:53 UTC (rev 2532)
@@ -574,10 +574,11 @@
 	
 	/** Return a Hashtable containing all the cache data for Templates */
 	public Hashtable toHashtable(
-			Regex dec, Regex rex, 
+			Regex decSep, Regex badChars, 
 			int shortWaypointLength, int shortNameLength, 
 			TextCodec codec, GarminMap gm,
-			boolean withFoundText
+			boolean withFoundText,
+			int ModTypLongDesc
 			) {
 		Hashtable varParams = new Hashtable();
 		CacheHolderDetail det = this.getCacheDetails(false);
@@ -603,19 +604,19 @@
 		int wps = (wpl < shortWaypointLength) ? 0 : wpl - shortWaypointLength;
 		varParams.put("SHORTWAYPOINT", wayPoint.substring(wps, wpl));
 		varParams.put("OWNER", cacheOwner);
-		varParams.put("DIFFICULTY", (isAddiWpt() || isCustomWpt() || hard < 0)?"":dec.replaceAll(CacheTerrDiff.longDT(hard)));
+		varParams.put("DIFFICULTY", (isAddiWpt() || isCustomWpt() || hard < 0)?"":decSep.replaceAll(CacheTerrDiff.longDT(hard)));
 		String sHard = Integer.toString(hard);
 		varParams.put("SHORTDIFFICULTY", (isAddiWpt() || isCustomWpt() || hard < 0)?"":sHard);
 		varParams.put("SHDIFFICULTY", (isAddiWpt() || isCustomWpt() || hard < 0)?"":sHard.substring(0,1));
-		varParams.put("TERRAIN", (isAddiWpt() || isCustomWpt() || terrain < 0)?"":dec.replaceAll(CacheTerrDiff.longDT(terrain)));
+		varParams.put("TERRAIN", (isAddiWpt() || isCustomWpt() || terrain < 0)?"":decSep.replaceAll(CacheTerrDiff.longDT(terrain)));
 		String sTerrain = Integer.toString(terrain);
 		varParams.put("SHORTTERAIN", (isAddiWpt() || isCustomWpt() || terrain < 0)?"":sTerrain);
 		varParams.put("SHTERRAIN", (isAddiWpt() || isCustomWpt() || terrain < 0)?"":sTerrain.substring(0,1));
-		varParams.put("DISTANCE", dec.replaceAll(getDistance()));
+		varParams.put("DISTANCE", decSep.replaceAll(getDistance()));
 		varParams.put("BEARING", bearing);
 		varParams.put("LATLON", (pos!=null && pos.isValid())?LatLon:"unknown");
-		varParams.put("LAT", dec.replaceAll(pos.getLatDeg(CWPoint.DD)));
-		varParams.put("LON", dec.replaceAll(pos.getLonDeg(CWPoint.DD)));		
+		varParams.put("LAT", decSep.replaceAll(pos.getLatDeg(CWPoint.DD)));
+		varParams.put("LON", decSep.replaceAll(pos.getLonDeg(CWPoint.DD)));		
 		if (withFoundText && cacheStatus.length()>=10 && cacheStatus.charAt(4)=='-')
 			varParams.put("STATUS",MyLocale.getMsg(318,"Found")+" "+cacheStatus);
 		else
@@ -624,23 +625,10 @@
 		varParams.put("STATUS_DATE", GetStatusDate());
 		varParams.put("STATUS_TIME", GetStatusTime());
 		varParams.put("DATE", dateHidden);
-		
-		varParams.put("URL", det != null ? det.URL : "");
-
-		varParams.put("DESCRIPTION", det != null ? det.LongDescription : "");
 		varParams.put("CACHE_NAME", cacheName);
-		if (codec instanceof AsciiCodec) { cacheName=Exporter.simplifyString(cacheName);}
-		if (rex != null) {
-			cacheName=rex.replaceAll(cacheName);
-			varParams.put("NOTES", det != null ? STRreplace.replace(rex.replaceAll(det.getCacheNotes()), "\n","<br>"): "");
-			varParams.put("HINTS", det != null ? rex.replaceAll(det.Hints): "");
-			varParams.put("DECRYPTEDHINTS", det != null ? rex.replaceAll(Common.rot13(det.Hints)): "");
-		} else {
-			varParams.put("NOTES", det != null ? STRreplace.replace(det.getCacheNotes(), "\n","<br>"): "");
-			varParams.put("HINTS", det != null ? det.Hints: "");
-			varParams.put("DECRYPTEDHINTS", det != null ? Common.rot13(det.Hints): "");
-		}
-		varParams.put("NAME", cacheName);
+		if (codec instanceof AsciiCodec) { cacheName=Exporter.simplifyString(cacheName);} // use for "NAME"
+		if (badChars != null) { cacheName=badChars.replaceAll(cacheName); } // use for "NAME"
+		varParams.put("NAME", cacheName); // !!! cacheName used twice
 		String shortName=removeCharsfromString(cacheName, shortNameLength, selbstLaute);
 		if (shortName.length()>shortNameLength) {
 			shortName=removeCharsfromString(shortName, shortNameLength, mitLauteKlein());
@@ -650,8 +638,82 @@
 		varParams.put("GMTYPE", gm != null ? gm.getIcon(this) : "");
 		varParams.put("NOW_DATE",nowdate().setToCurrentTime().toString());
 		varParams.put("NOW_TIME",nowtime().setToCurrentTime().toString());
+		if (det == null){
+			varParams.put("URL", "");
+			varParams.put("DESCRIPTION", "");
+			varParams.put("NOTES", "");
+			varParams.put("HINTS", "");
+			varParams.put("DECRYPTEDHINTS", "");
+		}
+		else {
+			varParams.put("URL", det.URL);
+			if (html) {
+				if (ModTypLongDesc == 0) {
+					varParams.put("DESCRIPTION",det.LongDescription);
+				}
+				else {
+					varParams.put("DESCRIPTION", modifyLongDesc(det, ModTypLongDesc));
+				}
+			} else {
+				 // what was the reason? replace or no replace? I dont remember
+				varParams.put("DESCRIPTION",STRreplace.replace(det.LongDescription, "\n", "<br>"));
+			}
+			
+			if (badChars != null) {
+				varParams.put("NOTES",STRreplace.replace(badChars.replaceAll(det.getCacheNotes()), "\n","<br>"));
+				varParams.put("HINTS",badChars.replaceAll(det.Hints));
+				varParams.put("DECRYPTEDHINTS",badChars.replaceAll(Common.rot13(det.Hints)));
+			} else {
+				varParams.put("NOTES", STRreplace.replace(det.getCacheNotes(), "\n","<br>"));
+				varParams.put("HINTS", det.Hints);
+				varParams.put("DECRYPTEDHINTS", Common.rot13(det.Hints));
+			}
+			if (det.Travelbugs.size()>0) varParams.put("BUGS",det.Travelbugs.toHtml());
+			if (det.getSolver()!=null && det.getSolver().trim().length()>0) varParams.put("SOLVER", STRreplace.replace(det.getSolver(),"\n","<br/>\n"));
+		}
 		return varParams;
 	}	
+
+	/**
+	 * Modify the image links in the long description so that they point to image files in the local directory
+	 * Also copy the image file to the target directory so that it can be displayed.
+	 * @param chD CacheHolderDetail
+	 * @param int ModTypLongDesc == 1 get image from profile path, == 2 get image from html-path
+	 * @return The modified long description
+	 */
+	private String modifyLongDesc(CacheHolderDetail chD, int ModTypLongDesc) {
+		StringBuffer s=new StringBuffer(chD.LongDescription.length());
+		int start=0;
+		int pos;
+		int imageNo=0;
+		String imgsrc="";
+		if (ModTypLongDesc==1) imgsrc="file://"+Global.getProfile().dataDir;
+		Regex imgRex = new Regex("src=(?:\\s*[^\"|']*?)(?:\"|')(.*?)(?:\"|')");
+		while (start>=0 && (pos=chD.LongDescription.indexOf("<img",start))>0) {
+			if (imageNo >= chD.images.size()) break;
+			s.append(chD.LongDescription.substring(start,pos));
+			imgRex.searchFrom(chD.LongDescription,pos);
+			String imgUrl=imgRex.stringMatched(1);
+			if (imgUrl.lastIndexOf('.')>0 && imgUrl.toLowerCase().startsWith("http")) {
+				String imgType = (imgUrl.substring(imgUrl.lastIndexOf(".")).toLowerCase()+"    ").substring(0,4).trim();
+				// If we have an image which we stored when spidering, we can display it
+   				if(imgType.startsWith(".png") || imgType.startsWith(".jpg") || imgType.startsWith(".gif")){
+					Object localImageSource = null;
+					if (imageNo < chD.images.size()) {
+						localImageSource = chD.images.get(imageNo).getFilename();
+					}
+					if (localImageSource == null) localImageSource = imgUrl;
+					s.append("<img src=\""+imgsrc+localImageSource+"\">");
+					imageNo++;
+				}
+			}
+			start=chD.LongDescription.indexOf(">",pos);
+			if (start>=0) start++;
+		}
+		if (start>=0) s.append(chD.LongDescription.substring(start));
+		return s.toString();
+	}
+
 	private final static Time nowdate() {
 		Time nd = new Time();
 		return nd.setFormat("yyyy-MM-dd");

Modified: trunk/src/CacheWolf/ShowCacheInBrowser.java
===================================================================
--- trunk/src/CacheWolf/ShowCacheInBrowser.java	2010-03-31 10:56:30 UTC (rev 2531)
+++ trunk/src/CacheWolf/ShowCacheInBrowser.java	2010-03-31 20:24:53 UTC (rev 2532)
@@ -66,64 +66,44 @@
 			if(chD.isVisible()){
 				Vm.showWait(true);
 				try {
-					
-					Hashtable varParams;
-					varParams=chD.toHashtable(new Regex("[,.]","."), null, 0, 30, new AsciiCodec(), null, true);
-					Enumeration de = varParams.keys();
-					while(de.hasMoreElements()) {
-						String s = de.nextElement().toString();
-						if (!s.equals("DESCRIPTION")) {
-							tpl.setParam(s,varParams.get(s).toString());
-						}
-					}
+					tpl.setParams(chD.toHashtable(new Regex("[,.]","."), null, 0, 30, new AsciiCodec(), null, true, 1));
 
 					// Cache attributes
-					if (chD.getCacheDetails(true).attributes.count()>0) {
-						Vector attVect=new Vector(chD.getCacheDetails(true).attributes.count()+1);
-						for (int i=0; i<chD.getCacheDetails(true).attributes.count(); i++) {
+					if (chD.getCacheDetails(false).attributes.count()>0) {
+						Vector attVect=new Vector(chD.getCacheDetails(false).attributes.count()+1);
+						for (int i=0; i<chD.getCacheDetails(false).attributes.count(); i++) {
 							Hashtable atts=new Hashtable();
 							atts.put("IMAGE","<img src=\"file://"+
-									 chD.getCacheDetails(true).attributes.getAttribute(i).getPathAndImageName()+
-									 "\" border=0 alt=\""+chD.getCacheDetails(true).attributes.getAttribute(i).getMsg()+"\">");
+									 chD.getCacheDetails(false).attributes.getAttribute(i).getPathAndImageName()+
+									 "\" border=0 alt=\""+chD.getCacheDetails(false).attributes.getAttribute(i).getMsg()+"\">");
 							if (i % 5 ==4)
 								atts.put("BR","<br/>");
 							else
 								atts.put("BR","");
-							atts.put("INFO",chD.getCacheDetails(true).attributes.getAttribute(i).getMsg());
+							atts.put("INFO",chD.getCacheDetails(false).attributes.getAttribute(i).getMsg());
 							attVect.add(atts);
 						}
 						tpl.setParam("ATTRIBUTES",attVect);
 					}
-					if (chD.getCacheDetails(true).Travelbugs.size()>0) tpl.setParam("BUGS",chD.getCacheDetails(true).Travelbugs.toHtml());
-					if (chD.getCacheDetails(true).getSolver()!=null && chD.getCacheDetails(true).getSolver().trim().length()>0) tpl.setParam("SOLVER", STRreplace.replace(chD.getCacheDetails(true).getSolver(),"\n","<br/>\n"));
 					// Look for images
-
-					StringBuffer s=new StringBuffer(chD.getCacheDetails(true).LongDescription.length());
+					// count only the images of main body
 					int start=0;
 					int pos;
 					int imageNo=0;
 					Regex imgRex = new Regex("src=(?:\\s*[^\"|']*?)(?:\"|')(.*?)(?:\"|')");
 					while (start>=0 && (pos=chD.getCacheDetails(true).LongDescription.indexOf("<img",start))>0) {
 						if (imageNo >= chD.getCacheDetails(true).images.size())break;
-						s.append(chD.getCacheDetails(true).LongDescription.substring(start,pos));
 						imgRex.searchFrom(chD.getCacheDetails(true).LongDescription,pos);
 						String imgUrl=imgRex.stringMatched(1);
-						//Vm.debug("imgUrl "+imgUrl);
 						if (imgUrl.lastIndexOf('.')>0 && imgUrl.toLowerCase().startsWith("http")) {
 							String imgType = (imgUrl.substring(imgUrl.lastIndexOf('.')).toLowerCase()+"    ").substring(0,4).trim();
-							// If we have an image which we stored when spidering, we can display it
         					if(imgType.startsWith(".png") || imgType.startsWith(".jpg") || imgType.startsWith(".gif")){
-								s.append("<img src=\"file://"+
-								   Global.getProfile().dataDir+chD.getCacheDetails(true).images.get(imageNo).getFilename()+"\">");
 								imageNo++;
 							}
 						}
 						start=chD.getCacheDetails(true).LongDescription.indexOf(">",pos);
 						if (start>=0) start++;
 					}
-					if (start>=0) s.append(chD.getCacheDetails(true).LongDescription.substring(start));
-					tpl.setParam("DESCRIPTION", s.toString());
-
 					// Do the remaining pictures which are not included in main body of text
 					// They will be hidden initially and can be displayed by clicking on a link
 					if (imageNo<chD.getCacheDetails(true).images.size()) {

Modified: trunk/src/CacheWolf/exp/HTMLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/HTMLExporter.java	2010-03-31 10:56:30 UTC (rev 2531)
+++ trunk/src/CacheWolf/exp/HTMLExporter.java	2010-03-31 20:24:53 UTC (rev 2532)
@@ -91,26 +91,14 @@
 						continue;
 					}
 					det=ch.getCacheDetails(false);
-					varParams=ch.toHashtable(dec, null, 0, 30, new AsciiCodec(), null, false);
+					varParams=ch.toHashtable(dec, null, 0, 30, new AsciiCodec(), null, false, 2);
 					cache_index.add(varParams);
 					//We can generate the individual page here!
 					try{
 						Template page_tpl = new Template(template_init_page);
+						page_tpl.setParams(varParams);
 						
-						Enumeration de = varParams.keys();
-						while(de.hasMoreElements()) {
-							String s = de.nextElement().toString();
-							if (!s.equals("DESCRIPTION")) {
-								page_tpl.setParam(s,varParams.get(s).toString());
-							}
-						}
-						
 						if (det != null) {
-							if (ch.is_HTML()) {
-								page_tpl.setParam("DESCRIPTION", modifyLongDesc(det,targetDir));
-							} else {
-								page_tpl.setParam("DESCRIPTION",STRreplace.replace(det.LongDescription, "\n", "<br>"));
-							}
 
 							StringBuffer sb=new StringBuffer(2000);
 							for(int j = 0; j<det.CacheLogs.size(); j++){
@@ -119,9 +107,7 @@
 								icon=det.CacheLogs.getLog(j).getIcon();
 								if (logIcons.find(icon)<0) logIcons.add(icon); // Add the icon to list of icons to copy to dest directory
 							}
-
 							page_tpl.setParam("LOGS", sb.toString());
-							page_tpl.setParam("NOTES", STRreplace.replace(det.getCacheNotes(), "\n","<br>"));
 
 							cacheImg.clear();
 							for(int j = 0; j<det.images.size(); j++){
@@ -257,49 +243,6 @@
 
 	}
 
-	/**
-	 * Modify the image links in the long description so that they point to image files in the local directory
-	 * Also copy the image file to the target directory so that it can be displayed.
-	 * @param chD CacheHolderDetail
-	 * @return The modified long description
-	 */
-	private String modifyLongDesc(CacheHolderDetail chD, String targetDir) {
-		StringBuffer s=new StringBuffer(chD.LongDescription.length());
-		int start=0;
-		int pos;
-		int imageNo=0;
-		Regex imgRex = new Regex("src=(?:\\s*[^\"|']*?)(?:\"|')(.*?)(?:\"|')");
-		while (start>=0 && (pos=chD.LongDescription.indexOf("<img",start))>0) {
-			s.append(chD.LongDescription.substring(start,pos));
-			imgRex.searchFrom(chD.LongDescription,pos);
-			String imgUrl=imgRex.stringMatched(1);
-			//Vm.debug("imgUrl "+imgUrl);
-			if (imgUrl.lastIndexOf('.')>0 && imgUrl.toLowerCase().startsWith("http")) {
-				String imgType = (imgUrl.substring(imgUrl.lastIndexOf(".")).toLowerCase()+"    ").substring(0,4).trim();
-				// If we have an image which we stored when spidering, we can display it
-				if(!imgType.startsWith(".com") && !imgType.startsWith(".php") && !imgType.startsWith(".exe") && !imgType.startsWith(".pl")){
-					// It may occur that there are less local images than
-					// image links in the description (eg. because of importing
-					// GPX files). We have to allow for this situation.
-					Object localImageSource = null;
-					if (imageNo < chD.images.size()) {
-						localImageSource = chD.images.get(imageNo).getFilename();
-					}
-					if (localImageSource == null) localImageSource = imgUrl;
-					s.append("<img src=\""+localImageSource+"\">");
-					// The actual immages are copied elswhere
-					//DataMover.copy(profile.dataDir + chD.Images.get(imageNo),targetDir + chD.Images.get(imageNo));
-					imageNo++;
-				}
-			}
-			start=chD.LongDescription.indexOf(">",pos);
-			if (start>=0) start++;
-			if (imageNo >= chD.images.size()) break;
-		}
-		if (start>=0) s.append(chD.LongDescription.substring(start));
-		return s.toString();
-	}
-
 	private void sortAndPrintIndex(Template tmpl, Vector list, String file, String field){
 		PrintWriter detfile;
 

Modified: trunk/src/CacheWolf/exp/TPLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/TPLExporter.java	2010-03-31 10:56:30 UTC (rev 2531)
+++ trunk/src/CacheWolf/exp/TPLExporter.java	2010-03-31 20:24:53 UTC (rev 2532)
@@ -194,7 +194,7 @@
 				h.changed();
 				if(ch.isVisible() && ch.pos.isValid()){
 					try {
-						cache_index.add(ch.toHashtable(dec, rex, myFilter.shortWaypointLength, myFilter.shortNameLength, myFilter.codec, gm, false));
+						cache_index.add(ch.toHashtable(dec, rex, myFilter.shortWaypointLength, myFilter.shortNameLength, myFilter.codec, gm, false, 0));
 					}catch(Exception e){
 						Vm.debug("Problem getting Parameter, Cache: " + ch.getWayPoint());
 						e.printStackTrace();



