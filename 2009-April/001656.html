<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Cachewolf-svn] r1738 - in trunk/src: CacheWolf CacheWolf/navi exp
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cachewolf-svn/2009-April/index.html" >
   <LINK REL="made" HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r1738%20-%20in%20trunk/src%3A%20CacheWolf%20CacheWolf/navi%20exp&In-Reply-To=%3C200904051500.n35F02vp005620%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001655.html">
   <LINK REL="Next"  HREF="001657.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cachewolf-svn] r1738 - in trunk/src: CacheWolf CacheWolf/navi exp</H1>
    <B>engywuck at mail.berlios.de</B> 
    <A HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r1738%20-%20in%20trunk/src%3A%20CacheWolf%20CacheWolf/navi%20exp&In-Reply-To=%3C200904051500.n35F02vp005620%40sheep.berlios.de%3E"
       TITLE="[Cachewolf-svn] r1738 - in trunk/src: CacheWolf CacheWolf/navi exp">engywuck at mail.berlios.de
       </A><BR>
    <I>Sun Apr  5 17:00:02 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001655.html">[Cachewolf-svn] r1737 - trunk/src/CacheWolf
</A></li>
        <LI>Next message: <A HREF="001657.html">[Cachewolf-svn] r1739 - trunk/res_noewe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1656">[ date ]</a>
              <a href="thread.html#1656">[ thread ]</a>
              <a href="subject.html#1656">[ subject ]</a>
              <a href="author.html#1656">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: engywuck
Date: 2009-04-05 16:59:37 +0200 (Sun, 05 Apr 2009)
New Revision: 1738

Modified:
   trunk/src/CacheWolf/Attributes.java
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/CacheHolderDetail.java
   trunk/src/CacheWolf/CacheList.java
   trunk/src/CacheWolf/CalcPanel.java
   trunk/src/CacheWolf/DBStats.java
   trunk/src/CacheWolf/DataMover.java
   trunk/src/CacheWolf/DescriptionPanel.java
   trunk/src/CacheWolf/DetailsPanel.java
   trunk/src/CacheWolf/Filter.java
   trunk/src/CacheWolf/FilterScreen.java
   trunk/src/CacheWolf/GPXImporter.java
   trunk/src/CacheWolf/LOCXMLImporter.java
   trunk/src/CacheWolf/MainForm.java
   trunk/src/CacheWolf/MainMenu.java
   trunk/src/CacheWolf/MainTab.java
   trunk/src/CacheWolf/MyComparer.java
   trunk/src/CacheWolf/NewProfileForm.java
   trunk/src/CacheWolf/NewProfileWizard.java
   trunk/src/CacheWolf/OCXMLImporter.java
   trunk/src/CacheWolf/OCXMLImporterScreen.java
   trunk/src/CacheWolf/Parser.java
   trunk/src/CacheWolf/Preferences.java
   trunk/src/CacheWolf/Profile.java
   trunk/src/CacheWolf/ProfileDataForm.java
   trunk/src/CacheWolf/ProfilesForm.java
   trunk/src/CacheWolf/RadarPanel.java
   trunk/src/CacheWolf/SearchCache.java
   trunk/src/CacheWolf/ShowCacheInBrowser.java
   trunk/src/CacheWolf/SpiderGC.java
   trunk/src/CacheWolf/StatusBar.java
   trunk/src/CacheWolf/TablePanel.java
   trunk/src/CacheWolf/TravelbugJourneyScreen.java
   trunk/src/CacheWolf/myInteractivePanel.java
   trunk/src/CacheWolf/myTableControl.java
   trunk/src/CacheWolf/myTableModel.java
   trunk/src/CacheWolf/navi/GotoPanel.java
   trunk/src/CacheWolf/navi/MapLoaderGui.java
   trunk/src/CacheWolf/navi/MovingMap.java
   trunk/src/exp/ASCExporter.java
   trunk/src/exp/ExploristExporter.java
   trunk/src/exp/Exporter.java
   trunk/src/exp/GPXExporter.java
   trunk/src/exp/HTMLExporter.java
   trunk/src/exp/KMLExporter.java
   trunk/src/exp/LocExporter.java
   trunk/src/exp/MSARCSVExporter.java
   trunk/src/exp/OVLExporter.java
   trunk/src/exp/OziExporter.java
   trunk/src/exp/PCX5Exporter.java
   trunk/src/exp/TPLExporter.java
   trunk/src/exp/TomTomExporter.java
Log:
Introduced getter/setter methods for the most important public fields, in order to be able to toggle the &quot;we have to save index.xml&quot;-flag in a central and more intelligent way. 
Also had to tweak some of the filter routines, so that they don't alter filter flags unnecessarily.

Modified: trunk/src/CacheWolf/Attributes.java
===================================================================
--- trunk/src/CacheWolf/Attributes.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/Attributes.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -16,9 +16,9 @@
 	public long attributesYes;
 	public long attributesNo;
 
-	public Attributes() { 
+	public Attributes(){ 
 	}
-
+	
 	/**
 	 * Get the number of attributes in the list
 	 * @return number of attributes

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/CacheHolder.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -26,21 +26,21 @@
 	protected static final String EMPTY = &quot;&quot;;
 
 	/** Cachestatus is Found, Not found or a date in format yyyy-mm-dd hh:mm for found date */
-	public String CacheStatus = EMPTY;
+	private String cacheStatus = EMPTY;
 	/** The name of the waypoint typicall GC.... or OC.... or CW...... (can be any characters) */
-	public String wayPoint = EMPTY;
+	private String wayPoint = EMPTY;
 	/** The name of the cache (short description) */
-	public String CacheName = EMPTY;
+	private String cacheName = EMPTY;
 	/** The alias of the owner */
-	public String CacheOwner = EMPTY;
+	private String cacheOwner = EMPTY;
 	/** The coordinates of the cache */
 	public CWPoint pos = new CWPoint();
 	/** The coordinates of the cache */
 	public String LatLon = pos.toString();
 	/** The date when the cache was hidden in format yyyy-mm-dd */
-	public String DateHidden = EMPTY;
+	private String dateHidden = EMPTY;
 	/** The size of the cache (as per GC cache sizes Micro, Small, ....) */
-	public String CacheSize = &quot;None&quot;;
+	private String cacheSize = &quot;None&quot;;
 	/** The distance from the centre in km */
 	public double kilom = -1; int bla = 0;
 	public double lastKilom = -2; // Cache last value
@@ -51,31 +51,31 @@
 	/** The angle (0=North, 180=South) from the current centre to this point */
 	public double degrees = 0;
 	/** The difficulty of the cache from 1 to 5 in .5 incements */ 
-	public String hard = EMPTY;
+	private String hard = EMPTY;
 	/** The terrain rating of the cache from 1 to 5 in .5 incements */
-	public String terrain = EMPTY;
+	private String terrain = EMPTY;
 	/** The cache type (@see CacheType for translation table)  */
-	public int type = 0; 
+	private int type = 0; 
 	/** True if the cache has been archived */
-	public boolean is_archived = false;
+	private boolean archived = false;
 	/** True if the cache is available for searching */
-	public boolean is_available = true;
+	private boolean available = true;
 	/** True if we own this cache */
-	public boolean is_owned = false;
+	private boolean owned = false;
 	/** True if we have found this cache */
-	public boolean is_found = false;
+	private boolean found = false;
 	/** If this is true, the cache has been filtered (is currently invisible) */
-	public boolean is_filtered = false;
+	private boolean filtered = false;
 	/** True if the number of logs for this cache has changed */
-	public boolean is_log_update = false;
+	private boolean log_updated = false;
 	/** True if cache details have changed: longDescription, Hints,  */
-	public boolean is_update = false;
+	private boolean cache_updated = false;
 	/** True if the cache data is incomplete (e.g. an error occurred during spidering */
-	public boolean is_incomplete = false;
+	private boolean incomplete = false;
 	/** True if the cache is blacklisted */
-	public boolean is_black = false;
+	private boolean black = false;
 	/** True if the cache is new */
-	public boolean is_new = false;
+	private boolean newCache = false;
 	/** True if the cache is part of the results of a search */
 	public boolean is_flaged = false;
 	/** True if the cache has been selected using the tick box in the list view */
@@ -83,19 +83,19 @@
 	/** Not used: This attribute is saved with the cache and read back but never set */
 //	public String dirty = EMPTY;
 	/** The unique OC cache ID */
-	public String ocCacheID = EMPTY;
+	private String ocCacheID = EMPTY;
 	/** The number of times this cache has not been found (max. 5) */
-	public int noFindLogs = 0;
+	private int noFindLogs = 0;
 	/** Number of recommendations (from the opencaching logs) */
-	public int numRecommended = 0;
+	private int numRecommended = 0;
 	/** Number of Founds since start of recommendations system */
-	public int numFoundsSinceRecommendation = 0;
+	private int numFoundsSinceRecommendation = 0;
 	/** Recommendation score: calculated as rations  numRecommended / numLogsSinceRecommendation * 100 */
 	public int recommendationScore = 0;
 	/** True if this cache has travelbugs */
-	public boolean has_bug = false;
+	private boolean bugs = false;
 	/** True if the cache description is stored in HTML format */
-	public boolean is_HTML = true;
+	private boolean html = true;
 	/** List of additional waypoints associated with this waypoint */
 	public Vector addiWpts = new Vector();
 	/** in range is used by the route filter to identify caches in range of a segment*/
@@ -103,7 +103,7 @@
 	/** If this is an additional waypoint, this links back to the main waypoint */
 	public CacheHolder mainCache;
 	/** The date this cache was last synced with OC in format yyyyMMddHHmmss */
-	public String lastSyncOC = EMPTY;
+	private String lastSyncOC = EMPTY;
 	public CacheHolderDetail details = null;
 	/** When sorting the cacheDB this field is used. The relevant field is copied here and
 	 *  the sort is always done on this field to speed up the sorting process 
@@ -111,9 +111,10 @@
 	public String sort;
 	private static StringBuffer sb=new StringBuffer(530); // Used in toXML()
 
-	public long attributesYes = 0;
-	public long attributesNo  = 0;
+	private long attributesYes = 0;
+	private long attributesNo  = 0;
 
+	
 //	static int nObjects=0;
 	public CacheHolder() {//nObjects++;Vm.debug(&quot;CacheHolder() nO=&quot;+nObjects);
 	}
@@ -132,10 +133,10 @@
 		int start,end;
 		try {
 			start=xmlString.indexOf('&quot;'); end=xmlString.indexOf('&quot;',start+1);
-			CacheName = SafeXML.cleanback(xmlString.substring(start+1,end));
+			setCacheName(SafeXML.cleanback(xmlString.substring(start+1,end)));
 			
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-            CacheOwner = SafeXML.cleanback(xmlString.substring(start+1,end));
+            setCacheOwner(SafeXML.cleanback(xmlString.substring(start+1,end)));
 			// Assume coordinates are in decimal format
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
 			double lat=Convert.parseDouble(xmlString.substring(start+1,end).replace(notDecSep,decSep));
@@ -146,90 +147,90 @@
 			LatLon=pos.toString();
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			DateHidden = xmlString.substring(start+1,end); 
+			setDateHidden(xmlString.substring(start+1,end)); 
 			// Convert the US format to YYYY-MM-DD if necessary
-			if (DateHidden.indexOf('/')&gt;-1) DateHidden=DateFormat.MDY2YMD(DateHidden);
+			if (getDateHidden().indexOf('/')&gt;-1) setDateHidden(DateFormat.MDY2YMD(getDateHidden()));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			wayPoint = SafeXML.cleanback(xmlString.substring(start+1,end));
+			setWayPoint(SafeXML.cleanback(xmlString.substring(start+1,end)));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			CacheStatus = xmlString.substring(start+1,end);
+			setCacheStatus(xmlString.substring(start+1,end));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			type = new Integer(xmlString.substring(start+1,end)).intValue();
+			setType(new Integer(xmlString.substring(start+1,end)).intValue());
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			hard = xmlString.substring(start+1,end);
+			setHard(xmlString.substring(start+1,end));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			terrain = xmlString.substring(start+1,end);
+			setTerrain(xmlString.substring(start+1,end));
 
 			// The next item was 'dirty' but this is no longer used.
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			is_filtered = xmlString.substring(start+1,end).equals(&quot;true&quot;); 
+			setFiltered(xmlString.substring(start+1,end).equals(&quot;true&quot;)); 
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			CacheSize = xmlString.substring(start+1,end);
+			setCacheSize(xmlString.substring(start+1,end));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			is_available = xmlString.substring(start+1,end).equals(&quot;true&quot;);
+			setAvailable(xmlString.substring(start+1,end).equals(&quot;true&quot;));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			is_archived = xmlString.substring(start+1,end).equals(&quot;true&quot;);
+			setArchived(xmlString.substring(start+1,end).equals(&quot;true&quot;));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			has_bug = xmlString.substring(start+1,end).equals(&quot;true&quot;);
+			setHas_bugs(xmlString.substring(start+1,end).equals(&quot;true&quot;));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			is_black = xmlString.substring(start+1,end).equals(&quot;true&quot;);
-			if(is_black!=Global.getProfile().showBlacklisted) is_filtered = true;
+			setBlack(xmlString.substring(start+1,end).equals(&quot;true&quot;));
+			if(is_black()!=Global.getProfile().showBlacklisted()) setFiltered(true);
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			is_owned = xmlString.substring(start+1,end).equals(&quot;true&quot;);
+			setOwned(xmlString.substring(start+1,end).equals(&quot;true&quot;));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			is_found = xmlString.substring(start+1,end).equals(&quot;true&quot;);
+			setFound(xmlString.substring(start+1,end).equals(&quot;true&quot;));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			is_new = xmlString.substring(start+1,end).equals(&quot;true&quot;);
+			setNew(xmlString.substring(start+1,end).equals(&quot;true&quot;));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			is_log_update = xmlString.substring(start+1,end).equals(&quot;true&quot;);
+			setLog_updated(xmlString.substring(start+1,end).equals(&quot;true&quot;));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			is_update = xmlString.substring(start+1,end).equals(&quot;true&quot;);
+			setUpdated(xmlString.substring(start+1,end).equals(&quot;true&quot;));
 
 			// for backwards compatibility set value to true, if it is not in the file
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			is_HTML = !xmlString.substring(start+1,end).equals(&quot;false&quot;);
+			setHTML(!xmlString.substring(start+1,end).equals(&quot;false&quot;));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			noFindLogs = Convert.toInt(xmlString.substring(start+1,end));
+			setNoFindLogs(Convert.toInt(xmlString.substring(start+1,end)));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			ocCacheID = xmlString.substring(start+1,end);
+			setOcCacheID(xmlString.substring(start+1,end));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			is_incomplete = xmlString.substring(start+1,end).equals(&quot;true&quot;);
+			setIncomplete(xmlString.substring(start+1,end).equals(&quot;true&quot;));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			lastSyncOC = xmlString.substring(start+1,end);
+			setLastSyncOC(xmlString.substring(start+1,end));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			numRecommended = Convert.toInt(xmlString.substring(start+1,end));
+			setNumRecommended(Convert.toInt(xmlString.substring(start+1,end)));
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
-			numFoundsSinceRecommendation = Convert.toInt(xmlString.substring(start+1,end));
-			recommendationScore = LogList.getScore(numRecommended, numFoundsSinceRecommendation);
+			setNumFoundsSinceRecommendation(Convert.toInt(xmlString.substring(start+1,end)));
+			recommendationScore = LogList.getScore(getNumRecommended(), getNumFoundsSinceRecommendation());
 
 			start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
 			if (start &gt; -1 &amp;&amp; end &gt; -1) {
-				attributesYes = Convert.parseLong(xmlString.substring(start+1,end));
+				setAttributesYes(Convert.parseLong(xmlString.substring(start+1,end)));
 
 				start=xmlString.indexOf('&quot;',end+1); end=xmlString.indexOf('&quot;',start+1);
 				if (start &gt; -1 &amp;&amp; end &gt; -1)
-					attributesNo = Convert.parseLong(xmlString.substring(start+1,end));
+					setAttributesNo(Convert.parseLong(xmlString.substring(start+1,end)));
 			}
 		} catch (Exception ex) {
 
@@ -280,11 +281,11 @@
 	}
 	public void update(CacheHolder ch, boolean overwrite) {
 		this.recommendationScore = ch.recommendationScore;
-		this.numFoundsSinceRecommendation = ch.numFoundsSinceRecommendation;
-		this.numRecommended = ch.numRecommended;
+		this.setNumFoundsSinceRecommendation(ch.getNumFoundsSinceRecommendation());
+		this.setNumRecommended(ch.getNumRecommended());
 		if (overwrite) {
-			this.CacheStatus=ch.CacheStatus;
-			this.is_found = ch.is_found;
+			this.setCacheStatus(ch.getCacheStatus());
+			this.setFound(ch.is_found());
 			this.pos = ch.pos;
 			this.LatLon = ch.LatLon;
 		} else {
@@ -296,9 +297,9 @@
 	   true                yyyy-mm-dd          yyyy-mm-dd       no (or yes)
 	   true                yyyy-mm-dd hh:mm    yyyy-mm-dd       no
 			 */
-			if (!this.is_found || this.CacheStatus.indexOf(&quot;:&quot;)&lt;0) {
-				this.CacheStatus=ch.CacheStatus;
-				this.is_found = ch.is_found;
+			if (!this.is_found() || this.getCacheStatus().indexOf(&quot;:&quot;)&lt;0) {
+				this.setCacheStatus(ch.getCacheStatus());
+				this.setFound(ch.is_found());
 			}
 			// Don't overwrite valid coordinates with invalid ones
 			if (ch.pos.isValid() || !this.pos.isValid()) {
@@ -306,70 +307,70 @@
 				this.LatLon = ch.LatLon;
 			}
 		}
-		this.wayPoint = ch.wayPoint;
-		this.CacheName = ch.CacheName;
-		this.CacheOwner = ch.CacheOwner;
+		this.setWayPoint(ch.getWayPoint());
+		this.setCacheName(ch.getCacheName());
+		this.setCacheOwner(ch.getCacheOwner());
 
-		this.DateHidden = ch.DateHidden;
-		this.CacheSize = ch.CacheSize;
+		this.setDateHidden(ch.getDateHidden());
+		this.setCacheSize(ch.getCacheSize());
 		this.kilom = ch.kilom;
 		this.bearing = ch.bearing;
 		this.degrees = ch.degrees;
-		this.hard = ch.hard;
-		this.terrain = ch.terrain;
-		this.type = ch.type;
-		this.is_archived = ch.is_archived;
-		this.is_available = ch.is_available;
-		this.is_owned = ch.is_owned;
-		this.is_filtered = ch.is_filtered;
-		this.is_log_update = ch.is_log_update;
-		this.is_update = ch.is_update;
-		this.is_incomplete = ch.is_incomplete;
-		this.is_black=ch.is_black;
+		this.setHard(ch.getHard());
+		this.setTerrain(ch.getTerrain());
+		this.setType(ch.getType());
+		this.setArchived(ch.is_archived());
+		this.setAvailable(ch.is_available());
+		this.setOwned(ch.is_owned());
+		this.setFiltered(ch.is_filtered());
+		this.setLog_updated(ch.is_log_updated());
+		this.setUpdated(ch.is_updated());
+		this.setIncomplete(ch.is_incomplete());
+		this.setBlack(ch.is_black());
 		this.addiWpts = ch.addiWpts;
 		this.mainCache=ch.mainCache;
-		this.is_new=ch.is_new;
+		this.setNew(ch.is_new());
 		this.is_flaged = ch.is_flaged;
 		this.is_Checked = ch.is_Checked;
 		//this.dirty = ch.dirty;
-		this.ocCacheID = ch.ocCacheID;
-		this.noFindLogs = ch.noFindLogs;
-		this.has_bug = ch.has_bug;
-		this.is_HTML = ch.is_HTML;
+		this.setOcCacheID(ch.getOcCacheID());
+		this.setNoFindLogs(ch.getNoFindLogs());
+		this.setHas_bugs(ch.has_bugs());
+		this.setHTML(ch.is_HTML());
 		this.sort=ch.sort;
-		this.lastSyncOC = ch.lastSyncOC;
+		this.setLastSyncOC(ch.getLastSyncOC());
 
-		this.attributesYes = ch.attributesYes;
-		this.attributesNo = ch.attributesNo;
+		this.setAttributesYes(ch.getAttributesYes());
+		this.setAttributesNo(ch.getAttributesNo());
 	}
 	/**
 	 * Call it only when necessary, it takes time, because all logs must be parsed
 	 *
 	 */
 	public void calcRecommendationScore() {
-		if (wayPoint.toLowerCase().startsWith(&quot;oc&quot;) ) {
+		if (getWayPoint().toLowerCase().startsWith(&quot;oc&quot;) ) {
 			CacheHolderDetail chD;
 			if (this instanceof CacheHolderDetail)	chD = (CacheHolderDetail)this;
 			else chD = getCacheDetails(true, false);
 			if (chD != null) {
 				chD.CacheLogs.calcRecommendations();
 				recommendationScore = chD.CacheLogs.recommendationRating;
-				numFoundsSinceRecommendation = chD.CacheLogs.foundsSinceRecommendation;
-				numRecommended = chD.CacheLogs.numRecommended;
+				setNumFoundsSinceRecommendation(chD.CacheLogs.foundsSinceRecommendation);
+				setNumRecommended(chD.CacheLogs.numRecommended);
 			} else { // cache doesn't have details
 				recommendationScore = -1;
-				numFoundsSinceRecommendation = -1;
-				numRecommended = -1;
+				setNumFoundsSinceRecommendation(-1);
+				setNumRecommended(-1);
 			}
 		} else {
 			recommendationScore = -1;
-			numFoundsSinceRecommendation = -1;
-			numRecommended = -1;
+			setNumFoundsSinceRecommendation(-1);
+			setNumRecommended(-1);
 		}
 		if (details != null) {
 		details.recommendationScore = recommendationScore;
-		details.numFoundsSinceRecommendation = numFoundsSinceRecommendation;
-		details.numRecommended = numRecommended;
+		details.setNumFoundsSinceRecommendation(getNumFoundsSinceRecommendation());
+		details.setNumRecommended(getNumRecommended());
 		}
 	}
 	
@@ -377,50 +378,50 @@
 	public String toXML() {
 		if (this instanceof CacheHolderDetail || (details != null &amp;&amp; details.hasUnsavedChanges)) calcRecommendationScore(); 
 		sb.delete(0,sb.length());
-		sb.append(&quot;    &lt;CACHE name = \&quot;&quot;);
-		sb.append(SafeXML.clean(CacheName));
-		sb.append(&quot;\&quot; owner = \&quot;&quot;);		sb.append(SafeXML.clean(CacheOwner));
+		sb.append(&quot;    &lt;CACHE &quot;);
+		sb.append(&quot; name = \&quot;&quot;);        sb.append(SafeXML.clean(getCacheName()));
+		sb.append(&quot;\&quot; owner = \&quot;&quot;);		sb.append(SafeXML.clean(getCacheOwner()));
 		sb.append(&quot;\&quot; lat = \&quot;&quot;); 		sb.append(pos.latDec ); 
 		sb.append(&quot;\&quot; lon = \&quot;&quot;);		sb.append(pos.lonDec);
-		sb.append(&quot;\&quot; hidden = \&quot;&quot;);	sb.append(DateHidden);
-		sb.append(&quot;\&quot; wayp = \&quot;&quot;);		sb.append(SafeXML.clean(wayPoint));
-		sb.append(&quot;\&quot; status = \&quot;&quot;);	sb.append(CacheStatus);
-		sb.append(&quot;\&quot; type = \&quot;&quot;);		sb.append(type);
-		sb.append(&quot;\&quot; dif = \&quot;&quot;);		sb.append(hard);
-		sb.append(&quot;\&quot; terrain = \&quot;&quot; );	sb.append(terrain ); 
-		sb.append(&quot;\&quot; filtered = \&quot;&quot; ); sb.append(is_filtered); // This was 'dirty', but dirty is not used
-		sb.append(&quot;\&quot; size = \&quot;&quot;);		sb.append(CacheSize);
-		sb.append(&quot;\&quot; online = \&quot;&quot; );	sb.append(is_available); 
-		sb.append(&quot;\&quot; archived = \&quot;&quot; );	sb.append(is_archived); 
-		sb.append(&quot;\&quot; has_bug = \&quot;&quot; ); 	sb.append(has_bug); 
-		sb.append(&quot;\&quot; black = \&quot;&quot; ); 	sb.append(is_black); 
-		sb.append(&quot;\&quot; owned = \&quot;&quot; ); 	sb.append(is_owned); 
-		sb.append(&quot;\&quot; found = \&quot;&quot; ); 	sb.append(is_found); 
-		sb.append(&quot;\&quot; is_new = \&quot;&quot; );	sb.append(is_new);
-		sb.append(&quot;\&quot; is_log_update = \&quot;&quot; );sb.append(is_log_update); 
-		sb.append(&quot;\&quot; is_update = \&quot;&quot; );sb.append(is_update); 
-		sb.append(&quot;\&quot; is_HTML = \&quot;&quot; ); 	sb.append(is_HTML); 
-		sb.append(&quot;\&quot; DNFLOGS = \&quot;&quot; ); 	sb.append(noFindLogs ); 
-		sb.append(&quot;\&quot; ocCacheID = \&quot;&quot; );sb.append(ocCacheID ); 
-		sb.append(&quot;\&quot; is_INCOMPLETE = \&quot;&quot;);sb.append(is_incomplete); 
-		sb.append(&quot;\&quot; lastSyncOC = \&quot;&quot; );sb.append(lastSyncOC ); 
-		sb.append(&quot;\&quot; num_recommended = \&quot;&quot;);sb.append(Convert.formatInt(numRecommended)); 
-		sb.append(&quot;\&quot; num_found = \&quot;&quot; );sb.append(Convert.formatInt(numFoundsSinceRecommendation));
-		sb.append(&quot;\&quot; attributesYes = \&quot;&quot; ); sb.append(Convert.formatLong(attributesYes));
-		sb.append(&quot;\&quot; attributesNo = \&quot;&quot; ); sb.append(Convert.formatLong(attributesNo));
+		sb.append(&quot;\&quot; hidden = \&quot;&quot;);	sb.append(getDateHidden());
+		sb.append(&quot;\&quot; wayp = \&quot;&quot;);		sb.append(SafeXML.clean(getWayPoint()));
+		sb.append(&quot;\&quot; status = \&quot;&quot;);	sb.append(getCacheStatus());
+		sb.append(&quot;\&quot; type = \&quot;&quot;);		sb.append(getType());
+		sb.append(&quot;\&quot; dif = \&quot;&quot;);		sb.append(getHard());
+		sb.append(&quot;\&quot; terrain = \&quot;&quot; );	sb.append(getTerrain() ); 
+		sb.append(&quot;\&quot; filtered = \&quot;&quot; ); sb.append(is_filtered()); // This was 'dirty', but dirty is not used
+		sb.append(&quot;\&quot; size = \&quot;&quot;);		sb.append(getCacheSize());
+		sb.append(&quot;\&quot; online = \&quot;&quot; );	sb.append(is_available()); 
+		sb.append(&quot;\&quot; archived = \&quot;&quot; );	sb.append(is_archived()); 
+		sb.append(&quot;\&quot; has_bug = \&quot;&quot; ); 	sb.append(has_bugs()); 
+		sb.append(&quot;\&quot; black = \&quot;&quot; ); 	sb.append(is_black()); 
+		sb.append(&quot;\&quot; owned = \&quot;&quot; ); 	sb.append(is_owned()); 
+		sb.append(&quot;\&quot; found = \&quot;&quot; ); 	sb.append(is_found()); 
+		sb.append(&quot;\&quot; is_new = \&quot;&quot; );	sb.append(is_new());
+		sb.append(&quot;\&quot; is_log_update = \&quot;&quot; );sb.append(is_log_updated()); 
+		sb.append(&quot;\&quot; is_update = \&quot;&quot; );sb.append(is_updated()); 
+		sb.append(&quot;\&quot; is_HTML = \&quot;&quot; ); 	sb.append(is_HTML()); 
+		sb.append(&quot;\&quot; DNFLOGS = \&quot;&quot; ); 	sb.append(getNoFindLogs()); 
+		sb.append(&quot;\&quot; ocCacheID = \&quot;&quot; );sb.append(getOcCacheID()); 
+		sb.append(&quot;\&quot; is_INCOMPLETE = \&quot;&quot;);sb.append(is_incomplete()); 
+		sb.append(&quot;\&quot; lastSyncOC = \&quot;&quot; );sb.append(getLastSyncOC()); 
+		sb.append(&quot;\&quot; num_recommended = \&quot;&quot;);sb.append(Convert.formatInt(getNumRecommended())); 
+		sb.append(&quot;\&quot; num_found = \&quot;&quot; );sb.append(Convert.formatInt(getNumFoundsSinceRecommendation()));
+		sb.append(&quot;\&quot; attributesYes = \&quot;&quot; ); sb.append(Convert.formatLong(getAttributesYes()));
+		sb.append(&quot;\&quot; attributesNo = \&quot;&quot; ); sb.append(Convert.formatLong(getAttributesNo()));
 		sb.append(&quot;\&quot; /&gt;\n&quot;);
 		return sb.toString();
 	}
 
 	public void setLatLon(String latLon) {
 		latLon=latLon.trim();
-		if (!latLon.equals(LatLon.trim())) is_update=true;
+		if (!latLon.equals(LatLon.trim())) setUpdated(true);
 		LatLon = latLon;
 		pos.set(latLon);
 	}
 
 	public boolean isAddiWpt() {
-		return CacheType.isAddiWpt(this.type);
+		return CacheType.isAddiWpt(this.getType());
 	}
 
 	public boolean hasAddiWpt() {
@@ -440,14 +441,14 @@
 		}
 	}
 	public void setAttributesFromMainCache(CacheHolder mainCh){
-		this.CacheOwner = mainCh.CacheOwner;
-		this.CacheStatus = mainCh.CacheStatus;
-		this.is_archived = mainCh.is_archived;
-		this.is_available = mainCh.is_available;
-		this.is_black = mainCh.is_black;
-		this.is_owned = mainCh.is_owned;
-		this.is_new = mainCh.is_new;
-		this.is_found = mainCh.is_found;
+		this.setCacheOwner(mainCh.getCacheOwner());
+		this.setCacheStatus(mainCh.getCacheStatus());
+		this.setArchived(mainCh.is_archived());
+		this.setAvailable(mainCh.is_available());
+		this.setBlack(mainCh.is_black());
+		this.setOwned(mainCh.is_owned());
+		this.setNew(mainCh.is_new());
+		this.setFound(mainCh.is_found());
 	}
 
 	public void setAttributesToAddiWpts(){
@@ -475,7 +476,7 @@
 			if (ch.isAddiWpt()) 
 				main2=ch.mainCache;
 			else 
-				return main1.wayPoint.equals(ch.wayPoint);
+				return main1.getWayPoint().equals(ch.getWayPoint());
 		} else { // ch instanceof CacheHolder 
 			if (ch.isAddiWpt()) main2 = ch.mainCache; else main2 = ch; 
 		}
@@ -512,16 +513,21 @@
 			else details.update(this);
 			return details;
 		}
+		// FIXME Problem: Hier wird ein neues Detail-Objekt erzeugt, welches nat&#252;rlich noch
+		//       Default-Werte in den Feldern stehen hat. 
+		//       Das Zur&#252;cksetzen von UnsavedChanges ist erstmal ein Hack.
+		boolean hasUnsavedChanges = Global.getProfile().hasUnsavedChanges();
 		details = new CacheHolderDetail(this);
 		try {
 			details.readCache(Global.getProfile().dataDir);
 		} catch (IOException e) {
 			if (maybenew) details.update(this);
 			else {
-				if (alarmuser) (new MessageBox(&quot;Error&quot;, &quot;Could not read cache details for cache: &quot;+this.wayPoint, FormBase.OKB)).execute();
+				if (alarmuser) (new MessageBox(&quot;Error&quot;, &quot;Could not read cache details for cache: &quot;+this.getWayPoint(), FormBase.OKB)).execute();
 				return null;
 			} 
 		}
+		if (! hasUnsavedChanges) Global.getProfile().resetUnsavedChanges();
 		detailsAdded();
 		return details;
 	}
@@ -589,9 +595,9 @@
 	public String GetStatusDate() {
 		String statusDate = &quot;&quot;;
 		
-		if (is_found) {
+		if (is_found()) {
 			Regex rexDate=new Regex(&quot;([0-9]{4}-[0-9]{2}-[0-9]{2})&quot;);
-			rexDate.search(CacheStatus);
+			rexDate.search(getCacheStatus());
 			if (rexDate.stringMatched(1)!= null) {
 				statusDate = rexDate.stringMatched(1);
 			}
@@ -603,15 +609,15 @@
 	public String GetStatusTime() {
 		String statusTime = &quot;&quot;;
 
-		if (is_found) {
+		if (is_found()) {
 			Regex rexTime=new Regex(&quot;([0-9]{1,2}:[0-9]{2})&quot;);
-			rexTime.search(CacheStatus);
+			rexTime.search(getCacheStatus());
 			if (rexTime.stringMatched(1)!= null) {
 				statusTime = rexTime.stringMatched(1);
 			}
 			else {
 				Regex rexDate=new Regex(&quot;([0-9]{4}-[0-9]{2}-[0-9]{2})&quot;);
-				rexDate.search(CacheStatus);
+				rexDate.search(getCacheStatus());
 				if (rexDate.stringMatched(1)!= null) {
 					statusTime = &quot;00:00&quot;;
 				}
@@ -624,12 +630,12 @@
 	public String GetCacheID() {
 		String result = &quot;&quot;;
 		
-		if ( wayPoint.toUpperCase().startsWith( &quot;GC&quot; ) ) {
+		if ( getWayPoint().toUpperCase().startsWith( &quot;GC&quot; ) ) {
 			int gcId = 0;
 
 			String sequence = &quot;0123456789ABCDEFGHJKMNPQRTVWXYZ&quot;;
 			
-			String rightPart = wayPoint.substring( 2 ).toUpperCase();
+			String rightPart = getWayPoint().substring( 2 ).toUpperCase();
 			
 			int base = 31;
 			if ((rightPart.length() &lt; 4) || (rightPart.length() == 4 &amp;&amp; sequence.indexOf(rightPart.charAt(0)) &lt; 16)) {
@@ -646,11 +652,266 @@
 	        }
 	        
 	        result = Integer.toString(gcId);	        
-		} else if ( wayPoint.toUpperCase().startsWith( &quot;OC&quot; ) ) {
-        	result = ocCacheID;
+		} else if ( getWayPoint().toUpperCase().startsWith( &quot;OC&quot; ) ) {
+        	result = getOcCacheID();
         }
 
 		return result;
 	}
+
+	// Getter and Setter for private properties
+
+	public String getCacheStatus() {
+    	return cacheStatus;
+    }
+
+	public void setCacheStatus(String cacheStatus) {
+		Global.getProfile().notifyUnsavedChanges(!cacheStatus.equals(this.cacheStatus));		
+    	this.cacheStatus = cacheStatus;
+    }
+
+	public String getWayPoint() {
+    	return wayPoint;
+    }
+
+	public void setWayPoint(String wayPoint) {
+		Global.getProfile().notifyUnsavedChanges(!wayPoint.equals(this.wayPoint));		
+    	this.wayPoint = wayPoint;
+    }
+
+	public String getCacheName() {
+    	return cacheName;
+    }
+
+	public void setCacheName(String cacheName) {
+		Global.getProfile().notifyUnsavedChanges(!cacheName.equals(this.cacheName));		
+    	this.cacheName = cacheName;
+    }
+
+	public String getCacheOwner() {
+    	return cacheOwner;
+    }
+
+	public void setCacheOwner(String cacheOwner) {
+		Global.getProfile().notifyUnsavedChanges(!cacheOwner.equals(this.cacheOwner));		
+    	this.cacheOwner = cacheOwner;
+    }
+
+	public String getDateHidden() {
+    	return dateHidden;
+    }
+
+	public void setDateHidden(String dateHidden) {
+		Global.getProfile().notifyUnsavedChanges(!dateHidden.equals(this.dateHidden));		
+    	this.dateHidden = dateHidden;
+    }
+
+	public String getCacheSize() {
+    	return cacheSize;
+    }
+
+	public void setCacheSize(String cacheSize) {
+		Global.getProfile().notifyUnsavedChanges(!cacheSize.equals(this.cacheSize));		
+    	this.cacheSize = cacheSize;
+    }
+
+	public String getHard() {
+    	return hard;
+    }
+
+	public void setHard(String hard) {
+		Global.getProfile().notifyUnsavedChanges(!hard.equals(this.hard));		
+    	this.hard = hard;
+    }
+
+	public String getTerrain() {
+    	return terrain;
+    }
+
+	public void setTerrain(String terrain) {
+		Global.getProfile().notifyUnsavedChanges(!terrain.equals(this.terrain));		
+    	this.terrain = terrain;
+    }
+
+	public int getType() {
+    	return type;
+    }
+
+	public void setType(int type) {
+		Global.getProfile().notifyUnsavedChanges(type != this.type);		
+    	this.type = type;
+    }
+
+	public boolean is_archived() {
+    	return archived;
+    }
+
+	public void setArchived(boolean is_archived) {
+		Global.getProfile().notifyUnsavedChanges(is_archived != this.archived);		
+    	this.archived = is_archived;
+    }
+
+	public boolean is_available() {
+    	return available;
+    }
+
+	public void setAvailable(boolean is_available) {
+		Global.getProfile().notifyUnsavedChanges(is_available != this.available);		
+    	this.available = is_available;
+    }
+
+	public boolean is_owned() {
+    	return owned;
+    }
+
+	public void setOwned(boolean is_owned) {
+		Global.getProfile().notifyUnsavedChanges(is_owned != this.owned);		
+    	this.owned = is_owned;
+    }
+
+	public boolean is_found() {
+    	return found;
+    }
+
+	public void setFound(boolean is_found) {
+		Global.getProfile().notifyUnsavedChanges(is_found != this.found);		
+    	this.found = is_found;
+    }
+
+	public boolean is_filtered() {
+    	return filtered;
+    }
+
+	public void setFiltered(boolean is_filtered) {
+		Global.getProfile().notifyUnsavedChanges(is_filtered != this.filtered);		
+    	this.filtered = is_filtered;
+    }
+
+	public boolean is_log_updated() {
+    	return log_updated;
+    }
+
+	public void setLog_updated(boolean is_log_updated) {
+		Global.getProfile().notifyUnsavedChanges(is_log_updated != this.log_updated);		
+    	this.log_updated = is_log_updated;
+    }
+
+	public boolean is_updated() {
+    	return cache_updated;
+    }
+
+	public void setUpdated(boolean is_updated) {
+		Global.getProfile().notifyUnsavedChanges(is_updated != this.cache_updated);		
+    	this.cache_updated = is_updated;
+    }
+
+	public boolean is_incomplete() {
+    	return incomplete;
+    }
+
+	public void setIncomplete(boolean is_incomplete) {
+		Global.getProfile().notifyUnsavedChanges(is_incomplete != this.incomplete);		
+    	this.incomplete = is_incomplete;
+    }
+
+	public boolean is_black() {
+    	return black;
+    }
+
+	public void setBlack(boolean is_black) {
+		Global.getProfile().notifyUnsavedChanges(is_black != this.black);		
+    	this.black = is_black;
+    }
+
+	public boolean is_new() {
+    	return newCache;
+    }
+
+	public void setNew(boolean is_new) {
+		Global.getProfile().notifyUnsavedChanges(is_new != this.newCache);		
+    	this.newCache = is_new;
+    }
+
+	public String getOcCacheID() {
+    	return ocCacheID;
+    }
+
+	public void setOcCacheID(String ocCacheID) {
+		Global.getProfile().notifyUnsavedChanges(!ocCacheID.equals(this.ocCacheID));		
+    	this.ocCacheID = ocCacheID;
+    }
+
+	public int getNoFindLogs() {
+    	return noFindLogs;
+    }
+
+	public void setNoFindLogs(int noFindLogs) {
+		Global.getProfile().notifyUnsavedChanges(noFindLogs != this.noFindLogs);		
+    	this.noFindLogs = noFindLogs;
+    }
+
+	public int getNumRecommended() {
+    	return numRecommended;
+    }
+
+	public void setNumRecommended(int numRecommended) {
+		Global.getProfile().notifyUnsavedChanges(numRecommended != this.numRecommended);		
+    	this.numRecommended = numRecommended;
+    }
+
+	public int getNumFoundsSinceRecommendation() {
+    	return numFoundsSinceRecommendation;
+    }
+
+	public void setNumFoundsSinceRecommendation(int numFoundsSinceRecommendation) {
+		Global.getProfile().notifyUnsavedChanges(numFoundsSinceRecommendation != this.numFoundsSinceRecommendation);		
+    	this.numFoundsSinceRecommendation = numFoundsSinceRecommendation;
+    }
+
+	public boolean has_bugs() {
+    	return bugs;
+    }
+
+	public void setHas_bugs(boolean has_bug) {
+		Global.getProfile().notifyUnsavedChanges(has_bug != this.bugs);		
+    	this.bugs = has_bug;
+    }
+
+	public boolean is_HTML() {
+    	return html;
+    }
+
+	public void setHTML(boolean is_HTML) {
+		Global.getProfile().notifyUnsavedChanges(is_HTML != this.html);		
+    	this.html = is_HTML;
+    }
+
+	public String getLastSyncOC() {
+    	return lastSyncOC;
+    }
+
+	public void setLastSyncOC(String lastSyncOC) {
+		Global.getProfile().notifyUnsavedChanges(!lastSyncOC.equals(this.lastSyncOC));		
+    	this.lastSyncOC = lastSyncOC;
+    }
+
+	public long getAttributesYes() {
+    	return attributesYes;
+    }
+
+	public void setAttributesYes(long attributesYes) {
+		Global.getProfile().notifyUnsavedChanges(attributesYes != this.attributesYes);		
+    	this.attributesYes = attributesYes;
+    }
+
+	public long getAttributesNo() {
+    	return attributesNo;
+    }
+
+	public void setAttributesNo(long attributesNo) {
+		Global.getProfile().notifyUnsavedChanges(attributesNo != this.attributesNo);		
+    	this.attributesNo = attributesNo;
+    }
+
 }
 

Modified: trunk/src/CacheWolf/CacheHolderDetail.java
===================================================================
--- trunk/src/CacheWolf/CacheHolderDetail.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/CacheHolderDetail.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -49,8 +49,8 @@
 	 }
 
 	 public void setLongDescription(String longDescription) {
-	 	if (LongDescription.equals(&quot;&quot;)) is_new=true;
-	 	else if (!stripControlChars(LongDescription).equals(stripControlChars(longDescription))) is_update=true;
+	 	if (LongDescription.equals(&quot;&quot;)) setNew(true);
+	 	else if (!stripControlChars(LongDescription).equals(stripControlChars(longDescription))) setUpdated(true);
 	 	LongDescription = longDescription;
 	 }
 	 
@@ -64,17 +64,17 @@
 	 }
 	 
 	 public void setHints(String hints) {
-	 	if (!Hints.equals(hints)) is_update=true;
+	 	if (!Hints.equals(hints)) setUpdated(true);
 	 	Hints = hints;
 	 }
 	 
 	 public void setCacheLogs(LogList newLogs) {
 		 int size=newLogs.size();
 		 for (int i=size-1; i&gt;=0; i--) { // Loop over all new logs, must start with oldest log
-			 if (CacheLogs.merge(newLogs.getLog(i))&gt;=0) this.is_log_update=true;
+			 if (CacheLogs.merge(newLogs.getLog(i))&gt;=0) this.setLog_updated(true);
 		 }
 		 //CacheLogs=logs;
-		 noFindLogs=CacheLogs.countNotFoundLogs();
+		 setNoFindLogs(CacheLogs.countNotFoundLogs());
 	 }
 
 	 
@@ -87,11 +87,11 @@
 	public CacheHolderDetail update(CacheHolderDetail newCh){
 		  super.update(newCh);
 		  // flags
-		  if (this.is_found == true &amp;&amp; this.CacheStatus.equals(&quot;&quot;)) this.CacheStatus = MyLocale.getMsg(318,&quot;Found&quot;);
+		  if (this.is_found() &amp;&amp; this.getCacheStatus().equals(&quot;&quot;)) this.setCacheStatus(MyLocale.getMsg(318,&quot;Found&quot;));
 
 		  //travelbugs:GPX-File contains all actual travelbugs but not the missions
 		  //  we need to check whether the travelbug is already in the existing list
-		  this.has_bug = newCh.Travelbugs.size()&gt;0;
+		  this.setHas_bugs(newCh.Travelbugs.size()&gt;0);
 		  for (int i=newCh.Travelbugs.size()-1; i&gt;=0; i--) {
 			 Travelbug tb=newCh.Travelbugs.getTB(i);  
 		     Travelbug oldTB=this.Travelbugs.find(tb.getName());
@@ -135,7 +135,7 @@
 				imgDesc = new InputBox(&quot;Description&quot;).input(&quot;&quot;,10);
 				//Create Destination Filename
 				String ext = imgFile.getFileExt().substring(imgFile.getFileExt().lastIndexOf(&quot;.&quot;));
-				imgDestName = this.wayPoint + &quot;_U_&quot; + (this.UserImages.size()+1) + ext;
+				imgDestName = this.getWayPoint() + &quot;_U_&quot; + (this.UserImages.size()+1) + ext;
 				
 				this.UserImages.add(imgDestName);
 				this.UserImagesText.add(imgDesc);
@@ -155,11 +155,11 @@
 		public void readCache(String dir) throws IOException{
 			String dummy;
 			FileReader in = null;
-			if (new FileBugfix(dir + wayPoint.toLowerCase() + &quot;.xml&quot;).exists()) in = new FileReader(dir+wayPoint.toLowerCase() + &quot;.xml&quot;);
+			if (new FileBugfix(dir + getWayPoint().toLowerCase() + &quot;.xml&quot;).exists()) in = new FileReader(dir+getWayPoint().toLowerCase() + &quot;.xml&quot;);
 			if (in == null) {
-				if (new FileBugfix(dir + wayPoint + &quot;.xml&quot;).exists()) in = new FileReader(dir+wayPoint + &quot;.xml&quot;);
+				if (new FileBugfix(dir + getWayPoint() + &quot;.xml&quot;).exists()) in = new FileReader(dir+getWayPoint() + &quot;.xml&quot;);
 			}
-			if (in == null) throw new FileNotFoundException(dir+wayPoint.toLowerCase()+&quot;.xml&quot;);
+			if (in == null) throw new FileNotFoundException(dir+getWayPoint().toLowerCase()+&quot;.xml&quot;);
 			String text= in.readAll();
 			in.close();
 			Extractor ex = new Extractor(text, &quot;&lt;DETAILS&gt;&lt;![CDATA[&quot;, &quot;]]&gt;&lt;/DETAILS&gt;&quot;, 0, true);		
@@ -267,8 +267,8 @@
 				URL = dummy;
 			}
 			else {
-				if (wayPoint.startsWith(&quot;GC&quot;)) {
-					URL = &quot;<A HREF="http://www.geocaching.com/seek/cache_details.aspx?wp=">http://www.geocaching.com/seek/cache_details.aspx?wp=</A>&quot;+ wayPoint + &quot;&amp;Submit6=Find&amp;log=y&quot;;
+				if (getWayPoint().startsWith(&quot;GC&quot;)) {
+					URL = &quot;<A HREF="http://www.geocaching.com/seek/cache_details.aspx?wp=">http://www.geocaching.com/seek/cache_details.aspx?wp=</A>&quot;+ getWayPoint() + &quot;&amp;Submit6=Find&amp;log=y&quot;;
 				}
 			}
 			ex = new Extractor(text, &quot;&lt;SOLVER&gt;&lt;![CDATA[&quot;, &quot;]]&gt;&lt;/SOLVER&gt;&quot;, 0, true);
@@ -281,27 +281,27 @@
 		public void saveCacheDetails(String dir){
 			PrintWriter detfile;
 			//File exists?
-			boolean exists = (new File(dir + wayPoint + &quot;.xml&quot;)).exists();
+			boolean exists = (new File(dir + getWayPoint() + &quot;.xml&quot;)).exists();
 			//yes: then delete
 			if (exists) {
-				boolean ok = (new File(dir + wayPoint + &quot;.xml&quot;)).delete();
+				boolean ok = (new File(dir + getWayPoint() + &quot;.xml&quot;)).delete();
 				if(ok) ok = true;
 			}
-			boolean exists2 = (new File(dir + wayPoint.toLowerCase() + &quot;.xml&quot;)).exists();
+			boolean exists2 = (new File(dir + getWayPoint().toLowerCase() + &quot;.xml&quot;)).exists();
 			//yes: delete
 			if (exists2) {
-				boolean ok2 = (new File(dir + wayPoint.toLowerCase() + &quot;.xml&quot;)).delete();
+				boolean ok2 = (new File(dir + getWayPoint().toLowerCase() + &quot;.xml&quot;)).delete();
 				if(ok2) ok2=true;
 			}
 			//Vm.debug(&quot;Writing to: &quot; +dir + &quot;for: &quot; + wayPoint);
 			try{
-			  detfile = new PrintWriter(new BufferedWriter(new FileWriter(dir + wayPoint.toLowerCase() + &quot;.xml&quot;)));
+			  detfile = new PrintWriter(new BufferedWriter(new FileWriter(dir + getWayPoint().toLowerCase() + &quot;.xml&quot;)));
 			} catch (Exception e) {
 				Global.getPref().log(&quot;Problem creating details file&quot;,e,true);
 				return;
 			}
 			try{
-				if(wayPoint.length()&gt;0){
+				if(getWayPoint().length()&gt;0){
 				  detfile.print(&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;ISO-8859-1\&quot;?&gt;\r\n&quot;);
 				  detfile.print(&quot;&lt;CACHEDETAILS&gt;\r\n&quot;);
 				  detfile.print(&quot;&lt;DETAILS&gt;&lt;![CDATA[&quot;+LongDescription+&quot;]]&gt;&lt;/DETAILS&gt;\r\n&quot;);
@@ -366,12 +366,12 @@
 				  detfile.print(&quot;&lt;/CACHEDETAILS&gt;\n&quot;);
 				} // if length
 			} catch (Exception e){
-				Global.getPref().log(&quot;Problem waypoint &quot; + wayPoint + &quot; writing to a details file: &quot; + e.getMessage());
+				Global.getPref().log(&quot;Problem waypoint &quot; + getWayPoint() + &quot; writing to a details file: &quot; + e.getMessage());
 			}
 			try{
 			  detfile.close();
 			} catch (Exception e){
-				Global.getPref().log(&quot;Problem waypoint &quot; + wayPoint + &quot; writing to a details file: &quot; + e.getMessage());
+				Global.getPref().log(&quot;Problem waypoint &quot; + getWayPoint() + &quot; writing to a details file: &quot; + e.getMessage());
 			}
 			hasUnsavedChanges = false;
 		}
@@ -387,9 +387,9 @@
 		public boolean belongsTo (CacheHolder ch) {
 			
 			// avoid self referencing
-			if (this.wayPoint.equals(ch.wayPoint)) return false;
+			if (this.getWayPoint().equals(ch.getWayPoint())) return false;
 
-			return this.wayPoint.endsWith(ch.wayPoint.substring(2));
+			return this.getWayPoint().endsWith(ch.getWayPoint().substring(2));
 		}
 		
 		/**

Modified: trunk/src/CacheWolf/CacheList.java
===================================================================
--- trunk/src/CacheWolf/CacheList.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/CacheList.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -90,10 +90,10 @@
 			 idx=getSelectedIndex(0);
 			 if (idx&gt;=0) {
 				 CacheHolder ch=(CacheHolder)cacheList.get(idx);
-				 wayPoint=ch.wayPoint;
+				 wayPoint=ch.getWayPoint();
 				 IconAndText imgDrag=new IconAndText();
-				 imgDrag.addColumn(CacheType.cache2Img(ch.type));
-				 imgDrag.addColumn(ch.wayPoint);
+				 imgDrag.addColumn(CacheType.cache2Img(ch.getType()));
+				 imgDrag.addColumn(ch.getWayPoint());
 				 dc.dragData=dc.startImageDrag(imgDrag,new Point(8,8),this);
 			 } 
 		}
@@ -266,7 +266,7 @@
 		// Start by setting all caches to filtered
 		for(int i = cacheDB.size()-1; i &gt;=0 ; i--){
 			ch = (CacheHolder)cacheDB.get(i);
-			ch.is_filtered=true ; // ignore blacklist attribute
+			ch.setFiltered(true) ; // ignore blacklist attribute
 			ch.sort=apply;
 		}
 		// Now &quot;unfilter&quot; the caches in our list
@@ -279,23 +279,22 @@
 			   cacheDB for each entry in cacheList, we simply compare the sort field of ch to apply.
 			*/
 			if (!ch.sort.equals(apply)) {
-				int idx=Global.getProfile().getCacheIndex(ch.wayPoint);
+				int idx=Global.getProfile().getCacheIndex(ch.getWayPoint());
 				if (idx==-1) continue;
 				ch=null;
 				ch=(CacheHolder) cacheDB.get(idx);
 			}
-			if (ch.is_black!=Global.getProfile().showBlacklisted) 
+			if (ch.is_black()!=Global.getProfile().showBlacklisted()) 
 				wrongBlackStatus++;
 			else {
-				ch.is_filtered=false;
+				ch.setFiltered(false);
 				ch.sort=MyLocale.formatLong(i,&quot;00000&quot;);
 			}
 		}
 		// The sort command places all filtered caches at the end
 		cacheDB.sort(new mySort(),false);
-		Global.getProfile().filterActive=Filter.FILTER_CACHELIST;
-		Global.getProfile().filterInverted=false;
-		Global.getProfile().hasUnsavedChanges=true;
+		Global.getProfile().setFilterActive(Filter.FILTER_CACHELIST);
+		Global.getProfile().setFilterInverted(false);
 		updateScreen(cacheList.size()-wrongBlackStatus);
 		if (wrongBlackStatus&gt;0)
 			(new MessageBox(MyLocale.getMsg(5500,&quot;Error&quot;),MyLocale.getMsg(4600,&quot;Some cache(s) cannot be shown because of wrong blacklist status&quot;), FormBase.OKB)).execute();
@@ -318,7 +317,7 @@
 			CacheHolder addiWpt;
 			for (int j=0; j&lt;ch.addiWpts.getCount();j++){
 				addiWpt = (CacheHolder)ch.addiWpts.get(j);
-				if (!addiWpt.is_filtered) cachesAdded|=addCache(addiWpt);
+				if (!addiWpt.is_filtered()) cachesAdded|=addCache(addiWpt);
 			}
 		}
 		// Update screen if any cache was added
@@ -335,7 +334,7 @@
 			// Add cache reference to hidden list
 			cacheList.add(ch);
 			// Add Cache and cache icon to visible list
-			lstCaches.addItem((new MenuItem()).iconize(ch.wayPoint+&quot;   &quot;+ch.CacheName,CacheType.cache2Img(ch.type),true));
+			lstCaches.addItem((new MenuItem()).iconize(ch.getWayPoint()+&quot;   &quot;+ch.getCacheName(),CacheType.cache2Img(ch.getType()),true));
 		    dirty=true;
 			return true;
 		} else
@@ -430,7 +429,7 @@
 			PrintWriter outp =  new PrintWriter(new BufferedWriter(new FileWriter(fileName)));
 			for (int i=0; i&lt;cacheList.size(); i++) {
 				// Put a &gt; in front of the selected cache
-				outp.print((i==selectedIndex?&quot;&gt;&quot;:&quot;&quot;)+((CacheHolder)cacheList.get(i)).wayPoint+&quot;\n&quot;);
+				outp.print((i==selectedIndex?&quot;&gt;&quot;:&quot;&quot;)+((CacheHolder)cacheList.get(i)).getWayPoint()+&quot;\n&quot;);
 			}
 			outp.close();
 		} catch(Exception e) {

Modified: trunk/src/CacheWolf/CalcPanel.java
===================================================================
--- trunk/src/CacheWolf/CalcPanel.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/CalcPanel.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -155,8 +155,8 @@
 	
 	// ch must be not null
 	public void setFields(CacheHolder ch){
-		if ( !ch.wayPoint.equalsIgnoreCase(lastWaypoint) ) {
-			lastWaypoint = ch.wayPoint;
+		if ( !ch.getWayPoint().equalsIgnoreCase(lastWaypoint) ) {
+			lastWaypoint = ch.getWayPoint();
 			if (ch.pos.isValid()) {
 				inpBearing.setText(&quot;0&quot;);
 				inpDistance.setText(&quot;0&quot;);
@@ -201,7 +201,7 @@
 				coordOut = coordInp.project(bd.degrees, bd.distance);
 				ch.LatLon = coordOut.toString();
 				ch.pos.set(coordOut);
-				ch.type = 51; // see CacheType.GC_AW_STAGE_OF_MULTI // TODO unfertig
+				ch.setType(51); // see CacheType.GC_AW_STAGE_OF_MULTI // TODO unfertig
 				mainT.newWaypoint(ch);
 			}
 			

Modified: trunk/src/CacheWolf/DBStats.java
===================================================================
--- trunk/src/CacheWolf/DBStats.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/DBStats.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -24,8 +24,8 @@
 		int counter = 0;
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			holder = (CacheHolder)cacheDB.get(i);
-			if(holder.is_black == false &amp;&amp; holder.is_filtered == false){
-				if(holder.wayPoint.startsWith(&quot;GC&quot;) || holder.wayPoint.startsWith(&quot;OC&quot;)) counter++;
+			if(holder.is_black() == false &amp;&amp; holder.is_filtered() == false){
+				if(holder.getWayPoint().startsWith(&quot;GC&quot;) || holder.getWayPoint().startsWith(&quot;OC&quot;)) counter++;
 			}
 		}
 		return counter;
@@ -40,8 +40,8 @@
 		int counter = 0;
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			holder = (CacheHolder)cacheDB.get(i);
-			if(holder.is_black == false){
-				if(holder.wayPoint.startsWith(&quot;GC&quot;) || holder.wayPoint.startsWith(&quot;OC&quot;)) counter++;
+			if(holder.is_black() == false){
+				if(holder.getWayPoint().startsWith(&quot;GC&quot;) || holder.getWayPoint().startsWith(&quot;OC&quot;)) counter++;
 			}
 		}
 		return counter;
@@ -52,8 +52,8 @@
 		int counter = 0;
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			holder = (CacheHolder)cacheDB.get(i);
-			if(holder.is_found == true) {
-				if(holder.wayPoint.startsWith(&quot;GC&quot;) || holder.wayPoint.startsWith(&quot;OC&quot;)) counter++;
+			if(holder.is_found() == true) {
+				if(holder.getWayPoint().startsWith(&quot;GC&quot;) || holder.getWayPoint().startsWith(&quot;OC&quot;)) counter++;
 			}
 		}
 		return counter;

Modified: trunk/src/CacheWolf/DataMover.java
===================================================================
--- trunk/src/CacheWolf/DataMover.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/DataMover.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -91,7 +91,7 @@
 		int count=0;
 		// Count the number of caches to move/delete/copy
 		for(int i = 0; i&lt;size; i++) {
-			if(((CacheHolder)srcDB.get(i)).is_filtered==false) count++;
+			if(((CacheHolder)srcDB.get(i)).is_filtered()==false) count++;
 		}
 		myProgressBarForm pbf = new myProgressBarForm();
 		Handle h = new Handle();
@@ -102,7 +102,7 @@
 		// Now do the actual work
 		for(int i = size-1; i&gt;=0; i--){
 			CacheHolder srcHolder=(CacheHolder)srcDB.get(i);
-			if(srcHolder.is_filtered==false){
+			if(srcHolder.is_filtered()==false){
 				h.progress = ((float)nProcessed++)/(float)count;
 				h.changed();
 				//Now do the copy/delete/move of the cache
@@ -195,7 +195,7 @@
 		 }
 		 public void doIt(int i,CacheHolder srcHolder) {
 			srcHolder.releaseCacheDetails();
-			deleteCacheFiles(srcHolder.wayPoint,profile.dataDir);
+			deleteCacheFiles(srcHolder.getWayPoint(),profile.dataDir);
 			srcDB.removeElementAt(i);
 		 }
 	}
@@ -206,49 +206,49 @@
 			 this.dstProfile=dstProfile;
 		 }
 		 public void doIt(int i,CacheHolder srcHolder) {
-			srcHolder.releaseCacheDetails();
-			// does cache exists in destDB ?
-			int dstPos = dstProfile.getCacheIndex(srcHolder.wayPoint);
-			if (dstPos &gt;= 0){
-				deleteCacheFiles(srcHolder.wayPoint, dstProfile.dataDir);
-				copyCacheFiles(srcHolder.wayPoint,profile.dataDir, dstProfile.dataDir);
-				// Update database
-				dstProfile.cacheDB.set(dstPos,srcHolder);
-			}
-			else {
-				deleteCacheFiles(srcHolder.wayPoint, dstProfile.dataDir);
-				copyCacheFiles(srcHolder.wayPoint,profile.dataDir, dstProfile.dataDir);
-				// Update database
-				dstProfile.cacheDB.add(srcHolder);
-			}
-		 }		 
-	}
+				srcHolder.releaseCacheDetails();
+				// does cache exists in destDB ?
+				int dstPos = dstProfile.getCacheIndex(srcHolder.getWayPoint());
+				if (dstPos &gt;= 0){
+					deleteCacheFiles(srcHolder.getWayPoint(), dstProfile.dataDir);
+					copyCacheFiles(srcHolder.getWayPoint(),profile.dataDir, dstProfile.dataDir);
+					// Update database
+					dstProfile.cacheDB.set(dstPos,srcHolder);
+				}
+				else {
+					deleteCacheFiles(srcHolder.getWayPoint(), dstProfile.dataDir);
+					copyCacheFiles(srcHolder.getWayPoint(),profile.dataDir, dstProfile.dataDir);
+					// Update database
+					dstProfile.cacheDB.add(srcHolder);
+				}
+			 }		 
+		}
 
-	private class Mover extends Executor {
-		 Mover(String title, Profile dstProfile) {
-			 this.title=title;
-			 this.dstProfile=dstProfile;
-		 }
-		 public void doIt(int i,CacheHolder srcHolder) {
-			// does cache exists in destDB ?
-			srcHolder.releaseCacheDetails();
-			int dstPos = dstProfile.getCacheIndex(srcHolder.wayPoint);
-			if (dstPos &gt;= 0){
-				deleteCacheFiles(srcHolder.wayPoint, dstProfile.dataDir);
-				moveCacheFiles(srcHolder.wayPoint,profile.dataDir, dstProfile.dataDir);
-				// Update database
-				dstProfile.cacheDB.set(dstPos,srcHolder);
-				srcDB.removeElementAt(i);
-				i--;
-			}
-			else {
-				deleteCacheFiles(srcHolder.wayPoint, dstProfile.dataDir);
-				moveCacheFiles(srcHolder.wayPoint,profile.dataDir, dstProfile.dataDir);
-				// Update database
-				dstProfile.cacheDB.add(srcHolder);
-				srcDB.removeElementAt(i);
-				i--;
-			}
-		 }		 
+		private class Mover extends Executor {
+			 Mover(String title, Profile dstProfile) {
+				 this.title=title;
+				 this.dstProfile=dstProfile;
+			 }
+			 public void doIt(int i,CacheHolder srcHolder) {
+				// does cache exists in destDB ?
+				srcHolder.releaseCacheDetails();
+				int dstPos = dstProfile.getCacheIndex(srcHolder.getWayPoint());
+				if (dstPos &gt;= 0){
+					deleteCacheFiles(srcHolder.getWayPoint(), dstProfile.dataDir);
+					moveCacheFiles(srcHolder.getWayPoint(),profile.dataDir, dstProfile.dataDir);
+					// Update database
+					dstProfile.cacheDB.set(dstPos,srcHolder);
+					srcDB.removeElementAt(i);
+					i--;
+				}
+				else {
+					deleteCacheFiles(srcHolder.getWayPoint(), dstProfile.dataDir);
+					moveCacheFiles(srcHolder.getWayPoint(),profile.dataDir, dstProfile.dataDir);
+					// Update database
+					dstProfile.cacheDB.add(srcHolder);
+					srcDB.removeElementAt(i);
+					i--;
+				}
+			 }		 
+		}
 	}
-}

Modified: trunk/src/CacheWolf/DescriptionPanel.java
===================================================================
--- trunk/src/CacheWolf/DescriptionPanel.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/DescriptionPanel.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -47,10 +47,10 @@
         } else {
             if (cache.hasSameMainCache(currCache))
                 scrollto = disp.getTopLine();
-            isHtml = cache.is_HTML;
+            isHtml = cache.is_HTML();
             if (cache.isAddiWpt()) {
                 CacheHolderDetail mainCache = cache.mainCache.getCacheDetails(true);
-                isHtml = mainCache.is_HTML;
+                isHtml = mainCache.is_HTML();
                 if (cache.LongDescription != null &amp;&amp; cache.LongDescription.length() &gt; 0)
                     desc = cache.LongDescription + (isHtml ? &quot;&lt;hr&gt;\n&quot; : &quot;\n&quot;)
                             + mainCache.LongDescription;
@@ -162,7 +162,7 @@
 
 		Vm.showWait(true);
 		currLine = disp.getTopLine();
-		if (currCache.is_HTML)	disp.setHtml(desc);
+		if (currCache.is_HTML())	disp.setHtml(desc);
 		else				disp.setPlainText(currCache.LongDescription);
 		disp.scrollTo(currLine,false);
 		Vm.showWait(false);

Modified: trunk/src/CacheWolf/DetailsPanel.java
===================================================================
--- trunk/src/CacheWolf/DetailsPanel.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/DetailsPanel.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -178,30 +178,30 @@
 		thisCache = ch;
 		dirty_notes = false;
 		dirty_details = false;
-		inpWaypoint.setText(ch.wayPoint);
-		inpName.setText(ch.CacheName);
+		inpWaypoint.setText(ch.getWayPoint());
+		inpName.setText(ch.getCacheName());
 	    btnWayLoc.setText(ch.pos.toString());
-		inpHidden.setText(ch.DateHidden);
-		inpOwner.setText(ch.CacheOwner);
-		if (ch.CacheStatus.length()&gt;=10 &amp;&amp; ch.CacheStatus.charAt(4)=='-')
-			chcStatus.setText(MyLocale.getMsg(318,&quot;Found&quot;)+&quot; &quot;+ch.CacheStatus);
+		inpHidden.setText(ch.getDateHidden());
+		inpOwner.setText(ch.getCacheOwner());
+		if (ch.getCacheStatus().length()&gt;=10 &amp;&amp; ch.getCacheStatus().charAt(4)=='-')
+			chcStatus.setText(MyLocale.getMsg(318,&quot;Found&quot;)+&quot; &quot;+ch.getCacheStatus());
 		else {
-			chcStatus.setText(ch.CacheStatus);
+			chcStatus.setText(ch.getCacheStatus());
 			// If the cache status contains a date, do not overwrite it with 'found' message
-			if(ch.is_found == true) chcStatus.setText(MyLocale.getMsg(318,&quot;Found&quot;));
+			if(ch.is_found() == true) chcStatus.setText(MyLocale.getMsg(318,&quot;Found&quot;));
 		}
-		chcType.setInt(transType(ch.type));
-		if(ch.is_black){
+		chcType.setInt(transType(ch.getType()));
+		if(ch.is_black()){
 			btnBlack.image = imgBlack;
 		} else {
 			btnBlack.image = imgBlackNo;
 		}
-		blackStatus=ch.is_black; 
+		blackStatus=ch.is_black(); 
 		blackStatusChanged=false;
 		btnBlack.repaintNow();
 		if (inpWaypoint.getText().length() == 0)
 			createWptName();
-		if(ch.has_bug == true) {
+		if(ch.has_bugs() == true) {
 			//btnShowBug.modify(Control.Disabled,1);
 			btnShowBug.image = imgShowBug;
 		} else {
@@ -209,17 +209,17 @@
 			btnShowBug.image = imgShowBugNo;
 		}
 		btnShowBug.repaintNow();
-		if(ch.CacheSize.equals(&quot;Micro&quot;)) chcSize.setInt(1);
-		if(ch.CacheSize.equals(&quot;Small&quot;)) chcSize.setInt(2);
-		if(ch.CacheSize.equals(&quot;Regular&quot;)) chcSize.setInt(3);
-		if(ch.CacheSize.equals(&quot;Large&quot;)) chcSize.setInt(4);
-		if(ch.CacheSize.equals(&quot;Other&quot;)) chcSize.setInt(5);
-		if(ch.CacheSize.equals(&quot;Very Large&quot;)) chcSize.setInt(6);
-		if(ch.CacheSize.equals(&quot;None&quot;)) chcSize.setInt(7);
-		if(ch.CacheSize.equals(&quot;Not chosen&quot;)) chcSize.setInt(7);
+		if(ch.getCacheSize().equals(&quot;Micro&quot;)) chcSize.setInt(1);
+		if(ch.getCacheSize().equals(&quot;Small&quot;)) chcSize.setInt(2);
+		if(ch.getCacheSize().equals(&quot;Regular&quot;)) chcSize.setInt(3);
+		if(ch.getCacheSize().equals(&quot;Large&quot;)) chcSize.setInt(4);
+		if(ch.getCacheSize().equals(&quot;Other&quot;)) chcSize.setInt(5);
+		if(ch.getCacheSize().equals(&quot;Very Large&quot;)) chcSize.setInt(6);
+		if(ch.getCacheSize().equals(&quot;None&quot;)) chcSize.setInt(7);
+		if(ch.getCacheSize().equals(&quot;Not chosen&quot;)) chcSize.setInt(7);
 		attV.showImages(ch.getCacheDetails(true).attributes);
-		lblTerr.setText((ch.terrain.length()&gt;0) ? (MyLocale.getMsg(1001,&quot;T&quot;)+&quot;: &quot;+ch.terrain) : &quot;&quot;);
-		lblDiff.setText((ch.hard.length()&gt;0)    ? (MyLocale.getMsg(1000,&quot;D&quot;)+&quot;: &quot;+ch.hard) : &quot;&quot;); 
+		lblTerr.setText((ch.getTerrain().length()&gt;0) ? (MyLocale.getMsg(1001,&quot;T&quot;)+&quot;: &quot;+ch.getTerrain()) : &quot;&quot;);
+		lblDiff.setText((ch.getHard().length()&gt;0)    ? (MyLocale.getMsg(1000,&quot;D&quot;)+&quot;: &quot;+ch.getHard()) : &quot;&quot;); 
 
 		if(isBigScreen)	mNotes.setText(ch.details.CacheNotes);
 	}
@@ -329,7 +329,7 @@
 			}
 			dirty_details = true;
 			needsTableUpdate  = true;
-			profile.hasUnsavedChanges=true;
+			// profile.hasUnsavedChanges=true;
 			if (ev.target==chcType) {
 				createWptName();
 			}
@@ -383,15 +383,15 @@
 				thisCache.getCacheDetails(true).addUserImage(profile);
 			}
 			else if(ev.target == btnBlack){
-				if(thisCache.is_black) {
-					thisCache.is_black = false;
+				if(thisCache.is_black()) {
+					thisCache.setBlack(false);
 					btnBlack.image = imgBlackNo;
 				}
 				else {
-					thisCache.is_black = true;
+					thisCache.setBlack(true);
 					btnBlack.image = imgBlack;
 				}
-				blackStatus = thisCache.is_black;
+				blackStatus = thisCache.is_black();
 				thisCache.setAttributesToAddiWpts();
 				btnBlack.repaintNow();
 				dirty_details=true;
@@ -401,7 +401,7 @@
 				CacheHolder ch = new CacheHolder();
 				ch.LatLon = thisCache.LatLon;
 				ch.pos = new CWPoint( thisCache.pos );
-				ch.type = 51;
+				ch.setType(51);
 				Global.mainTab.newWaypoint(ch);
 			}
 			else if (ev.target == btnGoto){
@@ -442,7 +442,7 @@
 				if (dc.execute()==ewe.ui.FormBase.IDOK) {
 				  chcStatus.setText(MyLocale.getMsg(318,&quot;Found&quot;)+&quot; &quot;+Convert.toString(dc.year)+&quot;-&quot;+MyLocale.formatLong(dc.month,&quot;00&quot;)+&quot;-&quot;+MyLocale.formatLong(dc.day,&quot;00&quot;)+&quot; &quot;+dc.time);
 				  dirty_details=true;
-				  profile.hasUnsavedChanges=true;
+				  //profile.hasUnsavedChanges=true;
 				}
 			}
 			else if (ev.target==btnHiddenDate) {
@@ -462,7 +462,7 @@
 				if (dc.execute()==ewe.ui.FormBase.IDOK) {
 				  inpHidden.setText(Convert.toString(dc.year)+&quot;-&quot;+MyLocale.formatLong(dc.month,&quot;00&quot;)+&quot;-&quot;+MyLocale.formatLong(dc.day,&quot;00&quot;));
 				  dirty_details=true;
-				  profile.hasUnsavedChanges=true;
+				  //profile.hasUnsavedChanges=true;
 				}
 			}
 			ev.consumed=true;
@@ -476,33 +476,33 @@
 		  // Strip the found message if the status contains a date
 		if (chcStatus.getText().startsWith(MyLocale.getMsg(318,&quot;Found&quot;)) &amp;&amp; 
 				  chcStatus.getText().length()&gt;=MyLocale.getMsg(318,&quot;Found&quot;).length()+11)
-			  thisCache.CacheStatus = chcStatus.getText().substring(MyLocale.getMsg(318,&quot;Found&quot;).length()+1);
+			  thisCache.setCacheStatus(chcStatus.getText().substring(MyLocale.getMsg(318,&quot;Found&quot;).length()+1));
 		  else	  
-			  thisCache.CacheStatus = chcStatus.getText();
-		  thisCache.is_found = chcStatus.getText().startsWith(MyLocale.getMsg(318,&quot;Found&quot;));
-		  thisCache.CacheOwner = inpOwner.getText().trim();
-		  thisCache.is_owned = thisCache.CacheStatus.equals(MyLocale.getMsg(320,&quot;Owner&quot;));
+			  thisCache.setCacheStatus(chcStatus.getText());
+		  thisCache.setFound(chcStatus.getText().startsWith(MyLocale.getMsg(318,&quot;Found&quot;)));
+		  thisCache.setCacheOwner(inpOwner.getText().trim());
+		  thisCache.setOwned(thisCache.getCacheStatus().equals(MyLocale.getMsg(320,&quot;Owner&quot;)));
 		  // Avoid setting is_owned if alias is empty and username is empty
-		  if(thisCache.is_owned == false){
-			  thisCache.is_owned = (!pref.myAlias.equals(&quot;&quot;) &amp;&amp; pref.myAlias.equals(thisCache.CacheOwner)) || 
-					        (!pref.myAlias2.equals(&quot;&quot;) &amp;&amp; pref.myAlias2.equals(thisCache.CacheOwner));
+		  if(thisCache.is_owned() == false){
+			  thisCache.setOwned((!pref.myAlias.equals(&quot;&quot;) &amp;&amp; pref.myAlias.equals(thisCache.getCacheOwner())) || 
+					        (!pref.myAlias2.equals(&quot;&quot;) &amp;&amp; pref.myAlias2.equals(thisCache.getCacheOwner())));
 		  }
-		  thisCache.is_black = blackStatus;
-		  String oldWaypoint=thisCache.wayPoint;
-		  thisCache.wayPoint = inpWaypoint.getText().toUpperCase().trim();
-		  thisCache.CacheSize = chcSize.getText();
+		  thisCache.setBlack(blackStatus);
+		  String oldWaypoint=thisCache.getWayPoint();
+		  thisCache.setWayPoint(inpWaypoint.getText().toUpperCase().trim());
+		  thisCache.setCacheSize(chcSize.getText());
 		  // If the waypoint does not have a name, give it one
-		  if (thisCache.wayPoint.equals(&quot;&quot;)) { 
-			  thisCache.wayPoint=profile.getNewWayPointName();
+		  if (thisCache.getWayPoint().equals(&quot;&quot;)) { 
+			  thisCache.setWayPoint(profile.getNewWayPointName());
 		  }
 		  //Don't allow single letter names=&gt; Problems in updateBearingDistance
 		  // This is a hack but faster than slowing down the loop in updateBearingDistance
-		  if (thisCache.wayPoint.length()&lt;2) thisCache.wayPoint+=&quot; &quot;;
-		  thisCache.CacheName = inpName.getText().trim();
+		  if (thisCache.getWayPoint().length()&lt;2) thisCache.setWayPoint(thisCache.getWayPoint()+&quot; &quot;);
+		  thisCache.setCacheName(inpName.getText().trim());
 		  thisCache.LatLon = thisCache.pos.toString();
-		  thisCache.DateHidden = inpHidden.getText().trim();
-		  int oldType=thisCache.type;
-		  thisCache.type = transSelect(chcType.getInt());
+		  thisCache.setDateHidden(inpHidden.getText().trim());
+		  int oldType=thisCache.getType();
+		  thisCache.setType(transSelect(chcType.getInt()));
 		 // thisCache.saveCacheDetails(profile.dataDir); // this is redundant, because all changes affecting the details are immediately saved
 		  // Now update the table
 		  CacheHolder ch = thisCache; // TODO variable ch is redundant
@@ -512,20 +512,20 @@
 	   *   - the old cachetype or the new cachetype were 'addi' and 
 	   *     the waypointname has changed 
 	   */
-	  if (CacheType.isAddiWpt(ch.type)!=CacheType.isAddiWpt(oldType) ||
-		 ((CacheType.isAddiWpt(ch.type) || CacheType.isAddiWpt(oldType)) &amp;&amp;
-		 !thisCache.wayPoint.equals(oldWaypoint))) {
+	  if (CacheType.isAddiWpt(ch.getType())!=CacheType.isAddiWpt(oldType) ||
+		 ((CacheType.isAddiWpt(ch.getType()) || CacheType.isAddiWpt(oldType)) &amp;&amp;
+		 !thisCache.getWayPoint().equals(oldWaypoint))) {
 			  // If we changed the type to addi, check that a parent exists
-			  if (CacheType.isAddiWpt(ch.type)) {
+			  if (CacheType.isAddiWpt(ch.getType())) {
 				  int idx;
-				  if (ch.wayPoint.length()&lt;5)
+				  if (ch.getWayPoint().length()&lt;5)
 					  idx=-1;
 				  else {
-					  idx=profile.getCacheIndex(&quot;GC&quot;+ ch.wayPoint.substring(ch.wayPoint.length() == 5?1:2));
-					  if (idx&lt;0) idx=profile.getCacheIndex(&quot;OC&quot;+ ch.wayPoint.substring(ch.wayPoint.length() == 5?1:2));
-					  if (idx&lt;0) idx=profile.getCacheIndex(&quot;CW&quot;+ ch.wayPoint.substring(ch.wayPoint.length() == 5?1:2));
+					  idx=profile.getCacheIndex(&quot;GC&quot;+ ch.getWayPoint().substring(ch.getWayPoint().length() == 5?1:2));
+					  if (idx&lt;0) idx=profile.getCacheIndex(&quot;OC&quot;+ ch.getWayPoint().substring(ch.getWayPoint().length() == 5?1:2));
+					  if (idx&lt;0) idx=profile.getCacheIndex(&quot;CW&quot;+ ch.getWayPoint().substring(ch.getWayPoint().length() == 5?1:2));
 					  if (idx&lt;0) (new MessageBox(MyLocale.getMsg(144,&quot;Warning&quot;),
-							  MyLocale.getMsg(734,&quot;No main cache found for addi waypoint &quot;)+&quot; &quot;+ch.wayPoint+
+							  MyLocale.getMsg(734,&quot;No main cache found for addi waypoint &quot;)+&quot; &quot;+ch.getWayPoint()+
 							  &quot;\n&quot;+MyLocale.getMsg(735,&quot;Addi Waypoints must have the format xxYYYY, where xx are any 2 chars and YYYY are the main cache's chars after the GC&quot;),FormBase.OKB)).execute();
 				  }
 				  profile.buildReferences(); // TODO this takes quite long -&gt; use profile.setAddiRef instead
@@ -536,7 +536,7 @@
 		  // set status also on addi wpts
 		  ch.setAttributesToAddiWpts();
 		  dirty_notes=false;
-		  if (dirty_details) { Global.getProfile().hasUnsavedChanges=true;}
+		  // if (dirty_details) { Global.getProfile().hasUnsavedChanges=true;}
 		  dirty_details=false;
 		  setNeedsTableUpdate(false);
 		  if (thisCache.details != null) thisCache.details.hasUnsavedChanges = false;
@@ -596,12 +596,12 @@
 						tbjList=new TravelbugJourneyList();
 						tbjList.readTravelbugsFile();
 						// Add the tb to this list
-						tbjList.addTbPickup(tb,Global.getProfile().name,thisCache.wayPoint);
+						tbjList.addTbPickup(tb,Global.getProfile().name,thisCache.getWayPoint());
 						tbjList.saveTravelbugsFile();
 						tbjList=null;
 						setHtml(thisCache.getCacheDetails(true).Travelbugs.toHtml());
 						repaint();
-						thisCache.has_bug=thisCache.getCacheDetails(true).Travelbugs.size()&gt;0;						
+						thisCache.setHas_bugs(thisCache.getCacheDetails(true).Travelbugs.size()&gt;0);						
 					}
 				} else if (selectedItem==mnuDropTB) {
 					tbjList=new TravelbugJourneyList();
@@ -612,11 +612,11 @@
 					if (tbs.selectedItem&gt;=0) {
 						Travelbug tb=tbl.getTB(tbs.selectedItem);
 						thisCache.getCacheDetails(true).Travelbugs.add(tb);
-						tbjList.addTbDrop(tb,Global.getProfile().name,thisCache.wayPoint);
+						tbjList.addTbDrop(tb,Global.getProfile().name,thisCache.getWayPoint());
 					}
 					tbjList.saveTravelbugsFile();
 					tbjList=null;
-					thisCache.has_bug=thisCache.getCacheDetails(true).Travelbugs.size()&gt;0;
+					thisCache.setHas_bugs(thisCache.getCacheDetails(true).Travelbugs.size()&gt;0);
 					setHtml(thisCache.getCacheDetails(true).Travelbugs.toHtml());
 					repaint();
 					dirty_details=true;

Modified: trunk/src/CacheWolf/Filter.java
===================================================================
--- trunk/src/CacheWolf/Filter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/Filter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -191,7 +191,7 @@
 			} // for segments
 			for(int i = cacheDB.size()-1; i &gt;=0 ; i--){
 				ch = (CacheHolder)cacheDB.get(i);
-				if(ch.is_filtered == false &amp;&amp; ch.in_range == false) ch.is_filtered = true;
+				if(ch.is_filtered() == false &amp;&amp; ch.in_range == false) ch.setFiltered(true);
 			}
 		}catch(FileNotFoundException fnex){
 			(new MessageBox(&quot;Error&quot;, &quot;File not found&quot;, FormBase.OKB)).execute();
@@ -251,16 +251,16 @@
 	 */
 	public void setFilter() {
 		Profile profile=Global.getProfile();
-		archived     = profile.filterVar.charAt(0) == '1';
-		available    = profile.filterVar.charAt(1) == '1';
-		foundByMe    = profile.filterVar.charAt(2) == '1';
-		ownedByMe    = profile.filterVar.charAt(3) == '1';
-		notArchived  = profile.filterVar.charAt(4) == '1';
-		notAvailable = profile.filterVar.charAt(5) == '1';
-		notFoundByMe = profile.filterVar.charAt(6) == '1';
-		notOwnedByMe = profile.filterVar.charAt(7) == '1';
+		archived     = profile.getFilterVar().charAt(0) == '1';
+		available    = profile.getFilterVar().charAt(1) == '1';
+		foundByMe    = profile.getFilterVar().charAt(2) == '1';
+		ownedByMe    = profile.getFilterVar().charAt(3) == '1';
+		notArchived  = profile.getFilterVar().charAt(4) == '1';
+		notAvailable = profile.getFilterVar().charAt(5) == '1';
+		notFoundByMe = profile.getFilterVar().charAt(6) == '1';
+		notOwnedByMe = profile.getFilterVar().charAt(7) == '1';
 		typeMatchPattern=0;
-		String filterType=profile.filterType;
+		String filterType=profile.getFilterType();
 		if (filterType.charAt(0) == '1') typeMatchPattern|=TRADITIONAL;
 		if (filterType.charAt(1) == '1') typeMatchPattern|=MULTI;
 		if (filterType.charAt(2) == '1') typeMatchPattern|=VIRTUAL;
@@ -282,7 +282,7 @@
 		if (filterType.charAt(18) == '1') typeMatchPattern|=WHERIGO;
 		hasTypeMatchPattern= typeMatchPattern!=TYPE_ALL;
 		roseMatchPattern=0;
-		String filterRose=profile.filterRose;
+		String filterRose=profile.getFilterRose();
 		if (filterRose.charAt(0) == '1') roseMatchPattern|=NW;
 		if (filterRose.charAt(1) == '1') roseMatchPattern|=NNW;
 		if (filterRose.charAt(2) == '1') roseMatchPattern|=N;
@@ -301,7 +301,7 @@
 		if (filterRose.charAt(15) == '1') roseMatchPattern|=WNW;
 		hasRoseMatchPattern=roseMatchPattern!=ROSE_ALL;
 		sizeMatchPattern=0;
-		String filterSize=profile.filterSize;
+		String filterSize=profile.getFilterSize();
 		if (filterSize.charAt(0) == '1') sizeMatchPattern|=MICRO;
 		if (filterSize.charAt(1) == '1') sizeMatchPattern|=SMALL;
 		if (filterSize.charAt(2) == '1') sizeMatchPattern|=REGULAR;
@@ -309,17 +309,17 @@
 		if (filterSize.charAt(4) == '1') sizeMatchPattern|=VERYLARGE;
 		if (filterSize.charAt(5) == '1') sizeMatchPattern|=OTHER;
 		hasSizeMatchPattern=sizeMatchPattern!=SIZE_ALL;
-		distdirec = profile.filterDist.charAt(0) == 'L' ? SMALLER : GREATER; 
-		fscDist = Common.parseDouble(profile.filterDist.substring(1));  // Distance
-		diffdirec = profile.filterDiff.charAt(0) == 'L' ? SMALLER : 
-					(profile.filterDiff.charAt(0) == '=' ? EQUAL : GREATER );
-		fscDiff = Common.parseDouble(profile.filterDiff.substring(1));  // Difficulty
-		terrdirec = profile.filterTerr.charAt(0) == 'L' ? SMALLER : 
-				(profile.filterTerr.charAt(0) == '=' ? EQUAL : GREATER );
-		fscTerr = Common.parseDouble(profile.filterTerr.substring(1));  // Terrain
-		attributesYesPattern = profile.filterAttrYes;
-		attributesNoPattern = profile.filterAttrNo;
-		attributesChoice = profile.filterAttrChoice;
+		distdirec = profile.getFilterDist().charAt(0) == 'L' ? SMALLER : GREATER; 
+		fscDist = Common.parseDouble(profile.getFilterDist().substring(1));  // Distance
+		diffdirec = profile.getFilterDiff().charAt(0) == 'L' ? SMALLER : 
+					(profile.getFilterDiff().charAt(0) == '=' ? EQUAL : GREATER );
+		fscDiff = Common.parseDouble(profile.getFilterDiff().substring(1));  // Difficulty
+		terrdirec = profile.getFilterTerr().charAt(0) == 'L' ? SMALLER : 
+				(profile.getFilterTerr().charAt(0) == '=' ? EQUAL : GREATER );
+		fscTerr = Common.parseDouble(profile.getFilterTerr().substring(1));  // Terrain
+		attributesYesPattern = profile.getFilterAttrYes();
+		attributesNoPattern = profile.getFilterAttrNo();
+		attributesChoice = profile.getFilterAttrChoice();
 	}
 	
 	/**
@@ -329,6 +329,7 @@
 	*/
 	public void doFilter(){
 		Vector cacheDB=Global.getProfile().cacheDB;
+		Hashtable examinedCaches;
 		if (cacheDB.size()==0) return;
 		if (!hasFilter()) { // If the filter was completely reset, we can just clear it
 			clearFilter();
@@ -336,194 +337,267 @@
 		}
 		Global.getProfile().selectionChanged = true;
 		CacheHolder ch;
-		int cacheTypePattern;
-		int cacheRosePattern;
-		int cacheSizePattern;
-		// Values from filterscreen are parsed outside the main filter loop (fsc=FilterSCreen)
-		double dummyd1;
-		//Loop db and match once against type pattern and once against rose pattern
-		//Default is_filtered = false, means will be displayed!
-		//If cache does not match type or rose pattern then is_filtered is set to true
-		// and we proceed to next cache (no further tests needed)
-		//Then we check the other filter criteria one by one: As soon as one is found that
-		// eliminates the cache (i.e. sets is_filtered to true), we can skip the other tests
-		// A cache is only displayed (i.e. is_filtered = false) if it meets all 9 filter criteria
+		examinedCaches = new Hashtable(cacheDB.size());
+		
 		for(int i = cacheDB.size()-1; i &gt;=0 ; i--){
 			ch = (CacheHolder)cacheDB.get(i);
-			ch.is_filtered = ch.is_black^Global.getProfile().showBlacklisted;
-			///////////////////////////////
-			// Filter criterium 1: Cache type
-			///////////////////////////////
-			if (hasTypeMatchPattern) { // Only do the checks if we have a filter
-				cacheTypePattern = 0;
-				// As each cache can only have one type, we can use else if and set the type
-				if (ch.type == 0) cacheTypePattern = CUSTOM;
-				else if(ch.type == 2) cacheTypePattern = TRADITIONAL;
-				else if(ch.type == 3) cacheTypePattern = MULTI;
-				else if(ch.type == 4) cacheTypePattern = VIRTUAL;
-				else if(ch.type == 5) cacheTypePattern = LETTER;
-				else if(ch.type == 6) cacheTypePattern = EVENT;
-				else if(ch.type == 8) cacheTypePattern = MYSTERY;
-				else if(ch.type == 11) cacheTypePattern = WEBCAM;
-				else if(ch.type == 12) cacheTypePattern = LOCLESS;
-				else if(ch.type == 137)cacheTypePattern = EARTH;
-				else if(ch.type == 453)cacheTypePattern = MEGA;
-				else if(ch.type == 50)cacheTypePattern = PARKING;
-				else if(ch.type == 51)cacheTypePattern = STAGE;
-				else if(ch.type == 52)cacheTypePattern = QUESTION;
-				else if(ch.type == 53)cacheTypePattern = FINAL;
-				else if(ch.type == 54)cacheTypePattern = TRAILHEAD;
-				else if(ch.type == 55)cacheTypePattern = REFERENCE;
-				else if(ch.type == 13)cacheTypePattern = CITO;
-				else if(ch.type == 1858)cacheTypePattern = WHERIGO;
-				if ((cacheTypePattern &amp; typeMatchPattern) == 0) { ch.is_filtered=true; continue; }
-			}			
-			///////////////////////////////
-			// Filter criterium 2: Bearing from centre
-			///////////////////////////////
-			// The optimal number of comparisons to identify one of 16 objects is 4 (=log2(16))
-			// By using else if we can reduce the number of comparisons from 16 to just over 8
-			// By first checking the first letter, we can reduce the average number further to
-			// just under 5
-			if (hasRoseMatchPattern) {
-				if (ch.bearing.startsWith(&quot;N&quot;)) {
-					if(ch.bearing.equals(&quot;NW&quot;)) cacheRosePattern = NW;
-					else if(ch.bearing.equals(&quot;NNW&quot;)) cacheRosePattern = NNW;
-					else if(ch.bearing.equals(&quot;N&quot;)) cacheRosePattern = N;
-					else if(ch.bearing.equals(&quot;NNE&quot;)) cacheRosePattern = NNE;
-					else cacheRosePattern = NE;
-				} else if (ch.bearing.startsWith(&quot;E&quot;)) {
-					if(ch.bearing.equals(&quot;ENE&quot;)) cacheRosePattern = ENE;
-					else if(ch.bearing.equals(&quot;E&quot;)) cacheRosePattern = E;
-					else cacheRosePattern = ESE;
-				} else if (ch.bearing.startsWith(&quot;S&quot;)) {
-					if(ch.bearing.equals(&quot;SW&quot;)) cacheRosePattern = SW;
-					else if(ch.bearing.equals(&quot;SSW&quot;)) cacheRosePattern = SSW;
-					else if(ch.bearing.equals(&quot;S&quot;)) cacheRosePattern = S;
-					else if(ch.bearing.equals(&quot;SSE&quot;)) cacheRosePattern = SSE;
-					else cacheRosePattern = SE;
-				} else {
-					if(ch.bearing.equals(&quot;WNW&quot;)) cacheRosePattern = WNW;
-					else if(ch.bearing.equals(&quot;W&quot;)) cacheRosePattern = W;
-					else cacheRosePattern = WSW;
-				}
-				if ((cacheRosePattern &amp; roseMatchPattern) == 0) { ch.is_filtered=true; continue; }
-			}			
-			///////////////////////////////
-			// Filter criterium 3: Distance
-			///////////////////////////////
-			if(fscDist&gt;0.0){
-				dummyd1 = ch.kilom; 
-				if(distdirec == SMALLER &amp;&amp; dummyd1 &gt; fscDist)  { ch.is_filtered=true; continue; }
-				if(distdirec == GREATER &amp;&amp; dummyd1 &lt; fscDist)  { ch.is_filtered=true; continue; }
-			}
-			///////////////////////////////
-			// Filter criterium 4: Difficulty
-			///////////////////////////////
-			if(fscDiff&gt;0.0){
-				dummyd1 = Common.parseDouble(ch.hard);
-				if(diffdirec == SMALLER &amp;&amp; dummyd1 &gt; fscDiff) { ch.is_filtered=true; continue; }
-				if(diffdirec == EQUAL &amp;&amp; dummyd1 != fscDiff) { ch.is_filtered=true; continue; }
-				if(diffdirec == GREATER &amp;&amp; dummyd1 &lt; fscDiff) { ch.is_filtered=true; continue; }
-			}
-			///////////////////////////////
-			// Filter criterium 5: Terrain
-			///////////////////////////////
-			if(fscTerr&gt;0.0){
-				dummyd1 = Common.parseDouble(ch.terrain);
-				if(terrdirec == SMALLER &amp;&amp;  dummyd1 &gt; fscTerr) { ch.is_filtered=true; continue; }
-				if(terrdirec == EQUAL &amp;&amp; dummyd1 != fscTerr) { ch.is_filtered=true; continue; }
-				if(terrdirec == GREATER &amp;&amp;  dummyd1 &lt; fscTerr) { ch.is_filtered=true; continue; }
-			}
-//Vm.debug(ch.wayPoint+&quot; Found&quot;+ch.is_found+&quot;  FoundyMe=&quot;+foundByMe+&quot;   notFoundByMe=&quot;+notFoundByMe);
-//Vm.debug(ch.wayPoint+&quot; Owned&quot;+ch.is_owned+&quot;  OwnedByMe=&quot;+ownedByMe+&quot;   notOwnedByMe=&quot;+notOwnedByMe);
-//Vm.debug(ch.wayPoint+&quot; Archived&quot;+ch.is_archived+&quot;  Archived=&quot;+archived+&quot;   notArchived=&quot;+notArchived);
-//Vm.debug(ch.wayPoint+&quot; Available&quot;+ch.is_available+&quot;  Available=&quot;+available+&quot;   notAvailable=&quot;+notAvailable);
-//Vm.debug(&quot;Blacklisted: &quot;+ch.is_black);
-			///////////////////////////////
-			// Filter criterium 6: Found by me
-			///////////////////////////////
-			if((ch.is_found &amp;&amp; !foundByMe) ||
-			   (!ch.is_found &amp;&amp; !notFoundByMe)){ ch.is_filtered=true; continue; }
-			///////////////////////////////
-			// Filter criterium 7: Owned by me
-			///////////////////////////////
-			if((ch.is_owned &amp;&amp; !ownedByMe) ||
-			   (!ch.is_owned &amp;&amp; !notOwnedByMe)) { ch.is_filtered=true; continue; }
+			if (examinedCaches.containsKey(ch)) continue;
 			
-			///////////////////////////////
-			// Filter criterium 8: Archived
-			///////////////////////////////
-			if((ch.is_archived &amp;&amp; !archived) ||
-			   (!ch.is_archived &amp;&amp; !notArchived)){ ch.is_filtered=true; continue; }
-
-			///////////////////////////////
-			// Filter criterium 9: Unavailable
-			///////////////////////////////
-			if((ch.is_available &amp;&amp; !available) ||
-			   (!ch.is_available &amp;&amp; !notAvailable)) { ch.is_filtered=true; continue; }
-			///////////////////////////////
-			// Filter criterium 10: Size
-			///////////////////////////////
-			if (hasSizeMatchPattern) {
-				cacheSizePattern=0;
-				if (ch.CacheSize.startsWith(&quot;M&quot;)) cacheSizePattern = MICRO;
-				else if (ch.CacheSize.startsWith(&quot;S&quot;)) cacheSizePattern = SMALL;
-				else if (ch.CacheSize.startsWith(&quot;R&quot;)) cacheSizePattern = REGULAR;
-				else if (ch.CacheSize.startsWith(&quot;L&quot;)) cacheSizePattern = LARGE;
-				else if (ch.CacheSize.startsWith(&quot;V&quot;)) cacheSizePattern = VERYLARGE;
-				else cacheSizePattern = OTHER;
-				if ((cacheSizePattern &amp; sizeMatchPattern) == 0) { ch.is_filtered=true; continue; }
-			}
-			///////////////////////////////
-			// Filter criterium 11: Attributes
-			///////////////////////////////
-			if ( (attributesYesPattern != 0 || attributesNoPattern != 0) &amp;&amp; ch.mainCache == null) {
-				if (attributesChoice == 0) {
-					// AND-condition:
-					if (
-						(ch.attributesYes &amp; attributesYesPattern) != attributesYesPattern
-						|| (ch.attributesNo &amp; attributesNoPattern) != attributesNoPattern )
-					{
-						ch.is_filtered=true;
-						continue;
-					}
-				} else if (attributesChoice == 1) {
-					// OR-condition:
-					if (
-						(ch.attributesYes &amp; attributesYesPattern) == 0
-						&amp;&amp; (ch.attributesNo &amp; attributesNoPattern) == 0 )
-					{
-						ch.is_filtered=true;
-						continue;
-					}
+			boolean filterCache = excludedByFilter(ch);
+			if (!filterCache &amp;&amp; ch.mainCache!=null &amp;&amp; ((typeMatchPattern &amp; TYPE_MAIN) != 0)) {
+				if (examinedCaches.containsKey(ch.mainCache)) {
+					filterCache = ch.mainCache.is_filtered();
 				} else {
-					// NOT-condition:
-					if (
-						(ch.attributesYes &amp; attributesYesPattern) != 0
-						|| (ch.attributesNo &amp; attributesNoPattern) != 0 )
-					{
-						ch.is_filtered=true;
-						continue;
-					}
+					ch.mainCache.setFiltered(excludedByFilter(ch.mainCache));
+					filterCache = ch.mainCache.is_filtered();
+					examinedCaches.put(ch.mainCache, null);
 				}
 			}
-		} // for
-		// Ensure that for all main caches that are filtered, the addis are also filtered independently of 
-		// the filter status of the addi
-		if ((typeMatchPattern &amp; TYPE_MAIN) != 0){ //exception: don't filter out correxpnding Addis, if only Addis are enabled
-			for(int i = cacheDB.size()-1; i &gt;=0 ; i--){
-				ch = (CacheHolder)cacheDB.get(i);
-				if (ch.mainCache!=null) {
-					// We have found an addi, filte it if its parent is filtered
-					ch.is_filtered|=ch.mainCache.is_filtered;
-				}
-			}			
+			ch.setFiltered(filterCache);			
 		}
-		Global.getProfile().filterActive=FILTER_ACTIVE;
-		Global.getProfile().filterInverted=false;
-		Global.getProfile().hasUnsavedChanges=true;
+		Global.getProfile().setFilterActive(FILTER_ACTIVE);
+		Global.getProfile().setFilterInverted(false);
+		examinedCaches = null;
+		//Global.getProfile().hasUnsavedChanges=true;
 	}
+
+	public boolean excludedByFilter(CacheHolder ch) {
+		//Match once against type pattern and once against rose pattern
+		//Default is_filtered = false, means will be displayed!
+		//If cache does not match type or rose pattern then is_filtered is set to true
+		// and we proceed to next cache (no further tests needed)
+		//Then we check the other filter criteria one by one: As soon as one is found that
+		// eliminates the cache (i.e. sets is_filtered to true), we can skip the other tests
+		// A cache is only displayed (i.e. is_filtered = false) if it meets all 9 filter criteria
+	    int cacheTypePattern;
+	    int cacheRosePattern;
+	    int cacheSizePattern;
+	    double dummyd1;
+	    boolean cacheFiltered;
+	    do {
+	    	cacheFiltered = ch.is_black()^Global.getProfile().showBlacklisted();
+	    	if (cacheFiltered) break;
+	    	
+	        ///////////////////////////////
+	        // Filter criterium 1: Cache type
+	        ///////////////////////////////
+	        if (hasTypeMatchPattern) { // Only do the checks if we have a filter
+		        cacheTypePattern = 0;
+		        // As each cache can only have one type, we can use else if and set the type
+		        if (ch.getType() == 0)
+			        cacheTypePattern = CUSTOM;
+		        else if (ch.getType() == 2)
+			        cacheTypePattern = TRADITIONAL;
+		        else if (ch.getType() == 3)
+			        cacheTypePattern = MULTI;
+		        else if (ch.getType() == 4)
+			        cacheTypePattern = VIRTUAL;
+		        else if (ch.getType() == 5)
+			        cacheTypePattern = LETTER;
+		        else if (ch.getType() == 6)
+			        cacheTypePattern = EVENT;
+		        else if (ch.getType() == 8)
+			        cacheTypePattern = MYSTERY;
+		        else if (ch.getType() == 11)
+			        cacheTypePattern = WEBCAM;
+		        else if (ch.getType() == 12)
+			        cacheTypePattern = LOCLESS;
+		        else if (ch.getType() == 137)
+			        cacheTypePattern = EARTH;
+		        else if (ch.getType() == 453)
+			        cacheTypePattern = MEGA;
+		        else if (ch.getType() == 50)
+			        cacheTypePattern = PARKING;
+		        else if (ch.getType() == 51)
+			        cacheTypePattern = STAGE;
+		        else if (ch.getType() == 52)
+			        cacheTypePattern = QUESTION;
+		        else if (ch.getType() == 53)
+			        cacheTypePattern = FINAL;
+		        else if (ch.getType() == 54)
+			        cacheTypePattern = TRAILHEAD;
+		        else if (ch.getType() == 55)
+			        cacheTypePattern = REFERENCE;
+		        else if (ch.getType() == 13)
+			        cacheTypePattern = CITO;
+		        else if (ch.getType() == 1858)
+			        cacheTypePattern = WHERIGO;
+		        if ((cacheTypePattern &amp; typeMatchPattern) == 0) {
+			        cacheFiltered = true; break;
+		        }
+	        }
+	        ///////////////////////////////
+	        // Filter criterium 2: Bearing from centre
+	        ///////////////////////////////
+	        // The optimal number of comparisons to identify one of 16 objects is 4 (=log2(16))
+	        // By using else if we can reduce the number of comparisons from 16 to just over 8
+	        // By first checking the first letter, we can reduce the average number further to
+	        // just under 5
+	        if (hasRoseMatchPattern) {
+		        if (ch.bearing.startsWith(&quot;N&quot;)) {
+			        if (ch.bearing.equals(&quot;NW&quot;))
+				        cacheRosePattern = NW;
+			        else if (ch.bearing.equals(&quot;NNW&quot;))
+				        cacheRosePattern = NNW;
+			        else if (ch.bearing.equals(&quot;N&quot;))
+				        cacheRosePattern = N;
+			        else if (ch.bearing.equals(&quot;NNE&quot;))
+				        cacheRosePattern = NNE;
+			        else
+				        cacheRosePattern = NE;
+		        } else if (ch.bearing.startsWith(&quot;E&quot;)) {
+			        if (ch.bearing.equals(&quot;ENE&quot;))
+				        cacheRosePattern = ENE;
+			        else if (ch.bearing.equals(&quot;E&quot;))
+				        cacheRosePattern = E;
+			        else
+				        cacheRosePattern = ESE;
+		        } else if (ch.bearing.startsWith(&quot;S&quot;)) {
+			        if (ch.bearing.equals(&quot;SW&quot;))
+				        cacheRosePattern = SW;
+			        else if (ch.bearing.equals(&quot;SSW&quot;))
+				        cacheRosePattern = SSW;
+			        else if (ch.bearing.equals(&quot;S&quot;))
+				        cacheRosePattern = S;
+			        else if (ch.bearing.equals(&quot;SSE&quot;))
+				        cacheRosePattern = SSE;
+			        else
+				        cacheRosePattern = SE;
+		        } else {
+			        if (ch.bearing.equals(&quot;WNW&quot;))
+				        cacheRosePattern = WNW;
+			        else if (ch.bearing.equals(&quot;W&quot;))
+				        cacheRosePattern = W;
+			        else
+				        cacheRosePattern = WSW;
+		        }
+		        if ((cacheRosePattern &amp; roseMatchPattern) == 0) {
+			        cacheFiltered = true; break;
+		        }
+	        }
+	        ///////////////////////////////
+	        // Filter criterium 3: Distance
+	        ///////////////////////////////
+	        if (fscDist &gt; 0.0) {
+		        dummyd1 = ch.kilom;
+		        if (distdirec == SMALLER &amp;&amp; dummyd1 &gt; fscDist) {
+			        cacheFiltered = true; break;
+		        }
+		        if (distdirec == GREATER &amp;&amp; dummyd1 &lt; fscDist) {
+			        cacheFiltered = true; break;
+		        }
+	        }
+	        ///////////////////////////////
+	        // Filter criterium 4: Difficulty
+	        ///////////////////////////////
+	        if (fscDiff &gt; 0.0) {
+		        dummyd1 = Common.parseDouble(ch.getHard());
+		        if (diffdirec == SMALLER &amp;&amp; dummyd1 &gt; fscDiff) {
+			        cacheFiltered = true; break;
+		        }
+		        if (diffdirec == EQUAL &amp;&amp; dummyd1 != fscDiff) {
+			        cacheFiltered = true; break;
+		        }
+		        if (diffdirec == GREATER &amp;&amp; dummyd1 &lt; fscDiff) {
+			        cacheFiltered = true; break;
+		        }
+	        }
+	        ///////////////////////////////
+	        // Filter criterium 5: Terrain
+	        ///////////////////////////////
+	        if (fscTerr &gt; 0.0) {
+		        dummyd1 = Common.parseDouble(ch.getTerrain());
+		        if (terrdirec == SMALLER &amp;&amp; dummyd1 &gt; fscTerr) {
+			        cacheFiltered = true; break;
+		        }
+		        if (terrdirec == EQUAL &amp;&amp; dummyd1 != fscTerr) {
+			        cacheFiltered = true; break;
+		        }
+		        if (terrdirec == GREATER &amp;&amp; dummyd1 &lt; fscTerr) {
+			        cacheFiltered = true; break;
+		        }
+	        }
+	        //Vm.debug(ch.wayPoint+&quot; Found&quot;+ch.is_found+&quot;  FoundyMe=&quot;+foundByMe+&quot;   notFoundByMe=&quot;+notFoundByMe);
+	        //Vm.debug(ch.wayPoint+&quot; Owned&quot;+ch.is_owned+&quot;  OwnedByMe=&quot;+ownedByMe+&quot;   notOwnedByMe=&quot;+notOwnedByMe);
+	        //Vm.debug(ch.wayPoint+&quot; Archived&quot;+ch.is_archived+&quot;  Archived=&quot;+archived+&quot;   notArchived=&quot;+notArchived);
+	        //Vm.debug(ch.wayPoint+&quot; Available&quot;+ch.is_available+&quot;  Available=&quot;+available+&quot;   notAvailable=&quot;+notAvailable);
+	        //Vm.debug(&quot;Blacklisted: &quot;+ch.is_black);
+	        ///////////////////////////////
+	        // Filter criterium 6: Found by me
+	        ///////////////////////////////
+	        if ((ch.is_found() &amp;&amp; !foundByMe) || (!ch.is_found() &amp;&amp; !notFoundByMe)) {
+		        cacheFiltered = true; break;
+	        }
+	        ///////////////////////////////
+	        // Filter criterium 7: Owned by me
+	        ///////////////////////////////
+	        if ((ch.is_owned() &amp;&amp; !ownedByMe) || (!ch.is_owned() &amp;&amp; !notOwnedByMe)) {
+		        cacheFiltered = true; break;
+	        }
+	        ///////////////////////////////
+	        // Filter criterium 8: Archived
+	        ///////////////////////////////
+	        if ((ch.is_archived() &amp;&amp; !archived) || (!ch.is_archived() &amp;&amp; !notArchived)) {
+		        cacheFiltered = true; break;
+	        }
+	        ///////////////////////////////
+	        // Filter criterium 9: Unavailable
+	        ///////////////////////////////
+	        if ((ch.is_available() &amp;&amp; !available) || (!ch.is_available() &amp;&amp; !notAvailable)) {
+		        cacheFiltered = true; break;
+	        }
+	        ///////////////////////////////
+	        // Filter criterium 10: Size
+	        ///////////////////////////////
+	        if (hasSizeMatchPattern) {
+		        cacheSizePattern = 0;
+		        if (ch.getCacheSize().startsWith(&quot;M&quot;))
+			        cacheSizePattern = MICRO;
+		        else if (ch.getCacheSize().startsWith(&quot;S&quot;))
+			        cacheSizePattern = SMALL;
+		        else if (ch.getCacheSize().startsWith(&quot;R&quot;))
+			        cacheSizePattern = REGULAR;
+		        else if (ch.getCacheSize().startsWith(&quot;L&quot;))
+			        cacheSizePattern = LARGE;
+		        else if (ch.getCacheSize().startsWith(&quot;V&quot;))
+			        cacheSizePattern = VERYLARGE;
+		        else
+			        cacheSizePattern = OTHER;
+		        if ((cacheSizePattern &amp; sizeMatchPattern) == 0) {
+			        cacheFiltered = true; break;
+		        }
+	        }
+	        ///////////////////////////////
+	        // Filter criterium 11: Attributes
+	        ///////////////////////////////
+	        if ((attributesYesPattern != 0 || attributesNoPattern != 0) &amp;&amp; ch.mainCache == null) {
+		        if (attributesChoice == 0) {
+			        // AND-condition:
+			        if ((ch.getAttributesYes() &amp; attributesYesPattern) != attributesYesPattern
+			                || (ch.getAttributesNo() &amp; attributesNoPattern) != attributesNoPattern) {
+				        cacheFiltered = true;
+				        break;
+			        }
+		        } else if (attributesChoice == 1) {
+			        // OR-condition:
+			        if ((ch.getAttributesYes() &amp; attributesYesPattern) == 0
+			                &amp;&amp; (ch.getAttributesNo() &amp; attributesNoPattern) == 0) {
+				        cacheFiltered = true;
+				        break;
+			        }
+		        } else {
+			        // NOT-condition:
+			        if ((ch.getAttributesYes() &amp; attributesYesPattern) != 0
+			                || (ch.getAttributesNo() &amp; attributesNoPattern) != 0) {
+				        cacheFiltered = true;
+				        break;
+			        }
+		        }
+	        }
+	        break;
+        } while (true);
+		return cacheFiltered;
+    }
 	
 	/**
 	*	Invert is_filtered flag on all caches
@@ -533,16 +607,16 @@
 		CacheHolder ch;
 		if (cacheDB.size()==0) return;
 		Global.getProfile().selectionChanged = true;
-		boolean showBlackListed=Global.getProfile().showBlacklisted;
+		boolean showBlackListed=Global.getProfile().showBlacklisted();
 		for(int i = cacheDB.size()-1; i &gt;=0 ; i--){
 			ch = (CacheHolder)cacheDB.get(i);
-			if (ch.is_black==showBlackListed)
-				ch.is_filtered=!ch.is_filtered; // Only invert those that would be shown under blacklist filter
+			if (ch.is_black()==showBlackListed)
+				ch.setFiltered(!ch.is_filtered()); // Only invert those that would be shown under blacklist filter
 			else
-				ch.is_filtered=true; // Hide all those that have the wrong is_black status
+				ch.setFiltered(true); // Hide all those that have the wrong is_black status
 		}
-		Global.getProfile().filterInverted=!Global.getProfile().filterInverted;
-		Global.getProfile().hasUnsavedChanges=true;
+		Global.getProfile().setFilterInverted(!Global.getProfile().isFilterInverted());
+		//Global.getProfile().hasUnsavedChanges=true;
 	}
 	
 	/**
@@ -554,24 +628,24 @@
 		CacheHolder ch;
 		for(int i = cacheDB.size()-1; i &gt;=0 ; i--){
 			ch = (CacheHolder)cacheDB.get(i);
-			ch.is_filtered=(ch.is_black^Global.getProfile().showBlacklisted) ; // Always filter blacklisted caches
+			ch.setFiltered((ch.is_black()^Global.getProfile().showBlacklisted())) ; // Always filter blacklisted caches
 		}
-		Global.getProfile().filterActive=FILTER_INACTIVE;
-		Global.getProfile().filterInverted=false;
-		Global.getProfile().hasUnsavedChanges=true;
+		Global.getProfile().setFilterActive(FILTER_INACTIVE);
+		Global.getProfile().setFilterInverted(false);
+		//Global.getProfile().hasUnsavedChanges=true;
 	}
 
 	public boolean hasFilter() {
 		Profile prof=Global.getProfile();
-		return !(prof.filterType.equals(Profile.FILTERTYPE) &amp;&amp;
-		    prof.filterRose.equals(Profile.FILTERROSE) &amp;&amp;
-		    prof.filterVar.equals(Profile.FILTERVAR) &amp;&amp;
-		    prof.filterSize.equals(Profile.FILTERSIZE) &amp;&amp;
-		    prof.filterDist.equals(&quot;L&quot;) &amp;&amp;
-		    prof.filterDiff.equals(&quot;L&quot;) &amp;&amp;
-		    prof.filterTerr.equals(&quot;L&quot;) &amp;&amp;
-		    prof.filterAttrYes == 0l &amp;&amp;
-		    prof.filterAttrNo == 0l);
+		return !(prof.getFilterType().equals(Profile.FILTERTYPE) &amp;&amp;
+		    prof.getFilterRose().equals(Profile.FILTERROSE) &amp;&amp;
+		    prof.getFilterVar().equals(Profile.FILTERVAR) &amp;&amp;
+		    prof.getFilterSize().equals(Profile.FILTERSIZE) &amp;&amp;
+		    prof.getFilterDist().equals(&quot;L&quot;) &amp;&amp;
+		    prof.getFilterDiff().equals(&quot;L&quot;) &amp;&amp;
+		    prof.getFilterTerr().equals(&quot;L&quot;) &amp;&amp;
+		    prof.getFilterAttrYes() == 0l &amp;&amp;
+		    prof.getFilterAttrNo() == 0l);
 	}
 
 }

Modified: trunk/src/CacheWolf/FilterScreen.java
===================================================================
--- trunk/src/CacheWolf/FilterScreen.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/FilterScreen.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -318,12 +318,12 @@
 		//////////////////////////
 		// Panel 1 - Bearing &amp; Distance
 		//////////////////////////
-		if (prof.filterDist.length()&gt;1) {
-			if (prof.filterDist.charAt(0)=='L')
+		if (prof.getFilterDist().length()&gt;1) {
+			if (prof.getFilterDist().charAt(0)=='L')
 				chcDist.select(0);
 			else
 				chcDist.select(1);
-			String dist = prof.filterDist.substring(1);
+			String dist = prof.getFilterDist().substring(1);
 			if (Global.getPref().metricSystem == Metrics.IMPERIAL) {
 				double distValue = java.lang.Double.valueOf(dist).doubleValue();
 				double newDistValue = Metrics.convertUnit(distValue, Metrics.KILOMETER, Metrics.MILES);
@@ -334,7 +334,7 @@
 			chcDist.select(0);
 			inpDist.setText(&quot;&quot;);
 		}
-		String fltRose=prof.filterRose;
+		String fltRose=prof.getFilterRose();
 		chkNW.state   = fltRose.charAt(0) == '1';
 		chkNNW.state  = fltRose.charAt(1) == '1';
 		chkN.state    = fltRose.charAt(2) == '1';
@@ -358,7 +358,7 @@
 		//////////////////////////
 		// Panel 2 - Cache attributes
 		//////////////////////////
-		String fltVar=prof.filterVar;
+		String fltVar=prof.getFilterVar();
 		chkArchived.state      = fltVar.charAt(0) == '1';
 		chkAvailable.state     = fltVar.charAt(1) == '1';
 		chkFound.state         = fltVar.charAt(2) == '1';
@@ -371,27 +371,27 @@
 		//////////////////////////
 		// Panel 3 - Cache ratings
 		//////////////////////////
-		if (prof.filterDiff.length()&gt;1) {
-			if (prof.filterDiff.charAt(0)=='L')
+		if (prof.getFilterDiff().length()&gt;1) {
+			if (prof.getFilterDiff().charAt(0)=='L')
 				chcDiff.select(0);
-			else if (prof.filterDiff.charAt(0)=='=')
+			else if (prof.getFilterDiff().charAt(0)=='=')
 				chcDiff.select(1);
 			else
 				chcDiff.select(2);
-			inpDiff.setText(prof.filterDiff.substring(1));
+			inpDiff.setText(prof.getFilterDiff().substring(1));
 		} else {
 			chcDiff.select(0);
 			inpDiff.setText(&quot;&quot;);
 		}
 
-		if (prof.filterTerr.length()&gt;1) {
-			if (prof.filterTerr.charAt(0)=='L')
+		if (prof.getFilterTerr().length()&gt;1) {
+			if (prof.getFilterTerr().charAt(0)=='L')
 				chcTerr.select(0);
-			else if (prof.filterTerr.charAt(0)=='=')
+			else if (prof.getFilterTerr().charAt(0)=='=')
 				chcTerr.select(1);
 			else
 				chcTerr.select(2);
-			inpTerr.setText(prof.filterTerr.substring(1));
+			inpTerr.setText(prof.getFilterTerr().substring(1));
 		} else {
 			chcTerr.select(0);
 			inpTerr.setText(&quot;&quot;);
@@ -402,7 +402,7 @@
 		// Panel 4 - Cache types
 		//////////////////////////
 		
-		String fltType=prof.filterType;
+		String fltType=prof.getFilterType();
 		chkTrad.state       = fltType.charAt(0) == '1';
 		chkMulti.state      = fltType.charAt(1) == '1';
 		chkVirtual.state    = fltType.charAt(2) == '1';
@@ -433,7 +433,7 @@
 		//////////////////////////
 		// Panel 6 - Cache container
 		//////////////////////////
-		String fltSize=prof.filterSize;
+		String fltSize=prof.getFilterSize();
 		chkMicro.state      = fltSize.charAt(0) == '1';
 		chkSmall.state      = fltSize.charAt(1) == '1';
 		chkRegular.state    = fltSize.charAt(2) == '1';
@@ -448,8 +448,8 @@
 		//////////////////////////
 		// Panel 8 - Cache attributes
 		//////////////////////////
-		attV.setSelectionMasks( prof.filterAttrYes, prof.filterAttrNo );
-		chcAttrib.select(prof.filterAttrChoice);
+		attV.setSelectionMasks( prof.getFilterAttrYes(), prof.getFilterAttrNo() );
+		chcAttrib.select(prof.getFilterAttrChoice());
 		
 		// Adjust colors of buttons depending on which filters are active
 		setColors();
@@ -583,15 +583,15 @@
 				Vm.showWait(true);
 				//Save filter required
 				Profile pfl = Global.getProfile();
-				pfl.filterVar = (chkArchived.state    ? &quot;1&quot; : &quot;0&quot;) +
+				pfl.setFilterVar((chkArchived.state    ? &quot;1&quot; : &quot;0&quot;) +
 							(chkAvailable.state   ? &quot;1&quot; : &quot;0&quot;) +
 							(chkFound.state       ? &quot;1&quot; : &quot;0&quot;) +
 							(chkOwned.state       ? &quot;1&quot; : &quot;0&quot;) +
 							(chkNotArchived.state ? &quot;1&quot; : &quot;0&quot;) +
 							(chkNotAvailable.state? &quot;1&quot; : &quot;0&quot;) +
 							(chkNotFound.state    ? &quot;1&quot; : &quot;0&quot;) +
-							(chkNotOwned.state    ? &quot;1&quot; : &quot;0&quot;);							
-				pfl.filterType =(chkTrad.state    ? &quot;1&quot; : &quot;0&quot;) +
+							(chkNotOwned.state    ? &quot;1&quot; : &quot;0&quot;));							
+				pfl.setFilterType((chkTrad.state    ? &quot;1&quot; : &quot;0&quot;) +
 								(chkMulti.state   ? &quot;1&quot; : &quot;0&quot;) +
 								(chkVirtual.state ? &quot;1&quot; : &quot;0&quot;) +
 								(chkLetter.state  ? &quot;1&quot; : &quot;0&quot;) +
@@ -609,8 +609,8 @@
 								(chkTrailhead.state ? &quot;1&quot; : &quot;0&quot;) +
 								(chkReference.state ? &quot;1&quot; : &quot;0&quot;)+
 								(chkCito.state ? &quot;1&quot; : &quot;0&quot;)+
-								(chkWherigo.state ? &quot;1&quot; : &quot;0&quot;);
-				pfl.filterRose = (chkNW.state  ? &quot;1&quot;:&quot;0&quot;)+
+								(chkWherigo.state ? &quot;1&quot; : &quot;0&quot;));
+				pfl.setFilterRose((chkNW.state  ? &quot;1&quot;:&quot;0&quot;)+
 							 (chkNNW.state ? &quot;1&quot;:&quot;0&quot;)+
 							 (chkN.state   ? &quot;1&quot;:&quot;0&quot;)+
 							 (chkNNE.state ? &quot;1&quot;:&quot;0&quot;)+
@@ -625,13 +625,13 @@
 							 (chkSW.state  ? &quot;1&quot;:&quot;0&quot;)+
 							 (chkWSW.state ? &quot;1&quot;:&quot;0&quot;)+
 							 (chkW.state   ? &quot;1&quot;:&quot;0&quot;)+
-							 (chkWNW.state ? &quot;1&quot;:&quot;0&quot;);
-				pfl.filterSize =(chkMicro.state ? &quot;1&quot; : &quot;0&quot;)+
+							 (chkWNW.state ? &quot;1&quot;:&quot;0&quot;));
+				pfl.setFilterSize((chkMicro.state ? &quot;1&quot; : &quot;0&quot;)+
 							(chkSmall.state ? &quot;1&quot; : &quot;0&quot;)+
 							(chkRegular.state ? &quot;1&quot; : &quot;0&quot;)+
 							(chkLarge.state ? &quot;1&quot; : &quot;0&quot;)+
 							(chkVeryLarge.state ? &quot;1&quot; : &quot;0&quot;)+
-							(chkOther.state ? &quot;1&quot; : &quot;0&quot;);
+							(chkOther.state ? &quot;1&quot; : &quot;0&quot;));
 				
 				// Distance: If Metric system is set to imperial units,
 				//           then the entered value is meant to be miles,
@@ -646,29 +646,29 @@
 					}
 				}
 				if(chcDist.selectedIndex == 0) { 
-					pfl.filterDist=&quot;L&quot;+newDistance;
+					pfl.setFilterDist(&quot;L&quot;+newDistance);
 				} else { 
-					pfl.filterDist=&quot;G&quot;+newDistance;
+					pfl.setFilterDist(&quot;G&quot;+newDistance);
 				}
 					
 				if(chcDiff.selectedIndex == 0) { 
-					pfl.filterDiff=&quot;L&quot;+inpDiff.getText();
+					pfl.setFilterDiff(&quot;L&quot;+inpDiff.getText());
 				} else if(chcDiff.selectedIndex == 1) { 
-					pfl.filterDiff=&quot;=&quot;+inpDiff.getText();
+					pfl.setFilterDiff(&quot;=&quot;+inpDiff.getText());
 				} else {	
-					pfl.filterDiff=&quot;G&quot;+inpDiff.getText();
+					pfl.setFilterDiff(&quot;G&quot;+inpDiff.getText());
 				}	
 					
 				if(chcTerr.selectedIndex == 0) { 
-					pfl.filterTerr=&quot;L&quot;+inpTerr.getText();
+					pfl.setFilterTerr(&quot;L&quot;+inpTerr.getText());
 				} else if(chcTerr.selectedIndex == 1){ 
-					pfl.filterTerr=&quot;=&quot;+inpTerr.getText();
+					pfl.setFilterTerr(&quot;=&quot;+inpTerr.getText());
 				} else { 
-					pfl.filterTerr=&quot;G&quot;+inpTerr.getText();
+					pfl.setFilterTerr(&quot;G&quot;+inpTerr.getText());
 				}
-				pfl.filterAttrYes = attV.selectionMaskYes;
-				pfl.filterAttrNo = attV.selectionMaskNo;
-				pfl.filterAttrChoice = chcAttrib.selectedIndex;
+				pfl.setFilterAttrYes(attV.selectionMaskYes);
+				pfl.setFilterAttrNo(attV.selectionMaskNo);
+				pfl.setFilterAttrChoice(chcAttrib.selectedIndex);
 				Filter flt = new Filter();
 				flt.setFilter();
 				flt.doFilter();

Modified: trunk/src/CacheWolf/GPXImporter.java
===================================================================
--- trunk/src/CacheWolf/GPXImporter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/GPXImporter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -56,7 +56,7 @@
 		CacheHolder ch;
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			ch = (CacheHolder)cacheDB.get(i);
-			DBindex.put(ch.wayPoint, new Integer(i));
+			DBindex.put(ch.getWayPoint(), new Integer(i));
 		}//for
 	}
 /*	skg: This Constructor is not referenced, therefore commented out 
@@ -85,7 +85,7 @@
 */	
 	public void doIt(int how){
 		Filter flt = new Filter();
-		boolean wasFiltered = (profile.filterActive==Filter.FILTER_ACTIVE);
+		boolean wasFiltered = (profile.getFilterActive()==Filter.FILTER_ACTIVE);
 		flt.clearFilter();
 		try{
 			ewe.io.Reader r;
@@ -182,27 +182,23 @@
 
 		if (name.equals(&quot;groundspeak:cache&quot;)) {
 			inCache = true;
-			if (atts.getValue(&quot;available&quot;).equals(&quot;True&quot;))
-				chD.is_available = true;
-			else 
-				chD.is_available = false;
-			if (atts.getValue(&quot;archived&quot;).equals(&quot;True&quot;))
-				chD.is_archived = true;
-			else
-				chD.is_archived = false;
+			chD.setAvailable(atts.getValue(&quot;available&quot;).equals(&quot;True&quot;));
+			chD.setArchived(atts.getValue(&quot;archived&quot;).equals(&quot;True&quot;));
 			return;
 		}
 
 		if (name.equals(&quot;geocache&quot;)) {
+			boolean available = false;
+			boolean archived  = false;
 			inCache=true;
 			// get status
 			String status = new String(atts.getValue(&quot;status&quot;));
-			chD.is_available = false;
-			chD.is_archived = false;
-			if (status.equals(&quot;Available&quot;)) chD.is_available = true;
-			if (status.equals(&quot;Unavailable&quot;)) chD.is_available = false;
-			if (status.equals(&quot;Draft&quot;)) chD.is_available = false;
-			if (status.equals(&quot;Archived&quot;)) chD.is_archived = true;
+			if (status.equals(&quot;Available&quot;)) available = true;
+			else if (status.equals(&quot;Unavailable&quot;)) available = false;
+			else if (status.equals(&quot;Draft&quot;)) available = false;
+			else if (status.equals(&quot;Archived&quot;)) archived = true;
+			chD.setArchived(archived);
+			chD.setAvailable(available);
 			return;
 		}
 		
@@ -212,15 +208,11 @@
 
 		
 		if (name.equals(&quot;groundspeak:long_description&quot;)) {
-			if (atts.getValue(&quot;html&quot;).toLowerCase().equals(&quot;true&quot;))
-				chD.is_HTML= true;
-			else 
-				chD.is_HTML = false;
-			
+			chD.setHTML(atts.getValue(&quot;html&quot;).toLowerCase().equals(&quot;true&quot;));
 		}
 		if (name.equals(&quot;description&quot;) || name.equals(&quot;terra:description&quot;) ) {
 			//set HTML always to true if from oc.de or TC
-			chD.is_HTML= true;
+			chD.setHTML(true);
 		}
 
 		if (name.equals(&quot;groundspeak:logs&quot;) || name.equals(&quot;logs&quot;) || name.equals(&quot;terra:logs&quot;)) {
@@ -269,8 +261,8 @@
 				chD.CacheLogs.add(new Log(logIcon,logDate,logFinder,logData));
 				if((logIcon.equals(&quot;icon_smile.gif&quot;) || logIcon.equals(&quot;11.png&quot;) || logIcon.equals(&quot;icon_attended.gif&quot;)) &amp;&amp; 
 						  (logFinder.equalsIgnoreCase(pref.myAlias) || (pref.myAlias2.length()&gt;0 &amp;&amp; logFinder.equalsIgnoreCase(pref.myAlias2)))) {
-							chD.CacheStatus=logDate;
-							chD.is_found=true;
+							chD.setCacheStatus(logDate);
+							chD.setFound(true);
 							chD.OwnLogId = logId;
 							chD.OwnLog = new Log(logIcon,logDate,logFinder,logData);
 				}
@@ -281,17 +273,17 @@
 		if (name.equals(&quot;wpt&quot;)){
 			// Add cache Data only, if waypoint not already in database
 			//if (searchWpt(cacheDB, holder.wayPoint)== -1){
-			int index=searchWpt(chD.wayPoint);
+			int index=searchWpt(chD.getWayPoint());
 			//Vm.debug(&quot;here ?!?!?&quot;);
 			//Vm.debug(&quot;chould be new!!!!&quot;);
 			if (index == -1){
-				chD.noFindLogs=chD.CacheLogs.countNotFoundLogs();
-				chD.is_new = true;
+				chD.setNoFindLogs(chD.CacheLogs.countNotFoundLogs());
+				chD.setNew(true);
 				cacheDB.add(new CacheHolder(chD));
 				// don't spider additional waypoints, so check
 				// if waypoint starts with &quot;GC&quot;
 				if(doSpider == true) {
-					if(spiderOK == true &amp;&amp; chD.is_archived == false){
+					if(spiderOK == true &amp;&amp; chD.is_archived() == false){
 							if(chD.LatLon.length() &gt; 1){
 							if(getMaps){
 								ParseLatLon pll = new ParseLatLon(chD.LatLon,&quot;.&quot;);
@@ -301,7 +293,7 @@
 								//mpl.loadTo(profile.dataDir + &quot;/&quot; + holder.wayPoint + &quot;_map_2.gif&quot;, &quot;10&quot;);
 							}
 						}
-					if(chD.wayPoint.startsWith(&quot;GC&quot;)|| fromTC) {
+					if(chD.getWayPoint().startsWith(&quot;GC&quot;)|| fromTC) {
 						//spiderImages();
 						spiderImagesUsingSpider();
 						//Rename image sources
@@ -346,8 +338,8 @@
 			return;
 		}
 		if (name.equals(&quot;sym&quot;)&amp;&amp; strData.endsWith(&quot;Found&quot;)) {
-			chD.is_found = true;
-			chD.CacheStatus = MyLocale.getMsg(318,&quot;Found&quot;);
+			chD.setFound(true);
+			chD.setCacheStatus(MyLocale.getMsg(318,&quot;Found&quot;));
 			return;
 		}
 		if (name.equals(&quot;groundspeak:travelbugs&quot;)) {
@@ -359,7 +351,7 @@
 			Travelbug tb=new Travelbug(strData);
 			chD.Travelbugs.add(tb);
 			//holder.Bugs += &quot;&lt;b&gt;Name:&lt;/b&gt; &quot; + strData + &quot;&lt;br&gt;&lt;hr&gt;&quot;;
-			chD.has_bug = true;
+			chD.setHas_bugs(true);
 			return;
 		}
 		
@@ -368,7 +360,7 @@
 			//Date = strData.substring(5,7); // month
 			//Date += &quot;/&quot; + strData.substring(8,10); // day
 			//Date += &quot;/&quot; + strData.substring(0,4); // year
-			chD.DateHidden = strData.substring(0,10); //Date;
+			chD.setDateHidden(strData.substring(0,10)); //Date;
 			return;
 		}
 		// cache information
@@ -377,7 +369,7 @@
 		}
 		
 		if (name.equals(&quot;name&quot;) &amp;&amp; inWpt &amp;&amp; !inCache) {
-			chD.wayPoint = strData;
+			chD.setWayPoint(strData);
 			//msgA.setText(&quot;import &quot; + strData);
 			return;
 		}
@@ -386,7 +378,7 @@
 		// fill name with contents of &lt;desc&gt;, in case of gc.com the name is
 		// later replaced by the contents of &lt;groundspeak:name&gt; which is shorter
 		if (name.equals(&quot;desc&quot;)&amp;&amp; inWpt ) {
-			chD.CacheName = strData;
+			chD.setCacheName(strData);
 			//Vm.debug(&quot;CacheName: &quot; + strData);
 			//msgA.setText(&quot;import &quot; + strData);
 			return;
@@ -399,40 +391,40 @@
 		// Text for additional waypoints, no HTML
 		if (name.equals(&quot;cmt&quot;)&amp;&amp; inWpt){
 			chD.LongDescription = strData;
-			chD.is_HTML = false;
+			chD.setHTML(false);
 			return;
 		}
 		
 		// aditional wapypoint
 		if (name.equals(&quot;type&quot;)&amp;&amp; inWpt &amp;&amp; !inCache &amp;&amp; strData.startsWith(&quot;Waypoint&quot;)){
-			chD.type= CacheType.typeText2Number(strData);
-			chD.CacheSize = &quot;None&quot;;
+			chD.setType(CacheType.typeText2Number(strData));
+			chD.setCacheSize(&quot;None&quot;);
 		}
 
 		
 		if ((name.equals(&quot;groundspeak:name&quot;)|| name.equals(&quot;terra:name&quot;)) &amp;&amp; inCache) {
-			chD.CacheName = strData;
+			chD.setCacheName(strData);
 			return;
 		}
 		if (name.equals(&quot;groundspeak:owner&quot;) || name.equals(&quot;owner&quot;)||name.equals(&quot;terra:owner&quot;)) {
-			chD.CacheOwner = strData;
-			if(pref.myAlias.equals(strData)) chD.is_owned = true;
+			chD.setCacheOwner(strData);
+			if(pref.myAlias.equals(strData)) chD.setOwned(true);
 			return;
 		}
 		if (name.equals(&quot;groundspeak:difficulty&quot;) || name.equals(&quot;difficulty&quot;) || name.equals(&quot;terra:mental_challenge&quot;)) {
-			chD.hard = strData.replace('.',',');
+			chD.setHard(strData.replace('.',','));
 			return;
 		}
 		if (name.equals(&quot;groundspeak:terrain&quot;)|| name.equals(&quot;terrain&quot;)|| name.equals(&quot;terra:physical_challenge&quot;)) {
-			chD.terrain = strData.replace('.',',');
+			chD.setTerrain(strData.replace('.',','));
 			return;
 		}
 		if ((name.equals(&quot;groundspeak:type&quot;) || name.equals(&quot;type&quot;)|| name.equals(&quot;terra:style&quot;))&amp;&amp; inCache){
-			chD.type= CacheType.typeText2Number(strData);
+			chD.setType(CacheType.typeText2Number(strData));
 			return;
 		}
 		if (name.equals(&quot;groundspeak:container&quot;)|| name.equals(&quot;container&quot;)){
-			chD.CacheSize = strData;
+			chD.setCacheSize(strData);
 			return;
 		}
 		if (name.equals(&quot;groundspeak:country&quot;)|| name.equals(&quot;country&quot;)){
@@ -444,17 +436,17 @@
 			return;
 		}
 		if (name.equals(&quot;terra:size&quot;)){
-			chD.CacheSize = TCSizetoText(strData);
+			chD.setCacheSize(TCSizetoText(strData));
 		}
 
 		if (name.equals(&quot;groundspeak:short_description&quot;)|| name.equals(&quot;summary&quot;)) {
-			if (chD.is_HTML)	chD.LongDescription =SafeXML.cleanback(strData)+&quot;&lt;br&gt;&quot;; // &lt;br&gt; needed because we also use a &lt;br&gt; in SpiderGC. Without it the comparison in ch.update fails
+			if (chD.is_HTML())	chD.LongDescription =SafeXML.cleanback(strData)+&quot;&lt;br&gt;&quot;; // &lt;br&gt; needed because we also use a &lt;br&gt; in SpiderGC. Without it the comparison in ch.update fails
 			else chD.LongDescription =strData+&quot;\n&quot;;
 			return;
 		}
 
 		if (name.equals(&quot;groundspeak:long_description&quot;)|| name.equals(&quot;description&quot;)|| name.equals(&quot;terra:description&quot;)) {
-			if (chD.is_HTML)	chD.LongDescription +=SafeXML.cleanback(strData);
+			if (chD.is_HTML())	chD.LongDescription +=SafeXML.cleanback(strData);
 			else chD.LongDescription +=strData;
 			return;
 		}
@@ -547,7 +539,7 @@
 				imgSpider.getImages(chD.LongDescription, chD);
 		}
 		else {
-			addr = &quot;<A HREF="http://www.geocaching.com/seek/cache_details.aspx?wp=">http://www.geocaching.com/seek/cache_details.aspx?wp=</A>&quot; + chD.wayPoint ;
+			addr = &quot;<A HREF="http://www.geocaching.com/seek/cache_details.aspx?wp=">http://www.geocaching.com/seek/cache_details.aspx?wp=</A>&quot; + chD.getWayPoint() ;
 			//Vm.debug(addr + &quot;|&quot;);
 			cacheText = SpiderGC.fetch(addr);
 			imgSpider.getImages(cacheText, chD);

Modified: trunk/src/CacheWolf/LOCXMLImporter.java
===================================================================
--- trunk/src/CacheWolf/LOCXMLImporter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/LOCXMLImporter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -56,7 +56,7 @@
 		CacheHolder ch;
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			ch = (CacheHolder)cacheDB.get(i);
-			DBindexWpt.put(ch.wayPoint, new Integer(i));
+			DBindexWpt.put(ch.getWayPoint(), new Integer(i));
 		}//for
 	}
 	
@@ -100,20 +100,20 @@
 	
 	public void endElement(String name){
 		if (name.equals(&quot;name&quot;)){
-			holder.CacheName = strData;
+			holder.setCacheName(strData);
 		}
 
 		if (name.equals(&quot;waypoint&quot;)){
 			int index;
-			index = searchWpt(holder.wayPoint);
+			index = searchWpt(holder.getWayPoint());
 			if (index == -1){
-				holder.is_new = true;
+				holder.setNew(true);
 				cacheDB.add(new CacheHolder(holder));
-				DBindexWpt.put(holder.wayPoint, new Integer(cacheDB.size()-1));
+				DBindexWpt.put(holder.getWayPoint(), new Integer(cacheDB.size()-1));
 			}
 			// update (overwrite) data
 			else {
-				holder.is_new = false;
+				holder.setNew(false);
 				cacheDB.set(index, new CacheHolder(holder));
 			}
 			// save all  (after each cache???)
@@ -157,7 +157,7 @@
 		index = searchWpt(wpt);
 		if (index == -1){
 			ch = new CacheHolderDetail();
-			ch.wayPoint = wpt;
+			ch.setWayPoint(wpt);
 			return ch;
 		}
 		ch = new CacheHolderDetail((CacheHolder) cacheDB.get(index));

Modified: trunk/src/CacheWolf/MainForm.java
===================================================================
--- trunk/src/CacheWolf/MainForm.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/MainForm.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -86,9 +86,6 @@
 			profile.readIndex();
 			pref.curCentrePt.set(profile.centre);
 			profile.updateBearingDistance();
-			boolean saveHasUnsavedChanges = profile.hasUnsavedChanges;
-			profile.restoreFilter(); // this method sets hasUnsavedChanges to true
-			profile.hasUnsavedChanges = saveHasUnsavedChanges ; // in case that the profile is new, it hasUnsavedChanges, so set it back
 			setTitle(&quot;Cachewolf &quot;+Version.getRelease()+&quot; - &quot;+profile.name);
 		} catch (Exception e){
 			if(pref.debug == true) Vm.debug(&quot;MainForm:: Exception:: &quot; + e.toString());

Modified: trunk/src/CacheWolf/MainMenu.java
===================================================================
--- trunk/src/CacheWolf/MainMenu.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/MainMenu.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -160,7 +160,7 @@
 		filterMenuItems[6] = filtNonSelected = new MenuItem(MyLocale.getMsg(1011,&quot;Filter out non selected&quot;));
 		filterMenuItems[7] = mnuSeparator;
 		filterMenuItems[8] = filtBlack   = new MenuItem(MyLocale.getMsg(161,&quot;Show Blacklist&quot;));
-        filtBlack.modifiers=Global.getProfile().showBlacklisted?filtBlack.modifiers|MenuItem.Checked:filtBlack.modifiers&amp;~MenuItem.Checked;
+        filtBlack.modifiers=Global.getProfile().showBlacklisted()?filtBlack.modifiers|MenuItem.Checked:filtBlack.modifiers&amp;~MenuItem.Checked;
 		//filterMenuItems[9] = mnuSeparator;
 		//filterMenuItems[10] = cacheTour;
 
@@ -264,7 +264,7 @@
 			if(mev.selectedItem == mnuNewProfile){
 				if (NewProfileWizard.startNewProfileWizard(getFrame()) ) {
 					pref.curCentrePt = new CWPoint(profile.centre);
-		            filtBlack.modifiers=Global.getProfile().showBlacklisted?filtBlack.modifiers|MenuItem.Checked:filtBlack.modifiers&amp;~MenuItem.Checked;
+		            filtBlack.modifiers=Global.getProfile().showBlacklisted()?filtBlack.modifiers|MenuItem.Checked:filtBlack.modifiers&amp;~MenuItem.Checked;
 					tbp.refreshTable();
 				}
 			}
@@ -281,7 +281,7 @@
 					profile.readIndex();
 					Vm.showWait(infB, false);
 					pref.curCentrePt.set(profile.centre);
-                    filtBlack.modifiers=Global.getProfile().showBlacklisted?filtBlack.modifiers|MenuItem.Checked:filtBlack.modifiers&amp;~MenuItem.Checked;
+                    filtBlack.modifiers=Global.getProfile().showBlacklisted()?filtBlack.modifiers|MenuItem.Checked:filtBlack.modifiers&amp;~MenuItem.Checked;
 					Global.mainForm.setTitle(&quot;Cachewolf &quot;+Version.getRelease()+&quot; - &quot;+profile.name);
 					infB.close(0);
 					tbp.resetModel();
@@ -341,15 +341,15 @@
 						}
 					}
 				}
-                Global.getProfile().showBlacklisted = false;
-                filtBlack.modifiers=Global.getProfile().showBlacklisted?filtBlack.modifiers|MenuItem.Checked:filtBlack.modifiers&amp;~MenuItem.Checked;
+                Global.getProfile().setShowBlacklisted(false);
+                filtBlack.modifiers=Global.getProfile().showBlacklisted()?filtBlack.modifiers|MenuItem.Checked:filtBlack.modifiers&amp;~MenuItem.Checked;
 				tbp.resetModel();
 			}
 			if(mev.selectedItem == loadOC){
 				OCXMLImporter oc = new OCXMLImporter(pref,profile);
 				oc.doIt();
-                Global.getProfile().showBlacklisted = false;
-                filtBlack.modifiers=Global.getProfile().showBlacklisted?filtBlack.modifiers|MenuItem.Checked:filtBlack.modifiers&amp;~MenuItem.Checked;
+                Global.getProfile().setShowBlacklisted(false);
+                filtBlack.modifiers=Global.getProfile().showBlacklisted()?filtBlack.modifiers|MenuItem.Checked:filtBlack.modifiers&amp;~MenuItem.Checked;
 				tbp.resetModel();
 			}
 			if (mev.selectedItem == update) 
@@ -543,13 +543,13 @@
 					ch = (CacheHolder)cacheDB.get(i);
 					// This is an incremental filter, i.e. it keeps the existing filter
 					// status and only adds the marked caches to the filtered set
-					if (ch.is_Checked &amp;&amp; !ch.is_filtered) {
-						ch.is_filtered = true;
+					if (ch.is_Checked &amp;&amp; !ch.is_filtered()) {
+						ch.setFiltered(true);
 						filterChanged = true;
 					}
 				}
-				if ( filterChanged &amp;&amp; Global.getProfile().filterActive == Filter.FILTER_INACTIVE) {
-					Global.getProfile().filterActive = Filter.FILTER_MARKED_ONLY;
+				if ( filterChanged &amp;&amp; Global.getProfile().getFilterActive() == Filter.FILTER_INACTIVE) {
+					Global.getProfile().setFilterActive(Filter.FILTER_MARKED_ONLY);
 				}
 				tbp.refreshTable();
 			}
@@ -561,31 +561,32 @@
 					ch = (CacheHolder)cacheDB.get(i);
 					// incremental filter. Keeps status of all marked caches and
 					// adds unmarked caches to filtered list
-					if (!ch.is_Checked &amp;&amp; !ch.is_filtered) {
-						ch.is_filtered = true;
+					if (!ch.is_Checked &amp;&amp; !ch.is_filtered()) {
+						ch.setFiltered(true);
 						filterChanged = true;
 					}
 				}
-				if ( filterChanged &amp;&amp; Global.getProfile().filterActive == Filter.FILTER_INACTIVE) {
-					Global.getProfile().filterActive = Filter.FILTER_MARKED_ONLY;
+				if ( filterChanged &amp;&amp; Global.getProfile().getFilterActive() == Filter.FILTER_INACTIVE) {
+					Global.getProfile().setFilterActive(Filter.FILTER_MARKED_ONLY);
 				}
 				tbp.refreshTable();
 			}
 			if(mev.selectedItem == filtBlack){
 				//filtBlack.modifiers=filtBlack.modifiers|MenuItem.Checked;
-				Global.getProfile().showBlacklisted = !Global.getProfile().showBlacklisted;
-				filtBlack.modifiers=Global.getProfile().showBlacklisted?filtBlack.modifiers|MenuItem.Checked:filtBlack.modifiers&amp;~MenuItem.Checked;
+				Global.getProfile().setShowBlacklisted(!Global.getProfile().showBlacklisted());
+				filtBlack.modifiers=Global.getProfile().showBlacklisted()?filtBlack.modifiers|MenuItem.Checked:filtBlack.modifiers&amp;~MenuItem.Checked;
 				SearchCache ssc = new SearchCache(cacheDB);
 				ssc.clearSearch();// Clear search &amp; restore filter status
-				Filter flt=new Filter();
-				flt.clearFilter();
+				//Filter flt=new Filter();
+				//flt.clearFilter();
+				Global.getProfile().restoreFilter();
 				tbp.refreshTable();
 			}
 			///////////////////////////////////////////////////////////////////////
 			// &quot;Organise&quot; pulldown menu
 			///////////////////////////////////////////////////////////////////////
 			if(mev.selectedItem == orgNewWP){
-				if (Global.mainTab.tbP.getSelectedCache() &gt;= 0) Global.mainTab.lastselected = ((CacheHolder)cacheDB.get(Global.mainTab.tbP.getSelectedCache())).wayPoint;
+				if (Global.mainTab.tbP.getSelectedCache() &gt;= 0) Global.mainTab.lastselected = ((CacheHolder)cacheDB.get(Global.mainTab.tbP.getSelectedCache())).getWayPoint();
 				Global.mainTab.newWaypoint(new CacheHolder());
 			}
 
@@ -691,9 +692,9 @@
 		Vector cachesToUpdate = new Vector();
 		for(int i = 0; i &lt;	cacheDB.size(); i++){
 			ch = (CacheHolder)cacheDB.get(i);
-			if(ch.is_Checked == true &amp;&amp; !ch.is_filtered) {
-				if ( ch.wayPoint.length()&gt;1 &amp;&amp; (ch.wayPoint.substring(0,2).equalsIgnoreCase(&quot;GC&quot;) 
-						|| ch.wayPoint.substring(0,2).equalsIgnoreCase(&quot;OC&quot;)))
+			if(ch.is_Checked == true &amp;&amp; !ch.is_filtered()) {
+				if ( ch.getWayPoint().length()&gt;1 &amp;&amp; (ch.getWayPoint().substring(0,2).equalsIgnoreCase(&quot;GC&quot;) 
+						|| ch.getWayPoint().substring(0,2).equalsIgnoreCase(&quot;OC&quot;)))
 //					if ( (ch.wayPoint.length() &gt; 1 &amp;&amp; ch.wayPoint.substring(0,2).equalsIgnoreCase(&quot;GC&quot;)))
 //					Notiz: Wenn es ein addi Wpt ist, sollte eigentlich der Maincache gespidert werden
 //					Alter code pr&#252;ft aber nur ob ein Maincache von GC existiert und versucht dann den addi direkt zu spidern, was nicht funktioniert
@@ -708,7 +709,7 @@
 					if (!ch.isAddiWpt() &amp;&amp; !alreadySaid) {
 						alreadySaid = true;
 						(new MessageBox(MyLocale.getMsg(327,&quot;Information&quot;),
-								        ch.wayPoint+ 
+								        ch.getWayPoint()+ 
 								        MyLocale.getMsg(5002,&quot;: At the moment this function is only applicable for geocaching.com and opencaching.de.&quot;), FormBase.OKB)).execute();
 					}
 				}
@@ -722,9 +723,9 @@
 			int i = ((Integer)cachesToUpdate.get(j)).intValue();
 			ch = (CacheHolder)cacheDB.get(i);
 //			infB.setInfo(&quot;Loading: &quot; + ch.wayPoint);
-			infB.setInfo(MyLocale.getMsg(5513,&quot;Loading: &quot;) + ch.wayPoint +&quot; (&quot; + (j+1) + &quot; / &quot; + cachesToUpdate.size() + &quot;)&quot;);
+			infB.setInfo(MyLocale.getMsg(5513,&quot;Loading: &quot;) + ch.getWayPoint() +&quot; (&quot; + (j+1) + &quot; / &quot; + cachesToUpdate.size() + &quot;)&quot;);
 			infB.redisplay();
-			if (ch.wayPoint.substring(0,2).equalsIgnoreCase(&quot;GC&quot;)) {
+			if (ch.getWayPoint().substring(0,2).equalsIgnoreCase(&quot;GC&quot;)) {
 				int test = spider.spiderSingle(i, infB,forceLogin);
 				if (test == -1) {
 					infB.close(0);
@@ -732,7 +733,7 @@
 				} else if (test == 0) {
 					spiderErrors++;
 				} else {
-					profile.hasUnsavedChanges=true;	
+					//profile.hasUnsavedChanges=true;	
 				}
 				forceLogin=false;
 			}
@@ -740,15 +741,15 @@
 				if (!ocSync.syncSingle(i, infB)) {
 					infB.close(0);
 					break;
-				} else 
-					profile.hasUnsavedChanges=true;	
+				} else { 
+					//profile.hasUnsavedChanges=true;
+				}	
 			}
 
 //			cacheDB.clear();
 //			profile.readIndex();
 		}
 		infB.close(0);
-//		profile.hasUnsavedChanges=true;	
 		profile.saveIndex(pref,Profile.SHOW_PROGRESS_BAR);
 		profile.restoreFilter();
 		profile.updateBearingDistance();

Modified: trunk/src/CacheWolf/MainTab.java
===================================================================
--- trunk/src/CacheWolf/MainTab.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/MainTab.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -141,7 +141,7 @@
 				lastselected=&quot;&quot;;
 			} else {
 				ch = (CacheHolder)cacheDB.get(tbP.getSelectedCache());
-				lastselected=ch.wayPoint;  // Used in Parser.Skeleton
+				lastselected=ch.getWayPoint();  // Used in Parser.Skeleton
 				try {
 					chD = ch.getCacheDetails(true);
 					//chD=new CacheHolderDetail(ch);
@@ -159,7 +159,7 @@
 				detP.saveDirtyWaypoint();
 				if (needTableUpdate) {
 					tbP.myMod.updateRows();// This sorts the waypoint (if it is new) into the right position
-					tbP.selectRow(profile.getCacheIndex(detP.thisCache.wayPoint));
+					tbP.selectRow(profile.getCacheIndex(detP.thisCache.getWayPoint()));
 				}
 				//was tbP.refreshTable();
 				tbP.tc.update(true); // Update and repaint
@@ -255,7 +255,7 @@
 			break;
 		case 8:  // Cache Radar Panel
 			MyLocale.setSIPOff();
-			radarP.setParam(pref, cacheDB, chD==null?&quot;&quot;:chD.wayPoint);
+			radarP.setParam(pref, cacheDB, chD==null?&quot;&quot;:chD.getWayPoint());
 			radarP.drawThePanel();
 			break;
 		}
@@ -282,7 +282,7 @@
 		// To change cache we need to be in panel 0
 		onLeavingPanel(oldCard);
 		onEnteringPanel(0); oldCard=0;
-		int row = profile.getCacheIndex(chi.wayPoint);
+		int row = profile.getCacheIndex(chi.getWayPoint());
 		tbP.selectRow(row);
 		//tbP.tc.scrollToVisible(row, 0);
 		//tbP.selectRow(row);
@@ -313,23 +313,23 @@
 		if (selectedIndex &gt;= 0) {
 			CacheHolder selectedCache = (CacheHolder) profile.cacheDB.get( selectedIndex );
 			if ( selectedCache.isAddiWpt() ) {
-				mainCache = selectedCache.mainCache.wayPoint;
+				mainCache = selectedCache.mainCache.getWayPoint();
 			}			
 		}
-		Global.getProfile().hasUnsavedChanges=true;
 		detP.setNeedsTableUpdate(true);
-		if (CacheType.isAddiWpt(ch.type) &amp;&amp; mainCache!=null &amp;&amp; mainCache.length()&gt;2) {
-			ch.wayPoint = profile.getNewAddiWayPointName(mainCache);
+		if (CacheType.isAddiWpt(ch.getType()) &amp;&amp; mainCache!=null &amp;&amp; mainCache.length()&gt;2) {
+			ch.setWayPoint(profile.getNewAddiWayPointName(mainCache));
 			profile.setAddiRef(ch);
 		} else { 
-			ch.wayPoint = profile.getNewWayPointName();
-			ch.type=0;
-			lastselected=ch.wayPoint;
+			ch.setWayPoint(profile.getNewWayPointName());
+			ch.setType(0);
+			lastselected=ch.getWayPoint();
 		}
-		ch.CacheSize = &quot;None&quot;;
+		ch.setCacheSize(&quot;None&quot;);
 		chD = ch.getCacheDetails(true);
 		this.ch = ch;
 		cacheDB.add(ch);
+		Global.getProfile().notifyUnsavedChanges(true); // Just to be sure 
 		tbP.myMod.numRows++;
 		detP.setDetails(ch);
 		oldCard=1;
@@ -401,7 +401,7 @@
 			oldCard=0;
 		}
 		updatePendingChanges();
-		if (profile.hasUnsavedChanges) profile.saveIndex(Global.getPref(),true);
+		if (profile.hasUnsavedChanges()) profile.saveIndex(Global.getPref(),true);
 	    this.tbP.saveColWidth(pref);
 		Global.getPref().savePreferences();
 	}

Modified: trunk/src/CacheWolf/MyComparer.java
===================================================================
--- trunk/src/CacheWolf/MyComparer.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/MyComparer.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -20,27 +20,27 @@
 		if (colToCompare==1) {
 			for (int i=0; i&lt;visibleSize; i++) {
 				CacheHolder ch=(CacheHolder) cacheDB.get(i);
-				ch.sort=String.valueOf(ch.type);
+				ch.sort=String.valueOf(ch.getType());
 			}
 		} else if (colToCompare==2) {
 			for (int i=0; i&lt;visibleSize; i++) {
 				CacheHolder ch=(CacheHolder) cacheDB.get(i);
-				ch.sort=ch.hard;
+				ch.sort=ch.getHard();
 			}
 		} else if (colToCompare==3) {
 			for (int i=0; i&lt;visibleSize; i++) {
 				CacheHolder ch=(CacheHolder) cacheDB.get(i);
-				ch.sort=ch.terrain;
+				ch.sort=ch.getTerrain();
 			}
 		} else if (colToCompare==4) {
 			for (int i=0; i&lt;visibleSize; i++) {
 				CacheHolder ch=(CacheHolder) cacheDB.get(i);
-				ch.sort=ch.wayPoint.toUpperCase();
+				ch.sort=ch.getWayPoint().toUpperCase();
 			}
 		} else if (colToCompare==5) {
 			for (int i=0; i&lt;visibleSize; i++) {
 				CacheHolder ch=(CacheHolder) cacheDB.get(i);
-				ch.sort=ch.CacheName.toLowerCase();
+				ch.sort=ch.getCacheName().toLowerCase();
 			}
 		} else if (colToCompare==6) {
 			for (int i=0; i&lt;visibleSize; i++) {
@@ -50,17 +50,17 @@
 		} else if (colToCompare==7) {
 			for (int i=0; i&lt;visibleSize; i++) {
 				CacheHolder ch=(CacheHolder) cacheDB.get(i);
-				ch.sort=ch.CacheOwner.toLowerCase();
+				ch.sort=ch.getCacheOwner().toLowerCase();
 			}
 		} else if (colToCompare==8) {
 			for (int i=0; i&lt;visibleSize; i++) {
 				CacheHolder ch=(CacheHolder) cacheDB.get(i);
-				ch.sort=ch.DateHidden;
+				ch.sort=ch.getDateHidden();
 			}
 		} else if (colToCompare==9) {
 			for (int i=0; i&lt;visibleSize; i++) {
 				CacheHolder ch=(CacheHolder) cacheDB.get(i);
-				ch.sort=ch.CacheStatus;
+				ch.sort=ch.getCacheStatus();
 			}
 		} else if (colToCompare==10) {
 			for (int i=0; i&lt;visibleSize; i++) {
@@ -77,8 +77,8 @@
 		} else if (colToCompare==12) {
 			for (int i=0; i&lt;visibleSize; i++) {
 				CacheHolder ch=(CacheHolder) cacheDB.get(i);
-				if (ch.CacheSize.length()==0) ch.sort=&quot;?&quot;;
-				else switch (ch.CacheSize.charAt(0)) {
+				if (ch.getCacheSize().length()==0) ch.sort=&quot;?&quot;;
+				else switch (ch.getCacheSize().charAt(0)) {
 					case 'M': ch.sort=&quot;1&quot;; break;
 					case 'S': ch.sort=&quot;2&quot;; break;
 					case 'R': ch.sort=&quot;3&quot;; break;
@@ -90,15 +90,15 @@
 		} else if (colToCompare==13) {
 			for (int i=0; i&lt;visibleSize; i++) {
 				CacheHolder ch=(CacheHolder) cacheDB.get(i);
-				if (ch.wayPoint.startsWith(&quot;OC&quot;))
-					ch.sort=MyLocale.formatLong(ch.numRecommended,&quot;00000&quot;);
+				if (ch.getWayPoint().startsWith(&quot;OC&quot;))
+					ch.sort=MyLocale.formatLong(ch.getNumRecommended(),&quot;00000&quot;);
 				else
 					ch.sort=&quot;\uFFFF&quot;;
 			}			
 		} else if (colToCompare==14) {
 			for (int i=0; i&lt;visibleSize; i++) {
 				CacheHolder ch=(CacheHolder) cacheDB.get(i);
-				if (ch.wayPoint.startsWith(&quot;OC&quot;))
+				if (ch.getWayPoint().startsWith(&quot;OC&quot;))
 					ch.sort=MyLocale.formatLong(ch.recommendationScore,&quot;00000&quot;);
 				else
 					ch.sort=&quot;\uFFFF&quot;;

Modified: trunk/src/CacheWolf/NewProfileForm.java
===================================================================
--- trunk/src/CacheWolf/NewProfileForm.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/NewProfileForm.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -54,8 +54,8 @@
 							profileDir=&quot;&quot;;
 							this.close(-1);
 						}
-						Global.getProfile().filterActive=Filter.FILTER_INACTIVE;
-						Global.getProfile().filterInverted=false;
+						Global.getProfile().setFilterActive(Filter.FILTER_INACTIVE);
+						Global.getProfile().setFilterInverted(false);
 						this.close(0);
 					}
 				}

Modified: trunk/src/CacheWolf/NewProfileWizard.java
===================================================================
--- trunk/src/CacheWolf/NewProfileWizard.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/NewProfileWizard.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -20,8 +20,7 @@
 			CoordsScreen cs = new CoordsScreen();
 			cs.setFields(new CWPoint(), CWPoint.CW);
 			if (cs.execute() == FormBase.IDOK) {
-				profile.centre.set(cs.getCoords());
-				profile.hasUnsavedChanges=true;
+				profile.setCenterCoords(cs.getCoords());
 			}
 			Global.mainForm.setTitle(&quot;Cachewolf &quot;+Version.getRelease()+&quot; - &quot;+profile.name);
 		}

Modified: trunk/src/CacheWolf/OCXMLImporter.java
===================================================================
--- trunk/src/CacheWolf/OCXMLImporter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/OCXMLImporter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -67,17 +67,17 @@
 		pref = p;
 		profile=prof;
 		cacheDB = profile.cacheDB;
-		if(profile.last_sync_opencaching == null ||
-				profile.last_sync_opencaching.length() &lt; 12){
-			profile.last_sync_opencaching = &quot;20050801000000&quot;;
+		if(profile.getLast_sync_opencaching() == null ||
+				profile.getLast_sync_opencaching().length() &lt; 12){
+			profile.setLast_sync_opencaching(&quot;20050801000000&quot;);
 			incUpdate = false;
 		}
 		user = p.myAlias.toLowerCase();
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			ch = (CacheHolder)cacheDB.get(i);
-			DBindexWpt.put(ch.wayPoint, new Integer(i));
-			if (!ch.ocCacheID.equals(&quot;&quot;))
-				DBindexID.put(ch.ocCacheID, new Integer(i));
+			DBindexWpt.put(ch.getWayPoint(), new Integer(i));
+			if (!ch.getOcCacheID().equals(&quot;&quot;))
+				DBindexID.put(ch.getOcCacheID(), new Integer(i));
 		}//for
 
 	}
@@ -115,8 +115,8 @@
 		String lastS; 
 		if (reload)  lastS = &quot;20050801000000&quot;;
 		else {
-			if (ch.lastSyncOC.length() &lt; 14) lastS = &quot;20050801000000&quot;;
-			else lastS = ch.lastSyncOC;
+			if (ch.getLastSyncOC().length() &lt; 14) lastS = &quot;20050801000000&quot;;
+			else lastS = ch.getLastSyncOC();
 		}
 		dateOfthisSync = new Time();
 		dateOfthisSync.parse(lastS, &quot;yyyyMMddHHmmss&quot;);
@@ -133,7 +133,7 @@
 		else url += &quot;&amp;picture=0&quot;;
 		url += &quot;&amp;cachelog=1&quot;
 			+ &quot;&amp;removedobject=0&quot;
-			+ &quot;&amp;wp=&quot; + ch.wayPoint
+			+ &quot;&amp;wp=&quot; + ch.getWayPoint()
 			+ &quot;&amp;charset=utf-8&quot;
 			+ &quot;&amp;cdata=0&quot;
 			+ &quot;&amp;session=0&quot;;
@@ -149,7 +149,7 @@
 		
 		String url = new String();
 
-		String lastS =  profile.last_sync_opencaching;
+		String lastS =  profile.getLast_sync_opencaching();
 		CWPoint centre = pref.curCentrePt; // No need to clone curCentrePt as centre is only read
 		if (!centre.isValid()) {
 			(new MessageBox(&quot;Error&quot;, &quot;Coordinates for centre must be set&quot;, FormBase.OKB)).execute();
@@ -166,19 +166,19 @@
 		distDouble.value = Common.parseDouble(dist);
 		dist = distDouble.toString(0, 1, 0).replace(',', '.');
 		//check, if distance is greater than before
-		if (Convert.toInt(dist) &gt; Convert.toInt(profile.distOC) ||
+		if (Convert.toInt(dist) &gt; Convert.toInt(profile.getDistOC()) ||
 				pref.downloadmissingOC  ){
 			// resysnc
 			lastS = &quot;20050801000000&quot;;
 			incUpdate = false;
 		}
-		profile.distOC = dist;
+		profile.setDistOC(dist);
 		// Clear status of caches in db
 		for(int i = cacheDB.size()-1; i&gt;=0 ;i--){
 			ch = (CacheHolder)cacheDB.get(i);
-			ch.is_update = false;
-			ch.is_new = false;
-			ch.is_log_update = false;
+			ch.setUpdated(false);
+			ch.setNew(false);
+			ch.setLog_updated(false);
 		}	
 		picCnt = 0;
 		//Build url
@@ -205,7 +205,7 @@
 		profile.saveIndex(pref,Profile.SHOW_PROGRESS_BAR);
 		Vm.showWait(false);
 		if (success) {
-			profile.last_sync_opencaching = dateOfthisSync.format(&quot;yyyyMMddHHmmss&quot;);
+			profile.setLast_sync_opencaching(dateOfthisSync.format(&quot;yyyyMMddHHmmss&quot;));
 			//pref.savePreferences();
 			finalMessage = MyLocale.getMsg(1607,&quot;Update from opencaching successful&quot;); 
 			inf.addWarning(&quot;\nNumber of&quot;+
@@ -265,15 +265,15 @@
 				success = false;
 			}
 		}catch (IllegalArgumentException e) {
-			finalMessage = MyLocale.getMsg(1621,&quot;Error parsing update file\n this is likely a bug in opencaching.de\nplease try again later\n, state:&quot;)+&quot; &quot;+state+&quot;, waypoint: &quot;+ chD.wayPoint;
+			finalMessage = MyLocale.getMsg(1621,&quot;Error parsing update file\n this is likely a bug in opencaching.de\nplease try again later\n, state:&quot;)+&quot; &quot;+state+&quot;, waypoint: &quot;+ chD.getWayPoint();
 			success = false;
-			Vm.debug(&quot;Parse error: &quot; + state + &quot; &quot; + chD.wayPoint);
+			Vm.debug(&quot;Parse error: &quot; + state + &quot; &quot; + chD.getWayPoint());
 			e.printStackTrace();
-		}catch (Exception e){ // here schould be used the correct exepion
-			if (chD != null)	finalMessage = MyLocale.getMsg(1615,&quot;Error parsing update file, state:&quot;)+&quot; &quot;+state+&quot;, waypoint: &quot;+ chD.wayPoint;
+		}catch (Exception e){ // here should be used the correct exception
+			if (chD != null)	finalMessage = MyLocale.getMsg(1615,&quot;Error parsing update file, state:&quot;)+&quot; &quot;+state+&quot;, waypoint: &quot;+ chD.getWayPoint();
 			else finalMessage = MyLocale.getMsg(1615,&quot;Error parsing update file, state:&quot;)+&quot; &quot;+state+&quot;, waypoint: &lt;unkown&gt;&quot;;
 			success = false;
-			Vm.debug(&quot;Parse error: &quot; + state + &quot; Exception:&quot; + e.toString()+&quot;   &quot;+chD.ocCacheID);
+			Vm.debug(&quot;Parse error: &quot; + state + &quot; Exception:&quot; + e.toString()+&quot;   &quot;+chD.getOcCacheID());
 			e.printStackTrace();
 		} finally {
 			if (tmpFile != null) tmpFile.delete();
@@ -356,27 +356,27 @@
 			cacheID = atts.getValue(&quot;id&quot;);
 		}
 		if(name.equals(&quot;type&quot;)){
-			chD.type = CacheType.transOCType(new Integer(atts.getValue(&quot;id&quot;)).intValue()); 
+			chD.setType(CacheType.transOCType(new Integer(atts.getValue(&quot;id&quot;)).intValue())); 
 			return;
 		}
 		if(name.equals(&quot;status&quot;)){
-			if(atts.getValue(&quot;id&quot;).equals(&quot;1&quot;)) chD.is_available = true;
-			if(atts.getValue(&quot;id&quot;).equals(&quot;2&quot;)) chD.is_available = false;
+			if(atts.getValue(&quot;id&quot;).equals(&quot;1&quot;)) chD.setAvailable(true);
+			if(atts.getValue(&quot;id&quot;).equals(&quot;2&quot;)) chD.setAvailable(false);
 			if(atts.getValue(&quot;id&quot;).equals(&quot;3&quot;)) {
-				chD.is_archived = true;
-				chD.is_available = false;
+				chD.setArchived(true);
+				chD.setAvailable(false);
 			}
-			if(atts.getValue(&quot;id&quot;).equals(&quot;4&quot;)) chD.is_available = false;
+			if(atts.getValue(&quot;id&quot;).equals(&quot;4&quot;)) chD.setAvailable(false);
 			return;
 		}
 		if(name.equals(&quot;size&quot;)){
-			chD.CacheSize = transSize(atts.getValue(&quot;id&quot;));
+			chD.setCacheSize(transSize(atts.getValue(&quot;id&quot;)));
 			return;
 		}
 
 		if(name.equals(&quot;waypoints&quot;)){
-			chD.wayPoint = atts.getValue(&quot;oc&quot;);
-			if (chD.wayPoint.length()==0) throw new IllegalArgumentException(&quot;empty waypointname&quot;); // this should not happen - it is likey a bug in opencaching.de / it happens on 27-12-2006 on cache OC143E
+			chD.setWayPoint(atts.getValue(&quot;oc&quot;));
+			if (chD.getWayPoint().length()==0) throw new IllegalArgumentException(&quot;empty waypointname&quot;); // this should not happen - it is likey a bug in opencaching.de / it happens on 27-12-2006 on cache OC143E
 			return;
 		}
 
@@ -388,7 +388,7 @@
 		}
 
 		if (name.equals(&quot;desc&quot;)){
-			chD.is_HTML = atts.getValue(&quot;html&quot;).equals(&quot;1&quot;)?true:false;
+			chD.setHTML(atts.getValue(&quot;html&quot;).equals(&quot;1&quot;)?true:false);
 		}
 
 		if (name.equals(&quot;language&quot;) &amp;&amp; !atts.getValue(&quot;id&quot;).equals(&quot;DE&quot;)){
@@ -412,7 +412,7 @@
 				logIcon = GPXImporter.typeText2Image(&quot;Found&quot;);
 				break;
 			case 2:	logIcon = GPXImporter.typeText2Image(&quot;Not Found&quot;); 
-			chD.noFindLogs += 1;
+			chD.setNoFindLogs(chD.getNoFindLogs()+1);
 			break;
 			case 3: logIcon = GPXImporter.typeText2Image(&quot;Note&quot;);
 			}
@@ -427,25 +427,25 @@
 
 	private void endCache(String name){
 		if (name.equals(&quot;cache&quot;)){
-			chD.lastSyncOC = dateOfthisSync.format(&quot;yyyyMMddHHmmss&quot;);
+			chD.setLastSyncOC(dateOfthisSync.format(&quot;yyyyMMddHHmmss&quot;));
 			int index;
-			index = searchWpt(chD.wayPoint);
+			index = searchWpt(chD.getWayPoint());
 			if (index == -1){
-				chD.is_new = true;
+				chD.setNew(true);
 				CacheHolder ch = new CacheHolder(chD);
 				ch.details = chD;
 				cacheDB.add(ch);
 				ch.detailsAdded();
 				Integer indexInt = new Integer(cacheDB.size()-1);
-				DBindexWpt.put(chD.wayPoint, indexInt);
-				DBindexID.put(chD.ocCacheID, indexInt);
+				DBindexWpt.put(chD.getWayPoint(), indexInt);
+				DBindexID.put(chD.getOcCacheID(), indexInt);
 			}
 			// update (overwrite) data
 			else {
-				chD.is_new = false;
+				chD.setNew(false);
 				cacheDB.set(index, new CacheHolder(chD));
 				// save ocCacheID, in case, the previous data is from GPX
-				DBindexID.put(chD.ocCacheID, new Integer(index));
+				DBindexID.put(chD.getOcCacheID(), new Integer(index));
 			}
 			// clear data (picture, logs) if we do a complete Update
 			if (incUpdate == false){
@@ -463,18 +463,18 @@
 		}
 		if(name.equals(&quot;id&quot;)){ // &lt;/id&gt;
 			chD = getHolder(strData); // Allocate a new CacheHolder object
-			chD.ocCacheID=strData;
+			chD.setOcCacheID(strData);
 			chD.URL = ocSeekUrl + cacheID;
 			return;
 		}
 
 		if(name.equals(&quot;name&quot;)){
-			chD.CacheName = strData;
+			chD.setCacheName(strData);
 			return;
 		}
 		if(name.equals(&quot;userid&quot;)) {
-			chD.CacheOwner = strData;
-			if(chD.CacheOwner.equalsIgnoreCase(pref.myAlias) || (pref.myAlias2.length()&gt;0 &amp;&amp; chD.CacheOwner.equalsIgnoreCase(pref.myAlias2))) chD.is_owned = true;
+			chD.setCacheOwner(strData);
+			if(chD.getCacheOwner().equalsIgnoreCase(pref.myAlias) || (pref.myAlias2.length()&gt;0 &amp;&amp; chD.getCacheOwner().equalsIgnoreCase(pref.myAlias2))) chD.setOwned(true);
 			return;
 		}
 
@@ -488,15 +488,15 @@
 			return;
 		}
 		if(name.equals(&quot;difficulty&quot;)) {
-			chD.hard = strData;
+			chD.setHard(strData);
 			return;
 		}
 		if(name.equals(&quot;terrain&quot;)) {
-			chD.terrain = strData;
+			chD.setTerrain(strData);
 			return;
 		}
 		if(name.equals(&quot;datehidden&quot;)) {
-			chD.DateHidden = strData.substring(0,10); //Date;
+			chD.setDateHidden(strData.substring(0,10)); //Date;
 			return;
 		}
 		if (name.equals(&quot;country&quot;)){
@@ -509,7 +509,7 @@
 
 		if (!ignoreDesc){
 			if (name.equals(&quot;cachedesc&quot;)){
-				if (pref.downloadPicsOC &amp;&amp; chD.is_HTML) {
+				if (pref.downloadPicsOC &amp;&amp; chD.is_HTML()) {
 					String fetchUrl, imgTag, imgAltText;
 					Regex imgRegexUrl = new Regex(&quot;(&lt;img[^&gt;]*src=[\&quot;\']([^&gt;^\&quot;^\']*)[^&gt;]*&gt;|&lt;img[^&gt;]*src=([^&gt;^\&quot;^\'^ ]*)[^&gt;]*&gt;)&quot;); //  Ergebnis enth&#228;lt keine Anf&#252;hrungszeichen
 					Regex imgRegexAlt = new Regex(&quot;(?:alt=[\&quot;\']([^&gt;^\&quot;^\']*)|alt=([^&gt;^\&quot;^\'^ ]*))&quot;); // get alternative text for Pic
@@ -522,7 +522,7 @@
 						fetchUrl=imgRegexUrl.stringMatched(2); // URL in Anf&#252;hrungszeichen in (2) falls ohne in (3) Ergebnis ist auf jeden Fall ohne Anf&#252;hrungszeichen 
 						if (fetchUrl==null) { fetchUrl=imgRegexUrl.stringMatched(3); }
 						if (fetchUrl==null) { // TODO Fehler ausgeben: nicht abgedeckt ist der Fall, dass in einem Cache Links auf Bilder mit unterschiedlichen URL, aber gleichem Dateinamen sind.
-							inf.addWarning(MyLocale.getMsg(1617, &quot;Ignoriere Fehler in html-Cache-Description: \&quot;&lt;img\&quot; without \&quot;src=\&quot; in cache &quot;+chD.wayPoint));
+							inf.addWarning(MyLocale.getMsg(1617, &quot;Ignoriere Fehler in html-Cache-Description: \&quot;&lt;img\&quot; without \&quot;src=\&quot; in cache &quot;+chD.getWayPoint()));
 							continue;
 						}
 						inf.setInfo(MyLocale.getMsg(1611,&quot;Importing cache description:&quot;)+&quot; &quot; + numDescImported + &quot;\n&quot;+MyLocale.getMsg(1620, &quot;downloading embedded images: &quot;) + numDownloaded++);
@@ -547,7 +547,7 @@
 			if (name.equals(&quot;cacheid&quot;)){
 				// load cachedata
 				chD = getHolder(strData);
-				chD.is_update = true;
+				chD.setUpdated(true);
 				return;
 			}
 
@@ -557,7 +557,7 @@
 			}
 
 			if (name.equals(&quot;desc&quot;)){ // &lt;/desc&gt;
-				if (chD.is_HTML)	chD.LongDescription +=SafeXML.cleanback(strData);
+				if (chD.is_HTML())	chD.LongDescription +=SafeXML.cleanback(strData);
 				else chD.LongDescription +=strData;
 				return;
 			}
@@ -569,7 +569,7 @@
 	}
 
 	private String createPicFilename(String fetchURL) {
-		String fileName = chD.wayPoint + &quot;_&quot; + fetchURL.substring(fetchURL.lastIndexOf(&quot;/&quot;)+1);
+		String fileName = chD.getWayPoint() + &quot;_&quot; + fetchURL.substring(fetchURL.lastIndexOf(&quot;/&quot;)+1);
 		return Common.ClearForFileName(fileName);
 	}
 	
@@ -591,10 +591,10 @@
 					}
 				}
 			} catch (IOException e) {
-				String ErrMessage = new String (MyLocale.getMsg(1618,&quot;Ignoring error in cache: &quot;) + chD.wayPoint + &quot;: ignoring IOException: &quot;+e.getMessage()+ &quot; while downloading picture:&quot;+fileName+&quot; from URL:&quot;+fetchURL); 
+				String ErrMessage = new String (MyLocale.getMsg(1618,&quot;Ignoring error in cache: &quot;) + chD.getWayPoint() + &quot;: ignoring IOException: &quot;+e.getMessage()+ &quot; while downloading picture:&quot;+fileName+&quot; from URL:&quot;+fetchURL); 
 				if (e.getMessage().toLowerCase().equalsIgnoreCase(&quot;could not connect&quot;) ||
 						e.getMessage().equalsIgnoreCase(&quot;unkown host&quot;)) { // is there a better way to find out what happened?
-					ErrMessage = MyLocale.getMsg(1618,&quot;Ignoring error in cache: &quot;)+chD.CacheName + &quot; (&quot;+chD.wayPoint+&quot;)&quot;+MyLocale.getMsg(1619,&quot;: could not download image from URL: &quot;)+fetchURL;
+					ErrMessage = MyLocale.getMsg(1618,&quot;Ignoring error in cache: &quot;)+chD.getCacheName() + &quot; (&quot;+chD.getWayPoint()+&quot;)&quot;+MyLocale.getMsg(1619,&quot;: could not download image from URL: &quot;)+fetchURL;
 				} 
 				inf.addWarning(&quot;\n&quot;+ErrMessage);
 				//(new MessageBox(MyLocale.getMsg(144, &quot;Warning&quot;), ErrMessage, MessageBox.OKB)).exec();
@@ -602,7 +602,7 @@
 				e.printStackTrace();
 			}
 		} catch (MalformedURLException e) {
-			String ErrMessage = new String (MyLocale.getMsg(1618,&quot;Ignoring error in cache: &quot;) + chD.wayPoint + &quot;: ignoring MalformedUrlException: &quot; + e.getMessage()+ &quot; while downloading from URL:&quot; + fetchURL); 
+			String ErrMessage = new String (MyLocale.getMsg(1618,&quot;Ignoring error in cache: &quot;) + chD.getWayPoint() + &quot;: ignoring MalformedUrlException: &quot; + e.getMessage()+ &quot; while downloading from URL:&quot; + fetchURL); 
 			inf.addWarning(&quot;\n&quot;+ErrMessage);
 			pref.log(ErrMessage);
 		}
@@ -642,8 +642,8 @@
 		if (name.equals(&quot;cachelog&quot;)){ // &lt;/cachelog&gt;
 			chD.CacheLogs.merge(new Log(logIcon, logDate, logFinder, logData, loggerRecommended));
 			if((logFinder.toLowerCase().compareTo(user) == 0 || logFinder.equalsIgnoreCase(pref.myAlias2)) &amp;&amp; logtype == 1) {
-						chD.CacheStatus=logDate;
-						chD.is_found=true;
+						chD.setCacheStatus(logDate);
+						chD.setFound(true);
 						chD.OwnLogId = logId;
 						chD.OwnLog = new Log(logIcon, logDate, logFinder, logData, loggerRecommended);
 			}
@@ -678,7 +678,7 @@
 		CharArray realurl = new CharArray();
 		ByteArray daten = UrlFetcher.fetchByteArray(addr, realurl);
 		String address = realurl.toString();
-		if (chD != null) fileName = chD.wayPoint + &quot;_&quot; + Common.ClearForFileName(address.substring(address.lastIndexOf(&quot;/&quot;)+1));
+		if (chD != null) fileName = chD.getWayPoint() + &quot;_&quot; + Common.ClearForFileName(address.substring(address.lastIndexOf(&quot;/&quot;)+1));
 		// else fileName = Common.ClearForFileName(address.substring(address.lastIndexOf(&quot;/&quot;)+1));
 
 		//save file

Modified: trunk/src/CacheWolf/OCXMLImporterScreen.java
===================================================================
--- trunk/src/CacheWolf/OCXMLImporterScreen.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/OCXMLImporterScreen.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -39,11 +39,11 @@
 			String dist1;
 			String dist2;
 			if ((options &amp; ISGC) &gt; 0) {
-				dist1 = Global.getProfile().distGC;
-				dist2 = Global.getProfile().distOC;
+				dist1 = Global.getProfile().getDistGC();
+				dist2 = Global.getProfile().getDistOC();
 			} else {
-				dist1 = Global.getProfile().distOC;
-				dist2 = Global.getProfile().distGC;
+				dist1 = Global.getProfile().getDistOC();
+				dist2 = Global.getProfile().getDistGC();
 			}
 			if ( dist1.equals(&quot;&quot;) || dist1.equals(&quot;0&quot;) || dist1.equals(&quot;0.0&quot;) ) {
 				dist1 = dist2;

Modified: trunk/src/CacheWolf/Parser.java
===================================================================
--- trunk/src/CacheWolf/Parser.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/Parser.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -667,7 +667,7 @@
     	if (ci&lt;0) return;
     	// If it is an addi, find its main cache
     	if (((CacheHolder) Global.getProfile().cacheDB.get(ci)).isAddiWpt()) {
-    		waypointName=((CacheHolder) Global.getProfile().cacheDB.get(ci)).mainCache.wayPoint;
+    		waypointName=((CacheHolder) Global.getProfile().cacheDB.get(ci)).mainCache.getWayPoint();
     	}
    		int nStages=-1;
     	if (nargs==1) {
@@ -716,17 +716,17 @@
 				for (int j=0; j&lt;ch.addiWpts.getCount();j++){
 					addiWpt = (CacheHolder)ch.addiWpts.get(j);
 					op.append(&quot;IF $&quot;);
-					op.append(addiWpt.wayPoint);
+					op.append(addiWpt.getWayPoint());
 					op.append(&quot;=\&quot;\&quot; THEN\n   $&quot;);
-					op.append(addiWpt.wayPoint);
+					op.append(addiWpt.getWayPoint());
 					op.append(&quot;=\&quot;\&quot;&quot;);
 					//op.append(addiWpt.pos.toString());
 					op.append(&quot;\n   \&quot;Punkt &quot;);
-					op.append(addiWpt.wayPoint.substring(0,2));
+					op.append(addiWpt.getWayPoint().substring(0,2));
 					op.append(&quot; [&quot;);
-					op.append(addiWpt.CacheName);
+					op.append(addiWpt.getCacheName());
 					op.append(&quot;] = \&quot; $&quot;);
-					op.append(addiWpt.wayPoint);
+					op.append(addiWpt.getWayPoint());
 					CacheHolderDetail chD=new CacheHolderDetail(addiWpt);
 					try {
 						chD.readCache(Global.getProfile().dataDir);
@@ -734,7 +734,7 @@
 					if (chD.LongDescription.trim().length()&gt;0)
 						op.append(&quot;\n   \&quot;&quot;+STRreplace.replace(chD.LongDescription,&quot;\&quot;&quot;,&quot;\&quot;\&quot;&quot;)+&quot;\&quot;&quot;);
 					op.append(&quot;\n   goto($&quot;);
-					op.append(addiWpt.wayPoint);
+					op.append(addiWpt.getWayPoint());
 					op.append(&quot;); STOP\nENDIF\n\n&quot;);
 				}
 				Global.mainTab.solverP.mText.appendText(op.toString(),true);
@@ -1101,12 +1101,11 @@
     	if (ci &gt;= 0) return false;
 
 		CacheHolder ch = new CacheHolder();
-		ch.wayPoint = wayPoint;
-		ch.type = type;
-		ch.CacheSize = &quot;None&quot;;
-		ch.CacheName= name;
+		ch.setWayPoint(wayPoint);
+		ch.setType(type);
+		ch.setCacheSize(&quot;None&quot;);
+		ch.setCacheName(name);
 
-		Global.getProfile().hasUnsavedChanges=true;
 		Global.getProfile().setAddiRef(ch);
 
 		Global.mainTab.cacheDB.add(ch);

Modified: trunk/src/CacheWolf/Preferences.java
===================================================================
--- trunk/src/CacheWolf/Preferences.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/Preferences.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -651,8 +651,8 @@
 				if (code==-1) return false; // Cancel pressed
 				CWPoint savecenter = new CWPoint(prof.centre);
 				prof.clearProfile();
-				prof.centre = savecenter;
-				prof.hasUnsavedChanges = true;
+				prof.setCenterCoords(savecenter);
+				//prof.hasUnsavedChanges = true;
 				//curCentrePt.set(0,0); // No centre yet
 				lastProfile=f.newSelectedProfile;
 			}

Modified: trunk/src/CacheWolf/Profile.java
===================================================================
--- trunk/src/CacheWolf/Profile.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/Profile.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -32,45 +32,51 @@
 	 *  the index.xml and cache files live. (Excuse the English spelling of centre)     */
 	public String name=new String();
 	/** This is the directory for the profile. It contains a closing /.   	 */
-	public String dataDir=new String();  
+	public String dataDir = new String();
+
 	/** Last sync date for opencaching caches */
-	public String last_sync_opencaching = new String();
+	private String last_sync_opencaching = new String();
+
 	/** Distance for opencaching caches */
-	public String distOC = new String();
+	private String distOC = new String();
+
 	/** Distance for geocaching caches */
-	public String distGC = new String();
+	private String distGC = new String();
 
 	public final static boolean SHOW_PROGRESS_BAR = true;
 	public final static boolean NO_SHOW_PROGRESS_BAR = false;
 
 	// When extending the filter check &quot;normaliseFilters&quot;
 	// which ensures backward compatibility. Normally no change should be needed
-	public final static String FILTERTYPE=&quot;1111111111111111111&quot;;
-	public final static String FILTERROSE=&quot;1111111111111111&quot;;
-	public final static String FILTERVAR=&quot;11111111&quot;;
-	public final static String FILTERSIZE=&quot;111111&quot;;
-	public String filterType = new String(FILTERTYPE);
-	public String filterRose = new String(FILTERROSE);
-	public String filterSize = new String(FILTERSIZE);
-	//filter settings for archived ... owner (section) in filterscreen
-	public String filterVar = new String(FILTERVAR);
-	public String filterDist=new String(&quot;L&quot;);
-	public String filterDiff=new String(&quot;L&quot;);
-	public String filterTerr=new String(&quot;L&quot;);
+	public final static String FILTERTYPE = &quot;1111111111111111111&quot;;
+	public final static String FILTERROSE = &quot;1111111111111111&quot;;
+	public final static String FILTERVAR = &quot;11111111&quot;;
+	public final static String FILTERSIZE = &quot;111111&quot;;
+
+	private String filterType = new String(FILTERTYPE);
+	private String filterRose = new String(FILTERROSE);
+	private String filterSize = new String(FILTERSIZE);
+
+	// filter settings for archived ... owner (section) in filterscreen
+	private String filterVar = new String(FILTERVAR);
+	private String filterDist = new String(&quot;L&quot;);
+	private String filterDiff = new String(&quot;L&quot;);
+	private String filterTerr = new String(&quot;L&quot;);
+
 	// Saved filterstatus - is only refreshed from class Filter when Profile is saved
-	public int filterActive=Filter.FILTER_INACTIVE;
-	public boolean filterInverted=false;
-	public boolean showBlacklisted = false;
+	private int filterActive = Filter.FILTER_INACTIVE;
+	private boolean filterInverted = false;
+	private boolean showBlacklisted = false;
 
-	public long filterAttrYes = 0l;
-	public long filterAttrNo = 0l;
-	public int filterAttrChoice = 0;
+	private long filterAttrYes = 0l;
+	private long filterAttrNo = 0l;
+	private int filterAttrChoice = 0;
 
 	public boolean selectionChanged = true; // (&quot;H&#228;ckchen&quot;) used by movingMap to get to knao if it should update the caches in the map 
 	/** True if the profile has been modified and not saved
 	 * The following modifications set this flag: New profile centre, Change of waypoint data 
 	 */
-	public boolean hasUnsavedChanges = false;
+	private boolean hasUnsavedChanges = false;
 	public boolean byPassIndexActive = false;
 
 	//TODO Add other settings, such as max. number of logs to spider
@@ -83,18 +89,50 @@
 	public Profile(){
 	}
 
+
+	/**
+	 * Returns &lt;code&gt;true&lt;/code&gt; if profile needs to be changed when profile is left. Returns
+	 * &lt;code&gt;false&lt;/code&gt; if no relevant changes have been made.
+	 * 
+	 * @return hasUnsavedChanges
+	 */
+	public boolean hasUnsavedChanges() {
+		return hasUnsavedChanges;
+	}
+
+	/**
+	 * Remember that profile needs to be saved. Flag is set &lt;code&gt;true&lt;/code&gt; when parameter is
+	 * true, but it's not set to &lt;code&gt;false&lt;/code&gt; when parameter is &lt;code&gt;false&lt;/code&gt;.&lt;br&gt;
+	 * This is only done internally on saving the cache.
+	 * 
+	 * @param hasUnsavedChanges
+	 *            the hasUnsavedChanges to set
+	 */
+	public void notifyUnsavedChanges(boolean changes) {
+		hasUnsavedChanges = hasUnsavedChanges || changes;
+	}
+	
+	public void resetUnsavedChanges() {
+		hasUnsavedChanges = false;
+	}
+
 	public void clearProfile() {
 		CacheHolder.removeAllDetails();
 		cacheDB.clear();
-		centre.set(-361,-361);
-		name=&quot;&quot;;
-		dataDir=&quot;&quot;;  
-		last_sync_opencaching = &quot;&quot;;
-		distOC = &quot;&quot;;
-		distGC = &quot;&quot;;
-		hasUnsavedChanges=false;
+		centre.set(-361, -361);
+		name = &quot;&quot;;
+		dataDir = &quot;&quot;;
+		setLast_sync_opencaching(&quot;&quot;);
+		setDistOC(&quot;&quot;);
+		setDistGC(&quot;&quot;);
+		resetUnsavedChanges();
 	}
 
+	public void setCenterCoords(CWPoint coords) {
+		this.notifyUnsavedChanges(coords.equals(this.centre));
+		this.centre.set(coords);
+	}
+	
 	/**
 	 *	Method to save the index.xml file that holds the total information
 	 *	on available caches in the database. The database is nothing else
@@ -145,32 +183,32 @@
 //				detfile.print(&quot;    &lt;CENTRE lat=\&quot;&quot;+savedCentre.getNSLetter() + &quot; &quot; + savedCentre.getLatDeg(CWPoint.CW) + &quot;&deg; &quot; + savedCentre.getLatMin(CWPoint.CW)+ &quot;\&quot; &quot;+
 //				&quot;long=\&quot;&quot;+savedCentre.getEWLetter() + &quot; &quot; + savedCentre.getLonDeg(CWPoint.CW) + &quot;&deg; &quot; + savedCentre.getLonMin(CWPoint.CW)+&quot;\&quot;/&gt;\n&quot;);
 				detfile.print(&quot;    &lt;CENTRE lat=\&quot;&quot;+savedCentre.latDec+&quot;\&quot; lon=\&quot;&quot;+savedCentre.lonDec+&quot;\&quot;/&gt;\n&quot;);
-			if(last_sync_opencaching == null || last_sync_opencaching.endsWith(&quot;null&quot;) || last_sync_opencaching.equals(&quot;&quot;)){
-				last_sync_opencaching = &quot;20050801000000&quot;;
+			if(getLast_sync_opencaching() == null || getLast_sync_opencaching().endsWith(&quot;null&quot;) || getLast_sync_opencaching().equals(&quot;&quot;)){
+				setLast_sync_opencaching(&quot;20050801000000&quot;);
 			}
-			if(distOC == null || distOC.endsWith(&quot;null&quot;) || distOC.equals(&quot;&quot;)){
-				distOC = &quot;0.0&quot;;
+			if (getDistOC() == null || getDistOC().endsWith(&quot;null&quot;) || getDistOC().equals(&quot;&quot;)) {
+				setDistOC(&quot;0.0&quot;);
 			}
-			if(distGC == null || distGC.endsWith(&quot;null&quot;) || distGC.equals(&quot;&quot;)){
-				distGC = &quot;0.0&quot;;
+			if (getDistGC() == null || getDistGC().endsWith(&quot;null&quot;) || getDistGC().equals(&quot;&quot;)) {
+				setDistGC(&quot;0.0&quot;);
 			}
 
-			detfile.print(&quot;    &lt;FILTER status = \&quot;&quot;+filterActive+(filterInverted?&quot;T&quot;:&quot;F&quot;)+ 
-					&quot;\&quot; rose = \&quot;&quot;+filterRose+&quot;\&quot; type = \&quot;&quot;+filterType+
-					&quot;\&quot; var = \&quot;&quot;+filterVar+&quot;\&quot; dist = \&quot;&quot;+filterDist.replace('&quot;',' ')+&quot;\&quot; diff = \&quot;&quot;+
-					filterDiff+&quot;\&quot; terr = \&quot;&quot;+filterTerr+&quot;\&quot; size = \&quot;&quot;+filterSize+&quot;\&quot; attributesYes = \&quot;&quot;+filterAttrYes+
-					&quot;\&quot; attributesNo = \&quot;&quot;+filterAttrNo+&quot;\&quot; attributesChoice = \&quot;&quot;+filterAttrChoice+&quot;\&quot; showBlacklist = \&quot;&quot;+showBlacklisted+&quot;\&quot; /&gt;\n&quot;);
-			detfile.print(&quot;    &lt;SYNCOC date = \&quot;&quot;+last_sync_opencaching+&quot;\&quot; dist = \&quot;&quot;+distOC+&quot;\&quot;/&gt;\n&quot;);
-			detfile.print(&quot;    &lt;SPIDERGC dist = \&quot;&quot;+distGC+&quot;\&quot;/&gt;\n&quot;);
-			int size=cacheDB.size();
-			for(int i = 0; i&lt;size;i++){
-				if(showprogress){
-					h.progress = (float)i/(float)size;
+			detfile.print(&quot;    &lt;FILTER status = \&quot;&quot;+getFilterActive()+(isFilterInverted()?&quot;T&quot;:&quot;F&quot;)+ 
+					&quot;\&quot; rose = \&quot;&quot;+getFilterRose()+&quot;\&quot; type = \&quot;&quot;+getFilterType()+
+					&quot;\&quot; var = \&quot;&quot;+getFilterVar()+&quot;\&quot; dist = \&quot;&quot;+getFilterDist().replace('&quot;',' ')+&quot;\&quot; diff = \&quot;&quot;+
+					getFilterDiff()+&quot;\&quot; terr = \&quot;&quot;+getFilterTerr()+&quot;\&quot; size = \&quot;&quot;+getFilterSize()+&quot;\&quot; attributesYes = \&quot;&quot;+getFilterAttrYes()+
+					&quot;\&quot; attributesNo = \&quot;&quot;+getFilterAttrNo()+&quot;\&quot; attributesChoice = \&quot;&quot;+getFilterAttrChoice()+&quot;\&quot; showBlacklist = \&quot;&quot;+showBlacklisted()+&quot;\&quot; /&gt;\n&quot;);
+			detfile.print(&quot;    &lt;SYNCOC date = \&quot;&quot;+getLast_sync_opencaching()+&quot;\&quot; dist = \&quot;&quot;+getDistOC()+&quot;\&quot;/&gt;\n&quot;);
+			detfile.print(&quot;    &lt;SPIDERGC dist = \&quot;&quot; + getDistGC() + &quot;\&quot;/&gt;\n&quot;);
+			int size = cacheDB.size();
+			for (int i = 0; i &lt; size; i++) {
+				if (showprogress) {
+					h.progress = (float) i / (float) size;
 					h.changed();
 				}
-				ch = (CacheHolder)cacheDB.get(i);
-				////Vm.debug(&quot;Saving: &quot; + ch.CacheName);
-				if(ch.wayPoint.length()&gt;0) { //TODO &amp;&amp; ch.LongDescription.equals(&quot;An Error Has Occured&quot;) == false){
+				ch = (CacheHolder) cacheDB.get(i);
+				// //Vm.debug(&quot;Saving: &quot; + ch.CacheName);
+				if (ch.getWayPoint().length() &gt; 0) { // TODO &amp;&amp; ch.LongDescription.equals(&quot;An
 /*					detfile.print(&quot;    &lt;CACHE name = \&quot;&quot;+SafeXML.clean(ch.CacheName)+&quot;\&quot; owner = \&quot;&quot;+SafeXML.clean(ch.CacheOwner)+
 							//&quot;\&quot; lat = \&quot;&quot;+ SafeXML.clean(ch.LatLon) +
 							&quot;\&quot; lat = \&quot;&quot;+ ch.pos.latDec + &quot;\&quot; lon = \&quot;&quot;+ch.pos.lonDec+
@@ -188,7 +226,7 @@
 			detfile.close();
 			if(showprogress) pbf.exit(0);
 		}
-		hasUnsavedChanges=false;
+		resetUnsavedChanges();
 	}
 
 	/**
@@ -196,16 +234,16 @@
 	 *	on available caches in the database. The database in nothing else
 	 *	than the collection of caches in a directory.
 	 */
-	public void readIndex(){
-		
+	public void readIndex() {
+
 		try {
 			selectionChanged = true;
-			boolean fmtDec=false;
-			char decSep=MyLocale.getDigSeparator().charAt(0);
-			char notDecSep=decSep=='.'?',':'.';
+			boolean fmtDec = false;
+			char decSep = MyLocale.getDigSeparator().charAt(0);
+			char notDecSep = decSep == '.' ? ',' : '.';
 			FileReader in = new FileReader(dataDir + &quot;index.xml&quot;);
 			in.readLine(); // &lt;?xml version= ...
-			String text=in.readLine(); // &lt;CACHELIST&gt;
+			String text = in.readLine(); // &lt;CACHELIST&gt;
 			if (text!=null &amp;&amp; text.indexOf(&quot;decimal&quot;)&gt;0) fmtDec=true;
 			Extractor ex = new Extractor(null, &quot; = \&quot;&quot;, &quot;\&quot; &quot;, 0, true);
 			
@@ -231,45 +269,45 @@
 					}	
 				} else if (text.indexOf(&quot;&lt;SYNCOC&quot;)&gt;=0) {
 					int start=text.indexOf(&quot;date = \&quot;&quot;)+8;
-					last_sync_opencaching=text.substring(start,text.indexOf(&quot;\&quot;&quot;,start));
+					setLast_sync_opencaching(text.substring(start,text.indexOf(&quot;\&quot;&quot;,start)));
 					start=text.indexOf(&quot;dist = \&quot;&quot;)+8;
-					distOC=text.substring(start,text.indexOf(&quot;\&quot;&quot;,start));
+					setDistOC(text.substring(start,text.indexOf(&quot;\&quot;&quot;,start)));
 				} else if (text.indexOf(&quot;&lt;SPIDERGC&quot;)&gt;=0) {
 					int start=text.indexOf(&quot;dist = \&quot;&quot;)+8;
-					distGC=text.substring(start,text.indexOf(&quot;\&quot;&quot;,start));
+					setDistGC(text.substring(start,text.indexOf(&quot;\&quot;&quot;,start)));
 				} else if (text.indexOf(&quot;&lt;FILTER&quot;)&gt;=0){
 					ex.setSource(text);
 					String temp=ex.findNext(); // Filter status is now first, need to deal with old versions which don't have filter status
 					if (temp.length()==2) {
 						// Compatibility with previous versions
 						if (temp.charAt(0)=='T') 
-							filterActive=Filter.FILTER_ACTIVE;
+							setFilterActive(Filter.FILTER_ACTIVE);
 						else
-							filterActive=Common.parseInt(temp.substring(0,1));
-						filterInverted=temp.charAt(1)=='T';
-						filterRose = ex.findNext();
+							setFilterActive(Common.parseInt(temp.substring(0,1)));
+						setFilterInverted(temp.charAt(1)=='T');
+						setFilterRose(ex.findNext());
 					} else 
-						filterRose = temp;
-					filterType = ex.findNext();
+						setFilterRose(temp);
+					setFilterType(ex.findNext());
 					//Need this to stay &quot;downward&quot; compatible. New type introduced
 					//if(filterType.length()&lt;=17) filterType = filterType + &quot;1&quot;;
 					//Vm.debug(&quot;fil len: &quot; +filterType.length());
 					//This is handled by &quot;normaliseFilters&quot; which is called at the end.
-					filterVar = ex.findNext();
-					filterDist = ex.findNext();
-					filterDiff = ex.findNext();
-					filterTerr = ex.findNext();
-					filterSize = ex.findNext();
+					setFilterVar(ex.findNext());
+					setFilterDist(ex.findNext());
+					setFilterDiff(ex.findNext());
+					setFilterTerr(ex.findNext());
+					setFilterSize(ex.findNext());
 					String attr = ex.findNext();
 					if (attr != null &amp;&amp; !attr.equals(&quot;&quot;))
-						filterAttrYes = Convert.parseLong(attr);
+						setFilterAttrYes(Convert.parseLong(attr));
 					attr = ex.findNext();
 					if (attr != null &amp;&amp; !attr.equals(&quot;&quot;))
-						filterAttrNo = Convert.parseLong(attr);
+						setFilterAttrNo(Convert.parseLong(attr));
 					attr = ex.findNext();
 					if (attr != null &amp;&amp; !attr.equals(&quot;&quot;))
-						filterAttrChoice = Convert.parseInt(attr);
-					showBlacklisted = new Boolean(ex.findNext()).booleanValue();
+						setFilterAttrChoice(Convert.parseInt(attr));
+					setShowBlacklisted(Boolean.valueOf(ex.findNext()).booleanValue());
 				}
 			}
 			in.close();
@@ -279,7 +317,6 @@
 			//Vm.debug(&quot;End  :&quot;+endT.format(&quot;H:mm:ss.SSS&quot;));	
 			// Build references between caches and addi wpts
 			buildReferences();
-			hasUnsavedChanges = false;
 		} catch (FileNotFoundException e) {
 			Global.getPref().log(&quot;index.xml not found in directory &quot;+dataDir); // Normal when profile is opened for first time
 			//e.printStackTrace();
@@ -287,6 +324,7 @@
 			Global.getPref().log(&quot;Problem reading index.xml in dir: &quot;+dataDir,e,true); 
 		}
 		normaliseFilters();
+		resetUnsavedChanges();
 	}
 
 	/** Restore the filter to the values stored in this profile 
@@ -298,19 +336,19 @@
 	}
 	
 	void restoreFilter(boolean clearIfInactive) {
-		boolean inverted=filterInverted; // Save it as doFilter will clear filterInverted
+		boolean inverted=isFilterInverted(); // Save it as doFilter will clear filterInverted
 		Filter flt=new Filter();
-		if (filterActive==Filter.FILTER_ACTIVE) {
+		if (getFilterActive()==Filter.FILTER_ACTIVE) {
 			flt.setFilter();
 			flt.doFilter();
 			if (inverted) {
 				flt.invertFilter();
-				filterInverted=true; // Needed because previous line inverts filterInverted
+				setFilterInverted(true); // Needed because previous line inverts filterInverted
 			}
-		} else if (filterActive==Filter.FILTER_CACHELIST) {
+		} else if (getFilterActive()==Filter.FILTER_CACHELIST) {
 			Global.mainForm.cacheList.applyCacheList();
 			//flt.filterActive=filterActive;
-		} else if (filterActive==Filter.FILTER_INACTIVE) {
+		} else if (getFilterActive()==Filter.FILTER_INACTIVE) {
 			if (clearIfInactive) {
 				flt.clearFilter();
 			}
@@ -320,26 +358,21 @@
 	void checkBlacklistStatus() {
 		Vector cacheDB=Global.getProfile().cacheDB;
 		CacheHolder ch;
-		boolean filterChanged = false;
 		for(int i = cacheDB.size()-1; i &gt;=0 ; i--){
 			ch = (CacheHolder)cacheDB.get(i);
-			if (ch.is_black^showBlacklisted) {
-				ch.is_filtered = true;
-				filterChanged = true;
+			if (ch.is_black() ^ showBlacklisted()) {
+				ch.setFiltered(true);
+				selectionChanged = true;
 			}
 		}
-		if ( filterChanged ) {
-			selectionChanged = true;
-			hasUnsavedChanges=true;			
-		}
 	}
 
-	public int getCacheIndex(String wp){
+	public int getCacheIndex(String wp) {
 		int retval = -1;
 		CacheHolder ch;
-		for(int i = 0; i&lt;cacheDB.size();i++){
-			ch = (CacheHolder)cacheDB.get(i);
-			if(ch.wayPoint.equals(wp)){
+		for (int i = 0; i &lt; cacheDB.size(); i++) {
+			ch = (CacheHolder) cacheDB.get(i);
+			if (ch.getWayPoint().equals(wp)) {
 				return i;
 			}
 		}
@@ -347,71 +380,75 @@
 	}
 
 	/** Get a unique name for a new waypoint */
-	//TODO Make more efficient
-	public String getNewWayPointName(){
-		String strWp=null;
-		long  lgWp=1;
-		int s = cacheDB.size(); 
-		if (s ==0 )
+	// TODO Make more efficient
+	public String getNewWayPointName() {
+		String strWp = null;
+		long lgWp = 1;
+		int s = cacheDB.size();
+		if (s == 0)
 			return &quot;CW0000&quot;;
-		//Create new waypoint,look if not in db
-		for(int i = 0;i &lt; s;i++){
+		// Create new waypoint,look if not in db
+		for (int i = 0; i &lt; s; i++) {
 			strWp = &quot;CW&quot; + MyLocale.formatLong(lgWp, &quot;0000&quot;);
-			if(((CacheHolder)cacheDB.get(i)).wayPoint.indexOf(strWp) &gt;=0 ){
-				//waypoint exists in database
+			if (((CacheHolder) cacheDB.get(i)).getWayPoint().indexOf(strWp) &gt;= 0) {
+				// waypoint exists in database
 				lgWp++;
 				i = -1; // Because i++ will be executed next, so we start the loop with 0
 			}
 		}
 		return strWp;
 	}
-	
+
 	/**
 	 * 
 	 * @param forcache maincache
 	 * @return
 	 */
 	public String getNewAddiWayPointName(String forcache) {
-		int wptNo=-1;
+		int wptNo = -1;
 		String waypoint;
 		do {
-			waypoint=MyLocale.formatLong(++wptNo,&quot;00&quot;)+forcache.substring(2);
-		} while (Global.getProfile().getCacheIndex(waypoint)&gt;=0);
+			waypoint = MyLocale.formatLong(++wptNo, &quot;00&quot;) + forcache.substring(2);
+		} while (Global.getProfile().getCacheIndex(waypoint) &gt;= 0);
 		return waypoint;
 	}
 
 	/**
 	 * Call this after getNewAddiWayPointName to set the references between main and addi correctly
+	 * 
 	 * @param ch
 	 */
 	public void setAddiRef(CacheHolder ch) {
-		String mainwpt = ch.wayPoint.substring(2);
-		int mainindex = getCacheIndex(&quot;GC&quot;+mainwpt);
-		if (mainindex &lt; 0) mainindex = getCacheIndex(&quot;OC&quot;+mainwpt);
-		if (mainindex &lt; 0) mainindex = getCacheIndex(&quot;CW&quot;+mainwpt);
-		if (mainindex &lt; 0) throw new IllegalArgumentException(&quot;no main cache found for: &quot; + ch.wayPoint);
-		CacheHolder mainch = (CacheHolder)cacheDB.get(mainindex);
+		String mainwpt = ch.getWayPoint().substring(2);
+		int mainindex = getCacheIndex(&quot;GC&quot; + mainwpt);
+		if (mainindex &lt; 0)
+			mainindex = getCacheIndex(&quot;OC&quot; + mainwpt);
+		if (mainindex &lt; 0)
+			mainindex = getCacheIndex(&quot;CW&quot; + mainwpt);
+		if (mainindex &lt; 0)
+			throw new IllegalArgumentException(&quot;no main cache found for: &quot; + ch.getWayPoint());
+		CacheHolder mainch = (CacheHolder) cacheDB.get(mainindex);
 		mainch.addiWpts.add(ch);
 		ch.mainCache = mainch;
 	}
 
-
 	public String toString() {
 		return &quot;Profile: Name=&quot;+name+&quot;\nCentre=&quot;+centre.toString()+&quot;\ndataDir=&quot;+dataDir+&quot;\nlastSyncOC=&quot;+
-		last_sync_opencaching+&quot;\ndistOC=&quot;+distOC+&quot;\ndistGC=&quot;+distGC;
+		getLast_sync_opencaching()+&quot;\ndistOC=&quot;+getDistOC()+&quot;\ndistGC=&quot;+getDistGC();
 	}
 
 	public void setSelectForAll(boolean selectStatus) {
 		selectionChanged = true;
 		CacheHolder ch;
-		for(int i = cacheDB.size()-1; i &gt;=	0; i--){
-			ch = (CacheHolder)cacheDB.get(i);
-			if (ch.is_filtered == false) ch.is_Checked = selectStatus;
+		for (int i = cacheDB.size() - 1; i &gt;= 0; i--) {
+			ch = (CacheHolder) cacheDB.get(i);
+			if (ch.is_filtered() == false)
+				ch.is_Checked = selectStatus;
 		}
-	} 
+	}
 
+	public int numCachesInArea; // only valid after calling getSourroundingArea
 
-	public int numCachesInArea; // only valid after calling getSourroundingArea
 	public Area getSourroundingArea(boolean onlyOfSelected) {
 		if (cacheDB == null || cacheDB.size() == 0) return null;
 		CacheHolder ch;
@@ -420,7 +457,7 @@
 		CWPoint tmpca = new CWPoint();
 		numCachesInArea = 0;
 		boolean isAddi = false;
-		for (int i=cacheDB.size()-1; i &gt;= 0; i--) {
+		for (int i = cacheDB.size() - 1; i &gt;= 0; i--) {
 			ch = (CacheHolder) cacheDB.get(i);
 			if (!onlyOfSelected || ch.is_Checked) {
 				if (ch.pos == null) { // this can not happen
@@ -441,7 +478,7 @@
 				}
 			}
 		}
-		if (topleft != null &amp;&amp; bottomright != null) 
+		if (topleft != null &amp;&amp; bottomright != null)
 			return new Area(topleft, bottomright);
 		else return null;
 	}
@@ -477,25 +514,25 @@
 
 		Integer index;
 		// Build index for faster search and clear all references
-		for(int i = cacheDB.size() -1; i &gt;= 0;i--){
-			ch = (CacheHolder)cacheDB.get(i);
+		for (int i = cacheDB.size() - 1; i &gt;= 0; i--) {
+			ch = (CacheHolder) cacheDB.get(i);
 			ch.addiWpts.clear();
 			ch.mainCache = null;
 			// if (ch.wayPoint.startsWith(&quot;GC&quot;)) // Only put potential master caches into the index
-				dbIndex.put(ch.wayPoint, new Integer(i));
+			dbIndex.put(ch.getWayPoint(), new Integer(i));
 		}
 		// Build references
 		int max = cacheDB.size();
-		for(int i =  0; i &lt; max ;i++){
-			ch = (CacheHolder)cacheDB.get(i);
+		for (int i = 0; i &lt; max; i++) {
+			ch = (CacheHolder) cacheDB.get(i);
 			if (ch.isAddiWpt()) {
-				//search main cache
-				index = (Integer) dbIndex.get(&quot;GC&quot;+ ch.wayPoint.substring(2));
+				// search main cache
+				index = (Integer) dbIndex.get(&quot;GC&quot; + ch.getWayPoint().substring(2));
 				if (index == null)  // TODO save the source (GC or OC or Custom) of the maincache somewhere else to avoid ambiguity of addi-wpt-names
-					index = (Integer) dbIndex.get(&quot;OC&quot;+ ch.wayPoint.substring(2));
+					index = (Integer) dbIndex.get(&quot;OC&quot;+ ch.getWayPoint().substring(2));
 				if (index == null)  // TODO save the source (GC or OC or Custom) of the maincache somewhere else to avoid ambiguity of addi-wpt-names
-					index = (Integer) dbIndex.get(&quot;CW&quot;+ ch.wayPoint.substring(2));
-				
+					index = (Integer) dbIndex.get(&quot;CW&quot;+ ch.getWayPoint().substring(2));
+
 				if (index != null) {
 					mainCh = (CacheHolder) cacheDB.get(index.intValue());
 					mainCh.addiWpts.add(ch);
@@ -505,42 +542,193 @@
 			}// if
 		}// for
 		// sort addi wpts
-		for(int i =  0; i &lt; max ;i++){
-			ch = (CacheHolder)cacheDB.get(i);
-			if (ch.hasAddiWpt() &amp;&amp; (ch.addiWpts.size()&gt; 1)){
-				//ch.addiWpts.sort(new MyComparer(ch.addiWpts,MyLocale.getMsg(1002,&quot;Waypoint&quot;),ch.addiWpts.size()), false);
-				ch.addiWpts.sort(
-						new ewe.util.Comparer() {	
-							public int compare(Object o1, Object o2){
-								return ((CacheHolder) o1).wayPoint.compareTo(((CacheHolder)o2).wayPoint);
-							}
-						},false );
+		for (int i = 0; i &lt; max; i++) {
+			ch = (CacheHolder) cacheDB.get(i);
+			if (ch.hasAddiWpt() &amp;&amp; (ch.addiWpts.size() &gt; 1)) {
+				// ch.addiWpts.sort(new
+				// MyComparer(ch.addiWpts,MyLocale.getMsg(1002,&quot;Waypoint&quot;),ch.addiWpts.size()),
+				// false);
+				ch.addiWpts.sort(new ewe.util.Comparer() {
+					public int compare(Object o1, Object o2) {
+						return ((CacheHolder) o1).getWayPoint().compareTo(
+						        ((CacheHolder) o2).getWayPoint());
+					}
+				}, false);
 			}
 		}
 
 	}
-	
-	
-	/** Ensure that all filters have the proper length so that the 'charAt' access in the filter
-	 * do not cause nullPointer Exceptions
+
+	/**
+	 * Ensure that all filters have the proper length so that the 'charAt' access in the filter do
+	 * not cause nullPointer Exceptions
 	 */
 	private void normaliseFilters() {
-		String manyOnes=&quot;11111111111111111111111111111&quot;;
-		if (filterRose.length()&lt;FILTERROSE.length()) { 
-			filterRose=(filterRose+manyOnes).substring(0,FILTERROSE.length()); 
-		}  
-		if (filterVar.length()&lt;FILTERVAR.length()) { 
-			filterVar=(filterVar+manyOnes).substring(0,FILTERVAR.length()); 
-		}  
-		if (filterType.length()&lt;FILTERTYPE.length()) { 
-			filterType=(filterType+manyOnes).substring(0,FILTERTYPE.length());
-		} 
-		if (filterSize.length()&lt;FILTERSIZE.length()) {
-			filterSize=(filterSize+manyOnes).substring(0,FILTERSIZE.length());
+		String manyOnes = &quot;11111111111111111111111111111&quot;;
+		if (getFilterRose().length() &lt; FILTERROSE.length()) {
+			setFilterRose((getFilterRose() + manyOnes).substring(0, FILTERROSE.length()));
 		}
-		if (filterDist.length()==0) filterDist=&quot;L&quot;;
-		if (filterDiff.length()==0) filterDiff=&quot;L&quot;;
-		if (filterTerr.length()==0) filterTerr=&quot;L&quot;;
+		if (getFilterVar().length() &lt; FILTERVAR.length()) {
+			setFilterVar((getFilterVar() + manyOnes).substring(0, FILTERVAR.length()));
+		}
+		if (getFilterType().length() &lt; FILTERTYPE.length()) {
+			setFilterType((getFilterType() + manyOnes).substring(0, FILTERTYPE.length()));
+		}
+		if (getFilterSize().length() &lt; FILTERSIZE.length()) {
+			setFilterSize((getFilterSize() + manyOnes).substring(0, FILTERSIZE.length()));
+		}
+		if (getFilterDist().length() == 0)
+			setFilterDist(&quot;L&quot;);
+		if (getFilterDiff().length() == 0)
+			setFilterDiff(&quot;L&quot;);
+		if (getFilterTerr().length() == 0)
+			setFilterTerr(&quot;L&quot;);
 	}
 
+	// Getter and Setter for private properties
+
+	public String getFilterType() {
+		return filterType;
+	}
+
+	public void setFilterType(String filterType) {
+		this.notifyUnsavedChanges(!filterType.equals(this.filterType));
+		this.filterType = filterType;
+	}
+
+	public String getFilterRose() {
+		return filterRose;
+	}
+
+	public void setFilterRose(String filterRose) {
+		this.notifyUnsavedChanges(!filterRose.equals(this.filterRose));
+		this.filterRose = filterRose;
+	}
+
+	public String getFilterSize() {
+		return filterSize;
+	}
+
+	public void setFilterSize(String filterSize) {
+		this.notifyUnsavedChanges(!filterSize.equals(this.filterSize));
+		this.filterSize = filterSize;
+	}
+
+	public String getFilterVar() {
+		return filterVar;
+	}
+
+	public void setFilterVar(String filterVar) {
+		this.notifyUnsavedChanges(!filterVar.equals(this.filterVar));
+		this.filterVar = filterVar;
+	}
+
+	public String getFilterDist() {
+		return filterDist;
+	}
+
+	public void setFilterDist(String filterDist) {
+		this.notifyUnsavedChanges(!filterDist.equals(this.filterDist));
+		this.filterDist = filterDist;
+	}
+
+	public String getFilterDiff() {
+		return filterDiff;
+	}
+
+	public void setFilterDiff(String filterDiff) {
+		this.notifyUnsavedChanges(!filterDiff.equals(this.filterDiff));
+		this.filterDiff = filterDiff;
+	}
+
+	public String getFilterTerr() {
+		return filterTerr;
+	}
+
+	public void setFilterTerr(String filterTerr) {
+		this.notifyUnsavedChanges(!filterTerr.equals(this.filterTerr));
+		this.filterTerr = filterTerr;
+	}
+
+	public int getFilterActive() {
+		return filterActive;
+	}
+
+	public void setFilterActive(int filterActive) {
+		this.notifyUnsavedChanges(filterActive != this.filterActive);
+		this.filterActive = filterActive;
+	}
+
+	public boolean isFilterInverted() {
+		return filterInverted;
+	}
+
+	public void setFilterInverted(boolean filterInverted) {
+		this.notifyUnsavedChanges(filterInverted != this.filterInverted);
+		this.filterInverted = filterInverted;
+	}
+
+	public boolean showBlacklisted() {
+		return showBlacklisted;
+	}
+
+	public void setShowBlacklisted(boolean showBlacklisted) {
+		this.notifyUnsavedChanges(showBlacklisted != this.showBlacklisted);
+		this.showBlacklisted = showBlacklisted;
+	}
+
+	public long getFilterAttrYes() {
+		return filterAttrYes;
+	}
+
+	public void setFilterAttrYes(long filterAttrYes) {
+		this.notifyUnsavedChanges(filterAttrYes != this.filterAttrYes);
+		this.filterAttrYes = filterAttrYes;
+	}
+
+	public long getFilterAttrNo() {
+		return filterAttrNo;
+	}
+
+	public void setFilterAttrNo(long filterAttrNo) {
+		this.notifyUnsavedChanges(filterAttrNo != this.filterAttrNo);
+		this.filterAttrNo = filterAttrNo;
+	}
+
+	public int getFilterAttrChoice() {
+		return filterAttrChoice;
+	}
+
+	public void setFilterAttrChoice(int filterAttrChoice) {
+		this.notifyUnsavedChanges(filterAttrChoice != this.filterAttrChoice);
+		this.filterAttrChoice = filterAttrChoice;
+	}
+
+	public String getLast_sync_opencaching() {
+		return last_sync_opencaching;
+	}
+
+	public void setLast_sync_opencaching(String last_sync_opencaching) {
+		this.notifyUnsavedChanges(!last_sync_opencaching.equals(this.last_sync_opencaching));
+		this.last_sync_opencaching = last_sync_opencaching;
+	}
+
+	public String getDistOC() {
+		return distOC;
+	}
+
+	public void setDistOC(String distOC) {
+		this.notifyUnsavedChanges(!distOC.equals(this.distOC));
+		this.distOC = distOC;
+	}
+
+	public String getDistGC() {
+		return distGC;
+	}
+
+	public void setDistGC(String distGC) {
+		this.notifyUnsavedChanges(!distGC.equals(this.distGC));
+		this.distGC = distGC;
+	}
+
 }

Modified: trunk/src/CacheWolf/ProfileDataForm.java
===================================================================
--- trunk/src/CacheWolf/ProfileDataForm.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/ProfileDataForm.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -66,15 +66,15 @@
 				CoordsScreen cs = new CoordsScreen();
 				cs.setFields(profile.centre, CWPoint.CW);
 				if (cs.execute()== FormBase.IDOK){
+					profile.notifyUnsavedChanges(cs.getCoords().equals(profile.centre));
 					profile.centre.set(cs.getCoords());
 					btnProfileCentre.setText(profile.centre.toString());
-					profile.hasUnsavedChanges=true;
 				}
 			}
 			if (ev.target == btnCur2Prof){
+				profile.notifyUnsavedChanges(pref.curCentrePt.equals(profile.centre));
 				profile.centre.set(pref.curCentrePt);
 				btnProfileCentre.setText(profile.centre.toString());
-				profile.hasUnsavedChanges=true;
 			}
 			if (ev.target == btnProf2Cur){
 				pref.curCentrePt.set(profile.centre);

Modified: trunk/src/CacheWolf/ProfilesForm.java
===================================================================
--- trunk/src/CacheWolf/ProfilesForm.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/ProfilesForm.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -126,8 +126,8 @@
 				close(-1);
 			}
 			if (ev.target == btnOK || ev.target == choice){
-				Global.getProfile().filterActive=Filter.FILTER_INACTIVE;
-				Global.getProfile().filterInverted=false;
+				Global.getProfile().setFilterActive(Filter.FILTER_INACTIVE);
+				Global.getProfile().setFilterInverted(false);
 				if (choice.getSelectedItem()!=null) {
 					newSelectedProfile=choice.getSelectedItem().toString();
 					close(1);

Modified: trunk/src/CacheWolf/RadarPanel.java
===================================================================
--- trunk/src/CacheWolf/RadarPanel.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/RadarPanel.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -106,7 +106,7 @@
 		double pi180=java.lang.Math.PI / 180.0;
 		for(int i = cacheDB.size()-1; i &gt;=0 ; i--){
 			holder = (CacheHolder)cacheDB.get(i);
-			if(!holder.is_filtered &amp;&amp; holder.pos.isValid()) {
+			if(!holder.is_filtered() &amp;&amp; holder.pos.isValid()) {
 				degrees = holder.degrees * pi180;
 				x =new Float(holder.kilom/scale *  java.lang.Math.sin(degrees)).intValue();
 				y = -new Float(holder.kilom/scale *  java.lang.Math.cos(degrees)).intValue();
@@ -114,9 +114,9 @@
 					if (toggleMod&gt;0) {
 						String s;
 						if (toggleMod==1)
-							s=holder.wayPoint;
+							s=holder.getWayPoint();
 						else
-							s=holder.CacheName;
+							s=holder.getCacheName();
 						if (s.length()&gt;0) { 
 							int tw;
 							Image img = new Image(tw=fm.getTextWidth(s),fm.getHeight());
@@ -133,15 +133,15 @@
 							iActP.addImage(aImg);
 						}
 					}
-					Image imgCache=CacheType.cache2Img(holder.type);
+					Image imgCache=CacheType.cache2Img(holder.getType());
 					// If we have no image for the cache type use a question mark
 					if (imgCache==null) imgCache=CacheType.cacheImages[8]; 
 					rpi = new RadarPanelImage(imgCache);
-					rpi.wayPoint = holder.wayPoint;
+					rpi.wayPoint = holder.getWayPoint();
 					rpi.rownum = i;
 					rpi.setLocation(centerX+x-7,centerY+y-7);
 					iActP.addImage(rpi);
-					if(holder.wayPoint.equals(selectedWaypoint)){ // Draw red circle around selected wpt
+					if(holder.getWayPoint().equals(selectedWaypoint)){ // Draw red circle around selected wpt
 						Image imgCircle = new Image(20, 20);
 						Graphics gCircle = new Graphics(imgCircle);
 						gCircle.setColor(Color.Black);

Modified: trunk/src/CacheWolf/SearchCache.java
===================================================================
--- trunk/src/CacheWolf/SearchCache.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/SearchCache.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -32,12 +32,12 @@
 			//marked caches.
 			for(int i = 0;i &lt; cacheDB.size();i++){
 				ch = (CacheHolder)cacheDB.get(i);
-				if (ch.is_filtered) break; // Reached end of visible records
-				if(ch.wayPoint.toUpperCase().indexOf(searchStr) &lt;0 &amp;&amp; 
-				   ch.CacheName.toUpperCase().indexOf(searchStr) &lt;0 &amp;&amp; 
-				   ch.CacheStatus.toUpperCase().indexOf(searchStr)&lt;0){
+				if (ch.is_filtered()) break; // Reached end of visible records
+				if(ch.getWayPoint().toUpperCase().indexOf(searchStr) &lt;0 &amp;&amp; 
+				   ch.getCacheName().toUpperCase().indexOf(searchStr) &lt;0 &amp;&amp; 
+				   ch.getCacheStatus().toUpperCase().indexOf(searchStr)&lt;0){
 					ch.is_flaged = false;
-					ch.is_filtered = true;
+					ch.setFiltered(true);
 				} else
 					ch.is_flaged=true;
 			} // for
@@ -54,7 +54,7 @@
 		for(int i = cacheDB.size()-1;i &gt;=0;i--){
 			CacheHolder ch=((CacheHolder)cacheDB.get(i));
 			ch.is_flaged=false;
-			ch.is_filtered=(ch.is_black^Global.getProfile().showBlacklisted) ;
+			//ch.setFiltered((ch.is_black()^Global.getProfile().showBlacklisted())) ;
 		}
 		//Global.getProfile().filterActive=Filter.filterActive; //TODO This is a hack. Need to tidy this up
 		//Global.getProfile().filterInverted=Filter.filterInverted;

Modified: trunk/src/CacheWolf/ShowCacheInBrowser.java
===================================================================
--- trunk/src/CacheWolf/ShowCacheInBrowser.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/ShowCacheInBrowser.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -63,21 +63,21 @@
 		if (chD == null) return;
 		try {
 			Template tpl = new Template(args);
-			if(!chD.is_filtered){
+			if(!chD.is_filtered()){
 				Vm.showWait(true);
 				try {
-					if (chD.wayPoint.startsWith(&quot;OC&quot;))
-						tpl.setParam(&quot;TYPE&quot;, &quot;\&quot;<A HREF="file://">file://</A>&quot;+FileBase.getProgramDirectory()+&quot;/&quot;+CacheType.transOCType(chD.type)+&quot;.gif\&quot;&quot;);
+					if (chD.getWayPoint().startsWith(&quot;OC&quot;))
+						tpl.setParam(&quot;TYPE&quot;, &quot;\&quot;<A HREF="file://">file://</A>&quot;+FileBase.getProgramDirectory()+&quot;/&quot;+CacheType.transOCType(chD.getType())+&quot;.gif\&quot;&quot;);
 					else	
-						tpl.setParam(&quot;TYPE&quot;, &quot;\&quot;<A HREF="file://">file://</A>&quot;+FileBase.getProgramDirectory()+&quot;/&quot;+chD.type+&quot;.gif\&quot;&quot;);
-					tpl.setParam(&quot;SIZE&quot;, chD.CacheSize);
-					tpl.setParam(&quot;WAYPOINT&quot;, chD.wayPoint);
-					tpl.setParam(&quot;CACHE_NAME&quot;, chD.CacheName);
-					tpl.setParam(&quot;OWNER&quot;, chD.CacheOwner);
-					if (chD.hard.endsWith(&quot;.0&quot;)) chD.hard=chD.hard.substring(0,chD.hard.length()-2);
-					tpl.setParam(&quot;DIFFICULTY&quot;, (String) diff.get(chD.hard.replace(',','.')));
-					if (chD.terrain.endsWith(&quot;.0&quot;)) chD.terrain=chD.terrain.substring(0,chD.terrain.length()-2);
-					tpl.setParam(&quot;TERRAIN&quot;, (String) terr.get(chD.terrain.replace(',','.')));
+						tpl.setParam(&quot;TYPE&quot;, &quot;\&quot;<A HREF="file://">file://</A>&quot;+FileBase.getProgramDirectory()+&quot;/&quot;+chD.getType()+&quot;.gif\&quot;&quot;);
+					tpl.setParam(&quot;SIZE&quot;, chD.getCacheSize());
+					tpl.setParam(&quot;WAYPOINT&quot;, chD.getWayPoint());
+					tpl.setParam(&quot;CACHE_NAME&quot;, chD.getCacheName());
+					tpl.setParam(&quot;OWNER&quot;, chD.getCacheOwner());
+					if (chD.getHard().endsWith(&quot;.0&quot;)) chD.setHard(chD.getHard().substring(0,chD.getHard().length()-2));
+					tpl.setParam(&quot;DIFFICULTY&quot;, (String) diff.get(chD.getHard().replace(',','.')));
+					if (chD.getTerrain().endsWith(&quot;.0&quot;)) chD.setTerrain(chD.getTerrain().substring(0,chD.getTerrain().length()-2));
+					tpl.setParam(&quot;TERRAIN&quot;, (String) terr.get(chD.getTerrain().replace(',','.')));
 					tpl.setParam(&quot;DISTANCE&quot;, chD.getDistance().replace(',','.'));
 					tpl.setParam(&quot;BEARING&quot;, chD.bearing);
 					if (chD.pos!=null &amp;&amp; chD.pos.isValid()) {
@@ -86,10 +86,10 @@
 						tpl.setParam(&quot;LATLON&quot;, &quot;unknown&quot;);
 					}
 					// If status is of format yyyy-mm-dd prefix it with a &quot;Found&quot; message in local language
-					if (chD.CacheStatus.length()&gt;=10 &amp;&amp; chD.CacheStatus.charAt(4)=='-')
-						tpl.setParam(&quot;STATUS&quot;,MyLocale.getMsg(318,&quot;Found&quot;)+&quot; &quot;+chD.CacheStatus);
+					if (chD.getCacheStatus().length()&gt;=10 &amp;&amp; chD.getCacheStatus().charAt(4)=='-')
+						tpl.setParam(&quot;STATUS&quot;,MyLocale.getMsg(318,&quot;Found&quot;)+&quot; &quot;+chD.getCacheStatus());
 					else
-						tpl.setParam(&quot;STATUS&quot;, chD.CacheStatus);
+						tpl.setParam(&quot;STATUS&quot;, chD.getCacheStatus());
 					
 					// Cache attributes
 					if (chD.attributes.getCount()&gt;0) {
@@ -109,7 +109,7 @@
 						tpl.setParam(&quot;ATTRIBUTES&quot;,attVect);
 					}
 					
-					tpl.setParam(&quot;DATE&quot;, chD.DateHidden);
+					tpl.setParam(&quot;DATE&quot;, chD.getDateHidden());
 					tpl.setParam(&quot;URL&quot;, chD.URL);
 					if (chD.Travelbugs.size()&gt;0) tpl.setParam(&quot;BUGS&quot;,chD.Travelbugs.toHtml());
 					if (chD.CacheNotes!=null &amp;&amp; chD.CacheNotes.trim().length()&gt;0) tpl.setParam(&quot;NOTES&quot;, STRreplace.replace(chD.CacheNotes,&quot;\n&quot;,&quot;&lt;br/&gt;\n&quot;));
@@ -183,7 +183,7 @@
 						logVect.add(logs);
 					}
 					tpl.setParam(&quot;LOGS&quot;,logVect);
-					if (!chD.is_available) tpl.setParam(&quot;UNAVAILABLE&quot;,&quot;1&quot;);
+					if (!chD.is_available()) tpl.setParam(&quot;UNAVAILABLE&quot;,&quot;1&quot;);
 					if (!chD.Hints.equals(&quot;null&quot;))tpl.setParam(&quot;HINT&quot;,Common.rot13(chD.Hints));
 					
 					if (chD.hasAddiWpt()) {
@@ -191,10 +191,10 @@
 						for (int i=0; i&lt;chD.addiWpts.size(); i++) {
 							Hashtable addis=new Hashtable();
 							CacheHolder ch=(CacheHolder) chD.addiWpts.get(i);
-							addis.put(&quot;WAYPOINT&quot;,ch.wayPoint);
-							addis.put(&quot;NAME&quot;,ch.CacheName);
+							addis.put(&quot;WAYPOINT&quot;,ch.getWayPoint());
+							addis.put(&quot;NAME&quot;,ch.getCacheName());
 							addis.put(&quot;LATLON&quot;,ch.LatLon);
-							addis.put(&quot;IMG&quot;,&quot;&lt;img src=\&quot;&quot;+CacheType.type2pic(ch.type)+&quot;\&quot;&gt;&quot;);
+							addis.put(&quot;IMG&quot;,&quot;&lt;img src=\&quot;&quot;+CacheType.type2pic(ch.getType())+&quot;\&quot;&gt;&quot;);
 							CacheHolderDetail chDA=new CacheHolderDetail(ch);
 							chDA.readCache(Global.getProfile().dataDir);
 							addis.put(&quot;LONGDESC&quot;,chDA.LongDescription); // Do we need to treat longDesc as above ?
@@ -203,8 +203,8 @@
 						tpl.setParam(&quot;ADDIS&quot;,addiVect);
 					}
 				}catch(Exception e){
-					Vm.debug(&quot;Problem getting Parameter, Cache: &quot; + chD.wayPoint);
-					Global.getPref().log(&quot;Problem getting parameter &quot;+e.toString()+&quot;, Cache: &quot; + chD.wayPoint);
+					Vm.debug(&quot;Problem getting Parameter, Cache: &quot; + chD.getWayPoint());
+					Global.getPref().log(&quot;Problem getting parameter &quot;+e.toString()+&quot;, Cache: &quot; + chD.getWayPoint());
 					e.printStackTrace();
 				}
 			}

Modified: trunk/src/CacheWolf/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/SpiderGC.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/SpiderGC.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -238,7 +238,7 @@
 				((CacheHolder) cacheDB.get(number)).update(chD);
 			}
 		}catch(Exception ex){
-			pref.log(&quot;Error spidering &quot; + chD.wayPoint + &quot; in spiderSingle&quot;);
+			pref.log(&quot;Error spidering &quot; + chD.getWayPoint() + &quot; in spiderSingle&quot;);
 		}
 		return ret;
 	} // spiderSingle
@@ -299,8 +299,8 @@
 		//index the database for faster searching!
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			ch = (CacheHolder)cacheDB.get(i);
-			indexDB.put(ch.wayPoint, new Integer(i));
-			ch.is_new = false;
+			indexDB.put(ch.getWayPoint(), new Integer(i));
+			ch.setNew(false);
 		}
 		String start = &quot;&quot;;
 		Regex rexViewstate = new Regex(&quot;id=\&quot;__VIEWSTATE\&quot; value=\&quot;(.*)\&quot; /&gt;&quot;);
@@ -330,7 +330,7 @@
 			Double distDouble = new Double();
 			distDouble.value = distance;
 			dist = distDouble.toString(0, 1, 0).replace(',', '.');
-			profile.distGC = dist;
+			profile.setDistGC(dist);
 
 			doNotgetFound = options.foundCheckBox.getState();
 		}
@@ -366,12 +366,12 @@
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			ch = (CacheHolder)cacheDB.get(i);
 			if (spiderAllFinds) {
-				if ( (ch.wayPoint.substring(0,2).equalsIgnoreCase(&quot;GC&quot;)) ) {
-					cachesToUpdate.put(ch.wayPoint, new Integer(i));
+				if ( (ch.getWayPoint().substring(0,2).equalsIgnoreCase(&quot;GC&quot;)) ) {
+					cachesToUpdate.put(ch.getWayPoint(), new Integer(i));
 				}
 			} else {
-				if ( (!ch.is_archived) &amp;&amp; (ch.kilom &lt;= distanceInKm) &amp;&amp; !(doNotgetFound &amp;&amp; ch.is_found) &amp;&amp; (ch.wayPoint.substring(0,2).equalsIgnoreCase(&quot;GC&quot;)) ) {
-					cachesToUpdate.put(ch.wayPoint, new Integer(i));
+				if ( (!ch.is_archived()) &amp;&amp; (ch.kilom &lt;= distanceInKm) &amp;&amp; !(doNotgetFound &amp;&amp; ch.is_found()) &amp;&amp; (ch.getWayPoint().substring(0,2).equalsIgnoreCase(&quot;GC&quot;)) ) {
+					cachesToUpdate.put(ch.getWayPoint(), new Integer(i));
 				}
 			}
 		}
@@ -466,21 +466,21 @@
 							// If the &lt;strike&gt; tag is used, the cache is marked as unavailable or archived
 							boolean is_archived_GC=lineRex.stringMatched(1).indexOf(&quot;&lt;strike&gt;&lt;font color=\&quot;red\&quot;&gt;&quot;)!=-1;
 							boolean is_available_GC=lineRex.stringMatched(1).indexOf(&quot;&lt;strike&gt;&quot;)==-1;
-							if (ch.is_archived!=is_archived_GC) { // Update the database with the cache status
+							if (ch.is_archived()!=is_archived_GC) { // Update the database with the cache status
 								pref.log(&quot;Updating status of &quot;+waypoint+&quot; to &quot;+(is_archived_GC?&quot;archived&quot;:&quot;not archived&quot;));
-								if ( ch.is_archived ) {
-									cachesToUpdate.put(ch.wayPoint, nr);
+								if ( ch.is_archived() ) {
+									cachesToUpdate.put(ch.getWayPoint(), nr);
 								}
-								ch.is_archived=is_archived_GC;
+								ch.setArchived(is_archived_GC);
 								chD=ch.getCacheDetails(true,false);
 								ch.detailsAdded();
-							} else if (ch.is_available!=is_available_GC) { // Update the database with the cache status
+							} else if (ch.is_available()!=is_available_GC) { // Update the database with the cache status
 								pref.log(&quot;Updating status of &quot;+waypoint+&quot; to &quot;+(is_available_GC?&quot;available&quot;:&quot;not available&quot;));
-								ch.is_available=is_available_GC;
+								ch.setAvailable(is_available_GC);
 								chD=ch.getCacheDetails(true,false);
 								ch.detailsAdded();
 							} else {
-								cachesToUpdate.remove( ch.wayPoint );
+								cachesToUpdate.remove( ch.getWayPoint() );
 							}
 						}
 					} else distance = 0;
@@ -561,7 +561,7 @@
 			if(searchWpt(wpt) == -1){
 				infB.setInfo(MyLocale.getMsg(5513,&quot;Loading: &quot;) + wpt +&quot; (&quot; + (i+1) + &quot; / &quot; + totalCachesToLoad + &quot;)&quot;);
 				chD = new CacheHolderDetail();
-				chD.wayPoint=wpt;
+				chD.setWayPoint(wpt);
 				int test = getCacheByWaypointName(chD,false,getImages,doNotgetFound,loadAllLogs);
 				if (test == -1) {
 					infB.close(0);
@@ -569,7 +569,7 @@
 				} else if (test == 0) {
 					spiderErrors++;
 				} else {
-					if (!chD.is_found || !doNotgetFound ) {
+					if (!chD.is_found() || !doNotgetFound ) {
 						chD.saveCacheDetails(profile.dataDir);
 						cacheDB.add(new CacheHolder(chD)); 
 					}
@@ -582,7 +582,7 @@
 			for (Enumeration e = cachesToUpdate.elements() ; e.hasMoreElements() ; j++) {
 				int i = ((Integer)e.nextElement()).intValue();
 				ch = (CacheHolder)cacheDB.get(i);
-				infB.setInfo(MyLocale.getMsg(5513,&quot;Loading: &quot;) + ch.wayPoint +&quot; (&quot; + (cachesToLoad.size()+j) + &quot; / &quot; + totalCachesToLoad + &quot;)&quot;);
+				infB.setInfo(MyLocale.getMsg(5513,&quot;Loading: &quot;) + ch.getWayPoint() +&quot; (&quot; + (cachesToLoad.size()+j) + &quot; / &quot; + totalCachesToLoad + &quot;)&quot;);
 				infB.redisplay();
 
 				int test = spiderSingle(i, infB,false);
@@ -591,7 +591,7 @@
 				} else if (test == 0) {
 					spiderErrors++;
 				} else {
-					profile.hasUnsavedChanges=true;	
+					//profile.hasUnsavedChanges=true;	
 				}
 			}
 		}
@@ -604,6 +604,7 @@
 		if ( maxNumberAbort ) {
 			new MessageBox(MyLocale.getMsg(5519,&quot;Information&quot;),MyLocale.getMsg(5520,&quot;Only the given maximum of caches were loaded.%0aRepeat spidering later to load more caches.%0aNo already existing caches were updated.&quot;),FormBase.DEFOKB).execute();			
 		}
+		Global.getProfile().restoreFilter();
 		Global.getProfile().saveIndex(Global.getPref(),true);
 	}
 
@@ -631,33 +632,33 @@
 			while (spiderTrys++&lt;MAX_SPIDER_TRYS) {
 				ret = 1;
 				try{
-					String doc = p.getProp(&quot;getPageByName&quot;) + chD.wayPoint +(fetchAllLogs?p.getProp(&quot;fetchAllLogs&quot;):&quot;&quot;);
-					pref.log(&quot;Fetching: &quot; + chD.wayPoint);
+					String doc = p.getProp(&quot;getPageByName&quot;) + chD.getWayPoint() +(fetchAllLogs?p.getProp(&quot;fetchAllLogs&quot;):&quot;&quot;);
+					pref.log(&quot;Fetching: &quot; + chD.getWayPoint());
 					completeWebPage = fetch(doc);
 					if	( completeWebPage.equals(&quot;&quot;)) {
-						pref.log(&quot;Could not fetch &quot; + chD.wayPoint);
+						pref.log(&quot;Could not fetch &quot; + chD.getWayPoint());
 						if (!infB.isClosed) {
 							continue;
 						} else {
-							chD.is_incomplete = true;
+							chD.setIncomplete(true);
 							return -1;
 						}
 					}
 				}catch(Exception ex){
-					pref.log(&quot;Could not fetch &quot; + chD.wayPoint,ex);
+					pref.log(&quot;Could not fetch &quot; + chD.getWayPoint(),ex);
 					if (!infB.isClosed) {
 						continue;
 					} else {
-						chD.is_incomplete = true;
+						chD.setIncomplete(true);
 						return -1;
 					}
 				}
 				// Only analyse the cache data and fetch pictures if user has not closed the progress window
 				if (!infB.isClosed) {
 					try{
-						chD.is_new = !isUpdate;
-						chD.is_update = false;
-						chD.is_log_update=false;
+						chD.setNew(!isUpdate);
+						chD.setUpdated(false);
+						chD.setLog_updated(false);
 
 						//first check if coordinates are available to prevent deleting existing coorinates
 						String latLon = getLatLon(completeWebPage);
@@ -667,10 +668,10 @@
 							continue; // Restart the spider
 						}
 
-						chD.is_HTML = true;
-						chD.is_available = true;
-						chD.is_archived = false;
-						chD.is_incomplete = true;
+						chD.setHTML(true);
+						chD.setAvailable(true);
+						chD.setArchived(false);
+						chD.setIncomplete(true);
 						// Save size of logs to be able to check whether any new logs were added
 						//int logsz = chD.CacheLogs.size();
 						//chD.CacheLogs.clear();
@@ -679,8 +680,8 @@
 						chD.ImagesText.clear();
 						chD.ImagesInfo.clear();
 
-						if(completeWebPage.indexOf(p.getProp(&quot;cacheUnavailable&quot;)) &gt;= 0) chD.is_available = false;
-						if(completeWebPage.indexOf(p.getProp(&quot;cacheArchived&quot;)) &gt;= 0) chD.is_archived = true;
+						if(completeWebPage.indexOf(p.getProp(&quot;cacheUnavailable&quot;)) &gt;= 0) chD.setAvailable(false);
+						if(completeWebPage.indexOf(p.getProp(&quot;cacheArchived&quot;)) &gt;= 0) chD.setArchived(true);
 						//==========
 						// General Cache Data
 						//==========
@@ -693,8 +694,8 @@
 						pref.log(&quot;Got description&quot;);
 
 						pref.log(&quot;Getting cache name&quot;);
-						chD.CacheName = SafeXML.cleanback(getName(completeWebPage));
-						if (pref.debug) pref.log(&quot;Name: &quot; + chD.CacheName); else pref.log(&quot;Got name&quot;);
+						chD.setCacheName(SafeXML.cleanback(getName(completeWebPage)));
+						if (pref.debug) pref.log(&quot;Name: &quot; + chD.getCacheName()); else pref.log(&quot;Got name&quot;);
 						
 						pref.log(&quot;Trying location (country/state)&quot;);
 						String location = getLocation(completeWebPage);
@@ -715,15 +716,15 @@
 						}
 
 						pref.log(&quot;Trying owner&quot;);
-						chD.CacheOwner = SafeXML.cleanback(getOwner(completeWebPage)).trim();
-						if(chD.CacheOwner.equals(pref.myAlias) || (pref.myAlias2.length()&gt;0 &amp;&amp; chD.CacheOwner.equals(pref.myAlias2))) chD.is_owned = true;
-						if (pref.debug) pref.log(&quot;Owner: &quot; + chD.CacheOwner +&quot;; is_owned = &quot;+chD.is_owned+&quot;;  alias1,2 = [&quot;+pref.myAlias+&quot;|&quot;+pref.myAlias2+&quot;]&quot;);
+						chD.setCacheOwner(SafeXML.cleanback(getOwner(completeWebPage)).trim());
+						if(chD.getCacheOwner().equals(pref.myAlias) || (pref.myAlias2.length()&gt;0 &amp;&amp; chD.getCacheOwner().equals(pref.myAlias2))) chD.setOwned(true);
+						if (pref.debug) pref.log(&quot;Owner: &quot; + chD.getCacheOwner() +&quot;; is_owned = &quot;+chD.is_owned()+&quot;;  alias1,2 = [&quot;+pref.myAlias+&quot;|&quot;+pref.myAlias2+&quot;]&quot;);
 						else pref.log(&quot;Got owner&quot;);
 
 
 						pref.log(&quot;Trying date hidden&quot;);
-						chD.DateHidden = DateFormat.MDY2YMD(getDateHidden(completeWebPage));
-						if (pref.debug) pref.log(&quot;Hidden: &quot; + chD.DateHidden);
+						chD.setDateHidden(DateFormat.MDY2YMD(getDateHidden(completeWebPage)));
+						if (pref.debug) pref.log(&quot;Hidden: &quot; + chD.getDateHidden());
 						else pref.log(&quot;Got date hidden&quot;);
 
 						pref.log(&quot;Trying hints&quot;);
@@ -732,23 +733,23 @@
 						else pref.log(&quot;Got hints&quot;);
 
 						pref.log(&quot;Trying size&quot;);
-						chD.CacheSize = getSize(completeWebPage);
-						if (pref.debug) pref.log(&quot;Size: &quot; + chD.CacheSize);
+						chD.setCacheSize(getSize(completeWebPage));
+						if (pref.debug) pref.log(&quot;Size: &quot; + chD.getCacheSize());
 						else pref.log(&quot;Got size&quot;);
 
 						pref.log(&quot;Trying difficulty&quot;);
-						chD.hard = getDiff(completeWebPage);
-						if (pref.debug) pref.log(&quot;Hard: &quot; + chD.hard);
+						chD.setHard(getDiff(completeWebPage));
+						if (pref.debug) pref.log(&quot;Hard: &quot; + chD.getHard());
 						else pref.log(&quot;Got difficulty&quot;);
 
 						pref.log(&quot;Trying terrain&quot;);
-						chD.terrain = getTerr(completeWebPage);
-						if (pref.debug) pref.log(&quot;Terr: &quot; + chD.terrain);
+						chD.setTerrain(getTerr(completeWebPage));
+						if (pref.debug) pref.log(&quot;Terr: &quot; + chD.getTerrain());
 						else pref.log(&quot;Got terrain&quot;);
 
 						pref.log(&quot;Trying cache type&quot;);
-						chD.type = getType(completeWebPage);
-						if (pref.debug) pref.log(&quot;Type: &quot; + chD.type);
+						chD.setType(getType(completeWebPage));
+						if (pref.debug) pref.log(&quot;Type: &quot; + chD.getType());
 						else pref.log(&quot;Got cache type&quot;);
 
 						//==========
@@ -759,7 +760,7 @@
 						pref.log(&quot;Found logs&quot;);
 
 						// If the switch is set to not store found caches and we found the cache =&gt; return
-						if (chD.is_found &amp;&amp; doNotGetFound) {
+						if (chD.is_found() &amp;&amp; doNotGetFound) {
 							if (infB.isClosed) {
 								return -1;
 							} else {
@@ -772,7 +773,7 @@
 						//==========
 						// As there may be several bugs, we check whether the user has aborted
 						if (!infB.isClosed) getBugs(chD,completeWebPage);
-						chD.has_bug = chD.Travelbugs.size()&gt;0;
+						chD.setHas_bugs(chD.Travelbugs.size()&gt;0);
 
 						//==========
 						// Images
@@ -787,7 +788,7 @@
 						//==========
 
 						pref.log(&quot;Getting additional waypoints&quot;);
-						getAddWaypoints(completeWebPage, chD.wayPoint, chD.is_found);
+						getAddWaypoints(completeWebPage, chD.getWayPoint(), chD.is_found());
 						pref.log(&quot;Got additional waypoints&quot;);
 
 						//==========
@@ -796,11 +797,11 @@
 						pref.log(&quot;Getting attributes&quot;);
 						getAttributes(completeWebPage, chD);
 						pref.log(&quot;Got attributes&quot;);
-						if (chD.is_new) chD.is_update=false;
-						chD.is_incomplete = false;
+						if (chD.is_new()) chD.setUpdated(false);
+						chD.setIncomplete(false);
 						break;
 					}catch(Exception ex){
-						pref.log(&quot;Error reading cache: &quot;+chD.wayPoint);
+						pref.log(&quot;Error reading cache: &quot;+chD.getWayPoint());
 						pref.log(&quot;Exception in getCacheByWaypointName: &quot;,ex);
 					}
 					finally{}
@@ -1046,8 +1047,8 @@
 			String d=DateFormat.logdate2YMD(exDate.findNext());
 			if((icon.equals(p.getProp(&quot;icon_smile&quot;)) || icon.equals(p.getProp(&quot;icon_camera&quot;)) || icon.equals(p.getProp(&quot;icon_attended&quot;))) &amp;&amp;
 				(name.equalsIgnoreCase(pref.myAlias) || (pref.myAlias2.length()&gt;0 &amp;&amp; name.equalsIgnoreCase(pref.myAlias2))) )  {
-				chD.is_found = true;
-				chD.CacheStatus = d;
+				chD.setFound(true);
+				chD.setCacheStatus(d);
 				chD.OwnLogId = logId;
 				chD.OwnLog = new Log(icon,d,name,logText);
 			}
@@ -1063,7 +1064,7 @@
 			exLogId.setSource(singleLog);
 			// We cannot simply stop if we have reached MAXLOGS just in case we are waiting for
 			// a log by our alias that happened earlier.
-			if (nLogs&gt;=MAXLOGS &amp;&amp; chD.is_found &amp;&amp; (chD.OwnLogId.length() != 0) &amp;&amp; (chD.OwnLog != null) &amp;&amp; !(chD.OwnLog.getDate().equals(&quot;1900-01-01&quot;))) break;
+			if (nLogs&gt;=MAXLOGS &amp;&amp; chD.is_found() &amp;&amp; (chD.OwnLogId.length() != 0) &amp;&amp; (chD.OwnLog != null) &amp;&amp; !(chD.OwnLog.getDate().equals(&quot;1900-01-01&quot;))) break;
 		}
 		if (nLogs&gt;MAXLOGS) {
 			reslts.add(Log.maxLog());
@@ -1133,7 +1134,7 @@
 		//========
 		String longDesc = &quot;&quot;;
 		try {
-			if (chD.wayPoint.startsWith(&quot;TC&quot;)) longDesc = doc;
+			if (chD.getWayPoint().startsWith(&quot;TC&quot;)) longDesc = doc;
 			else
 				longDesc = getLongDesc(doc);
 			longDesc = STRreplace.replace(longDesc, &quot;&lt;img&quot;, &quot;&lt;IMG&quot;);
@@ -1159,7 +1160,7 @@
 					if(imgType.startsWith(&quot;.png&quot;) || imgType.startsWith(&quot;.jpg&quot;) || imgType.startsWith(&quot;.gif&quot;)){
 						// Check whether image was already spidered for this cache
 						idxUrl=spideredUrls.find(imgUrl);
-						imgName = chD.wayPoint + &quot;_&quot; + Convert.toString(imgCounter);
+						imgName = chD.getWayPoint() + &quot;_&quot; + Convert.toString(imgCounter);
 						if (idxUrl&lt;0) { // New image
 							pref.log(&quot;Loading image: &quot; + imgUrl+&quot; as &quot;+imgName);
 							spiderImage(imgUrl, imgName+imgType);
@@ -1167,7 +1168,7 @@
 							spideredUrls.add(imgUrl);
 						} else { // Image already spidered as wayPoint_'idxUrl'
 							pref.log(&quot;Already loaded image: &quot; + imgUrl);
-							oldImgName = chD.wayPoint + &quot;_&quot; + Convert.toString(idxUrl);
+							oldImgName = chD.getWayPoint() + &quot;_&quot; + Convert.toString(idxUrl);
 							chD.Images.add(oldImgName+imgType); // Store name of old image as image to load
 						}
 						chD.ImagesText.add(imgName); // Keep the image name
@@ -1206,14 +1207,14 @@
 					if(imgType.startsWith(&quot;.png&quot;) || imgType.startsWith(&quot;.jpg&quot;) || imgType.startsWith(&quot;.gif&quot;)){
 						// Check whether image was already spidered for this cache
 						idxUrl=spideredUrls.find(imgUrl);
-						imgName = chD.wayPoint + &quot;_&quot; + Convert.toString(imgCounter);
+						imgName = chD.getWayPoint() + &quot;_&quot; + Convert.toString(imgCounter);
 						if (idxUrl&lt;0) { // New image
 							pref.log(&quot;Loading image: &quot; + imgUrl);
 							spiderImage(imgUrl, imgName+imgType);
 							chD.Images.add(imgName+imgType);
 						} else { // Image already spidered as wayPoint_ 'idxUrl'
 							pref.log(&quot;Already loaded image: &quot; + imgUrl);
-							oldImgName = chD.wayPoint + &quot;_&quot; + Convert.toString(idxUrl);
+							oldImgName = chD.getWayPoint() + &quot;_&quot; + Convert.toString(idxUrl);
 							chD.Images.add(oldImgName+imgType); // Store name of old image as image to load
 						}
 						chD.ImagesText.add(exImgName.findNext()); // Keep the image description
@@ -1246,7 +1247,7 @@
 						// Check whether image was already spidered for this cache
 						idxUrl=spideredUrls.find(imgUrl);
 						if (idxUrl&lt;0) { // New image
-							imgName = chD.wayPoint + &quot;_&quot; + Convert.toString(imgCounter);
+							imgName = chD.getWayPoint() + &quot;_&quot; + Convert.toString(imgCounter);
 							pref.log(&quot;Loading image: &quot; + imgUrl+&quot; as &quot;+imgName);
 							spiderImage(imgUrl, imgName+imgType);
 							chD.Images.add(imgName+imgType);
@@ -1348,27 +1349,29 @@
 						cxD.readCache(profile.dataDir);
 					} catch (Exception ex) {};
 				} else {
-					cxD=new CacheHolderDetail(); cxD.wayPoint=adWayPoint;
+					cxD=new CacheHolderDetail(); cxD.setWayPoint(adWayPoint);
 				}
-				cxD.is_update=false; cxD.is_new=false;
+				cxD.setUpdated(false); 
+				cxD.setNew(false);
 				nameRex.search(rowBlock);
 				koordRex.search(rowBlock);
 				typeRex.search(rowBlock);
-				cxD.CacheName = nameRex.stringMatched(1);
+				cxD.setCacheName(nameRex.stringMatched(1));
 				if(koordRex.didMatch()) cxD.setLatLon(koordRex.stringMatched(1));
-				if(typeRex.didMatch()) cxD.type = CacheType.typeText2Number(&quot;Waypoint|&quot;+typeRex.stringMatched(1));
+				if(typeRex.didMatch()) cxD.setType(CacheType.typeText2Number(&quot;Waypoint|&quot;+typeRex.stringMatched(1)));
 				rowBlock = exRowBlock.findNext();
 				descRex.search(rowBlock);
 				cxD.setLongDescription(descRex.stringMatched(1));
-				cxD.is_found = is_found;
+				cxD.setFound(is_found);
 				cxD.saveCacheDetails(profile.dataDir);
 				if (idx&lt;0){
-					cxD.is_new=true; cxD.is_update=false;
+					cxD.setNew(true); 
+					cxD.setUpdated(false);
 					cacheDB.add(new CacheHolder(cxD));
 				}else {
 					CacheHolder cx=(CacheHolder) cacheDB.get(idx);
 					if (cx.is_Checked &amp;&amp; // Only re-spider existing addi waypoints that are ticked
-				 	   !cx.is_filtered) { // and are visible (i.e.  not filtered)
+				 	   !cx.is_filtered()) { // and are visible (i.e.  not filtered)
 					   cx.update(cxD);
 					   cx.is_Checked=true;
 					}
@@ -1388,8 +1391,8 @@
 			chD.attributes.add(attribute);
 			attribute=attEx.findNext();
 		}
-		chD.attributesYes = chD.attributes.attributesYes;
-		chD.attributesNo = chD.attributes.attributesNo;
+		chD.setAttributesYes(chD.attributes.attributesYes);
+		chD.setAttributesNo(chD.attributes.attributesNo);
 	}
 
 

Modified: trunk/src/CacheWolf/StatusBar.java
===================================================================
--- trunk/src/CacheWolf/StatusBar.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/StatusBar.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -58,11 +58,11 @@
 					MyLocale.getMsg(4502,&quot;Fnd:&quot;) + &quot; &quot; + stats.totalFound() + &quot;  &quot;;
 		disp.setText(strStatus);
 		// Indicate that a filter is active in the status line
-		if (Global.getProfile().filterActive==Filter.FILTER_ACTIVE)
+		if (Global.getProfile().getFilterActive()==Filter.FILTER_ACTIVE)
 			btnFlt.backGround=new Color(0,255,0);
-		else if (Global.getProfile().filterActive==Filter.FILTER_CACHELIST)
+		else if (Global.getProfile().getFilterActive()==Filter.FILTER_CACHELIST)
 			btnFlt.backGround=new Color(0,0,255);
-		else if (Global.getProfile().filterActive==Filter.FILTER_MARKED_ONLY)
+		else if (Global.getProfile().getFilterActive()==Filter.FILTER_MARKED_ONLY)
 			btnFlt.backGround=new Color(0,255,255);
 		else
 			btnFlt.backGround=null;
@@ -80,7 +80,7 @@
 		if (ev instanceof ControlEvent &amp;&amp; ev.type == ControlEvent.PRESSED){
 			if (ev.target == btnFlt){
 				Filter flt = new Filter();
-				if (Global.getProfile().filterActive==Filter.FILTER_INACTIVE) {
+				if (Global.getProfile().getFilterActive()==Filter.FILTER_INACTIVE) {
 					flt.setFilter();
 					flt.doFilter();
 				} else {

Modified: trunk/src/CacheWolf/TablePanel.java
===================================================================
--- trunk/src/CacheWolf/TablePanel.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/TablePanel.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -81,7 +81,6 @@
 	public void resetModel() {
 		myMod.numRows = cacheDB.size();
 		Global.getProfile().updateBearingDistance();
-		Global.getProfile().restoreFilter(); // Restore the isActive &amp; isInverted status of the filter
 		tc.scrollToVisible(0,0);
 		refreshTable();
 	}
@@ -103,7 +102,7 @@
 		Vector oldVisibleCaches = null;
 		int sel = getSelectedCache();
 		if ((sel &gt;= 0) &amp;&amp; (sel &lt; cacheDB.size()) ) // sel &gt; cacheDB.size() can happen if you load a new profile, which is smaller than the old profile and you selected one cache that exceeds the number of caches in the new profile  
-			wayPoint = ((CacheHolder)cacheDB.get(sel)).wayPoint;
+			wayPoint = ((CacheHolder)cacheDB.get(sel)).getWayPoint();
 		else wayPoint = null;
 		// Then: remember all caches that are visible before the refresh
 		if (wayPoint != null) {
@@ -125,7 +124,7 @@
 				int i;
 				for (i=sel-1; i&gt;=0; i--) {
 					CacheHolder checkCache = (CacheHolder) oldVisibleCaches.get(i);
-					rownum = Global.getProfile().getCacheIndex(checkCache.wayPoint);
+					rownum = Global.getProfile().getCacheIndex(checkCache.getWayPoint());
 					if ((rownum &gt;= 0) &amp;&amp; (rownum &lt; myMod.numRows)) break;
 					rownum = 0;	
 				}

Modified: trunk/src/CacheWolf/TravelbugJourneyScreen.java
===================================================================
--- trunk/src/CacheWolf/TravelbugJourneyScreen.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/TravelbugJourneyScreen.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -65,13 +65,13 @@
 		String cache=&quot;&quot;;
 		if (curCacheNo&gt;=0 &amp;&amp; curCacheNo&lt;cacheDB.size()) {
 			ch=(CacheHolder)cacheDB.elementAt(curCacheNo);
-			cache=MyLocale.getMsg(6022,&quot;: Current cache: &quot;)+ch.wayPoint+&quot; - &quot;+ch.CacheName;
-			waypoint=ch.wayPoint;
+			cache=MyLocale.getMsg(6022,&quot;: Current cache: &quot;)+ch.getWayPoint()+&quot; - &quot;+ch.getCacheName();
+			waypoint=ch.getWayPoint();
 			chD=new CacheHolderDetail(ch);
 			try {
 				chD.readCache(Global.getProfile().dataDir);
 			}catch (Exception ex) {
-				Global.getPref().log(&quot;Failed to read cache &quot;+ch.wayPoint);
+				Global.getPref().log(&quot;Failed to read cache &quot;+ch.getWayPoint());
 			};
 			tblSrcCache=chD.Travelbugs;
 		}
@@ -254,7 +254,7 @@
 			// If the list of travelbugs in the cache was modified, we need to save the cache too
 			if (chDmodified) {
 				chD.saveCacheDetails(Global.getProfile().dataDir);
-				ch.has_bug=chD.Travelbugs.size()&gt;0;
+				ch.setHas_bugs(chD.Travelbugs.size()&gt;0);
 			}
 			Vm.showWait(false);
 			chD=null;
@@ -497,7 +497,7 @@
 				chD.Travelbugs.add(tb);
 				tblMyTravelbugJourneys.addTbDrop(tb,Global.getProfile().name,waypoint);
 				chDmodified=true;
-				ch.has_bug=true;
+				ch.setHas_bugs(true);
 			}
 			repaint();
 		}

Modified: trunk/src/CacheWolf/myInteractivePanel.java
===================================================================
--- trunk/src/CacheWolf/myInteractivePanel.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/myInteractivePanel.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -57,8 +57,8 @@
 		RadarPanelImage imgRP=(RadarPanelImage) which;
 		ewe.util.Vector cacheDB=Global.getProfile().cacheDB;
 		CacheHolder ch=(CacheHolder) cacheDB.get(imgRP.rownum);
-		String s=ch.wayPoint+&quot;  &quot;+ch.CacheSize+&quot; / &quot;+strDifficulty+&quot;=&quot;+ch.hard+&quot;  &quot;+strTerrain+&quot;=&quot;+ch.terrain;
-		String s1=ch.CacheName;
+		String s=ch.getWayPoint()+&quot;  &quot;+ch.getCacheSize()+&quot; / &quot;+strDifficulty+&quot;=&quot;+ch.getHard()+&quot;  &quot;+strTerrain+&quot;=&quot;+ch.getTerrain();
+		String s1=ch.getCacheName();
 		if (s1.length()&gt;40) s1=s1.substring(0,40);
 		int tw=fm.getTextWidth(s)+2;
 		int tw1=fm.getTextWidth(s1)+2;
@@ -110,8 +110,8 @@
 			 //wayPoint=ch.wayPoint;
 			 //Vm.debug(&quot;Waypoint : &quot;+ch.wayPoint);
 			 IconAndText icnDrag=new IconAndText();
-			 icnDrag.addColumn(CacheType.cache2Img(ch.type));
-			 icnDrag.addColumn(ch.wayPoint);
+			 icnDrag.addColumn(CacheType.cache2Img(ch.getType()));
+			 icnDrag.addColumn(ch.getWayPoint());
 			 dc.dragData=dc.startImageDrag(icnDrag,new Point(8,8),this);
 			 //if (dc instanceof ImageDragContext) Vm.debug(&quot;&gt;&gt;&gt;&gt;Is Image drag&quot;);
 			 canScroll=false;
@@ -134,7 +134,7 @@
 			RadarPanelImage imgRP=(RadarPanelImage) which;
 			ewe.util.Vector cacheDB=Global.getProfile().cacheDB;
 			CacheHolder ch=(CacheHolder) cacheDB.get(imgRP.rownum);
-			wayPoint=ch.wayPoint;
+			wayPoint=ch.getWayPoint();
 			
 			int tw,th;
 			Image img = new Image(tw=fm.getTextWidth(wayPoint+15),th=fm.getHeight()&gt;15?fm.getHeight():15);

Modified: trunk/src/CacheWolf/myTableControl.java
===================================================================
--- trunk/src/CacheWolf/myTableControl.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/myTableControl.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -102,7 +102,7 @@
 				else if (ev.key == IKeys.ACTION || ev.key == IKeys.ENTER) Global.mainTab.select(Global.mainTab.descP);
 				else if (ev.key == IKeys.DOWN) Global.mainTab.tbP.selectRow(java.lang.Math.min(cursor.y+ 1, model.numRows-1)); 
 				else if (ev.key == IKeys.UP) Global.mainTab.tbP.selectRow(java.lang.Math.max(cursor.y-1, 0));
-				else if (ev.key == IKeys.LEFT &amp;&amp; Global.mainForm.cacheListVisible &amp;&amp; cursor.y&gt;=0 &amp;&amp; cursor.y&lt;tbp.myMod.numRows) Global.mainForm.cacheList.addCache(((CacheHolder)cacheDB.elementAt(cursor.y)).wayPoint); 
+				else if (ev.key == IKeys.LEFT &amp;&amp; Global.mainForm.cacheListVisible &amp;&amp; cursor.y&gt;=0 &amp;&amp; cursor.y&lt;tbp.myMod.numRows) Global.mainForm.cacheList.addCache(((CacheHolder)cacheDB.elementAt(cursor.y)).getWayPoint()); 
 				else if (ev.key == IKeys.RIGHT) {
 					CacheHolder ch;
 					ch = (CacheHolder)cacheDB.get(tbp.getSelectedCache());
@@ -150,7 +150,7 @@
 				CacheHolder currCache = (CacheHolder)cacheDB.get(i);
 				if ( currCache.is_Checked) {
 					allCount++;
-					if (currCache.is_filtered) {
+					if (currCache.is_filtered()) {
 						if (currCache.isAddiWpt()) {
 							addiFilteredCount++;
 						} else {
@@ -185,11 +185,11 @@
 					int size=cacheDB.size();
 					for(int i = size-1; i &gt;=0; i--){// Start Counting down, as the size decreases with each deleted cache
 						ch = (CacheHolder)cacheDB.get(i);
-						if(ch.is_Checked &amp;&amp; (!ch.is_filtered || deleteFiltered)) {
+						if(ch.is_Checked &amp;&amp; (!ch.is_filtered() || deleteFiltered)) {
 							nDeleted++;
 							h.progress = ((float)nDeleted)/(float)allCount;
 							h.changed();
-							dm.deleteCacheFiles(ch.wayPoint,profile.dataDir);
+							dm.deleteCacheFiles(ch.getWayPoint(),profile.dataDir);
 							cacheDB.remove(ch);
 							ch.releaseCacheDetails();
 							ch=null;
@@ -298,11 +298,11 @@
 			}
 			 row=p.y;
 			 CacheHolder ch=(CacheHolder)cacheDB.get(p.y);
-			 wayPoint=ch.wayPoint;
+			 wayPoint=ch.getWayPoint();
 			 //Vm.debug(&quot;Waypoint : &quot;+ch.wayPoint);
 			 imgDrag=new IconAndText();
-			 imgDrag.addColumn(CacheType.cache2Img(ch.type));
-			 imgDrag.addColumn(ch.wayPoint);
+			 imgDrag.addColumn(CacheType.cache2Img(ch.getType()));
+			 imgDrag.addColumn(ch.getWayPoint());
 			 dc.dragData=dc.startImageDrag(imgDrag,new Point(8,8),this);
 		 } else super.startDragging(dc);
 	 }

Modified: trunk/src/CacheWolf/myTableModel.java
===================================================================
--- trunk/src/CacheWolf/myTableModel.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/myTableModel.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -129,13 +129,13 @@
 		int size=cacheDB.size();
 		for (int i=0; i&lt;size; i++){
 			ch = (CacheHolder) cacheDB.get(i);
-			if (ch.is_filtered) {
+			if (ch.is_filtered()) {
 				filteredDB.add(ch);
 			} else { // point is not filtered
 				if (ch.isAddiWpt()){ // unfiltered Addi Wpt
 					// check if main wpt is filtered
 					if(ch.mainCache != null) { // parent exists
-						if (ch.mainCache.is_filtered) 
+						if (ch.mainCache.is_filtered()) 
 							sortDB.add(ch); // Unfiltered Addi Wpt with filtered Main Wpt, show it on its own
 						// else Main cache is not filtered, Addi will be added below main cache further down
 					} else { //Addi without main Cache
@@ -146,7 +146,7 @@
 					if (ch.hasAddiWpt()){
 						for (int j=0; j&lt;ch.addiWpts.getCount();j++){
 							addiWpt = (CacheHolder)ch.addiWpts.get(j);
-							if (!addiWpt.is_filtered) sortDB.add(addiWpt);
+							if (!addiWpt.is_filtered()) sortDB.add(addiWpt);
 						}
 					}// if hasAddiWpt
 				} // if AddiWpt
@@ -171,17 +171,17 @@
 			try {
 			   CacheHolder ch = (CacheHolder)cacheDB.get(row);
 				if(isSelected == true) ta.fillColor = COLOR_SELECTED;
-				else if(ch.is_available == false &amp;&amp; ch.is_found == true){
+				else if(ch.is_available() == false &amp;&amp; ch.is_found() == true){
 					ta.fillColor = COLOR_ARCHFND_BG;   // Green BG
 					ta.foreground = COLOR_ARCHFND_FG;  // Red FG
 				}
-				else if(ch.is_archived == true) ta.fillColor = COLOR_ARCHIVED;
-				else if(ch.is_available == false) ta.fillColor = COLOR_AVAILABLE;
-				else if(ch.is_owned == true) ta.fillColor = COLOR_OWNED;
-				else if(ch.is_found == true) ta.fillColor = COLOR_FOUND;
-				else if(ch.is_flaged == true) ta.fillColor = COLOR_FLAGED;
+				else if( ch.is_archived())  ta.fillColor = COLOR_ARCHIVED;
+				else if(!ch.is_available()) ta.fillColor = COLOR_AVAILABLE;
+				else if( ch.is_owned())     ta.fillColor = COLOR_OWNED;
+				else if( ch.is_found())     ta.fillColor = COLOR_FOUND;
+				else if( ch.is_flaged)        ta.fillColor = COLOR_FLAGED;
 			} catch (Exception e) {};
-		} else if (row==-1 &amp;&amp; colMap[col]==0 &amp;&amp; Global.getProfile().showBlacklisted) ta.fillColor=Color.Black;
+		} else if (row==-1 &amp;&amp; colMap[col]==0 &amp;&amp; Global.getProfile().showBlacklisted()) ta.fillColor=Color.Black;
 		return ta;
 	}
 
@@ -211,7 +211,7 @@
 		if(row == -1) return colName[colMap[col]];
 		try { // Access to row can fail if many caches are deleted
 			CacheHolder ch = (CacheHolder)cacheDB.get(row);
-			if(ch.is_filtered == false){
+			if(ch.is_filtered() == false){
 				switch(colMap[col]) { // Faster than using column names
 					case 0: // Checkbox
 						if (ch.is_Checked) 
@@ -219,48 +219,48 @@
 						else 
 							return checkboxUnticked;
 					case 1: // Type
-						return CacheType.cache2Img(ch.type);
+						return CacheType.cache2Img(ch.getType());
 					case 2: // Difficulty;
-						return ch.hard;
+						return ch.getHard();
 					case 3: // Terrain
-						return ch.terrain;
+						return ch.getTerrain();
 					case 4: // Waypoint
 						if (showExtraWptInfo) {
-							if(ch.is_incomplete) return new IconAndText(skull, ch.wayPoint, fm);
-							if(ch.is_new       ) return new IconAndText(yellow, ch.wayPoint, fm);
-							if(ch.is_update    ) return new IconAndText(red, ch.wayPoint, fm); // TODO this is for sure quite inefficient, better store it, don't create always new when the table is refreshed or only scrolled
-							if(ch.is_log_update) return new IconAndText(blue, ch.wayPoint, fm);
+							if(ch.is_incomplete()) return new IconAndText(skull, ch.getWayPoint(), fm);
+							if(ch.is_new()       ) return new IconAndText(yellow, ch.getWayPoint(), fm);
+							if(ch.is_updated()    ) return new IconAndText(red, ch.getWayPoint(), fm); // TODO this is for sure quite inefficient, better store it, don't create always new when the table is refreshed or only scrolled
+							if(ch.is_log_updated()) return new IconAndText(blue, ch.getWayPoint(), fm);
 						}
-						return ch.wayPoint;
+						return ch.getWayPoint();
 					case 5: // Cachename
 						// Fast return for majority of case
-						if (!showExtraWptInfo || (ch.has_bug == false &amp;&amp; ch.noFindLogs==0)) return ch.CacheName; 
+						if (!showExtraWptInfo || (ch.has_bugs() == false &amp;&amp; ch.getNoFindLogs()==0)) return ch.getCacheName(); 
 						// Now need more checks
 						IconAndText wpVal = new IconAndText();
-						if(ch.has_bug == true) wpVal.addColumn(bug);
-						if(ch.noFindLogs &gt; 0){
-							if (ch.noFindLogs &gt; noFindLogs.length) 
+						if(ch.has_bugs() == true) wpVal.addColumn(bug);
+						if(ch.getNoFindLogs() &gt; 0){
+							if (ch.getNoFindLogs() &gt; noFindLogs.length) 
 								wpVal.addColumn(noFindLogs[noFindLogs.length-1]);
 							else 
-								wpVal.addColumn(noFindLogs[ch.noFindLogs-1]);
+								wpVal.addColumn(noFindLogs[ch.getNoFindLogs()-1]);
 						}
-						wpVal.addColumn(ch.CacheName);
+						wpVal.addColumn(ch.getCacheName());
 						return wpVal;
 					case 6: // Location
 						return ch.LatLon;
 					case 7: // Owner
-						return ch.CacheOwner;
+						return ch.getCacheOwner();
 					case 8: // Date hidden
-						return ch.DateHidden;
+						return ch.getDateHidden();
 					case 9: // Status
-						return ch.CacheStatus;
+						return ch.getCacheStatus();
 					case 10: // Distance
 						return ch.getDistance();
 					case 11: // Bearing
 						return ch.bearing;
 					case 12: // Size
-						if (ch.CacheSize.length()==0) return &quot;?&quot;;
-						switch (ch.CacheSize.charAt(0)) {
+						if (ch.getCacheSize().length()==0) return &quot;?&quot;;
+						switch (ch.getCacheSize().charAt(0)) {
 							case 'M': return picSizeMicro;
 							case 'S': return picSizeSmall;
 							case 'R': return picSizeReg;
@@ -269,11 +269,11 @@
 							default: return &quot;?&quot;;
 						}
 					case 13: // OC number of recommendations
-						if (ch.wayPoint.startsWith(&quot;OC&quot;))
-							return Convert.formatInt(ch.numRecommended);
+						if (ch.getWayPoint().startsWith(&quot;OC&quot;))
+							return Convert.formatInt(ch.getNumRecommended());
 						return null;
 					case 14: // OC rating	
-						if (ch.wayPoint.startsWith(&quot;OC&quot;))
+						if (ch.getWayPoint().startsWith(&quot;OC&quot;))
 							return Convert.formatInt(ch.recommendationScore);
 						return null;
 				} // Switch
@@ -323,7 +323,7 @@
 				cacheDB.sort(new MyComparer(cacheDB, mappedCol,numRows), sortAsc);
 				updateRows();
 				if(a != null){
-					int rownum = Global.getProfile().getCacheIndex(ch.wayPoint);
+					int rownum = Global.getProfile().getCacheIndex(ch.getWayPoint());
 					if(rownum &gt;= 0){
 						tcControl.cursorTo(rownum, 0, true);
 	/*					tcControl.scrollToVisible(rownum, 0);
@@ -365,7 +365,7 @@
 				for (int i=0;i&lt;addiCount;i++){
 					addiWpt = (CacheHolder)ch.addiWpts.get(i);
 					addiWpt.is_Checked = ch.is_Checked;
-					if (!addiWpt.is_filtered){
+					if (!addiWpt.is_filtered()){
 						tcControl.repaintCell(cacheDB.find(addiWpt), x);
 					}
 				}

Modified: trunk/src/CacheWolf/navi/GotoPanel.java
===================================================================
--- trunk/src/CacheWolf/navi/GotoPanel.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/navi/GotoPanel.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -410,7 +410,7 @@
 				CacheHolder ch = new CacheHolder();
 				ch.LatLon = myNavigation.gpsPos.toString();
 				ch.pos = new CWPoint(myNavigation.gpsPos);
-				ch.type = 51; // see CacheType.GC_AW_STAGE_OF_MULTI // TODO unfertig
+				ch.setType(51); // see CacheType.GC_AW_STAGE_OF_MULTI // TODO unfertig
 				mainT.newWaypoint(ch);
 			}
 			// change destination waypoint

Modified: trunk/src/CacheWolf/navi/MapLoaderGui.java
===================================================================
--- trunk/src/CacheWolf/navi/MapLoaderGui.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/navi/MapLoaderGui.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -85,8 +85,8 @@
 		pnlTiles.addLast(cachesLbl);
 		pnlTiles.addNext(distLbl = new mLabel(MyLocale.getMsg(1810,&quot;Within a rectangle of:&quot;)),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
 		distanceInput = new mInput();
-		int tmp = Convert.toInt((Global.getProfile().distOC));
-		tmp = java.lang.Math.max(tmp, Convert.toInt((Global.getProfile().distGC)));
+		int tmp = Convert.toInt((Global.getProfile().getDistOC()));
+		tmp = java.lang.Math.max(tmp, Convert.toInt((Global.getProfile().getDistGC())));
 		distanceInput.setText(Convert.toString((tmp &gt; 0 ? tmp : 15)));
 		pnlTiles.addNext(distanceInput,CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
 		pnlTiles.addLast(km);
@@ -248,11 +248,11 @@
 					}
 					if (ch.pos.isValid() &amp;&amp; ch.pos.latDec != 0 &amp;&amp; ch.pos.lonDec != 0) { // TODO != 0 sollte verschwinden, sobald das handling von nicht gesetzten Koos &#252;berall korrekt ist
 						numdownloaded++;
-						progressBox.setInfo(MyLocale.getMsg(1820, &quot;Downloading map '&quot;)+mapLoader.currentOnlineMapService.getName()+&quot;'\n&quot;+numdownloaded+&quot; / &quot;+numCaches+MyLocale.getMsg(1821, &quot;\n for cache:\n&quot;)+ch.CacheName);
+						progressBox.setInfo(MyLocale.getMsg(1820, &quot;Downloading map '&quot;)+mapLoader.currentOnlineMapService.getName()+&quot;'\n&quot;+numdownloaded+&quot; / &quot;+numCaches+MyLocale.getMsg(1821, &quot;\n for cache:\n&quot;)+ch.getCacheName());
 						try {
 							mapLoader.downloadMap(ch.pos, scale, size, mapsDir);
 						} catch (Exception e) {
-							progressBox.addWarning(MyLocale.getMsg(1822, &quot;Cache:&quot;)+&quot; &quot; + ch.CacheName + &quot;(&quot; + ch.wayPoint + &quot;) &quot;+MyLocale.getMsg(1823, &quot;Ignoring error:&quot;)+&quot; &quot; + e.getMessage()+&quot;\n&quot;);
+							progressBox.addWarning(MyLocale.getMsg(1822, &quot;Cache:&quot;)+&quot; &quot; + ch.getCacheName() + &quot;(&quot; + ch.getWayPoint() + &quot;) &quot;+MyLocale.getMsg(1823, &quot;Ignoring error:&quot;)+&quot; &quot; + e.getMessage()+&quot;\n&quot;);
 						}
 					}
 				}

Modified: trunk/src/CacheWolf/navi/MovingMap.java
===================================================================
--- trunk/src/CacheWolf/navi/MovingMap.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/CacheWolf/navi/MovingMap.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -378,8 +378,8 @@
 			CacheHolder ch;
 			for (int i=cacheDB.size()-1; i&gt;=0; i--) {
 				ch = (CacheHolder) cacheDB.get(i);
-				if (ch.is_Checked &amp;&amp; !ch.is_filtered &amp;&amp; ch != mainT.ch) {
-					if (ch.pos.isValid()) addSymbol(ch.CacheName, ch, CacheType.cache2Img(ch.type), ch.pos);
+				if (ch.is_Checked &amp;&amp; !ch.is_filtered() &amp;&amp; ch != mainT.ch) {
+					if (ch.pos.isValid()) addSymbol(ch.getCacheName(), ch, CacheType.cache2Img(ch.getType()), ch.pos);
 				}
 			}
 		}
@@ -401,7 +401,7 @@
 		}
 		if (ch != null) {
 			addSymbol(&quot;selectedCache&quot;, MARK_CACHE_IMAGE, ch.pos);
-			addSymbolIfNecessary(ch.CacheName, ch, CacheType.cache2Img(ch.type), ch.pos);
+			addSymbolIfNecessary(ch.getCacheName(), ch, CacheType.cache2Img(ch.getType()), ch.pos);
 		}
 		markedCache = ch;
 	}
@@ -1753,9 +1753,9 @@
 				if (clickedOnImage != null &amp;&amp; clickedOnImage instanceof MapSymbol) {
 					clickedCache = ((CacheHolder)((MapSymbol)clickedOnImage).mapObject);
 					if (clickedCache != null) {
-						openCacheDescMenuItem = new MenuItem(MyLocale.getMsg(4270, &quot;Open&quot;)+&quot; '&quot;+(clickedCache.CacheName.length()&gt;0 ? clickedCache.CacheName : clickedCache.wayPoint)+&quot;'$o&quot;); // clickedCache == null can happen if clicked on the goto-symbol
+						openCacheDescMenuItem = new MenuItem(MyLocale.getMsg(4270, &quot;Open&quot;)+&quot; '&quot;+(clickedCache.getCacheName().length()&gt;0 ? clickedCache.getCacheName() : clickedCache.getWayPoint())+&quot;'$o&quot;); // clickedCache == null can happen if clicked on the goto-symbol
 						kontextMenu.addItem(openCacheDescMenuItem);
-						gotoCacheMenuItem = new MenuItem(MyLocale.getMsg(4279, &quot;Goto&quot;)+ &quot; '&quot;+(clickedCache.CacheName.length()&gt;0 ? clickedCache.CacheName : clickedCache.wayPoint)+&quot;'$g&quot;); // clickedCache == null can happen if clicked on the goto-symbol
+						gotoCacheMenuItem = new MenuItem(MyLocale.getMsg(4279, &quot;Goto&quot;)+ &quot; '&quot;+(clickedCache.getCacheName().length()&gt;0 ? clickedCache.getCacheName() : clickedCache.getWayPoint())+&quot;'$g&quot;); // clickedCache == null can happen if clicked on the goto-symbol
 						kontextMenu.addItem(gotoCacheMenuItem);
 						if (Global.mainForm.cacheListVisible) { 
 							addCachetoListMenuItem = new MenuItem(MyLocale.getMsg(199,&quot;Add to cachetour&quot;));
@@ -1888,7 +1888,7 @@
 					}
 					if (action == addCachetoListMenuItem) {
 						kontextMenu.close();
-						Global.mainForm.cacheList.addCache(clickedCache.wayPoint);
+						Global.mainForm.cacheList.addCache(clickedCache.getWayPoint());
 					}
 					for (int i=0; i&lt;miLuminary.length; i++) {
 						if (action == miLuminary[i]) {

Modified: trunk/src/exp/ASCExporter.java
===================================================================
--- trunk/src/exp/ASCExporter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/exp/ASCExporter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -22,7 +22,7 @@
 	public String record (CacheHolderDetail holder, String lat, String lon){
 		StringBuffer strBuf = new StringBuffer(100);
 		String dummy;
-		dummy = holder.CacheName;
+		dummy = holder.getCacheName();
 		dummy = dummy.replace(',', ' ');
 		strBuf.append(dummy);
 		strBuf.append(&quot;,&quot;);

Modified: trunk/src/exp/ExploristExporter.java
===================================================================
--- trunk/src/exp/ExploristExporter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/exp/ExploristExporter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -129,7 +129,7 @@
 		int expCount = 0;
 		for (int i = 0; i &lt; cacheDB.size(); i++) {
 			ch = (CacheHolder) cacheDB.get(i);
-			if (ch.is_black == false &amp;&amp; ch.is_filtered == false)
+			if (ch.is_black() == false &amp;&amp; ch.is_filtered() == false)
 				counter++;
 		}
 
@@ -137,7 +137,7 @@
 			PrintWriter outp = null;
 			for (int i = 0; i &lt; cacheDB.size(); i++) {
 				ch = (CacheHolder) cacheDB.get(i);
-				if (ch.is_black == false &amp;&amp; ch.is_filtered == false) {
+				if (ch.is_black() == false &amp;&amp; ch.is_filtered() == false) {
 					// all 200 caches we need a new file
 					if (expCount % 200 == 0) {
 						if (outp != null) {
@@ -226,42 +226,42 @@
 		sb.append(&quot;E,&quot;);
 		sb.append(&quot;0000,&quot;); // Height
 		sb.append(&quot;M,&quot;); // in meter
-		sb.append(chD.wayPoint);
+		sb.append(chD.getWayPoint());
 		sb.append(&quot;,&quot;);
 		String add = &quot;&quot;;
 		if (chD.isAddiWpt()) {
-			if (chD.type == 50) {
+			if (chD.getType() == 50) {
 				add = &quot;Pa:&quot;;
-			} else if (chD.type == 51) {
+			} else if (chD.getType() == 51) {
 				add = &quot;St:&quot;;
-			} else if (chD.type == 52) {
+			} else if (chD.getType() == 52) {
 				add = &quot;Qu:&quot;; 
-			} else if (chD.type == 53) {	
+			} else if (chD.getType() == 53) {	
 				add = &quot;Fi:&quot;;
-			} else if (chD.type == 54) {
+			} else if (chD.getType() == 54) {
 				add = &quot;Tr:&quot;;
-			} else if (chD.type == 55) {	
+			} else if (chD.getType() == 55) {	
 				add = &quot;Re:&quot;;
 			}
-			sb.append(add).append(removeCommas(chD.CacheName));
+			sb.append(add).append(removeCommas(chD.getCacheName()));
 		} else {
-			sb.append(removeCommas(chD.CacheName));
+			sb.append(removeCommas(chD.getCacheName()));
 		}		
 		sb.append(&quot;,&quot;);
-		sb.append(removeCommas(chD.CacheOwner));
+		sb.append(removeCommas(chD.getCacheOwner()));
 		sb.append(&quot;,&quot;);
 		sb.append(removeCommas(Common.rot13(chD.Hints)));
 		sb.append(&quot;,&quot;);
 		
 		if (!add.equals(&quot;&quot;)) { // Set Picture in Explorist to Virtual
 			sb.append(&quot;Virtual Cache&quot;);
-		} else if (chD.type != 8) { // Rewrite Unknown Caches
-			sb.append(CacheType.transType(chD.type));
+		} else if (chD.getType() != 8) { // Rewrite Unknown Caches
+			sb.append(CacheType.transType(chD.getType()));
 		} else {
 			sb.append(&quot;Mystery Cache&quot;);
 		}
 		sb.append(&quot;,&quot;);
-		sb.append(toGsDateFormat(chD.DateHidden));  // created - DDMMYYY, YYY = year - 1900
+		sb.append(toGsDateFormat(chD.getDateHidden()));  // created - DDMMYYY, YYY = year - 1900
 		sb.append(&quot;,&quot;);
 		String lastFound = &quot;0000&quot;;
 		for (int i = 0; i &lt; chD.CacheLogs.size(); i++) {
@@ -272,9 +272,9 @@
 		
 		sb.append(toGsDateFormat(lastFound)); // lastFound - DDMMYYY, YYY = year - 1900
 		sb.append(&quot;,&quot;);
-		sb.append(removeCommas(chD.hard));
+		sb.append(removeCommas(chD.getHard()));
 		sb.append(&quot;,&quot;);
-		sb.append(removeCommas(chD.terrain));
+		sb.append(removeCommas(chD.getTerrain()));
 		sb.append(&quot;*41&quot;);
 		return Exporter.simplifyString(sb.toString() + &quot;\r\n&quot;);
 	}

Modified: trunk/src/exp/Exporter.java
===================================================================
--- trunk/src/exp/Exporter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/exp/Exporter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -94,7 +94,7 @@
 		int expCount = 0;
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			ch = (CacheHolder)cacheDB.get(i);
-			if(ch.is_black == false &amp;&amp; ch.is_filtered == false) counter++;
+			if(ch.is_black() == false &amp;&amp; ch.is_filtered() == false) counter++;
 		}
 
 		try{
@@ -104,7 +104,7 @@
 			holder=new CacheHolderDetail();
 			for(int i = 0; i&lt;cacheDB.size(); i++){
 				ch=(CacheHolder)cacheDB.get(i);
-				if(ch.is_black == false &amp;&amp; ch.is_filtered == false){
+				if(ch.is_black() == false &amp;&amp; ch.is_filtered() == false){
 					expCount++;
 					h.progress = (float)expCount/(float)counter;
 					h.changed();
@@ -417,20 +417,20 @@
 
     public static String getShortDetails( CacheHolder ch ) {
     	StringBuffer strBuf = new StringBuffer(7);
-    	strBuf.append(CacheType.shortType(ch.type).toLowerCase());			
+    	strBuf.append(CacheType.shortType(ch.getType()).toLowerCase());			
     	if (!ch.isAddiWpt()) {
-    		if ( (ch.hard.length() &gt; 0) &amp;&amp; (ch.terrain.length() &gt; 0) ) {
-    			strBuf.append(ch.hard.charAt(0));
-    			if ( ch.hard.endsWith(&quot;.5&quot;) ) {
+    		if ( (ch.getHard().length() &gt; 0) &amp;&amp; (ch.getTerrain().length() &gt; 0) ) {
+    			strBuf.append(ch.getHard().charAt(0));
+    			if ( ch.getHard().endsWith(&quot;.5&quot;) ) {
     				strBuf.append(&quot;5&quot;);
     			}
     			strBuf.append(&quot;/&quot;);
-    			strBuf.append(ch.terrain.charAt(0));
-    			if ( ch.terrain.endsWith(&quot;.5&quot;) ) {
+    			strBuf.append(ch.getTerrain().charAt(0));
+    			if ( ch.getTerrain().endsWith(&quot;.5&quot;) ) {
     				strBuf.append(&quot;5&quot;);
     			}
     		}
-    		strBuf.append(ch.CacheSize.substring(0, 1).toLowerCase());
+    		strBuf.append(ch.getCacheSize().substring(0, 1).toLowerCase());
     	}
 
     	return strBuf.toString();

Modified: trunk/src/exp/GPXExporter.java
===================================================================
--- trunk/src/exp/GPXExporter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/exp/GPXExporter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -56,38 +56,38 @@
 		try{
 			strBuf.append(&quot;  &lt;wpt lat=\&quot;&quot;+lat+&quot;\&quot; lon=\&quot;&quot;+lon+&quot;\&quot;&gt;\r\n&quot;);
 		
-			String tim = ch.DateHidden.length()&gt;0 ? ch.DateHidden : DEFAULT_DATE;
+			String tim = ch.getDateHidden().length()&gt;0 ? ch.getDateHidden() : DEFAULT_DATE;
 			strBuf.append(&quot;    &lt;time&gt;&quot;).append(tim.toString()).append(&quot;T00:00:00.0000000-07:00&lt;/time&gt;\r\n&quot;);
-			strBuf.append(&quot;    &lt;name&gt;&quot;).append(ch.wayPoint).append(&quot;&lt;/name&gt;\r\n&quot;);
+			strBuf.append(&quot;    &lt;name&gt;&quot;).append(ch.getWayPoint()).append(&quot;&lt;/name&gt;\r\n&quot;);
 			if (ch.isAddiWpt()){
 				strBuf.append(&quot;    &lt;cmt&gt;&quot;).append(SafeXML.cleanGPX(ch.LongDescription)).append(&quot;&lt;/cmt&gt;\r\n&quot;);
 			}
-			strBuf.append(&quot;    &lt;desc&gt;&quot;).append(SafeXML.cleanGPX(ch.CacheName)).append(&quot; by &quot;).append(SafeXML.cleanGPX(ch.CacheOwner)).append(&quot;&lt;/desc&gt;\r\n&quot;);
-			strBuf.append(&quot;    &lt;url&gt;<A HREF="http://www.geocaching.com/seek/cache_details.aspx?wp=">http://www.geocaching.com/seek/cache_details.aspx?wp=</A>&quot;).append(ch.wayPoint).append(&quot;&amp;Submit6=Find&lt;/url&gt;\r\n&quot;);
-			strBuf.append(&quot;    &lt;urlname&gt;&quot;).append(SafeXML.cleanGPX(ch.CacheName)).append(&quot; by &quot;).append(SafeXML.cleanGPX(ch.CacheOwner)).append(&quot;&lt;/urlname&gt;\r\n&quot;);
+			strBuf.append(&quot;    &lt;desc&gt;&quot;).append(SafeXML.cleanGPX(ch.getCacheName())).append(&quot; by &quot;).append(SafeXML.cleanGPX(ch.getCacheOwner())).append(&quot;&lt;/desc&gt;\r\n&quot;);
+			strBuf.append(&quot;    &lt;url&gt;<A HREF="http://www.geocaching.com/seek/cache_details.aspx?wp=">http://www.geocaching.com/seek/cache_details.aspx?wp=</A>&quot;).append(ch.getWayPoint()).append(&quot;&amp;Submit6=Find&lt;/url&gt;\r\n&quot;);
+			strBuf.append(&quot;    &lt;urlname&gt;&quot;).append(SafeXML.cleanGPX(ch.getCacheName())).append(&quot; by &quot;).append(SafeXML.cleanGPX(ch.getCacheOwner())).append(&quot;&lt;/urlname&gt;\r\n&quot;);
 			if (!ch.isAddiWpt()){
-				if ( ch.is_found ) {
+				if ( ch.is_found() ) {
 					strBuf.append(&quot;    &lt;sym&gt;Geocache Found&lt;/sym&gt;\r\n&quot;);					
 				} else {
 					strBuf.append(&quot;    &lt;sym&gt;Geocache&lt;/sym&gt;\r\n&quot;);
 				}
-				strBuf.append(&quot;    &lt;type&gt;Geocache|&quot;).append(CacheType.transType(ch.type)).append(&quot;&lt;/type&gt;\r\n&quot;);
-				String dummyAvailable = ch.is_available ? STRING_TRUE:STRING_FALSE;
-				String dummyArchived = ch.is_archived ? STRING_TRUE:STRING_FALSE;
+				strBuf.append(&quot;    &lt;type&gt;Geocache|&quot;).append(CacheType.transType(ch.getType())).append(&quot;&lt;/type&gt;\r\n&quot;);
+				String dummyAvailable = ch.is_available() ? STRING_TRUE:STRING_FALSE;
+				String dummyArchived = ch.is_archived() ? STRING_TRUE:STRING_FALSE;
 				strBuf.append(&quot;    &lt;groundspeak:cache id=\&quot;&quot;).append( ch.GetCacheID() ).append( &quot;\&quot; available=\&quot;&quot; ).append( dummyAvailable ).append( &quot;\&quot; archived=\&quot;&quot; ).append( dummyArchived).append( &quot;\&quot; xmlns:groundspeak=\&quot;<A HREF="http://www.groundspeak.com/cache/1/0\">http://www.groundspeak.com/cache/1/0\</A>&quot;&gt;\r\n&quot;);
-				strBuf.append(&quot;      &lt;groundspeak:name&gt;&quot;).append(SafeXML.cleanGPX(ch.CacheName)).append(&quot;&lt;/groundspeak:name&gt;\r\n&quot;);
-				strBuf.append(&quot;      &lt;groundspeak:placed_by&gt;&quot;).append(SafeXML.cleanGPX(ch.CacheOwner)).append(&quot;&lt;/groundspeak:placed_by&gt;\r\n&quot;);
+				strBuf.append(&quot;      &lt;groundspeak:name&gt;&quot;).append(SafeXML.cleanGPX(ch.getCacheName())).append(&quot;&lt;/groundspeak:name&gt;\r\n&quot;);
+				strBuf.append(&quot;      &lt;groundspeak:placed_by&gt;&quot;).append(SafeXML.cleanGPX(ch.getCacheOwner())).append(&quot;&lt;/groundspeak:placed_by&gt;\r\n&quot;);
 				//todo low prio: correct owner-id
-				strBuf.append(&quot;      &lt;groundspeak:owner id=\&quot;23\&quot;&gt;&quot;).append(SafeXML.cleanGPX(ch.CacheOwner)+&quot;&lt;/groundspeak:owner&gt;\r\n&quot;);
-				strBuf.append(&quot;      &lt;groundspeak:type&gt;&quot;).append(CacheType.transType(ch.type)).append(&quot;&lt;/groundspeak:type&gt;\r\n&quot;);
-				strBuf.append(&quot;      &lt;groundspeak:container&gt;&quot;).append(ch.CacheSize).append(&quot;&lt;/groundspeak:container&gt;\r\n&quot;);
+				strBuf.append(&quot;      &lt;groundspeak:owner id=\&quot;23\&quot;&gt;&quot;).append(SafeXML.cleanGPX(ch.getCacheOwner())+&quot;&lt;/groundspeak:owner&gt;\r\n&quot;);
+				strBuf.append(&quot;      &lt;groundspeak:type&gt;&quot;).append(CacheType.transType(ch.getType())).append(&quot;&lt;/groundspeak:type&gt;\r\n&quot;);
+				strBuf.append(&quot;      &lt;groundspeak:container&gt;&quot;).append(ch.getCacheSize()).append(&quot;&lt;/groundspeak:container&gt;\r\n&quot;);
 				//for Colorado/Oregon: 2.0 -&gt; 2
-				String diffTerr = ch.hard.replace(',','.');
+				String diffTerr = ch.getHard().replace(',','.');
 				if ( diffTerr.endsWith( &quot;.0&quot; ) ) {
 					diffTerr = diffTerr.substring(0, 1);
 				}
 				strBuf.append(&quot;      &lt;groundspeak:difficulty&gt;&quot;).append(diffTerr).append(&quot;&lt;/groundspeak:difficulty&gt;\r\n&quot;);
-				diffTerr = ch.terrain.replace(',','.');
+				diffTerr = ch.getTerrain().replace(',','.');
 				if ( diffTerr.endsWith( &quot;.0&quot; ) ) {
 					diffTerr = diffTerr.substring(0, 1);
 				}
@@ -96,13 +96,13 @@
 				strBuf.append(&quot;      &lt;groundspeak:country&gt;&quot;).append(SafeXML.cleanGPX(ch.Country)+&quot;&lt;/groundspeak:country&gt;\r\n&quot;);
 				strBuf.append(&quot;      &lt;groundspeak:state&gt;&quot;).append(SafeXML.cleanGPX(ch.State)+&quot;&lt;/groundspeak:state&gt;\r\n&quot;);
 												
-				String dummyHTML = ch.is_HTML ? STRING_TRUE:STRING_FALSE;
+				String dummyHTML = ch.is_HTML() ? STRING_TRUE:STRING_FALSE;
 				strBuf.append(&quot;      &lt;groundspeak:long_description html=\&quot;&quot; ).append( dummyHTML ).append( &quot;\&quot;&gt;\r\n&quot;);
 				strBuf.append(&quot;      &quot;).append(SafeXML.cleanGPX(ch.LongDescription));
 				strBuf.append(&quot;      \n&lt;/groundspeak:long_description&gt;\r\n&quot;);
 				strBuf.append(&quot;	  &lt;groundspeak:encoded_hints&gt;&quot;).append(SafeXML.cleanGPX(Common.rot13(ch.Hints))).append(&quot;&lt;/groundspeak:encoded_hints&gt;\r\n&quot;);
 				strBuf.append(&quot;      &lt;groundspeak:logs&gt;\r\n&quot;);
-				if ( Global.getPref().exportGpxAsMyFinds &amp;&amp; ch.is_found ) {
+				if ( Global.getPref().exportGpxAsMyFinds &amp;&amp; ch.is_found() ) {
 					if ( ch.OwnLogId.length() != 0 ) {
 						strBuf.append(&quot;        &lt;groundspeak:log id=\&quot;&quot; ).append( ch.OwnLogId ).append( &quot;\&quot;&gt;\r\n&quot;);						
 					} else {
@@ -149,8 +149,8 @@
 				strBuf.append(&quot;    &lt;/groundspeak:cache&gt;\r\n&quot;);
 			}else {
 				// there is no HTML in the description of addi wpts
-				strBuf.append(&quot;    &lt;sym&gt;&quot;).append(CacheType.transType(ch.type)).append(&quot;&lt;/sym&gt;\r\n&quot;);
-				strBuf.append(&quot;    &lt;type&gt;Waypoint|&quot;).append(CacheType.transType(ch.type)).append(&quot;&lt;/type&gt;\r\n&quot;);
+				strBuf.append(&quot;    &lt;sym&gt;&quot;).append(CacheType.transType(ch.getType())).append(&quot;&lt;/sym&gt;\r\n&quot;);
+				strBuf.append(&quot;    &lt;type&gt;Waypoint|&quot;).append(CacheType.transType(ch.getType())).append(&quot;&lt;/type&gt;\r\n&quot;);
 			}
 			strBuf.append(&quot;  &lt;/wpt&gt;\r\n&quot;);
 		}catch(Exception e){

Modified: trunk/src/exp/HTMLExporter.java
===================================================================
--- trunk/src/exp/HTMLExporter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/exp/HTMLExporter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -70,7 +70,7 @@
 			int counter = 0;
 			for(int i = 0; i&lt;cacheDB.size();i++){
 				ch = (CacheHolder)cacheDB.get(i);
-				if(ch.is_black == false &amp;&amp; ch.is_filtered == false) counter++;
+				if(ch.is_black() == false &amp;&amp; ch.is_filtered() == false) counter++;
 			}
 			
 			pbf.showMainTask = false;
@@ -82,38 +82,38 @@
 				h.changed();
 
 				ch = (CacheHolder)cacheDB.get(i);
-				if(	ch.is_black == false &amp;&amp; ch.is_filtered == false){
+				if(	ch.is_black() == false &amp;&amp; ch.is_filtered() == false){
 					holder=ch.getCacheDetails(false,true);
 					varParams = new Hashtable();
-					varParams.put(&quot;TYPE&quot;, CacheType.transType(holder.type));
-					varParams.put(&quot;SIZE&quot;, holder.CacheSize);
-					varParams.put(&quot;WAYPOINT&quot;, holder.wayPoint);
-					varParams.put(&quot;NAME&quot;, holder.CacheName);
-					varParams.put(&quot;OWNER&quot;, holder.CacheOwner);
-					varParams.put(&quot;DIFFICULTY&quot;, holder.hard);
-					varParams.put(&quot;TERRAIN&quot;, holder.terrain);
+					varParams.put(&quot;TYPE&quot;, CacheType.transType(holder.getType()));
+					varParams.put(&quot;SIZE&quot;, holder.getCacheSize());
+					varParams.put(&quot;WAYPOINT&quot;, holder.getWayPoint());
+					varParams.put(&quot;NAME&quot;, holder.getCacheName());
+					varParams.put(&quot;OWNER&quot;, holder.getCacheOwner());
+					varParams.put(&quot;DIFFICULTY&quot;, holder.getHard());
+					varParams.put(&quot;TERRAIN&quot;, holder.getTerrain());
 					varParams.put(&quot;DISTANCE&quot;, holder.getDistance());
 					varParams.put(&quot;BEARING&quot;, holder.bearing);
 					varParams.put(&quot;LATLON&quot;, holder.LatLon);
-					varParams.put(&quot;STATUS&quot;, holder.CacheStatus);
-					varParams.put(&quot;DATE&quot;, holder.DateHidden);
+					varParams.put(&quot;STATUS&quot;, holder.getCacheStatus());
+					varParams.put(&quot;DATE&quot;, holder.getDateHidden());
 					cache_index.add(varParams);
 					//We can generate the individual page here!
 					try{
 						Template page_tpl = new Template(template_init_page);
-						page_tpl.setParam(&quot;TYPE&quot;, CacheType.transType(holder.type));
-						page_tpl.setParam(&quot;SIZE&quot;, holder.CacheSize);
-						page_tpl.setParam(&quot;WAYPOINT&quot;, holder.wayPoint);
-						page_tpl.setParam(&quot;NAME&quot;, holder.CacheName);
-						page_tpl.setParam(&quot;OWNER&quot;, holder.CacheOwner);
-						page_tpl.setParam(&quot;DIFFICULTY&quot;, holder.hard);
-						page_tpl.setParam(&quot;TERRAIN&quot;, holder.terrain);
+						page_tpl.setParam(&quot;TYPE&quot;, CacheType.transType(holder.getType()));
+						page_tpl.setParam(&quot;SIZE&quot;, holder.getCacheSize());
+						page_tpl.setParam(&quot;WAYPOINT&quot;, holder.getWayPoint());
+						page_tpl.setParam(&quot;NAME&quot;, holder.getCacheName());
+						page_tpl.setParam(&quot;OWNER&quot;, holder.getCacheOwner());
+						page_tpl.setParam(&quot;DIFFICULTY&quot;, holder.getHard());
+						page_tpl.setParam(&quot;TERRAIN&quot;, holder.getTerrain());
 						page_tpl.setParam(&quot;DISTANCE&quot;, holder.getDistance());
 						page_tpl.setParam(&quot;BEARING&quot;, holder.bearing);
 						page_tpl.setParam(&quot;LATLON&quot;, holder.LatLon);
-						page_tpl.setParam(&quot;STATUS&quot;, holder.CacheStatus);
-						page_tpl.setParam(&quot;DATE&quot;, holder.DateHidden);
-						if (holder.is_HTML)
+						page_tpl.setParam(&quot;STATUS&quot;, holder.getCacheStatus());
+						page_tpl.setParam(&quot;DATE&quot;, holder.getDateHidden());
+						if (holder.is_HTML())
 							page_tpl.setParam(&quot;DESCRIPTION&quot;, modifyLongDesc(holder,targetDir));
 						else {
 							String dummyText = new String();
@@ -178,7 +178,7 @@
 						// Map images
 						mapImg.clear();
 						mapImgParams = new Hashtable();
-						String mapImgFile = new String(holder.wayPoint + &quot;_map.gif&quot;);
+						String mapImgFile = new String(holder.getWayPoint() + &quot;_map.gif&quot;);
 						// check if map file exists
 						File test = new File(profile.dataDir + mapImgFile);
 						if (test.exists()) {
@@ -188,7 +188,7 @@
 							mapImg.add(mapImgParams);
 							
 							mapImgParams = new Hashtable();
-							mapImgFile = holder.wayPoint + &quot;_map_2.gif&quot;;
+							mapImgFile = holder.getWayPoint() + &quot;_map_2.gif&quot;;
 							mapImgParams.put(&quot;FILE&quot;, mapImgFile);
 							mapImgParams.put(&quot;TEXT&quot;,mapImgFile);
 							DataMover.copy(profile.dataDir + mapImgFile,targetDir + mapImgFile);
@@ -198,7 +198,7 @@
 						}
 
 						
-						PrintWriter pagefile = new PrintWriter(new BufferedWriter(new FileWriter(targetDir + holder.wayPoint+&quot;.html&quot;)));
+						PrintWriter pagefile = new PrintWriter(new BufferedWriter(new FileWriter(targetDir + holder.getWayPoint()+&quot;.html&quot;)));
 						pagefile.print(page_tpl.output());
 						pagefile.close();
 					}catch(Exception e){

Modified: trunk/src/exp/KMLExporter.java
===================================================================
--- trunk/src/exp/KMLExporter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/exp/KMLExporter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -77,7 +77,7 @@
 		int expCount = 0;
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			ch = (CacheHolder)cacheDB.get(i);
-			if(ch.is_black == false &amp;&amp; ch.is_filtered == false) counter++;
+			if(ch.is_black() == false &amp;&amp; ch.is_filtered() == false) counter++;
 		}
 		copyIcons(outFile.getParent());
 		buildOutDB();
@@ -126,7 +126,7 @@
 								addiWpt = (CacheHolder) ch.addiWpts.get(j);
 								holder=new CacheHolderDetail(addiWpt);
 								expCount++;
-								if (holder.pos.isValid() &amp;&amp;  ! holder.is_filtered){
+								if (holder.pos.isValid() &amp;&amp;  ! holder.is_filtered()){
 									if (! createdAdditionalWaypointsFolder) {
 										outp.print(startFolder(&quot;Additional Waypoints&quot;, false));
 										createdAdditionalWaypointsFolder = true;
@@ -178,12 +178,12 @@
 		for(int i = 0; i&lt;cacheDB.size(); i++){
 			ch=(CacheHolder)cacheDB.get(i);
 			// TODO Das Argument nach STring zu casten gef&#228;llt mir nicht ganz...
-			if(ch.is_black == false &amp;&amp; ch.is_filtered == false &amp;&amp; !ch.isAddiWpt()){
-				if (ch.is_found) { tmp = (Vector) outCacheDB[FOUND].get(String.valueOf(ch.type));}
-				else if (ch.is_owned) { tmp = (Vector) outCacheDB[OWNED].get(String.valueOf(ch.type));}
-				else if (ch.is_archived || !ch.is_available){ tmp = (Vector) outCacheDB[NOT_AVAILABLE].get(String.valueOf(ch.type));}
-				else if (ch.is_available){ tmp = (Vector) outCacheDB[AVAILABLE].get(String.valueOf(ch.type));}
-				else { tmp = (Vector) outCacheDB[UNKNOWN].get(String.valueOf(ch.type));}
+			if(ch.is_black() == false &amp;&amp; ch.is_filtered() == false &amp;&amp; !ch.isAddiWpt()){
+				if (ch.is_found()) { tmp = (Vector) outCacheDB[FOUND].get(String.valueOf(ch.getType()));}
+				else if (ch.is_owned()) { tmp = (Vector) outCacheDB[OWNED].get(String.valueOf(ch.getType()));}
+				else if (ch.is_archived() || !ch.is_available()){ tmp = (Vector) outCacheDB[NOT_AVAILABLE].get(String.valueOf(ch.getType()));}
+				else if (ch.is_available()){ tmp = (Vector) outCacheDB[AVAILABLE].get(String.valueOf(ch.getType()));}
+				else { tmp = (Vector) outCacheDB[UNKNOWN].get(String.valueOf(ch.getType()));}
 				
 				tmp.add(ch);
 			}
@@ -279,7 +279,7 @@
 		if (ch.URL != null){
 			strBuf.append(&quot;      &lt;description&gt;&quot;+SafeXML.clean(ch.URL)+&quot;&lt;/description&gt;\r\n&quot;);
 		}
-		strBuf.append(&quot;      &lt;name&gt;&quot;+ ch.wayPoint + &quot; - &quot; + SafeXML.clean(ch.CacheName) +&quot;&lt;/name&gt;\r\n&quot;);
+		strBuf.append(&quot;      &lt;name&gt;&quot;+ ch.getWayPoint() + &quot; - &quot; + SafeXML.clean(ch.getCacheName()) +&quot;&lt;/name&gt;\r\n&quot;);
 		strBuf.append(&quot;      &lt;LookAt&gt;\r\n&quot;);
 		strBuf.append(&quot;         &lt;latitude&gt;&quot; + lat + &quot;&lt;/latitude&gt;\r\n&quot;);
 		strBuf.append(&quot;         &lt;longitude&gt;&quot; + lon + &quot;&lt;/longitude&gt;\r\n&quot;);
@@ -292,7 +292,7 @@
 		strBuf.append(&quot;      &lt;IconStyle&gt;\r\n&quot;);
 		strBuf.append(&quot;         &lt;Icon&gt;\r\n&quot;);
 //		strBuf.append(&quot;            &lt;href&gt;&quot;+ File.getProgramDirectory()+ &quot;/&quot; + CacheType.type2pic(Convert.parseInt(ch.type))+ &quot;&lt;/href&gt;\r\n&quot;);
-		strBuf.append(&quot;            &lt;href&gt;&quot;+ CacheType.type2pic(ch.type)+ &quot;&lt;/href&gt;\r\n&quot;);
+		strBuf.append(&quot;            &lt;href&gt;&quot;+ CacheType.type2pic(ch.getType())+ &quot;&lt;/href&gt;\r\n&quot;);
 		strBuf.append(&quot;         &lt;/Icon&gt;\r\n&quot;);
 		strBuf.append(&quot;      &lt;/IconStyle&gt;\r\n&quot;);
 		strBuf.append(&quot;      &lt;LabelStyle&gt;\r\n&quot;);
@@ -314,9 +314,9 @@
 	}
 	
 	private String getColor(CacheHolderDetail ch){
-		if (ch.is_found) return COLOR_FOUND;
-		if (ch.is_owned) return COLOR_OWNED;
-		if (ch.is_archived || !ch.is_available) return COLOR_NOT_AVAILABLE;
+		if (ch.is_found()) return COLOR_FOUND;
+		if (ch.is_owned()) return COLOR_OWNED;
+		if (ch.is_archived() || !ch.is_available()) return COLOR_NOT_AVAILABLE;
 		
 		return COLOR_AVAILABLE;
 	}

Modified: trunk/src/exp/LocExporter.java
===================================================================
--- trunk/src/exp/LocExporter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/exp/LocExporter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -40,7 +40,7 @@
 		if (!chD.pos.isValid()) return null;
 		StringBuffer strBuf = new StringBuffer(200);
 		strBuf.append(&quot;&lt;waypoint&gt;\r\n   &lt;name id=\&quot;&quot;);
-		String wptName=simplifyString(chD.wayPoint);
+		String wptName=simplifyString(chD.getWayPoint());
 		if (Global.getPref().addDetailsToWaypoint) {
 			wptName += getShortDetails( chD );			
 		}
@@ -52,7 +52,7 @@
 			} catch (Exception ex){ pref.log(&quot;Invalid value for garmin.MaxWaypointLength&quot;); }
 		}
 		strBuf.append(&quot;\&quot;&gt;&lt;![CDATA[&quot;);
-		strBuf.append(simplifyString(chD.CacheName));
+		strBuf.append(simplifyString(chD.getCacheName()));
 		if (Global.getPref().addDetailsToName) {
 			if ( !Global.getPref().addDetailsToWaypoint ) {
 				strBuf.append( getShortDetails( chD ) );
@@ -70,7 +70,7 @@
 		if (gm!=null) {
 			strBuf.append(gm.getIcon(chD));
 		} else {
-			if (chD.is_found)
+			if (chD.is_found())
 				strBuf.append(&quot;Geocache Found&quot;);
 			else
 				strBuf.append(&quot;Geocache&quot;);
@@ -117,17 +117,17 @@
 		
 		public String getIcon(CacheHolderDetail chD) {
 			// First check if there is a mapping for &quot;cache found&quot;
-			if (chD.is_found) {
+			if (chD.is_found()) {
 				for (int i=0; i&lt;mapSize; i++)
 					// TODO Geht das noch sch&#246;ner...? ................ &lt;------------------------------&gt;
-					if (symbols[i].onlyIfFound!=null &amp;&amp; symbols[i].type.equals(String.valueOf(chD.type))) return symbols[i].name;
+					if (symbols[i].onlyIfFound!=null &amp;&amp; symbols[i].type.equals(String.valueOf(chD.getType()))) return symbols[i].name;
 			}
 			// Now try mapping the cache irrespective of the &quot;found&quot; status
 			for (int i=0; i&lt;mapSize; i++)
-				if (symbols[i].type.equals(String.valueOf(chD.type))) return symbols[i].name;
+				if (symbols[i].type.equals(String.valueOf(chD.getType()))) return symbols[i].name;
 		
 			// If it is not a mapped type, just use the standard mapping
-			if (chD.is_found)
+			if (chD.is_found())
 				return &quot;Geocache Found&quot;;
 			else
 				return &quot;Geocache&quot;;

Modified: trunk/src/exp/MSARCSVExporter.java
===================================================================
--- trunk/src/exp/MSARCSVExporter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/exp/MSARCSVExporter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -24,12 +24,12 @@
 
 	public String record(CacheHolderDetail ch, String lat, String lon) {
 		StringBuffer str = new StringBuffer(200);
-		str.append(&quot;\&quot;&quot; + ch.wayPoint + &quot; - &quot; + ch.CacheName + &quot;\&quot;;&quot;);
+		str.append(&quot;\&quot;&quot; + ch.getWayPoint() + &quot; - &quot; + ch.getCacheName() + &quot;\&quot;;&quot;);
 		str.append(lat + &quot;;&quot; + lon +&quot;;&quot;);
-		str.append(&quot;\&quot;&quot; + CacheType.transType(ch.type)+ &quot;\&quot;;&quot;);
-		str.append(&quot;\&quot;&quot; + ch.CacheSize + &quot;\&quot;;&quot;);
-		str.append(&quot;\&quot;&quot; + ch.wayPoint + &quot;\&quot;;&quot;);
-		str.append(&quot;\&quot;&quot; + ch.DateHidden + &quot;\&quot;;&quot;);
+		str.append(&quot;\&quot;&quot; + CacheType.transType(ch.getType())+ &quot;\&quot;;&quot;);
+		str.append(&quot;\&quot;&quot; + ch.getCacheSize() + &quot;\&quot;;&quot;);
+		str.append(&quot;\&quot;&quot; + ch.getWayPoint() + &quot;\&quot;;&quot;);
+		str.append(&quot;\&quot;&quot; + ch.getDateHidden() + &quot;\&quot;;&quot;);
 		str.append(&quot;\&quot;&quot; + ch.URL + &quot;\&quot;\r\n&quot;);
 
 		return str.toString();

Modified: trunk/src/exp/OVLExporter.java
===================================================================
--- trunk/src/exp/OVLExporter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/exp/OVLExporter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -42,7 +42,7 @@
 		tmp = Common.parseDouble(lat);
 		tmp += 0.002;
 		str.append(&quot;YKoord=&quot;+Convert.toString(tmp).replace(',', '.')+&quot;\r\n&quot;);
-		str.append(&quot;Text=&quot;+ch.wayPoint+&quot;\r\n&quot;);
+		str.append(&quot;Text=&quot;+ch.getWayPoint()+&quot;\r\n&quot;);
 
 		return str.toString();
 	}

Modified: trunk/src/exp/OziExporter.java
===================================================================
--- trunk/src/exp/OziExporter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/exp/OziExporter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -31,7 +31,7 @@
 		// usually start at 1 and increment. Can be set to -1 (minus 1) and the number will be auto generated.
 		strBuf.append(&quot;-1,&quot;);
 		// Field 2 : Name - the waypoint name, use the correct length name to suit the GPS type.
-		strBuf.append(ch.wayPoint + &quot;,&quot;);
+		strBuf.append(ch.getWayPoint() + &quot;,&quot;);
 		// Field 3 : Latitude - decimal degrees.
 		strBuf.append(lat+&quot;,&quot;);
 		// Field 4 : Longitude - decimal degrees.
@@ -49,7 +49,7 @@
 		// Field 10 : Background Color (RGB value)
 		strBuf.append(&quot;16777215,&quot;);
 		// Field 11 : Description (max 40), no commas
-		tmpName = simplifyString(ch.CacheName);
+		tmpName = simplifyString(ch.getCacheName());
 		if (tmpName.length() &lt;= 40){
 			strBuf.append(tmpName + &quot;,&quot;);
 		}

Modified: trunk/src/exp/PCX5Exporter.java
===================================================================
--- trunk/src/exp/PCX5Exporter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/exp/PCX5Exporter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -38,7 +38,7 @@
 		StringBuffer strBuf = new StringBuffer(200);
 		String latlonstr, dummy;
 
-		  strBuf.append(&quot;W  &quot; + ch.wayPoint + &quot; &quot;);
+		  strBuf.append(&quot;W  &quot; + ch.getWayPoint() + &quot; &quot;);
 		  latlonstr = STRreplace.replace(ch.LatLon, &quot;&#176;&quot;, &quot; &quot;);
 		  latlonstr = STRreplace.replace(latlonstr, &quot; &quot;, &quot;&quot;);
 		  latlonstr = STRreplace.replace(latlonstr, &quot;E&quot;, &quot; E&quot;);
@@ -46,7 +46,7 @@
 		  strBuf.append(latlonstr + &quot;     &quot;);
 		  strBuf.append(&quot;01-JAN-04 01:00:00 -0000 &quot;);
 		  // has 42 characters
-		  dummy = ch.CacheName;
+		  dummy = ch.getCacheName();
 		  if (dummy.length() &lt; 40){
 			  strBuf.append(dummy);
 			  int i = 40 - dummy.length();
@@ -57,7 +57,7 @@
 			  strBuf.append(dummy.substring(0,40));
 		  }
 		  strBuf.append(&quot; 0.000000e+000 &quot;);
-		  if(ch.is_found) strBuf.append(&quot;  8256\r\n&quot;);
+		  if(ch.is_found()) strBuf.append(&quot;  8256\r\n&quot;);
 		  else  		  strBuf.append(&quot;  8255\r\n&quot;);
 		return strBuf.toString();
 	}

Modified: trunk/src/exp/TPLExporter.java
===================================================================
--- trunk/src/exp/TPLExporter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/exp/TPLExporter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -158,7 +158,7 @@
 		int counter = 0;
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			ch = (CacheHolder)cacheDB.get(i);
-			if(ch.is_black == false &amp;&amp; ch.is_filtered == false) counter++;
+			if(ch.is_black() == false &amp;&amp; ch.is_filtered() == false) counter++;
 		}
 		pbf.showMainTask = false;
 		pbf.setTask(h,&quot;Exporting ...&quot;);
@@ -185,54 +185,54 @@
 				ch = (CacheHolder)cacheDB.get(i);
 				h.progress = (float)i/(float)counter;
 				h.changed();
-				if(ch.is_black == false &amp;&amp; ch.is_filtered == false){
+				if(ch.is_black() == false &amp;&amp; ch.is_filtered() == false){
 					if (ch.pos.isValid() == false) continue;
 					holder=new CacheHolderDetail(ch);
 					try{
 						holder.readCache(profile.dataDir);
 					}catch(Exception e){
 						Vm.debug(&quot;Problem reading cache page&quot;);
-						Global.getPref().log(&quot;Exception in TplExporter = Problem reading cache page, Cache: &quot; + holder.wayPoint, e, true);
+						Global.getPref().log(&quot;Exception in TplExporter = Problem reading cache page, Cache: &quot; + holder.getWayPoint(), e, true);
 					}
 					try {
 						Regex dec = new Regex(&quot;[,.]&quot;,myFilter.decSep);
 						if (myFilter.badChars != null) rex = new Regex(&quot;[&quot;+myFilter.badChars+&quot;]&quot;,&quot;&quot;);
 						varParams = new Hashtable();
-						varParams.put(&quot;TYPE&quot;, CacheType.transType(holder.type));
-						varParams.put(&quot;SHORTTYPE&quot;, CacheType.transType(holder.type).substring(0,1));
-						varParams.put(&quot;SIZE&quot;, holder.CacheSize);
-						varParams.put(&quot;SHORTSIZE&quot;, holder.CacheSize.substring(0,1));
-						varParams.put(&quot;WAYPOINT&quot;, holder.wayPoint);
-						varParams.put(&quot;OWNER&quot;, holder.CacheOwner);
-						varParams.put(&quot;DIFFICULTY&quot;, dec.replaceAll(holder.hard));
-						varParams.put(&quot;TERRAIN&quot;, dec.replaceAll(holder.terrain));
+						varParams.put(&quot;TYPE&quot;, CacheType.transType(holder.getType()));
+						varParams.put(&quot;SHORTTYPE&quot;, CacheType.transType(holder.getType()).substring(0,1));
+						varParams.put(&quot;SIZE&quot;, holder.getCacheSize());
+						varParams.put(&quot;SHORTSIZE&quot;, holder.getCacheSize().substring(0,1));
+						varParams.put(&quot;WAYPOINT&quot;, holder.getWayPoint());
+						varParams.put(&quot;OWNER&quot;, holder.getCacheOwner());
+						varParams.put(&quot;DIFFICULTY&quot;, dec.replaceAll(holder.getHard()));
+						varParams.put(&quot;TERRAIN&quot;, dec.replaceAll(holder.getTerrain()));
 						varParams.put(&quot;DISTANCE&quot;, dec.replaceAll(holder.getDistance()));
 						varParams.put(&quot;BEARING&quot;, holder.bearing);
 						varParams.put(&quot;LATLON&quot;, holder.LatLon);
 						varParams.put(&quot;LAT&quot;, dec.replaceAll(holder.pos.getLatDeg(CWPoint.DD)));
 						varParams.put(&quot;LON&quot;, dec.replaceAll(holder.pos.getLonDeg(CWPoint.DD)));
-						varParams.put(&quot;STATUS&quot;, holder.CacheStatus);
+						varParams.put(&quot;STATUS&quot;, holder.getCacheStatus());
 						varParams.put(&quot;STATUS_DATE&quot;, holder.GetStatusDate());
 						varParams.put(&quot;STATUS_TIME&quot;, holder.GetStatusTime());
-						varParams.put(&quot;DATE&quot;, holder.DateHidden);
+						varParams.put(&quot;DATE&quot;, holder.getDateHidden());
 						varParams.put(&quot;URL&quot;, holder.URL);
 						varParams.put(&quot;DESCRIPTION&quot;, holder.LongDescription);
 						if (myFilter.badChars != null) {
-							varParams.put(&quot;NAME&quot;, rex.replaceAll(holder.CacheName));
+							varParams.put(&quot;NAME&quot;, rex.replaceAll(holder.getCacheName()));
 							varParams.put(&quot;NOTES&quot;, rex.replaceAll(holder.CacheNotes));
 							varParams.put(&quot;HINTS&quot;, rex.replaceAll(holder.Hints));
 							varParams.put(&quot;DECRYPTEDHINTS&quot;, rex.replaceAll(Common.rot13(holder.Hints)));
 						} else {
-							varParams.put(&quot;NAME&quot;, holder.CacheName);
+							varParams.put(&quot;NAME&quot;, holder.getCacheName());
 							varParams.put(&quot;NOTES&quot;, holder.CacheNotes);
 							varParams.put(&quot;HINTS&quot;, holder.Hints);
 							varParams.put(&quot;DECRYPTEDHINTS&quot;, Common.rot13(holder.Hints));
 						}
 						cache_index.add(varParams);
 					}catch(Exception e){
-						Vm.debug(&quot;Problem getting Parameter, Cache: &quot; + holder.wayPoint);
+						Vm.debug(&quot;Problem getting Parameter, Cache: &quot; + holder.getWayPoint());
 						e.printStackTrace();
-						Global.getPref().log(&quot;Exception in TplExporter = Problem getting Parameter, Cache: &quot; + holder.wayPoint, e, true);
+						Global.getPref().log(&quot;Exception in TplExporter = Problem getting Parameter, Cache: &quot; + holder.getWayPoint(), e, true);
 					}
 				}
 			}

Modified: trunk/src/exp/TomTomExporter.java
===================================================================
--- trunk/src/exp/TomTomExporter.java	2009-04-04 08:29:49 UTC (rev 1737)
+++ trunk/src/exp/TomTomExporter.java	2009-04-05 14:59:37 UTC (rev 1738)
@@ -80,7 +80,7 @@
 		counter = 0;
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			holder = (CacheHolder)cacheDB.get(i);
-			if(holder.is_black == false &amp;&amp; holder.is_filtered == false) counter++;
+			if(holder.is_black() == false &amp;&amp; holder.is_filtered() == false) counter++;
 		}
 		
 		ext = format==TT_ASC?&quot;.asc&quot;:&quot;.ov2&quot;;
@@ -93,7 +93,7 @@
 				out =  new RandomAccessFile(fileName,&quot;rw&quot;);
 				for(int i = 0; i&lt;cacheDB.size(); i++){
 					holder=(CacheHolder)cacheDB.get(i);
-					if(holder.type == new Integer(CacheType.wayType[j][TT_WPT_NUM]).intValue() &amp;&amp; holder.is_black == false &amp;&amp; holder.is_filtered == false){
+					if(holder.getType() == new Integer(CacheType.wayType[j][TT_WPT_NUM]).intValue() &amp;&amp; holder.is_black() == false &amp;&amp; holder.is_filtered() == false){
 						currExp++;
 						h.progress = (float)currExp/(float)counter;
 						h.changed();
@@ -138,7 +138,7 @@
 		int expCount = 0;
 		for(int i = 0; i&lt;cacheDB.size();i++){
 			holder = (CacheHolder)cacheDB.get(i);
-			if(holder.is_black == false &amp;&amp; holder.is_filtered == false) counter++;
+			if(holder.is_black() == false &amp;&amp; holder.is_filtered() == false) counter++;
 		}
 
 		try{
@@ -147,7 +147,7 @@
 			out =  new RandomAccessFile(fileName,&quot;rw&quot;);
 			for(int i = 0; i&lt;cacheDB.size(); i++){
 				holder=(CacheHolder)cacheDB.get(i);
-				if(holder.is_black == false &amp;&amp; holder.is_filtered == false){
+				if(holder.is_black() == false &amp;&amp; holder.is_filtered() == false){
 					expCount++;
 					h.progress = (float)expCount/(float)counter;
 					h.changed();
@@ -177,17 +177,17 @@
 			outp.writeBytes(&quot;,&quot;);
 			//outp.writeBytes(&quot;\&quot;&quot; + ch.CacheName.replace(',',' ') + &quot;\&quot;\r\n&quot;);
 			outp.writeBytes(&quot;\&quot;&quot;);
-			outp.writeBytes(ch.wayPoint);
+			outp.writeBytes(ch.getWayPoint());
 			outp.writeBytes(&quot; - &quot;);
-			outp.writeBytes(ch.CacheName.replace(',',' '));
+			outp.writeBytes(ch.getCacheName().replace(',',' '));
 			outp.writeBytes(&quot; by &quot;);
-			outp.writeBytes(ch.CacheOwner);
+			outp.writeBytes(ch.getCacheOwner());
 			outp.writeBytes(&quot;- &quot;);             
-			outp.writeBytes(ch.hard);
+			outp.writeBytes(ch.getHard());
 			outp.writeBytes(&quot;/&quot;);
-			outp.writeBytes(ch.terrain);
+			outp.writeBytes(ch.getTerrain());
 			outp.writeBytes(&quot; - &quot;);
-			outp.writeBytes(ch.CacheSize);
+			outp.writeBytes(ch.getCacheSize());
 			outp.writeBytes(&quot;\&quot;\r\n&quot;);
 		} catch (IOException e) {
 			Vm.debug(&quot;Error writing to file&quot;);
@@ -204,7 +204,7 @@
 		try {
 			d = 2;
 			outp.writeByte((byte)d);
-			data = ch.wayPoint.length()+ch.CacheName.length()+ch.CacheOwner.length()+ch.hard.length()+ch.terrain.length()+ch.CacheSize.length()+27;
+			data = ch.getWayPoint().length()+ch.getCacheName().length()+ch.getCacheOwner().length()+ch.getHard().length()+ch.getTerrain().length()+ch.getCacheSize().length()+27;
 			writeIntBinary(outp, data);
 			latlon = Common.parseDouble(lon);
 			latlon *=100000;
@@ -212,21 +212,21 @@
 			latlon = Common.parseDouble(lat);;
 			latlon *=100000;
 			writeIntBinary(outp, (int) latlon);
-			outp.writeBytes(ch.wayPoint);
+			outp.writeBytes(ch.getWayPoint());
 			outp.writeBytes(&quot; - &quot;);
-			outp.writeBytes(ch.CacheName);
+			outp.writeBytes(ch.getCacheName());
 			outp.writeBytes(&quot; by &quot;);
-			outp.writeBytes(ch.CacheOwner);
+			outp.writeBytes(ch.getCacheOwner());
 			//Wenn Leerzeichen am Ende von Cache.Owner entfernt: 
 			//Hier wieder einf&#252;gen
 			//und data = holder.wayPoint.length()+holder.CacheName.length()+.....
 			//wider um 1 erh&#246;hen
 			outp.writeBytes(&quot;- &quot;);             
-			outp.writeBytes(ch.hard);
+			outp.writeBytes(ch.getHard());
 			outp.writeBytes(&quot;/&quot;);
-			outp.writeBytes(ch.terrain);
+			outp.writeBytes(ch.getTerrain());
 			outp.writeBytes(&quot; - &quot;);
-			outp.writeBytes(ch.CacheSize);
+			outp.writeBytes(ch.getCacheSize());
 			d = 0;
 			outp.writeByte((byte)d);
 		} catch (IOException e) {


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001655.html">[Cachewolf-svn] r1737 - trunk/src/CacheWolf
</A></li>
	<LI>Next message: <A HREF="001657.html">[Cachewolf-svn] r1739 - trunk/res_noewe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1656">[ date ]</a>
              <a href="thread.html#1656">[ thread ]</a>
              <a href="subject.html#1656">[ subject ]</a>
              <a href="author.html#1656">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">More information about the Cachewolf-svn
mailing list</a><br>
</body></html>
