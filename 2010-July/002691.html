<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Cachewolf-svn] r2705 - in trunk: res_noewe/templates src/CacheWolf	src/CacheWolf/exp
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cachewolf-svn/2010-July/index.html" >
   <LINK REL="made" HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r2705%20-%20in%20trunk%3A%20res_noewe/templates%20src/CacheWolf%0A%09src/CacheWolf/exp&In-Reply-To=%3C20100727203312.36F5E480086%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002689.html">
   <LINK REL="Next"  HREF="002692.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cachewolf-svn] r2705 - in trunk: res_noewe/templates src/CacheWolf	src/CacheWolf/exp</H1>
    <B>araber95 at mail.berlios.de</B> 
    <A HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r2705%20-%20in%20trunk%3A%20res_noewe/templates%20src/CacheWolf%0A%09src/CacheWolf/exp&In-Reply-To=%3C20100727203312.36F5E480086%40sheep.berlios.de%3E"
       TITLE="[Cachewolf-svn] r2705 - in trunk: res_noewe/templates src/CacheWolf	src/CacheWolf/exp">araber95 at mail.berlios.de
       </A><BR>
    <I>Tue Jul 27 10:33:12 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002689.html">[Cachewolf-svn] r2703 - trunk/src/CacheWolf
</A></li>
        <LI>Next message: <A HREF="002692.html">[Cachewolf-svn] r2706 - in trunk/res_noewe: templates webmapservices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2691">[ date ]</a>
              <a href="thread.html#2691">[ thread ]</a>
              <a href="subject.html#2691">[ subject ]</a>
              <a href="author.html#2691">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: araber95
Date: 2010-07-27 22:33:11 +0200 (Tue, 27 Jul 2010)
New Revision: 2705

Added:
   trunk/res_noewe/templates/html_by_KarlKater.tpl
   trunk/res_noewe/templates/html_from_GCTemplate.tpl
Modified:
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/exp/TPLExporter.java
Log:
html output with templates : the first (working) step. Added 2 examples (one from KarlKater thx)

Added: trunk/res_noewe/templates/html_by_KarlKater.tpl
===================================================================
--- trunk/res_noewe/templates/html_by_KarlKater.tpl	                        (rev 0)
+++ trunk/res_noewe/templates/html_by_KarlKater.tpl	2010-07-27 20:33:11 UTC (rev 2705)
@@ -0,0 +1,115 @@
+&lt;tmpl_par name=&quot;charset&quot; value=&quot;UTF8&quot;&gt;
+&lt;tmpl_par name=&quot;decsep&quot; value=&quot;.&quot;&gt;
+&lt;tmpl_par name=&quot;newline&quot; value=&quot;LF&quot;&gt;
+&lt;tmpl_par name=&quot;Out&quot; value=&quot;.html&quot;&gt;
+&lt;tmpl_par name=&quot;NrLogs &quot; value=&quot;-1&quot;&gt;
+&lt;tmpl_par name=&quot;singleFile&quot; value=&quot;no&quot;&gt;
+&lt;tmpl_par name=&quot;formatModifier&quot; value=&quot;1&quot;&gt;
+&lt;tmpl_loop cache_index&gt;
+&lt;html&gt;
+
+&lt;head&gt;
+&lt;title&gt;&lt;/title&gt;
+&lt;meta name=&quot;generator&quot; content=&quot;CacheWolf HTML-Export edit by KarlKater&quot;&gt;
+&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;
+&lt;/head&gt;
+
+&lt;body&gt;
+&lt;table border = &quot;2px&quot; align = &quot;center&quot;&gt;
+
+&lt;tr style = &quot;background-color:lightgrey;font-family:sans-serif;font-size:14;&quot;&gt;
+&lt;td&gt;
+&lt;tmpl_var TYPE&gt; &lt;tmpl_var WAYPOINT&gt; &lt;tmpl_var NAME&gt; by &lt;tmpl_var OWNER&gt;&lt;br&gt;
+Difficulty: &lt;tmpl_var DIFFICULTY&gt;&nbsp;&nbsp;Terrain: &lt;tmpl_var TERRAIN&gt;&nbsp;&nbsp;Size: &lt;tmpl_var SIZE&gt;&lt;br&gt;
+Coordinates: &lt;tmpl_var LATLON&gt;
+&lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr style = &quot;font-family:sans-serif;font-size:12;&quot;&gt;
+&lt;td&gt;
+&lt;tmpl_loop ATTRIBUTES&gt;
+&lt;img src=&quot;../attributes/&lt;tmpl_var IMAGE&gt;&quot; border=0 alt=&quot;&lt;tmpl_var INFO&gt;&quot;&gt;
+&lt;tmpl_var BR&gt;
+&lt;!--&lt;tmpl_var IMAGE&gt;--&gt;
+&lt;!--&lt;tmpl_var INFO&gt;--&gt;
+&lt;/tmpl_loop&gt;
+&lt;br&gt;
+&lt;br&gt;
+&lt;tmpl_var DESCRIPTION&gt;
+&lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tmpl_if ADDIS&gt;
+&lt;TABLE cellSpacing=1 cellPadding=1 bgColor=#448e35 border=0&gt;
+&lt;TBODY&gt;
+&lt;TR bgColor=#c6e3c0&gt;
+&lt;TH align=left&gt;Waypoint&lt;/TH&gt;
+&lt;TH align=left&gt;Name&lt;/TH&gt;
+&lt;TH align=left&gt;Coordinate&lt;/TH&gt;
+&lt;tmpl_loop ADDIS&gt;
+&lt;TR bgColor=#ffffff&gt;
+&lt;TD vAlign=top align=left&gt;&lt;tmpl_var WAYPOINT&gt;&lt;/TD&gt;
+&lt;TD vAlign=top align=left&gt;&lt;tmpl_var NAME&gt;&lt;/TD&gt;
+&lt;TD vAlign=top align=left&gt;&lt;tmpl_var LATLON&gt;&lt;/TD&gt;&lt;/TR&gt;
+&lt;TR bgColor=#ffffff&gt;
+&lt;TD vAlign=top align=left ColSpan=3&gt;&lt;tmpl_var LONGDESC&gt;&lt;/TD&gt;
+&lt;/tmpl_loop&gt;
+&lt;/TBODY&gt;
+&lt;/TABLE&gt;&lt;BR/&gt;&lt;/div&gt;
+&lt;/tmpl_if&gt;
+
+&lt;table cellSpacing=1 cellPadding=1 bgColor=#448e35 border=0&gt;
+&lt;tr bgColor=#c6e3c0&gt;
+       &lt;td align=right&gt;Hints:&nbsp;&nbsp;&lt;/td&gt;
+       &lt;td&gt;&lt;tmpl_var HINTS&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr bgColor=#ffffff&gt;
+       &lt;td&gt;Decrypted Hints:&nbsp;&nbsp;&lt;/td&gt;
+       &lt;td&gt;&lt;tmpl_var DECRYPTEDHINTS&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;/table&gt;
+
+&lt;br&gt;
+
+&lt;tr style = &quot;font-family:sans-serif;font-size:12;&quot;&gt;&lt;td&gt;
+Logs:&lt;br&gt;
+&lt;tmpl_loop LOGS&gt;
+&lt;img src=&quot;&lt;tmpl_var ICON&gt;&quot; border=&quot;0&quot;&gt;&nbsp;&lt;tmpl_var DATE&gt;&nbsp;by&nbsp;&lt;tmpl_var LOGGER&gt;&lt;br&gt;&lt;tmpl_var MESSAGE&gt;
+&lt;br&gt;
+&lt;/tmpl_loop&gt;
+&lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr style=&quot;font-family:sans-serif;font-size:12;&quot;&gt;
+&lt;td&gt;
+Notes:&lt;br&gt;
+&lt;tmpl_var NOTES&gt;
+&lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr style = &quot;font-family:sans-serif;font-size:12;&quot;&gt;&lt;td&gt;
+Pictures:&lt;br&gt;
+Cache:&lt;br&gt;
+&lt;tmpl_loop cacheImg&gt;
+&lt;a href = &quot;&lt;tmpl_var FILE&gt;&quot;&gt;&lt;tmpl_var TEXT&gt;&lt;/a&gt;&lt;br&gt;
+&lt;/tmpl_loop&gt;
+User:&lt;br&gt;
+&lt;tmpl_loop userImg&gt;
+&lt;a href = &quot;&lt;tmpl_var FILE&gt;&quot;&gt;&lt;tmpl_var TEXT&gt;&lt;/a&gt;&lt;br&gt;
+&lt;/tmpl_loop&gt;
+Logs:&lt;br&gt;
+&lt;tmpl_loop logImg&gt;
+&lt;a href = &quot;&lt;tmpl_var FILE&gt;&quot;&gt;&lt;tmpl_var TEXT&gt;&lt;/a&gt;&lt;br&gt;
+&lt;/tmpl_loop&gt;
+Maps:&lt;br&gt;
+&lt;tmpl_loop mapImg&gt;
+&lt;a href = &quot;&lt;tmpl_var FILE&gt;&quot;&gt;&lt;tmpl_var TEXT&gt;&lt;/a&gt;&lt;br&gt;
+&lt;/tmpl_loop&gt;
+&lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr style = &quot;font-family:sans-serif;font-size:12;&quot;&gt;&lt;td&gt;
+&lt;/table&gt;
+&lt;/body&gt;
+&lt;/html&gt;
+&lt;/tmpl_loop&gt;
\ No newline at end of file

Added: trunk/res_noewe/templates/html_from_GCTemplate.tpl
===================================================================
--- trunk/res_noewe/templates/html_from_GCTemplate.tpl	                        (rev 0)
+++ trunk/res_noewe/templates/html_from_GCTemplate.tpl	2010-07-27 20:33:11 UTC (rev 2705)
@@ -0,0 +1,171 @@
+&lt;tmpl_par name=&quot;charset&quot; value=&quot;UTF8&quot;&gt;
+&lt;tmpl_par name=&quot;decsep&quot; value=&quot;.&quot;&gt;
+&lt;tmpl_par name=&quot;newline&quot; value=&quot;LF&quot;&gt;
+&lt;tmpl_par name=&quot;Out&quot; value=&quot;.html&quot;&gt;
+&lt;tmpl_par name=&quot;NrLogs &quot; value=&quot;-1&quot;&gt;
+&lt;tmpl_par name=&quot;singleFile&quot; value=&quot;no&quot;&gt;
+&lt;tmpl_par name=&quot;formatModifier&quot; value=&quot;1&quot;&gt;
+&lt;tmpl_loop cache_index&gt;
+&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;
+&lt;!-- saved from url=(0014)<A HREF="http://localhost/">http://localhost/</A> --&gt;
+&lt;!-- Note: The line above is needed to avoid the warning due to the javascript contained in this page.
+   Using javascript, various sections of the Cache listing can be hidden/unhidden.
+   Try clicking on anything that is underlined.
+--&gt;
+&lt;html&gt;
+&lt;META HTTP-EQUIV=&quot;content-type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;
+&lt;META HTTP-EQUIV=&quot;expires&quot; CONTENT=&quot;Wed, 26 Feb 1997 08:21:57 GMT&quot;&gt;
+&lt;META HTTP-EQUIV=&quot;Pragma&quot; CONTENT=&quot;no-cache&quot;&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+function toggleDivOL( elemID ) { // Hide or show a DIV
+	var elem = document.getElementById( elemID );
+	if (!elem.style.display || elem.style.display=='block') {
+		elem.style.display='none';
+	} else {
+		elem.style.display='block';
+	}
+}
+var logsVisible=true;
+function toggleAll() {
+	logsVisible=!logsVisible;
+	var logs = document.getElementsByName(&quot;log&quot;);
+	for (logElem=0; logElem&lt;logs.length; logElem++) {
+		if (logsVisible)
+			logs[logElem].style.display='block';
+		else
+			logs[logElem].style.display='none';
+	}
+}
+&lt;/script&gt;
+&lt;style type=&quot;text/css&quot;&gt;
+body {
+	font-family: Verdana,sans-serif; font-size:80%;
+}
+.notes {
+	padding: 5px;
+	background-color: #EEEEEE;
+	border: 1px solid #000000;
+}
+.solver {
+	padding: 5px;
+	background-color: #EEEEEE;
+	border: 1px dashed #000000;
+}
+.logs {
+	padding: 5px;
+	background-color: #EEEEEE;
+}
+td { font-size:small;  }
<A HREF="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">+ at media</A> screen {.clickHint {font-family: Arial; font-size:xx-small; padding-left:30px; display:inline; } }
<A HREF="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">+ at media</A> print {.clickHint {font-family: Arial; font-size:xx-small; display:none; }
+&lt;/style&gt;
+&lt;head&gt;
+	&lt;title&gt;Cache: &lt;tmpl_var WAYPOINT&gt; &lt;tmpl_var CACHE_NAME&gt; by &lt;tmpl_var OWNER&gt;&lt;/title&gt;
+&lt;/head&gt;
+
+&lt;body bgcolor=&quot;#FFFFFF&quot; LINK=&quot;#000000&quot; VLINK=&quot;#000000&quot; ALINK=&quot;#000000&quot; TEXT=&quot;#000000&quot; marginwidth=&quot;20&quot; marginheight=&quot;0&quot; leftmargin=&quot;20&quot; topmargin=&quot;0&quot;&gt;
+&lt;div style=&quot;float:left;&quot;&gt;
+	&lt;img src=&quot;<A HREF="file://&lt;tmpl_var">file://&lt;tmpl_var</A> PROGDIR&gt;/&lt;tmpl_var TYPENO&gt;.gif&quot; BORDER=0 WIDTH=32 HEIGHT=32&gt;&lt;FONT face=&quot;Verdana&quot; size=&quot;4&quot;&gt;&lt;strong&gt; &lt;tmpl_var CACHE_NAME&gt;&lt;/strong&gt;&lt;/FONT&gt;
+	&lt;FONT face=&quot;Verdana&quot; size=&quot;2&quot; style=&quot;font-size:X-Small;font-weight:bold;&quot;&gt; by &lt;tmpl_var OWNER&gt;&lt;/FONT&gt;
+	&lt;br/&gt;&lt;br/&gt;
+    &lt;strong&gt;&lt;tmpl_var LATLON&gt;&lt;/strong&gt; (WGS84)&lt;br/&gt;
+	Difficulty: &lt;tmpl_var DIFFICULTY&gt; 	Terrain: &lt;tmpl_var TERRAIN&gt;
+	&lt;FONT face=&quot;Verdana&quot; size=&quot;-2&quot;&gt;&nbsp;&nbsp;&nbsp;(ratings out of 5 stars. 1 is easiest, 5 is hardest)&lt;/FONT&gt;&lt;br/&gt;
+	Container: &lt;strong&gt;&lt;tmpl_var SIZE&gt;&lt;/strong&gt;&lt;br/&gt;&lt;br/&gt;
+&lt;/div&gt;
+&lt;div style=&quot;float:right;margin:0; margin-top:10px&quot;&gt;&lt;FONT face=&quot;Verdana&quot; size=&quot;4&quot;&gt;&lt;strong&gt;&lt;a href=&quot;&lt;tmpl_var URL&gt;&quot;&gt;&lt;tmpl_var WAYPOINT&gt;&lt;/a&gt;&lt;/strong&gt;&lt;/FONT&gt;&lt;br/&gt;&lt;/div&gt;
+
+&lt;div style=&quot;float:left&quot;&gt;
+	&lt;div style=&quot;float:left;&quot;&gt;
+	&lt;table cellpadding=0&gt;
+		&lt;tr&gt;&lt;td&gt;Waypoint:&lt;/td&gt;&lt;td&gt; &lt;tmpl_var WAYPOINT&gt;&lt;/td&gt;&lt;/tr&gt;
+		&lt;tr&gt;&lt;td&gt;Hidden:&lt;/td&gt;&lt;td&gt; &lt;tmpl_var DATE&gt;&lt;/td&gt;&lt;/tr&gt;
+		&lt;tr&gt;&lt;td&gt;Distance:&lt;/td&gt;&lt;td&gt; &lt;tmpl_var DISTANCE&gt;&lt;/td&gt;&lt;/tr&gt;
+		&lt;tr&gt;&lt;td&gt;Bearing:&lt;/td&gt;&lt;td&gt; &lt;tmpl_var BEARING&gt;&lt;/td&gt;&lt;/tr&gt;
+		&lt;tr&gt;&lt;td&gt;Status:&lt;/td&gt;&lt;td&gt; &lt;tmpl_var STATUS&gt;&lt;/td&gt;&lt;/tr&gt;
+	&lt;/table&gt;
+	&lt;/div&gt;
+	&lt;div style=&quot;float:right;&quot;&gt;
+		&lt;tmpl_loop ATTRIBUTES&gt;
+			&lt;img src=&quot;<A HREF="file://&lt;tmpl_var">file://&lt;tmpl_var</A> PATHANDIMAGE&gt;&quot; border=0 alt=&quot;&lt;tmpl_var INFO&gt;&quot;&gt;
+			&lt;tmpl_var BR&gt;
+			&lt;!--&lt;tmpl_var IMAGE&gt;--&gt;
+			&lt;!--&lt;tmpl_var INFO&gt;--&gt;
+		&lt;/tmpl_loop&gt;
+	&lt;/div&gt;
+&lt;/div&gt;
+&lt;div style=&quot;float:left&quot;&gt;
+	&lt;hr&gt;
+&lt;tmpl_if UNAVAILABLE&gt;
+	&lt;FONT face=&quot;Verdana&quot; color=&quot;red&quot; size=&quot;+0&quot;&gt;
+	&lt;br/&gt;&lt;strong&gt;The cache is not currently available.&lt;br/&gt;&lt;/strong&gt;
+	&lt;/FONT&gt;
+&lt;/tmpl_if&gt;
+
+	&lt;br/&gt;
+	&lt;FONT face=&quot;Verdana&quot; size=&quot;2&quot;&gt;
+	&lt;P&gt;&lt;BLOCKQUOTE&gt;&lt;span id=&quot;LongDescription&quot;&gt;&lt;tmpl_var DESCRIPTION&gt;&lt;/span&gt;&lt;/BLOCKQUOTE&gt;
+	&lt;/FONT&gt;
+&lt;tmpl_if ADDIS&gt;&lt;a href=&quot;javascript:toggleDivOL('addis');&quot;&gt;&lt;STRONG&gt;Additional Waypoints&lt;/STRONG&gt;&lt;/a&gt;&lt;BR/&gt;&lt;br/&gt;
+	&lt;div id=&quot;addis&quot;&gt;&lt;TABLE cellSpacing=1 cellPadding=4 bgColor=#448e35 border=0&gt;
+		&lt;TBODY&gt;
+			&lt;TR bgColor=#c6e3c0&gt;
+				&lt;TH align=middle width=16&gt;&nbsp;&lt;/TH&gt;
+				&lt;TH align=left&gt;Waypoint&lt;/TH&gt;
+				&lt;TH align=left&gt;Name&lt;/TH&gt;
+				&lt;TH align=left&gt;Coordinate&lt;/TH&gt;
+			&lt;tmpl_loop ADDIS&gt;
+			&lt;TR bgColor=#ffffff&gt;
+				&lt;TD vAlign=top align=middle width=16&gt;&lt;img src=&quot;&lt;tmpl_var IMG&gt;&quot;&gt;&lt;/TD&gt;
+				&lt;TD vAlign=top align=left&gt;&lt;tmpl_var WAYPOINT&gt;&lt;/TD&gt;
+				&lt;TD vAlign=top align=left&gt;&lt;tmpl_var NAME&gt;&lt;/TD&gt;
+				&lt;TD vAlign=top align=left&gt;&lt;tmpl_var LATLON&gt;&lt;/TD&gt;&lt;/TR&gt;
+			&lt;TR bgColor=#ffffff&gt;
+				&lt;TD vAlign=top align=middle width=16&gt;Note:&lt;/TD&gt;
+				&lt;TD vAlign=top align=left ColSpan=3&gt;&lt;tmpl_var LONGDESC&gt;&lt;/TD&gt;
+			&lt;/tmpl_loop&gt;
+		&lt;/TBODY&gt;
+	&lt;/TABLE&gt;&lt;BR/&gt;&lt;/div&gt;
+&lt;/tmpl_if&gt;
+&lt;tmpl_if IMAGES&gt;
+	&lt;tmpl_loop IMAGES&gt;
+		&lt;a href=&quot;javascript:toggleDivOL(&lt;tmpl_var I&gt;);&quot;&gt;&lt;image src=&quot;images.gif&quot; border=0&gt; &lt;tmpl_var IMAGETEXT&gt;&lt;/a&gt;&nbsp;&lt;i&gt;&lt;tmpl_var IMAGECOMMENT&gt;&lt;/i&gt;&lt;br/&gt;
+		&lt;div id=&lt;tmpl_var I&gt; style=&quot;display:none&quot;&gt;&lt;tmpl_var IMAGE&gt;&lt;/div&gt;
+	&lt;/tmpl_loop&gt;
+&lt;/tmpl_if&gt;
+
+&lt;tmpl_if HINT&gt;
+	&lt;br/&gt;&lt;br/&gt;&lt;STRONG&gt;Additional Hints (Highlight blank area to see)&lt;/STRONG&gt;&lt;br/&gt;
+	&lt;FONT face=&quot;Verdana&quot; color=&quot;white&quot; size=&quot;1&quot;&gt;&lt;tmpl_var HINT&gt;&lt;/FONT&gt;&lt;br/&gt;&lt;br/&gt;
+&lt;/tmpl_if&gt;
+
+&lt;tmpl_if LOGS&gt;
+	&lt;br/&gt;&lt;a href=&quot;javascript:toggleDivOL('logs');&quot;&gt;&lt;FONT face=&quot;Verdana&quot; size=&quot;+0&quot;&gt;&lt;STRONG&gt;Logs&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/a&gt;&lt;font class=&quot;clickHint&quot; onClick=&quot;toggleAll();&quot;&gt;Click 'Logs' to hide/unhide section; Click this to hide/unhide each log; Click any log to hide/unhide&lt;/font&gt;&lt;br/&gt;&lt;br/&gt;
+	&lt;div id=&quot;logs&quot; class=&quot;logs&quot;&gt;
+	&lt;tmpl_loop LOGS&gt;
+		&lt;a href=&quot;javascript:toggleDivOL(&lt;tmpl_var __COUNTER__&gt;);&quot;&gt;&lt;img src=&quot;&lt;tmpl_var ICON&gt;&quot; border=&quot;0&quot;&gt;&nbsp;&lt;tmpl_var DATE&gt;&nbsp;by&nbsp;&lt;tmpl_var LOGGER&gt;&lt;br&gt;&lt;/a&gt;
+		&lt;div id=&lt;tmpl_var __COUNTER__&gt; name=&quot;log&quot; style=&quot;display:block&quot;&gt;&lt;font face='Verdana' size='2'&gt;&lt;tmpl_var MESSAGE&gt;&lt;/font&gt;&lt;br/&gt;
+		&lt;div&gt;&lt;center&gt;&lt;div style=&quot;width:66%&quot;&gt;&lt;hr&gt;&lt;/div&gt;&lt;/center&gt;&lt;/div&gt;&lt;/div&gt;
+	&lt;/tmpl_loop&gt;
+	&lt;/div&gt;
+&lt;tmpl_else&gt;&lt;br/&gt;&lt;STRONG&gt;No logs&lt;/STRONG&gt;&lt;br/&gt;
+&lt;/tmpl_if&gt;
+&lt;tmpl_if BUGS&gt;
+	&lt;hr&gt;
+	&lt;a href=&quot;javascript:toggleDivOL('bugs');&quot;&gt;&lt;FONT face=&quot;Verdana&quot; size=&quot;+0&quot;&gt;&lt;STRONG&gt;Bugs&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/a&gt;&lt;span class=&quot;clickHint&quot;&gt;Click to hide/unhide section&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;
+	&lt;div id=&quot;bugs&quot; class=&quot;bugs&quot;&gt;&lt;tmpl_var BUGS&gt;&lt;/div&gt;
+&lt;/tmpl_if&gt;
+&lt;tmpl_if NOTES&gt;
+&lt;tmpl_if BUGS&gt;&lt;TMPL_ELSE&gt;&lt;hr&gt;&lt;/tmpl_if&gt;
+    &lt;a href=&quot;javascript:toggleDivOL('notes');&quot;&gt;&lt;FONT face=&quot;Verdana&quot; size=&quot;+0&quot;&gt;&lt;STRONG&gt;Personal Notes&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/a&gt;&lt;span class=&quot;clickHint&quot;&gt;Click to hide/unhide section&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;
+	&lt;div id=&quot;notes&quot; class=&quot;notes&quot;&gt;&lt;br/&gt;&lt;tmpl_var NOTES&gt;&lt;/div&gt;
+&lt;/tmpl_if&gt;
+&lt;tmpl_if SOLVER&gt;
+    &lt;a href=&quot;javascript:toggleDivOL('solver');&quot;&gt;&lt;FONT face=&quot;Verdana&quot; size=&quot;+0&quot;&gt;&lt;STRONG&gt;Solver Instructions&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/a&gt;&lt;span class=&quot;clickHint&quot;&gt;Click to hide/unhide section&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;
+	&lt;div id=&quot;solver&quot; class=&quot;solver&quot;&gt;&lt;br/&gt;&lt;tmpl_var SOLVER&gt;&lt;/div&gt;
+&lt;/tmpl_if&gt;
+&lt;/div&gt;
+&lt;/body&gt;
+&lt;/html&gt;
+
+&lt;/tmpl_loop&gt;
\ No newline at end of file

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-07-27 10:10:25 UTC (rev 2704)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-07-27 20:33:11 UTC (rev 2705)
@@ -588,16 +588,37 @@
 		varParams.put(&quot;SYM&quot;, CacheType.type2SymTag(type)); //&lt;sym&gt;
 		varParams.put(&quot;GSTYPE&quot;, CacheType.type2GSTypeTag(type)); //&lt;groundspeak:type&gt;
 		varParams.put(&quot;SHORTTYPE&quot;, CacheType.getExportShortId(type));
-		varParams.put(&quot;SIZE&quot;, CacheSize.cw2ExportString(cacheSize));
-		varParams.put(&quot;SHORTSIZE&quot;, CacheSize.getExportShortId(cacheSize));
 		if (isAddiWpt()) {
-			varParams.put(&quot;MAINWP&quot;,this.mainCache.getWayPoint());
-			varParams.put(&quot;MAINWPNAME&quot;, this.mainCache.getCacheName());
-			varParams.put(&quot;DATE&quot;, this.mainCache.dateHidden);
+			CacheHolder ch=this.mainCache;
+			varParams.put(&quot;MAINWP&quot;,ch.getWayPoint());
+			varParams.put(&quot;MAINWPNAME&quot;, ch.getCacheName());
+			varParams.put(&quot;DIFFICULTY&quot;, (ch.hard &lt; 0)?&quot;!&lt;!&quot;:decSep.replaceAll(CacheTerrDiff.longDT(ch.hard)));
+			String sHard = Integer.toString(ch.hard);
+			varParams.put(&quot;SHORTDIFFICULTY&quot;, (ch.hard &lt; 0)?&quot;&quot;:sHard);
+			varParams.put(&quot;SHDIFFICULTY&quot;, (ch.hard &lt; 0)?&quot;&quot;:sHard.substring(0,1));
+			varParams.put(&quot;TERRAIN&quot;, (ch.terrain &lt; 0)?&quot;&quot;:decSep.replaceAll(CacheTerrDiff.longDT(ch.terrain)));
+			String sTerrain = Integer.toString(ch.terrain);
+			varParams.put(&quot;SHORTTERAIN&quot;, (ch.terrain &lt; 0)?&quot;&quot;:sTerrain);
+			varParams.put(&quot;SHTERRAIN&quot;, (ch.terrain &lt; 0)?&quot;&quot;:sTerrain.substring(0,1));
+			varParams.put(&quot;SIZE&quot;, CacheSize.cw2ExportString(ch.cacheSize));
+			varParams.put(&quot;SHORTSIZE&quot;, CacheSize.getExportShortId(ch.cacheSize));
+			varParams.put(&quot;OWNER&quot;, (ModTyp == 0) ? SafeXML.cleanGPX(ch.cacheOwner) : ch.cacheOwner);
+			varParams.put(&quot;DATE&quot;, ch.dateHidden);
 		}
 		else {
 			varParams.put(&quot;MAINWP&quot;, &quot;&quot;);
 			varParams.put(&quot;MAINWPNAME&quot;, &quot;&quot;);
+			varParams.put(&quot;DIFFICULTY&quot;, (isCustomWpt() || hard &lt; 0)?&quot;&quot;:decSep.replaceAll(CacheTerrDiff.longDT(hard)));
+			String sHard = Integer.toString(hard);
+			varParams.put(&quot;SHORTDIFFICULTY&quot;, (isCustomWpt() || hard &lt; 0)?&quot;&quot;:sHard);
+			varParams.put(&quot;SHDIFFICULTY&quot;, (isCustomWpt() || hard &lt; 0)?&quot;&quot;:sHard.substring(0,1));
+			varParams.put(&quot;TERRAIN&quot;, (isCustomWpt() || terrain &lt; 0)?&quot;&quot;:decSep.replaceAll(CacheTerrDiff.longDT(terrain)));
+			String sTerrain = Integer.toString(terrain);
+			varParams.put(&quot;SHORTTERAIN&quot;, (isCustomWpt() || terrain &lt; 0)?&quot;&quot;:sTerrain);
+			varParams.put(&quot;SHTERRAIN&quot;, (isCustomWpt() || terrain &lt; 0)?&quot;&quot;:sTerrain.substring(0,1));
+			varParams.put(&quot;SIZE&quot;, CacheSize.cw2ExportString(cacheSize));
+			varParams.put(&quot;SHORTSIZE&quot;, CacheSize.getExportShortId(cacheSize));
+			varParams.put(&quot;OWNER&quot;, (ModTyp == 0) ? SafeXML.cleanGPX(cacheOwner) : cacheOwner);
 			varParams.put(&quot;DATE&quot;, dateHidden);
 		}
 		if (isCustomWpt()) {
@@ -607,15 +628,6 @@
 		int wpl = wayPoint.length();
 		int wps = (wpl &lt; shortWaypointLength) ? 0 : wpl - shortWaypointLength;
 		varParams.put(&quot;SHORTWAYPOINT&quot;, wayPoint.substring(wps, wpl));
-		varParams.put(&quot;OWNER&quot;, (ModTyp == 0) ? SafeXML.cleanGPX(cacheOwner) : cacheOwner);
-		varParams.put(&quot;DIFFICULTY&quot;, (isAddiWpt() || isCustomWpt() || hard &lt; 0)?&quot;&quot;:decSep.replaceAll(CacheTerrDiff.longDT(hard)));
-		String sHard = Integer.toString(hard);
-		varParams.put(&quot;SHORTDIFFICULTY&quot;, (isAddiWpt() || isCustomWpt() || hard &lt; 0)?&quot;&quot;:sHard);
-		varParams.put(&quot;SHDIFFICULTY&quot;, (isAddiWpt() || isCustomWpt() || hard &lt; 0)?&quot;&quot;:sHard.substring(0,1));
-		varParams.put(&quot;TERRAIN&quot;, (isAddiWpt() || isCustomWpt() || terrain &lt; 0)?&quot;&quot;:decSep.replaceAll(CacheTerrDiff.longDT(terrain)));
-		String sTerrain = Integer.toString(terrain);
-		varParams.put(&quot;SHORTTERAIN&quot;, (isAddiWpt() || isCustomWpt() || terrain &lt; 0)?&quot;&quot;:sTerrain);
-		varParams.put(&quot;SHTERRAIN&quot;, (isAddiWpt() || isCustomWpt() || terrain &lt; 0)?&quot;&quot;:sTerrain.substring(0,1));
 		varParams.put(&quot;DISTANCE&quot;, decSep.replaceAll(getDistance()));
 		varParams.put(&quot;BEARING&quot;, bearing);
 		if ((pos!=null &amp;&amp; pos.isValid())) {

Modified: trunk/src/CacheWolf/exp/TPLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/TPLExporter.java	2010-07-27 10:10:25 UTC (rev 2704)
+++ trunk/src/CacheWolf/exp/TPLExporter.java	2010-07-27 20:33:11 UTC (rev 2705)
@@ -48,7 +48,7 @@
 {
 	private int type=SCALAR;
 	private String newLine=&quot;\n&quot;;
-	TextCodec codec = new AsciiCodec();
+	TextCodec codec = new AsciiCodec(); // codec = new AsciiCodec(AsciiCodec.STRIP_CR);
 	String badChars;
 	String decSep = &quot;.&quot;;
 	int shortNameLength=30;
@@ -60,7 +60,6 @@
 
 
 	public TplFilter(){
-		codec = new AsciiCodec(AsciiCodec.STRIP_CR);
 		return;
 	}
 
@@ -69,25 +68,10 @@
 	}
 
 	public String parse(String t) {
-		//Vm.debug(t);
+
 		Regex rex, rex1;
 		String param, value;
-		// Filter newlines
-		rex = new Regex(&quot;(?m)\n$&quot;,&quot;&quot;);
-		t = rex.replaceAll(t);
 
-		// Filter comments &lt;#-- and --&gt;
-		rex = new Regex(&quot;&lt;#--.*--&gt;&quot;,&quot;&quot;);
-		t = rex.replaceAll(t);
-
-		// replace &lt;br&gt; or &lt;br /&gt; with newline
-		rex = new Regex(&quot;&lt;br.*&gt;&quot;,&quot;&quot;);
-		rex.search(t);
-		if (rex.didMatch()){
-			t = rex.replaceAll(t);
-			t += newLine;
-		}
-
 		// search for parameters
 		rex = new Regex(&quot;(?i)&lt;tmpl_par.*&gt;&quot;);
 		rex.search(t);
@@ -138,6 +122,26 @@
 			}
 
 		}
+
+		if (formatModifier == 0) {
+			// for gpx output
+			// Filter newlines
+			rex = new Regex(&quot;(?m)\n$&quot;,&quot;&quot;);
+			t = rex.replaceAll(t);
+
+			// Filter comments &lt;#-- and --&gt;
+			rex = new Regex(&quot;&lt;#--.*--&gt;&quot;,&quot;&quot;);
+			t = rex.replaceAll(t);
+
+			// replace &lt;br&gt; or &lt;br /&gt; with newline
+			rex = new Regex(&quot;&lt;br.*&gt;&quot;,&quot;&quot;);
+			rex.search(t);
+			if (rex.didMatch()){
+				t = rex.replaceAll(t);
+				t += newLine;
+			}
+		}
+
 		return t;
 	}
 
@@ -198,7 +202,7 @@
 
 			Regex dec = new Regex(&quot;[,.]&quot;,myFilter.decSep);
 			if (myFilter.badChars != null) rex = new Regex(&quot;[&quot;+myFilter.badChars+&quot;]&quot;,&quot;&quot;);
-
+			
 			Vector cache_index = new Vector(); 			
 			for(int i = 0; i&lt;counter;i++){
 				CacheHolder ch = cacheDB.get(i);
@@ -214,9 +218,11 @@
 							cache_index.add(varParams);
 							tpl.setParam(&quot;cache_index&quot;, cache_index);
 							String ext = (myFilter.out.substring(myFilter.out.lastIndexOf(&quot;.&quot;)).toLowerCase()+&quot;    &quot;).trim();
-							PrintWriter pagefile = new PrintWriter(new BufferedWriter(new FileWriter(saveTo.getPath() + ch.getWayPoint() + ext)));
-							pagefile.print(tpl.output());
-							pagefile.close();
+							FileWriter fw = new FileWriter(saveTo.getPath() + ch.getWayPoint() + ext);
+							fw.codec = myFilter.codec;
+							PrintWriter detfile = new PrintWriter(new BufferedWriter(fw));
+							tpl.printTo(detfile);
+							detfile.close();
 							cache_index.clear();
 						}
 					}catch(Exception e){
@@ -228,12 +234,11 @@
 			}
 			if (myFilter.single) {
 				tpl.setParam(&quot;cache_index&quot;, cache_index);
-				PrintWriter detfile;
 				FileWriter fw = new FileWriter(saveTo);
 				fw.codec = myFilter.codec;
-				detfile = new PrintWriter(new BufferedWriter(fw));
+				PrintWriter detfile = new PrintWriter(new BufferedWriter(fw));
 				tpl.printTo(detfile);
-				//detfile.print(tpl.output());
+				// oder detfile.print(tpl.output());
 				detfile.close();
 			}
 		} catch (Exception e) {


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002689.html">[Cachewolf-svn] r2703 - trunk/src/CacheWolf
</A></li>
	<LI>Next message: <A HREF="002692.html">[Cachewolf-svn] r2706 - in trunk/res_noewe: templates webmapservices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2691">[ date ]</a>
              <a href="thread.html#2691">[ thread ]</a>
              <a href="subject.html#2691">[ subject ]</a>
              <a href="author.html#2691">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">More information about the Cachewolf-svn
mailing list</a><br>
</body></html>
