From mik77 at mail.berlios.de  Thu Jul  1 02:01:32 2010
From: mik77 at mail.berlios.de (mik77 at mail.berlios.de)
Date: Thu,  1 Jul 2010 02:01:32 PM +0200
Subject: [Cachewolf-svn] r2654 - in branches/bugfix_1.0: . res_noewe
	src/CacheWolf
Message-ID: <20100701120132.692BC4809A2@sheep.berlios.de>

Author: mik77
Date: 2010-07-01 14:01:32 +0200 (Thu, 01 Jul 2010)
New Revision: 2654

Modified:
   branches/bugfix_1.0/
   branches/bugfix_1.0/res_noewe/spider.def
   branches/bugfix_1.0/src/CacheWolf/SpiderGC.java
Log:
Changes from trunk for new GC design


Property changes on: branches/bugfix_1.0
___________________________________________________________________
Added: svn:mergeinfo
   + /trunk:2652

Modified: branches/bugfix_1.0/res_noewe/spider.def
===================================================================
--- branches/bugfix_1.0/res_noewe/spider.def	2010-06-30 14:53:05 UTC (rev 2653)
+++ branches/bugfix_1.0/res_noewe/spider.def	2010-07-01 12:01:32 UTC (rev 2654)
@@ -29,6 +29,7 @@
 # Version 7.0 - 20100402 adaption to new GC-design
 # Version 7.1 - 20100528 better description recognition
 # Version 8.0 - 20100604 adaption to new GC-design
+# Version 9.0 - 20100630 adaption to new GC-design
 #============================================================
 # A suffix of Rex indicates a regular expression
 # A suffix of ExStart indicates the start of an Extractor search pattern
@@ -87,16 +88,16 @@
 singleLogExEnd     = <small><a\ href="
 # iconEx, nameTempEx, dateEx, singleLogEx werden auf einen singleLog angewendet
 iconExStart        = www.geocaching.com/images/icons/
-iconExEnd          = "\ alt=""\ />
+iconExEnd          = "\ title="
 nameTempExStart    = <a\ href="
 nameTempExEnd      = /a>
 # Name extrahiert aus nameTemp
 nameExStart        = >
 nameExEnd          = <
-dateExStart        = gif"\ alt=""\ />&nbsp;
+dateExStart        = "\ />&nbsp;
 dateExEnd          = \ by\ <a\ href="/profile/?guid=
-logExStart         = found)<br\ />
-logExEnd           = <br\ /><small><a\ href="
+logExStart         = found)<br\ /><br\ />
+logExEnd           = <br\ /><br\ /><small><a\ href="
 # Die Icons, die einen erfolgreichen Fund signalisieren
 icon_smile         = icon_smile.gif
 icon_camera        = icon_camera.gif
@@ -150,13 +151,13 @@
 wayBlockExStart    = <span\ id="ctl00_ContentBody_WaypointsInfo"\ style="font-weight:bold;">Additional\ Waypoints</span>
 wayBlockExEnd      = </table>
 nameRex            = &RefDS=1">(.*)</a>
-koordRex           = <td>\\s*([NSns]\ [0-9]{1,2}..[0-9]{1,2}.[0-9]{1,3}\ [EWew]\ [0-9]{1,3}..[0-9]{1,2}.[0-9]{1,3})\\s*</td>
+koordRex           = <td>\\s*([NSns]\ [0-9]{1,2}..[0-9]{1,2}.[0-9]{1,3}\ [EWew]\ [0-9]{1,3}..[0-9]{1,2}.[0-9]{1,3})&nbsp;\\s*</td>
 descRex            = colspan="6">((?:.|\n|\r)*?)</td>
 typeRex            = </a>\ \\((.*)\\)\\s*</td>
 rowBlockExStart    = <tr
 rowBlockExEnd      = </tr>
-prefixExStart      =
-prefixExEnd        =
+prefixExStart      = <span\ id="awpt_
+prefixExEnd        = ">
 
 #--------------------------------------
 #Section2e: Attributes

Modified: branches/bugfix_1.0/src/CacheWolf/SpiderGC.java
===================================================================
--- branches/bugfix_1.0/src/CacheWolf/SpiderGC.java	2010-06-30 14:53:05 UTC (rev 2653)
+++ branches/bugfix_1.0/src/CacheWolf/SpiderGC.java	2010-07-01 12:01:32 UTC (rev 2654)
@@ -1188,17 +1188,22 @@
 			rowBlock = exRowBlock.findNext();
 			while(exRowBlock.endOfSearch()==false){
 				CacheHolderDetail cxD = new CacheHolderDetail();
-				
+
+/*				
 				String[] AddiBlock=mString.split(rowBlock,'\n');
 				int linePrefix=8;
 				if(AddiBlock.length < linePrefix + 1) {
 					(new MessageBox(MyLocale.getMsg(5500,"Error"), "GC changed table output \nCW must be changed too!", FormBase.OKB)).execute();
 					break;
 				}				
-//				Extractor exPrefix=new Extractor(AddiBlock[linePrefix].trim(),p.getProp("prefixExStart"),p.getProp("prefixExEnd"),0,true);
-//				String prefix=exPrefix.findNext();
 				String prefix=AddiBlock[linePrefix].trim();
+*/
 
+//				Extractor exPrefix=new Extractor(AddiBlock[linePrefix].trim(),p.getProp("prefixExStart"),p.getProp("prefixExEnd"),0,true);
+
+				Extractor exPrefix=new Extractor(rowBlock,p.getProp("prefixExStart"),p.getProp("prefixExEnd"),0,true);
+				String prefix=exPrefix.findNext();
+
 				String adWayPoint;
 				if (prefix.length()==2)
 					adWayPoint=prefix+wayPoint.substring(2);



From mik77 at mail.berlios.de  Thu Jul  1 10:52:01 2010
From: mik77 at mail.berlios.de (mik77 at mail.berlios.de)
Date: Thu,  1 Jul 2010 10:52:01 PM +0200
Subject: [Cachewolf-svn] r2655 - in trunk/src/CacheWolf: . imp
Message-ID: <20100701205201.AFDAA480AAF@sheep.berlios.de>

Author: mik77
Date: 2010-07-01 22:52:01 +0200 (Thu, 01 Jul 2010)
New Revision: 2655

Modified:
   trunk/src/CacheWolf/CacheHolderDetail.java
   trunk/src/CacheWolf/TravelbugList.java
   trunk/src/CacheWolf/imp/GPXImporter.java
Log:
better handling for updating TBs

Modified: trunk/src/CacheWolf/CacheHolderDetail.java
===================================================================
--- trunk/src/CacheWolf/CacheHolderDetail.java	2010-07-01 12:01:32 UTC (rev 2654)
+++ trunk/src/CacheWolf/CacheHolderDetail.java	2010-07-01 20:52:01 UTC (rev 2655)
@@ -115,8 +115,13 @@
 			 Travelbug tb=newCh.Travelbugs.getTB(i);  
 		     Travelbug oldTB=this.Travelbugs.find(tb.getName());
 		     // If the bug is already in the cache, we keep it
-		     if (oldTB != null)
+		     if (oldTB != null) {
+		    	 if (tb.getMission().length() > 0)
+		    		 oldTB.setMission(tb.getMission());
+		    	 if (tb.getGuid().length() > 0)
+		    		 oldTB.setGuid(tb.getGuid());
 		    	 newCh.Travelbugs.replace(i,oldTB);
+		     }
 		    
 		  }
 		  this.Travelbugs = newCh.Travelbugs;

Modified: trunk/src/CacheWolf/TravelbugList.java
===================================================================
--- trunk/src/CacheWolf/TravelbugList.java	2010-07-01 12:01:32 UTC (rev 2654)
+++ trunk/src/CacheWolf/TravelbugList.java	2010-07-01 20:52:01 UTC (rev 2655)
@@ -30,15 +30,7 @@
 
 	/** Add a travelbug to the list */
 	public void add(Travelbug pTb) {
-		boolean doAdd = true;
-		for (int i = 0; i < tbList.size(); i++) {
-			Travelbug element = (Travelbug) tbList.get(i);
-			if (pTb.getName().equals(element.getName())) {
-				doAdd=false;
-				break;
-			}
-		}
-		if (doAdd) tbList.add(pTb);
+		tbList.add(pTb);
 	}
 	
 	/** Remove a travelbug from the list */

Modified: trunk/src/CacheWolf/imp/GPXImporter.java
===================================================================
--- trunk/src/CacheWolf/imp/GPXImporter.java	2010-07-01 12:01:32 UTC (rev 2654)
+++ trunk/src/CacheWolf/imp/GPXImporter.java	2010-07-01 20:52:01 UTC (rev 2655)
@@ -252,6 +252,7 @@
 		}
 		if (name.equals("groundspeak:travelbugs")) {
 			inBug = true;
+			holder.getCacheDetails(false).Travelbugs.clear();
 			return;
 		}
 		if (debugGPX){



From mik77 at mail.berlios.de  Fri Jul  2 10:07:52 2010
From: mik77 at mail.berlios.de (mik77 at mail.berlios.de)
Date: Fri,  2 Jul 2010 10:07:52 AM +0200
Subject: [Cachewolf-svn] r2656 - trunk/res_noewe/templates
Message-ID: <20100702080752.F0450480C24@sheep.berlios.de>

Author: mik77
Date: 2010-07-02 10:07:52 +0200 (Fri, 02 Jul 2010)
New Revision: 2656

Modified:
   trunk/res_noewe/templates/mn6route.tpl
Log:
set correct extension for MN6 route export

Modified: trunk/res_noewe/templates/mn6route.tpl
===================================================================
--- trunk/res_noewe/templates/mn6route.tpl	2010-07-01 20:52:01 UTC (rev 2655)
+++ trunk/res_noewe/templates/mn6route.tpl	2010-07-02 08:07:52 UTC (rev 2656)
@@ -4,6 +4,7 @@
 <tmpl_par name="badchars" value="|">
 <#-- newline: CR, LF, CRLF -->
 <tmpl_par name="newline" value="CRLF">
+<tmpl_par name="Out" value="*.rte">
 <tmpl_loop cache_index>
 [<tmpl_var name=NAME>|][0][10]|<tmpl_var name=LON>,<tmpl_var name=LAT>||<tmpl_var name=LON>|<tmpl_var name=LAT>[7]||[6]|||<tmpl_var name=LON>|<tmpl_var name=LAT>[3]||[2]|||[0]|||<br/>
-</tmpl_loop>
\ No newline at end of file
+</tmpl_loop>



From mik77 at mail.berlios.de  Fri Jul  2 10:29:40 2010
From: mik77 at mail.berlios.de (mik77 at mail.berlios.de)
Date: Fri,  2 Jul 2010 10:29:40 AM +0200
Subject: [Cachewolf-svn] r2657 - trunk
Message-ID: <20100702082940.BCA4D480C24@sheep.berlios.de>

Author: mik77
Date: 2010-07-02 10:29:40 +0200 (Fri, 02 Jul 2010)
New Revision: 2657

Modified:
   trunk/currentversions.txt
Log:
version numbers updated

Modified: trunk/currentversions.txt
===================================================================
--- trunk/currentversions.txt	2010-07-02 08:07:52 UTC (rev 2656)
+++ trunk/currentversions.txt	2010-07-02 08:29:40 UTC (rev 2657)
@@ -1,17 +1,17 @@
 # Release
 T0VersionMajor: 1
 T0VersionMinor: 0
-T0SvnRevision: 2609
+T0SvnRevision: 2654
 
 # ReleaseCandidate
 T1VersionMajor: 1
 T1VersionMinor: 0
-T1SvnRevision: 2609
+T1SvnRevision: 2654
 
 # InDevelopmentStable
 T2VersionMajor: 1
 T2VersionMinor: 1
-T2SvnRevision: 2591
+T2SvnRevision: 2656
 
 # InDevelopmentNewest
 T3VersionMajor: 1



From araber95 at mail.berlios.de  Sat Jul  3 10:59:18 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sat,  3 Jul 2010 10:59:18 PM +0200
Subject: [Cachewolf-svn] r2658 - trunk/src/CacheWolf/navi
Message-ID: <20100703205918.5C83C480C93@sheep.berlios.de>

Author: araber95
Date: 2010-07-03 22:59:18 +0200 (Sat, 03 Jul 2010)
New Revision: 2658

Modified:
   trunk/src/CacheWolf/navi/MovingMap.java
Log:
show complete track on reentring map (https://developer.berlios.de/bugs/?func=detailbug&bug_id=17257&group_id=2211)

Modified: trunk/src/CacheWolf/navi/MovingMap.java
===================================================================
--- trunk/src/CacheWolf/navi/MovingMap.java	2010-07-02 08:29:40 UTC (rev 2657)
+++ trunk/src/CacheWolf/navi/MovingMap.java	2010-07-03 20:59:18 UTC (rev 2658)
@@ -392,6 +392,8 @@
 		// to load maplist + place a map on screen otherwise no symbol can be placed
 		ignoreGps=true; // else overlay symbols are removed on started gps
 		
+		rebuildOverlaySet(); // show tracks , even if reentering map
+		
 		updatePosition(centerTo);
 		setCenterOfScreen(centerTo, false);
 		
@@ -407,9 +409,7 @@
 		}
 		setMarkedCache(Global.mainTab.ch); // this is the selected one (not necessary marked)
 		showCachesOnMap();
-
-		addTrack(myNavigation.curTrack);
-
+		
 		if (myNavigation.destinationIsCache) {
 			destChanged(myNavigation.destinationCache);
 		}
@@ -1775,12 +1775,12 @@
 		}
 		repaintNow();
 	}
-
+/*
 	public void setZoomingMode() {
 		repaintNow();
 		zoomingMode = true;
 	}
-
+*/
 	/**
 	 * zommes in if w>0 and out if w<0
 	 * @param firstclickpoint



From araber95 at mail.berlios.de  Sat Jul  3 11:00:30 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sat,  3 Jul 2010 11:00:30 PM +0200
Subject: [Cachewolf-svn] r2659 - trunk/src/CacheWolf/navi
Message-ID: <20100703210030.1078C480C93@sheep.berlios.de>

Author: araber95
Date: 2010-07-03 23:00:29 +0200 (Sat, 03 Jul 2010)
New Revision: 2659

Modified:
   trunk/src/CacheWolf/navi/GotoPanel.java
Log:
one more button for fingertip

Modified: trunk/src/CacheWolf/navi/GotoPanel.java
===================================================================
--- trunk/src/CacheWolf/navi/GotoPanel.java	2010-07-03 20:59:18 UTC (rev 2658)
+++ trunk/src/CacheWolf/navi/GotoPanel.java	2010-07-03 21:00:29 UTC (rev 2659)
@@ -47,6 +47,7 @@
 	Preferences pref;
 	Profile profile;
 	// different panels to avoid spanning
+	CellPanel HeadP = new CellPanel();
 	CellPanel ButtonP = new CellPanel();
 	CellPanel CoordsP = new CellPanel();
 	CellPanel roseP = new CellPanel();
@@ -59,8 +60,6 @@
 	final static Color GREEN = new Color(0,255,0);
 	final static Color BLUE = new Color(0,0,255);
 
-	int ticker = 0;
-
 	Menu mnuContextFormt;
 	MenuItem miCooformat[] = new MenuItem[TransformCoordinates.localSystems.length + 3]; //miDMM, miDMS, miDD, miUTM, miGK;
 
@@ -86,8 +85,8 @@
 		// Button
 		ButtonP.addNext(btnGPS = new mButton(MyLocale.getMsg(1504,"Start")),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
 		ButtonP.addNext(btnCenter = new mButton(MyLocale.getMsg(309,"Centre")),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
-		ButtonP.addNext(btnSave = new mButton(MyLocale.getMsg(311,"Create Waypoint")),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
-		ButtonP.addLast(btnMap = new mButton(MyLocale.getMsg(1506,"Map")),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
+		ButtonP.addLast(btnSave = new mButton(MyLocale.getMsg(311,"Create Waypoint")),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
+		// ButtonP.addLast(btnMap = new mButton(MyLocale.getMsg(1506,"Map")),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
 
 		//Format selection for coords
 		//context menu
@@ -142,10 +141,12 @@
 		else miNorthCentered.modifiers &= MenuItem.Checked;
 
 		//add Panels
-		this.addLast(ButtonP,CellConstants.DONTSTRETCH, CellConstants.DONTFILL|CellConstants.WEST).setTag(SPAN,new Dimension(2,1));
-		this.addLast(CoordsP,CellConstants.HSTRETCH, CellConstants.HFILL|CellConstants.NORTH).setTag(SPAN,new Dimension(2,1));
+		HeadP.addLast(ButtonP,CellConstants.HSTRETCH, CellConstants.DONTFILL|CellConstants.WEST).setTag(SPAN,new Dimension(2,1));
+		HeadP.addLast(CoordsP,CellConstants.HSTRETCH, CellConstants.HFILL|CellConstants.NORTH).setTag(SPAN,new Dimension(2,1));	
+		this.addNext(HeadP,CellConstants.HSTRETCH, CellConstants.WEST).setTag(SPAN,new Dimension(2,1));		
+		this.addLast(btnMap = new mButton(" ---> "+MyLocale.getMsg(1506,"Map")+" "),CellConstants.HSTRETCH, CellConstants.VFILL|CellConstants.RIGHT).setTag(SPAN,new Dimension(2,1));
 		this.addLast(roseP,CellConstants.DONTSTRETCH, CellConstants.DONTFILL|CellConstants.WEST).setTag(SPAN,new Dimension(2,1));
-
+		btnMap.backGround=GREEN;
 		// for debuging
 		/*		CWGPSPoint myGPS;
 		myGPS = new CWGPSPoint();



From admin at berlios.de  Sat Jul  3 23:04:40 2010
From: admin at berlios.de (admin at berlios.de)
Date: Sat, 3 Jul 2010 23:04:40 +0200 (CEST)
Subject: [Cachewolf-svn] [Bug #17257] Trackpunkte in Karte fehlen
Message-ID: <201007032104.o63L4eUi003362@unicorn.berlios.de>

Bug #17257, was updated on 2010-Jun-14 10:35
Here is a current snapshot of the bug.

Project: CacheWolf
Category: Map
Status: Closed
Resolution: Fixed
Bug Group: Fixed, ready to test
Priority: 5
Submitted by: mik77
Assigned to : none
Summary: Trackpunkte in Karte fehlen

Details: Wenn man w?hrend man unterwegs ist, die Karte schlie?t und eine Weile sp?ter wieder ?ffnet, werden f?r den dazwischen liegenden Weg keine Trackpunkte angezeigt. Meine Meinung nach hatte dies fr?her funktioniert.

Follow-Ups:

Date: 2010-Jul-03 23:04
By: araber95

Comment:
Bitte mal ausprobieren.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17257&group_id=2211


From admin at berlios.de  Sat Jul  3 23:06:03 2010
From: admin at berlios.de (admin at berlios.de)
Date: Sat, 3 Jul 2010 23:06:03 +0200 (CEST)
Subject: [Cachewolf-svn] [Bug #17292] neuer Wegpunkt in leerem Profil wird
	Addi
Message-ID: <201007032106.o63L63GZ004593@unicorn.berlios.de>

Bug #17292, was updated on 2010-Jun-26 00:10
Here is a current snapshot of the bug.

Project: CacheWolf
Category: Other
Status: Closed
Resolution: Invalid
Bug Group: Bug unconfirmed
Priority: 1
Submitted by: pfeffer
Assigned to : none
Summary: neuer Wegpunkt in leerem Profil wird Addi

Details: in einem neuen (leeren) Profil wird ein neu angelegter Wegpunkt ein Addi (mit rotem Dreieck), muss aber nat?lich ein Hauptwegpunkt sein.

Follow-Ups:

Date: 2010-Jul-03 23:06
By: araber95

Comment:
nicht nachvollziehbar
-------------------------------------------------------

Date: 2010-Jun-26 14:30
By: araber95

Comment:
kann ich nicht best?tigen! Bitte  genaue Vorgehensweise beschreiben!
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17292&group_id=2211


From araber95 at mail.berlios.de  Sat Jul  3 11:26:52 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sat,  3 Jul 2010 11:26:52 PM +0200
Subject: [Cachewolf-svn] r2660 - trunk/src/CacheWolf/navi
Message-ID: <20100703212652.EA6DD480C95@sheep.berlios.de>

Author: araber95
Date: 2010-07-03 23:26:52 +0200 (Sat, 03 Jul 2010)
New Revision: 2660

Modified:
   trunk/src/CacheWolf/navi/MapLoaderGui.java
Log:
default values for input of tilesize. (https://developer.berlios.de/bugs/?func=detailbug&bug_id=17293&group_id=2211)

Modified: trunk/src/CacheWolf/navi/MapLoaderGui.java
===================================================================
--- trunk/src/CacheWolf/navi/MapLoaderGui.java	2010-07-03 21:00:29 UTC (rev 2659)
+++ trunk/src/CacheWolf/navi/MapLoaderGui.java	2010-07-03 21:26:52 UTC (rev 2660)
@@ -85,6 +85,11 @@
 			tileWidth = pref.myAppWidth > 200?pref.myAppWidth:200;
 			tileHeight = pref.myAppHeight > 175?pref.myAppHeight:175;
 		}
+		pref.tilewidth=tileWidth;
+		pref.tileheight=tileHeight;
+		// ist das wirklich so gewollt?
+		pref.tilewidth=1000;
+		pref.tileheight=1000;
 		initTileInputfields();
 		cacheDB = cacheDBi;
 		mapLoader = new MapLoader(FileBase.getProgramDirectory()+"/"+"webmapservices");



From admin at berlios.de  Sat Jul  3 23:27:48 2010
From: admin at berlios.de (admin at berlios.de)
Date: Sat, 3 Jul 2010 23:27:48 +0200 (CEST)
Subject: [Bug #17293] Kartendownload: Kachelgrößenvorgabe ist 0 bei "pro Cache"
Message-ID: <201007032127.o63LRmKk025399@unicorn.berlios.de>

Bug #17293, was updated on 2010-Jun-26 00:11
Here is a current snapshot of the bug.

Project: CacheWolf
Category: Map
Status: Closed
Resolution: Fixed
Bug Group: Fixed, ready to test
Priority: 1
Submitted by: pfeffer
Assigned to : none
Summary: Kartendownload: Kachelgr??envorgabe ist 0 bei "pro Cache"

Details: Kartendownload: Kachelgr??envorgabe ist 0 bei "pro Cache", was natr?lich einen Fehler verursacht. Vorgabe sollte entweder 500x500 oder 1000x1000 sein.

Gru?,
   Pfeffer

Follow-Ups:

Date: 2010-Jul-03 23:27
By: araber95

Comment:
So oder so
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17293&group_id=2211


From admin at berlios.de  Sat Jul  3 23:29:48 2010
From: admin at berlios.de (admin at berlios.de)
Date: Sat, 3 Jul 2010 23:29:48 +0200 (CEST)
Subject: [Cachewolf-svn] [Bug #17258] Automatische Zoomstufenauswahl
	funktioniert nicht
Message-ID: <201007032129.o63LTmRk027343@unicorn.berlios.de>

Bug #17258, was updated on 2010-Jun-14 10:42
Here is a current snapshot of the bug.

Project: CacheWolf
Category: Map
Status: Open
Resolution: Works For Me
Bug Group: Bug reproduceable
Priority: 5
Submitted by: mik77
Assigned to : pfeffer
Summary: Automatische Zoomstufenauswahl funktioniert nicht

Details: Wenn man in der Karte die Default-Option "H?chster Detailgrad m. aktueller u. Zielpos." w?hlt, wird die Zoomstufe bisher anhand der Kacheln ausgew?hlt. Durch die M?glichkeit mehrere Kacheln anzuzeigen und die Verwendung verschiedener Display- und Kachelgr??en ist dies nicht (mehr) sinnvoll.

Es sollte die h?chste Zommstufe gew?hlt werden, bei der die Entfernung zum Ziel noch auf die l?ngere Seite des Displays passt.

Follow-Ups:

Date: 2010-Jul-03 23:29
By: araber95

Comment:
ich denke es reicht so aus wie es ist, ohne Ber?cksichtigung der tats?chlichen Bildschirmgr?sse.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17258&group_id=2211


From admin at berlios.de  Sat Jul  3 23:43:11 2010
From: admin at berlios.de (admin at berlios.de)
Date: Sat, 3 Jul 2010 23:43:11 +0200 (CEST)
Subject: [Cachewolf-svn] [Bug #17258] Automatische Zoomstufenauswahl
	funktioniert nicht
Message-ID: <201007032143.o63LhBpe011032@unicorn.berlios.de>

Bug #17258, was updated on 2010-Jun-14 10:42
Here is a current snapshot of the bug.

Project: CacheWolf
Category: Map
Status: Open
Resolution: Works For Me
Bug Group: Bug reproduceable
Priority: 5
Submitted by: mik77
Assigned to : pfeffer
Summary: Automatische Zoomstufenauswahl funktioniert nicht

Details: Wenn man in der Karte die Default-Option "H?chster Detailgrad m. aktueller u. Zielpos." w?hlt, wird die Zoomstufe bisher anhand der Kacheln ausgew?hlt. Durch die M?glichkeit mehrere Kacheln anzuzeigen und die Verwendung verschiedener Display- und Kachelgr??en ist dies nicht (mehr) sinnvoll.

Es sollte die h?chste Zommstufe gew?hlt werden, bei der die Entfernung zum Ziel noch auf die l?ngere Seite des Displays passt.

Follow-Ups:

Date: 2010-Jul-03 23:43
By: mik77

Comment:
Nat?rlich "reicht" es. Aber ein gew?nschtes und nachvollziehbares Verhalten ist es nicht und sollte vern?nftig gel?st werden. Das muss nicht morgen passieren. Aber irgendwann m?ssen wir es angehen.
-------------------------------------------------------

Date: 2010-Jul-03 23:29
By: araber95

Comment:
ich denke es reicht so aus wie es ist, ohne Ber?cksichtigung der tats?chlichen Bildschirmgr?sse.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17258&group_id=2211


From admin at berlios.de  Sun Jul  4 20:30:25 2010
From: admin at berlios.de (admin at berlios.de)
Date: Sun, 4 Jul 2010 20:30:25 +0200 (CEST)
Subject: [Cachewolf-svn] [Bug #17257] Trackpunkte in Karte fehlen
Message-ID: <201007041830.o64IUP9L025875@unicorn.berlios.de>

Bug #17257, was updated on 2010-Jun-14 10:35
Here is a current snapshot of the bug.

Project: CacheWolf
Category: Map
Status: Closed
Resolution: Fixed
Bug Group: Fixed, ready to test
Priority: 5
Submitted by: mik77
Assigned to : none
Summary: Trackpunkte in Karte fehlen

Details: Wenn man w?hrend man unterwegs ist, die Karte schlie?t und eine Weile sp?ter wieder ?ffnet, werden f?r den dazwischen liegenden Weg keine Trackpunkte angezeigt. Meine Meinung nach hatte dies fr?her funktioniert.

Follow-Ups:

Date: 2010-Jul-04 20:30
By: mik77

Comment:
Das scheint jetzt zu funktionieren. Daf?r hatte ich jetzt wieder mehrere auf dem Bildschirm klebende blaue Quadrate und sogar ein St?ck roter Track. Beides war fest auf dem Bildschirm und bewegte sich nicht mit der Karte.
-------------------------------------------------------

Date: 2010-Jul-03 23:04
By: araber95

Comment:
Bitte mal ausprobieren.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17257&group_id=2211


From araber95 at mail.berlios.de  Sun Jul  4 10:29:41 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun,  4 Jul 2010 10:29:41 PM +0200
Subject: [Cachewolf-svn] r2661 - trunk/src/CacheWolf
Message-ID: <20100704202941.595AD480D6D@sheep.berlios.de>

Author: araber95
Date: 2010-07-04 22:29:41 +0200 (Sun, 04 Jul 2010)
New Revision: 2661

Modified:
   trunk/src/CacheWolf/CacheHolder.java
Log:
bugfix rename waypoint part1 of http://www.geoclub.de/viewtopic.php?f=40&t=45806

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-07-03 21:26:52 UTC (rev 2660)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-07-04 20:29:41 UTC (rev 2661)
@@ -1382,12 +1382,12 @@
 	 * @return New or old IconAndText object
 	 */
 	public IconAndText getIconAndTextWP(int level, FontMetrics fm) {
-		if (level != iconAndTextWPLevel || iconAndTextWP == null) {
+		if (level != iconAndTextWPLevel || iconAndTextWP == null || !iconAndTextWP.text.equals(wayPoint)) {
 			switch (level) {
-				case 4: iconAndTextWP = new IconAndText(GuiImageBroker.imageError, this.getWayPoint(), fm); break;
-				case 3: iconAndTextWP = new IconAndText(myTableModel.yellow, this.getWayPoint(), fm); break;
-				case 2: iconAndTextWP = new IconAndText(myTableModel.red, this.getWayPoint(), fm); break;
-				case 1: iconAndTextWP = new IconAndText(myTableModel.blue, this.getWayPoint(), fm); break;
+				case 4: iconAndTextWP = new IconAndText(GuiImageBroker.imageError, wayPoint, fm); break;
+				case 3: iconAndTextWP = new IconAndText(myTableModel.yellow, wayPoint, fm); break;
+				case 2: iconAndTextWP = new IconAndText(myTableModel.red, wayPoint, fm); break;
+				case 1: iconAndTextWP = new IconAndText(myTableModel.blue, wayPoint, fm); break;
 			}
 			iconAndTextWPLevel = level;
 		}



From admin at berlios.de  Sun Jul  4 22:51:34 2010
From: admin at berlios.de (admin at berlios.de)
Date: Sun, 4 Jul 2010 22:51:34 +0200 (CEST)
Subject: [Cachewolf-svn] [Bug #17252] Wegpunktnamen Murks
Message-ID: <201007042051.o64KpYJ8003855@unicorn.berlios.de>

Bug #17252, was updated on 2010-Jun-14 01:00
Here is a current snapshot of the bug.

Project: CacheWolf
Category: None
Status: Closed
Resolution: Fixed
Bug Group: Fixed, tested
Priority: 1
Submitted by: pfeffer
Assigned to : araber95
Summary: Wegpunktnamen Murks

Details: http://www.geoclub.de/viewtopic.php?f=40&t=45806

Follow-Ups:

Date: 2010-Jul-04 22:51
By: araber95

Comment:
das Aktualisieren war das Problem!
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17252&group_id=2211


From araber95 at mail.berlios.de  Tue Jul  6 04:00:15 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Tue,  6 Jul 2010 04:00:15 PM +0200
Subject: [Cachewolf-svn] r2662 - trunk/src/CacheWolf
Message-ID: <20100706140015.A2173480C24@sheep.berlios.de>

Author: araber95
Date: 2010-07-06 16:00:15 +0200 (Tue, 06 Jul 2010)
New Revision: 2662

Modified:
   trunk/src/CacheWolf/DescriptionPanel.java
Log:
removed Html-Link to pictures from DescriptionPanel (http://www.geoclub.de/viewtopic.php?f=40&t=46343)

Modified: trunk/src/CacheWolf/DescriptionPanel.java
===================================================================
--- trunk/src/CacheWolf/DescriptionPanel.java	2010-07-04 20:29:41 UTC (rev 2661)
+++ trunk/src/CacheWolf/DescriptionPanel.java	2010-07-06 14:00:15 UTC (rev 2662)
@@ -66,57 +66,55 @@
         Vm.showWait(true);
         if (cache!=null && isHtml) {
             int imageNo = 0;
-            if (Global.getPref().descShowImg) {
-                CacheImages Images;
-                CacheHolder chImages; // cache which supplies the images (could be main cache)
-                if (cache.isAddiWpt()) {
-                    chImages=cache.mainCache;
-                } else {
-                    chImages=cache;
-                }
-            	Images = chImages.getCacheDetails(true).images;
-                StringBuffer s = new StringBuffer(desc.length() + Images.size() * 100);
-                int start = 0;
-                int pos;
-                Regex imgRex = new Regex("src=(?:\\s*[^\"|']*?)(?:\"|')(.*?)(?:\"|')");
-                if (Images.size() > 0) {
-                    while (start >= 0 && (pos = desc.indexOf("<img", start)) > 0) {
-                        s.append(desc.substring(start, pos));
-                        imgRex.searchFrom(desc, pos);
-                        String imgUrl = imgRex.stringMatched(1);
-                        if (imgUrl==null) break; // Remaining pictures are from image span
-                        // Vm.debug("imgUrl "+imgUrl);
-                        if (imgUrl.lastIndexOf('.') > 0 && imgUrl.toLowerCase().startsWith("http")) {
-                            String imgType = (imgUrl.substring(imgUrl.lastIndexOf('.'))
-                                    .toLowerCase() + "    ").substring(0, 4).trim();
-                            // If we have an image which we stored when spidering, we can display it
-        					if(imgType.startsWith(".png") || imgType.startsWith(".jpg") || imgType.startsWith(".gif")){
-                                s.append("<img src=\"" +
-                                // Global.getProfile().dataDir+
-                                        Images.get(imageNo).getFilename() + "\">");
-                                imageNo++;
-                            }
+            CacheImages Images;
+            CacheHolder chImages; // cache which supplies the images (could be main cache)
+            if (cache.isAddiWpt()) {
+                chImages=cache.mainCache;
+            } else {
+                chImages=cache;
+            }
+        	Images = chImages.getCacheDetails(true).images;
+            StringBuffer s = new StringBuffer(desc.length() + Images.size() * 100);
+            int start = 0;
+            int pos;
+            Regex imgRex = new Regex("src=(?:\\s*[^\"|']*?)(?:\"|')(.*?)(?:\"|')");
+            while (start >= 0 && (pos = desc.indexOf("<img", start)) > 0) {
+                s.append(desc.substring(start, pos));
+                imgRex.searchFrom(desc, pos);
+                String imgUrl = imgRex.stringMatched(1);
+                if (imgUrl==null) break; // Remaining pictures are from image span
+                // Vm.debug("imgUrl "+imgUrl);
+                if (imgUrl.lastIndexOf('.') > 0 && imgUrl.toLowerCase().startsWith("http")) {
+                    String imgType = (imgUrl.substring(imgUrl.lastIndexOf('.')).toLowerCase() + "    ").substring(0, 4).trim();
+                    // If we have an image which we stored when spidering, we can display it
+                    if (Images.size()>0 && Global.getPref().descShowImg) {
+    					if(imgType.startsWith(".png") || imgType.startsWith(".jpg") || imgType.startsWith(".gif")){
+                            s.append("<img src=\"" +Images.get(imageNo).getFilename() + "\">");
+                            imageNo++;
                         }
-                        start = desc.indexOf(">", pos);
-                        if (start >= 0)
-                            start++;
-                        if (imageNo >= Images.size())
-                            break;
                     }
+                    else {
+                        // s.append(" \"" + imgUrl + "\" : " + MyLocale.getMsg(322,"") + " ");
+                        s.append("<img src=\"" + "noImage.png" + "\"" + " alt=\"no image\"" + ">");
+                    }
                 }
-                if (start >= 0)
-                    s.append(desc.substring(start));
-                desc = s.toString();
-                if (imageNo<Images.size()) {
-                    desc += getPicDesc(imageNo, chImages.getCacheDetails(true));
-                }
+                start = desc.indexOf(">", pos);
+                if (start >= 0) start++;
+                if (imageNo >= Images.size()) break;
             }
+            if (start >= 0)
+                s.append(desc.substring(start));
+            desc = s.toString();
+            start=Images.size();
+            if (imageNo<Images.size() && Global.getPref().descShowImg) {
+                desc += getPicDesc(imageNo, chImages.getCacheDetails(true));
+            }
+
             //disp.setHtml(desc);
             disp.startHtml();
             disp.getDecoderProperties().set("documentroot", Global.getProfile().dataDir);
             disp.addHtml(desc, new ewe.sys.Handle());
             disp.endHtml();
-
         } else {
             disp.startHtml(); // To clear the old HTML display
             disp.endHtml();



From admin at berlios.de  Tue Jul  6 17:04:23 2010
From: admin at berlios.de (admin at berlios.de)
Date: Tue, 6 Jul 2010 17:04:23 +0200 (CEST)
Subject: [Bug #17337] Blacklist setzen / aufheben über Multiselect
Message-ID: <201007061504.o66F4N0N023986@unicorn.berlios.de>

Bug #17337, was updated on 2010-Jul-06 17:04
Here is a current snapshot of the bug.

Project: CacheWolf
Category: Other
Status: Open
Resolution: None
Bug Group: Feature Request
Priority: 5
Submitted by: araber95
Assigned to : none
Summary: Blacklist setzen / aufheben ?ber Multiselect

Details: M?glichkeit selektierte Cache Black zu listen / White zu listen

http://www.geoclub.de/viewtopic.php?f=40&t=46011

Es gibt auch andere als die dort beschriebenen Anwendungsf?lle!

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17337&group_id=2211


From admin at berlios.de  Tue Jul  6 17:27:42 2010
From: admin at berlios.de (admin at berlios.de)
Date: Tue, 6 Jul 2010 17:27:42 +0200 (CEST)
Subject: [Cachewolf-svn] [Bug #17338] Template-Exporter wahlweise mit xml /
	html / textAusgabe
Message-ID: <201007061527.o66FRght017459@unicorn.berlios.de>

Bug #17338, was updated on 2010-Jul-06 17:27
Here is a current snapshot of the bug.

Project: CacheWolf
Category: Import/Export
Status: Open
Resolution: None
Bug Group: Feature Request
Priority: 5
Submitted by: araber95
Assigned to : none
Summary: Template-Exporter wahlweise mit xml / html / textAusgabe

Details: Im Moment werden verschieden Felder z.B. long description ,... als SafeXML.cleanGPX formattiert. Intern f?r showCacheInBrowser werden die Felder schon als html zur Verf?gung gestellt.

Das k?nnte man ?ber einen tmpl_par zur allgemeinen Benutzung zur Verf?gung stellen.

Eine weitere Anwendung k?nnte das Ersetzen der html-tags sein, um eine reine Textausgabe zu haben. (z.B. Anwendung vom Ruhrcacher , Anzeige auf mp3-player)

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17338&group_id=2211


From admin at berlios.de  Tue Jul  6 17:30:03 2010
From: admin at berlios.de (admin at berlios.de)
Date: Tue, 6 Jul 2010 17:30:03 +0200 (CEST)
Subject: [Cachewolf-svn] [Bug #17339] Bilder - Infos im  tpl-Exporter
Message-ID: <201007061530.o66FU3C0019634@unicorn.berlios.de>

Bug #17339, was updated on 2010-Jul-06 17:30
Here is a current snapshot of the bug.

Project: CacheWolf
Category: Import/Export
Status: Open
Resolution: None
Bug Group: Feature Request
Priority: 5
Submitted by: araber95
Assigned to : none
Summary: Bilder - Infos im  tpl-Exporter

Details: Infos ?ber die Bilder eines Caches im Template - Exporter zur Verf?gung stellen.

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17339&group_id=2211


From admin at berlios.de  Tue Jul  6 17:57:57 2010
From: admin at berlios.de (admin at berlios.de)
Date: Tue, 6 Jul 2010 17:57:57 +0200 (CEST)
Subject: [Bug #17255] Fix für Ewe-VM unter Windows: Exit code
Message-ID: <201007061557.o66Fvvuk017413@unicorn.berlios.de>

Bug #17255, was updated on 2010-Jun-14 01:17
Here is a current snapshot of the bug.

Project: CacheWolf
Category: None
Status: Open
Resolution: None
Bug Group: None
Priority: 1
Submitted by: pfeffer
Assigned to : none
Summary: Fix f?r Ewe-VM unter Windows: Exit code

Details: In der Ewe-VM f?r Windows wird der Exit code von externen Programmen nicht korrekt gelesen, sondern immer 1 zur?ckgegeben.

Siehe http://www.geoclub.de/viewtopic.php?f=40&t=35145&start=70

Follow-Ups:

Date: 2010-Jul-06 17:57
By: araber95

Comment:
Da es im Moment nur eine Anwendung gibt f?r die das relevant ist, ist  das nicht f?r das Release ausschlaggebend, zumal man sich ja mit der java-Version behelfen kann.

-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17255&group_id=2211


From araber95 at mail.berlios.de  Tue Jul  6 08:18:12 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Tue,  6 Jul 2010 08:18:12 PM +0200
Subject: [Cachewolf-svn] r2663 - trunk/res_noewe/exporticons/exporticons
Message-ID: <20100706181813.090B9480C24@sheep.berlios.de>

Author: araber95
Date: 2010-07-06 20:18:12 +0200 (Tue, 06 Jul 2010)
New Revision: 2663

Modified:
   trunk/res_noewe/exporticons/exporticons/TomTom.zip
Log:
added WhereIGo Icon to TomTom.zip exporticons. (http://www.geoclub.de/viewtopic.php?f=40&t=46208)

Modified: trunk/res_noewe/exporticons/exporticons/TomTom.zip
===================================================================
(Binary files differ)



From araber95 at mail.berlios.de  Tue Jul  6 11:46:02 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Tue,  6 Jul 2010 11:46:02 PM +0200
Subject: [Cachewolf-svn] r2664 - in trunk: res_noewe/mmc/Desktop
	res_noewe/mmc/pda res_noewe/mmc/pda_vga src/CacheWolf/navi
Message-ID: <20100706214602.2A2BC480C24@sheep.berlios.de>

Author: araber95
Date: 2010-07-06 23:46:01 +0200 (Tue, 06 Jul 2010)
New Revision: 2664

Modified:
   trunk/res_noewe/mmc/Desktop/movingMapControls.xml
   trunk/res_noewe/mmc/pda/240x320.xml
   trunk/res_noewe/mmc/pda/movingMapControls.xml
   trunk/res_noewe/mmc/pda_vga/480x640.xml
   trunk/res_noewe/mmc/pda_vga/480x800.xml
   trunk/res_noewe/mmc/pda_vga/movingMapControls.xml
   trunk/src/CacheWolf/navi/MovingMap.java
Log:
Init for "fill white area" was incorrect.

Modified: trunk/res_noewe/mmc/Desktop/movingMapControls.xml
===================================================================
--- trunk/res_noewe/mmc/Desktop/movingMapControls.xml	2010-07-06 18:18:12 UTC (rev 2663)
+++ trunk/res_noewe/mmc/Desktop/movingMapControls.xml	2010-07-06 21:46:01 UTC (rev 2664)
@@ -1,113 +1,102 @@
 <mmc>
-	<settings fontsize="14"/>
+	<settings	fontsize="14"/>
 
-	<role name="always" active="true"/>
-	<role name="menu"/>
-	<role name="done" disable="map|centermap|zoom|detail"/>
-	<role name="zoom" disable="map|centermap|detail"/>
-	<role name="centermap"  disable="zoom|map|detail"/>
-	<role name="map" disable="zoom|centermap|detail"/>
-	<role name="detail" disable="zoom|centermap|map"/>
-	<role name="show_map" active="true"/> <!-- this name of role is fix in code! -->
-	<role name="show_caches" active="true"/><!-- this name of role is fix in code! -->
-	<role name="fill_white" active="true"/><!-- this name of role is fix in code! -->
-	<role name="zoom_manually"/><!-- this name of role is fix in code! -->
+	<role	name="always"	active="true"/>
+	<role	name="menu"/>
+	<role	name="done"	disable="map|centermap|zoom|detail"/>
+	<role	name="zoom"	disable="map|centermap|detail"/>
+	<role	name="centermap"	disable="zoom|map|detail"/>
+	<role	name="map"	disable="zoom|centermap|detail"/>
+	<role	name="detail"	disable="zoom|centermap|map"/>
+	<role	name="show_map"		active="true"/>	<!--	this	name	of	role	is	fix	in	code!	-->
+	<role	name="show_caches"	active="true"/>	<!--	this	name	of	role	is	fix	in	code!	-->
+	<role	name="fill_white"	active="true"/>	<!--	this	name	of	role	is	fix	in	code!	-->
+	<role	name="zoom_manually"/>			<!--	this	name	of	role	is	fix	in	code!	-->
 
 
 
-	<button action="changeStateOfRole" fromLeft="0" fromTop="0"  changeStateof="map" location="top.png"  visibleIf="!map"  localeDefault="map" localeID="4271" alignText="L" textOffsetLeft="10"/>
-	<button action="changeStateOfRole" fromLeft="0" fromTop="0"  changeStateof="map" location="top_active.png"  visibleIf="map"  localeDefault="map" localeID="4271" alignText="L" textOffsetLeft="10"/>
+	<button	action="changeStateOfRole"	fromLeft="0"	fromTop="0"	changeStateof="map"	location="top.png"			visibleIf="!map"	localeDefault="map"	localeID="4271"	alignText="L"	textOffsetLeft="10"/>
+	<button	action="changeStateOfRole"	fromLeft="0"	fromTop="0"	changeStateof="map"	location="top_active.png"		visibleIf="map"		localeDefault="map"	localeID="4271"	alignText="L"	textOffsetLeft="10"/>
 
-	<button action="changeStateOfRole" fromLeft="140" fromTop="0"  changeStateof="zoom" location="top.png"  visibleIf="!zoom"  localeDefault="zoom" localeID="4294" alignText="L" textOffsetLeft="10"/>
-	<button action="changeStateOfRole" fromLeft="140" fromTop="0"  changeStateof="zoom" location="top_active.png"  visibleIf="zoom"  localeDefault="zoom" localeID="4294" alignText="L" textOffsetLeft="10"/>
+	<button	action="changeStateOfRole"	fromLeft="140"	fromTop="0"	changeStateof="zoom"	location="top.png"			visibleIf="!zoom"	localeDefault="zoom"	localeID="4294"	alignText="L"	textOffsetLeft="10"/>
+	<button	action="changeStateOfRole"	fromLeft="140"	fromTop="0"	changeStateof="zoom"	location="top_active.png"		visibleIf="zoom"	localeDefault="zoom"	localeID="4294"	alignText="L"	textOffsetLeft="10"/>
 
-	<button action="changeStateOfRole" fromLeft="280" fromTop="0"  changeStateof="centermap" location="top.png"  visibleIf="!centermap"  localeDefault="center to" localeID="4295" alignText="L" textOffsetLeft="10"/>
-	<button action="changeStateOfRole" fromLeft="280" fromTop="0"  changeStateof="centermap" location="top_active.png"  visibleIf="centermap"  localeDefault="center to" localeID="4295" alignText="L" textOffsetLeft="10"/>
+	<button	action="changeStateOfRole"	fromLeft="280"	fromTop="0"	changeStateof="centermap"	location="top.png"		visibleIf="!centermap"	localeDefault="center to"	localeID="4295"	alignText="L"	textOffsetLeft="10"/>
+	<button	action="changeStateOfRole"	fromLeft="280"	fromTop="0"	changeStateof="centermap"	location="top_active.png"	visibleIf="centermap"	localeDefault="center to"	localeID="4295"	alignText="L"	textOffsetLeft="10"/>
 
-	<button action="changeStateOfRole" fromLeft="420" fromTop="0"  changeStateof="detail" location="top.png"  visibleIf="!detail"  localeDefault="detail" localeID="4296" alignText="L" textOffsetLeft="10"/>
-	<button action="changeStateOfRole" fromLeft="420" fromTop="0"  changeStateof="detail" location="top_active.png"  visibleIf="detail"  localeDefault="detail" localeID="4296" alignText="L" textOffsetLeft="10"/>
+	<button	action="changeStateOfRole"	fromLeft="420"	fromTop="0"	changeStateof="detail"	location="top.png"		visibleIf="!detail"	localeDefault="detail"	localeID="4296"	alignText="L"	textOffsetLeft="10"/>
+	<button	action="changeStateOfRole"	fromLeft="420"	fromTop="0"	changeStateof="detail"	location="top_active.png"	visibleIf="detail"	localeDefault="detail"	localeID="4296"	alignText="L"	textOffsetLeft="10"/>
 
-	<button action="" fromLeft="560" fromTop="0" location="top_long.png"  visibleIf="always"/>
-	<button action="close" fromRight="30" fromTop="0"  changeStateof="detail" location="close.png" icon="icon_close.png" visibleIf="always" />
+	<button	action=""	fromLeft="560"	fromTop="0"	location="top_long.png"	visibleIf="always"/>
+	<button	action="close"	fromRight="30"	fromTop="0"	changeStateof="detail"	location="close.png"	icon="icon_close.png"	visibleIf="always"	/>
 
 
-	<!-- sub menu: map -->
-	<button action="selectMap" fromLeft="0" fromTop="20"  location="row.png"  icon="icon_folder.png"  visibleIf="map" localeDefault="Select a map manually$s" localeID="4235" alignText="L" textOffsetLeft="20"/>
-	<button action="changeMapDir" fromLeft="0" fromTop="40"  location="row.png"  icon="icon_folders.png"  visibleIf="map" localeDefault="Change map directory" localeID="4237" alignText="L" textOffsetLeft="20"/>
-	<button action="changeStateOfRole" fromLeft="0" fromTop="60" changeStateof="show_map" location="row.png"  icon="icon_map.png"  visibleIf="map+!show_map" localeDefault="Show map" localeID="4239" alignText="L" textOffsetLeft="20"/>
-	<button action="changeStateOfRole" fromLeft="0" fromTop="60" changeStateof="show_map" location="row.png"  icon="icon_nomap.png"  visibleIf="map+show_map" localeDefault="Hide map" localeID="4241" alignText="L" textOffsetLeft="20"/>
-	<button action="changeStateOfRole" fromLeft="0" fromTop="80" changeStateof="fill_white" location="row.png"  icon="icon_map_no_fill.png"  visibleIf="map+!fill_white" localeDefault="Show white areas" localeID="4267" alignText="L" textOffsetLeft="20"/>
-	<button action="changeStateOfRole" fromLeft="0" fromTop="80" changeStateof="fill_white" location="row.png"  icon="icon_map_fill.png"  visibleIf="map+fill_white" localeDefault="Fill white areas" localeID="4266" alignText="L" textOffsetLeft="20"/>
-	<button action="changeStateOfRole" fromLeft="0" fromTop="100" changeStateof="show_caches" location="row.png"  icon="icon_map_cache.png"  visibleIf="map+!show_caches" localeDefault="Alle Cache anzeigen" localeID="4268" alignText="L" textOffsetLeft="20"/>
-	<button action="changeStateOfRole" fromLeft="0" fromTop="100" changeStateof="show_caches" location="row.png"  icon="icon_map_no_cache.png"  visibleIf="map+show_caches" localeDefault="Keine Cache anzeigen" localeID="4269" alignText="L" textOffsetLeft="20"/>
+	<!--	sub	menu:	map	-->
+	<button	action="selectMap"		fromLeft="0"	fromTop="20"	location="row.png"	icon="icon_folder.png"		visibleIf="map"			localeDefault="Select a map manually$s"	localeID="4235"	alignText="L"	textOffsetLeft="20"/>
+	<button	action="changeMapDir"		fromLeft="0"	fromTop="40"	location="row.png"	icon="icon_folders.png"		visibleIf="map"			localeDefault="Change map directory"	localeID="4237"	alignText="L"	textOffsetLeft="20"/>
+	<button	changeStateof="show_map"	fromLeft="0"	fromTop="60"	location="row.png"	icon="icon_map.png"		visibleIf="map+!show_map"	localeDefault="Show map"		localeID="4239"	alignText="L"	textOffsetLeft="20"	action="changeStateOfRole"/>
+	<button	changeStateof="show_map"	fromLeft="0"	fromTop="60"	location="row.png"	icon="icon_nomap.png"		visibleIf="map+show_map"	localeDefault="Hide map"		localeID="4241"	alignText="L"	textOffsetLeft="20"	action="changeStateOfRole"/>
+	<button	changeStateof="fill_white"	fromLeft="0"	fromTop="80"	location="row.png"	icon="icon_map_no_fill.png"	visibleIf="map+fill_white"	localeDefault="Show white areas"	localeID="4267"	alignText="L"	textOffsetLeft="20"	action="changeStateOfRole"/>
+	<button	changeStateof="fill_white"	fromLeft="0"	fromTop="80"	location="row.png"	icon="icon_map_fill.png"	visibleIf="map+!fill_white"	localeDefault="Fill white areas"	localeID="4266"	alignText="L"	textOffsetLeft="20"	action="changeStateOfRole"/>
+	<button	changeStateof="show_caches"	fromLeft="0"	fromTop="100"	location="row.png"	icon="icon_map_cache.png"	visibleIf="map+!show_caches"	localeDefault="Alle Cache anzeigen"	localeID="4268"	alignText="L"	textOffsetLeft="20"	action="changeStateOfRole"/>
+	<button	changeStateof="show_caches"	fromLeft="0"	fromTop="100"	location="row.png"	icon="icon_map_no_cache.png"	visibleIf="map+show_caches"	localeDefault="Keine Cache anzeigen"	localeID="4269"	alignText="L"	textOffsetLeft="20"	action="changeStateOfRole"/>
 
-	<!-- sub menu: zoom -->
+	<!--	sub	menu:	zoom	-->
+	<button	action="changeStateOfRole"	fromLeft="140"	fromTop="20"	changeStateof="zoom_manually"	location="row.png"	icon="icon_zoom.png"	visibleIf="zoom+!zoom_manually"	localeDefault="Manual zoom"	localeID="4292"	alignText="L"	textOffsetLeft="20"/>
+	<button	action="changeStateOfRole"	fromLeft="140"	fromTop="20"	changeStateof="zoom_manually"	location="row.png"	icon="icon_zoom.png"	visibleIf="zoom+zoom_manually"	localeDefault="Manual zoom"	localeID="4292"	alignText="L"	textOffsetLeft="20"/>
+	<button	action="zoomin"	fromLeft="140"	fromTop="40"	location="row.png"	icon="icon_zoom_in.png"	visibleIf="zoom"	localeDefault="Zoom in"	localeID="4291"	alignText="L"	textOffsetLeft="20"/>
+	<button	action="zoomout"	fromLeft="140"	fromTop="60"	location="row.png"	icon="icon_zoom_out.png"	visibleIf="zoom"	localeDefault="Zoom out"	localeID="4290"	alignText="L"	textOffsetLeft="20"/>
+	<button	action="1to1"	fromLeft="140"	fromTop="80"	location="row.png"	icon="icon_1to1.png"	visibleIf="zoom"	localeDefault="Zoom to original resolution"	localeID="4293"	alignText="L"	textOffsetLeft="20"/>
 
-	<button action="changeStateOfRole" fromLeft="140" fromTop="20"  changeStateof="zoom_manually"  location="row.png"  icon="icon_zoom.png"  visibleIf="zoom+!zoom_manually" localeDefault="Manual zoom" localeID="4292" alignText="L"  textOffsetLeft="20"/>
-	<button action="changeStateOfRole" fromLeft="140" fromTop="20"  changeStateof="zoom_manually"  location="row.png"  icon="icon_zoom.png"  visibleIf="zoom+zoom_manually" localeDefault="Manual zoom" localeID="4292" alignText="L"  textOffsetLeft="20"/>
-	<button action="zoomin" fromLeft="140" fromTop="40"  location="row.png"  icon="icon_zoom_in.png"  visibleIf="zoom" localeDefault="Zoom in" localeID="4291" alignText="L"  textOffsetLeft="20"/>
-	<button action="zoomout" fromLeft="140" fromTop="60" location="row.png"  icon="icon_zoom_out.png"  visibleIf="zoom" localeDefault="Zoom out" localeID="4290" alignText="L" textOffsetLeft="20"/>
-	<button action="1to1" fromLeft="140" fromTop="80" location="row.png"  icon="icon_1to1.png"  visibleIf="zoom" localeDefault="Zoom to original resolution" localeID="4293" alignText="L" textOffsetLeft="20"/>
+	<!--	sub	menu:	center	map	-->
+	<button	action="moveToDest"	fromLeft="280"	fromTop="20"	location="row.png"	icon="icon_to_target.png"	visibleIf="centermap"	localeDefault="Move to goto point"	localeID="4260"	alignText="L"	textOffsetLeft="20"/>
+	<button	action="moveToGps"	fromLeft="280"	fromTop="40"	location="row.png"	icon="icon_to_gps.png"	visibleIf="centermap"	localeDefault="Move to GPS position"	localeID="4262"	alignText="L"	textOffsetLeft="20"/>
+	<button	action="moveToCenter"	fromLeft="280"	fromTop="60"	location="row.png"	icon="icon_to_centre.png"	visibleIf="centermap"	localeDefault="Move to centre"	localeID="4264"	alignText="L"	textOffsetLeft="20"/>
 
+	<!--	sub	menu:	detail	-->
+	<button	action="highestResGpsDest"	fromLeft="420"	fromTop="20"	location="row.png"	icon="icon_map_pos_dest.png"	visibleIf="detail"	localeDefault=	"Highest res. containing dest. cur. position"	localeID="4244"	alignText="L"	textOffsetLeft="20"/>
+	<button	action="highestResolution"	fromLeft="420"	fromTop="40"	location="row.png"	icon="icon_map_highest_res.png"	visibleIf="detail"	localeDefault="Highest resolution"	localeID="4246"	alignText="L"	textOffsetLeft="20"/>
+	<button	action="keepManResolution"	fromLeft="420"	fromTop="60"	location="row.png"	icon="icon_map_man_res.png"	visibleIf="detail"	localeDefault="Keep manual resolution"	localeID="4248"	alignText="L"	textOffsetLeft="20"/>
+	<button	action="allCachesRes"		fromLeft="420"	fromTop="80"	location="row.png"	icon="icon_map_all.png"	visibleIf="detail"	localeDefault="Load a map containing all marked caches"	localeID="4252"	alignText="L"	textOffsetLeft="20"/>
+	<button	action="moreDetails"		fromLeft="420"	fromTop="100"	location="row.png"	icon="icon_map_more_details.png"	visibleIf="detail"	localeDefault="Load a map with more details"	localeID="4254"	alignText="L"	textOffsetLeft="20"/>
+	<button	action="moreOverview"		fromLeft="420"	fromTop="120"	location="row.png"	icon="icon_map_less_details.png"	visibleIf="detail"	localeDefault="Load a map for a better overview"	localeID="4256"	alignText="L"	textOffsetLeft="20"/>
 
-	<!-- sub menu: center map -->
+	<!--	statusline	-->
+	<button	action=""	fromLeft="0"	fromBottom="25"	location="status_long.png"	visibleIf="always"/>
+	<button	action=""	fromRight="200"	fromBottom="25"	location="status.png"		visibleIf="always"	content="distance"	alignText="C"/>
+	<button	action=""	fromRight="100"	fromBottom="25"	location="status.png"		visibleIf="always"	content="scale"		alignText="C"/>
 
-	<button action="moveToDest" fromLeft="280" fromTop="20" location="row.png"   icon="icon_to_target.png"  visibleIf="centermap" localeDefault="Move to goto point" localeID="4260" alignText="L" textOffsetLeft="20"/>
-	<button action="moveToGps" fromLeft="280" fromTop="40"  location="row.png"  icon="icon_to_gps.png"  visibleIf="centermap" localeDefault="Move to GPS position" localeID="4262" alignText="L" textOffsetLeft="20"/>
-	<button action="moveToCenter" fromLeft="280" fromTop="60" location="row.png"  icon="icon_to_centre.png"  visibleIf="centermap" localeDefault="Move to centre" localeID="4264" alignText="L" textOffsetLeft="20"/>
 
+	<!--status	line	icons-->
 
-	<!-- sub menu: detail -->
+	<!--	sub	menu:	map	-->
+	<button	action="selectMap"	fromLeft="10"	fromBottom="22"	location="icon_folder.png"	visibleIf="always"/>
+	<button	action="changeMapDir"	fromLeft="30"	fromBottom="22"	location="icon_folders.png"	visibleIf="always"/>
+	<button	fromLeft="50"	fromBottom="22"	changeStateof="show_map"	location="icon_map.png"			visibleIf="!show_map"		action="changeStateOfRole"/>
+	<button	fromLeft="50"	fromBottom="22"	changeStateof="show_map"	location="icon_nomap.png"		visibleIf="show_map"		action="changeStateOfRole"/>
+	<button	fromLeft="70"	fromBottom="22"	changeStateof="fill_white"	location="icon_map_fill.png"		visibleIf="!fill_white"		action="changeStateOfRole"/>
+	<button	fromLeft="70"	fromBottom="22"	changeStateof="fill_white"	location="icon_map_no_fill.png"		visibleIf="fill_white"		action="changeStateOfRole"/>
+	<button	fromLeft="90"	fromBottom="22"	changeStateof="show_caches"	location="icon_map_cache.png"		visibleIf="!show_caches"	action="changeStateOfRole"/>
+	<button	fromLeft="90"	fromBottom="22"	changeStateof="show_caches"	location="icon_map_no_cache.png"	visibleIf="show_caches"		action="changeStateOfRole"/>
 
-	<button action="highestResGpsDest" fromLeft="420" fromTop="20" location="row.png"    icon="icon_map_pos_dest.png"  visibleIf="detail" localeDefault= "Highest res. containing dest.  cur. position" localeID="4244" alignText="L" textOffsetLeft="20"/>
-	<button action="highestResolution" fromLeft="420" fromTop="40"  location="row.png"  icon="icon_map_highest_res.png"  visibleIf="detail" localeDefault="Highest resolution" localeID="4246" alignText="L" textOffsetLeft="20"/>
-	<button action="keepManResolution" fromLeft="420" fromTop="60" location="row.png"  icon="icon_map_man_res.png"  visibleIf="detail" localeDefault="Keep manual resolution" localeID="4248" alignText="L"  textOffsetLeft="20"/>
-	<button action="allCachesRes" fromLeft="420" fromTop="80" location="row.png"   icon="icon_map_all.png"  visibleIf="detail" localeDefault="Load a map containing all marked caches" localeID="4252" alignText="L" textOffsetLeft="20"/>
-	<button action="moreDetails" fromLeft="420" fromTop="100"  location="row.png"   icon="icon_map_more_details.png"  visibleIf="detail" localeDefault="Load a map with more details" localeID="4254" alignText="L" textOffsetLeft="20"/>
-	<button action="moreOverview" fromLeft="420" fromTop="120" location="row.png" icon="icon_map_less_details.png"  visibleIf="detail" localeDefault="Load a map for a better overview" localeID="4256" alignText="L" textOffsetLeft="20"/>
+	<!--	sub	menu:	zoom	-->
+	<button	action="changeStateOfRole"	fromLeft="140"	fromBottom="22"	changeStateof="zoom_manually"	location="icon_zoom.png"	visibleIf="!zoom_manually"/>
+	<button	action="changeStateOfRole"	fromLeft="140"	fromBottom="22"	changeStateof="zoom_manually"	location="icon_zoom.png"	visibleIf="zoom_manually"/>
+	<button	action="zoomin"			fromLeft="160"	fromBottom="22"	location="icon_zoom_in.png"	visibleIf="always"/>
+	<button	action="zoomout"		fromLeft="180"	fromBottom="22"	location="icon_zoom_out.png"	visibleIf="always"/>
+	<button	action="1to1"			fromLeft="200"	fromBottom="22"	location="icon_1to1.png"	visibleIf="always"/>
 
-	<!-- statusline -->
+	<!--	sub	menu:	center	map	-->
+	<button	action="moveToDest"	fromLeft="250"	fromBottom="22"	location="icon_to_target.png"	visibleIf="always"/>
+	<button	action="moveToGps"	fromLeft="270"	fromBottom="22"	location="icon_to_gps.png"	visibleIf="always"/>
+	<button	action="moveToCenter"	fromLeft="290"	fromBottom="22"	location="icon_to_centre.png"	visibleIf="always"/>
 
-	<button action="" fromLeft="0" fromBottom="25" location="status_long.png"  visibleIf="always"/>
-	<button action="" fromRight="200" fromBottom="25" location="status.png"  visibleIf="always" content="distance" alignText="C"/>
-	<button action="" fromRight="100" fromBottom="25" location="status.png" visibleIf="always" content="scale" alignText="C"/>
+	<!--	sub	menu:	detail	-->
+	<button	action="highestResGpsDest"	fromLeft="340"	fromBottom="22"	location="icon_map_pos_dest.png"	visibleIf="always"/>
+	<button	action="highestResolution"	fromLeft="360"	fromBottom="22"	location="icon_map_highest_res.png"	visibleIf="always"/>
+	<button	action="keepManResolution"	fromLeft="380"	fromBottom="22"	location="icon_map_man_res.png"		visibleIf="always"/>
+	<button	action="allCachesRes"		fromLeft="400"	fromBottom="22"	location="icon_map_all.png"		visibleIf="always"/>
+	<button	action="moreDetails"		fromLeft="420"	fromBottom="22"	location="icon_map_more_details.png"	visibleIf="always"/>
+	<button	action="moreOverview"		fromLeft="440"	fromBottom="22"	location="icon_map_less_details.png"	visibleIf="always"/>
 
-
-	<!--status line icons-->
-
-	<!-- sub menu: map -->
-	<button action="selectMap" fromLeft="10" fromBottom="22"  location="icon_folder.png"  visibleIf="always" />
-	<button action="changeMapDir" fromLeft="30" fromBottom="22"   location="icon_folders.png"  visibleIf="always"/>
-	<button action="changeStateOfRole" fromLeft="50" fromBottom="22"  changeStateof="show_map" location="icon_map.png"  visibleIf="!show_map"/>
-	<button action="changeStateOfRole" fromLeft="50" fromBottom="22"  changeStateof="show_map" location="icon_nomap.png"  visibleIf="show_map"/>
-	<button action="changeStateOfRole" fromLeft="70" fromBottom="22"  changeStateof="fill_white" location="icon_map_no_fill.png"  visibleIf="!fill_white"/>
-	<button action="changeStateOfRole" fromLeft="70" fromBottom="22"  changeStateof="fill_white" location="icon_map_fill.png"  visibleIf="fill_white"/>
-	<button action="changeStateOfRole" fromLeft="90" fromBottom="22"  changeStateof="show_caches" location="icon_map_cache.png"  visibleIf="!show_caches"/>
-	<button action="changeStateOfRole" fromLeft="90" fromBottom="22" changeStateof="show_caches" location="icon_map_no_cache.png"  visibleIf="show_caches"/>
-
-	<!-- sub menu: zoom -->
-
-	<button action="changeStateOfRole" fromLeft="140" fromBottom="22"   changeStateof="zoom_manually"  location="icon_zoom.png"  visibleIf="!zoom_manually"/>
-	<button action="changeStateOfRole" fromLeft="140" fromBottom="22"   changeStateof="zoom_manually"  location="icon_zoom.png"  visibleIf="zoom_manually"/>
-	<button action="zoomin" fromLeft="160" fromBottom="22" location="icon_zoom_in.png"  visibleIf="always"/>
-	<button action="zoomout" fromLeft="180" fromBottom="22" location="icon_zoom_out.png"  visibleIf="always"/>
-	<button action="1to1" fromLeft="200" fromBottom="22" location="icon_1to1.png"  visibleIf="always"/>
-
-
-	<!-- sub menu: center map -->
-
-	<button action="moveToDest" fromLeft="250" fromBottom="22" location="icon_to_target.png"  visibleIf="always"/>
-	<button action="moveToGps" fromLeft="270" fromBottom="22"  location="icon_to_gps.png"  visibleIf="always"/>
-	<button action="moveToCenter" fromLeft="290" fromBottom="22" location="icon_to_centre.png"  visibleIf="always"/>
-
-
-	<!-- sub menu: detail -->
-
-	<button action="highestResGpsDest" fromLeft="340" fromBottom="22" location="icon_map_pos_dest.png"  visibleIf="always" />
-	<button action="highestResolution" fromLeft="360" fromBottom="22"  location="icon_map_highest_res.png"  visibleIf="always"/>
-	<button action="keepManResolution" fromLeft="380" fromBottom="22" location="icon_map_man_res.png"  visibleIf="always"/>
-	<button action="allCachesRes" fromLeft="400" fromBottom="22" location="icon_map_all.png"  visibleIf="always"/>
-	<button action="moreDetails" fromLeft="420" fromBottom="22"  location="icon_map_more_details.png"  visibleIf="always"/>
-	<button action="moreOverview" fromLeft="440" fromBottom="22" location="icon_map_less_details.png"  visibleIf="always"/>
-
 </mmc>

Modified: trunk/res_noewe/mmc/pda/240x320.xml
===================================================================
--- trunk/res_noewe/mmc/pda/240x320.xml	2010-07-06 18:18:12 UTC (rev 2663)
+++ trunk/res_noewe/mmc/pda/240x320.xml	2010-07-06 21:46:01 UTC (rev 2664)
@@ -41,8 +41,8 @@
 	<button action="changeMapDir" fromLeft="5" fromTop="50"  location="bg_w.png"  icon="icon_folders.png"  visibleIf="menu+map" localeDefault="Change map directory" localeID="4237" alignText="C" textOffsetLeft="50"/>
 	<button action="changeStateOfRole" fromLeft="5" fromTop="100" changeStateof="show_map" location="bg_w.png"  icon="icon_map.png"  visibleIf="menu+map+!show_map" localeDefault="Show map" localeID="4239" alignText="C" textOffsetLeft="50"/>
 	<button action="changeStateOfRole" fromLeft="5" fromTop="100" changeStateof="show_map" location="bg_w.png"  icon="icon_nomap.png"  visibleIf="menu+map+show_map" localeDefault="Hide map" localeID="4241" alignText="C" textOffsetLeft="50"/>
-	<button action="changeStateOfRole" fromLeft="5" fromTop="150" changeStateof="fill_white" location="bg_w.png"  icon="icon_map_no_fill.png"  visibleIf="menu+map+!fill_white" localeDefault="Show white areas" localeID="4267" alignText="C" textOffsetLeft="50"/>
-	<button action="changeStateOfRole" fromLeft="5" fromTop="150" changeStateof="fill_white" location="bg_w.png"  icon="icon_map_fill.png"  visibleIf="menu+map+fill_white" localeDefault="Fill white areas" localeID="4266" alignText="C" textOffsetLeft="50"/>
+	<button action="changeStateOfRole" fromLeft="5" fromTop="150" changeStateof="fill_white" location="bg_w.png"  icon="icon_map_no_fill.png"  visibleIf="menu+map+fill_white" localeDefault="Show white areas" localeID="4267" alignText="C" textOffsetLeft="50"/>
+	<button action="changeStateOfRole" fromLeft="5" fromTop="150" changeStateof="fill_white" location="bg_w.png"  icon="icon_map_fill.png"  visibleIf="menu+map+!fill_white" localeDefault="Fill white areas" localeID="4266" alignText="C" textOffsetLeft="50"/>
 	<button action="changeStateOfRole" fromLeft="5" fromTop="200" changeStateof="show_caches" location="bg_w.png"  icon="icon_map_cache.png"  visibleIf="menu+map+!show_caches" localeDefault="Alle Cache anzeigen" localeID="4268" alignText="C" textOffsetLeft="50"/>
 	<button action="changeStateOfRole" fromLeft="5" fromTop="200" changeStateof="show_caches" location="bg_w.png"  icon="icon_map_no_cache.png"  visibleIf="menu+map+show_caches" localeDefault="Keine Cache anzeigen" localeID="4269" alignText="C" textOffsetLeft="50"/>
 

Modified: trunk/res_noewe/mmc/pda/movingMapControls.xml
===================================================================
--- trunk/res_noewe/mmc/pda/movingMapControls.xml	2010-07-06 18:18:12 UTC (rev 2663)
+++ trunk/res_noewe/mmc/pda/movingMapControls.xml	2010-07-06 21:46:01 UTC (rev 2664)
@@ -41,8 +41,8 @@
 	<button action="changeMapDir" fromLeft="5" fromTop="50"  location="bg_w.png"  icon="icon_folders.png"  visibleIf="menu+map" localeDefault="Change map directory" localeID="4237" alignText="C" textOffsetLeft="50"/>
 	<button action="changeStateOfRole" fromLeft="5" fromTop="100" changeStateof="show_map" location="bg_w.png"  icon="icon_map.png"  visibleIf="menu+map+!show_map" localeDefault="Show map" localeID="4239" alignText="C" textOffsetLeft="50"/>
 	<button action="changeStateOfRole" fromLeft="5" fromTop="100" changeStateof="show_map" location="bg_w.png"  icon="icon_nomap.png"  visibleIf="menu+map+show_map" localeDefault="Hide map" localeID="4241" alignText="C" textOffsetLeft="50"/>
-	<button action="changeStateOfRole" fromLeft="5" fromTop="150" changeStateof="fill_white" location="bg_w.png"  icon="icon_map_no_fill.png"  visibleIf="menu+map+!fill_white" localeDefault="Show white areas" localeID="4267" alignText="C" textOffsetLeft="50"/>
-	<button action="changeStateOfRole" fromLeft="5" fromTop="150" changeStateof="fill_white" location="bg_w.png"  icon="icon_map_fill.png"  visibleIf="menu+map+fill_white" localeDefault="Fill white areas" localeID="4266" alignText="C" textOffsetLeft="50"/>
+	<button action="changeStateOfRole" fromLeft="5" fromTop="150" changeStateof="fill_white" location="bg_w.png"  icon="icon_map_no_fill.png"  visibleIf="menu+map+fill_white" localeDefault="Show white areas" localeID="4267" alignText="C" textOffsetLeft="50"/>
+	<button action="changeStateOfRole" fromLeft="5" fromTop="150" changeStateof="fill_white" location="bg_w.png"  icon="icon_map_fill.png"  visibleIf="menu+map+!fill_white" localeDefault="Fill white areas" localeID="4266" alignText="C" textOffsetLeft="50"/>
 	<button action="changeStateOfRole" fromLeft="5" fromTop="200" changeStateof="show_caches" location="bg_w.png"  icon="icon_map_cache.png"  visibleIf="menu+map+!show_caches" localeDefault="Alle Cache anzeigen" localeID="4268" alignText="C" textOffsetLeft="50"/>
 	<button action="changeStateOfRole" fromLeft="5" fromTop="200" changeStateof="show_caches" location="bg_w.png"  icon="icon_map_no_cache.png"  visibleIf="menu+map+show_caches" localeDefault="Keine Cache anzeigen" localeID="4269" alignText="C" textOffsetLeft="50"/>
 

Modified: trunk/res_noewe/mmc/pda_vga/480x640.xml
===================================================================
--- trunk/res_noewe/mmc/pda_vga/480x640.xml	2010-07-06 18:18:12 UTC (rev 2663)
+++ trunk/res_noewe/mmc/pda_vga/480x640.xml	2010-07-06 21:46:01 UTC (rev 2664)
@@ -41,8 +41,8 @@
 	<button action="changeMapDir" fromLeft="3" fromTop="95"  location="360x90.png"  icon="icon_folders.png"  visibleIf="menu+map" localeDefault="Change map directory" localeID="4237" alignText="C" textOffsetLeft="75"/>
 	<button action="changeStateOfRole" fromLeft="3" fromTop="190" changeStateof="show_map" location="360x90.png"  icon="icon_map.png"  visibleIf="menu+map+!show_map" localeDefault="Show map" localeID="4239" alignText="C" textOffsetLeft="75"/>
 	<button action="changeStateOfRole" fromLeft="3" fromTop="190" changeStateof="show_map" location="360x90.png"  icon="icon_nomap.png"  visibleIf="menu+map+show_map" localeDefault="Hide map" localeID="4241" alignText="C" textOffsetLeft="75"/>
-	<button action="changeStateOfRole" fromLeft="3" fromTop="285" changeStateof="fill_white" location="360x90.png"  icon="icon_map_no_fill.png"  visibleIf="menu+map+!fill_white" localeDefault="Show white areas" localeID="4267" alignText="C" textOffsetLeft="75"/>
-	<button action="changeStateOfRole" fromLeft="3" fromTop="285" changeStateof="fill_white" location="360x90.png"  icon="icon_map_fill.png"  visibleIf="menu+map+fill_white" localeDefault="Fill white areas" localeID="4266" alignText="C" textOffsetLeft="75"/>
+	<button action="changeStateOfRole" fromLeft="3" fromTop="285" changeStateof="fill_white" location="360x90.png"  icon="icon_map_no_fill.png"  visibleIf="menu+map+fill_white" localeDefault="Show white areas" localeID="4267" alignText="C" textOffsetLeft="75"/>
+	<button action="changeStateOfRole" fromLeft="3" fromTop="285" changeStateof="fill_white" location="360x90.png"  icon="icon_map_fill.png"  visibleIf="menu+map+!fill_white" localeDefault="Fill white areas" localeID="4266" alignText="C" textOffsetLeft="75"/>
 	<button action="changeStateOfRole" fromLeft="3" fromTop="380" changeStateof="show_caches" location="360x90.png"  icon="icon_map_cache.png"  visibleIf="menu+map+!show_caches" localeDefault="Alle Cache anzeigen" localeID="4268" alignText="C" textOffsetLeft="75"/>
 	<button action="changeStateOfRole" fromLeft="3" fromTop="380" changeStateof="show_caches" location="360x90.png"  icon="icon_map_no_cache.png"  visibleIf="menu+map+show_caches" localeDefault="Keine Cache anzeigen" localeID="4269" alignText="C" textOffsetLeft="75"/>
 

Modified: trunk/res_noewe/mmc/pda_vga/480x800.xml
===================================================================
--- trunk/res_noewe/mmc/pda_vga/480x800.xml	2010-07-06 18:18:12 UTC (rev 2663)
+++ trunk/res_noewe/mmc/pda_vga/480x800.xml	2010-07-06 21:46:01 UTC (rev 2664)
@@ -41,8 +41,8 @@
 	<button action="changeMapDir" fromLeft="3" fromTop="95"  location="360x90.png"  icon="icon_folders.png"  visibleIf="menu+map" localeDefault="Change map directory" localeID="4237" alignText="C" textOffsetLeft="75"/>
 	<button action="changeStateOfRole" fromLeft="3" fromTop="190" changeStateof="show_map" location="360x90.png"  icon="icon_map.png"  visibleIf="menu+map+!show_map" localeDefault="Show map" localeID="4239" alignText="C" textOffsetLeft="75"/>
 	<button action="changeStateOfRole" fromLeft="3" fromTop="190" changeStateof="show_map" location="360x90.png"  icon="icon_nomap.png"  visibleIf="menu+map+show_map" localeDefault="Hide map" localeID="4241" alignText="C" textOffsetLeft="75"/>
-	<button action="changeStateOfRole" fromLeft="3" fromTop="285" changeStateof="fill_white" location="360x90.png"  icon="icon_map_no_fill.png"  visibleIf="menu+map+!fill_white" localeDefault="Show white areas" localeID="4267" alignText="C" textOffsetLeft="75"/>
-	<button action="changeStateOfRole" fromLeft="3" fromTop="285" changeStateof="fill_white" location="360x90.png"  icon="icon_map_fill.png"  visibleIf="menu+map+fill_white" localeDefault="Fill white areas" localeID="4266" alignText="C" textOffsetLeft="75"/>
+	<button action="changeStateOfRole" fromLeft="3" fromTop="285" changeStateof="fill_white" location="360x90.png"  icon="icon_map_no_fill.png"  visibleIf="menu+map+fill_white" localeDefault="Show white areas" localeID="4267" alignText="C" textOffsetLeft="75"/>
+	<button action="changeStateOfRole" fromLeft="3" fromTop="285" changeStateof="fill_white" location="360x90.png"  icon="icon_map_fill.png"  visibleIf="menu+map+!fill_white" localeDefault="Fill white areas" localeID="4266" alignText="C" textOffsetLeft="75"/>
 	<button action="changeStateOfRole" fromLeft="3" fromTop="380" changeStateof="show_caches" location="360x90.png"  icon="icon_map_cache.png"  visibleIf="menu+map+!show_caches" localeDefault="Alle Cache anzeigen" localeID="4268" alignText="C" textOffsetLeft="75"/>
 	<button action="changeStateOfRole" fromLeft="3" fromTop="380" changeStateof="show_caches" location="360x90.png"  icon="icon_map_no_cache.png"  visibleIf="menu+map+show_caches" localeDefault="Keine Cache anzeigen" localeID="4269" alignText="C" textOffsetLeft="75"/>
 

Modified: trunk/res_noewe/mmc/pda_vga/movingMapControls.xml
===================================================================
--- trunk/res_noewe/mmc/pda_vga/movingMapControls.xml	2010-07-06 18:18:12 UTC (rev 2663)
+++ trunk/res_noewe/mmc/pda_vga/movingMapControls.xml	2010-07-06 21:46:01 UTC (rev 2664)
@@ -41,8 +41,8 @@
 	<button action="changeMapDir" fromLeft="3" fromTop="95"  location="360x90.png"  icon="icon_folders.png"  visibleIf="menu+map" localeDefault="Change map directory" localeID="4237" alignText="C" textOffsetLeft="75"/>
 	<button action="changeStateOfRole" fromLeft="3" fromTop="190" changeStateof="show_map" location="360x90.png"  icon="icon_map.png"  visibleIf="menu+map+!show_map" localeDefault="Show map" localeID="4239" alignText="C" textOffsetLeft="75"/>
 	<button action="changeStateOfRole" fromLeft="3" fromTop="190" changeStateof="show_map" location="360x90.png"  icon="icon_nomap.png"  visibleIf="menu+map+show_map" localeDefault="Hide map" localeID="4241" alignText="C" textOffsetLeft="75"/>
-	<button action="changeStateOfRole" fromLeft="3" fromTop="285" changeStateof="fill_white" location="360x90.png"  icon="icon_map_no_fill.png"  visibleIf="menu+map+!fill_white" localeDefault="Show white areas" localeID="4267" alignText="C" textOffsetLeft="75"/>
-	<button action="changeStateOfRole" fromLeft="3" fromTop="285" changeStateof="fill_white" location="360x90.png"  icon="icon_map_fill.png"  visibleIf="menu+map+fill_white" localeDefault="Fill white areas" localeID="4266" alignText="C" textOffsetLeft="75"/>
+	<button action="changeStateOfRole" fromLeft="3" fromTop="285" changeStateof="fill_white" location="360x90.png"  icon="icon_map_no_fill.png"  visibleIf="menu+map+fill_white" localeDefault="Show white areas" localeID="4267" alignText="C" textOffsetLeft="75"/>
+	<button action="changeStateOfRole" fromLeft="3" fromTop="285" changeStateof="fill_white" location="360x90.png"  icon="icon_map_fill.png"  visibleIf="menu+map+!fill_white" localeDefault="Fill white areas" localeID="4266" alignText="C" textOffsetLeft="75"/>
 	<button action="changeStateOfRole" fromLeft="3" fromTop="380" changeStateof="show_caches" location="360x90.png"  icon="icon_map_cache.png"  visibleIf="menu+map+!show_caches" localeDefault="Alle Cache anzeigen" localeID="4268" alignText="C" textOffsetLeft="75"/>
 	<button action="changeStateOfRole" fromLeft="3" fromTop="380" changeStateof="show_caches" location="360x90.png"  icon="icon_map_no_cache.png"  visibleIf="menu+map+show_caches" localeDefault="Keine Cache anzeigen" localeID="4269" alignText="C" textOffsetLeft="75"/>
 

Modified: trunk/src/CacheWolf/navi/MovingMap.java
===================================================================
--- trunk/src/CacheWolf/navi/MovingMap.java	2010-07-06 18:18:12 UTC (rev 2663)
+++ trunk/src/CacheWolf/navi/MovingMap.java	2010-07-06 21:46:01 UTC (rev 2664)
@@ -1969,14 +1969,14 @@
 
 		
 		if (FILL_MAP.equals(actionCommand)) {
-			setFillWhiteArea(false);
+			setFillWhiteArea(true);
 			updatePosition (posCircle.where);
 			mmp.repaint();
 			return true;
 		}
 		
 		if (NO_FILL_MAP.equals(actionCommand)) {
-			setFillWhiteArea(true);
+			setFillWhiteArea(false);
 			updatePosition (posCircle.where);
 			mmp.repaint();
 			return true;



From araber95 at mail.berlios.de  Wed Jul  7 12:31:19 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed,  7 Jul 2010 12:31:19 PM +0200
Subject: [Cachewolf-svn] r2665 - trunk/res_noewe
Message-ID: <20100707103119.3C0004809F8@sheep.berlios.de>

Author: araber95
Date: 2010-07-07 12:31:18 +0200 (Wed, 07 Jul 2010)
New Revision: 2665

Modified:
   trunk/res_noewe/spider.def
Log:
(significant) speed up GC import (aka spider)

Modified: trunk/res_noewe/spider.def
===================================================================
--- trunk/res_noewe/spider.def	2010-07-06 21:46:01 UTC (rev 2664)
+++ trunk/res_noewe/spider.def	2010-07-07 10:31:18 UTC (rev 2665)
@@ -107,7 +107,8 @@
 shortDescRex       = <span\ id="ctl00_ContentBody_ShortDescription">((?s).*?)</span>
 longDescRex        = tentBody_LongDescription">((?s).*?)<td\ valign="top"\ width="10%">\\s*&nbsp;\\s*</td
 cacheNameRex       = <span\ id="ctl00_ContentBody_CacheName">((?s).*?)</span>
-cacheOwnerRex      = <strong>\\s*A.*\\s*cache\\s*</strong>\\s*by\ <a\ href=(?:(?s).*?)>((?s).*?)</a>\\s*</td>
+#cacheOwnerRex      = <strong>\\s*A.*\\s*cache\\s*</strong>\\s*by\ <a\ href=(?:(?s).*?)>((?s).*?)</a>\\s*</td>
+cacheOwnerRex      = www.geocaching.com/profile/(?:(?s).*?)>((?s).*?)</a>
 dateHiddenRex      = <td>\\s*<strong>\\s*(?:Hidden|Event\ Date)\\s*:</strong>\\s*((?s).*?)\\s*(?:</td>|<a href=)
 hintsRex           = <div id="div_hint" class="HalfLeft">\\s*((?s).*?)\\s*</div>
 sizeRex            = alt="Size:\ ((?s).*?)"\ />&nbsp<small>



From mik77 at mail.berlios.de  Thu Jul  8 10:12:34 2010
From: mik77 at mail.berlios.de (mik77 at mail.berlios.de)
Date: Thu,  8 Jul 2010 10:12:34 PM +0200
Subject: [Cachewolf-svn] r2666 - trunk/src/CacheWolf/imp
Message-ID: <20100708201234.1E87B480A0D@sheep.berlios.de>

Author: mik77
Date: 2010-07-08 22:12:33 +0200 (Thu, 08 Jul 2010)
New Revision: 2666

Modified:
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
Switch to English after login.

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-07-07 10:31:18 UTC (rev 2665)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-07-08 20:12:33 UTC (rev 2666)
@@ -719,14 +719,7 @@
 				pref.log("[login]:check rexViewstate in SpiderGC.java --> not found after login\n"+loginPage);
 			}
 			viewstate = rexViewstate.stringMatched(1);
-
-			/*
-			rexViewstate1.search(start);
-			if (!rexViewstate1.didMatch()) {
-				pref.log("[login]:Viewstate1 not found");
-			}
-			*/
-
+			
 			rexCookieID.search(loginPage);
 			if (!rexCookieID.didMatch()) {
 				pref.log("[login]:check rexCookieID in SpiderGC.java --> CookieID not found. Using old one.\n"+loginPage);
@@ -740,6 +733,40 @@
 			} else
 				cookieSession = rexCookieSession.stringMatched(1);
 			//Vm.debug("cookieSession = " + cookieSession);
+
+			/*
+			String viewstate1;
+			rexViewstate1.search(loginPage);
+			if(rexViewstate1.didMatch()){
+				viewstate1 = rexViewstate1.stringMatched(1);
+			} else {
+				viewstate1 = "";
+				pref.log("[login]:check rexViewstate1 in SpiderGC.java --> not found after login\n"+loginPage);
+			}
+			*/
+						
+			/*
+			rexEventvalidation.search(htmlPage);
+			if(rexEventvalidation.didMatch()){
+				eventvalidation = rexEventvalidation.stringMatched(1);
+			} else {
+				eventvalidation = "";
+			}
+			*/
+
+			String strEnglishPage = "ctl00$uxLocaleList$uxLocaleList$ctl01$uxLocaleItem";
+			String postStr = URL.encodeURL("__EVENTTARGET",false) +"="+ URL.encodeURL(strEnglishPage,false)
+		    + "&" + URL.encodeURL("__EVENTARGUMENT",false) +"="+ URL.encodeURL("",false)
+//		    + "&" + URL.encodeURL("__VIEWSTATEFIELDCOUNT",false) +"=2"
+		    + "&" + URL.encodeURL("__VIEWSTATE",false) +"="+ URL.encodeURL(viewstate,false);
+//		    + "&" + URL.encodeURL("__VIEWSTATE1",false) +"="+ URL.encodeURL(viewstate1,false);
+//		    + "&" + URL.encodeURL("__EVENTVALIDATION",false) +"="+ URL.encodeURL(eventvalidation,false);
+			try{
+				pref.log("Switching to English:" + postStr);
+				loginPage = fetch_post(loginPageUrl, postStr, nextPage);
+			}catch(Exception ex){
+				pref.log("Error switching to English");
+			}
 		}
 		boolean loginAborted=localInfB.isClosed;
 		localInfB.close(0);



From araber95 at mail.berlios.de  Fri Jul  9 01:21:30 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Fri,  9 Jul 2010 01:21:30 AM +0200
Subject: [Cachewolf-svn] r2667 - in trunk/src/CacheWolf: . imp
Message-ID: <20100708232130.5B2F1480ABB@sheep.berlios.de>

Author: araber95
Date: 2010-07-09 01:21:30 +0200 (Fri, 09 Jul 2010)
New Revision: 2667

Modified:
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/CacheTerrDiff.java
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
Main WP without Difficulty or Terrain (?older caches) see GCF0 (http://www.geoclub.de/viewtopic.php?f=40&t=46531)

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-07-08 20:12:33 UTC (rev 2666)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-07-08 23:21:30 UTC (rev 2667)
@@ -1240,12 +1240,15 @@
 		setType(byteFromLong(value, 3));
 		setCacheSize(byteFromLong(value, 4));
 		setNoFindLogs((byteFromLong(value, 5)));
-		if ( getHard() == CacheTerrDiff.CW_DT_ERROR 
-				|| getTerrain() == CacheTerrDiff.CW_DT_ERROR 
-				|| getCacheSize() == CacheSize.CW_SIZE_ERROR 
+		
+		if (
+				   getCacheSize() == CacheSize.CW_SIZE_ERROR 
 				|| getType() == CacheType.CW_TYPE_ERROR ) {
 			setIncomplete(true);
 		}
+		// no longer
+		 // getHard() == CacheTerrDiff.CW_DT_ERROR 
+		//	|| getTerrain() == CacheTerrDiff.CW_DT_ERROR
 	}
 	
 	/**
@@ -1642,8 +1645,8 @@
 		boolean ret;
 		if (isCacheWpt()) {
 			if (getWayPoint().length() < 3
-					|| getHard() <= CacheTerrDiff.CW_DT_UNSET
-					|| getTerrain() <= CacheTerrDiff.CW_DT_UNSET
+					// || getHard() <= CacheTerrDiff.CW_DT_UNSET // possible for older caches see exmpl gcf0
+					// || getTerrain() <= CacheTerrDiff.CW_DT_UNSET
 					|| getCacheSize() == CacheSize.CW_SIZE_ERROR
 					|| getCacheOwner().length() == 0
 					|| getDateHidden().length() == 0 

Modified: trunk/src/CacheWolf/CacheTerrDiff.java
===================================================================
--- trunk/src/CacheWolf/CacheTerrDiff.java	2010-07-08 20:12:33 UTC (rev 2666)
+++ trunk/src/CacheWolf/CacheTerrDiff.java	2010-07-08 23:21:30 UTC (rev 2667)
@@ -60,8 +60,8 @@
 		if (v1TerrDiff.equals("3.5")) { return CW_DT_35; }
 		if (v1TerrDiff.equals("4.5")) { return CW_DT_45; }
 		
-		throw new IllegalArgumentException("error mapping terrain or difficulty");
-	}
+		return CW_DT_ERROR; // simplyfied for "-1" for not set // no exception
+}
 	
 	/**
 	 * generate strings of terrain and difficulty for general use
@@ -80,6 +80,7 @@
 		case CW_DT_40: return "4.0";
 		case CW_DT_45: return "4.5";
 		case CW_DT_50: return "5.0";
+		case CW_DT_ERROR : return "-.-";
 		default: throw new IllegalArgumentException("unmapped terrain or diffulty "+terrdiff);
 		}
 	}
@@ -101,6 +102,7 @@
 		case CW_DT_40: return "4";
 		case CW_DT_45: return "4.5";
 		case CW_DT_50: return "5";
+		case CW_DT_ERROR : return "-1";
 		default: throw new IllegalArgumentException("unmapped terrain or diffulty "+terrdiff);
 		}
 	}
@@ -123,6 +125,7 @@
 		case CW_DT_40: return true;
 		case CW_DT_45: return true;
 		case CW_DT_50: return true;
+		case CW_DT_ERROR: return true;
 		default: return false;
 		}
 	}

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-07-08 20:12:33 UTC (rev 2666)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-07-08 23:21:30 UTC (rev 2667)
@@ -1516,7 +1516,7 @@
 		if(inRex.didMatch()) return inRex.stringMatched(1);
 		else {
 			pref.log("check difficultyRex in spider.def\n"+doc);
-			return "";
+			return "-1";
 		}
 	}
 
@@ -1531,7 +1531,7 @@
 		if(inRex.didMatch()) return inRex.stringMatched(1);
 		else {
 			pref.log("check terrainRex in spider.def\n"+doc);
-			return "";
+			return "-1";
 		}
 	}
 



From araber95 at mail.berlios.de  Fri Jul  9 03:01:28 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Fri,  9 Jul 2010 03:01:28 PM +0200
Subject: [Cachewolf-svn] r2668 - trunk/src/CacheWolf/navi
Message-ID: <20100709130128.3CC6848026C@sheep.berlios.de>

Author: araber95
Date: 2010-07-09 15:01:27 +0200 (Fri, 09 Jul 2010)
New Revision: 2668

Modified:
   trunk/src/CacheWolf/navi/MovingMap.java
Log:
klicking to the right state, no longer do an additional klick. (http://www.geoclub.de/viewtopic.php?f=40&t=46469)

Modified: trunk/src/CacheWolf/navi/MovingMap.java
===================================================================
--- trunk/src/CacheWolf/navi/MovingMap.java	2010-07-08 23:21:30 UTC (rev 2667)
+++ trunk/src/CacheWolf/navi/MovingMap.java	2010-07-09 13:01:27 UTC (rev 2668)
@@ -2162,7 +2162,8 @@
 			else {
 				saveMapLoc = new Point (ev.x, ev.y);
 				if (ev.modifiers == PenEvent.RIGHT_BUTTON) {
-					// context penHeld is fired on PDA but not on PC (Java)
+					// context penHeld is fired directly on PDA (cause WantHoldDown Control Modifier)
+					// but not on PC (Java) , therefor it is here
 					penHeld(new Point (ev.x, ev.y));
 				}
 			}
@@ -2324,23 +2325,26 @@
 	}
 
 	public void onEvent(Event ev){
-		if (kontextMenu != null && ev instanceof PenEvent && ev.type == PenEvent.PEN_DOWN && ev.target == this)
-			{kontextMenu.close(); kontextMenu = null; return;}
-
+		// nothing selected in kontext
+		if (kontextMenu != null 
+				&& ev instanceof PenEvent 
+				&& ev.type == PenEvent.PEN_DOWN 
+				&& ev.target == this) {
+			kontextMenu.close(); 
+			kontextMenu = null; 
+			return;
+		}
+		// something selected
 		if (ev instanceof MenuEvent) {
 			if (ev.target == kontextMenu) {
 				if ((((MenuEvent)ev).type==MenuEvent.SELECTED)) {
 					MenuItem action = (MenuItem) kontextMenu.getSelectedItem();
 					if (action == gotoMenuItem) {
-						kontextMenu.close();
+						closeKontextMenu();
 						mm.myNavigation.setDestination(mm.ScreenXY2LatLon(saveMapLoc.x, saveMapLoc.y));
 					}
 					if (action == openCacheDescMenuItem || action == openCacheDetailMenuItem) {
-						kontextMenu.close();
-						WindowEvent close = new WindowEvent();
-						close.target = mm;
-						close.type = WindowEvent.CLOSE;
-						mm.postEvent(close);
+						leaveMovingMap();
 						MainTab mainT = Global.mainTab;
 						if (action == openCacheDescMenuItem) 
 							mainT.openPanel(clickedCache,2);
@@ -2348,24 +2352,21 @@
 							mainT.openPanel(clickedCache,1);
 					}
 					if (action == gotoCacheMenuItem) {
-						kontextMenu.close();
+						closeKontextMenu();
 						mm.myNavigation.setDestination(clickedCache);
 					}
 					if (action == newWayPointMenuItem) {
-						kontextMenu.close();
-						WindowEvent close = new WindowEvent();
-						close.target = mm;
-						close.type = WindowEvent.CLOSE;
-						mm.postEvent(close);
+						leaveMovingMap();
 						CacheHolder newWP = new CacheHolder();
 						newWP.pos = mm.ScreenXY2LatLon(saveMapLoc.x, saveMapLoc.y);
 						newWP.setLatLon(newWP.pos.toString());
 						Global.mainTab.newWaypoint(newWP);
 					}
 					if (action == addCachetoListMenuItem) {
-						kontextMenu.close();
+						closeKontextMenu();
 						Global.mainForm.cacheList.addCache(clickedCache.getWayPoint());
 					}
+					/*
 					for (int i=0; i<miLuminary.length; i++) {
 						if (action == miLuminary[i]) {
 							kontextMenu.close();
@@ -2374,14 +2375,32 @@
 							miLuminary[i].modifiers |= MenuItem.Checked;
 						} else miLuminary[i].modifiers &= ~MenuItem.Checked;
 					}
+					*/
 				}
 			} // if (ev.target == kontextMenu)
 		}
 		super.onEvent(ev);
 	}
+
+	private void closeKontextMenu() {
+		kontextMenu.close();
+		// for not to do an additional klick (before reacting on klicks)
+		PenEvent pev = new PenEvent();
+		pev.target=this;
+		pev.type=PenEvent.PEN_DOWN;
+		this.postEvent(pev);
+		pev.type=PenEvent.PEN_UP;
+		this.postEvent(pev);
+	}
+	private void leaveMovingMap() {
+		closeKontextMenu();
+		WindowEvent close = new WindowEvent();
+		close.target = this;
+		close.type = WindowEvent.CLOSE;
+		this.postEvent(close);		
+	}
 }
 
-
 /**
  *	Class to display maps to choose from
  */



From mik77 at mail.berlios.de  Fri Jul  9 08:02:20 2010
From: mik77 at mail.berlios.de (mik77 at mail.berlios.de)
Date: Fri,  9 Jul 2010 08:02:20 PM +0200
Subject: [Cachewolf-svn] r2669 - trunk/src/CacheWolf
Message-ID: <20100709180220.CC8E04805B1@sheep.berlios.de>

Author: mik77
Date: 2010-07-09 20:02:20 +0200 (Fri, 09 Jul 2010)
New Revision: 2669

Modified:
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/CacheTerrDiff.java
Log:
Set UNSET instead of ERROR if DT is not set.

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-07-09 13:01:27 UTC (rev 2668)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-07-09 18:02:20 UTC (rev 2669)
@@ -1241,14 +1241,12 @@
 		setCacheSize(byteFromLong(value, 4));
 		setNoFindLogs((byteFromLong(value, 5)));
 		
-		if (
-				   getCacheSize() == CacheSize.CW_SIZE_ERROR 
+		if ( getHard() == CacheTerrDiff.CW_DT_ERROR 
+				|| getTerrain() == CacheTerrDiff.CW_DT_ERROR 
+				|| getCacheSize() == CacheSize.CW_SIZE_ERROR 
 				|| getType() == CacheType.CW_TYPE_ERROR ) {
 			setIncomplete(true);
 		}
-		// no longer
-		 // getHard() == CacheTerrDiff.CW_DT_ERROR 
-		//	|| getTerrain() == CacheTerrDiff.CW_DT_ERROR
 	}
 	
 	/**
@@ -1645,8 +1643,8 @@
 		boolean ret;
 		if (isCacheWpt()) {
 			if (getWayPoint().length() < 3
-					// || getHard() <= CacheTerrDiff.CW_DT_UNSET // possible for older caches see exmpl gcf0
-					// || getTerrain() <= CacheTerrDiff.CW_DT_UNSET
+					|| getHard() < CacheTerrDiff.CW_DT_UNSET
+					|| getTerrain() < CacheTerrDiff.CW_DT_UNSET
 					|| getCacheSize() == CacheSize.CW_SIZE_ERROR
 					|| getCacheOwner().length() == 0
 					|| getDateHidden().length() == 0 

Modified: trunk/src/CacheWolf/CacheTerrDiff.java
===================================================================
--- trunk/src/CacheWolf/CacheTerrDiff.java	2010-07-09 13:01:27 UTC (rev 2668)
+++ trunk/src/CacheWolf/CacheTerrDiff.java	2010-07-09 18:02:20 UTC (rev 2669)
@@ -60,8 +60,10 @@
 		if (v1TerrDiff.equals("3.5")) { return CW_DT_35; }
 		if (v1TerrDiff.equals("4.5")) { return CW_DT_45; }
 		
-		return CW_DT_ERROR; // simplyfied for "-1" for not set // no exception
-}
+		if (v1TerrDiff.equals("-1")) { return CW_DT_UNSET; }
+		
+		throw new IllegalArgumentException("error mapping terrain or difficulty");
+	}
 	
 	/**
 	 * generate strings of terrain and difficulty for general use
@@ -80,7 +82,7 @@
 		case CW_DT_40: return "4.0";
 		case CW_DT_45: return "4.5";
 		case CW_DT_50: return "5.0";
-		case CW_DT_ERROR : return "-.-";
+		case CW_DT_UNSET: return "-.-";
 		default: throw new IllegalArgumentException("unmapped terrain or diffulty "+terrdiff);
 		}
 	}
@@ -102,7 +104,7 @@
 		case CW_DT_40: return "4";
 		case CW_DT_45: return "4.5";
 		case CW_DT_50: return "5";
-		case CW_DT_ERROR : return "-1";
+		case CW_DT_UNSET: return "-1";
 		default: throw new IllegalArgumentException("unmapped terrain or diffulty "+terrdiff);
 		}
 	}
@@ -125,7 +127,7 @@
 		case CW_DT_40: return true;
 		case CW_DT_45: return true;
 		case CW_DT_50: return true;
-		case CW_DT_ERROR: return true;
+		case CW_DT_UNSET: return true;
 		default: return false;
 		}
 	}



From araber95 at mail.berlios.de  Fri Jul  9 10:29:47 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Fri,  9 Jul 2010 10:29:47 PM +0200
Subject: [Cachewolf-svn] r2670 - in trunk: res_noewe/mmc res_noewe/mmc/pda
	src/CacheWolf/navi/touchControls
Message-ID: <20100709202947.53ACF4805B1@sheep.berlios.de>

Author: araber95
Date: 2010-07-09 22:29:47 +0200 (Fri, 09 Jul 2010)
New Revision: 2670

Modified:
   trunk/res_noewe/mmc/Beschreibung.html
   trunk/res_noewe/mmc/pda/icon_to_gps.png
   trunk/res_noewe/mmc/pda/icon_to_target.png
   trunk/res_noewe/mmc/pda/movingMapControls.xml
   trunk/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java
Log:
1. extended description of mmc config
2. mmc config for pda sizes other than 240x360 (my favorite on pda)

Modified: trunk/res_noewe/mmc/Beschreibung.html
===================================================================
--- trunk/res_noewe/mmc/Beschreibung.html	2010-07-09 18:02:20 UTC (rev 2669)
+++ trunk/res_noewe/mmc/Beschreibung.html	2010-07-09 20:29:47 UTC (rev 2670)
@@ -12,16 +12,16 @@
 <!--[if gte mso 9]><xml>
  <o:DocumentProperties>
   <o:LastAuthor>.</o:LastAuthor>
-  <o:Revision>4</o:Revision>
+  <o:Revision>6</o:Revision>
   <o:Created>2010-06-16T08:58:00Z</o:Created>
-  <o:LastSaved>2010-06-16T08:59:00Z</o:LastSaved>
+  <o:LastSaved>2010-07-09T20:07:00Z</o:LastSaved>
   <o:Pages>1</o:Pages>
-  <o:Words>166</o:Words>
-  <o:Characters>1050</o:Characters>
+  <o:Words>640</o:Words>
+  <o:Characters>4038</o:Characters>
   <o:Company>CF Computer</o:Company>
-  <o:Lines>8</o:Lines>
-  <o:Paragraphs>2</o:Paragraphs>
-  <o:CharactersWithSpaces>1214</o:CharactersWithSpaces>
+  <o:Lines>33</o:Lines>
+  <o:Paragraphs>9</o:Paragraphs>
+  <o:CharactersWithSpaces>4669</o:CharactersWithSpaces>
   <o:Version>10.6858</o:Version>
  </o:DocumentProperties>
 </xml><![endif]--><!--[if gte mso 9]><xml>
@@ -149,33 +149,343 @@
 
 <p class=MsoPlainText><span style='font-family:Verdana'><o:p>&nbsp;</o:p></span></p>
 
-<p class=MsoPlainText><span style='font-family:Verdana'>Folgende Anpassungen
-sind m?glich:<o:p></o:p></span></p>
+<p class=MsoPlainText><b style='mso-bidi-font-weight:normal'><span
+style='font-family:Verdana'>Beschreibung zur Konfiguration der
+Einstellungsdatei:<o:p></o:p></span></b></p>
 
-<p class=MsoPlainText><span style='font-family:Verdana'>1. Bildschirmposition
-der Schaltfl?chen<o:p></o:p></span></p>
+<p class=MsoPlainText><span style='font-family:Verdana'><o:p>&nbsp;</o:p></span></p>
 
-<p class=MsoPlainText><span style='font-family:Verdana'>2. Sichtbarkeit der
+<p class=MsoPlainText><b style='mso-bidi-font-weight:normal'><span
+style='font-family:Verdana'>&lt;<span class=SpellE>mmc</span>&gt;</span></b><span
+style='font-family:Verdana'> = <span class=SpellE>Moving</span> <span
+class=SpellE>Map</span> <span class=SpellE>Control</span> : Konfiguration der
+Bedienoberfl?che der <span class=SpellE>MovingMap</span> Kartenanzeige<span
+style='mso-spacerun:yes'>? </span>mit Augenmerk auf Fingerbedienbarkeit<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+1'>???????? </span><b style='mso-bidi-font-weight:normal'>&lt;<span
+class=SpellE>settings</span>&gt; </b>allgemeine Einstellungen f?r die
 Schaltfl?chen<o:p></o:p></span></p>
 
-<p class=MsoPlainText><span style='font-family:Verdana'>3. Dateien der Symbole
-(<span class=SpellE>png-Dateien</span>) = <span class=SpellE>Gr?sse</span> der
-Symbole<o:p></o:p></span></p>
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>fontsize</u></span> =
+Attribut : <span class=SpellE>Fontgr?sse</span> der Texte auf den Schaltfl?chen<o:p></o:p></span></p>
 
-<p class=MsoPlainText><span style='font-family:Verdana'>4. <span class=SpellE>Schriftgr?sse</span>
-der Texte<o:p></o:p></span></p>
+<p class=MsoPlainText><span style='font-family:Verdana'><o:p>&nbsp;</o:p></span></p>
 
-<p class=MsoPlainText><span style='font-family:Verdana'>5. Vorhandensein der
-Funktionen<o:p></o:p></span></p>
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+1'>???????? </span><b style='mso-bidi-font-weight:normal'>&lt;<span
+class=SpellE>role</span>&gt; </b>Rolle So etwas wie ein Men?<o:p></o:p></span></p>
 
-<p class=MsoPlainText><span style='font-family:Verdana'>6. ?<o:p></o:p></span></p>
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>name</u></span> = Attribut :
+Der Name einer frei <span class=SpellE>vergebbaren</span> Rolle ,<o:p></o:p></span></p>
 
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span>vordefinierte Rollennamen <span class=GramE>sind<span
+style='mso-spacerun:yes'>? </span>:</span><o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+3'>??????????????????????????? </span><i style='mso-bidi-font-style:normal'>&quot;<span
+class=SpellE>show_map</span>&quot;,<o:p></o:p></i></span></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span
+style='font-family:Verdana'><span style='mso-tab-count:3'>??????????????????????????? </span></span></i><i
+style='mso-bidi-font-style:normal'><span lang=EN-GB style='font-family:Verdana;
+mso-ansi-language:EN-GB'>&quot;<span class=SpellE>show_caches</span>&quot;,<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span lang=EN-GB
+style='font-family:Verdana;mso-ansi-language:EN-GB'><span style='mso-tab-count:
+3'>??????????????????????????? </span>&quot;<span class=SpellE>fill_white</span>&quot;,<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span lang=EN-GB
+style='font-family:Verdana;mso-ansi-language:EN-GB'><span style='mso-tab-count:
+3'>??????????????????????????? </span>&quot;<span class=SpellE>zoom_manually</span>&quot;<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><span lang=EN-GB style='font-family:Verdana;mso-ansi-language:
+EN-GB'><span style='mso-tab-count:2'>?????????????????? </span></span><span
+class=SpellE><u><span style='font-family:Verdana'>active</span></u></span><span
+style='font-family:Verdana'> = <span class=GramE>Attribut :</span> &quot;<span
+class=SpellE>true</span>&quot; oder &quot;<span class=SpellE>false</span>&quot;
+: Der Anfangsstatus der Rolle<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>disable</u></span> = <span
+class=GramE>Attribut :</span> eine Liste der Rollen deren Status auf inaktiv
+gesetzt wird, wenn diese Rolle inaktiv wird. Trennzeichen ist |<o:p></o:p></span></p>
+
 <p class=MsoPlainText><span style='font-family:Verdana'><o:p>&nbsp;</o:p></span></p>
 
-<p class=MsoPlainText><span style='font-family:Verdana'>Eigentlich ergibt es
-sich aus den mitgelieferten Dateien. Schau mit einem Editor rein und probier
-es.<o:p></o:p></span></p>
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+1'>???????? </span><b style='mso-bidi-font-weight:normal'>&lt;<span
+class=SpellE>button</span>&gt;</b> Eine Schaltfl?che wird mit oder ohne Beschriftung
+an einer definierbaren Bildschirmposition angelegt und bewirkt bei Bet?tigung
+eine Aktion.<o:p></o:p></span></p>
 
+<p class=MsoPlainText><span style='font-family:Verdana'><o:p>&nbsp;</o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span>a) Position der Schaltfl?che auf dem Bildschirm:<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>fromLeft</u></span> =
+Attribut : Anzahl Pixel Abstand der Schaltfl?che vom linken Rand des
+Bildschirms<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span>oder<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+1'>???????? </span><span style='mso-tab-count:1'>???????? </span><span
+class=SpellE><u>fromRight</u></span> = Attribut : Anzahl Pixel Abstand der
+Schaltfl?che vom rechten Rand des Bildschirms<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span>und<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>fromTop</u></span> = <span
+class=GramE>Attribut :</span> Anzahl Pixel Abstand der Schaltfl?che vom oberen
+Rand des Bildschirms<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span>oder<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>fromBottom</u></span> = <span
+class=GramE>Attribut :</span> Anzahl Pixel Abstand der Schaltfl?che vom unteren
+Rand des Bildschirms<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><o:p>&nbsp;</o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span>b) Durchzuf?hrende Aktion, wenn Schaltfl?che
+bet?tigt wird<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>action</u></span> = <span
+class=GramE>Attribut :</span> Es gibt folgende Aktionen :<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+3'>??????????????????????????? </span></span><i style='mso-bidi-font-style:
+normal'><span lang=EN-GB style='font-family:Verdana;mso-ansi-language:EN-GB'>&quot;<span
+class=SpellE><span class=GramE>changeStateOfRole</span></span>&quot;</span></i><span
+lang=EN-GB style='font-family:Verdana;mso-ansi-language:EN-GB'> : <span
+class=SpellE>siehe</span> <span class=SpellE>changeStateof</span><o:p></o:p></span></p>
+
+<p class=MsoPlainText><span lang=EN-GB style='font-family:Verdana;mso-ansi-language:
+EN-GB'><span style='mso-tab-count:3'>??????????????????????????? </span><i
+style='mso-bidi-font-style:normal'>&quot;<span class=GramE>close</span>&quot;<o:p></o:p></i></span></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span lang=EN-GB
+style='font-family:Verdana;mso-ansi-language:EN-GB'><span style='mso-tab-count:
+3'>??????????????????????????? </span>&quot;<span class=SpellE><span
+class=GramE>moveToDest</span></span>&quot;<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span lang=EN-GB
+style='font-family:Verdana;mso-ansi-language:EN-GB'><span style='mso-tab-count:
+3'>??????????????????????????? </span>&quot;<span class=SpellE><span
+class=GramE>moveToGps</span></span>&quot;<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span lang=EN-GB
+style='font-family:Verdana;mso-ansi-language:EN-GB'><span style='mso-tab-count:
+3'>??????????????????????????? </span>&quot;<span class=SpellE><span
+class=GramE>moreDetails</span></span>&quot;<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span lang=EN-GB
+style='font-family:Verdana;mso-ansi-language:EN-GB'><span style='mso-tab-count:
+3'>??????????????????????????? </span>&quot;<span class=SpellE><span
+class=GramE>moreOverview</span></span>&quot;<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span lang=EN-GB
+style='font-family:Verdana;mso-ansi-language:EN-GB'><span style='mso-tab-count:
+3'>??????????????????????????? </span>&quot;<span class=SpellE><span
+class=GramE>selectMap</span></span>&quot;<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span lang=EN-GB
+style='font-family:Verdana;mso-ansi-language:EN-GB'><span
+style='mso-spacerun:yes'>??????????????????????? </span><span style='mso-tab-count:
+1'>??? </span>&quot;<span class=SpellE><span class=GramE>changeMapDir</span></span>&quot;<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span lang=EN-GB
+style='font-family:Verdana;mso-ansi-language:EN-GB'><span
+style='mso-spacerun:yes'>??????????????????????? </span><span style='mso-tab-count:
+1'>??? </span>&quot;<span class=SpellE><span class=GramE>zoomin</span></span>&quot;<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span lang=EN-GB
+style='font-family:Verdana;mso-ansi-language:EN-GB'><span style='mso-tab-count:
+3'>??????????????????????????? </span>&quot;<span class=SpellE><span
+class=GramE>zoomout</span></span>&quot;<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span lang=EN-GB
+style='font-family:Verdana;mso-ansi-language:EN-GB'><span style='mso-tab-count:
+3'>??????????????????????????? </span>&quot;1to1&quot;<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span lang=EN-GB
+style='font-family:Verdana;mso-ansi-language:EN-GB'><span style='mso-tab-count:
+3'>??????????????????????????? </span>&quot;<span class=SpellE><span
+class=GramE>moveToCenter</span></span>&quot;<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span lang=EN-GB
+style='font-family:Verdana;mso-ansi-language:EN-GB'><span style='mso-tab-count:
+3'>??????????????????????????? </span>&quot;<span class=SpellE><span
+class=GramE>highestResGpsDest</span></span>&quot;<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span lang=EN-GB
+style='font-family:Verdana;mso-ansi-language:EN-GB'><span style='mso-tab-count:
+3'>??????????????????????????? </span>&quot;<span class=SpellE><span
+class=GramE>highestResolution</span></span>&quot;<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span lang=EN-GB
+style='font-family:Verdana;mso-ansi-language:EN-GB'><span style='mso-tab-count:
+3'>??????????????????????????? </span></span></i><i style='mso-bidi-font-style:
+normal'><span style='font-family:Verdana'>&quot;<span class=SpellE>keepManResolution</span>&quot;<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span
+style='font-family:Verdana'><span style='mso-tab-count:3'>??????????????????????????? </span>&quot;<span
+class=SpellE>allCachesRes</span>&quot;<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><i style='mso-bidi-font-style:normal'><span
+style='font-family:Verdana'><span style='mso-tab-count:3'>??????????????????????????? </span>...<o:p></o:p></span></i></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><o:p>&nbsp;</o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span>c) Das Bet?tigen einer Schaltfl?che kann den
+Zustand der Rolle ver?ndern (Aktion &quot;<span class=SpellE>changeStateOfRole</span>&quot;)<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>changeStateof</u></span><u> </u>=
+<span class=GramE>Attribut :</span> Name einer Rolle. Diese wechselt den
+Zustand von aktiviert nach nicht aktiviert, <span class=SpellE>bzw</span>
+umgekehrt.<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+3'>??????????????????????????? </span>Ausgel?st wird der Zustandswechsel durch
+die Aktion &quot;<span class=SpellE>changeStateOfRole</span>&quot;.<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><o:p>&nbsp;</o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span>d) Eine Schaltfl?che kann unsichtbar sein<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>visibleIf</u></span> = <span
+class=GramE>Attribut :</span> Die Schaltfl?che ist sichtbar, wenn die
+angef?hrten Rollen den Zustand aktiv haben,<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+3'>??????????????????????????? </span>oder wenn dem <span class=SpellE>Rollenbezeicner</span>
+<span class=GramE>ein !</span> vorangeht deren Zustand passiv ist.<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+3'>??????????????????????????? </span>Abh?ngigkeit von mehr als einer Rolle
+wird durch Hintereinanderschreiben des Zeichens + und eines weiteren
+Rollennamens erreicht.<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><o:p>&nbsp;</o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span>e) Grafik der Schaltfl?che<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>location</u></span> = <span
+class=GramE>Attribut :</span> Hintergrundbild der Schaltfl?che (<span
+class=SpellE>png</span>) relativ zu <span class=SpellE>mmc</span>/<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>icon</u></span> = <span
+class=GramE>Attribut :</span> Symbolbild auf der Schaltfl?che (<span
+class=SpellE>png</span>) relativ zu <span class=SpellE>mmc</span>/. Das
+Symbolbild wird Linksb?ndig auf dem Hintergrundbild positioniert.<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><o:p>&nbsp;</o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>alpha</u></span> = Attribut
+:<span style='mso-spacerun:yes'>? </span>Transparenzwert 0..255, je niedriger
+desto transparenter<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><o:p>&nbsp;</o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span>f) Text der Schaltfl?che:<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>localeDefault</u></span> =
+Attribut : auszugebender Text, falls keine <span class=SpellE>Messagenummer</span>
+in <span class=SpellE>localeID</span> angegeben ist<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>localeID</u></span> = <span
+class=GramE>Attribut :</span> <span class=SpellE>Messagenummer</span> f?r
+Zugriff auf Text aus der Sprachdatei (<span class=SpellE>language</span>/&lt;<span
+class=SpellE>sprache&gt;.cfg</span>)<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>content</u></span> = <span
+class=GramE>Attribut :</span> Wert ist entweder<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+4'>????????????????????????????????????? </span>&quot;distance&quot; =
+Entfernung zum Ziel<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+4'>????????????????????????????????????? </span>oder<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+4'>????????????????????????????????????? </span>&quot;<span class=SpellE>scale</span>&quot;
+= <span class=SpellE>Massstab</span> im Meter/Pixel<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><o:p>&nbsp;</o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>alignText</u></span> =
+Attribut : &quot;T&quot;, &quot;B&quot;, &quot;L&quot;, &quot;R&quot; f?r Top, <span
+class=SpellE>Bottom</span>, <span class=SpellE>Left</span>, Right<span
+style='mso-spacerun:yes'>? </span>= oberste, unterste Zeile, links-,
+rechtsb?ndig , <o:p></o:p></span></p>
+
+<p class=MsoPlainText style='margin-left:141.6pt;text-indent:35.4pt'><span
+style='font-family:Verdana'>&quot;C&quot; <span class=SpellE>default</span> ist
+<span class=SpellE>zentiert</span> mittig<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>fontsize</u></span> =
+Attribut : <span class=SpellE>Fontgr?sse</span> :f?r jede Schaltfl?che noch mal
+einzeln definierbar<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>textOffsetLeft</u></span> =
+Attribut : Anzahl Pixel Abstand vom linken Rand der Schaltfl?che<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span>oder<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>textOffsetRight</u></span><u>
+</u>= Attribut : Anzahl Pixel Abstand vom rechten Rand der Schaltfl?che<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span>und<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>textOffsetTop</u></span> =
+Attribut : Anzahl Pixel Abstand vom oberen Rand der Schaltfl?che<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span>oder<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><span style='mso-tab-count:
+2'>?????????????????? </span><span class=SpellE><u>textOffsetBottom</u></span><u>
+</u>= <span class=GramE>Attribut :</span> Anzahl Pixel Abstand vom unteren Rand
+der Schaltfl?che<o:p></o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'><o:p>&nbsp;</o:p></span></p>
+
+<p class=MsoPlainText><span style='font-family:Verdana'>Der Wert der Attribute
+wird in &quot;&quot; geschrieben;<o:p></o:p></span></p>
+
 </div>
 
 </body>

Modified: trunk/res_noewe/mmc/pda/icon_to_gps.png
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/mmc/pda/icon_to_target.png
===================================================================
(Binary files differ)

Modified: trunk/res_noewe/mmc/pda/movingMapControls.xml
===================================================================
--- trunk/res_noewe/mmc/pda/movingMapControls.xml	2010-07-09 18:02:20 UTC (rev 2669)
+++ trunk/res_noewe/mmc/pda/movingMapControls.xml	2010-07-09 20:29:47 UTC (rev 2670)
@@ -1,61 +1,62 @@
 <mmc>
 	<settings fontsize="12"/>
 
-	<role name="always" active="true"/>
+	<role name="always" 	active="true"/>
 	<role name="menu"/>
-	<role name="zoom" disable="map|centermap|detail"/>
+	<role name="zoom" 	disable="map|centermap|detail"/>
 	<role name="centermap"  disable="zoom|map|detail"/>
-	<role name="map" disable="zoom|centermap|detail"/>
-	<role name="detail" disable="zoom|centermap|map"/>
-	<role name="show_map" active="true"/> <!-- this name of role is fix in code! -->
-	<role name="show_caches" active="true"/><!-- this name of role is fix in code! -->
-	<role name="fill_white" active="true"/><!-- this name of role is fix in code! -->
-	<role name="zoom_manually"/><!-- this name of role is fix in code! -->
+	<role name="map" 	disable="zoom|centermap|detail"/>
+	<role name="detail" 	disable="zoom|centermap|map"/>
+	<role name="show_map" 		active="true"/> <!-- this name of role is fix in code! -->
+	<role name="show_caches" 	active="true"/> <!-- this name of role is fix in code! -->
+	<role name="fill_white" 	active="true"/> <!-- this name of role is fix in code! -->
+	<role name="zoom_manually"/>			<!-- this name of role is fix in code! -->
 
 	<!-- Buttons right side -->
-	<button action="close" fromRight="49" fromTop="1" location="bg_q.png"  icon="icon_close.png"  alpha="80" visibleIf="!menu" />
-	<button action="moveToGps" fromRight="49" fromTop="50" location="bg_q.png"  icon="icon_gps.png"  alpha="80" visibleIf="!menu" />
+	<button action="close" 		fromRight="50"	fromTop="0"	location="bg_q.png"  icon="icon_close.png"		alpha="80"	visibleIf="!menu" />
+	<button action="moveToDest" 	fromLeft="5"	fromTop="50"	location="bg_q.png"  icon="icon_to_target.png"		alpha="160"	visibleIf="!menu" />
+	<button action="moveToGps" 	fromRight="50"	fromTop="50"	location="bg_q.png"  icon="icon_to_gps.png"		alpha="160"	visibleIf="!menu" />
+	<button action="moreDetails"	fromLeft="5"	fromTop="100"	location="bg_q.png"  icon="icon_map_more_details.png"	alpha="160"	visibleIf="!menu" localeDefault="Detail" alignText="BC" textOffsetLeft="0"/>
+	<button action="moreOverview" 	fromRight="50"	fromTop="100"	location="bg_q.png"  icon="icon_map_less_details.png"	alpha="160"	visibleIf="!menu" localeDefault="Detail" alignText="BC" textOffsetLeft="0"/>
 
 	<!-- buttom text icons -->
-	<button action="changeStateOfRole" fromLeft="0" fromBottom="33" changeStateof="menu" location="text_left_110x33.png" icon="text_left_110x33.png" alpha="220" visibleIf="!menu" content="distance" alignText="BL"/>
-
+	<button action="changeStateOfRole" 	fromLeft="5"	fromTop="0"	changeStateof="menu" location="bg_w.png" icon="bg_w.png" alpha="220" visibleIf="!menu" content="distance" alignText="C" fontsize="24"/>
+	<!--
 	<button action="changeStateOfRole" fromRight="110" fromBottom="33" changeStateof="menu" location="text_right_110x33.png" icon="text_right_110x33.png" alpha="220" visibleIf="!menu" content="scale" alignText="BR"/>
+	 -->
 
 	<!-- menu items -->
-	<button action="changeStateOfRole" fromRight="49" fromTop="1" changeStateof="map" location="bg_q.png"  icon="icon_map.png"  visibleIf="menu+!map" />
-	<button action="changeStateOfRole" fromRight="49" fromTop="1" changeStateof="map" location="bg_q_active.png"  icon="icon_map.png" visibleIf="menu+map" />
+	<button changeStateof="map" fromRight="50" fromTop="0" location="bg_q.png"  icon="icon_map.png"  visibleIf="menu+!map" action="changeStateOfRole" />
+	<button changeStateof="map" fromRight="50" fromTop="0" location="bg_q_active.png"  icon="icon_map.png" visibleIf="menu+map" action="changeStateOfRole" />
 
-	<button action="changeStateOfRole" fromRight="49" fromTop="50" changeStateof="zoom" location="bg_q.png"  icon="icon_zoom.png" visibleIf="menu+!zoom" />
-	<button action="changeStateOfRole" fromRight="49" fromTop="50" changeStateof="zoom" location="bg_q_active.png"  icon="icon_zoom.png" visibleIf="menu+zoom" />
+	<button changeStateof="zoom" fromRight="50" fromTop="50" location="bg_q.png"  icon="icon_zoom.png" visibleIf="menu+!zoom" 	action="changeStateOfRole" />
+	<button changeStateof="zoom" fromRight="50" fromTop="50" location="bg_q_active.png"  icon="icon_zoom.png" visibleIf="menu+zoom" action="changeStateOfRole" />
 
-	<button action="changeStateOfRole" fromRight="49" fromTop="100" changeStateof="detail" location="bg_q.png" icon="icon_map_pos_dest.png" visibleIf="menu+!detail" />
-	<button action="changeStateOfRole" fromRight="49" fromTop="100" changeStateof="detail" location="bg_q_active.png"  icon="icon_map_pos_dest.png" visibleIf="menu+detail" />
+	<button changeStateof="detail" fromRight="50" fromTop="100" location="bg_q.png" icon="icon_map_pos_dest.png" visibleIf="menu+!detail" 		 action="changeStateOfRole"/>
+	<button changeStateof="detail" fromRight="50" fromTop="100" location="bg_q_active.png"  icon="icon_map_pos_dest.png" visibleIf="menu+detail" 	 action="changeStateOfRole"/>
 
+	<button changeStateof="centermap" fromRight="50" fromTop="150" location="bg_q.png" icon="icon_to_centre.png" visibleIf="menu+!centermap" 	action="changeStateOfRole" />
+	<button changeStateof="centermap" fromRight="50" fromTop="150" location="bg_q_active.png"  icon="icon_to_centre.png" visibleIf="menu+centermap" action="changeStateOfRole" />
 
-	<button action="changeStateOfRole" fromRight="49" fromTop="150" changeStateof="centermap" location="bg_q.png" icon="icon_to_centre.png" visibleIf="menu+!centermap" />
-	<button action="changeStateOfRole" fromRight="49" fromTop="150" changeStateof="centermap" location="bg_q_active.png"  icon="icon_to_centre.png" visibleIf="menu+centermap" />
 
-
 	<!-- sub menu: map -->
-	<button action="selectMap" fromLeft="5" fromTop="0"  location="bg_w.png"  icon="icon_folder.png"  visibleIf="menu+map" localeDefault="Select a map manually$s" localeID="4235" alignText="C" textOffsetLeft="50"/>
-	<button action="changeMapDir" fromLeft="5" fromTop="50"  location="bg_w.png"  icon="icon_folders.png"  visibleIf="menu+map" localeDefault="Change map directory" localeID="4237" alignText="C" textOffsetLeft="50"/>
-	<button action="changeStateOfRole" fromLeft="5" fromTop="100" changeStateof="show_map" location="bg_w.png"  icon="icon_map.png"  visibleIf="menu+map+!show_map" localeDefault="Show map" localeID="4239" alignText="C" textOffsetLeft="50"/>
-	<button action="changeStateOfRole" fromLeft="5" fromTop="100" changeStateof="show_map" location="bg_w.png"  icon="icon_nomap.png"  visibleIf="menu+map+show_map" localeDefault="Hide map" localeID="4241" alignText="C" textOffsetLeft="50"/>
-	<button action="changeStateOfRole" fromLeft="5" fromTop="150" changeStateof="fill_white" location="bg_w.png"  icon="icon_map_no_fill.png"  visibleIf="menu+map+fill_white" localeDefault="Show white areas" localeID="4267" alignText="C" textOffsetLeft="50"/>
-	<button action="changeStateOfRole" fromLeft="5" fromTop="150" changeStateof="fill_white" location="bg_w.png"  icon="icon_map_fill.png"  visibleIf="menu+map+!fill_white" localeDefault="Fill white areas" localeID="4266" alignText="C" textOffsetLeft="50"/>
-	<button action="changeStateOfRole" fromLeft="5" fromTop="200" changeStateof="show_caches" location="bg_w.png"  icon="icon_map_cache.png"  visibleIf="menu+map+!show_caches" localeDefault="Alle Cache anzeigen" localeID="4268" alignText="C" textOffsetLeft="50"/>
-	<button action="changeStateOfRole" fromLeft="5" fromTop="200" changeStateof="show_caches" location="bg_w.png"  icon="icon_map_no_cache.png"  visibleIf="menu+map+show_caches" localeDefault="Keine Cache anzeigen" localeID="4269" alignText="C" textOffsetLeft="50"/>
+	<button action="selectMap" 			fromLeft="5" fromTop="0"   location="bg_w.png"  icon="icon_folder.png"		visibleIf="menu+map"			localeDefault="Select a map manually$s" localeID="4235" alignText="C" textOffsetLeft="50"/>
+	<button action="changeMapDir" 			fromLeft="5" fromTop="50"  location="bg_w.png"  icon="icon_folders.png"		visibleIf="menu+map"			localeDefault="Change map directory" 	localeID="4237" alignText="C" textOffsetLeft="50"/>
+	<button changeStateof="show_map"		fromLeft="5" fromTop="100" location="bg_w.png"  icon="icon_map.png"		visibleIf="menu+map+!show_map"		localeDefault="Show map" 		localeID="4239" alignText="C" textOffsetLeft="50"	action="changeStateOfRole"/>
+	<button changeStateof="show_map"		fromLeft="5" fromTop="100" location="bg_w.png"  icon="icon_nomap.png"		visibleIf="menu+map+show_map"		localeDefault="Hide map" 		localeID="4241" alignText="C" textOffsetLeft="50"	action="changeStateOfRole"/>
+	<button changeStateof="fill_white"	        fromLeft="5" fromTop="150" location="bg_w.png"  icon="icon_map_fill.png"	visibleIf="menu+map+!fill_white"	localeDefault="Fill white areas" 	localeID="4266" alignText="C" textOffsetLeft="50"	action="changeStateOfRole"/>
+	<button changeStateof="fill_white"	        fromLeft="5" fromTop="150" location="bg_w.png"  icon="icon_map_no_fill.png"	visibleIf="menu+map+fill_white"		localeDefault="Show white areas" 	localeID="4267" alignText="C" textOffsetLeft="50"	action="changeStateOfRole"/>
+	<button changeStateof="show_caches"	        fromLeft="5" fromTop="200" location="bg_w.png"  icon="icon_map_cache.png"	visibleIf="menu+map+!show_caches"	localeDefault="Alle Cache anzeigen" 	localeID="4268" alignText="C" textOffsetLeft="50"	action="changeStateOfRole"/>
+	<button changeStateof="show_caches"	        fromLeft="5" fromTop="200" location="bg_w.png"  icon="icon_map_no_cache.png"	visibleIf="menu+map+show_caches"	localeDefault="Keine Cache anzeigen" 	localeID="4269" alignText="C" textOffsetLeft="50"	action="changeStateOfRole"/>
 
 	<!-- sub menu: zoom -->
-	<button action="changeStateOfRole" fromLeft="5" fromTop="0" changeStateof="zoom_manually" location="bg_w.png"  icon="icon_zoom.png"  visibleIf="menu+zoom" localeDefault="Activate manually zoom" localeID="4292" alignText="C" textOffsetLeft="50"/>
-	<button action="zoomin" fromLeft="5" fromTop="50"  location="bg_w.png"  icon="icon_zoom_in.png"  visibleIf="menu+zoom" localeDefault="Zoom in" localeID="4291" alignText="C" textOffsetLeft="50"/>
-	<button action="zoomout" fromLeft="5" fromTop="100"  location="bg_w.png"  icon="icon_zoom_out.png"  visibleIf="menu+zoom" localeDefault="Zoom out" localeID="4290" alignText="C" textOffsetLeft="50"/>
-	<button action="1to1" fromLeft="5" fromTop="150"  location="bg_w.png"  icon="icon_1to1.png"  visibleIf="menu+zoom" localeDefault="Zoom to original resolution" localeID="4293" alignText="C" textOffsetLeft="50"/>
+	<button changeStateof="zoom_manually"	fromLeft="5" fromTop="0"	location="bg_w.png"  icon="icon_zoom.png"	visibleIf="menu+zoom" localeDefault="Activate manually zoom" localeID="4292" alignText="C" textOffsetLeft="50" action="changeStateOfRole"/>
+	<button action="zoomin"			fromLeft="5" fromTop="50"	location="bg_w.png"  icon="icon_zoom_in.png"	visibleIf="menu+zoom" localeDefault="Zoom in" localeID="4291" alignText="C" textOffsetLeft="50"/>
+	<button action="zoomout"		fromLeft="5" fromTop="100"	location="bg_w.png"  icon="icon_zoom_out.png"	visibleIf="menu+zoom" localeDefault="Zoom out" localeID="4290" alignText="C" textOffsetLeft="50"/>
+	<button action="1to1"			fromLeft="5" fromTop="150"	location="bg_w.png"  icon="icon_1to1.png"	visibleIf="menu+zoom" localeDefault="Zoom to original resolution" localeID="4293" alignText="C" textOffsetLeft="50"/>
 
 
 	<!-- sub menu: center map -->
-	<button action="moveToDest" fromLeft="5" fromTop="0"  location="bg_w.png"  icon="icon_to_target.png"  visibleIf="menu+centermap" localeDefault="Move to goto point" localeID="4260" alignText="C" textOffsetLeft="50"/>
-	<button action="moveToGps" fromLeft="5" fromTop="50"  location="bg_w.png"  icon="icon_to_gps.png"  visibleIf="menu+centermap" localeDefault="Move to GPS position" localeID="4262" alignText="C" textOffsetLeft="50"/>
 	<button action="moveToCenter" fromLeft="5" fromTop="100"  location="bg_w.png"  icon="icon_to_centre.png"  visibleIf="menu+centermap" localeDefault="Move to centre" localeID="4264" alignText="C" textOffsetLeft="50"/>
 
 	<!-- sub menu: detail -->
@@ -63,8 +64,6 @@
 	<button action="highestResolution" fromLeft="5" fromTop="50"  location="bg_w.png"  icon="icon_map_highest_res.png"  visibleIf="menu+detail" localeDefault="Highest resolution" localeID="4246" alignText="C" textOffsetLeft="50"/>
 	<button action="keepManResolution" fromLeft="5" fromTop="100"  location="bg_w.png"  icon="icon_map_man_res.png"  visibleIf="menu+detail" localeDefault="Keep manual resolution" localeID="4248" alignText="C" textOffsetLeft="50"/>
 	<button action="allCachesRes" fromLeft="5" fromTop="150"  location="bg_w.png"  icon="icon_map_all.png"  visibleIf="menu+detail" localeDefault="Load a map containing all marked caches" localeID="4252" alignText="C" textOffsetLeft="50"/>
-	<button action="moreDetails" fromLeft="5" fromTop="200"  location="bg_w.png"  icon="icon_map_more_details.png"  visibleIf="menu+detail" localeDefault="Load a map with more details" localeID="4254" alignText="C" textOffsetLeft="50"/>
-	<button action="moreOverview" fromLeft="5" fromTop="250"  location="bg_w.png"  icon="icon_map_less_details.png"  visibleIf="menu+detail" localeDefault="Load a map for a better overview" localeID="4256" alignText="C" textOffsetLeft="50"/>
 
 	<button action="changeStateOfRole" fromRight="45" fromTop="100" changeStateof="zoom_manually" location="icon_zoom.png"  icon="icon_zoom.png"  visibleIf="!menu+zoom_manually"/>
 </mmc>

Modified: trunk/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java
===================================================================
--- trunk/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java	2010-07-09 18:02:20 UTC (rev 2669)
+++ trunk/src/CacheWolf/navi/touchControls/MovingMapControlSettings.java	2010-07-09 20:29:47 UTC (rev 2670)
@@ -204,8 +204,7 @@
 				ypos = 0;
 			}
 
-			String changeState = attributes
-					.getValue(BUTTON_ATTR_CHANGE_STAE_OF);
+			String changeState = attributes.getValue(BUTTON_ATTR_CHANGE_STAE_OF);
 
 			String visibility = attributes.getValue(BUTTON_ATTR_VISIBILITY);
 			String action = attributes.getValue(BUTTON_ATTR_ACTION);
@@ -229,8 +228,7 @@
 			}
 			int alphavalue = getIntFromFile(attributes, BUTTON_ATTR_ALPHA, -1);
 
-			int localIDValue = getIntFromFile(attributes,
-					BUTTON_ATTR_LOCALE_ID, 0);
+			int localIDValue = getIntFromFile(attributes, BUTTON_ATTR_LOCALE_ID, 0);
 
 			if (imageLocation == null) {
 				// something not set
@@ -250,17 +248,14 @@
 
 			MovingMapControlItem button;
 			if (context != null) {
-				button = new MovingMapControlItemText("", imageLocation,
-						iconLocation, alphavalue, action, context, alignText,
-						tOptions);
+				button = new MovingMapControlItemText("", 
+						imageLocation, iconLocation, alphavalue, action, context, alignText, tOptions);
 			} else if (localeDefault != null) {
-				button = new MovingMapControlItemText(MyLocale.getMsg(
-						localIDValue, localeDefault), imageLocation,
-						iconLocation, alphavalue, action, context, alignText,
-						tOptions);
+				button = new MovingMapControlItemText(MyLocale.getMsg(localIDValue, localeDefault),
+						imageLocation, iconLocation, alphavalue, action, context, alignText, tOptions);
 			} else {
-				button = new MovingMapControlItemButton(imageLocation,
-						iconLocation, action, alphavalue);
+				button = new MovingMapControlItemButton(
+						imageLocation, iconLocation, action, alphavalue);
 			}
 
 			// add extra role to all icons



From araber95 at mail.berlios.de  Sun Jul 11 12:43:32 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun, 11 Jul 2010 12:43:32 PM +0200
Subject: [Cachewolf-svn] r2671 - trunk/src/CacheWolf/imp
Message-ID: <20100711104332.A8DD2480087@sheep.berlios.de>

Author: araber95
Date: 2010-07-11 12:43:32 +0200 (Sun, 11 Jul 2010)
New Revision: 2671

Modified:
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
really all image filenames in lowercase

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-07-09 20:29:47 UTC (rev 2670)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-07-11 10:43:32 UTC (rev 2671)
@@ -1733,7 +1733,7 @@
 							spideredUrls.add(imgUrl);
 							spiderCounter++;
 						} else { // Image already spidered as wayPoint_'idxUrl'
-							fileName = chD.getParent().getWayPoint() + "_" + Convert.toString(idxUrl);
+							fileName = chD.getParent().getWayPoint().toLowerCase() + "_" + Convert.toString(idxUrl);
 							pref.log("Already loaded image: " + imgUrl+" as "+fileName+imgType);
 							imageInfo = new ImageInfo();
 							imageInfo.setFilename(fileName+imgType);
@@ -1779,7 +1779,7 @@
 						imgName = chD.getParent().getWayPoint() + "_" + Convert.toString(imgCounter);
 						imageInfo = null;
 						if (idxUrl<0) { // New image
-							fileName = chD.getParent().getWayPoint() + "_" + Convert.toString(spiderCounter);
+							fileName = chD.getParent().getWayPoint().toLowerCase() + "_" + Convert.toString(spiderCounter);
 							if (lastImages != null) {
 								imageInfo = lastImages.needsSpidering(imgUrl, fileName+imgType);
 							}
@@ -1795,7 +1795,7 @@
 							spideredUrls.add(imgUrl);
 							spiderCounter++;
 						} else { // Image already spidered as wayPoint_'idxUrl'
-							fileName = chD.getParent().getWayPoint() + "_" + Convert.toString(idxUrl);
+							fileName = chD.getParent().getWayPoint().toLowerCase() + "_" + Convert.toString(idxUrl);
 							pref.log("Already loaded image: " + imgUrl+" as "+fileName+imgType);
 							imageInfo = new ImageInfo();
 							imageInfo.setFilename(fileName+imgType);
@@ -1830,7 +1830,7 @@
 						idxUrl=spideredUrls.find(imgUrl);
 						if (idxUrl<0) { // New image
 							imgName = chD.getParent().getWayPoint() + "_" + Convert.toString(imgCounter);
-							fileName = chD.getParent().getWayPoint() + "_" + Convert.toString(spiderCounter);
+							fileName = chD.getParent().getWayPoint().toLowerCase() + "_" + Convert.toString(spiderCounter);
 							if (lastImages != null) {
 								imageInfo = lastImages.needsSpidering(imgUrl, fileName+imgType);
 							}



From araber95 at mail.berlios.de  Sun Jul 11 02:30:39 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun, 11 Jul 2010 02:30:39 PM +0200
Subject: [Cachewolf-svn] r2672 - trunk/src/CacheWolf/imp
Message-ID: <20100711123039.47114480087@sheep.berlios.de>

Author: araber95
Date: 2010-07-11 14:30:38 +0200 (Sun, 11 Jul 2010)
New Revision: 2672

Modified:
   trunk/src/CacheWolf/imp/OCXMLImporter.java
Log:
setting attribute www-link or oconly for OC-Caches whether listed on GC / NC or not. Extending Name with GC/NC-Waypointname.

Modified: trunk/src/CacheWolf/imp/OCXMLImporter.java
===================================================================
--- trunk/src/CacheWolf/imp/OCXMLImporter.java	2010-07-11 10:43:32 UTC (rev 2671)
+++ trunk/src/CacheWolf/imp/OCXMLImporter.java	2010-07-11 12:30:38 UTC (rev 2672)
@@ -410,6 +410,16 @@
 
 		if(name.equals("waypoints")){
 			holder.setWayPoint(atts.getValue("oc"));
+			String CName = atts.getValue("nccom") + " " + atts.getValue("gccom");
+			if (!CName.equals(" ")) {
+				holder.setCacheName(CName.trim() + " " + holder.getCacheName());
+				holder.getCacheDetails(false).attributes.add(7); // not only OC
+				holder.setAttribsAsBits(holder.getCacheDetails(false).attributes.getAttribsAsBits());
+			}
+			else {
+				holder.getCacheDetails(false).attributes.add(6); // only OC
+				holder.setAttribsAsBits(holder.getCacheDetails(false).attributes.getAttribsAsBits());
+			}
 			if (holder.getWayPoint().length()==0) throw new IllegalArgumentException("empty waypointname"); // this should not happen - it is likey a bug in opencaching / it happens on 27-12-2006 on cache OC143E
 			return;
 		}



From araber95 at mail.berlios.de  Sun Jul 11 06:23:37 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun, 11 Jul 2010 06:23:37 PM +0200
Subject: [Cachewolf-svn] r2673 - in trunk: res_noewe/languages src/CacheWolf
Message-ID: <20100711162338.06B524802CB@sheep.berlios.de>

Author: araber95
Date: 2010-07-11 18:23:37 +0200 (Sun, 11 Jul 2010)
New Revision: 2673

Modified:
   trunk/res_noewe/languages/DE.cfg
   trunk/res_noewe/languages/EN.cfg
   trunk/res_noewe/languages/FR.cfg
   trunk/res_noewe/languages/NL.cfg
   trunk/res_noewe/languages/PL.cfg
   trunk/res_noewe/languages/SV.cfg
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/DetailsPanel.java
Log:
1. found texts (status) depending on CacheType
2. new predefined status "solved"

Modified: trunk/res_noewe/languages/DE.cfg
===================================================================
--- trunk/res_noewe/languages/DE.cfg	2010-07-11 12:30:38 UTC (rev 2672)
+++ trunk/res_noewe/languages/DE.cfg	2010-07-11 16:23:37 UTC (rev 2673)
@@ -227,6 +227,8 @@
 		358=Notiz an den Rezensent
 		359=Besitzer Wartung
 		360=Merker 2
+		361=Webcambild gemacht
+		362=gel&f6st
 		400=Dekodieren
 		401=Kodieren
 		500=Umschalten

Modified: trunk/res_noewe/languages/EN.cfg
===================================================================
--- trunk/res_noewe/languages/EN.cfg	2010-07-11 12:30:38 UTC (rev 2672)
+++ trunk/res_noewe/languages/EN.cfg	2010-07-11 16:23:37 UTC (rev 2673)
@@ -227,6 +227,8 @@
 		358=Post Reviewer Note
 		359=Owner Maintenance
 		360=Flag 2
+		361=Webcam Photo Taken
+		362=solved
 		400=Decode
 		401=Encode
 		500=Switch

Modified: trunk/res_noewe/languages/FR.cfg
===================================================================
--- trunk/res_noewe/languages/FR.cfg	2010-07-11 12:30:38 UTC (rev 2672)
+++ trunk/res_noewe/languages/FR.cfg	2010-07-11 16:23:37 UTC (rev 2673)
@@ -227,6 +227,8 @@
 		358=Post Note du v%e9rificateur
 		359=Detenteur d'entretien
 		360=marqueur 2
+		361=Webcam Photo Taken
+		362=solved
 		400=D%e9coder
 		401=encoder
 		500=Changer

Modified: trunk/res_noewe/languages/NL.cfg
===================================================================
--- trunk/res_noewe/languages/NL.cfg	2010-07-11 12:30:38 UTC (rev 2672)
+++ trunk/res_noewe/languages/NL.cfg	2010-07-11 16:23:37 UTC (rev 2673)
@@ -227,6 +227,8 @@
 		358=post reviewer nota
 		359=eigenaar-onderhoud
 		360=Vlag 2
+		361=Webcam Photo Taken
+		362=solved
 		400=Decoderen
 		401=Coderen
 		500=Omdraaien

Modified: trunk/res_noewe/languages/PL.cfg
===================================================================
--- trunk/res_noewe/languages/PL.cfg	2010-07-11 12:30:38 UTC (rev 2672)
+++ trunk/res_noewe/languages/PL.cfg	2010-07-11 16:23:37 UTC (rev 2673)
@@ -227,6 +227,8 @@
 		358=Post Recenzent Uwaga
 		359=Wlasciciel Konserwacja
                 360=Flaga 1
+		361=Webcam Photo Taken
+		362=solved
                 400=Odkoduj
                 401=Zakoduj
                 500=Przelacz

Modified: trunk/res_noewe/languages/SV.cfg
===================================================================
--- trunk/res_noewe/languages/SV.cfg	2010-07-11 12:30:38 UTC (rev 2672)
+++ trunk/res_noewe/languages/SV.cfg	2010-07-11 16:23:37 UTC (rev 2673)
@@ -227,6 +227,8 @@
 		358=post recensent not
 		359=%e4gare underh%e5ll
 		360=Flag 1
+		361=Webcam Photo Taken
+		362=solved
         	400=Decode
         	401=Koda
         	500=Switch

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-07-11 12:30:38 UTC (rev 2672)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-07-11 16:23:37 UTC (rev 2673)
@@ -1128,6 +1128,7 @@
 			{"353", ""},
 			{"318", "Found it"},
 			{"355", "Attended"},
+			{"361", "Webcam Photo Taken"},
 			{"319", "Didn't find it"},
 			{"314", "Write note"}, 
 			{"315", "Needs Archived"},
@@ -1139,6 +1140,7 @@
 			{"356", "Temporarily Disable Listing"},
 			{"357", "Enable Listing"},
 			{"358", "Post Reviewer Note"},
+			{"362", "Solved"},
 			{"313", "Flag 1"},
 			{"360", "Flag 2"},
 	};

Modified: trunk/src/CacheWolf/DetailsPanel.java
===================================================================
--- trunk/src/CacheWolf/DetailsPanel.java	2010-07-11 12:30:38 UTC (rev 2672)
+++ trunk/src/CacheWolf/DetailsPanel.java	2010-07-11 16:23:37 UTC (rev 2673)
@@ -331,15 +331,21 @@
 		inpHidden.setText(mainCache.getDateHidden());
 		inpOwner.setText(mainCache.getCacheOwner());
 
+		int msgNr=318; // normal found
+    	if (cache.getType() == CacheType.CW_TYPE_WEBCAM) { msgNr=361;}
+    	else if (cache.getType() == CacheType.CW_TYPE_EVENT 
+    			|| cache.getType() == CacheType.CW_TYPE_MEGA_EVENT) { msgNr=355;}
+
 		if ((cache.getCacheStatus().length() == 10 || cache.getCacheStatus().length() == 16) &&
 				cache.getCacheStatus().charAt(4) == '-') {
-			chcStatus.setText(MyLocale.getMsg(318, "Found") + " " + ch.getCacheStatus());
+			// todo found text for webcam or event
+			chcStatus.setText(MyLocale.getMsg(msgNr, "Found") + " " + ch.getCacheStatus());			
 		} else {
 			chcStatus.setText(ch.getCacheStatus());
 			// If the cache status contains a date, do not overwrite it with
 			// 'found' message
 			if (ch.is_found()) {
-				chcStatus.setText(MyLocale.getMsg(318, "Found"));
+				chcStatus.setText(MyLocale.getMsg(msgNr, "Found"));
 			}
 		}
 		chcType.setInt(CacheType.cw2GuiSelect(ch.getType()));
@@ -618,13 +624,17 @@
                     }
                 }
             } else if (ev.target == btnFoundDate) {
+            	int msgNr=318; // normal found
+            	if (cache.getType() == CacheType.CW_TYPE_WEBCAM) { msgNr=361;}
+            	else if (cache.getType() == CacheType.CW_TYPE_EVENT 
+            			|| cache.getType() == CacheType.CW_TYPE_MEGA_EVENT) { msgNr=355;}
                 // DateChooser.dayFirst=true;
                 final DateTimeChooser dc = new DateTimeChooser(Vm.getLocale());
                 dc.title = MyLocale.getMsg(328, "Date found");
                 dc.setPreferredSize(240, 240);
                 String foundDate = chcStatus.getText();
-                if (foundDate.startsWith(MyLocale.getMsg(318, "Found") + " ")) {
-                    foundDate = foundDate.substring(MyLocale.getMsg(318, "Found").length() + 1);
+                if (foundDate.startsWith(MyLocale.getMsg(msgNr, "Found") + " ")) {
+                    foundDate = foundDate.substring(MyLocale.getMsg(msgNr, "Found").length() + 1);
                 }
                 else if (foundDate.endsWith(MyLocale.getMsg(319, "not Found"))) {
                     foundDate = foundDate.substring(0,foundDate.length()-MyLocale.getMsg(319, "not Found").length());
@@ -654,7 +664,7 @@
                 //TODO: The functions for extracting the date and the found/not-found text should not be in the GUI
                 int retCode=dc.execute();
                 if (retCode == ewe.ui.FormBase.IDOK && !chcStatus.getText().endsWith(MyLocale.getMsg(319, "not Found"))) {
-                    chcStatus.setText(MyLocale.getMsg(318, "Found") + " "
+                    chcStatus.setText(MyLocale.getMsg(msgNr, "Found") + " "
                                     + Convert.toString(dc.year) + "-"
                                     + MyLocale.formatLong(dc.month, "00") + "-"
                                     + MyLocale.formatLong(dc.day, "00") + " "
@@ -750,18 +760,21 @@
 		// the CacheHolder object which sits in cacheDB
 		//FIXME: so how do we do this??
 
+		int msgNr=318; // normal found
+    	if (cache.getType() == CacheType.CW_TYPE_WEBCAM) { msgNr=361;}
+    	else if (cache.getType() == CacheType.CW_TYPE_EVENT 
+    			|| cache.getType() == CacheType.CW_TYPE_MEGA_EVENT) { msgNr=355;}
+
 		// Strip the found message if the status contains a date
-		if (chcStatus.getText().startsWith(MyLocale.getMsg(318, "Found")) &&
-			chcStatus.getText().length() >= MyLocale.getMsg(318, "Found").length() + 11) {
-			cache.setCacheStatus(chcStatus.getText().substring(MyLocale.getMsg(318, "Found").length() + 1));
+		if (chcStatus.getText().startsWith(MyLocale.getMsg(msgNr, "Found")) &&
+			chcStatus.getText().length() >= MyLocale.getMsg(msgNr, "Found").length() + 11) {
+			cache.setCacheStatus(chcStatus.getText().substring(MyLocale.getMsg(msgNr, "Found").length() + 1));
 		} else {
 			cache.setCacheStatus(chcStatus.getText());
 		}
 
-		if (chcStatus.getText().startsWith(MyLocale.getMsg(318, "Found")) ||
-			chcStatus.getText().startsWith(MyLocale.getMsg(355, "Attended")) ||
-			(cache.getCacheStatus().length() == 10 || cache.getCacheStatus().length() == 16) &&
-			cache.getCacheStatus().charAt(4) == '-') {
+		if (chcStatus.getText().startsWith(MyLocale.getMsg(msgNr, "Found")) ||
+			(cache.getCacheStatus().length() == 10 || cache.getCacheStatus().length() == 16) && cache.getCacheStatus().charAt(4) == '-') {
 			// Use same heuristic condition as in setDetails(CacheHolder) to
 			// determine, if this
 			// cache
@@ -773,14 +786,16 @@
 		if (!cache.isAddiWpt()) {
 			cache.setCacheOwner(inpOwner.getText().trim());
 		}
-		cache.setOwned(cache.getCacheStatus().equals(
-				MyLocale.getMsg(320, "Owner")));
+		cache.setOwned(cache.getCacheStatus().equals(MyLocale.getMsg(320, "Owner")));
 		// Avoid setting is_owned if alias is empty and username is empty
 		if (!cache.is_owned()) {
-			cache.setOwned((!pref.myAlias.equals("") && pref.myAlias
-					.equals(cache.getCacheOwner()))
-					|| (!pref.myAlias2.equals("") && pref.myAlias2
-							.equals(cache.getCacheOwner())));
+			cache.setOwned(
+					(!pref.myAlias.equals("") &&
+						pref.myAlias.equals(cache.getCacheOwner()))
+					||
+					(!pref.myAlias2.equals("") &&
+						pref.myAlias2.equals(cache.getCacheOwner()))
+					);
 		}
 		cache.setBlack(blackStatus);
 		final String oldWaypoint = cache.getWayPoint();



From araber95 at mail.berlios.de  Sun Jul 11 08:09:21 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun, 11 Jul 2010 08:09:21 PM +0200
Subject: [Cachewolf-svn] r2674 - in trunk: res_noewe/languages src/CacheWolf
Message-ID: <20100711180921.9AFD44802CB@sheep.berlios.de>

Author: araber95
Date: 2010-07-11 20:09:21 +0200 (Sun, 11 Jul 2010)
New Revision: 2674

Modified:
   trunk/res_noewe/languages/DE.cfg
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/CacheHolderDetail.java
Log:
do, what it was designed for : generating fieldnotes with the correct found text for webcam and events

Modified: trunk/res_noewe/languages/DE.cfg
===================================================================
--- trunk/res_noewe/languages/DE.cfg	2010-07-11 16:23:37 UTC (rev 2673)
+++ trunk/res_noewe/languages/DE.cfg	2010-07-11 18:09:21 UTC (rev 2674)
@@ -228,7 +228,7 @@
 		359=Besitzer Wartung
 		360=Merker 2
 		361=Webcambild gemacht
-		362=gel&f6st
+		362=gel%f6st (
 		400=Dekodieren
 		401=Kodieren
 		500=Umschalten

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-07-11 16:23:37 UTC (rev 2673)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-07-11 18:09:21 UTC (rev 2674)
@@ -615,8 +615,13 @@
 		varParams.put("LATLON", (pos!=null && pos.isValid())?LatLon:"unknown");
 		varParams.put("LAT", decSep.replaceAll(pos.getLatDeg(CWPoint.DD)));
 		varParams.put("LON", decSep.replaceAll(pos.getLonDeg(CWPoint.DD)));		
-		if (withFoundText && cacheStatus.length()>=10 && cacheStatus.charAt(4)=='-')
-			varParams.put("STATUS",MyLocale.getMsg(318,"Found")+" "+cacheStatus);
+		if (withFoundText && cacheStatus.length()>=10 && cacheStatus.charAt(4)=='-') {
+			int msgNr=318; // normal found			
+			if (type == CacheType.CW_TYPE_WEBCAM) { msgNr=361;}
+			else if (type == CacheType.CW_TYPE_EVENT 
+					|| type == CacheType.CW_TYPE_MEGA_EVENT) { msgNr=355;}
+			varParams.put("STATUS",MyLocale.getMsg(msgNr,"Found")+" "+cacheStatus);
+		}
 		else
 			varParams.put("STATUS", cacheStatus);
 		varParams.put("GC_LOGTYPE", GetGCLogType());
@@ -1122,8 +1127,6 @@
 	private final static int MSG_NR = 0; 
 	private final static int GC_MSG = 1; 
 	private final static int IDX_WRITENOTE = 4; 	
-	private final static int IDX_FOUNDIT = 1; 	
-	//private final static int IDX_NOTFOUND = 3; 	
 	private final static String[][] _logType = {	
 			{"353", ""},
 			{"318", "Found it"},
@@ -1156,7 +1159,16 @@
 	public String GetGCLogType() {                                                                                
 		String gcLogType=_logType[IDX_WRITENOTE][GC_MSG];
 		if (is_found()) {
-			gcLogType = _logType[IDX_FOUNDIT][GC_MSG];                                                                 
+			String msgNr="318"; // normal found			
+			if (type == CacheType.CW_TYPE_WEBCAM) { msgNr="361";}
+			else if (type == CacheType.CW_TYPE_EVENT 
+					|| type == CacheType.CW_TYPE_MEGA_EVENT) { msgNr="355";}
+			for (int i = 1; i < _logType.length; i++) {
+				if (_logType[i][MSG_NR].equals(msgNr)) {
+					gcLogType = _logType[i][GC_MSG]; 
+					break;
+				}
+			}
 		}
 		else {
 			String CacheStatus=getCacheStatus();  

Modified: trunk/src/CacheWolf/CacheHolderDetail.java
===================================================================
--- trunk/src/CacheWolf/CacheHolderDetail.java	2010-07-11 16:23:37 UTC (rev 2673)
+++ trunk/src/CacheWolf/CacheHolderDetail.java	2010-07-11 18:09:21 UTC (rev 2674)
@@ -104,49 +104,47 @@
 	 * @param newCh new cache data
 	 * @return CacheHolder with updated data
 	 */
-	public CacheHolderDetail update(CacheHolderDetail newCh){
-		  // flags
-		  if (getParent().is_found() && getParent().getCacheStatus().equals("")) getParent().setCacheStatus(MyLocale.getMsg(318,"Found"));
-
-		  //travelbugs:GPX-File contains all actual travelbugs but not the missions
-		  //  we need to check whether the travelbug is already in the existing list
-		  getParent().setHas_bugs(newCh.Travelbugs.size()>0);
-		  for (int i=newCh.Travelbugs.size()-1; i>=0; i--) {
-			 Travelbug tb=newCh.Travelbugs.getTB(i);  
-		     Travelbug oldTB=this.Travelbugs.find(tb.getName());
-		     // If the bug is already in the cache, we keep it
-		     if (oldTB != null) {
-		    	 if (tb.getMission().length() > 0)
-		    		 oldTB.setMission(tb.getMission());
-		    	 if (tb.getGuid().length() > 0)
-		    		 oldTB.setGuid(tb.getGuid());
-		    	 newCh.Travelbugs.replace(i,oldTB);
-		     }
-		    
-		  }
-		  this.Travelbugs = newCh.Travelbugs;
-		  
-		  if (newCh.attributes.count() > 0) this.attributes = newCh.attributes;
-		  
-		  // URL
-		  this.URL = newCh.URL;
-		  
-		  // Images
-		  this.images = newCh.images;
-		  
-		  setLongDescription(newCh.LongDescription);
-		  setHints(newCh.Hints);
-		  setCacheLogs(newCh.CacheLogs);
-		  
-		  if (newCh.OwnLogId.length()>0) this.OwnLogId=newCh.OwnLogId;
-		  if (newCh.OwnLog != null) this.OwnLog = newCh.OwnLog;
-		  
-		  if (newCh.Country.length()>0) this.Country=newCh.Country;
-		  if (newCh.State.length()>0) this.State=newCh.State;
-		  
-		  if (newCh.getSolver().length()>0) this.setSolver(newCh.getSolver());
-	 	return this;
-	  }
+	 public CacheHolderDetail update(CacheHolderDetail newCh) {
+			// flags
+			CacheHolder ch = getParent();
+			if (ch.is_found() && ch.getCacheStatus().equals("")) {
+				int msgNr=318; // normal found			 
+				if (ch.getType() == CacheType.CW_TYPE_WEBCAM) { msgNr=361;}
+				else if (ch.getType() == CacheType.CW_TYPE_EVENT 
+						|| ch.getType() == CacheType.CW_TYPE_MEGA_EVENT) { msgNr=355;}
+				ch.setCacheStatus(MyLocale.getMsg(msgNr,"Found"));
+			}
+			//travelbugs:GPX-File contains all actual travelbugs but not the missions
+			// we need to check whether the travelbug is already in the existing list
+			getParent().setHas_bugs(newCh.Travelbugs.size()>0);
+			for (int i=newCh.Travelbugs.size()-1; i>=0; i--) {
+				Travelbug tb=newCh.Travelbugs.getTB(i);
+				Travelbug oldTB=this.Travelbugs.find(tb.getName());
+				// If the bug is already in the cache, we keep it
+				if (oldTB != null) {
+					if (tb.getMission().length() > 0)
+						oldTB.setMission(tb.getMission());
+					if (tb.getGuid().length() > 0)
+						oldTB.setGuid(tb.getGuid());
+					newCh.Travelbugs.replace(i,oldTB);
+				}
+			}
+			this.Travelbugs = newCh.Travelbugs;
+			if (newCh.attributes.count() > 0) this.attributes = newCh.attributes;
+			// URL
+			this.URL = newCh.URL;
+			// Images
+			this.images = newCh.images;
+			setLongDescription(newCh.LongDescription);
+			setHints(newCh.Hints);
+			setCacheLogs(newCh.CacheLogs);
+			if (newCh.OwnLogId.length()>0) this.OwnLogId=newCh.OwnLogId;
+			if (newCh.OwnLog != null) this.OwnLog = newCh.OwnLog;
+			if (newCh.Country.length()>0) this.Country=newCh.Country;
+			if (newCh.State.length()>0) this.State=newCh.State;
+			if (newCh.getSolver().length()>0) this.setSolver(newCh.getSolver());
+			return this;		
+	 }
 	  
 	  /**
 	   * Adds a user image to the cache data



From araber95 at mail.berlios.de  Mon Jul 12 11:31:02 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 12 Jul 2010 11:31:02 AM +0200
Subject: [Cachewolf-svn] r2675 - in trunk: res_noewe/languages src/CacheWolf
Message-ID: <20100712093102.F0D17480584@sheep.berlios.de>

Author: araber95
Date: 2010-07-12 11:31:02 +0200 (Mon, 12 Jul 2010)
New Revision: 2675

Modified:
   trunk/res_noewe/languages/DE.cfg
   trunk/src/CacheWolf/CacheHolder.java
Log:
coordinates of caches with statustext starting with solved (<language.cfg> Nr. 362) will not be changed by updates (gpx-import, oc-update, gc-update inc spider)

Modified: trunk/res_noewe/languages/DE.cfg
===================================================================
--- trunk/res_noewe/languages/DE.cfg	2010-07-11 18:09:21 UTC (rev 2674)
+++ trunk/res_noewe/languages/DE.cfg	2010-07-12 09:31:02 UTC (rev 2675)
@@ -228,7 +228,7 @@
 		359=Besitzer Wartung
 		360=Merker 2
 		361=Webcambild gemacht
-		362=gel%f6st (
+		362=gel%f6st
 		400=Dekodieren
 		401=Kodieren
 		500=Umschalten

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-07-11 18:09:21 UTC (rev 2674)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-07-12 09:31:02 UTC (rev 2675)
@@ -436,10 +436,6 @@
 		}
 		return result;
 	}
-	
-	public void update(CacheHolder ch) {
-		update(ch, false);
-	}
 	/** 
 	 * Updates Cache information with information provided by cache given as argument. This is used
 	 * to update the cache with the information retrieved from files or web: The argument cache
@@ -449,34 +445,31 @@
 	 * @param overwrite If <code>true</code>, then <i>status</i>, <i>is_found</i> and <i>position</i>
 	 * is updated, otherwise not.
 	 */
-	public void update(CacheHolder ch, boolean overwrite) {
+	public void update(CacheHolder ch) {
 		this.recommendationScore = ch.recommendationScore;
 		this.setNumFoundsSinceRecommendation(ch.getNumFoundsSinceRecommendation());
 		this.setNumRecommended(ch.getNumRecommended());
-		if (overwrite) {
-			this.setCacheStatus(ch.getCacheStatus());
-			this.setFound(ch.is_found());
-			this.pos = ch.pos;
-			this.LatLon = ch.LatLon;
-		} else {
-			/* Here we have to distinguish several cases:
-	   this.is_found       this                ch               Update 'this'
-	   --------------------------------------------------------------------
-	   false               empty               yyyy-mm-dd       yes
-	   true                "Found"             yyyy-mm-dd       yes
-	   true                yyyy-mm-dd          yyyy-mm-dd       no (or yes)
-	   true                yyyy-mm-dd hh:mm    yyyy-mm-dd       no
-	   any                 any                 empty            no
-			 */
-			if (!this.is_found() || this.getCacheStatus().indexOf(":")<0) {
-				// don't overwrite with empty data
-				if (!ch.getCacheStatus().trim().equals("")) {
-					this.setCacheStatus(ch.getCacheStatus());
-				}
-				this.setFound(ch.is_found());
+		boolean mayChangeCoordinates = !this.cacheStatus.startsWith(MyLocale.getMsg(362,"solved"));
+		/* Here we have to distinguish several cases:
+		 * this.is_found       this                ch               Update 'this'
+		 *                                         (values are
+		 *                                     empty or yyyy-mm-dd)
+		 * ----------------------------------------------------------------------
+		 * false               any                 yyyy-mm-dd       yes
+		 * true                "Found"             yyyy-mm-dd       yes
+		 * true                yyyy-mm-dd          yyyy-mm-dd       yes (or no)
+		 * true                yyyy-mm-dd hh:mm    yyyy-mm-dd       no
+		*/
+		if (!this.found || this.cacheStatus.indexOf(":")<0) {
+			// don't overwrite with empty data
+			if (!ch.getCacheStatus().trim().equals("")) {
+				this.setCacheStatus(ch.getCacheStatus());
 			}
-			// Don't overwrite valid coordinates with invalid ones
-			if (ch.pos.isValid() || !this.pos.isValid()) {
+			this.setFound(ch.is_found());
+		}
+		// Don't overwrite valid coordinates with invalid ones
+		if (ch.pos.isValid() || !this.pos.isValid()) {
+			if (mayChangeCoordinates) {
 				this.pos = ch.pos;
 				this.LatLon = ch.LatLon;
 			}



From araber95 at mail.berlios.de  Mon Jul 12 01:45:14 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 12 Jul 2010 01:45:14 PM +0200
Subject: [Cachewolf-svn] r2676 - trunk/src/CacheWolf
Message-ID: <20100712114514.2C7F3480584@sheep.berlios.de>

Author: araber95
Date: 2010-07-12 13:45:13 +0200 (Mon, 12 Jul 2010)
New Revision: 2676

Modified:
   trunk/src/CacheWolf/myTableControl.java
Log:
avoiding a NPE

Modified: trunk/src/CacheWolf/myTableControl.java
===================================================================
--- trunk/src/CacheWolf/myTableControl.java	2010-07-12 09:31:02 UTC (rev 2675)
+++ trunk/src/CacheWolf/myTableControl.java	2010-07-12 11:45:13 UTC (rev 2676)
@@ -377,6 +377,7 @@
 
 	public void startDragging(DragContext dc) {
 		 Point p=cellAtPoint(dc.start.x,dc.start.y,null);
+		 if (p==null) {super.startDragging(dc); return;}
 		 wayPoint=null;
 		 if (p.y>=0) {
 			if (!Global.mainForm.cacheListVisible) {



From araber95 at mail.berlios.de  Mon Jul 12 01:46:26 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 12 Jul 2010 01:46:26 PM +0200
Subject: [Cachewolf-svn] r2677 - trunk/src/CacheWolf
Message-ID: <20100712114626.7624D480584@sheep.berlios.de>

Author: araber95
Date: 2010-07-12 13:46:26 +0200 (Mon, 12 Jul 2010)
New Revision: 2677

Modified:
   trunk/src/CacheWolf/CacheHolder.java
Log:
Correct reading of higher attributs.

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-07-12 11:45:13 UTC (rev 2676)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-07-12 11:46:26 UTC (rev 2677)
@@ -370,7 +370,6 @@
 				        if (start > -1 && end > -1)
 				        	attribsBits[2]=(Convert.parseLong(xmlString.substring(start + 1, end)));
 			        }
-			        setAttribsAsBits(attribsBits);
 			        
 		            start = xmlString.indexOf('"', end + 1);
 		            end = xmlString.indexOf('"', start + 1);
@@ -383,6 +382,17 @@
 		            } else {
 		            	long2byteFields(Convert.parseLong(xmlString.substring(start + 1, end)));
 		            }
+		            start = xmlString.indexOf('"', end + 1);
+		            end = xmlString.indexOf('"', start + 1);
+			        if (start > -1 && end > -1) {
+			        	attribsBits[1]=(Convert.parseLong(xmlString.substring(start + 1, end)));
+	
+				        start = xmlString.indexOf('"', end + 1);
+				        end = xmlString.indexOf('"', start + 1);
+				        if (start > -1 && end > -1)
+				        	attribsBits[3]=(Convert.parseLong(xmlString.substring(start + 1, end)));
+			        }
+			        setAttribsAsBits(attribsBits);
 	            }
 				if (version < Profile.CURRENTFILEFORMAT) {
 		            // forceload of details, creates waypoint.xml if missing



From araber95 at mail.berlios.de  Mon Jul 12 04:07:02 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 12 Jul 2010 04:07:02 PM +0200
Subject: [Cachewolf-svn] r2678 - in trunk/src/CacheWolf: . exp imp
Message-ID: <20100712140703.077844805B1@sheep.berlios.de>

Author: araber95
Date: 2010-07-12 16:07:02 +0200 (Mon, 12 Jul 2010)
New Revision: 2678

Modified:
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/CacheHolderDetail.java
   trunk/src/CacheWolf/CacheType.java
   trunk/src/CacheWolf/DetailsPanel.java
   trunk/src/CacheWolf/Filter.java
   trunk/src/CacheWolf/FilterScreen.java
   trunk/src/CacheWolf/exp/GPXExporter.java
   trunk/src/CacheWolf/imp/GPXImporter.java
Log:
doing some things better. ex. on StatusFilter

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-07-12 11:46:26 UTC (rev 2677)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-07-12 14:07:02 UTC (rev 2678)
@@ -618,18 +618,14 @@
 		varParams.put("LATLON", (pos!=null && pos.isValid())?LatLon:"unknown");
 		varParams.put("LAT", decSep.replaceAll(pos.getLatDeg(CWPoint.DD)));
 		varParams.put("LON", decSep.replaceAll(pos.getLonDeg(CWPoint.DD)));		
-		if (withFoundText && cacheStatus.length()>=10 && cacheStatus.charAt(4)=='-') {
-			int msgNr=318; // normal found			
-			if (type == CacheType.CW_TYPE_WEBCAM) { msgNr=361;}
-			else if (type == CacheType.CW_TYPE_EVENT 
-					|| type == CacheType.CW_TYPE_MEGA_EVENT) { msgNr=355;}
-			varParams.put("STATUS",MyLocale.getMsg(msgNr,"Found")+" "+cacheStatus);
+		if (withFoundText) {
+			varParams.put("STATUS",getStatusText());
 		}
 		else
 			varParams.put("STATUS", cacheStatus);
-		varParams.put("GC_LOGTYPE", GetGCLogType());
-		varParams.put("STATUS_DATE", GetStatusDate());
-		varParams.put("STATUS_TIME", GetStatusTime());
+		varParams.put("GC_LOGTYPE", getGCLogType());
+		varParams.put("STATUS_DATE", getStatusDate());
+		varParams.put("STATUS_TIME", getStatusTime());
 		varParams.put("DATE", dateHidden);
 		varParams.put("CACHE_NAME", cacheName);
 		if (codec instanceof AsciiCodec) { cacheName=Exporter.simplifyString(cacheName);} // use for "NAME"
@@ -1058,8 +1054,30 @@
             }
 		}
 	}
+	
+	public String getFoundText() {
+		int msgNr=318; // normal found			 
+		if (type == CacheType.CW_TYPE_WEBCAM) { msgNr=361;}
+		else if (type == CacheType.CW_TYPE_EVENT 
+				|| type == CacheType.CW_TYPE_MEGA_EVENT) { msgNr=355;}
+		return MyLocale.getMsg(msgNr, "Found");
+	}
+	
+	public String getStatusText() {
+		if ((cacheStatus.length() == 10 || cacheStatus.length() == 16) &&
+				cacheStatus.charAt(4) == '-') {
+			return getFoundText() + " " + cacheStatus;			
+		} else {
+			if (found) {
+				return getFoundText();
+			}
+			else {
+				return cacheStatus;
+			}
+		}
+	}
 
-	public String GetStatusDate() {
+	public String getStatusDate() {
 		String statusDate = "";
 		
 		if (is_found() || getCacheStatus().indexOf(MyLocale.getMsg(319,"not found"))>10) {
@@ -1073,7 +1091,7 @@
 		return statusDate;		
 	}
 	
-	public String GetStatusTime() {
+	public String getStatusTime() {
 		String statusTime = "";
 
 		if (is_found() || getCacheStatus().indexOf(MyLocale.getMsg(319,"not found"))>10) {
@@ -1159,7 +1177,7 @@
 		return ret;
 	}
 	
-	public String GetGCLogType() {                                                                                
+	public String getGCLogType() {                                                                                
 		String gcLogType=_logType[IDX_WRITENOTE][GC_MSG];
 		if (is_found()) {
 			String msgNr="318"; // normal found			

Modified: trunk/src/CacheWolf/CacheHolderDetail.java
===================================================================
--- trunk/src/CacheWolf/CacheHolderDetail.java	2010-07-12 11:46:26 UTC (rev 2677)
+++ trunk/src/CacheWolf/CacheHolderDetail.java	2010-07-12 14:07:02 UTC (rev 2678)
@@ -108,11 +108,7 @@
 			// flags
 			CacheHolder ch = getParent();
 			if (ch.is_found() && ch.getCacheStatus().equals("")) {
-				int msgNr=318; // normal found			 
-				if (ch.getType() == CacheType.CW_TYPE_WEBCAM) { msgNr=361;}
-				else if (ch.getType() == CacheType.CW_TYPE_EVENT 
-						|| ch.getType() == CacheType.CW_TYPE_MEGA_EVENT) { msgNr=355;}
-				ch.setCacheStatus(MyLocale.getMsg(msgNr,"Found"));
+				ch.setCacheStatus(ch.getFoundText());
 			}
 			//travelbugs:GPX-File contains all actual travelbugs but not the missions
 			// we need to check whether the travelbug is already in the existing list

Modified: trunk/src/CacheWolf/CacheType.java
===================================================================
--- trunk/src/CacheWolf/CacheType.java	2010-07-12 11:46:26 UTC (rev 2677)
+++ trunk/src/CacheWolf/CacheType.java	2010-07-12 14:07:02 UTC (rev 2678)
@@ -110,39 +110,39 @@
 	String[] ggpx={"Geocache|Custom","Custom","Custom",""};
 	private static final CTyp[] cTypRef = {
 		// custom waypoints
-		new CTyp((byte) 0,(byte) 0,'P',"0","","",(byte) -128,'C',"typeCustom.png",new String[] {"Geocache|Custom","Custom","Custom",""},1,0,10,0x000100),
+		new CTyp(CW_TYPE_CUSTOM,CW_TYPE_CUSTOM,'P',"0","","",(byte) -128,'C',"typeCustom.png",new String[] {"Geocache|Custom","Custom","Custom",""},1,0,10,0x000100),
 		// Cache waypoints
-		new CTyp((byte) 2,(byte) 2,'C',"2","2","2",(byte) -126,'T',"typeTradi.png",new String[] {"Geocache|Traditional Cache","Geocache","Traditional Cache","Traditional|Classic"},2,1,0,0x000001),
-		new CTyp((byte) 3,(byte) 3,'C',"3","3","3",(byte) -125,'M',"typeMulti.png",new String[] {"Geocache|Multi-cache","Geocache","Multi-cache","Multi|Offset"},3,2,1,0x000002),
-		new CTyp((byte) 4,(byte) 4,'C',"4","4","4",(byte) -124,'V',"typeVirtual.png",new String[] {"Geocache|Virtual Cache","Geocache","Virtual Cache","Virtual"},4,3,2,0x000004),
-		new CTyp((byte) 5,(byte) 5,'C',"5","5","",(byte) -123,'L',"typeLetterbox.png",new String[] {"Geocache|Letterbox Hybrid","Geocache","Letterbox Hybrid","Letterbox"},5,4,3,0x000008),
-		new CTyp((byte) 6,(byte) 6,'C',"6","6","6",(byte) -122,'X',"typeEvent.png",new String[] {"Geocache|Event Cache","Geocache","Event Cache","Event"},6,5,4,0x000010),
-		new CTyp((byte) 100,(byte) 100,'C',"453","453","",(byte) 101,'X',"typeMegaevent.png",new String[] {"Geocache|Mega-Event Cache","Geocache","Mega-Event Cache","Mega"},14,6,9,0x000200),
-		new CTyp((byte) 11,(byte) 11,'C',"11","11","5",(byte) -117,'W',"typeWebcam.png",new String[] {"Geocache|Webcam Cache","Geocache","Webcam Cache","Webcam"},11,7,5,0x000020),
-		new CTyp((byte) 8,(byte) 8,'C',"8","8","",(byte) -120,'U',"typeUnknown.png",new String[] {"Geocache|Unknown Cache","Geocache","Unknown Cache","Mystery"},8,8,6,0x000040),
-		new CTyp((byte) 12,(byte) 12,'C',"12","12","",(byte) -116,'O',"typeLocless.png",new String[] {"Geocache|Locationless (Reverse) Cache","Geocache","Locationless (Reverse) Cache","Locationless"},12,9,8,0x000080),
-		new CTyp((byte) 13,(byte) 13,'C',"13","13","",(byte) -115,'X',"typeCito.png",new String[] {"Geocache|Cache In Trash Out Event","Geocache","Cache In Trash Out Event","CITO"},13,10,17,0x020000),
-		new CTyp((byte) 104,(byte) 104,'C',"137","137","",(byte) 9,'E',"typeEarth.png",new String[] {"Geocache|Earthcache","Geocache","Earthcache","Earth"},18,11,7,0x000400),
-		new CTyp((byte) 101,(byte) 101,'C',"1858","1858","",(byte) 100,'G',"typeWhereigo.png",new String[] {"Geocache|Wherigo Cache","Geocache","Wherigo Cache","Wherigo"},15,12,18,0x040000),
+		new CTyp(CW_TYPE_TRADITIONAL,CW_TYPE_TRADITIONAL,'C',"2","2","2",(byte) -126,'T',"typeTradi.png",new String[] {"Geocache|Traditional Cache","Geocache","Traditional Cache","Traditional|Classic"},2,1,0,0x000001),
+		new CTyp(CW_TYPE_MULTI,CW_TYPE_MULTI,'C',"3","3","3",(byte) -125,'M',"typeMulti.png",new String[] {"Geocache|Multi-cache","Geocache","Multi-cache","Multi|Offset"},3,2,1,0x000002),
+		new CTyp(CW_TYPE_VIRTUAL,CW_TYPE_VIRTUAL,'C',"4","4","4",(byte) -124,'V',"typeVirtual.png",new String[] {"Geocache|Virtual Cache","Geocache","Virtual Cache","Virtual"},4,3,2,0x000004),
+		new CTyp(CW_TYPE_LETTERBOX,CW_TYPE_LETTERBOX,'C',"5","5","",(byte) -123,'L',"typeLetterbox.png",new String[] {"Geocache|Letterbox Hybrid","Geocache","Letterbox Hybrid","Letterbox"},5,4,3,0x000008),
+		new CTyp(CW_TYPE_EVENT,CW_TYPE_EVENT,'C',"6","6","6",(byte) -122,'X',"typeEvent.png",new String[] {"Geocache|Event Cache","Geocache","Event Cache","Event"},6,5,4,0x000010),
+		new CTyp(CW_TYPE_MEGA_EVENT,CW_TYPE_MEGA_EVENT,'C',"453","453","",(byte) 101,'X',"typeMegaevent.png",new String[] {"Geocache|Mega-Event Cache","Geocache","Mega-Event Cache","Mega"},14,6,9,0x000200),
+		new CTyp(CW_TYPE_WEBCAM,CW_TYPE_WEBCAM,'C',"11","11","5",(byte) -117,'W',"typeWebcam.png",new String[] {"Geocache|Webcam Cache","Geocache","Webcam Cache","Webcam"},11,7,5,0x000020),
+		new CTyp(CW_TYPE_UNKNOWN,CW_TYPE_UNKNOWN,'C',"8","8","",(byte) -120,'U',"typeUnknown.png",new String[] {"Geocache|Unknown Cache","Geocache","Unknown Cache","Mystery"},8,8,6,0x000040),
+		new CTyp(CW_TYPE_LOCATIONLESS,CW_TYPE_LOCATIONLESS,'C',"12","12","",(byte) -116,'O',"typeLocless.png",new String[] {"Geocache|Locationless (Reverse) Cache","Geocache","Locationless (Reverse) Cache","Locationless"},12,9,8,0x000080),
+		new CTyp(CW_TYPE_CITO,CW_TYPE_CITO,'C',"13","13","",(byte) -115,'X',"typeCito.png",new String[] {"Geocache|Cache In Trash Out Event","Geocache","Cache In Trash Out Event","CITO"},13,10,17,0x020000),
+		new CTyp(CW_TYPE_EARTH,CW_TYPE_EARTH,'C',"137","137","",(byte) 9,'E',"typeEarth.png",new String[] {"Geocache|Earthcache","Geocache","Earthcache","Earth"},18,11,7,0x000400),
+		new CTyp(CW_TYPE_WHEREIGO,CW_TYPE_WHEREIGO,'C',"1858","1858","",(byte) 100,'G',"typeWhereigo.png",new String[] {"Geocache|Wherigo Cache","Geocache","Wherigo Cache","Wherigo"},15,12,18,0x040000),
 		// additional waypoints
-		new CTyp((byte) 50,(byte) 50,'A',"50","","",(byte) -78,'P',"typeParking.png",new String[] {"Waypoint|Parking Area","Parking Area","Parking Area",""},50,13,11,0x000800),
-		new CTyp((byte) 51,(byte) 51,'A',"51","","",(byte) -77,'S',"typeStage.png",new String[] {"Waypoint|Stages of a Multicache","Stages of a Multicache","Stages of a Multicache",""},51,14,12,0x001000),
-		new CTyp((byte) 52,(byte) 52,'A',"52","","",(byte) -76,'Q',"typeQuestion.png",new String[] {"Waypoint|Question to Answer","Question to Answer","Question to Answer",""},52,15,13,0x002000),
-		new CTyp((byte) 53,(byte) 53,'A',"53","","",(byte) -75,'F',"typeFinal.png",new String[] {"Waypoint|Final Location","Final Location","Final Location",""},53,16,14,0x004000),
-		new CTyp((byte) 54,(byte) 54,'A',"54","","",(byte) -74,'H',"typeTrailhead.png",new String[] {"Waypoint|Trailhead","Trailhead","Trailhead",""},54,17,15,0x008000),
-		new CTyp((byte) 55,(byte) 55,'A',"55","","",(byte) -73,'R',"typeReference.png",new String[] {"Waypoint|Reference Point","Reference Point","Reference Point",""},55,18,16,0x010000),
+		new CTyp(CW_TYPE_PARKING,CW_TYPE_PARKING,'A',"50","","",(byte) -78,'P',"typeParking.png",new String[] {"Waypoint|Parking Area","Parking Area","Parking Area",""},50,13,11,0x000800),
+		new CTyp(CW_TYPE_STAGE,CW_TYPE_STAGE,'A',"51","","",(byte) -77,'S',"typeStage.png",new String[] {"Waypoint|Stages of a Multicache","Stages of a Multicache","Stages of a Multicache",""},51,14,12,0x001000),
+		new CTyp(CW_TYPE_QUESTION,CW_TYPE_QUESTION,'A',"52","","",(byte) -76,'Q',"typeQuestion.png",new String[] {"Waypoint|Question to Answer","Question to Answer","Question to Answer",""},52,15,13,0x002000),
+		new CTyp(CW_TYPE_FINAL,CW_TYPE_FINAL,'A',"53","","",(byte) -75,'F',"typeFinal.png",new String[] {"Waypoint|Final Location","Final Location","Final Location",""},53,16,14,0x004000),
+		new CTyp(CW_TYPE_TRAILHEAD,CW_TYPE_TRAILHEAD,'A',"54","","",(byte) -74,'H',"typeTrailhead.png",new String[] {"Waypoint|Trailhead","Trailhead","Trailhead",""},54,17,15,0x008000),
+		new CTyp(CW_TYPE_REFERENCE,CW_TYPE_REFERENCE,'A',"55","","",(byte) -73,'R',"typeReference.png",new String[] {"Waypoint|Reference Point","Reference Point","Reference Point",""},55,18,16,0x010000),
 		// error on waypoint
-		new CTyp((byte) -1,(byte) -1,'E',"","","",(byte) -1,'-',"guiError.png",new String[] {"","","",""},49,-1,-1,0),
+		new CTyp(CW_TYPE_ERROR,CW_TYPE_ERROR,'E',"","","",(byte) -1,'-',"guiError.png",new String[] {"","","",""},49,-1,-1,0),
         // mapped types (recognized on input from gpx or download-spider / or cw - version)                 
-		new CTyp((byte) 8,(byte) 1,'C',"","","1",(byte) -1,'U',"",new String[] {"Geocache|Other","Geocache","Other","Other"},21,-1,-1,0),
-		new CTyp((byte) 8,(byte) 7,'C',"7","","7",(byte) -121,'U',"",new String[] {"Geocache|Quiz","Geocache","Quiz","Quiz"},7,-1,-1,0),
-		new CTyp((byte) 8,(byte) 9,'C',"9","","9",(byte) -119,'U',"",new String[] {"Geocache|Moving","Geocache","Moving","Moving"},9,-1,-1,0),
-		new CTyp((byte) 2,(byte) 10,'C',"10","","10",(byte) -118,'U',"",new String[] {"Geocache|DriveIn","Geocache","DriveIn","DriveIn"},10,-1,-1,0),
-		new CTyp((byte) 6,(byte) 14,'C',"","3653","",(byte) -1,'X',"",new String[] {"Geocache|Lost and Found Event Cache","Geocache","Lost and Found Event Cache",""},6,-1,-1,0),		         
-		new CTyp((byte) 2,(byte) 102,'C',"","9","",(byte) -1,'T',"",new String[] {"Geocache|Project APE Cache","Geocache","Project APE Cache","APE"},16,-1,-1,0),
-		new CTyp((byte) 6,(byte) 103,'C',"","1304","",(byte) -1,'X',"",new String[] {"Geocache|GPS Adventures Exhibit","Geocache","GPS Adventures Exhibit","MAZE"},17,-1,-1,0),
-		new CTyp((byte) 8,(byte) 108,'C',"","","8",(byte) -1,'U',"",new String[] {"only on OC download","","",""},19,-1,-1,0),
-		new CTyp((byte) 101,(byte) 15,'C',"","","",(byte) -62,'G',"",new String[] {"Hack for V2 Typ","","",""},-1,-1,-1,0),
+		new CTyp(CW_TYPE_UNKNOWN,(byte) 1,'C',"","","1",(byte) -1,'U',"",new String[] {"Geocache|Other","Geocache","Other","Other"},21,-1,-1,0),
+		new CTyp(CW_TYPE_UNKNOWN,(byte) 7,'C',"7","","7",(byte) -121,'U',"",new String[] {"Geocache|Quiz","Geocache","Quiz","Quiz"},7,-1,-1,0),
+		new CTyp(CW_TYPE_UNKNOWN,(byte) 9,'C',"9","","9",(byte) -119,'U',"",new String[] {"Geocache|Moving","Geocache","Moving","Moving"},9,-1,-1,0),
+		new CTyp(CW_TYPE_TRADITIONAL,(byte) 10,'C',"10","","10",(byte) -118,'U',"",new String[] {"Geocache|DriveIn","Geocache","DriveIn","DriveIn"},10,-1,-1,0),
+		new CTyp(CW_TYPE_EVENT,(byte) 14,'C',"","3653","",(byte) -1,'X',"",new String[] {"Geocache|Lost and Found Event Cache","Geocache","Lost and Found Event Cache",""},6,-1,-1,0),		         
+		new CTyp(CW_TYPE_TRADITIONAL,(byte) 102,'C',"","9","",(byte) -1,'T',"",new String[] {"Geocache|Project APE Cache","Geocache","Project APE Cache","APE"},16,-1,-1,0),
+		new CTyp(CW_TYPE_EVENT,(byte) 103,'C',"","1304","",(byte) -1,'X',"",new String[] {"Geocache|GPS Adventures Exhibit","Geocache","GPS Adventures Exhibit","MAZE"},17,-1,-1,0),
+		new CTyp(CW_TYPE_UNKNOWN,(byte) 108,'C',"","","8",(byte) -1,'U',"",new String[] {"only on OC download","","",""},19,-1,-1,0),
+		new CTyp(CW_TYPE_WHEREIGO,(byte) 15,'C',"","","",(byte) -62,'G',"",new String[] {"Hack for V2 Typ","","",""},-1,-1,-1,0),
 	};
 	// public static final int anzCacheTyps=cTypRef.length;
 	public static final byte maxCWCType=110;

Modified: trunk/src/CacheWolf/DetailsPanel.java
===================================================================
--- trunk/src/CacheWolf/DetailsPanel.java	2010-07-12 11:46:26 UTC (rev 2677)
+++ trunk/src/CacheWolf/DetailsPanel.java	2010-07-12 14:07:02 UTC (rev 2678)
@@ -330,24 +330,7 @@
 		btnCoordinates.setText(ch.pos.toString());
 		inpHidden.setText(mainCache.getDateHidden());
 		inpOwner.setText(mainCache.getCacheOwner());
-
-		int msgNr=318; // normal found
-    	if (cache.getType() == CacheType.CW_TYPE_WEBCAM) { msgNr=361;}
-    	else if (cache.getType() == CacheType.CW_TYPE_EVENT 
-    			|| cache.getType() == CacheType.CW_TYPE_MEGA_EVENT) { msgNr=355;}
-
-		if ((cache.getCacheStatus().length() == 10 || cache.getCacheStatus().length() == 16) &&
-				cache.getCacheStatus().charAt(4) == '-') {
-			// todo found text for webcam or event
-			chcStatus.setText(MyLocale.getMsg(msgNr, "Found") + " " + ch.getCacheStatus());			
-		} else {
-			chcStatus.setText(ch.getCacheStatus());
-			// If the cache status contains a date, do not overwrite it with
-			// 'found' message
-			if (ch.is_found()) {
-				chcStatus.setText(MyLocale.getMsg(msgNr, "Found"));
-			}
-		}
+		chcStatus.setText(cache.getStatusText());
 		chcType.setInt(CacheType.cw2GuiSelect(ch.getType()));
 		if (ch.is_black()) {
 			btnBlack.image = imgBlack;

Modified: trunk/src/CacheWolf/Filter.java
===================================================================
--- trunk/src/CacheWolf/Filter.java	2010-07-12 11:46:26 UTC (rev 2677)
+++ trunk/src/CacheWolf/Filter.java	2010-07-12 14:07:02 UTC (rev 2678)
@@ -509,13 +509,13 @@
 	        ///////////////////////////////
 	        if (!cacheStatus.equals("")) {
 	        	if (!useRegexp) {
-	        		if (ch.getCacheStatus().toLowerCase().indexOf(cacheStatus.toLowerCase())<0) {
+	        		if (ch.getStatusText().toLowerCase().indexOf(cacheStatus.toLowerCase())<0) {
 	        			cacheFiltered = true;
 	        			break;
 	        		}
 	        	} else {
 	        		Regex rex=new Regex(cacheStatus.toLowerCase());
-	        		rex.search(ch.getCacheStatus().toLowerCase());
+	        		rex.search(ch.getStatusText().toLowerCase());
 	        		if (rex.stringMatched()==null) {
 	        			cacheFiltered = true;
 	        			break;

Modified: trunk/src/CacheWolf/FilterScreen.java
===================================================================
--- trunk/src/CacheWolf/FilterScreen.java	2010-07-12 11:46:26 UTC (rev 2677)
+++ trunk/src/CacheWolf/FilterScreen.java	2010-07-12 14:07:02 UTC (rev 2678)
@@ -156,7 +156,7 @@
 		pnlAttributes.addLast(chkNotOwned = new mCheckBox(MyLocale.getMsg(732,"Anderer Besitzer")), CellConstants.DONTSTRETCH, CellConstants.FILL);
 
 		pnlAttributes.addNext(new mLabel(MyLocale.getMsg(307,"Status:")),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.WEST));
-		pnlAttributes.addLast(chcStatus = new mComboBox(new String[]{"", MyLocale.getMsg(313,"Flag 1"), MyLocale.getMsg(314,"Flag 2"), MyLocale.getMsg(315,"Flag 3"), MyLocale.getMsg(316,"Flag 4"), MyLocale.getMsg(317,"Search"), MyLocale.getMsg(318,"Found"), MyLocale.getMsg(319,"Not Found"), MyLocale.getMsg(320,"Owner")},0),CellConstants.HSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
+		pnlAttributes.addLast(chcStatus = new mComboBox(CacheHolder.GetGuiLogTypes(),0),CellConstants.HSTRETCH, (CellConstants.HFILL|CellConstants.WEST));
 		pnlAttributes.addLast(chkUseRegexp = new mCheckBox(MyLocale.getMsg(299,"Regular expression")));
 		
 		//////////////////////////

Modified: trunk/src/CacheWolf/exp/GPXExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/GPXExporter.java	2010-07-12 11:46:26 UTC (rev 2677)
+++ trunk/src/CacheWolf/exp/GPXExporter.java	2010-07-12 14:07:02 UTC (rev 2678)
@@ -103,7 +103,7 @@
 					} else {
 						strBuf.append("        <groundspeak:log id=\"" ).append( Integer.toString(counter) ).append( "\">\r\n");
 					}
-					strBuf.append("          <groundspeak:date>").append(SafeXML.cleanGPX(ch.GetStatusDate())).append("T").append(SafeXML.cleanGPX(ch.GetStatusTime())).append(":00</groundspeak:date>\r\n");
+					strBuf.append("          <groundspeak:date>").append(SafeXML.cleanGPX(ch.getStatusDate())).append("T").append(SafeXML.cleanGPX(ch.getStatusTime())).append(":00</groundspeak:date>\r\n");
 					if ( det.OwnLog != null ) {
 						strBuf.append("          <groundspeak:type>").append(image2TypeText(det.OwnLog.getIcon())).append("</groundspeak:type>\r\n");
 					} else {

Modified: trunk/src/CacheWolf/imp/GPXImporter.java
===================================================================
--- trunk/src/CacheWolf/imp/GPXImporter.java	2010-07-12 11:46:26 UTC (rev 2677)
+++ trunk/src/CacheWolf/imp/GPXImporter.java	2010-07-12 14:07:02 UTC (rev 2678)
@@ -357,7 +357,7 @@
 		}
 		if (name.equals("sym")&& strData.endsWith("Found")) {
 			holder.setFound(true);
-			holder.setCacheStatus(MyLocale.getMsg(318,"Found"));
+			holder.setCacheStatus(holder.getFoundText());
 			return;
 		}
 		if (name.equals("groundspeak:travelbugs")) {



From araber95 at mail.berlios.de  Mon Jul 12 09:57:52 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 12 Jul 2010 09:57:52 PM +0200
Subject: [Cachewolf-svn] r2679 - trunk/src/CacheWolf
Message-ID: <20100712195752.E8D66480AB7@sheep.berlios.de>

Author: araber95
Date: 2010-07-12 21:57:52 +0200 (Mon, 12 Jul 2010)
New Revision: 2679

Modified:
   trunk/src/CacheWolf/MainMenu.java
Log:
removed gpx-exporter (old one)

Modified: trunk/src/CacheWolf/MainMenu.java
===================================================================
--- trunk/src/CacheWolf/MainMenu.java	2010-07-12 14:07:02 UTC (rev 2678)
+++ trunk/src/CacheWolf/MainMenu.java	2010-07-12 19:57:52 UTC (rev 2679)
@@ -103,26 +103,26 @@
 		///////////////////////////////////////////////////////////////////////
 		// subMenu for export, part of "Application" menu below
 		///////////////////////////////////////////////////////////////////////
-		MenuItem[] exitems = new MenuItem[14];
+		MenuItem[] exitems = new MenuItem[13];
 		//Vm.debug("Hi in MainMenu "+lr);
 		exitems[0] = exporthtml = new MenuItem(MyLocale.getMsg(100,"to HTML"));
 		exitems[1] = exportGpxNg = new MenuItem(MyLocale.getMsg(101,"to GPX Test"));
 		exitems[2] = exporttop50 = new MenuItem(MyLocale.getMsg(102,"to TOP50 ASCII"));
-		exitems[3] = exportGPX = new MenuItem(MyLocale.getMsg(103,"to GPX"));
-		exitems[4] = exportASC = new MenuItem(MyLocale.getMsg(104,"to CSV"));
-		exitems[5] = exportTomTom = new MenuItem(MyLocale.getMsg(105,"to TomTom"));
-		exitems[6] = exportMSARCSV = new MenuItem(MyLocale.getMsg(106,"to MS AutoRoute CSV"));
-		exitems[7] = exportLOC = new MenuItem(MyLocale.getMsg(215,"to LOC"));
-		exitems[8] = exportGPS = new MenuItem(MyLocale.getMsg(122,"to GPS"));
+		// exitems[3] = exportGPX = new MenuItem(MyLocale.getMsg(103,"to GPX"));
+		exitems[3] = exportASC = new MenuItem(MyLocale.getMsg(104,"to CSV"));
+		exitems[4] = exportTomTom = new MenuItem(MyLocale.getMsg(105,"to TomTom"));
+		exitems[5] = exportMSARCSV = new MenuItem(MyLocale.getMsg(106,"to MS AutoRoute CSV"));
+		exitems[6] = exportLOC = new MenuItem(MyLocale.getMsg(215,"to LOC"));
+		exitems[7] = exportGPS = new MenuItem(MyLocale.getMsg(122,"to GPS"));
 		if ( Global.getPref().gpsbabel == null ) {
 			exportGPS.modifiers = MenuItem.Disabled;
 			exportGPS.setText(MyLocale.getMsg(136,"to GPS : gpsbabel missing."));
 		}
-		exitems[9] = exportOZI = new MenuItem(MyLocale.getMsg(124,"to OZI"));
-		exitems[10] = exportKML = new MenuItem(MyLocale.getMsg(125,"to Google Earth"));
-		exitems[11] = exportExplorist = new MenuItem(MyLocale.getMsg(132,"to Explorist"));
-		exitems[12] = exportTPL = new MenuItem(MyLocale.getMsg(128,"via Template"));
-		exitems[13] = exportSpoilerPOI = new MenuItem(MyLocale.getMsg(135,"to SpoilerPOI"));
+		exitems[8] = exportOZI = new MenuItem(MyLocale.getMsg(124,"to OZI"));
+		exitems[9] = exportKML = new MenuItem(MyLocale.getMsg(125,"to Google Earth"));
+		exitems[10] = exportExplorist = new MenuItem(MyLocale.getMsg(132,"to Explorist"));
+		exitems[11] = exportTPL = new MenuItem(MyLocale.getMsg(128,"via Template"));
+		exitems[12] = exportSpoilerPOI = new MenuItem(MyLocale.getMsg(135,"to SpoilerPOI"));
 
 		Menu exportMenu = new Menu(exitems, MyLocale.getMsg(107,"Export"));
 



From admin at berlios.de  Mon Jul 12 22:13:53 2010
From: admin at berlios.de (admin at berlios.de)
Date: Mon, 12 Jul 2010 22:13:53 +0200 (CEST)
Subject: [Cachewolf-svn] [Bug #17270] Auswertung der gc.com Spracheinstellung
Message-ID: <201007122013.o6CKDrOO026943@unicorn.berlios.de>

Bug #17270, was updated on 2010-Jun-16 12:23
Here is a current snapshot of the bug.

Project: CacheWolf
Category: Import/Export
Status: Closed
Resolution: Fixed
Bug Group: Feature Request
Priority: 5
Submitted by: araber95
Assigned to : mik77
Summary: Auswertung der gc.com Spracheinstellung

Details: Implementierung Code f?r die Auswertung der Spracheinstellung bei gc.com.

spider.def muss wohl dann mit Sprachkennzeichen versehen werden.


Follow-Ups:

Date: 2010-Jul-12 22:13
By: araber95

Comment:
scheint wohl zu tun
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17270&group_id=2211


From araber95 at mail.berlios.de  Tue Jul 13 12:18:55 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Tue, 13 Jul 2010 12:18:55 AM +0200
Subject: [Cachewolf-svn] r2680 - in trunk: res_noewe/attributes
	res_noewe/languages src/CacheWolf
Message-ID: <20100712221855.3DA61480AB7@sheep.berlios.de>

Author: araber95
Date: 2010-07-13 00:18:54 +0200 (Tue, 13 Jul 2010)
New Revision: 2680

Added:
   trunk/res_noewe/attributes/field_puzzle-no.gif
   trunk/res_noewe/attributes/field_puzzle-non.gif
   trunk/res_noewe/attributes/field_puzzle-yes.gif
   trunk/res_noewe/attributes/rv-no.gif
   trunk/res_noewe/attributes/rv-non.gif
   trunk/res_noewe/attributes/rv-yes.gif
Modified:
   trunk/res_noewe/languages/DE.cfg
   trunk/res_noewe/languages/EN.cfg
   trunk/res_noewe/languages/FR.cfg
   trunk/res_noewe/languages/NL.cfg
   trunk/res_noewe/languages/PL.cfg
   trunk/res_noewe/languages/SV.cfg
   trunk/src/CacheWolf/Attribute.java
Log:
2 new gc attributes : rv and field_puzzle

Added: trunk/res_noewe/attributes/field_puzzle-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/field_puzzle-no.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/field_puzzle-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/field_puzzle-non.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/field_puzzle-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/field_puzzle-yes.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/rv-no.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/rv-no.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/rv-non.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/rv-non.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Added: trunk/res_noewe/attributes/rv-yes.gif
===================================================================
(Binary files differ)


Property changes on: trunk/res_noewe/attributes/rv-yes.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Modified: trunk/res_noewe/languages/DE.cfg
===================================================================
--- trunk/res_noewe/languages/DE.cfg	2010-07-12 19:57:52 UTC (rev 2679)
+++ trunk/res_noewe/languages/DE.cfg	2010-07-12 22:18:54 UTC (rev 2680)
@@ -750,6 +750,10 @@
 		2650=Hyperlink zu GC,...
 		2651=geh%f6rt nicht zur "Lost and Found" Tour
 		2652=geh%f6rt zur "Lost and Found" Tour
+		2653=kein Wohnmobilstellpatz verf%fcgbar
+		2654=Wohnmobilstellpatz verf%fcgbar
+		2655=kein R%e4tsel vor Ort l%f6sen
+		2656=R%e4tsel vor Ort l%f6sen
 		3000=Schlie%dfen
 		4000=Geladene Caches:+
 		4001=GPX-Dateien von Opencaching enthalten keine Informationen zu Bildern, sie werden nicht heruntergeladen. Am besten Caches von Opencaching holen per Men%fc /Anwendung/Import/von Opencaching

Modified: trunk/res_noewe/languages/EN.cfg
===================================================================
--- trunk/res_noewe/languages/EN.cfg	2010-07-12 19:57:52 UTC (rev 2679)
+++ trunk/res_noewe/languages/EN.cfg	2010-07-12 22:18:54 UTC (rev 2680)
@@ -750,6 +750,10 @@
 		2650=hyperlink to GC,...
 		2651=no loast and found tour
 		2652=lost and found tour
+		2653=no truck driver/RV
+		2654=truck driver/RV
+		2655=no field puzzle
+		2656=field puzzle
 		3000=Close
 		4000=Loaded caches:+
 		4001=GPX files from opencaching don't contain information of images, they cannot be loaded. Best you get caches from opencaching by menu /Application/Import/Download from Opencaching

Modified: trunk/res_noewe/languages/FR.cfg
===================================================================
--- trunk/res_noewe/languages/FR.cfg	2010-07-12 19:57:52 UTC (rev 2679)
+++ trunk/res_noewe/languages/FR.cfg	2010-07-12 22:18:54 UTC (rev 2680)
@@ -750,6 +750,10 @@
 2650 = hyperlink %e0 GC, ...
 		2651=no loast and found tour
 		2652=lost and found tour
+		2653=no truck driver/RV
+		2654=truck driver/RV
+		2655=no field puzzle
+		2656=field puzzle
 		3000=Fermer
 		4000=Caches charg%e9es:
 		4001=GPX fichiers %e0 partir Opencaching ne contiennent pas d'informations d'images, ils ne peuvent pas %eatre charg%e9. Pour le meilleur vous obtenez des caches de Opencaching par le menu /Application/importation/Download from Opencaching

Modified: trunk/res_noewe/languages/NL.cfg
===================================================================
--- trunk/res_noewe/languages/NL.cfg	2010-07-12 19:57:52 UTC (rev 2679)
+++ trunk/res_noewe/languages/NL.cfg	2010-07-12 22:18:54 UTC (rev 2680)
@@ -750,6 +750,10 @@
 2650 = hyperlink naar GC, ...
 		2651=no loast and found tour
 		2652=lost and found tour
+		2653=no truck driver/RV
+		2654=truck driver/RV
+		2655=no field puzzle
+		2656=field puzzle
 		3000=Sluiten
 		4000=Geladen caches
 		4001=GPX bestanden uit opencaching bevatten geen informatie van beelden, kunnen zij niet worden downloaden. Beste je caches van opencaching menu /Application/Import/Download from Opencaching

Modified: trunk/res_noewe/languages/PL.cfg
===================================================================
--- trunk/res_noewe/languages/PL.cfg	2010-07-12 19:57:52 UTC (rev 2679)
+++ trunk/res_noewe/languages/PL.cfg	2010-07-12 22:18:54 UTC (rev 2680)
@@ -750,6 +750,10 @@
 2650 = hiperlacze do GC, ...
 		2651=no loast and found tour
 		2652=lost and found tour
+		2653=no truck driver/RV
+		2654=truck driver/RV
+		2655=no field puzzle
+		2656=field puzzle
                 3000=Zamknij
                 4000=Wczytaj skrzynki:+
                 4001=Pliki GPX z opencaching nie zawieraja informacji o obrazach, nie moga byc one wczytane. Najlepiej pobierz skrzynki z opencaching przez menu /Aplikacja/Importuj/Sciagnij Z Opencaching

Modified: trunk/res_noewe/languages/SV.cfg
===================================================================
--- trunk/res_noewe/languages/SV.cfg	2010-07-12 19:57:52 UTC (rev 2679)
+++ trunk/res_noewe/languages/SV.cfg	2010-07-12 22:18:54 UTC (rev 2680)
@@ -750,6 +750,10 @@
 2650 = hyperl%e4nk till GC, ...
 		2651=no loast and found tour
 		2652=lost and found tour
+		2653=no truck driver/RV
+		2654=truck driver/RV
+		2655=no field puzzle
+		2656=field puzzle
         	3000=St%e4ng
         	4000=Loaded cachar:+
         	4001=GPX filer fr%e5n opencaching inte inneh%e5ller n%e5gon information av bilder, kan de inte laoded. B%e4st du cachar fr%e5n opencaching genom menyn / Application / Import / Download fr%e5n Opencaching

Modified: trunk/src/CacheWolf/Attribute.java
===================================================================
--- trunk/src/CacheWolf/Attribute.java	2010-07-12 19:57:52 UTC (rev 2679)
+++ trunk/src/CacheWolf/Attribute.java	2010-07-12 22:18:54 UTC (rev 2680)
@@ -166,6 +166,7 @@
 		{"23","2548","phone","22","29","Telephone nearby"},//48 telephone nearby
 		{"24","2550","picnic","0","30","Picnic tables nearby"},//50 picnic tables available
 		{"43","2588","firstaid","23","42","Firstaid"}, // GC: Cachewartung notwendig (Auto Attribut) , OC: erste Hilfe 
+		{"73","2654","rv","0","46","Truck Driver/RV"},// changed by Moorteufel 12.07.10 
 		// Erlaubt - Permissions (Allowed/Not Allowed)
 		{"11","2524","dogs","0","1","Dogs"},//24 dogs allowed
 		{"05","2512","camping","0","31","Camping available"},//12 Camping allowed
@@ -234,11 +235,12 @@
 		// Einschr?nkungen und Voraussetzungen / Ben?tigt Vorarbeit
 		{"70","2648","wiki","54","0",""},// 148 Recherche
 		{"63","2630","riddle","55","0",""},// 130 R?tsel
+		{"74","2656","field_puzzle","0","47","Field Puzzle"},// changed by Moorteufel 12.07.10
 		{"47","2596","arith_prob","56","0",""},// 96 Rechenaufgabe
 		{"60","2622","othercache","57","0",""},// 122 besondere Cacheart
 		{"48","2598","ask","58","0",""},// 98 Startbedingungen beim Owner erfragen
 		// !!! todo correct Filter Implementation
-		{"72","2652","landf","45","0","Lost And Found Tour"}, // thx to Kappler and MiK
+		{"72","2652","landf","0","45","Lost And Found Tour"}, // thx to Kappler and MiK
 		// {"-1","2500","error","0","0",""}, //
 
 	};



From araber95 at mail.berlios.de  Wed Jul 14 12:18:40 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 14 Jul 2010 12:18:40 PM +0200
Subject: [Cachewolf-svn] r2681 - trunk/src/CacheWolf
Message-ID: <20100714101840.BB588480BDF@sheep.berlios.de>

Author: araber95
Date: 2010-07-14 12:18:40 +0200 (Wed, 14 Jul 2010)
New Revision: 2681

Modified:
   trunk/src/CacheWolf/Attribute.java
Log:
wrong Attribut-Bit internal representation.
(you must respider caches with attribute numbers > 63 and perhaps if one of these filters was active edit index.xml <FILTERDATA line setting attributesYes1 = "0" attributesNo1 = "0")


Modified: trunk/src/CacheWolf/Attribute.java
===================================================================
--- trunk/src/CacheWolf/Attribute.java	2010-07-12 22:18:54 UTC (rev 2680)
+++ trunk/src/CacheWolf/Attribute.java	2010-07-14 10:18:40 UTC (rev 2681)
@@ -69,7 +69,7 @@
     	if (id>-1) {
         	int b = Integer.parseInt(attRef[id][BIT_NR]);
     		bit[0] = b>63 ? 0l : (1L << b);
-    		bit[1] = b>63 ? (1L << 64-b) : 0;
+    		bit[1] = b>63 ? (1L << b-64) : 0;
     	}
     	else {
         	bit[0]=0;



From araber95 at mail.berlios.de  Wed Jul 14 11:44:33 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 14 Jul 2010 11:44:33 PM +0200
Subject: [Cachewolf-svn] r2682 - trunk/src/CacheWolf/imp
Message-ID: <20100714214434.01A09480C22@sheep.berlios.de>

Author: araber95
Date: 2010-07-14 23:44:33 +0200 (Wed, 14 Jul 2010)
New Revision: 2682

Modified:
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
output of more debug information for download from GC

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-07-14 10:18:40 UTC (rev 2681)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-07-14 21:44:33 UTC (rev 2682)
@@ -348,8 +348,23 @@
 			maxNew=java.lang.Math.min(numFinds-numFoundInDB,maxNew);
 			if (maxUpdate == 0 && maxNew == 0) { Vm.showWait(false); infB.close(0); return; }
 		}
+		boolean loadAllLogs = (pref.maxLogsToSpider > 5) || spiderAllFinds;
 		try {
 			//Loop pages till maximum distance has been found or no more caches are in the list
+			pref.log("Download properties : \n"
+					+ (spiderAllFinds ? "all Finds (DB/GC)"+ numFoundInDB+"/"+numFinds : "new and update Caches") + "\n"
+					+ "minDistance: " + minDistance + "\n"
+					+ "maxDistance: " + maxDistance + "\n"
+					+ "directions: " + directions + "\n"
+					+ "maxNew: " + maxNew + "\n"
+					+ "maxUpdate: " + maxUpdate + "\n"
+					+ "maxLogs: " + (loadAllLogs ? "completepage " : "shortpage") + "save:" + pref.maxLogsToSpider + "\n"
+					+ "with pictures     : " + (!getImages ? "no" : "yes")+ "\n"
+					+ "with tb           : " + (!getTBs ? "no" : "yes") + "\n"
+					+ "with Founds       : " + (doNotgetFound ? "no" : "yes") + "\n"
+					+ "alias is premium m: " + (!pref.isPremium ? "no" : "yes") + "\n"
+					+ "Update if new Logs: " + (!pref.checkLog ? "no" : "yes") + "\n"
+					);
 			while(maxDistance > 0){
 				RexPropListBlock.search(htmlListPage);
 				String tableOfHtmlListPage;
@@ -425,6 +440,7 @@
 			} // loop pages
 		} // try
 		catch (Exception ex) {
+			pref.log("Download error : ", ex);
 			infB.close(0);
 			Vm.showWait(false);
 			return;
@@ -450,7 +466,6 @@
 		//=======
 		// Now ready to spider each cache in the list
 		//=======
-		boolean loadAllLogs = (pref.maxLogsToSpider > 5) || spiderAllFinds;
 
 		int spiderErrors = 0;
 		if (cachesToUpdate.size() == startSize)



From araber95 at mail.berlios.de  Wed Jul 14 11:50:08 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 14 Jul 2010 11:50:08 PM +0200
Subject: [Cachewolf-svn] r2683 - trunk/src/CacheWolf/imp
Message-ID: <20100714215008.58D2C480C22@sheep.berlios.de>

Author: araber95
Date: 2010-07-14 23:50:08 +0200 (Wed, 14 Jul 2010)
New Revision: 2683

Modified:
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
small update for last debug - info

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-07-14 21:44:33 UTC (rev 2682)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-07-14 21:50:08 UTC (rev 2683)
@@ -355,7 +355,7 @@
 					+ (spiderAllFinds ? "all Finds (DB/GC)"+ numFoundInDB+"/"+numFinds : "new and update Caches") + "\n"
 					+ "minDistance: " + minDistance + "\n"
 					+ "maxDistance: " + maxDistance + "\n"
-					+ "directions: " + directions + "\n"
+					+ "directions: " + direction + "\n"
 					+ "maxNew: " + maxNew + "\n"
 					+ "maxUpdate: " + maxUpdate + "\n"
 					+ "maxLogs: " + (loadAllLogs ? "completepage " : "shortpage") + "save:" + pref.maxLogsToSpider + "\n"



From araber95 at mail.berlios.de  Fri Jul 16 03:05:04 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Fri, 16 Jul 2010 03:05:04 PM +0200
Subject: [Cachewolf-svn] r2684 - in trunk: res_noewe/languages src/CacheWolf
	src/CacheWolf/navi
Message-ID: <20100716130504.524714801AD@sheep.berlios.de>

Author: araber95
Date: 2010-07-16 15:05:04 +0200 (Fri, 16 Jul 2010)
New Revision: 2684

Modified:
   trunk/res_noewe/languages/DE.cfg
   trunk/res_noewe/languages/EN.cfg
   trunk/res_noewe/languages/FR.cfg
   trunk/res_noewe/languages/NL.cfg
   trunk/res_noewe/languages/PL.cfg
   trunk/res_noewe/languages/SV.cfg
   trunk/src/CacheWolf/myTableControl.java
   trunk/src/CacheWolf/navi/GotoPanel.java
Log:
1. change blacklist status with multiselect
2. smaller button for map (hor. scrollbar with big font (28) on 480x640)

Modified: trunk/res_noewe/languages/DE.cfg
===================================================================
--- trunk/res_noewe/languages/DE.cfg	2010-07-14 21:50:08 UTC (rev 2683)
+++ trunk/res_noewe/languages/DE.cfg	2010-07-16 13:05:04 UTC (rev 2684)
@@ -413,6 +413,7 @@
 		1051=Zuletzt aktualisiert
 		1052=Im Browser online loggen
 		1053=In Googlemaps %f6ffnen
+		1054=Markierte Blacklist wechseln
 		1100=Profile
 		1105=Suchen
 		1106=Profil w%e4hlen oder Neu

Modified: trunk/res_noewe/languages/EN.cfg
===================================================================
--- trunk/res_noewe/languages/EN.cfg	2010-07-14 21:50:08 UTC (rev 2683)
+++ trunk/res_noewe/languages/EN.cfg	2010-07-16 13:05:04 UTC (rev 2684)
@@ -413,6 +413,7 @@
 		1051=Last sync date
 		1052=Log online in Browser
 		1053=Open in Google maps online
+		1054=Ticked change blacklist
 		1100=Profiles
 		1105=Browse
 		1106=Choose profile or New

Modified: trunk/res_noewe/languages/FR.cfg
===================================================================
--- trunk/res_noewe/languages/FR.cfg	2010-07-14 21:50:08 UTC (rev 2683)
+++ trunk/res_noewe/languages/FR.cfg	2010-07-16 13:05:04 UTC (rev 2684)
@@ -413,6 +413,7 @@
 		1051=Date de mettre %e0 jour
 		1052=[Log online in Browser]
 		1053=[Open in Google maps online]
+		1054=Ticked change blacklist
 		1100=Profils
 		1105=Chercher
 		1106=Choiser profil ou cr%e9er-un

Modified: trunk/res_noewe/languages/NL.cfg
===================================================================
--- trunk/res_noewe/languages/NL.cfg	2010-07-14 21:50:08 UTC (rev 2683)
+++ trunk/res_noewe/languages/NL.cfg	2010-07-16 13:05:04 UTC (rev 2684)
@@ -413,6 +413,7 @@
 		1051=Synchroniseert am
 		1052=[Log online in Browser]
 		1053=[Open in Google maps online]
+		1054=Ticked change blacklist
 		1100=Profielen
 		1105=Bladeren
 		1106=Kies profiel of nieuw.

Modified: trunk/res_noewe/languages/PL.cfg
===================================================================
--- trunk/res_noewe/languages/PL.cfg	2010-07-14 21:50:08 UTC (rev 2683)
+++ trunk/res_noewe/languages/PL.cfg	2010-07-16 13:05:04 UTC (rev 2684)
@@ -413,6 +413,7 @@
                 1051=Data ostatniej synchronizacji
 		1052=[Log online in Browser]
 		1053=[Open in Google maps online]
+		1054=Ticked change blacklist
                 1100=Profile
                 1105=Browse
                 1106=Wybierz Profil lub nowy

Modified: trunk/res_noewe/languages/SV.cfg
===================================================================
--- trunk/res_noewe/languages/SV.cfg	2010-07-14 21:50:08 UTC (rev 2683)
+++ trunk/res_noewe/languages/SV.cfg	2010-07-16 13:05:04 UTC (rev 2684)
@@ -413,6 +413,7 @@
         	1051=senaste synkroniseringen datum
         	1052=Log online i webbl%e4saren
         	1053=%f6ppna i Google-kartor p%e5 Internet
+		1054=Ticked change blacklist
         	1100=Profiler
         	1105=Bl%e4ddra
         	1106=V%e4lj profil eller ett nytt

Modified: trunk/src/CacheWolf/myTableControl.java
===================================================================
--- trunk/src/CacheWolf/myTableControl.java	2010-07-14 21:50:08 UTC (rev 2683)
+++ trunk/src/CacheWolf/myTableControl.java	2010-07-16 13:05:04 UTC (rev 2684)
@@ -20,7 +20,7 @@
 
 	private MenuItem miOpen, miGoto, miCenter, miUnhideAddis;
 	private MenuItem miOpenOnline, miOpenOffline, miLogOnline, miOpenGmaps;
-	private MenuItem miDelete, miUpdate;
+	private MenuItem miDelete, miUpdate, miChangeBlack;
 	private MenuItem miTickAll, miUntickAll;
 	private MenuItem miSeparator;
 
@@ -33,25 +33,25 @@
 		pref = Global.getPref();
 		tbp =tablePanel;
 		allowDragSelection = false; // allow only one row to be selected at one time
-
-		MenuItem[] mnuFull = new MenuItem[15];
-  	mnuFull[0] = miOpen = new MenuItem(MyLocale.getMsg(1021,"Open description"));
-  	mnuFull[1] = miGoto = new MenuItem(MyLocale.getMsg(1010,"Goto"));
-  	mnuFull[2] = miCenter = new MenuItem(MyLocale.getMsg(1019,"Center"));
-  	mnuFull[3] = miUnhideAddis = new MenuItem(MyLocale.getMsg(1042,"Unhide Addis"));
-  	mnuFull[4] = miSeparator = new MenuItem("-");
-  	mnuFull[5] = miOpenOnline = new MenuItem(MyLocale.getMsg(1020,"Open in $browser online"));
-  	mnuFull[6] = miOpenOffline = new MenuItem(MyLocale.getMsg(1018,"Open in browser offline"));
-  	mnuFull[7] = miLogOnline = new MenuItem(MyLocale.getMsg(1052,"Log online in Browser"));
-  	mnuFull[8] = miOpenGmaps = new MenuItem(MyLocale.getMsg(1053,"Open in Google maps online"));
-  	mnuFull[9] = miSeparator;
-  	mnuFull[10] = miDelete = new MenuItem(MyLocale.getMsg(1012,"Delete selected"));
-  	mnuFull[11] = miUpdate = new MenuItem(MyLocale.getMsg(1014,"Update"));
-  	mnuFull[12] = miSeparator;
-  	mnuFull[13] = miTickAll = new MenuItem(MyLocale.getMsg(1015,"Select all"));
-  	mnuFull[14] = miUntickAll = new MenuItem(MyLocale.getMsg(1016,"De-select all"));
+	MenuItem[] mnuFull = {
+			miOpen = new MenuItem(MyLocale.getMsg(1021,"Open description")),
+			miGoto = new MenuItem(MyLocale.getMsg(1010,"Goto")),
+		  	miCenter = new MenuItem(MyLocale.getMsg(1019,"Center")),
+		  	miUnhideAddis = new MenuItem(MyLocale.getMsg(1042,"Unhide Addis")),
+		  	miSeparator = new MenuItem("-"),
+		  	miOpenOnline = new MenuItem(MyLocale.getMsg(1020,"Open in $browser online")),
+		  	miOpenOffline = new MenuItem(MyLocale.getMsg(1018,"Open in browser offline")),
+		  	miLogOnline = new MenuItem(MyLocale.getMsg(1052,"Log online in Browser")),
+		  	miOpenGmaps = new MenuItem(MyLocale.getMsg(1053,"Open in Google maps online")),
+		  	miSeparator,
+		  	miDelete = new MenuItem(MyLocale.getMsg(1012,"Delete selected")),
+		  	miUpdate = new MenuItem(MyLocale.getMsg(1014,"Update")),
+		  	miChangeBlack = new MenuItem(MyLocale.getMsg(1054, "Change Blacklist")),
+		  	miSeparator,
+		  	miTickAll = new MenuItem(MyLocale.getMsg(1015,"Select all")),
+		  	miUntickAll = new MenuItem(MyLocale.getMsg(1016,"De-select all"))
+	};
   	mFull = new Menu(mnuFull, MyLocale.getMsg(1013,"With selection"));
-
   	MenuItem[] mnuSmall = new MenuItem[8];
   	mnuSmall[0] = miOpen;
   	mnuSmall[1] = miGoto;
@@ -232,6 +232,23 @@
 		if (selectedItem == miUpdate){
 			MainMenu.updateSelectedCaches(tbp);
 		} else
+		
+		if (selectedItem == miChangeBlack){
+			for(int i = cacheDB.size()-1; i >=0; i--){
+				CacheHolder currCache = cacheDB.get(i);
+				if ( currCache.is_Checked) {
+					if (currCache.isAddiWpt()) {
+						// currCache.setBlack(!currCache.is_black());
+					} else {
+						currCache.setBlack(!currCache.is_black());
+						currCache.save(); // to reflect it in xml
+					}
+				}
+			}
+			// profile.saveIndex(pref,true);
+			profile.buildReferences();
+			tbp.refreshTable();
+		} else
 
 		if (selectedItem == miCenter){
 			if (tbp.getSelectedCache() < 0) {

Modified: trunk/src/CacheWolf/navi/GotoPanel.java
===================================================================
--- trunk/src/CacheWolf/navi/GotoPanel.java	2010-07-14 21:50:08 UTC (rev 2683)
+++ trunk/src/CacheWolf/navi/GotoPanel.java	2010-07-16 13:05:04 UTC (rev 2684)
@@ -144,7 +144,7 @@
 		HeadP.addLast(ButtonP,CellConstants.HSTRETCH, CellConstants.DONTFILL|CellConstants.WEST).setTag(SPAN,new Dimension(2,1));
 		HeadP.addLast(CoordsP,CellConstants.HSTRETCH, CellConstants.HFILL|CellConstants.NORTH).setTag(SPAN,new Dimension(2,1));	
 		this.addNext(HeadP,CellConstants.HSTRETCH, CellConstants.WEST).setTag(SPAN,new Dimension(2,1));		
-		this.addLast(btnMap = new mButton(" ---> "+MyLocale.getMsg(1506,"Map")+" "),CellConstants.HSTRETCH, CellConstants.VFILL|CellConstants.RIGHT).setTag(SPAN,new Dimension(2,1));
+		this.addLast(btnMap = new mButton(MyLocale.getMsg(1506,"Map")+" "),CellConstants.HSTRETCH, CellConstants.VFILL|CellConstants.RIGHT).setTag(SPAN,new Dimension(2,1));
 		this.addLast(roseP,CellConstants.DONTSTRETCH, CellConstants.DONTFILL|CellConstants.WEST).setTag(SPAN,new Dimension(2,1));
 		btnMap.backGround=GREEN;
 		// for debuging



From admin at berlios.de  Fri Jul 16 15:33:24 2010
From: admin at berlios.de (admin at berlios.de)
Date: Fri, 16 Jul 2010 15:33:24 +0200 (CEST)
Subject: [Bug #17337] Blacklist setzen / aufheben über Multiselect
Message-ID: <201007161333.o6GDXOqP026412@unicorn.berlios.de>

Bug #17337, was updated on 2010-Jul-06 17:04
Here is a current snapshot of the bug.

Project: CacheWolf
Category: Other
Status: Closed
Resolution: None
Bug Group: Feature Request
Priority: 5
Submitted by: araber95
Assigned to : none
Summary: Blacklist setzen / aufheben ?ber Multiselect

Details: M?glichkeit selektierte Cache Black zu listen / White zu listen

http://www.geoclub.de/viewtopic.php?f=40&t=46011

Es gibt auch andere als die dort beschriebenen Anwendungsf?lle!

Follow-Ups:

Date: 2010-Jul-16 15:33
By: araber95

Comment:
done with 2684 for big menu (means not on pda)
Blacklist status of Marked (ticked) Caches is inverted.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17337&group_id=2211


From admin at berlios.de  Fri Jul 16 15:37:00 2010
From: admin at berlios.de (admin at berlios.de)
Date: Fri, 16 Jul 2010 15:37:00 +0200 (CEST)
Subject: [Bug #17253] Layout für die MovingMap im Querformat
Message-ID: <201007161337.o6GDb0gY029581@unicorn.berlios.de>

Bug #17253, was updated on 2010-Jun-14 01:06
Here is a current snapshot of the bug.

Project: CacheWolf
Category: None
Status: Open
Resolution: None
Bug Group: Bug confirmed
Priority: 1
Submitted by: pfeffer
Assigned to : none
Summary: Layout f?r die MovingMap im Querformat

Details: http://www.geoclub.de/viewtopic.php?f=40&t=35941&p=705919&hilit=querformat#p705919

Follow-Ups:

Date: 2010-Jul-16 15:36
By: araber95

Comment:
for small wide it should now (2670) work with the default configuration. 
-------------------------------------------------------

Date: 2010-Jun-15 09:38
By: araber95

Comment:
f?r diese F?lle wird ja die 240x240 genommen.

ich w?rde vorschlagen dieses Verzeichnis in mmcpda umzubenennen. und das andere in mmcpdahires oder so ?hnlich.

Damit das tut muss das prog nur wenig ge?ndert werden. Die Abh?ngigkeit vom Verzeichnisnamen muss da raus. da gab es schon mindestens 2 threads mit fehlern daderwegen.

-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17253&group_id=2211


From araber95 at mail.berlios.de  Fri Jul 16 06:23:19 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Fri, 16 Jul 2010 06:23:19 PM +0200
Subject: [Cachewolf-svn] r2685 - in trunk: res_noewe/languages src/CacheWolf
Message-ID: <20100716162319.34AEF480266@sheep.berlios.de>

Author: araber95
Date: 2010-07-16 18:23:18 +0200 (Fri, 16 Jul 2010)
New Revision: 2685

Modified:
   trunk/res_noewe/languages/DE.cfg
   trunk/res_noewe/languages/EN.cfg
   trunk/res_noewe/languages/FR.cfg
   trunk/res_noewe/languages/NL.cfg
   trunk/res_noewe/languages/PL.cfg
   trunk/res_noewe/languages/SV.cfg
   trunk/src/CacheWolf/MainMenu.java
Log:
doing some code fresh up

Modified: trunk/res_noewe/languages/DE.cfg
===================================================================
--- trunk/res_noewe/languages/DE.cfg	2010-07-16 13:05:04 UTC (rev 2684)
+++ trunk/res_noewe/languages/DE.cfg	2010-07-16 16:23:18 UTC (rev 2685)
@@ -30,7 +30,7 @@
 		54=Addi: Startpunkt
 		55=Addi: Bezugspunkt
 		100=nach HTML
-		101=nach GPX (NG Entwicklung)
+		101=nach GPX
 		102=nach TOP50 ASCII
 		103=nach GPX
 		104=nach CSV
@@ -469,7 +469,7 @@
 		1503=Nordausrichtung
 		1504=Start GPS
 		1505=Stop GPS
-		1506=Karte
+		1506= Karte
 		1507=Koordinaten ung%fcltig:
 		1508=Breite
 		1509=L%e4nge

Modified: trunk/res_noewe/languages/EN.cfg
===================================================================
--- trunk/res_noewe/languages/EN.cfg	2010-07-16 13:05:04 UTC (rev 2684)
+++ trunk/res_noewe/languages/EN.cfg	2010-07-16 16:23:18 UTC (rev 2685)
@@ -30,7 +30,7 @@
 		54=Addi: Trailhead
 		55=Addi: Reference
 		100=to HTML
-		101=to GPX (NG Development)
+		101=to GPX
 		102=to TOP50 ASCII
 		103=to GPX
 		104=to ASC
@@ -469,7 +469,7 @@
 		1503=North centered
 		1504=Start GPS
 		1505=Stop GPS
-		1506=Map
+		1506=  Map
 		1507=Coordinates are out of range:
 		1508=latitude
 		1509=longitude

Modified: trunk/res_noewe/languages/FR.cfg
===================================================================
--- trunk/res_noewe/languages/FR.cfg	2010-07-16 13:05:04 UTC (rev 2684)
+++ trunk/res_noewe/languages/FR.cfg	2010-07-16 16:23:18 UTC (rev 2685)
@@ -30,7 +30,7 @@
 		54=Addi: Point de d%e9part
 		55=Addi: Reference
 		100=vers HTML
-		101=vers GPX (NG D%e9veloppement)
+		101=vers GPX
 		102=vers TOP50 ASCII
 		103=vers GPX
 		104=vers CSV
@@ -469,7 +469,7 @@
 		1503=Orientation septentrional
 		1504=D%e9marrer GPS
 		1505=Stop GPS
-		1506=Carte
+		1506= Carte
 		1507=Coordonn%e9es pas valides:
 		1508=Latitude
 		1509=Longitude

Modified: trunk/res_noewe/languages/NL.cfg
===================================================================
--- trunk/res_noewe/languages/NL.cfg	2010-07-16 13:05:04 UTC (rev 2684)
+++ trunk/res_noewe/languages/NL.cfg	2010-07-16 16:23:18 UTC (rev 2685)
@@ -30,7 +30,7 @@
 		54=Addi: Trailhead
 		55=Addi: Reference
 		100=naar HTML
-		101=naar GPX Ontwikkeling
+		101=naar GPX
 		102=naar TOP50 ASCII
 		103=naar GPX
 		104=naar CSV
@@ -469,7 +469,7 @@
 		1503=Noord voor
 		1504=Start GPS
 		1505=Stop GPS
-		1506=Kaart
+		1506= Kaart
 		1507=Co%f6rdinaten ongeldig:
 		1508=breedtegraad
 		1509=lengtegraad

Modified: trunk/res_noewe/languages/PL.cfg
===================================================================
--- trunk/res_noewe/languages/PL.cfg	2010-07-16 13:05:04 UTC (rev 2684)
+++ trunk/res_noewe/languages/PL.cfg	2010-07-16 16:23:18 UTC (rev 2685)
@@ -30,7 +30,7 @@
 		54=Addi: Trailhead
 		55=Addi: Reference
                 100=HTML
-                101=GPX Rozw%f6j
+                101=GPX
                 102=TOP50 ASCII
                 103=GPX
                 104=ASC
@@ -469,7 +469,7 @@
                 1503=Polnoc wysrodkowane
                 1504=Start GPS
                 1505=Stop GPS
-                1506=Mapa
+                1506= Mapa
                 1507=Wspolrzedne poza zasiegiem:
                 1508=szerokosc
                 1509=dlugosc

Modified: trunk/res_noewe/languages/SV.cfg
===================================================================
--- trunk/res_noewe/languages/SV.cfg	2010-07-16 13:05:04 UTC (rev 2684)
+++ trunk/res_noewe/languages/SV.cfg	2010-07-16 16:23:18 UTC (rev 2685)
@@ -30,7 +30,7 @@
 		54=Addi: Trailhead
 		55=Addi: Reference
         	100=till HTML
-        	101=till GPX (NG Development)
+        	101=till GPX
         	102=till TOP50 ASCII
         	103=till GPX
         	104=till ASC
@@ -469,7 +469,7 @@
         	1503=North centrerad
         	1504=Start GPS
         	1505=Stopp GPS
-        	1506=Karta
+        	1506= Karta
         	1507=koordinater %e4r utom r%e4ckh%e5ll:
         	1508=latitud
         	1509=longitud

Modified: trunk/src/CacheWolf/MainMenu.java
===================================================================
--- trunk/src/CacheWolf/MainMenu.java	2010-07-16 13:05:04 UTC (rev 2684)
+++ trunk/src/CacheWolf/MainMenu.java	2010-07-16 16:23:18 UTC (rev 2685)
@@ -2,7 +2,6 @@
 
 import CacheWolf.exp.ASCExporter;
 import CacheWolf.exp.ExploristExporter;
-import CacheWolf.exp.GPXExporter;
 import CacheWolf.exp.GpxExportNg;
 import CacheWolf.exp.HTMLExporter;
 import CacheWolf.exp.KMLExporter;
@@ -57,10 +56,10 @@
 	private MenuItem downloadmap, kalibmap, importmap, selectMapPath;
 	private MenuItem spider, spiderAllFinds, update, chkVersion;
 	private MenuItem about, wolflang, sysinfo, legend;
-	private MenuItem exportGpxNg, exporthtml, exporttop50, exportGPX, exportASC, exportTomTom, exportMSARCSV, exportSpoilerPOI;
+	private MenuItem exportGpxNg, exporthtml, exporttop50, exportASC, exportTomTom, exportMSARCSV, exportSpoilerPOI;
 	private MenuItem exportOZI, exportKML, exportTPL, exportExplorist;
 	private MenuItem filtCreate, filtClear, filtInvert, filtSelected, filtNonSelected, filtBlack, filtApply;
-	private MenuItem exportLOC, exportGPS, mnuSeparator;
+	private MenuItem exportLOC, exportGPS, mnuSeparator=new MenuItem("-");
 	private MenuItem orgNewWP, orgCopy, orgMove, orgDelete,orgRebuild,orgCheckNotesAndSolver, orgRater;
 	public MenuItem cacheTour,orgTravelbugs, mnuForceLogin;
 	private MenuItem mnuNewProfile, mnuOpenProfile, mnuDeleteProfile, mnuRenameProfile, mnuEditCenter;
@@ -79,125 +78,127 @@
 		///////////////////////////////////////////////////////////////////////
 		// subMenu for profiles, part of "Application" menu below
 		///////////////////////////////////////////////////////////////////////
-		MenuItem[] mnuProfile = new MenuItem[4];
-		mnuProfile[0] = mnuNewProfile = new MenuItem(MyLocale.getMsg(1107,"New"));
-		mnuProfile[1] = mnuOpenProfile = new MenuItem(MyLocale.getMsg(1109,"Open"));
-		mnuProfile[2] = mnuDeleteProfile = new MenuItem(MyLocale.getMsg(1125,"Delete"));
-		mnuProfile[3] = mnuRenameProfile = new MenuItem(MyLocale.getMsg(1126,"Rename"));
+		MenuItem[] mnuProfile = {
+			mnuNewProfile = new MenuItem(MyLocale.getMsg(1107,"New")),
+			mnuOpenProfile = new MenuItem(MyLocale.getMsg(1109,"Open")),
+			mnuDeleteProfile = new MenuItem(MyLocale.getMsg(1125,"Delete")),
+			mnuRenameProfile = new MenuItem(MyLocale.getMsg(1126,"Rename")),
+		};
 		Menu profileMenu = new Menu(mnuProfile,MyLocale.getMsg(121,"Profiles"));
 
 		///////////////////////////////////////////////////////////////////////
 		// subMenu for import, part of "Application" menu below
 		///////////////////////////////////////////////////////////////////////
-		MenuItem[] mnuImport = new MenuItem[7];
-		mnuImport[0] = loadcaches  = new MenuItem(MyLocale.getMsg(129,"Import GPX")); //TODO internationalization
-		mnuImport[1] = loadOC      = new MenuItem(MyLocale.getMsg(130,"Download from opencaching"));
-		mnuImport[2] = spider      = new MenuItem(MyLocale.getMsg(131,"Spider from geocaching.com"));
-		mnuImport[3] = spiderAllFinds = new MenuItem(MyLocale.getMsg(217,"Spider all finds from geocaching.com"));
-		mnuImport[4] = update         = new MenuItem(MyLocale.getMsg(1014,"Update cache data"));
-		mnuImport[5] = mnuSeparator   = new MenuItem("-");
-		mnuImport[6] = mnuForceLogin  = new MenuItem(MyLocale.getMsg(216,"Always login to GC"));
+		MenuItem[] mnuImport = {				
+				loadcaches  = new MenuItem(MyLocale.getMsg(129,"Import GPX")),
+				loadOC      = new MenuItem(MyLocale.getMsg(130,"Download from opencaching")),
+				spider      = new MenuItem(MyLocale.getMsg(131,"Spider from geocaching.com")),
+				spiderAllFinds = new MenuItem(MyLocale.getMsg(217,"Spider all finds from geocaching.com")),
+				update         = new MenuItem(MyLocale.getMsg(1014,"Update cache data")),
+				mnuSeparator,
+				mnuForceLogin  = new MenuItem(MyLocale.getMsg(216,"Always login to GC")),
+		};
 		Menu importMenu = new Menu(mnuImport, MyLocale.getMsg(175,"Import"));
 		if (Global.getPref().forceLogin) mnuForceLogin.modifiers^=MenuItem.Checked;
 
 		///////////////////////////////////////////////////////////////////////
 		// subMenu for export, part of "Application" menu below
 		///////////////////////////////////////////////////////////////////////
-		MenuItem[] exitems = new MenuItem[13];
-		//Vm.debug("Hi in MainMenu "+lr);
-		exitems[0] = exporthtml = new MenuItem(MyLocale.getMsg(100,"to HTML"));
-		exitems[1] = exportGpxNg = new MenuItem(MyLocale.getMsg(101,"to GPX Test"));
-		exitems[2] = exporttop50 = new MenuItem(MyLocale.getMsg(102,"to TOP50 ASCII"));
-		// exitems[3] = exportGPX = new MenuItem(MyLocale.getMsg(103,"to GPX"));
-		exitems[3] = exportASC = new MenuItem(MyLocale.getMsg(104,"to CSV"));
-		exitems[4] = exportTomTom = new MenuItem(MyLocale.getMsg(105,"to TomTom"));
-		exitems[5] = exportMSARCSV = new MenuItem(MyLocale.getMsg(106,"to MS AutoRoute CSV"));
-		exitems[6] = exportLOC = new MenuItem(MyLocale.getMsg(215,"to LOC"));
-		exitems[7] = exportGPS = new MenuItem(MyLocale.getMsg(122,"to GPS"));
+		MenuItem[] exitems = {
+				exporthtml = new MenuItem(MyLocale.getMsg(100,"to HTML")),
+				exportGpxNg = new MenuItem(MyLocale.getMsg(101,"to GPX Test")),
+				exporttop50 = new MenuItem(MyLocale.getMsg(102,"to TOP50 ASCII")),
+				exportASC = new MenuItem(MyLocale.getMsg(104,"to CSV")),
+				exportTomTom = new MenuItem(MyLocale.getMsg(105,"to TomTom")),
+				exportMSARCSV = new MenuItem(MyLocale.getMsg(106,"to MS AutoRoute CSV")),
+				exportLOC = new MenuItem(MyLocale.getMsg(215,"to LOC")),
+				exportGPS = new MenuItem(MyLocale.getMsg(122,"to GPS")),
+				exportOZI = new MenuItem(MyLocale.getMsg(124,"to OZI")),
+				exportKML = new MenuItem(MyLocale.getMsg(125,"to Google Earth")),
+				exportExplorist = new MenuItem(MyLocale.getMsg(132,"to Explorist")),
+				exportTPL = new MenuItem(MyLocale.getMsg(128,"via Template")),
+				exportSpoilerPOI = new MenuItem(MyLocale.getMsg(135,"to SpoilerPOI")),
+		};
 		if ( Global.getPref().gpsbabel == null ) {
 			exportGPS.modifiers = MenuItem.Disabled;
 			exportGPS.setText(MyLocale.getMsg(136,"to GPS : gpsbabel missing."));
 		}
-		exitems[8] = exportOZI = new MenuItem(MyLocale.getMsg(124,"to OZI"));
-		exitems[9] = exportKML = new MenuItem(MyLocale.getMsg(125,"to Google Earth"));
-		exitems[10] = exportExplorist = new MenuItem(MyLocale.getMsg(132,"to Explorist"));
-		exitems[11] = exportTPL = new MenuItem(MyLocale.getMsg(128,"via Template"));
-		exitems[12] = exportSpoilerPOI = new MenuItem(MyLocale.getMsg(135,"to SpoilerPOI"));
 
 		Menu exportMenu = new Menu(exitems, MyLocale.getMsg(107,"Export"));
 
 		///////////////////////////////////////////////////////////////////////
 		// subMenu for maps, part of "Application" menu below
 		///////////////////////////////////////////////////////////////////////
-		MenuItem[] mapMenuItems = new MenuItem[4];
-		mapMenuItems[0] = downloadmap = new MenuItem(MyLocale.getMsg(162,"Download calibrated"));
-		mapMenuItems[1] = importmap = new MenuItem(MyLocale.getMsg(150,"Import"));
-		mapMenuItems[2] = kalibmap = new MenuItem(MyLocale.getMsg(151,"Calibrate"));
-		mapMenuItems[3] = selectMapPath = new MenuItem(MyLocale.getMsg(4236, "Change map directory$c"));
+		MenuItem[] mapMenuItems = {
+				downloadmap = new MenuItem(MyLocale.getMsg(162,"Download calibrated")),
+				importmap = new MenuItem(MyLocale.getMsg(150,"Import")),
+				kalibmap = new MenuItem(MyLocale.getMsg(151,"Calibrate")),
+				selectMapPath = new MenuItem(MyLocale.getMsg(4236, "Change map directory$c")),
+		};
 		Menu mapsMenu = new Menu(mapMenuItems, null);
 
 		// Now we start with the horizontal menu bar "Application", "Search", "Filter", "Organise", "About"
 		///////////////////////////////////////////////////////////////////////
 		// Create the "Application" pulldown menu
 		///////////////////////////////////////////////////////////////////////
-		MenuItem [] appMenuItems=new MenuItem[11];
-		appMenuItems[0] = new MenuItem(MyLocale.getMsg(121,"Profile"), 0, profileMenu);
-		appMenuItems[1] = preferences = new MenuItem(MyLocale.getMsg(108,"Preferences"));
-		appMenuItems[2] = mnuEditCenter = new MenuItem(MyLocale.getMsg(1110,"Centre"));
-		appMenuItems[3] = mnuContext = new MenuItem(MyLocale.getMsg(134,"Current Cache"));
-		appMenuItems[4] = mnuSeparator;
-		appMenuItems[5] = new MenuItem(MyLocale.getMsg(175,"Import"),0,importMenu);
-		appMenuItems[6] = new MenuItem(MyLocale.getMsg(107,"Export"),0,exportMenu);
-		appMenuItems[7] = new MenuItem(MyLocale.getMsg(149,"Maps"),0,mapsMenu);
-		appMenuItems[8] = mnuSeparator;
-		appMenuItems[9] = savenoxit = new MenuItem(MyLocale.getMsg(127,"Save"));
-		//appMenuItems[10] = savenexit = new MenuItem(MyLocale.getMsg(110,"Save & Exit"));
-		appMenuItems[10] = exit = new MenuItem(MyLocale.getMsg(111,"Exit"));
+		MenuItem [] appMenuItems={
+				new MenuItem(MyLocale.getMsg(121,"Profile"), 0, profileMenu),
+				preferences = new MenuItem(MyLocale.getMsg(108,"Preferences")),
+				mnuEditCenter = new MenuItem(MyLocale.getMsg(1110,"Centre")),
+				mnuContext = new MenuItem(MyLocale.getMsg(134,"Current Cache")),
+				mnuSeparator,
+				new MenuItem(MyLocale.getMsg(175,"Import"),0,importMenu),
+				new MenuItem(MyLocale.getMsg(107,"Export"),0,exportMenu),
+				new MenuItem(MyLocale.getMsg(149,"Maps"),0,mapsMenu),
+				mnuSeparator,
+				savenoxit = new MenuItem(MyLocale.getMsg(127,"Save")),
+				// savenexit = new MenuItem(MyLocale.getMsg(110,"Save & Exit")),
+				exit = new MenuItem(MyLocale.getMsg(111,"Exit")),
+		};
 		this.addMenu(new PullDownMenu(MyLocale.getMsg(120,"Application"),new Menu(appMenuItems,null)));
 
 		///////////////////////////////////////////////////////////////////////
 		// Create the "Search" pulldown menu
 		///////////////////////////////////////////////////////////////////////
-		MenuItem[] searchMenuItems=new MenuItem[3];
-		searchMenuItems[0] = search = new MenuItem(MyLocale.getMsg(112,"Search$"+(char)6)); // char 6 = ctrl +f
-		searchMenuItems[1] = searchAll = new MenuItem(MyLocale.getMsg(133,"Search All"));
-		searchMenuItems[2] = searchClr = new MenuItem(MyLocale.getMsg(113,"Clear search"));
+		MenuItem[] searchMenuItems={
+				search = new MenuItem(MyLocale.getMsg(112,"Search$"+(char)6)),// char 6 = ctrl +f
+				searchAll = new MenuItem(MyLocale.getMsg(133,"Search All")),
+				searchClr = new MenuItem(MyLocale.getMsg(113,"Clear search")),
+		};
 
 		///////////////////////////////////////////////////////////////////////
 		// Create the "Filter" pulldown menu
 		///////////////////////////////////////////////////////////////////////
-		MenuItem[] filterMenuItems=new MenuItem[9];
-		filterMenuItems[0] = filtApply  = new MenuItem(MyLocale.getMsg(709,"Apply"));
-		filterMenuItems[1] = filtCreate  = new MenuItem(MyLocale.getMsg(114,"Create"));
-		filterMenuItems[2] = filtInvert  = new MenuItem(MyLocale.getMsg(115,"Invert"));
-		filterMenuItems[3] = filtClear   = new MenuItem(MyLocale.getMsg(116,"Clear"));
-		filterMenuItems[4] = mnuSeparator;
-		filterMenuItems[5] = filtSelected = new MenuItem(MyLocale.getMsg(160,"Filter selected"));
-		filterMenuItems[6] = filtNonSelected = new MenuItem(MyLocale.getMsg(1011,"Filter out non selected"));
-		filterMenuItems[7] = mnuSeparator;
-		filterMenuItems[8] = filtBlack   = new MenuItem(MyLocale.getMsg(161,"Show Blacklist"));
+		MenuItem[] filterMenuItems={
+				filtApply  = new MenuItem(MyLocale.getMsg(709,"Apply")),
+				filtCreate  = new MenuItem(MyLocale.getMsg(114,"Create")),
+				filtInvert  = new MenuItem(MyLocale.getMsg(115,"Invert")),
+				filtClear   = new MenuItem(MyLocale.getMsg(116,"Clear")),
+				mnuSeparator,
+				filtSelected = new MenuItem(MyLocale.getMsg(160,"Filter selected")),
+				filtNonSelected = new MenuItem(MyLocale.getMsg(1011,"Filter out non selected")),
+				mnuSeparator,
+				filtBlack   = new MenuItem(MyLocale.getMsg(161,"Show Blacklist")),
+		};
         filtBlack.modifiers=Global.getProfile().showBlacklisted()?filtBlack.modifiers|MenuItem.Checked:filtBlack.modifiers&~MenuItem.Checked;
-		//filterMenuItems[9] = mnuSeparator;
-		//filterMenuItems[10] = cacheTour;
 
 		///////////////////////////////////////////////////////////////////////
 		// Create a combined "Filter and Search" pulldown menu for devices with small screens
 		///////////////////////////////////////////////////////////////////////
-		MenuItem[] filterAndSearchMenuItems=new MenuItem[12];
-		filterAndSearchMenuItems[0]=filtApply;
-		filterAndSearchMenuItems[1]=filtCreate;
-		filterAndSearchMenuItems[2]=filtInvert;
-		filterAndSearchMenuItems[3]=filtClear;
-		filterAndSearchMenuItems[4]=mnuSeparator;
-		filterAndSearchMenuItems[5]=filtSelected;
-		filterAndSearchMenuItems[6]=filtNonSelected;
-		filterAndSearchMenuItems[7]=mnuSeparator;
-		filterAndSearchMenuItems[8]=filtBlack;
-		filterAndSearchMenuItems[9]=mnuSeparator;
-		filterAndSearchMenuItems[10]=search;
-		filterAndSearchMenuItems[11]=searchClr;
-		//filterAndSearchMenuItems[12] = mnuSeparator;
-		//filterAndSearchMenuItems[13] = cacheTour;
+		MenuItem[] filterAndSearchMenuItems={
+				filtApply,
+				filtCreate,
+				filtInvert,
+				filtClear,
+				mnuSeparator,
+				filtSelected,
+				filtNonSelected,
+				mnuSeparator,
+				filtBlack,
+				mnuSeparator,
+				search,
+				searchClr,
+		};
 
 		// Depending on screen width display either filter and search menus or the combined menu
 		if (MyLocale.getScreenWidth()>300) {
@@ -210,31 +211,32 @@
 		///////////////////////////////////////////////////////////////////////
 		// Create the "Organise" pulldown menu
 		///////////////////////////////////////////////////////////////////////
-		MenuItem[] organiseMenuItems=new MenuItem[11];
-		organiseMenuItems[0] = orgNewWP = new MenuItem(MyLocale.getMsg(214,"New Waypoint"));
-		organiseMenuItems[1] = mnuSeparator;
-		organiseMenuItems[2] = orgCopy  = new MenuItem(MyLocale.getMsg(141,"Copy"));
-		organiseMenuItems[3] = orgMove  = new MenuItem(MyLocale.getMsg(142,"Move"));
-		organiseMenuItems[4] = orgDelete   = new MenuItem(MyLocale.getMsg(143,"Delete"));
-		organiseMenuItems[5] = orgRebuild   = new MenuItem(MyLocale.getMsg(208,"Rebuild Index"));
-		organiseMenuItems[6] = orgCheckNotesAndSolver = new MenuItem(MyLocale.getMsg(220,"Check Notes/Solver"));
-		organiseMenuItems[7] = orgRater = new MenuItem("Rater");
+		MenuItem[] organiseMenuItems={				
+				orgNewWP = new MenuItem(MyLocale.getMsg(214,"New Waypoint")),
+				mnuSeparator,
+				orgCopy  = new MenuItem(MyLocale.getMsg(141,"Copy")),
+				orgMove  = new MenuItem(MyLocale.getMsg(142,"Move")),
+				orgDelete   = new MenuItem(MyLocale.getMsg(143,"Delete")),
+				orgRebuild   = new MenuItem(MyLocale.getMsg(208,"Rebuild Index")),
+				orgCheckNotesAndSolver = new MenuItem(MyLocale.getMsg(220,"Check Notes/Solver")),
+				orgRater = new MenuItem("Rater"),
+				mnuSeparator,
+				orgTravelbugs = new MenuItem(MyLocale.getMsg(139,"Manage travelbugs")),
+				cacheTour = new MenuItem(MyLocale.getMsg(198,"Cachetour")),
+		};
 		if (null == Global.getPref().rater) orgRater.modifiers = MenuItem.Disabled;
-		organiseMenuItems[8] = mnuSeparator;
-		organiseMenuItems[9] = orgTravelbugs = new MenuItem(MyLocale.getMsg(139,"Manage travelbugs"));
-		cacheTour = new MenuItem(MyLocale.getMsg(198,"Cachetour"));
-		organiseMenuItems[10] = cacheTour;
 		this.addMenu(new PullDownMenu(MyLocale.getMsg(140,"Organise"),new Menu(organiseMenuItems,null)));
 
 		///////////////////////////////////////////////////////////////////////
 		// Create the "About" pulldown menu
 		///////////////////////////////////////////////////////////////////////
-		MenuItem[] aboutMenuItems=new MenuItem[5];
-		aboutMenuItems[0] = about = new MenuItem(MyLocale.getMsg(117,"About"));
-		aboutMenuItems[1] = legend = new MenuItem(MyLocale.getMsg(155,"Legend"));
-		aboutMenuItems[2] = wolflang = new MenuItem(MyLocale.getMsg(118,"WolfLanguage"));
-		aboutMenuItems[3] = sysinfo = new MenuItem(MyLocale.getMsg(157,"System"));
-		aboutMenuItems[4] = chkVersion = new MenuItem(MyLocale.getMsg(158,"Version Check"));
+		MenuItem[] aboutMenuItems={
+				about = new MenuItem(MyLocale.getMsg(117,"About")),
+				legend = new MenuItem(MyLocale.getMsg(155,"Legend")),
+				wolflang = new MenuItem(MyLocale.getMsg(118,"WolfLanguage")),
+				sysinfo = new MenuItem(MyLocale.getMsg(157,"System")),
+				chkVersion = new MenuItem(MyLocale.getMsg(158,"Version Check")),
+		};
 		this.addMenu(new PullDownMenu(MyLocale.getMsg(117,"About"),new Menu(aboutMenuItems,null)));
 	}
 
@@ -409,10 +411,6 @@
 				OVLExporter ovl = new OVLExporter(pref, profile);
 				ovl.doIt();
 			}
-			if(mev.selectedItem == exportGPX){
-				GPXExporter gpx = new GPXExporter(pref,profile);
-				gpx.doIt(1);
-			}
 			if(mev.selectedItem == exportASC){
 				ASCExporter asc = new ASCExporter(pref,profile);
 				asc.doIt();



From admin at berlios.de  Fri Jul 16 18:49:59 2010
From: admin at berlios.de (admin at berlios.de)
Date: Fri, 16 Jul 2010 18:49:59 +0200 (CEST)
Subject: [Bug #17253] Layout für die MovingMap im Querformat
Message-ID: <201007161649.o6GGnx9m010303@unicorn.berlios.de>

Bug #17253, was updated on 2010-Jun-14 01:06
Here is a current snapshot of the bug.

Project: CacheWolf
Category: None
Status: Closed
Resolution: None
Bug Group: Bug confirmed
Priority: 1
Submitted by: pfeffer
Assigned to : none
Summary: Layout f?r die MovingMap im Querformat

Details: http://www.geoclub.de/viewtopic.php?f=40&t=35941&p=705919&hilit=querformat#p705919

Follow-Ups:

Date: 2010-Jul-16 18:49
By: araber95

Comment:
f?r die hohe AUfl?sung m?sst es eigentlich auch im Querformat passen
-------------------------------------------------------

Date: 2010-Jul-16 15:36
By: araber95

Comment:
for small wide it should now (2670) work with the default configuration. 
-------------------------------------------------------

Date: 2010-Jun-15 09:38
By: araber95

Comment:
f?r diese F?lle wird ja die 240x240 genommen.

ich w?rde vorschlagen dieses Verzeichnis in mmcpda umzubenennen. und das andere in mmcpdahires oder so ?hnlich.

Damit das tut muss das prog nur wenig ge?ndert werden. Die Abh?ngigkeit vom Verzeichnisnamen muss da raus. da gab es schon mindestens 2 threads mit fehlern daderwegen.

-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17253&group_id=2211


From araber95 at mail.berlios.de  Fri Jul 16 08:13:20 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Fri, 16 Jul 2010 08:13:20 PM +0200
Subject: [Cachewolf-svn] r2686 - in trunk: . res_noewe/languages
	src/CacheWolf src/CacheWolf/exp
Message-ID: <20100716181320.EB834480266@sheep.berlios.de>

Author: araber95
Date: 2010-07-16 20:13:20 +0200 (Fri, 16 Jul 2010)
New Revision: 2686

Removed:
   trunk/src/CacheWolf/exp/GPXExporter.java
Modified:
   trunk/buildexe.bat
   trunk/res_noewe/languages/DE.cfg
   trunk/res_noewe/languages/EN.cfg
   trunk/res_noewe/languages/FR.cfg
   trunk/res_noewe/languages/NL.cfg
   trunk/res_noewe/languages/PL.cfg
   trunk/res_noewe/languages/SV.cfg
   trunk/src/CacheWolf/PreferencesScreen.java
Log:
1. gcmemberid in preferences screen
2. completeley removed old gpx - exporter

Modified: trunk/buildexe.bat
===================================================================
--- trunk/buildexe.bat	2010-07-16 16:23:18 UTC (rev 2685)
+++ trunk/buildexe.bat	2010-07-16 18:13:20 UTC (rev 2686)
@@ -1,5 +1,5 @@
 cd %~d0%~p0
-call getres.bat
+rem call getres.bat
 java -cp lib/ewe.jar Ewe programs/Jewel.ewe -c cw-pda.jnf
 java -cp lib/ewe.jar Ewe programs/Jewel.ewe -c cw-ppc2003.jnf
 java -cp lib/ewe.jar Ewe programs/Jewel.ewe -c cw-pc.jnf

Modified: trunk/res_noewe/languages/DE.cfg
===================================================================
--- trunk/res_noewe/languages/DE.cfg	2010-07-16 16:23:18 UTC (rev 2685)
+++ trunk/res_noewe/languages/DE.cfg	2010-07-16 18:13:20 UTC (rev 2686)
@@ -294,6 +294,7 @@
 		647=Sortierung nach Cache gruppiert
 		648=Fehlersuch Modus (debug)
 		649=Nutze eigene Symbole (nach Neustart)
+		650=GC Mitgliedsnr.:
 		700=Filter setzen
 		701=Entfernung
 		702=Schwierigkeit

Modified: trunk/res_noewe/languages/EN.cfg
===================================================================
--- trunk/res_noewe/languages/EN.cfg	2010-07-16 16:23:18 UTC (rev 2685)
+++ trunk/res_noewe/languages/EN.cfg	2010-07-16 18:13:20 UTC (rev 2686)
@@ -294,6 +294,7 @@
 		647=cachegrouped sorting
 		648=Debug Mode
 		649=use own symbols
+		650=GC memberID:
 		700=Set filter
 		701=Distance
 		702=Difficulty

Modified: trunk/res_noewe/languages/FR.cfg
===================================================================
--- trunk/res_noewe/languages/FR.cfg	2010-07-16 16:23:18 UTC (rev 2685)
+++ trunk/res_noewe/languages/FR.cfg	2010-07-16 18:13:20 UTC (rev 2686)
@@ -294,6 +294,7 @@
 		647=[cachegrouped sorting]
 		648=[Debug Mode]
 		649=[use own symbols]
+		650=GC memberID:
 		700=Cr%e9er filtre
 		701=Distance
 		702=Dificult%e9

Modified: trunk/res_noewe/languages/NL.cfg
===================================================================
--- trunk/res_noewe/languages/NL.cfg	2010-07-16 16:23:18 UTC (rev 2685)
+++ trunk/res_noewe/languages/NL.cfg	2010-07-16 18:13:20 UTC (rev 2686)
@@ -294,6 +294,7 @@
 		647=cachegrouped sorteren
 		648=Debug Mode
 		649=Gebruik eigen symbolen
+		650=GC memberID:
 		700=Selecteer filter
 		701=Afstand
 		702=Moeilijkheidsgraad

Modified: trunk/res_noewe/languages/PL.cfg
===================================================================
--- trunk/res_noewe/languages/PL.cfg	2010-07-16 16:23:18 UTC (rev 2685)
+++ trunk/res_noewe/languages/PL.cfg	2010-07-16 18:13:20 UTC (rev 2686)
@@ -294,6 +294,7 @@
 		647=[cachegrouped sorting]
 		648=[Debug Mode]
 		649=[use own symbols]
+		650=GC memberID:
                 700=Ustaw filtr
                 701=Odleglosc
                 702=Trudnosc

Modified: trunk/res_noewe/languages/SV.cfg
===================================================================
--- trunk/res_noewe/languages/SV.cfg	2010-07-16 16:23:18 UTC (rev 2685)
+++ trunk/res_noewe/languages/SV.cfg	2010-07-16 18:13:20 UTC (rev 2686)
@@ -294,6 +294,7 @@
         	647=cachegrouped sortering
         	648=Fels%f6kningsl%e4ge
         	649=anv%e4nda egna symboler
+		650=GC memberID:
         	700=St%e4ll in filter
         	701=Avst%e5nd
         	702=Sv%e5righetsgrad

Modified: trunk/src/CacheWolf/PreferencesScreen.java
===================================================================
--- trunk/src/CacheWolf/PreferencesScreen.java	2010-07-16 16:23:18 UTC (rev 2685)
+++ trunk/src/CacheWolf/PreferencesScreen.java	2010-07-16 18:13:20 UTC (rev 2686)
@@ -19,7 +19,7 @@
 	mButton cancelB, applyB, brwBt, gpsB;
 	mChoice inpLanguage, inpMetric, inpSpiderUpdates;
 	mInput DataDir, Proxy, ProxyPort, Alias, nLogs, Browser, fontSize, 
-	       inpLogsPerPage,inpMaxLogsToSpider,inpPassword;
+	       inpLogsPerPage,inpMaxLogsToSpider,inpPassword,inpGcMemberID;
 	mCheckBox chkAutoLoad, chkShowDeletedImg, chkMenuAtTop, chkTabsAtTop, chkShowStatus,chkHasCloseButton,
 	          chkSynthShort,chkProxyActive, chkDescShowImg, chkAddDetailsToWaypoint, chkAddDetailsToName, 
 	          chkSetCurrentCentreFromGPSPosition,chkSortingGroupedByCache,chkuseOwnSymbols,chkDebug,chkPM;
@@ -55,20 +55,21 @@
 		if((pref.fontSize <= 13)||(sw <= 240)||(sh <= 240)){
 			setPreferredSize(240,240);
 		}
-		else if(pref.fontSize <= 17){
-			setPreferredSize(300,250);
+		else if(pref.fontSize <= 28){
+			// was for <=16 setPreferredSize(288,252);
+			setPreferredSize(pref.fontSize*18,pref.fontSize*16);
 		}
 		else if(pref.fontSize <= 20){
-			setPreferredSize(350,300);
+			setPreferredSize(352,302);
 		}
 		else if(pref.fontSize <= 24){
-			setPreferredSize(400,350);
+			setPreferredSize(420,350);
 		}
 		else if(pref.fontSize <= 28){
-			setPreferredSize(450,400);
+			setPreferredSize(480,390);
 		}
 		else{
-			setPreferredSize(500,450);
+			setPreferredSize(576,512);
 		}
 		
 		//scp = new ScrollBarPanel(pnlGeneral);
@@ -96,10 +97,13 @@
 		cpBrowser.addNext(Alias = new mInput(pref.myAlias),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.LEFT));
 		cpBrowser.addNext(new mLabel(MyLocale.getMsg(594,"Pwd")));
 		cpBrowser.addLast(inpPassword=new mInput(pref.password),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.LEFT));
-		cpBrowser.addLast(chkPM=new mCheckBox("PM"));
-		if (pref.isPremium) chkPM.setState(true);
 		inpPassword.setToolTip(MyLocale.getMsg(593,"Password is optional here.\nEnter only if you want to store it in pref.xml"));
 		inpPassword.isPassword=true;
+		cpBrowser.addNext(chkPM=new mCheckBox("PM"));
+		if (pref.isPremium) chkPM.setState(true);
+		cpBrowser.addNext(new mLabel(MyLocale.getMsg(650,"GcMemberID:")));
+		cpBrowser.addLast(inpGcMemberID=new mInput(pref.gcMemberId),CellConstants.DONTSTRETCH, (CellConstants.DONTFILL|CellConstants.LEFT));
+		
 		pnlGeneral.addLast(separator(cpBrowser),HSTRETCH,HFILL);
 		
 		CellPanel cpGPS=new CellPanel();
@@ -311,6 +315,7 @@
 				
 				pref.myAlias = Alias.getText().trim();
 				SpiderGC.passwort=pref.password= inpPassword.getText().trim();
+				pref.gcMemberId=inpGcMemberID.getText().trim();
 				MyLocale.saveLanguage(MyLocale.language=inpLanguage.getText().toUpperCase().trim());
 				pref.browser = Browser.getText();
 				//Vm.debug(myPreferences.browser);

Deleted: trunk/src/CacheWolf/exp/GPXExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/GPXExporter.java	2010-07-16 16:23:18 UTC (rev 2685)
+++ trunk/src/CacheWolf/exp/GPXExporter.java	2010-07-16 18:13:20 UTC (rev 2686)
@@ -1,185 +0,0 @@
-package CacheWolf.exp;
-import ewe.sys.*;
-import ewe.io.FileBase;
-import CacheWolf.*;
-/**
-*	Class to export the cache database to a GPX file with gc.com
-*	extensions.<br>
-*	Export of logs is not that nice. The cause is that CacheWolf does not spider
-*	logs individually, rather all logs as a single entity.
-*	ClassID = 2000
-*/
-public class GPXExporter extends Exporter{
-
-	private final static String STRING_TRUE = "True";
-	private final static String STRING_FALSE = "False";
-	private final static String DEFAULT_DATE = "2000-01-01";
-
-	public GPXExporter(){
-		super();
-		this.setMask("*.gpx");
-		this.setNeedCacheDetails(true);
-		this.setHowManyParams(LAT_LON|COUNT);
-		this.setTmpFileName(FileBase.getProgramDirectory() + "/temp.gpx");
-	}
-
-	public GPXExporter(Preferences p, Profile prof){
-		super();
-		this.setMask("*.gpx");
-		this.setNeedCacheDetails(true);
-		this.setHowManyParams(LAT_LON|COUNT);
-		this.setTmpFileName(FileBase.getProgramDirectory() + "/temp.gpx");
-	}
-
-	public String header() {
-		StringBuffer strBuf = new StringBuffer(200);
-		Time tim = new Time();
-
-		strBuf.append("<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n");
-		strBuf.append("<gpx xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" version=\"1.0\" creator=\"Groundspeak Pocket Query\" xsi:schemaLocation=\"http://www.topografix.com/GPX/1/0 http://www.topografix.com/GPX/1/0/gpx.xsd http://www.groundspeak.com/cache/1/0 http://www.groundspeak.com/cache/1/0/cache.xsd\" xmlns=\"http://www.topografix.com/GPX/1/0\">\r\n");
-		if ( Global.getPref().exportGpxAsMyFinds ) {
-			strBuf.append("  <name>My Finds Pocket Query</name>\r\n");
-		}
-		strBuf.append("  <desc>Geocache file generated by CacheWolf</desc>\r\n");
-		strBuf.append("  <author>CacheWolf</author>\r\n");
-		strBuf.append("  <email>test at test.com</email>\r\n");
-		tim = tim.setFormat("yyyy-MM-dd'T'HH:mm:dd'Z'");
-		tim = tim.setToCurrentTime();
-		strBuf.append(" <time>"+tim.toString()+"</time>\r\n");
-
-		return strBuf.toString();
-	}
-
-	public String record(CacheHolder ch, String lat, String lon, int counter) {
-		StringBuffer strBuf = new StringBuffer(1000);
-		CacheHolderDetail det = ch.getCacheDetails(true);
-		try{
-			strBuf.append("  <wpt lat=\""+lat+"\" lon=\""+lon+"\">\r\n");
-
-			String tim = ch.getDateHidden().length()>0 ? ch.getDateHidden() : DEFAULT_DATE;
-			strBuf.append("    <time>").append(tim.toString()).append("T07:00:00Z</time>\r\n");
-			strBuf.append("    <name>").append(ch.getWayPoint()).append("</name>\r\n");
-			if (ch.isAddiWpt()){
-				strBuf.append("    <cmt>").append(SafeXML.cleanGPX(det.LongDescription)).append("</cmt>\r\n");
-			}
-			strBuf.append("    <desc>").append(SafeXML.cleanGPX(ch.getCacheName())).append(" by ").append(SafeXML.cleanGPX(ch.getCacheOwner())).append("</desc>\r\n");
-			strBuf.append("    <url>http://www.geocaching.com/seek/cache_details.aspx?wp=").append(ch.getWayPoint()).append("&amp;Submit6=Find</url>\r\n");
-			strBuf.append("    <urlname>").append(SafeXML.cleanGPX(ch.getCacheName())).append(" by ").append(SafeXML.cleanGPX(ch.getCacheOwner())).append("</urlname>\r\n");
-			if (!ch.isAddiWpt()){
-				if ( ch.is_found() ) {
-					strBuf.append("    <sym>Geocache Found</sym>\r\n");
-				} else {
-					strBuf.append("    <sym>Geocache</sym>\r\n");
-				}
-				strBuf.append("    <type>").append(CacheType.type2TypeTag(ch.getType())).append("</type>\r\n");
-				String dummyAvailable = ch.is_available() ? STRING_TRUE:STRING_FALSE;
-				String dummyArchived = ch.is_archived() ? STRING_TRUE:STRING_FALSE;
-				strBuf.append("    <groundspeak:cache id=\"").append( ch.GetCacheID() ).append( "\" available=\"" ).append( dummyAvailable ).append( "\" archived=\"" ).append( dummyArchived).append( "\" xmlns:groundspeak=\"http://www.groundspeak.com/cache/1/0\">\r\n");
-				strBuf.append("      <groundspeak:name>").append(SafeXML.cleanGPX(ch.getCacheName())).append("</groundspeak:name>\r\n");
-				strBuf.append("      <groundspeak:placed_by>").append(SafeXML.cleanGPX(ch.getCacheOwner())).append("</groundspeak:placed_by>\r\n");
-				//todo low prio: correct owner-id
-				strBuf.append("      <groundspeak:owner id=\"23\">").append(SafeXML.cleanGPX(ch.getCacheOwner())+"</groundspeak:owner>\r\n");
-				strBuf.append("      <groundspeak:type>").append(CacheType.type2GSTypeTag(ch.getType())).append("</groundspeak:type>\r\n");
-				strBuf.append("      <groundspeak:container>").append(CacheSize.cw2ExportString(ch.getCacheSize())).append("</groundspeak:container>\r\n");
-				//for Colorado/Oregon: 2.0 -> 2
-				String diffTerr = CacheTerrDiff.shortDT(ch.getHard());
-
-				strBuf.append("      <groundspeak:difficulty>").append(diffTerr).append("</groundspeak:difficulty>\r\n");
-				diffTerr = CacheTerrDiff.shortDT(ch.getTerrain());
-				strBuf.append("      <groundspeak:terrain>").append(diffTerr).append("</groundspeak:terrain>\r\n");
-
-				strBuf.append("      <groundspeak:country>").append(SafeXML.cleanGPX(det.Country)+"</groundspeak:country>\r\n");
-				strBuf.append("      <groundspeak:state>").append(SafeXML.cleanGPX(det.State)+"</groundspeak:state>\r\n");
-
-				String dummyHTML = ch.is_HTML() ? STRING_TRUE:STRING_FALSE;
-				strBuf.append("      <groundspeak:long_description html=\"" ).append( dummyHTML ).append( "\">\r\n");
-				strBuf.append("      ").append(SafeXML.cleanGPX(det.LongDescription));
-				strBuf.append("      \n</groundspeak:long_description>\r\n");
-				strBuf.append("	  <groundspeak:encoded_hints>").append(SafeXML.cleanGPX(Common.rot13(det.Hints))).append("</groundspeak:encoded_hints>\r\n");
-				strBuf.append("      <groundspeak:logs>\r\n");
-				if ( Global.getPref().exportGpxAsMyFinds && ch.is_found() ) {
-					if ( det.OwnLogId.length() != 0 ) {
-						strBuf.append("        <groundspeak:log id=\"" ).append( det.OwnLogId ).append( "\">\r\n");
-					} else {
-						strBuf.append("        <groundspeak:log id=\"" ).append( Integer.toString(counter) ).append( "\">\r\n");
-					}
-					strBuf.append("          <groundspeak:date>").append(SafeXML.cleanGPX(ch.getStatusDate())).append("T").append(SafeXML.cleanGPX(ch.getStatusTime())).append(":00</groundspeak:date>\r\n");
-					if ( det.OwnLog != null ) {
-						strBuf.append("          <groundspeak:type>").append(image2TypeText(det.OwnLog.getIcon())).append("</groundspeak:type>\r\n");
-					} else {
-						strBuf.append("          <groundspeak:type>Found it</groundspeak:type>\r\n");
-					}
-					strBuf.append("          <groundspeak:finder id=\"").append(SafeXML.cleanGPX(Global.getPref().gcMemberId)).append("\">").append(SafeXML.cleanGPX(Global.getPref().myAlias)).append("</groundspeak:finder>\r\n");
-					if ( det.OwnLog != null ) {
-						strBuf.append("          <groundspeak:text encoded=\"False\">").append(SafeXML.cleanGPX(det.OwnLog.getMessage())).append("</groundspeak:text>\r\n");
-					} else {
-						strBuf.append("          <groundspeak:text encoded=\"False\"></groundspeak:text>\r\n");
-					}
-					strBuf.append("        </groundspeak:log>\r\n");
-				} else {
-					int numberOfLogs = java.lang.Math.min(Global.getPref().numberOfLogsToExport, det.CacheLogs.size());
-					if (numberOfLogs < 0) numberOfLogs = det.CacheLogs.size();
-					for (int i = 0; i < numberOfLogs; i++) {
-						strBuf.append("        <groundspeak:log id=\"" ).append( Integer.toString(i) ).append( "\">\r\n");
-						strBuf.append("          <groundspeak:date>").append(SafeXML.cleanGPX(det.CacheLogs.getLog(i).getDate())).append("T00:00:00</groundspeak:date>\r\n");
-						strBuf.append("          <groundspeak:type>").append(image2TypeText(det.CacheLogs.getLog(i).getIcon())).append("</groundspeak:type>\r\n");
-						strBuf.append("          <groundspeak:finder id=\"\">").append(SafeXML.cleanGPX(det.CacheLogs.getLog(i).getLogger())).append("</groundspeak:finder>\r\n");
-						strBuf.append("          <groundspeak:text encoded=\"False\">").append(SafeXML.cleanGPX(det.CacheLogs.getLog(i).getMessage())).append("</groundspeak:text>\r\n");
-						strBuf.append("        </groundspeak:log>\r\n");
-					}
-				}
-				strBuf.append("      </groundspeak:logs>\r\n");
-				if ( Global.getPref().exportTravelbugs && (det.Travelbugs.size() > 0) ) {
-					det.Travelbugs.size();
-					strBuf.append("      <groundspeak:travelbugs>\r\n");
-					for (int i = 0; i < det.Travelbugs.size(); i++) {
-						strBuf.append("        <groundspeak:travelbug id=\"").append(Integer.toString(i)).append("\" ref=\"TB\">\r\n");
-						strBuf.append("          <groundspeak:name>").append(SafeXML.cleanGPX(det.Travelbugs.getTB(i).getName())).append("</groundspeak:name>\r\n");
-						strBuf.append("        </groundspeak:travelbug>\r\n");
-					}
-					strBuf.append("      </groundspeak:travelbugs>\r\n");
-				} else {
-					strBuf.append("      <groundspeak:travelbugs />\r\n");
-				}
-				strBuf.append("    </groundspeak:cache>\r\n");
-			}else {
-				// there is no HTML in the description of addi wpts
-				strBuf.append("    <sym>").append(CacheType.type2SymTag(ch.getType())).append("</sym>\r\n");
-				strBuf.append("    <type>").append(CacheType.type2TypeTag(ch.getType())).append("</type>\r\n");
-			}
-			strBuf.append("  </wpt>\r\n");
-		}catch(Exception e){
-			Vm.debug(ch.getWayPoint());
-			e.printStackTrace();
-			return null;
-		}//try
-
-		return strBuf.toString();
-	}
-
-	public String trailer(int total) {
-		return "</gpx>\r\n";
-	}
-
-	public static String image2TypeText(String image){
-		if (image.equals("icon_smile.gif")) return "Found it";
-		if (image.equals("icon_sad.gif")) return "Didn't find it";
-		if (image.equals("icon_note.gif")) return "Write note";
-		if (image.equals("icon_enabled.gif")) return "Enable Listing";
-		if (image.equals("icon_disabled.gif")) return "Temporarily Disable Listing";
-		if (image.equals("icon_camera.gif")) return "Webcam Photo Taken";
-		if (image.equals("11.png")) return "Webcam Photo Taken";
-		if (image.equals("icon_attended.gif")) return "Attended";
-		if (image.equals("icon_greenlight.gif")) return "Publish Listing";
-		if (image.equals("icon_rsvp.gif")) return "Will Attend";
-		if (image.equals("big_smile.gif")) return "Post Reviewer Note";
-		if (image.equals("traffic_cone.gif")) return "Archive (show)";
-		if (image.equals("icon_maint.gif")) return "Owner Maintenance";
-		if (image.equals("icon_needsmaint.gif")) return "Needs Maintenance";
-		if (image.equals("coord_update.gif")) return "Update Coordinates";
-		if (image.equals("icon_remove.gif")) return "Needs Archived";
-
-		return image;
-	}
-
-}



From araber95 at mail.berlios.de  Fri Jul 16 08:17:19 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Fri, 16 Jul 2010 08:17:19 PM +0200
Subject: [Cachewolf-svn] r2687 - trunk
Message-ID: <20100716181719.A1F6E480266@sheep.berlios.de>

Author: araber95
Date: 2010-07-16 20:17:19 +0200 (Fri, 16 Jul 2010)
New Revision: 2687

Modified:
   trunk/buildexe.bat
Log:
reverting buildexe.bat

Modified: trunk/buildexe.bat
===================================================================
--- trunk/buildexe.bat	2010-07-16 18:13:20 UTC (rev 2686)
+++ trunk/buildexe.bat	2010-07-16 18:17:19 UTC (rev 2687)
@@ -1,5 +1,5 @@
 cd %~d0%~p0
-rem call getres.bat
+call getres.bat
 java -cp lib/ewe.jar Ewe programs/Jewel.ewe -c cw-pda.jnf
 java -cp lib/ewe.jar Ewe programs/Jewel.ewe -c cw-ppc2003.jnf
 java -cp lib/ewe.jar Ewe programs/Jewel.ewe -c cw-pc.jnf



From araber95 at mail.berlios.de  Sat Jul 17 10:53:13 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sat, 17 Jul 2010 10:53:13 AM +0200
Subject: [Cachewolf-svn] r2688 - in trunk: res_noewe/languages
	res_noewe/templates src/CacheWolf src/CacheWolf/exp
Message-ID: <20100717085313.34F0B480AFB@sheep.berlios.de>

Author: araber95
Date: 2010-07-17 10:53:12 +0200 (Sat, 17 Jul 2010)
New Revision: 2688

Modified:
   trunk/res_noewe/languages/DE.cfg
   trunk/res_noewe/templates/Short documentation for the export via templates.htm
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/ShowCacheInBrowser.java
   trunk/src/CacheWolf/exp/HTMLExporter.java
   trunk/src/CacheWolf/exp/TPLExporter.java
   trunk/src/CacheWolf/myTableControl.java
Log:
1. tpl parameter nr of logs
2. tpl ADDIS
3. giving minor changes to "change multi black"

Modified: trunk/res_noewe/languages/DE.cfg
===================================================================
--- trunk/res_noewe/languages/DE.cfg	2010-07-16 18:17:19 UTC (rev 2687)
+++ trunk/res_noewe/languages/DE.cfg	2010-07-17 08:53:12 UTC (rev 2688)
@@ -414,7 +414,7 @@
 		1051=Zuletzt aktualisiert
 		1052=Im Browser online loggen
 		1053=In Googlemaps %f6ffnen
-		1054=Markierte Blacklist wechseln
+		1054=Markierte Black/Whitelist
 		1100=Profile
 		1105=Suchen
 		1106=Profil w%e4hlen oder Neu

Modified: trunk/res_noewe/templates/Short documentation for the export via templates.htm
===================================================================
--- trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-07-16 18:17:19 UTC (rev 2687)
+++ trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-07-17 08:53:12 UTC (rev 2688)
@@ -205,7 +205,11 @@
 of characters for Variable SHORTWAYPOINT<br>
 &lt;<span class=SpellE>tmpl_par</span> name=&quot;Out&quot; value=&quot;*.<span
 class=SpellE>gpx</span>&quot;&gt;<span style='mso-tab-count:4'>?????????????????????????????????????? </span>Output
-Filename or Extension</span><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>
+Filename or Extension<br>
+&lt;<span class=SpellE>tmpl_par</span> name=&quot;<span class=SpellE>NrLogs</span>
+&quot; value=&quot;-1&quot;&gt;<span style='mso-tab-count:4'>???????????????????????????????????? </span><span
+class=SpellE>Anzahl</span> logs (-1 = alle)</span><span lang=EN-GB
+style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
 mso-outline-level:1'><u><span lang=EN-GB style='font-size:10.0pt;font-family:
@@ -236,8 +240,8 @@
 &lt;type&gt; Type of cache, e.g. Regular, Multi<br>
 TYPENO<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????????? </span>:
 &lt;type&gt; as number string (see <span class=SpellE>CacheType.java</span> <span
-class=SpellE>e.g</span> : 0=Custom , 2=<span class=SpellE>Tradi</span> ,50=Parking
-104=Earth)<br>
+class=SpellE>e.g</span> : 0=Custom , 2=<span class=SpellE>Tradi</span>
+,50=Parking 104=Earth)<br>
 SYM<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 &lt;sym&gt;<br>
 GSTYPE<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????????? </span>:
@@ -291,7 +295,8 @@
 Bearing calculated in <span class=SpellE>cachelist</span><br>
 LATON<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 Coordinates in long format, e.g. N 50? 31.234 E 008? 45.267<br>
-LAT<span style='mso-tab-count:9'>??????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+LAT<span style='mso-tab-count:2'>????????????????? </span><span
+style='mso-tab-count:7'>????????????????????????????????????????????????????????????????????????????????? </span>:
 &lt;<span class=SpellE>wpt</span> lat=?<span class=SpellE>xx.yyyy</span>?
 ??..&gt; Latitude in decimal format, e.g. 50.20147<br>
 LON<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
@@ -303,8 +308,7 @@
 the English Status texts (for <span class=SpellE>gpx</span> ? export)<br>
 STATUS_DATE<span style='mso-tab-count:8'>?????????????????????????????????????????????????????????????????????????????????? </span>:
 Get the date part of the status <br>
-STATUS_TIME<span style='mso-tab-count:3'>???????????????????????? </span><span
-style='mso-tab-count:5'>?????????????????????????????????????????????????????????? </span>:
+STATUS_TIME<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????? </span>:
 Get the time part of the status<br>
 DATE<span style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 date hidden<br>
@@ -326,12 +330,13 @@
 auf <span class=SpellE>eine</span> in den <span class=SpellE>Einstellungen</span>
 <span class=SpellE>vorgegebene</span> <span class=SpellE>L?nge</span> <span
 class=SpellE>gek?rzt</span> <span class=SpellE>wird</span>. <br>
+<span style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????????????? </span><span
+style='mso-tab-count:1'>??????????? </span>: (<span class=SpellE>Hintergrund</span>:
+<span class=SpellE>das</span> Notes -<span class=SpellE>Feld</span> <span
+class=SpellE>der</span> <span class=SpellE>meisten</span> <span class=SpellE>Garmins</span>
+<span class=SpellE>kann</span> <span class=SpellE>nur</span> 30 <span
+class=SpellE>Buchstaben</span>)<br>
 <span style='mso-tab-count:9'>????????????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
-(<span class=SpellE>Hintergrund</span>: <span class=SpellE>das</span> Notes -<span
-class=SpellE>Feld</span> <span class=SpellE>der</span> <span class=SpellE>meisten</span>
-<span class=SpellE>Garmins</span> <span class=SpellE>kann</span> <span
-class=SpellE>nur</span> 30 <span class=SpellE>Buchstaben</span>)<br>
-<span style='mso-tab-count:9'>????????????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 <span class=SpellE>dann</span> <span class=SpellE>kriegen</span> <span
 class=SpellE>sie</span> <span class=SpellE>noch</span> <span class=SpellE>Infos</span>
 <span class=SpellE>wie</span> Difficulty etc. rein)<br>
@@ -385,8 +390,7 @@
 GCTemplate.html / show cache in browser offline<br>
 PATHANDIMAGE<span style='mso-tab-count:7'>??????????????????????????????????????????????????????????????????????????????? </span>:
 path an <span class=SpellE>imagename</span> of the attribute<br>
-IMAGE<span style='mso-tab-count:2'>???????????? </span><span style='mso-tab-count:
-7'>????????????????????????????????????????????????????????????????????????????????? </span>:
+IMAGE<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 <span class=SpellE>imagename</span> of the attribute<br>
 INFO<span style='mso-tab-count:9'>????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 description of the attribute from language <span class=SpellE>config</span><br>
@@ -413,8 +417,25 @@
 LOGGER<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????????? </span>:
 name<br>
 MESSAGE<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????? </span>:
-logtext<o:p></o:p></span></p>
+<span class=SpellE>logtext</span><o:p></o:p></span></p>
 
+<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
+lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>ADDIS<span
+style='mso-tab-count:9'>??????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+the &lt;<span class=SpellE>tmpl_loop</span> ADDIS&gt; example see
+GCTemplate.html<br>
+WAYPOINT<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????? </span>:
+<span class=SpellE>der</span> <span class=SpellE>Addi</span><br>
+NAME<span style='mso-tab-count:9'>??????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+Name des <span class=SpellE>Addi</span><br>
+LATLON<span style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+<span class=SpellE>Koordinaten</span> des <span class=SpellE>Addi</span><br>
+IMG<span style='mso-tab-count:9'>??????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+Name des <span class=SpellE>Addi</span> Icons<br>
+LONGDESC<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????? </span>:
+<span class=SpellE>Beschreibungstext</span> <span class=SpellE>f?r</span> den
+Addi<o:p></o:p></span></p>
+
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
 mso-outline-level:1'><span lang=EN-GB style='font-size:10.0pt;font-family:Arial;
 mso-ansi-language:EN-GB'>Further documentation of template library:
@@ -553,8 +574,8 @@
 values for conditions are Strings in java, and not <span class=SpellE><span
 class=GramE>boolean</span></span> values, hence, what evaluates to true and</span><span
 lang=EN-GB style='mso-ansi-language:EN-GB'> </span><span lang=EN-GB
-style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>false needs to
-be specifically defined.<br>
+style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>false needs
+to be specifically defined.<br>
 As of now, the following values evaluate to false:<br>
 &quot;&quot; - the empty string<br>
 &quot;0&quot; - the string containing only the number zero<br>
@@ -604,8 +625,8 @@
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
 lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>The
-&lt;<span class=SpellE>tmpl_loop</span>&gt; tag is a bit more complicated than the
-other tags. It allows you to create a section of text that</span><span
+&lt;<span class=SpellE>tmpl_loop</span>&gt; tag is a bit more complicated than
+the other tags. It allows you to create a section of text that</span><span
 lang=EN-GB style='mso-ansi-language:EN-GB'> </span><span lang=EN-GB
 style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>will be
 displayed repeatedly for every item in the loop control variable. Inside the

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-07-16 18:17:19 UTC (rev 2687)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-07-17 08:53:12 UTC (rev 2688)
@@ -574,7 +574,7 @@
 	/** Return a Hashtable containing all the cache data for Templates */
 	public Hashtable toHashtable(
 			Regex decSep, Regex badChars, 
-			int shortWaypointLength, int shortNameLength, 
+			int shortWaypointLength, int shortNameLength, int nrOfLogs,
 			TextCodec codec, GarminMap gm,
 			boolean withFoundText,
 			int ModTyp
@@ -712,7 +712,9 @@
 			}
 			// logs
 			Vector logVect=new Vector(det.CacheLogs.size());
-			for (int i=0; i<det.CacheLogs.size(); i++) {
+			int maxlogs = det.CacheLogs.size();
+			if (nrOfLogs < maxlogs ) maxlogs=nrOfLogs;
+			for (int i=0; i<maxlogs; i++) {
 				Hashtable logs=new Hashtable();
 				String stmp;
 				if (det.CacheLogs.getLog(i).getIcon().equals("MAXLOG")) {
@@ -734,8 +736,23 @@
 				logs.put("MESSAGE", (ModTyp == 0) ? SafeXML.cleanGPX(stmp) : stmp);
 				logVect.add(logs);
 			}
-			varParams.put("LOGS",logVect);
+			if (nrOfLogs>0) varParams.put("LOGS",logVect);
 
+			if (hasAddiWpt()) {
+				Vector addiVect=new Vector(addiWpts.size());
+				for (int i=0; i<addiWpts.size(); i++) {
+					Hashtable addis=new Hashtable();
+					CacheHolder ch=(CacheHolder) addiWpts.get(i);
+					addis.put("WAYPOINT",ch.getWayPoint());
+					addis.put("NAME",(ModTyp == 0) ? SafeXML.cleanGPX(ch.getCacheName()) : ch.getCacheName());
+					addis.put("LATLON",ch.getLatLon());
+					addis.put("IMG",(ModTyp == 0) ? CacheType.typeImageForId(ch.getType()) : "<img src=\""+CacheType.typeImageForId(ch.getType())+"\">");
+					addis.put("LONGDESC",(ModTyp == 0) ? SafeXML.cleanGPX(ch.getCacheDetails(false).LongDescription) : ch.getCacheDetails(false).LongDescription);
+					addiVect.add(addis);
+				}
+				varParams.put("ADDIS",addiVect);
+			}
+
 		}
 		return varParams;
 	}	

Modified: trunk/src/CacheWolf/ShowCacheInBrowser.java
===================================================================
--- trunk/src/CacheWolf/ShowCacheInBrowser.java	2010-07-16 18:17:19 UTC (rev 2687)
+++ trunk/src/CacheWolf/ShowCacheInBrowser.java	2010-07-17 08:53:12 UTC (rev 2688)
@@ -66,7 +66,7 @@
 			if(chD.isVisible()){
 				Vm.showWait(true);
 				try {
-					tpl.setParams(chD.toHashtable(new Regex("[,.]","."), null, 0, 30, new AsciiCodec(), null, true, 1));
+					tpl.setParams(chD.toHashtable(new Regex("[,.]","."), null, 0, 30, -1, new AsciiCodec(), null, true, 1));
 					// Look for images
 					// count only the images of main body
 					int start=0;
@@ -106,21 +106,6 @@
 					}
 					if (!chD.is_available()) tpl.setParam("UNAVAILABLE","1");
 					if (!chD.getCacheDetails(true).Hints.equals("null"))tpl.setParam("HINT",Common.rot13(chD.getCacheDetails(true).Hints));
-
-					if (chD.hasAddiWpt()) {
-						Vector addiVect=new Vector(chD.addiWpts.size());
-						for (int i=0; i<chD.addiWpts.size(); i++) {
-							Hashtable addis=new Hashtable();
-							CacheHolder ch=(CacheHolder) chD.addiWpts.get(i);
-							addis.put("WAYPOINT",ch.getWayPoint());
-							addis.put("NAME",ch.getCacheName());
-							addis.put("LATLON",ch.getLatLon());
-							addis.put("IMG","<img src=\""+CacheType.typeImageForId(ch.getType())+"\">");
-							addis.put("LONGDESC",ch.getCacheDetails(true).LongDescription); // Do we need to treat longDesc as above ?
-							addiVect.add(addis);
-						}
-						tpl.setParam("ADDIS",addiVect);
-					}
 				}catch(Exception e){
 					Vm.debug("Problem getting Parameter, Cache: " + chD.getWayPoint());
 					Global.getPref().log("Problem getting parameter "+e.toString()+", Cache: " + chD.getWayPoint());

Modified: trunk/src/CacheWolf/exp/HTMLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/HTMLExporter.java	2010-07-16 18:17:19 UTC (rev 2687)
+++ trunk/src/CacheWolf/exp/HTMLExporter.java	2010-07-17 08:53:12 UTC (rev 2688)
@@ -91,7 +91,7 @@
 						continue;
 					}
 					det=ch.getCacheDetails(false);
-					varParams=ch.toHashtable(dec, null, 0, 30, new AsciiCodec(), null, false, 2);
+					varParams=ch.toHashtable(dec, null, 0, 30, -1, new AsciiCodec(), null, false, 2);
 					cache_index.add(varParams);
 					//We can generate the individual page here!
 					try{

Modified: trunk/src/CacheWolf/exp/TPLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/TPLExporter.java	2010-07-16 18:17:19 UTC (rev 2687)
+++ trunk/src/CacheWolf/exp/TPLExporter.java	2010-07-17 08:53:12 UTC (rev 2688)
@@ -52,6 +52,7 @@
 	String decSep = ".";
 	int shortNameLength=30;
 	int shortWaypointLength=3;
+	int noOfLogs=-1; // means all
 	String out="*.gpx";
 
 
@@ -120,11 +121,13 @@
 			if (param.equals("WaypointLength")) {
 				shortWaypointLength = Integer.valueOf(value).intValue();
 			}
+			if (param.equals("NrLogs")) {
+				noOfLogs = Integer.valueOf(value).intValue();
+			}
 			if (param.equals("Out")) {
 				out = value;
 			}
 
-
 		}
 		return t;
 	}
@@ -194,7 +197,7 @@
 				h.changed();
 				if(ch.isVisible() && ch.pos.isValid()){
 					try {
-						cache_index.add(ch.toHashtable(dec, rex, myFilter.shortWaypointLength, myFilter.shortNameLength, myFilter.codec, gm, false, 0));
+						cache_index.add(ch.toHashtable(dec, rex, myFilter.shortWaypointLength, myFilter.shortNameLength, myFilter.noOfLogs, myFilter.codec, gm, false, 0));
 					}catch(Exception e){
 						Vm.debug("Problem getting Parameter, Cache: " + ch.getWayPoint());
 						e.printStackTrace();

Modified: trunk/src/CacheWolf/myTableControl.java
===================================================================
--- trunk/src/CacheWolf/myTableControl.java	2010-07-16 18:17:19 UTC (rev 2687)
+++ trunk/src/CacheWolf/myTableControl.java	2010-07-17 08:53:12 UTC (rev 2688)
@@ -234,20 +234,25 @@
 		} else
 		
 		if (selectedItem == miChangeBlack){
-			for(int i = cacheDB.size()-1; i >=0; i--){
-				CacheHolder currCache = cacheDB.get(i);
-				if ( currCache.is_Checked) {
-					if (currCache.isAddiWpt()) {
-						// currCache.setBlack(!currCache.is_black());
-					} else {
-						currCache.setBlack(!currCache.is_black());
-						currCache.save(); // to reflect it in xml
+			Vm.showWait(true);
+			try {
+				for(int i = cacheDB.size()-1; i >=0; i--){
+					CacheHolder currCache = cacheDB.get(i);
+					if ( currCache.isVisible() && currCache.is_Checked) {
+						if (currCache.isAddiWpt()) {
+							// currCache.setBlack(!currCache.is_black());
+						} else {
+							currCache.setBlack(!currCache.is_black());
+							currCache.save(); // to reflect it in xml and what takes time reading+writing
+						}
 					}
 				}
-			}
-			// profile.saveIndex(pref,true);
-			profile.buildReferences();
-			tbp.refreshTable();
+				// profile.saveIndex(pref,true);
+				profile.buildReferences();
+				tbp.refreshTable();
+			} finally {
+				Vm.showWait(false);
+			};
 		} else
 
 		if (selectedItem == miCenter){



From araber95 at mail.berlios.de  Sat Jul 17 04:44:51 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sat, 17 Jul 2010 04:44:51 PM +0200
Subject: [Cachewolf-svn] r2689 - in trunk: res_noewe/templates src/CacheWolf
Message-ID: <20100717144451.D2CD9480B6D@sheep.berlios.de>

Author: araber95
Date: 2010-07-17 16:44:51 +0200 (Sat, 17 Jul 2010)
New Revision: 2689

Modified:
   trunk/res_noewe/templates/Short documentation for the export via templates.htm
   trunk/src/CacheWolf/CacheHolder.java
Log:
extensions and corrections for addi wp tpl export

Modified: trunk/res_noewe/templates/Short documentation for the export via templates.htm
===================================================================
--- trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-07-17 08:53:12 UTC (rev 2688)
+++ trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-07-17 14:44:51 UTC (rev 2689)
@@ -295,8 +295,7 @@
 Bearing calculated in <span class=SpellE>cachelist</span><br>
 LATON<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 Coordinates in long format, e.g. N 50? 31.234 E 008? 45.267<br>
-LAT<span style='mso-tab-count:2'>????????????????? </span><span
-style='mso-tab-count:7'>????????????????????????????????????????????????????????????????????????????????? </span>:
+LAT<span style='mso-tab-count:1'>????? </span><span style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 &lt;<span class=SpellE>wpt</span> lat=?<span class=SpellE>xx.yyyy</span>?
 ??..&gt; Latitude in decimal format, e.g. 50.20147<br>
 LON<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
@@ -330,8 +329,8 @@
 auf <span class=SpellE>eine</span> in den <span class=SpellE>Einstellungen</span>
 <span class=SpellE>vorgegebene</span> <span class=SpellE>L?nge</span> <span
 class=SpellE>gek?rzt</span> <span class=SpellE>wird</span>. <br>
-<span style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????????????? </span><span
-style='mso-tab-count:1'>??????????? </span>: (<span class=SpellE>Hintergrund</span>:
+<span style='mso-tab-count:7'>????????????????????????????????????????????????????????????????????????????????? </span><span
+style='mso-tab-count:2'>??????????????????????? </span>: (<span class=SpellE>Hintergrund</span>:
 <span class=SpellE>das</span> Notes -<span class=SpellE>Feld</span> <span
 class=SpellE>der</span> <span class=SpellE>meisten</span> <span class=SpellE>Garmins</span>
 <span class=SpellE>kann</span> <span class=SpellE>nur</span> 30 <span
@@ -431,7 +430,15 @@
 LATLON<span style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 <span class=SpellE>Koordinaten</span> des <span class=SpellE>Addi</span><br>
 IMG<span style='mso-tab-count:9'>??????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
-Name des <span class=SpellE>Addi</span> Icons<br>
+Name des <span class=SpellE>Addi</span> Icons <span class=SpellE>png</span>
+(resources <span class=SpellE>oder</span> <span class=SpellE>exporticons</span><span
+class=GramE>)</span><br>
+ICON<span style='mso-tab-count:9'>????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+CW-<span class=SpellE>Typenr</span>, Name des <span class=SpellE>Addi</span>
+Icons (symbols)<br>
+TYPENAME<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????? </span>:
+<span class=SpellE>Typename</span> des <span class=SpellE>Addi</span> <span
+class=SpellE>wie</span> in <span class=SpellE>der</span> GUI<br>
 LONGDESC<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????? </span>:
 <span class=SpellE>Beschreibungstext</span> <span class=SpellE>f?r</span> den
 Addi<o:p></o:p></span></p>
@@ -470,9 +477,8 @@
 name=DIFFICULTY&gt;-&lt;<span class=SpellE>tmpl_var</span> name=TERRAIN&gt;
 &lt;<span class=SpellE>tmpl_var</span> name=NAME&gt;&quot;;&lt;<span
 class=SpellE>tmpl_var</span> name=LAT&gt;;&lt;<span class=SpellE>tmpl_var</span>
-name=LON&gt;;&quot;&lt;<span class=SpellE>tmpl_var</span>
-name=TYPE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
-name=SIZE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
+name=LON&gt;;&quot;&lt;<span class=SpellE>tmpl_var</span> name=TYPE&gt;&quot;;&quot;&lt;<span
+class=SpellE>tmpl_var</span> name=SIZE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
 name=WAYPOINT&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
 name=DATE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
 name=URL&gt;&quot;&lt;<span class=SpellE>br</span> /&gt;<br>
@@ -634,8 +640,8 @@
 style='mso-spacerun:yes'>? </span>you</span></span><span lang=EN-GB
 style='mso-ansi-language:EN-GB'> </span><span lang=EN-GB style='font-size:10.0pt;
 font-family:Arial;mso-ansi-language:EN-GB'>place &lt;<span class=SpellE>tmpl_var</span>&gt;s.<b
-style='mso-bidi-font-weight:normal'> The only loop used by the template
-exporter is '<span class=SpellE>cache_index</span>', see example above. </b></span><span
+style='mso-bidi-font-weight:normal'> The only loop used by the template exporter
+is '<span class=SpellE>cache_index</span>', see example above. </b></span><span
 lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
@@ -673,8 +679,8 @@
 if both __FIRST__ and __LAST__ are false<br>
 __COUNTER__<span style='mso-tab-count:1'> </span></span><span lang=EN-GB
 style='mso-ansi-language:EN-GB'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-GB
-style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>Which
-iteration is currently on. Starts at 1<br style='mso-special-character:line-break'>
+style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>Which iteration
+is currently on. Starts at 1<br style='mso-special-character:line-break'>
 <![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
 <![endif]></span><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>
 

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-07-17 08:53:12 UTC (rev 2688)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-07-17 14:44:51 UTC (rev 2689)
@@ -713,7 +713,7 @@
 			// logs
 			Vector logVect=new Vector(det.CacheLogs.size());
 			int maxlogs = det.CacheLogs.size();
-			if (nrOfLogs < maxlogs ) maxlogs=nrOfLogs;
+			if (nrOfLogs > -1 && nrOfLogs < maxlogs ) maxlogs=nrOfLogs;
 			for (int i=0; i<maxlogs; i++) {
 				Hashtable logs=new Hashtable();
 				String stmp;
@@ -736,7 +736,7 @@
 				logs.put("MESSAGE", (ModTyp == 0) ? SafeXML.cleanGPX(stmp) : stmp);
 				logVect.add(logs);
 			}
-			if (nrOfLogs>0) varParams.put("LOGS",logVect);
+			if (maxlogs>0) varParams.put("LOGS",logVect);
 
 			if (hasAddiWpt()) {
 				Vector addiVect=new Vector(addiWpts.size());
@@ -747,6 +747,8 @@
 					addis.put("NAME",(ModTyp == 0) ? SafeXML.cleanGPX(ch.getCacheName()) : ch.getCacheName());
 					addis.put("LATLON",ch.getLatLon());
 					addis.put("IMG",(ModTyp == 0) ? CacheType.typeImageForId(ch.getType()) : "<img src=\""+CacheType.typeImageForId(ch.getType())+"\">");
+					addis.put("ICON",""+ch.getType());
+					addis.put("TYPENAME", CacheType.type2Gui(ch.getType()));
 					addis.put("LONGDESC",(ModTyp == 0) ? SafeXML.cleanGPX(ch.getCacheDetails(false).LongDescription) : ch.getCacheDetails(false).LongDescription);
 					addiVect.add(addis);
 				}



From araber95 at mail.berlios.de  Sat Jul 17 06:31:48 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sat, 17 Jul 2010 06:31:48 PM +0200
Subject: [Cachewolf-svn] r2690 - in trunk: res_noewe/templates src/CacheWolf
Message-ID: <20100717163148.A5ED3480BC7@sheep.berlios.de>

Author: araber95
Date: 2010-07-17 18:31:48 +0200 (Sat, 17 Jul 2010)
New Revision: 2690

Modified:
   trunk/res_noewe/templates/Short documentation for the export via templates.htm
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/CacheHolderDetail.java
   trunk/src/CacheWolf/DescriptionPanel.java
   trunk/src/CacheWolf/ImageInfo.java
   trunk/src/CacheWolf/ShowCacheInBrowser.java
Log:
adding image - information to the tpl-exporter

Modified: trunk/res_noewe/templates/Short documentation for the export via templates.htm
===================================================================
--- trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-07-17 14:44:51 UTC (rev 2689)
+++ trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-07-17 16:31:48 UTC (rev 2690)
@@ -445,11 +445,23 @@
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
 mso-outline-level:1'><span lang=EN-GB style='font-size:10.0pt;font-family:Arial;
-mso-ansi-language:EN-GB'>Further documentation of template library:
-http://html-tmpl-java.sourceforge.net/</span><span lang=EN-GB style='mso-ansi-language:
-EN-GB'><o:p></o:p></span></p>
+mso-ansi-language:EN-GB'>ALLIMGS<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????????? </span>:
+the &lt;<span class=SpellE>tmpl_loop</span> ALLIMGS&gt;<br>
+FILENAME<span style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????????? </span>:
+the filename in the profile directory<br>
+TEXT<span style='mso-tab-count:9'>????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+caption<br>
+COMMENT<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????? </span>:
+description<br>
+URL<span style='mso-tab-count:9'>??????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+original source of the image<o:p></o:p></span></p>
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
+mso-outline-level:1'><span lang=EN-GB style='font-size:10.0pt;font-family:Arial;
+mso-ansi-language:EN-GB'>Further documentation of template library: http://html-tmpl-java.sourceforge.net/</span><span
+lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>
+
+<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
 mso-outline-level:1'><u><span lang=EN-GB style='font-size:10.0pt;font-family:
 Arial;mso-ansi-language:EN-GB'>Example</span></u><u><span lang=EN-GB
 style='mso-ansi-language:EN-GB'><o:p></o:p></span></u></p>
@@ -477,8 +489,9 @@
 name=DIFFICULTY&gt;-&lt;<span class=SpellE>tmpl_var</span> name=TERRAIN&gt;
 &lt;<span class=SpellE>tmpl_var</span> name=NAME&gt;&quot;;&lt;<span
 class=SpellE>tmpl_var</span> name=LAT&gt;;&lt;<span class=SpellE>tmpl_var</span>
-name=LON&gt;;&quot;&lt;<span class=SpellE>tmpl_var</span> name=TYPE&gt;&quot;;&quot;&lt;<span
-class=SpellE>tmpl_var</span> name=SIZE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
+name=LON&gt;;&quot;&lt;<span class=SpellE>tmpl_var</span>
+name=TYPE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
+name=SIZE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
 name=WAYPOINT&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
 name=DATE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
 name=URL&gt;&quot;&lt;<span class=SpellE>br</span> /&gt;<br>
@@ -640,8 +653,8 @@
 style='mso-spacerun:yes'>? </span>you</span></span><span lang=EN-GB
 style='mso-ansi-language:EN-GB'> </span><span lang=EN-GB style='font-size:10.0pt;
 font-family:Arial;mso-ansi-language:EN-GB'>place &lt;<span class=SpellE>tmpl_var</span>&gt;s.<b
-style='mso-bidi-font-weight:normal'> The only loop used by the template exporter
-is '<span class=SpellE>cache_index</span>', see example above. </b></span><span
+style='mso-bidi-font-weight:normal'> The only loop used by the template
+exporter is '<span class=SpellE>cache_index</span>', see example above. </b></span><span
 lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
@@ -671,16 +684,16 @@
 for the last run of the loop, false otherwise<br>
 __ODD__<span style='mso-tab-count:1'>????????? </span></span><span lang=EN-GB
 style='mso-ansi-language:EN-GB'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-GB
-style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>True for
-every other iteration of the loop - a loop starts at 1<br>
+style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>True for every
+other iteration of the loop - a loop starts at 1<br>
 __INNER__</span><span lang=EN-GB style='mso-ansi-language:EN-GB'><span
 style='mso-tab-count:1'>?????? </span>&nbsp;&nbsp;&nbsp; </span><span
 lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>True
 if both __FIRST__ and __LAST__ are false<br>
 __COUNTER__<span style='mso-tab-count:1'> </span></span><span lang=EN-GB
 style='mso-ansi-language:EN-GB'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-GB
-style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>Which iteration
-is currently on. Starts at 1<br style='mso-special-character:line-break'>
+style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>Which
+iteration is currently on. Starts at 1<br style='mso-special-character:line-break'>
 <![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
 <![endif]></span><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>
 

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-07-17 14:44:51 UTC (rev 2689)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-07-17 16:31:48 UTC (rev 2690)
@@ -752,9 +752,17 @@
 					addis.put("LONGDESC",(ModTyp == 0) ? SafeXML.cleanGPX(ch.getCacheDetails(false).LongDescription) : ch.getCacheDetails(false).LongDescription);
 					addiVect.add(addis);
 				}
-				varParams.put("ADDIS",addiVect);
+				if (addiWpts.size()>0) varParams.put("ADDIS",addiVect);
 			}
-
+			Vector imgVect=new Vector(det.images.size());
+			for (int i=0; i<det.images.size(); i++) {
+				Hashtable imgs=new Hashtable();
+				imgs.put("FILENAME",det.images.get(i).getFilename());
+				imgs.put("TEXT",det.images.get(i).getTitle());
+				imgs.put("COMMENT",det.images.get(i).getComment());
+				imgs.put("URL",det.images.get(i).getURL());
+			}
+			if (det.images.size()>0) varParams.put("ALLIMGS",imgVect);
 		}
 		return varParams;
 	}	

Modified: trunk/src/CacheWolf/CacheHolderDetail.java
===================================================================
--- trunk/src/CacheWolf/CacheHolderDetail.java	2010-07-17 14:44:51 UTC (rev 2689)
+++ trunk/src/CacheWolf/CacheHolderDetail.java	2010-07-17 16:31:48 UTC (rev 2690)
@@ -401,7 +401,7 @@
 				  int iis = images.size();
 				  for(int i = 0;i<iis;i++){
 						stbuf = images.get(i).getTitle();
-						if (i< iis && images.get(i).getComment() != null)
+						if (i< iis && !images.get(i).getComment().equals(""))
 							detfile.print("    <IMGTEXT>"+stbuf+"<DESC>"+images.get(i).getComment()+"</DESC></IMGTEXT>\n");
 						else 
 							detfile.print("    <IMGTEXT>"+stbuf+"</IMGTEXT>\n");
@@ -453,7 +453,7 @@
 		 */
 		public boolean hasImageInfo() {
 			for (int i=this.images.size()-1; i>=0; i--)
-				if (this.images.get(i).getComment() != null) return true;
+				if (!this.images.get(i).getComment().equals("")) return true;
 			return false;
 		}
 

Modified: trunk/src/CacheWolf/DescriptionPanel.java
===================================================================
--- trunk/src/CacheWolf/DescriptionPanel.java	2010-07-17 14:44:51 UTC (rev 2689)
+++ trunk/src/CacheWolf/DescriptionPanel.java	2010-07-17 16:31:48 UTC (rev 2690)
@@ -139,7 +139,7 @@
 		for (int i=imagesShown; i<chD.images.size(); i++) {
 			sb.append(chD.images.get(i).getTitle()).append("<br>");
 			// Show the additional text if there is one
-			if (chD.images.get(i).getComment()!=null) sb.append("<font color='blue'>").append(chD.images.get(i).getComment()).append("</font>");
+			if (!chD.images.get(i).getComment().equals("")) sb.append("<font color='blue'>").append(chD.images.get(i).getComment()).append("</font>");
 			// Only show the image if images are enabled
 			if (Global.getPref().descShowImg) sb.append("<img src=\""+chD.images.get(i).getFilename()+"\"><br>");
 			sb.append("<br><br><hr>");

Modified: trunk/src/CacheWolf/ImageInfo.java
===================================================================
--- trunk/src/CacheWolf/ImageInfo.java	2010-07-17 14:44:51 UTC (rev 2689)
+++ trunk/src/CacheWolf/ImageInfo.java	2010-07-17 16:31:48 UTC (rev 2690)
@@ -49,19 +49,15 @@
 	 * @return Comment
 	 */
 	public String getComment() {
+		if (comment == null) return "";
     	return comment;
     }
 	/**
-	 * Sets the comment of the image. If an empty string is passed, the comment will be set to <code>
-	 * null</code>.
+	 * Sets the comment of the image.
 	 * @param comment Comment
 	 */
 	public void setComment(String comment) {
-		if (comment != null && comment.equals("")) {
-			this.comment = null;
-		} else {
 			this.comment = comment;
-		}
     }
 	public String getURL() {
 		if (URL == null) return "";

Modified: trunk/src/CacheWolf/ShowCacheInBrowser.java
===================================================================
--- trunk/src/CacheWolf/ShowCacheInBrowser.java	2010-07-17 14:44:51 UTC (rev 2689)
+++ trunk/src/CacheWolf/ShowCacheInBrowser.java	2010-07-17 16:31:48 UTC (rev 2690)
@@ -95,10 +95,8 @@
 							imgs.put("IMAGE","<img src=\"file://"+
 									   Global.getProfile().dataDir+chD.getCacheDetails(true).images.get(imageNo).getFilename()+"\" border=0>");
 							imgs.put("IMAGETEXT",chD.getCacheDetails(true).images.get(imageNo).getTitle());
-							if (imageNo<chD.getCacheDetails(true).images.size() && chD.getCacheDetails(true).images.get(imageNo).getComment()!=null)
+							if (imageNo<chD.getCacheDetails(true).images.size())
 								imgs.put("IMAGECOMMENT",chD.getCacheDetails(true).images.get(imageNo).getComment());
-							else
-								imgs.put("IMAGECOMMENT","");
 							imgs.put("I","'img"+new Integer(imageNo).toString()+"'");
 							imageVect.add(imgs);
 						}



From admin at berlios.de  Sat Jul 17 18:34:47 2010
From: admin at berlios.de (admin at berlios.de)
Date: Sat, 17 Jul 2010 18:34:47 +0200 (CEST)
Subject: [Cachewolf-svn] [Bug #17339] Bilder - Infos im  tpl-Exporter
Message-ID: <201007171634.o6HGYl9m005505@unicorn.berlios.de>

Bug #17339, was updated on 2010-Jul-06 17:30
Here is a current snapshot of the bug.

Project: CacheWolf
Category: Import/Export
Status: Open
Resolution: None
Bug Group: Feature Request
Priority: 5
Submitted by: araber95
Assigned to : none
Summary: Bilder - Infos im  tpl-Exporter

Details: Infos ?ber die Bilder eines Caches im Template - Exporter zur Verf?gung stellen.

Follow-Ups:

Date: 2010-Jul-17 18:34
By: araber95

Comment:
mit 2690 erledigt
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17339&group_id=2211


From admin at berlios.de  Sat Jul 17 18:34:55 2010
From: admin at berlios.de (admin at berlios.de)
Date: Sat, 17 Jul 2010 18:34:55 +0200 (CEST)
Subject: [Cachewolf-svn] [Bug #17339] Bilder - Infos im  tpl-Exporter
Message-ID: <201007171634.o6HGYtjb005762@unicorn.berlios.de>

Bug #17339, was updated on 2010-Jul-06 17:30
Here is a current snapshot of the bug.

Project: CacheWolf
Category: Import/Export
Status: Open
Resolution: None
Bug Group: Feature Request
Priority: 5
Submitted by: araber95
Assigned to : none
Summary: Bilder - Infos im  tpl-Exporter

Details: Infos ?ber die Bilder eines Caches im Template - Exporter zur Verf?gung stellen.

Follow-Ups:

Date: 2010-Jul-17 18:34
By: araber95

Comment:
mit 2690 erledigt
-------------------------------------------------------

Date: 2010-Jul-17 18:34
By: araber95

Comment:
mit 2690 erledigt
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17339&group_id=2211


From admin at berlios.de  Sat Jul 17 18:35:36 2010
From: admin at berlios.de (admin at berlios.de)
Date: Sat, 17 Jul 2010 18:35:36 +0200 (CEST)
Subject: [Cachewolf-svn] [Bug #17339] Bilder - Infos im  tpl-Exporter
Message-ID: <201007171635.o6HGZaFM006483@unicorn.berlios.de>

Bug #17339, was updated on 2010-Jul-06 17:30
Here is a current snapshot of the bug.

Project: CacheWolf
Category: Import/Export
Status: Closed
Resolution: None
Bug Group: Feature Request
Priority: 5
Submitted by: araber95
Assigned to : none
Summary: Bilder - Infos im  tpl-Exporter

Details: Infos ?ber die Bilder eines Caches im Template - Exporter zur Verf?gung stellen.

Follow-Ups:

Date: 2010-Jul-17 18:34
By: araber95

Comment:
mit 2690 erledigt
-------------------------------------------------------

Date: 2010-Jul-17 18:34
By: araber95

Comment:
mit 2690 erledigt
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17339&group_id=2211


From araber95 at mail.berlios.de  Sun Jul 18 11:35:50 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sun, 18 Jul 2010 11:35:50 AM +0200
Subject: [Cachewolf-svn] r2691 - trunk/src/CacheWolf
Message-ID: <20100718093550.3B875480BC1@sheep.berlios.de>

Author: araber95
Date: 2010-07-18 11:35:50 +0200 (Sun, 18 Jul 2010)
New Revision: 2691

Modified:
   trunk/src/CacheWolf/PreferencesScreen.java
Log:
preferences window size without scrollbars on windows exe

Modified: trunk/src/CacheWolf/PreferencesScreen.java
===================================================================
--- trunk/src/CacheWolf/PreferencesScreen.java	2010-07-17 16:31:48 UTC (rev 2690)
+++ trunk/src/CacheWolf/PreferencesScreen.java	2010-07-18 09:35:50 UTC (rev 2691)
@@ -57,7 +57,7 @@
 		}
 		else if(pref.fontSize <= 28){
 			// was for <=16 setPreferredSize(288,252);
-			setPreferredSize(pref.fontSize*18,pref.fontSize*16);
+			setPreferredSize(pref.fontSize*20,pref.fontSize*18);
 		}
 		else if(pref.fontSize <= 20){
 			setPreferredSize(352,302);



From araber95 at mail.berlios.de  Mon Jul 19 12:08:55 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 19 Jul 2010 12:08:55 AM +0200
Subject: [Cachewolf-svn] r2692 - in trunk: res_noewe/templates src/CacheWolf
	src/CacheWolf/exp
Message-ID: <20100718220855.CB8C2480E8E@sheep.berlios.de>

Author: araber95
Date: 2010-07-19 00:08:55 +0200 (Mon, 19 Jul 2010)
New Revision: 2692

Modified:
   trunk/res_noewe/templates/Short documentation for the export via templates.htm
   trunk/src/CacheWolf/MainMenu.java
   trunk/src/CacheWolf/exp/TPLExporter.java
Log:
now you can nearly do everything with the tpl - exporter : two new params are introduced singleFile and formatModifier. explanation see doc

Modified: trunk/res_noewe/templates/Short documentation for the export via templates.htm
===================================================================
--- trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-07-18 09:35:50 UTC (rev 2691)
+++ trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-07-18 22:08:55 UTC (rev 2692)
@@ -208,8 +208,15 @@
 Filename or Extension<br>
 &lt;<span class=SpellE>tmpl_par</span> name=&quot;<span class=SpellE>NrLogs</span>
 &quot; value=&quot;-1&quot;&gt;<span style='mso-tab-count:4'>???????????????????????????????????? </span><span
-class=SpellE>Anzahl</span> logs (-1 = alle)</span><span lang=EN-GB
-style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>
+class=SpellE>Anzahl</span> logs (-1 = alle)<br>
+&lt;<span class=SpellE>tmpl_par</span> name=&quot;<span class=SpellE>singleFile</span>&quot;
+value=&quot;yes&quot;&gt;<span style='mso-tab-count:3'>??????????????????????????????? </span>one
+<span class=SpellE>outputfile</span> value=?yes? or one file per cache value=?no?
+(use a dummy / not existing name for Out par)<br>
+&lt;<span class=SpellE>tmpl_par</span> name=&quot;<span class=SpellE>formatModifier</span>&quot;
+value=&quot;0&quot;&gt;<span style='mso-tab-count:3'>???????????????????????????? </span>0
+is xml as <span class=SpellE>gpx</span> generation before, 1 is html like <span
+class=SpellE>showCacheInBrowser</span>, 2 is html like html-exporter<o:p></o:p></span></p>
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
 mso-outline-level:1'><u><span lang=EN-GB style='font-size:10.0pt;font-family:
@@ -458,8 +465,9 @@
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
 mso-outline-level:1'><span lang=EN-GB style='font-size:10.0pt;font-family:Arial;
-mso-ansi-language:EN-GB'>Further documentation of template library: http://html-tmpl-java.sourceforge.net/</span><span
-lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>
+mso-ansi-language:EN-GB'>Further documentation of template library:
+http://html-tmpl-java.sourceforge.net/</span><span lang=EN-GB style='mso-ansi-language:
+EN-GB'><o:p></o:p></span></p>
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
 mso-outline-level:1'><u><span lang=EN-GB style='font-size:10.0pt;font-family:
@@ -614,9 +622,9 @@
 the if block allows us to display some output if a condition is true<span
 class=GramE>,<span style='mso-spacerun:yes'>? </span>we</span></span><span
 lang=EN-GB style='mso-ansi-language:EN-GB'> </span><span lang=EN-GB
-style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>may also
-need to display content if the condition is false. This can be done by using
-the optional else</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> </span><span
+style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>may also need
+to display content if the condition is false. This can be done by using the
+optional else</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> </span><span
 lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>branch
 of <span class=GramE>the if</span> block.</span><span lang=EN-GB
 style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>
@@ -684,8 +692,8 @@
 for the last run of the loop, false otherwise<br>
 __ODD__<span style='mso-tab-count:1'>????????? </span></span><span lang=EN-GB
 style='mso-ansi-language:EN-GB'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-GB
-style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>True for every
-other iteration of the loop - a loop starts at 1<br>
+style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>True for
+every other iteration of the loop - a loop starts at 1<br>
 __INNER__</span><span lang=EN-GB style='mso-ansi-language:EN-GB'><span
 style='mso-tab-count:1'>?????? </span>&nbsp;&nbsp;&nbsp; </span><span
 lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>True

Modified: trunk/src/CacheWolf/MainMenu.java
===================================================================
--- trunk/src/CacheWolf/MainMenu.java	2010-07-18 09:35:50 UTC (rev 2691)
+++ trunk/src/CacheWolf/MainMenu.java	2010-07-18 22:08:55 UTC (rev 2692)
@@ -465,7 +465,7 @@
 				fc.addMask("*.tpl");
 				fc.setTitle(MyLocale.getMsg(910,"Select Template file"));
 				if(fc.execute() != FormBase.IDCANCEL){
-					TPLExporter tpl = new TPLExporter( pref,profile, fc.getChosenFile().toString());
+					TPLExporter tpl = new TPLExporter( pref, profile, fc.getChosenFile().toString());
 					tpl.doIt();
 				}
 			}

Modified: trunk/src/CacheWolf/exp/TPLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/TPLExporter.java	2010-07-18 09:35:50 UTC (rev 2691)
+++ trunk/src/CacheWolf/exp/TPLExporter.java	2010-07-18 22:08:55 UTC (rev 2692)
@@ -37,6 +37,7 @@
 import ewe.sys.*;
 import ewe.ui.*;
 import ewe.util.*;
+
 import com.stevesoft.ewe_pat.*;
 
 /**
@@ -53,6 +54,8 @@
 	int shortNameLength=30;
 	int shortWaypointLength=3;
 	int noOfLogs=-1; // means all
+	boolean single = true;
+	int formatModifier = 0;
 	String out="*.gpx";
 
 
@@ -124,6 +127,12 @@
 			if (param.equals("NrLogs")) {
 				noOfLogs = Integer.valueOf(value).intValue();
 			}
+			if (param.equals("singleFile")) {
+				single = value.equals("yes") ? true : false ;
+			}
+			if (param.equals("formatModifier")) {
+				formatModifier = Integer.valueOf(value).intValue();
+			}
 			if (param.equals("Out")) {
 				out = value;
 			}
@@ -197,7 +206,17 @@
 				h.changed();
 				if(ch.isVisible() && ch.pos.isValid()){
 					try {
-						cache_index.add(ch.toHashtable(dec, rex, myFilter.shortWaypointLength, myFilter.shortNameLength, myFilter.noOfLogs, myFilter.codec, gm, false, 0));
+						Hashtable varParams=ch.toHashtable(dec, rex, myFilter.shortWaypointLength, myFilter.shortNameLength, myFilter.noOfLogs, myFilter.codec, gm, false, myFilter.formatModifier);
+						if (myFilter.single) {
+							cache_index.add(varParams);
+						}
+						else {
+							tpl.setParams(varParams);
+							String ext = (myFilter.out.substring(myFilter.out.lastIndexOf(".")).toLowerCase()+"    ").trim();
+							PrintWriter pagefile = new PrintWriter(new BufferedWriter(new FileWriter(saveTo.getPath() + ch.getWayPoint() + ext)));
+							pagefile.print(tpl.output());
+							pagefile.close();							
+						}
 					}catch(Exception e){
 						Vm.debug("Problem getting Parameter, Cache: " + ch.getWayPoint());
 						e.printStackTrace();
@@ -205,14 +224,16 @@
 					}
 				}
 			}
-			tpl.setParam("cache_index", cache_index);
-			PrintWriter detfile;
-			FileWriter fw = new FileWriter(saveTo);
-			fw.codec = myFilter.codec;
-			detfile = new PrintWriter(new BufferedWriter(fw));
-			tpl.printTo(detfile);
-			//detfile.print(tpl.output());
-			detfile.close();
+			if (myFilter.single) {
+				tpl.setParam("cache_index", cache_index);
+				PrintWriter detfile;
+				FileWriter fw = new FileWriter(saveTo);
+				fw.codec = myFilter.codec;
+				detfile = new PrintWriter(new BufferedWriter(fw));
+				tpl.printTo(detfile);
+				//detfile.print(tpl.output());
+				detfile.close();
+			}
 		} catch (Exception e) {
 			e.printStackTrace();
 			Global.getPref().log("Exception in TplExporter", e, true);



From admin at berlios.de  Mon Jul 19 00:31:21 2010
From: admin at berlios.de (admin at berlios.de)
Date: Mon, 19 Jul 2010 00:31:21 +0200 (CEST)
Subject: [Cachewolf-svn] [Bug #17338] Template-Exporter wahlweise mit xml /
	html / textAusgabe
Message-ID: <201007182231.o6IMVLd4019186@unicorn.berlios.de>

Bug #17338, was updated on 2010-Jul-06 17:27
Here is a current snapshot of the bug.

Project: CacheWolf
Category: Import/Export
Status: Closed
Resolution: None
Bug Group: Feature Request
Priority: 5
Submitted by: araber95
Assigned to : none
Summary: Template-Exporter wahlweise mit xml / html / textAusgabe

Details: Im Moment werden verschieden Felder z.B. long description ,... als SafeXML.cleanGPX formattiert. Intern f?r showCacheInBrowser werden die Felder schon als html zur Verf?gung gestellt.

Das k?nnte man ?ber einen tmpl_par zur allgemeinen Benutzung zur Verf?gung stellen.

Eine weitere Anwendung k?nnte das Ersetzen der html-tags sein, um eine reine Textausgabe zu haben. (z.B. Anwendung vom Ruhrcacher , Anzeige auf mp3-player)

Follow-Ups:

Date: 2010-Jul-19 00:31
By: araber95

Comment:
ok, reine textausgabe ist noch nicht drin. aber alle bisherigen M?glichkeiten.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=17338&group_id=2211


From araber95 at mail.berlios.de  Mon Jul 19 12:47:54 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 19 Jul 2010 12:47:54 PM +0200
Subject: [Cachewolf-svn] r2693 - trunk/res_noewe/webmapservices
Message-ID: <20100719104754.AD7AC4805C0@sheep.berlios.de>

Author: araber95
Date: 2010-07-19 12:47:54 +0200 (Mon, 19 Jul 2010)
New Revision: 2693

Added:
   trunk/res_noewe/webmapservices/at_t.wms
Log:
topo map for austria from kompass.at (thx teleskopix)

Added: trunk/res_noewe/webmapservices/at_t.wms
===================================================================
--- trunk/res_noewe/webmapservices/at_t.wms	                        (rev 0)
+++ trunk/res_noewe/webmapservices/at_t.wms	2010-07-19 10:47:54 UTC (rev 2693)
@@ -0,0 +1,21 @@
+TakenFromUrl:   http://www.kompass.at/community/huettenfinder/
+GetCapabilitiesUrl:   http://82.150.199.97/koogle-live.php?Service=WMS&Version=1.1.1&Request=GetCapabilities
+Name:   at kompass
+MapType:   topo
+MainUrl:   http://82.150.199.97/koogle-live.php?
+ServiceTypeUrlPart:   SERVICE=WMS
+VersionUrlPart:   VERSION=1.1.1
+#&EXCEPTIONS=application/vnd.ogc.se_inimage
+#&SRS=EPSG:900913
+CoordinateReferenceSystemCacheWolf:   4326
+CoordinateReferenceSystemUrlPart:   SRS=EPSG:4326
+RequestUrlPart:   REQUEST=GetMap
+LayersUrlPart:   LAYERS=koogle
+StylesUrlPart:   STYLES=
+ImageFormatUrlPart:   FORMAT=image/png
+BoundingBoxTopLeftWGS84:   N 49.027050  E 9.529250
+BoundingBoxButtomRightWGS84:   N 46.357433 E 17.202733
+MinScale:   1
+MaxScale:   20
+RecommendedScale:   1 2 5 10
+ImageFileExtension: .png



From araber95 at mail.berlios.de  Wed Jul 21 12:02:20 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 21 Jul 2010 12:02:20 PM +0200
Subject: [Cachewolf-svn] r2694 - trunk/res_noewe
Message-ID: <20100721100220.B28AA48002A@sheep.berlios.de>

Author: araber95
Date: 2010-07-21 12:02:20 +0200 (Wed, 21 Jul 2010)
New Revision: 2694

Modified:
   trunk/res_noewe/spider.def
Log:
spider.def update for recognition of owner

Modified: trunk/res_noewe/spider.def
===================================================================
--- trunk/res_noewe/spider.def	2010-07-19 10:47:54 UTC (rev 2693)
+++ trunk/res_noewe/spider.def	2010-07-21 10:02:20 UTC (rev 2694)
@@ -108,7 +108,7 @@
 longDescRex        = tentBody_LongDescription">((?s).*?)<td\ valign="top"\ width="10%">\\s*&nbsp;\\s*</td
 cacheNameRex       = <span\ id="ctl00_ContentBody_CacheName">((?s).*?)</span>
 #cacheOwnerRex      = <strong>\\s*A.*\\s*cache\\s*</strong>\\s*by\ <a\ href=(?:(?s).*?)>((?s).*?)</a>\\s*</td>
-cacheOwnerRex      = www.geocaching.com/profile/(?:(?s).*?)>((?s).*?)</a>
+cacheOwnerRex      = by\ <a\ href="http://www.geocaching.com/profile/(?:(?s).*?)>((?s).*?)</a>
 dateHiddenRex      = <td>\\s*<strong>\\s*(?:Hidden|Event\ Date)\\s*:</strong>\\s*((?s).*?)\\s*(?:</td>|<a href=)
 hintsRex           = <div id="div_hint" class="HalfLeft">\\s*((?s).*?)\\s*</div>
 sizeRex            = alt="Size:\ ((?s).*?)"\ />&nbsp<small>



From araber95 at mail.berlios.de  Wed Jul 21 05:59:50 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 21 Jul 2010 05:59:50 PM +0200
Subject: [Cachewolf-svn] r2695 - trunk/res_noewe
Message-ID: <20100721155950.BD25848002A@sheep.berlios.de>

Author: araber95
Date: 2010-07-21 17:59:50 +0200 (Wed, 21 Jul 2010)
New Revision: 2695

Added:
   trunk/res_noewe/Kosmos.Rendering.Rules
Modified:
   trunk/res_noewe/OSMCycleMap.kpr
   trunk/res_noewe/OSMMapnik.kpr
   trunk/res_noewe/OSMOsmarender.kpr
Log:
Making Kosmos map download work again using local rendering rules.

Added: trunk/res_noewe/Kosmos.Rendering.Rules
===================================================================
--- trunk/res_noewe/Kosmos.Rendering.Rules	                        (rev 0)
+++ trunk/res_noewe/Kosmos.Rendering.Rules	2010-07-21 15:59:50 UTC (rev 2695)
@@ -0,0 +1,376 @@
+{| border="0" cellpadding="15" cellspacing="0" style="border:solid; border-width:1px; background-color:#FFDDDD; border-color:#DD0000"
+|- 
+| '''English:''' This is a public page. If you want to create your own Kosmos Rendering Rules, please choose edit to see the source and COPY it into your own user page.
+|- 
+| '''German:''' Dies ist eine gemeinschaftlich erstellte Projektseite. Jeder kann eigene Kosmos Rendering-Regeln entwerfen, indem er auf Bearbeiten klickt und den dort angezeigten Quelltext auf seine EIGENE Benutzerseite kopiert.
+|}
+==Introduction==
+This page contains a set of [[Kosmos]] rendering rules for a general purpose map. These rules do not cover the whole range of OSM tagging currently in use, so you are free to edit these rules and add new ones if you feel something is missing. However a couple of things should be noted:
+# See [[Kosmos Rendering Help]] for help on how to write rendering rules.
+# Before committing changes to the page, please make sure the rules are actually working. Try them with the latest version of Kosmos (2.00 or above), since they are not compatible with previous versions.
+# These rules are intended for a general-purpose map, so if you want to create specialized maps, the preferred way is to create a new rules page (see [[:Category:Kosmos_rules]]).
+
+URL of the rules to use in Kosmos: http://wiki.openstreetmap.org/wiki/Kosmos_General_Purpose_Rules
+
+==Options==
+{| class="wikitable" border="1" cellspacing="0" cellpadding="2" width="100%"
+|- style="background-color:#F8F4C2"
+! style="width:20%" | Option
+! style="width:60%" | Value
+! style="width:20%" | Comment 
+|-
+| MinKosmosVersion || 2.1 || Minimal version of Kosmos needed to use these rules
+|-
+| LandBackgroundColor || #F8F8F8
+|-
+| SeaColor || #B5D6F1
+|}
+
+==Land Areas==
+{| class="wikitable" border="1" cellspacing="0" cellpadding="2" width="100%"
+|- style="background-color:#F8F4C2"
+! style="width:15%" | Rule Name
+! style="width:7%" | Targets
+! style="width:20%" | Selector
+! style="width:25%" | Template
+! style="width:5%" | Options
+! style="width:15%" | Comment 
+|-
+| Coastline || {{IconWay}} || {{tag|natural|coastline}} || Polyline (MinZoom=1, Color=#8BCCE5, Width=11:1;17:5, Curved=true) ||  || 
+|-
+| Beach        || {{IconArea}} || {{tag|natural|beach}} || Polygon (Color=#ffbc09) ||  || 
+|-
+| Wood || {{IconArea}} || {{tag|natural|wood}} || Polygon (Color=#99DB9C) ||  || 
+|-
+| Scrub || {{IconArea}} || {{tag|natural|scrub}} || Polygon (Color=#99EE9C) ||  || 
+|-
+| Fell || {{IconArea}} || {{tag|natural|fell}} || Polygon (Color=#CDDB69) ||  || 
+|-
+| Farm || {{IconArea}} || {{tag|landuse|farm}} || Polygon (Color=#EBE0AF) ||  || 
+|-
+| Farm || {{IconArea}} || {{tag|landuse|farmland}} || Polygon (Color=#B7EBAF) ||  || 
+|-
+| Quarry || {{IconArea}} || {{tag|landuse|quarry}} || Polygon (Color=#FEADB8) ||  ||
+|-
+| Residential || {{IconArea}} || {{tag|landuse|residential}} || Polygon (Color=#DCDCDC) ||  || 
+|-
+| Industrial || {{IconArea}} || {{tag|landuse|industrial}} || Polygon (Color=#FEADB8) ||  || 
+|-
+| Commercial || {{IconArea}} || {{tag|landuse|commercial}} || Polygon (Color=#EFC8C8) ||  || 
+|-
+| Retail || {{IconArea}} || {{tag|landuse|retail}} || Polygon (Color=#F0DADA) ||  || 
+|-
+| Reservoir || {{IconArea}} || {{tag|landuse|reservoir}} || Polygon (Color=#B5D0D0) ||  || 
+|-
+| Basin || {{IconArea}} || {{tag|landuse|basin}} || Polygon (Color=#B5D0D0) ||  || 
+|-
+| Forest || {{IconArea}} || {{tag|landuse|forest}} || Polygon (Color=#CFECA8) ||  || 
+|-
+| Cemetery || {{IconArea}} || {{tag|landuse|cemetery}} || Polygon (Color=#A9CAAE, BackgroundColor=#75AC7D, HatchStyle=DashedVertical) ||  || 
+|-
+| Allotments || {{IconArea}} || {{tag|landuse|allotments}} || Polygon (Color=#C8B084) ||  || 
+|-
+| Grass || {{IconArea}} || {{tag|landuse|grass}} || Polygon (Color=#28d25c) ||  || 
+|-
+| Skiing || {{IconArea}} || {{tag|sport|skiing}} || Polygon (Color=#CDDB69) ||  || 
+|-
+| HorseRacing || {{IconArea}} || {{tag|sport|horse_racing}} || Polygon (Color=peru) ||  || 
+|-
+| Tennis || {{IconArea}} || {{tag|sport|tennis}} || Polygon (Color=lightsalmon) ||  || 
+|-
+| Swimming || {{IconArea}} || {{tag|sport|swimming}} || Polygon (Color=lightblue) ||  || 
+|-
+| Park || {{IconArea}} || {{tag|leisure|park}} || Polygon (Color=#C7F1A3) ||  || 
+|-
+| Pitch || {{IconArea}} || {{tag|leisure|pitch}} || Polygon (Color=#8AD2AE) ||  || 
+|-
+| GolfCourse || {{IconArea}} || {{tag|leisure|golf_course}} || Polygon (Color=#7CCC7C) ||  || 
+|-
+| Common || {{IconArea}} || {{tag|leisure|common}} || Polygon (Color=#CFECA8) ||  || 
+|}
+
+==Water Features==
+{| class="wikitable" border="1" cellspacing="0" cellpadding="2" width="100%"
+|- style="background-color:#F8F4C2"
+! style="width:15%" | Rule Name
+! style="width:7%" | Targets
+! style="width:20%" | Selector
+! style="width:25%" | Template
+! style="width:5%" | Options
+! style="width:15%" | Comment 
+|-
+| Water || {{IconArea}} || {{tag|natural|water}} || Polygon (Color=lightblue) ||  || 
+|-
+| Marsh || {{IconArea}} || {{tag|natural|marsh}} || Polygon (Color=blue, BackgroundColor=#00000000, BorderColor=blue, BorderWidth=1:1;12:1;15:3, HatchStyle=DashedHorizontal) ||  || 
+|-
+| River || {{IconWay}} || {{tag|waterway|river}} || Polyline (MinZoom=5, Color=lightblue, Width=5:1;10:2;17:14, Curved=true) ||  || 
+|-
+| Drain || {{IconWay}} || {{tag|waterway|drain}} || Polyline (MinZoom=13, Color=lightblue, Width=13:1;17:6, Curved=true) ||  || 
+|-
+| Stream || {{IconWay}} || {{tag|waterway|stream}} || Polyline (MinZoom=13, Color=lightblue, Width=13:1;17:6, Curved=true) ||  || 
+|-
+| Canal|| {{IconWay}} || {{tag|waterway|canal}} || Polyline (MinZoom=5, Color=lightblue, Width=5:1;10:1;17:10, Curved=true) ||  || 
+|-
+| Riverbank || {{IconArea}} || {{tag|waterway|riverbank}} || Polygon (Color=lightblue) ||  || 
+|-
+| Land || {{IconArea}} || {{tag|natural|land}} || Polygon (Color=white) ||  || 
+|}
+
+==Other Land Features==
+{| class="wikitable" border="1" cellspacing="0" cellpadding="2" width="100%"
+|- style="background-color:#F8F4C2"
+! style="width:15%" | Rule Name
+! style="width:7%" | Targets
+! style="width:20%" | Selector
+! style="width:25%" | Template
+! style="width:5%" | Options
+! style="width:15%" | Comment 
+|-
+| Contours || {{IconWay}} || {{tag|ele}} || || || for elevation contours generated by [[Srtm2Osm]]
+|-
+| .Major || {{IconWay}} || ValueNum(e,"ele") % 100 = 0 || Polyline (MinZoom=11, Color=#B0AD8852, Width=11:1;12:2, Curved=true) || || Major contours (100m ones)
+|-
+| .* || {{IconWay}} || || Polyline (MinZoom=12, Color=#B0AD8852, Width=1, Curved=true) || || all other contours 
+|}
+
+
+
+==Highways==
+{| class="wikitable" border="1" cellspacing="0" cellpadding="2" width="100%"
+|- style="background-color:#F8F4C2"
+! style="width:15%" | Rule Name
+! style="width:7%" | Targets
+! style="width:20%" | Selector
+! style="width:25%" | Template
+! style="width:5%" | Options
+! style="width:15%" | Comment 
+|-
+| HighwayFootway || {{IconWay}} || {{tag|highway|footway}} || Polyline (MinZoom=13, Color=#FFDE93, BorderColor=gray, Width=13:1;17:6) || EliminateSeams || 
+|-
+| HighwayFootwayText || {{IconWay}} || {{tag|highway|footway}} || Text (MinZoom=15, Color=black, TagToUse=name, FontName=Arial, FontStyle=regular, FontSize=15:6;17:9) ||  || 
+|-
+| HighwayPath || {{IconWay}} || {{tag|highway|path}} || Polyline (MinZoom=13, Color=#FFDE93, DashStyle=Dash, BorderColor=gray, Width=13:1;17:6) || EliminateSeams || 
+|-
+| HighwayPathText || {{IconWay}} || {{tag|highway|path}} || Text (MinZoom=15, Color=black, DashStyle=Dash,TagToUse=name, FontName=Arial, FontStyle=regular, FontSize=15:6;17:9) ||  || 
+|-
+| HighwaySteps || {{IconWay}} || {{tag|highway|steps}} || Polyline (MinZoom=13, Color=#FFDE93, DashStyle=Dot, BorderColor=gray, Width=13:1;17:6) || EliminateSeams || 
+|-
+| HighwayBridleway || {{IconWay}} || {{tag|highway|bridleway}} || Polyline (MinZoom=13, Color=#DDDDDD, BorderColor=gray, Width=13:1;17:6) || EliminateSeams || 
+|-
+| HighwayBridlewayText || {{IconWay}} || {{tag|highway|bridleway}} || Text (MinZoom=15, Color=black, TagToUse=name, FontName=Arial, FontStyle=regular, FontSize=15:6;17:9) ||  || 
+|-
+| HighwayCicleway || {{IconWay}} || {{tag|highway|cycleway}} || Polyline (MinZoom=13, Color=#0202FE, DashStyle=Dash, Width=13:1;17:4) || EliminateSeams || 
+|-
+| HighwayUnpaved || {{IconWay}} || {{tag|highway|unpaved}} || Polyline (MinZoom=11, Color=#E2E2E2, BorderColor=gray, Width=11:1;14:3;17:10) || EliminateSeams || 
+|-
+| HighwayUnpavedText || {{IconWay}} || {{tag|highway|unpaved}} || Text (MinZoom=15, Color=black, TagToUse=name, FontName=Arial, FontStyle=regular, FontSize=15:6;17:9) ||  || 
+|-
+| HighwayUnsurfaced || {{IconWay}} || {{tag|highway|unsurfaced}} || Polyline (MinZoom=11, Color=#E2E2E2, BorderColor=gray, Width=11:1;14:3;17:10) || EliminateSeams || deprecated
+|-
+| HighwayUnclassified || {{IconWay}} || {{tag|highway|unclassified}} || Polyline (MinZoom=11, Color=white, BorderColor=gray, Width=11:1;13:3;17:14) || EliminateSeams
+|-
+| HighwayUnclassifiedText || {{IconWay}} || {{tag|highway|unclassified}} || Text (MinZoom=16, Color=black, TagToUse=name, FontName=Arial, FontStyle=regular, FontSize=15:6;17:9) ||  || 
+|-
+| HighwayPedestrian || {{IconWay}} || {{tag|highway|pedestrian}} || Polyline (MinZoom=13, Color=lightgray, BorderColor=gray, Width=14:3;17:14) || EliminateSeams || 
+|-
+| HighwayPedestrianArea || {{IconArea}} || {{tag|highway|pedestrian}} {{tag|area|yes}} || Polygon (MinZoom=13, Color=lightgray, BorderColor=gray, BorderWidth=1)<br>Text (MinZoom=15, Color=black, TagToUse=name, FontName=Arial, FontStyle=regular, FontSize=15:6;17:9, TextMode=AreaCenter) || EliminateSeams || 
+|-
+| HighwayUnclassifiedArea || {{IconArea}} || {{tag|highway|unclassified}} {{tag|area|yes}} || Polygon (MinZoom=13, Color=white, BorderColor=gray, BorderWidth=1)<br>Text (MinZoom=15, Color=black, TagToUse=name, FontName=Arial, FontStyle=regular, FontSize=15:6;17:9, TextMode=AreaCenter) || EliminateSeams || 
+|-
+| HighwayResidentialArea || {{IconArea}} || {{tag|highway|residential}} {{tag|area|yes}} || Polygon (MinZoom=13, Color=white, BorderColor=gray, BorderWidth=1)<br>Text (MinZoom=15, Color=black, TagToUse=name, FontName=Arial, FontStyle=regular, FontSize=15:6;17:9, TextMode=AreaCenter) || EliminateSeams || 
+|-
+| HighwayPedestrianText || {{IconWay}} || {{tag|highway|pedestrian}} || Text (MinZoom=15, Color=black, TagToUse=name, FontName=Arial, FontStyle=regular, FontSize=15:6;17:9) ||  || 
+|-
+| HighwayResidential || {{IconWay}} || {{tag|highway|residential}} || Polyline (MinZoom=11, Color=white, BorderColor=gray, Width=11:1;13:3;17:14) || EliminateSeams || 
+|-
+| HighwayResidentialText || {{IconWay}} || {{tag|highway|residential}} || Text (MinZoom=15, Color=black, TagToUse=name, FontName=Arial, FontStyle=regular, FontSize=15:6;17:9) ||  || 
+|-
+
+| HighwayPedestrianPriority || {{IconWay}} || {{tag|highway|living_street}} || Polyline (MinZoom=11, Color=white, BorderColor=gray, Width=11:1;13:3;17:14) || EliminateSeams || 
+|-
+| HighwayPedestrianPriorityText || {{IconWay}} || {{tag|highway|living_street}} || Text (MinZoom=15, Color=black, TagToUse=name, FontName=Arial, FontStyle=regular, FontSize=15:6;17:9) ||  || 
+|-
+
+| HighwayService || {{IconWay}} || {{tag|highway|service}} || Polyline (MinZoom=12, Color=white, BorderColor=gray, Width=12:1;13:2;17:6) || EliminateSeams || 
+|-
+| HighwayServiceText || {{IconWay}} || {{tag|highway|service}} || Text (MinZoom=15, Color=black, TagToUse=name, FontName=Arial, FontStyle=regular, FontSize=15:5;17:9) ||  || 
+|-
+| HighwayMinor || {{IconWay}} || {{tag|highway|minor}} || Polyline (MinZoom=12, Color=white, BorderColor=gray, Width=12:1;13:2;17:13) || EliminateSeams || 
+|-
+| HighwayMinorText || {{IconWay}} || {{tag|highway|minor}} || Text (MinZoom=15, Color=black, TagToUse=name, FontName=Arial, FontStyle=regular, FontSize=15:5;17:8) ||  || 
+|-
+| HighwayTrack || {{IconWay}} || {{tag|highway|track}} || Polyline (MinZoom=11, Color=#E2E2E2, BorderColor=gray, Width=11:1;14:3;17:10) || EliminateSeams || 
+|-
+| HighwayTertiary || {{IconWay}} || {{tag|highway|tertiary}} || Polyline (MinZoom=10, Color=#F7F496, BorderColor=gray, Width=10:1;13:4;17:14) || EliminateSeams || 
+|-
+| HighwayTertiaryText || {{IconWay}} || {{tag|highway|tertiary}} || Text (MinZoom=15, Color=black, TagToUse=name, FontName=Arial, FontStyle=regular, FontSize=15:6;17:9) ||  || 
+|-
+| HighwaySecondary || {{IconWay}} || {{tag|highway|secondary}} || || EliminateSeams || 
+|-
+| .Bridge ||  || {{tag|bridge|yes}} || Polyline (MinZoom=8, Color=#FDBF6F, BorderColor=gray, Width=8:1;10:2;13:6;17:14, BorderWidth=30%) ||  || 
+|-
+| .* || || || Polyline (MinZoom=8, Color=#FDBF6F, BorderColor=gray, Width=8:1;10:2;13:6;17:14) ||  || 
+|-
+| HighwaySecondaryText || {{IconWay}} || {{tag|highway|secondary}} || Text (MinZoom=15, Color=black, TagToUse=name, FontName=Arial, FontStyle=regular, FontSize=15:6;17:9) ||  || 
+|-
+| HighwayPrimary || {{IconWay}} || {{tag|highway|primary}} ||  || EliminateSeams || 
+|-
+| .Bridge ||  || {{tag|bridge|yes}} || Polyline (MinZoom=6, Color=#E46D71, BorderColor=gray, Width=6:0;11:3;17:14, BorderWidth=30%) ||  || 
+|-
+| .* ||  ||  || Polyline (MinZoom=6, Color=#E46D71, BorderColor=gray, Width=6:0;11:3;17:14) ||  || 
+|-
+| HighwayPrimaryText || {{IconWay}} || {{tag|highway|primary}} || Text (MinZoom=13, Color=#E46D71, BorderColor=#E46D71, BorderWidth=2, BackgroundColor=white, TagToUse=ref, TextMode=WayCenter, FontName=Arial, FontStyle=bold, FontSize=13:8;17:12) ||  || 
+|-
+| HighwayPrimaryLink || {{IconWay}} || {{tag|highway|primary_link}} || Polyline (MinZoom=6, Color=#E46D71, BorderColor=gray, Width=6:1;17:14) || EliminateSeams || 
+|-
+| HighwayTrunk || {{IconWay}} || {{tag|highway|trunk}} || Polyline (MinZoom=6, Color=#41A317, BorderColor=gray, Width=6:1;17:14) || EliminateSeams || 
+|-
+| HighwayTrunkLink || {{IconWay}} || {{tag|highway|trunk_link}} || Polyline (MinZoom=6, Color=#41A317, BorderColor=gray, Width=6:1;17:14) || EliminateSeams || 
+|-
+| HighwayMotorway || {{IconWay}} || {{tag|highway|motorway}} ||  || EliminateSeams || 
+|-
+| .Bridge ||  || {{tag|bridge|yes}} || Polyline (MinZoom=6, Color=#809BC0, BorderColor=gray, Width=6:1;17:14, BorderWidth=30%) ||  || 
+|-
+| .* ||  ||  || Polyline (MinZoom=6, Color=#809BC0, BorderColor=gray, Width=6:1;17:14) ||  || 
+|-
+| HighwayMotorwayLink || {{IconWay}} || {{tag|highway|motorway_link}} || Polyline (MinZoom=6, Color=#809BC0, BorderColor=gray, Width=6:1;17:8) || EliminateSeams || 
+|}
+
+==Transport==
+{| class="wikitable" border="1" cellspacing="0" cellpadding="2" width="100%"
+|- style="background-color:#F8F4C2"
+! style="width:15%" | Rule Name
+! style="width:7%" | Targets
+! style="width:20%" | Selector
+! style="width:25%" | Template
+! style="width:5%" | Options
+! style="width:15%" | Comment 
+|-
+| Rail || {{IconWay}} || {{tag|railway|rail}} || Polyline (MinZoom=6, Color=white, DashStyle=Dot, BorderColor=gray, Width=6:1;17:6) || EliminateSeams || 
+|-
+| .tunnel || {{IconWay}} || {{tag|tunnel|yes}} || Polyline (MinZoom=6, Color=white, DashStyle=solid, BorderColor=gray, BorderDashStyle=Dash, Width=6:1;17:6) || EliminateSeams || 
+|-
+| Light-Rail || {{IconWay}} || {{tag|railway|light_rail}} || Polyline (MinZoom=6, Color=black, DashStyle=solid, BorderColor=gray, Width=6:1;17:2) || EliminateSeams || 
+|-
+| .tunnel || {{IconWay}} || {{tag|tunnel|yes}} || Polyline (MinZoom=6, Color=white, DashStyle=solid, BorderColor=black, BorderDashStyle=Dash, Width=6:1;17:2) || EliminateSeams || 
+|-
+| Tram || {{IconWay}} || {{tag|railway|tram}} || Polyline (MinZoom=6, Color=black, DashStyle=solid, BorderColor=gray, Width=6:1;17:2) || EliminateSeams || 
+|-
+| .tunnel || {{IconWay}} || {{tag|tunnel|yes}} || Polyline (MinZoom=6, Color=white, DashStyle=solid, BorderColor=black, BorderDashStyle=Dash, Width=6:1;17:2) || EliminateSeams || 
+|-
+| Subway || {{IconWay}} || {{tag|railway|subway}} || Polyline (MinZoom=6, Color=black, DashStyle=Dash, BorderColor=gray, Width=6:1;17:2) || EliminateSeams || 
+|-
+| .tunnel || {{IconWay}} || {{tag|tunnel|yes}} || Polyline (MinZoom=6, Color=white, DashStyle=Dash, BorderColor=gray, BorderDashStyle=Dash, Width=6:1;17:2) || EliminateSeams || 
+|-
+| RailDisused || {{IconWay}} || {{tag|railway|disused}} || Polyline (MinZoom=10, Color=white, DashStyle=Dot, BorderColor=#DDDDDD, Width=10:1;17:4) || EliminateSeams || 
+|-
+| CableCar || {{IconWay}} || {{tag|aerialway|cable_car}} || Symbol (MinZoom=12, Type=Circle, Density=30, Color=#00000000, BorderWidth=20%, BorderColor=black, Size=12:2;17:10)<br>Polyline (MinZoom=12, Color=black, Width=12:0.5;17:3) ||  || 
+|-
+| DragLift || {{IconWay}} || {{tag|aerialway|drag_lift}} || Symbol (MinZoom=12, Type=Circle, Density=30, Color=#00000000, BorderWidth=10%, BorderColor=black, Size=12:2;17:10)<br>Polyline (MinZoom=12, Color=black, Width=12:0.5;17:2) ||  || 
+|-
+| ChairLift || {{IconWay}} || {{tag|aerialway|chair_lift}} || Symbol (MinZoom=12, Type=Circle, Density=30, Color=#00000000, BorderWidth=10%, BorderColor=black, BackgroundColor=black, Size=12:2;17:10)<br>Polyline (MinZoom=12, Color=black, Width=12:0.5;17:2) ||  || 
+|-
+| Ferry || {{IconWay}} || {{tag|route|ferry}} || Polyline (MinZoom=8, Color=darkgray, DashStyle=Dot, Width=8:0.1;17:4) ||  || 
+|}
+
+==Other Ways==
+{| class="wikitable" border="1" cellspacing="0" cellpadding="2" width="100%"
+|- style="background-color:#F8F4C2"
+! style="width:15%" | Rule Name
+! style="width:7%" | Targets
+! style="width:20%" | Selector
+! style="width:25%" | Template
+! style="width:5%" | Options
+! style="width:15%" | Comment 
+|-
+| BoundaryAdministrative || {{IconWay}} || {{tag|boundary|administrative}} ||  ||  || 
+|-
+|.level2 ||  || {{tag|admin_level|2}} || Polyline (MinZoom=1, Color=red, DashStyle=DashDot, Width=1:1;9:1.5;17:6) ||  || 
+|-
+|.level4 ||  || {{tag|admin_level|4}} || Polyline (MinZoom=10, Color=black, DashStyle=DashDot, Width=1:1;9:1.5;17:6) ||  || 
+|-
+|.level8 ||  || {{tag|admin_level|8}} || Polyline (MinZoom=12, Color=#A4A4A4, DashStyle=Dot, Width=1:1;9:1.5;5:5)) || 
+|-
+|.* ||  ||  || Polyline (MinZoom=12, Color=black, DashStyle=DashDot, Width=1:1;9:1.5;17:6) ||  || 
+|-
+| BoundaryNationalPark|| {{IconWay}} || {{tag|boundary|national_park}} || Polyline (MinZoom=9, Color=green, DashStyle=DashDot, Width=9:1.5;17:6) || ||
+|-
+| Runway || {{IconWay}} || {{tag|aeroway|runway}} || Polyline (MinZoom=11, Color=#BBBBCC, Width=11:1;17:30) ||  || 
+|-
+| Taxiway || {{IconWay}} || {{tag|aeroway|taxiway}} || Polyline (MinZoom=12, Color=#BBBBCC, Width=12:1;17:10) ||  || 
+|}
+
+==Places==
+{| class="wikitable" border="1" cellspacing="0" cellpadding="2" width="100%"
+|- style="background-color:#F8F4C2"
+! style="width:15%" | Rule Name
+! style="width:7%" | Targets
+! style="width:20%" | Selector
+! style="width:25%" | Template
+! style="width:5%" | Options
+! style="width:15%" | Comment 
+|-
+| PlaceCountry || {{IconNode}} || {{tag|place|country}} || Text (MinZoom=3, MaxZoom=7, Color=black, TagToUse=name, FontName=Trebuchet MS, FontStyle=bold, FontSize=3:7;7:20, OutlineColor=white) ||
+|-
+| PlaceCity || {{IconNode}} || {{tag|place|city}} || Text (MinZoom=7, MaxZoom=14, Color=black, TagToUse=name, FontName=Trebuchet MS, FontStyle=bold, FontSize=7:10;17:30, OutlineColor=white, OutlineWidth=20%) || 
+|-
+| PlaceTown || {{IconNode}} || {{tag|place|town}} || Text (MinZoom=10, MaxZoom=15, Color=black, TagToUse=name, FontName=Trebuchet MS, FontStyle=bold, FontSize=10:10;17:25, OutlineColor=white) ||
+|-
+| PlaceVillage || {{IconNode}} || {{tag|place|village}} || Text (MinZoom=12, MaxZoom=16, Color=black, TagToUse=name, FontName=Trebuchet MS, FontStyle=bold, FontSize=12:10;17:20, OutlineColor=white) ||
+|-
+| PlaceIsland || {{IconNode}} || {{tag|place|island}} || Text (MinZoom=12, MaxZoom=16, Color=black, TagToUse=name, FontName=Trebuchet MS, FontStyle=bold, FontSize=12:10;17:20, OutlineColor=white) ||
+|-
+| PlaceSuburb || {{IconNode}} || {{tag|place|suburb}} || Text (MinZoom=13, MaxZoom=16, Color=black, TagToUse=name, FontName=Trebuchet MS, FontStyle=bold, FontSize=13:10;17:20, OutlineColor=white) ||
+|-
+| PlaceHamlet || {{IconNode}} || {{tag|place|hamlet}} || Text (MinZoom=14, MaxZoom=17, Color=black, TagToUse=name, FontName=Trebuchet MS, FontStyle=bold, FontSize=14:8;17:14, OutlineColor=white) ||
+|-
+| PlaceLocality || {{IconNode}} || {{tag|place|locality}} || Text (MinZoom=14, MaxZoom=17, Color=black, TagToUse=name, FontName=Trebuchet MS, FontStyle=bold, FontSize=14:8;17:14, OutlineColor=white) ||
+|-
+| PlaceFarm || {{IconNode}} || {{tag|place|farm}} || Text (MinZoom=15, MaxZoom=19, Color=black, TagToUse=name, FontName=Trebuchet MS, FontStyle=bold, FontSize=15:8;17:13, OutlineColor=white) ||
+|}
+
+==Buildings==
+{| class="wikitable" border="1" cellspacing="0" cellpadding="2" width="100%"
+|- style="background-color:#F8F4C2"
+! style="width:15%" | Rule Name
+! style="width:7%" | Targets
+! style="width:20%" | Selector
+! style="width:25%" | Template
+! style="width:5%" | Options
+! style="width:15%" | Comment 
+|-
+| BuildingResidential || {{IconArea}} || {{tag|building|residential}} || Polygon (MinZoom=12, Color=#F3D6B6, BorderColor=#6B5B8E, BorderWidth=1) ||
+|-
+| BuildingAny || {{IconArea}} || {{tag|building}} || Polygon (MinZoom=13, Color=thistle, BorderColor=#6B5B8E, BorderWidth=1)<br>Text (MinZoom=16, Color=black, TagToUse=name, FontName=Arial, FontStyle=regular, FontSize=16:6;17:10, TextMode=AreaCenter) ||
+|}
+
+==Navaids==
+{| class="wikitable" border="1" cellspacing="0" cellpadding="2" width="100%"
+|- style="background-color:#F8F4C2"
+! style="width:15%" | Rule Name
+! style="width:7%" | Targets
+! style="width:20%" | Selector
+! style="width:25%" | Template
+! style="width:5%" | Options
+! style="width:15%" | Comment 
+|-
+| NavaidBuoy|| {{IconNode}} || {{tag|man_made|buoy}} || Symbol (Type=Diamond, MinZoom=11, Color=blue, BorderColor=black, BorderWidth=15%, Size=13:6;17:20) ||  || 
+|-
+| NavaidLighthouse|| {{IconNode}} || {{tag|man_made|lighthouse}} || Symbol (Type=Triangle, MinZoom=10, Color=blue, BorderColor=black, BorderWidth=15%, Size=13:6;17:20) ||  || 
+|-
+|}
+
+==Routes==
+{| class="wikitable" border="1" cellspacing="0" cellpadding="2" width="100%"
+|- style="background-color:#F8F4C2"
+! style="width:15%" | Rule Name
+! style="width:7%" | Targets
+! style="width:20%" | Selector
+! style="width:25%" | Template
+! style="width:5%" | Options
+! style="width:15%" | Comment 
+|-
+| RouteCycle || {{IconRelation}} || {{tag|type|route}} {{tag|route|bicycle}} || Polyline (MinZoom=7, Color=#50FF0718, Width=7:1;17:18, Curved=true) ||  || 
+|}
+
+[[Category:Kosmos_rules]]
\ No newline at end of file

Modified: trunk/res_noewe/OSMCycleMap.kpr
===================================================================
--- trunk/res_noewe/OSMCycleMap.kpr	2010-07-21 10:02:20 UTC (rev 2694)
+++ trunk/res_noewe/OSMCycleMap.kpr	2010-07-21 15:59:50 UTC (rev 2695)
@@ -1,6 +1,6 @@
 <KosmosProject Version="2.2">
   <RulesSource>
-    <WikiPage>http://wiki.openstreetmap.org/index.php/Kosmos_General_Purpose_Rules</WikiPage>
+    <WikiPage>Kosmos.Rendering.Rules</WikiPage>
   </RulesSource>
   <DataFiles>
     <WebMap>

Modified: trunk/res_noewe/OSMMapnik.kpr
===================================================================
--- trunk/res_noewe/OSMMapnik.kpr	2010-07-21 10:02:20 UTC (rev 2694)
+++ trunk/res_noewe/OSMMapnik.kpr	2010-07-21 15:59:50 UTC (rev 2695)
@@ -1,6 +1,6 @@
 <KosmosProject Version="2.2">
   <RulesSource>
-    <WikiPage>http://wiki.openstreetmap.org/index.php/Kosmos_General_Purpose_Rules</WikiPage>
+    <WikiPage>Kosmos.Rendering.Rules</WikiPage>
   </RulesSource>
   <DataFiles>
     <WebMap>

Modified: trunk/res_noewe/OSMOsmarender.kpr
===================================================================
--- trunk/res_noewe/OSMOsmarender.kpr	2010-07-21 10:02:20 UTC (rev 2694)
+++ trunk/res_noewe/OSMOsmarender.kpr	2010-07-21 15:59:50 UTC (rev 2695)
@@ -1,6 +1,6 @@
 <KosmosProject Version="2.2">
   <RulesSource>
-    <WikiPage>http://wiki.openstreetmap.org/index.php/Kosmos_General_Purpose_Rules</WikiPage>
+    <WikiPage>Kosmos.Rendering.Rules</WikiPage>
   </RulesSource>
   <DataFiles>
     <WebMap>



From araber95 at mail.berlios.de  Wed Jul 21 06:28:15 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 21 Jul 2010 06:28:15 PM +0200
Subject: [Cachewolf-svn] r2696 - trunk/src/CacheWolf
Message-ID: <20100721162816.1274848002A@sheep.berlios.de>

Author: araber95
Date: 2010-07-21 18:28:15 +0200 (Wed, 21 Jul 2010)
New Revision: 2696

Modified:
   trunk/src/CacheWolf/GuiImageBroker.java
Log:
added some debug info for loading own symbols

Modified: trunk/src/CacheWolf/GuiImageBroker.java
===================================================================
--- trunk/src/CacheWolf/GuiImageBroker.java	2010-07-21 15:59:50 UTC (rev 2695)
+++ trunk/src/CacheWolf/GuiImageBroker.java	2010-07-21 16:28:15 UTC (rev 2696)
@@ -56,26 +56,28 @@
 			String name = "";
 			String [] pngFiles;
 			pngFiles=dir.list("*.png",0);
+			Global.getPref().log("Nr. of own symbols (png-files) : "+pngFiles.length);
 			for (int i=0; i<pngFiles.length; i++) {
 				name = pngFiles[i].substring(0,pngFiles[i].length()-4);
-				if (name.endsWith("size")){
+				if (name.toLowerCase().endsWith("size")){
 					size=true;
 					name=name.substring(0,name.length()-4);
 				}
 				try {
-					id = Integer.parseInt (name);
+					id = Integer.parseInt(name);
 				}
 				catch (Exception E){
 					id = -1; //filename invalid for symbols
 				}
 				if (0<=id && id<=CacheType.maxCWCType){
-					if (!size){
-						String s=FileBase.getProgramDirectory()+sdir+pngFiles[i];
-						CacheType.setTypeImage((byte) id, new Image(s));
+					String s=FileBase.getProgramDirectory()+sdir+pngFiles[i];
+					Global.getPref().log("own symbol: "+(i+1)+" = "+pngFiles[i]);
+					if (size){
+						CacheType.setMapImage((byte) id, new Image(s));
+						size=false;
 					}
 					else{
-						CacheType.setMapImage((byte) id, new Image(FileBase.getProgramDirectory()+sdir+pngFiles[i]));
-						size=false;
+						CacheType.setTypeImage((byte) id, new Image(s));
 					}
 				}
 			}



From araber95 at mail.berlios.de  Wed Jul 21 06:32:39 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 21 Jul 2010 06:32:39 PM +0200
Subject: [Cachewolf-svn] r2697 - trunk/src/CacheWolf
Message-ID: <20100721163239.B78A348089A@sheep.berlios.de>

Author: araber95
Date: 2010-07-21 18:32:39 +0200 (Wed, 21 Jul 2010)
New Revision: 2697

Modified:
   trunk/src/CacheWolf/InputScreen.java
Log:
coords input screen may look a little bit better on pda

Modified: trunk/src/CacheWolf/InputScreen.java
===================================================================
--- trunk/src/CacheWolf/InputScreen.java	2010-07-21 16:28:15 UTC (rev 2696)
+++ trunk/src/CacheWolf/InputScreen.java	2010-07-21 16:32:39 UTC (rev 2697)
@@ -169,80 +169,79 @@
 		this.setTitle("InputConsole");
 
 
-		addLast(MainP,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		MainP.addLast(TopSP,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		MainP.addLast(BottomP,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		MainP.addLast(ExpertP,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		addLast(MainP,CellConstants.STRETCH, (CellConstants.FILL));
+		MainP.addLast(TopSP,CellConstants.STRETCH, (CellConstants.FILL));
+		MainP.addLast(BottomP,CellConstants.STRETCH, (CellConstants.FILL));
+		MainP.addLast(ExpertP,CellConstants.STRETCH, (CellConstants.FILL));
 		btnNorth = new mButton("N");
 		btnNorth.borderStyle = BDR_NOBORDER;
-		TopP.addNext(btnNorth,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		TopP.addNext(btnNorth,CellConstants.STRETCH, (CellConstants.FILL));
 		btnNorthDD = new mButtonPos("DD?");
 		btnNorthDD.borderStyle = BDR_NOBORDER;
-		TopP.addNext(btnNorthDD,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		TopP.addNext(btnNorthDD,CellConstants.STRETCH, (CellConstants.FILL));
 		btnNorthMM = new mButtonPos("MM.");
 		btnNorthMM.borderStyle = BDR_NOBORDER;
-		TopP.addNext(btnNorthMM,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		TopP.addNext(btnNorthMM,CellConstants.STRETCH, (CellConstants.FILL));
 		btnNorthSSS = new mButtonPos("SSS");
 		btnNorthSSS.borderStyle = BDR_NOBORDER;
-		TopP.addLast(btnNorthSSS,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		TopP.addLast(btnNorthSSS,CellConstants.STRETCH, (CellConstants.FILL));
 
 		btnWest = new mButton("E");
 		btnWest.borderStyle = BDR_NOBORDER;
-		TopP.addNext(btnWest,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		TopP.addNext(btnWest,CellConstants.STRETCH, (CellConstants.FILL));
 		btnEastDDD = new mButtonPos("DDD?");
 		btnEastDDD.borderStyle = BDR_NOBORDER;
-		TopP.addNext(btnEastDDD,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		TopP.addNext(btnEastDDD,CellConstants.STRETCH, (CellConstants.FILL));
 		btnEastMM = new mButtonPos("MM.");
 		btnEastMM.borderStyle = BDR_NOBORDER;
-		TopP.addNext(btnEastMM,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		TopP.addNext(btnEastMM,CellConstants.STRETCH, (CellConstants.FILL));
 		btnEastSSS = new mButtonPos("SSS");
 		btnEastSSS.borderStyle = BDR_NOBORDER;
-		TopP.addLast(btnEastSSS,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		TopP.addLast(btnEastSSS,CellConstants.STRETCH, (CellConstants.FILL));
 		TopSP.setControl(TopP);
 
 		btn7 = new mButton("  7  ");
-		BottomP.addNext(btn7,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addNext(btn7,CellConstants.STRETCH, (CellConstants.FILL));
 		btn8 = new mButton(" 8 ");
-		BottomP.addNext(btn8,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addNext(btn8,CellConstants.STRETCH, (CellConstants.FILL));
 		btn9 = new mButton(" 9 ");
-		BottomP.addLast(btn9,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addLast(btn9,CellConstants.STRETCH, (CellConstants.FILL));
 		btn4 = new mButton("  4  ");
-		BottomP.addNext(btn4,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addNext(btn4,CellConstants.STRETCH, (CellConstants.FILL));
 		btn5 = new mButton(" 5 ");
-		BottomP.addNext(btn5,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addNext(btn5,CellConstants.STRETCH, (CellConstants.FILL));
 		btn6 = new mButton(" 6 ");
-		BottomP.addLast(btn6,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addLast(btn6,CellConstants.STRETCH, (CellConstants.FILL));
 		btn1 = new mButton("  1  ");
-		BottomP.addNext(btn1,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addNext(btn1,CellConstants.STRETCH, (CellConstants.FILL));
 		btn2 = new mButton(" 2 ");
-		BottomP.addNext(btn2,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addNext(btn2,CellConstants.STRETCH, (CellConstants.FILL));
 		btn3 = new mButton(" 3 ");
-		BottomP.addLast(btn3,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addLast(btn3,CellConstants.STRETCH, (CellConstants.FILL));
 		btn0 = new mButton("     0     ");
-		BottomP.addNext(btn0,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addNext(btn0,CellConstants.STRETCH, (CellConstants.FILL));
 		btnGPS = new mButton("   GPS   ");
-		BottomP.addNext(btnGPS,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addNext(btnGPS,CellConstants.STRETCH, (CellConstants.FILL));
 		btnBear = new mButton(MyLocale.getMsg(1415,"bearing"));
-		BottomP.addLast(btnBear,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		btnExpert = new mButton("Expert");
-		ExpertP.addNext(btnExpert,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		btnEsc = new mButton("  Abbr  ");
-		ExpertP.addNext(btnEsc,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		btnOk = new mButton("    OK   ");
-		ExpertP.addLast(btnOk,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		//this.addLast(mainPanel,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BottomP.addLast(btnBear,CellConstants.STRETCH, (CellConstants.FILL));
+		btnExpert = new mButton(" Expert");
+		ExpertP.addNext(btnExpert,CellConstants.STRETCH, (CellConstants.FILL));
+		btnEsc = new mButton("  Abbr   ");
+		ExpertP.addNext(btnEsc,CellConstants.STRETCH, (CellConstants.FILL));
+		btnOk = new mButton("   OK   ");
+		ExpertP.addLast(btnOk,CellConstants.STRETCH, (CellConstants.FILL));
 
 		//bearing Pannel
-		BearP.addNext(lblDistanc,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BearP.addNext(lblDistanc,CellConstants.STRETCH, (CellConstants.FILL));
 		btnDistanc = new mButtonPos("        0");
 		btnDistanc.borderStyle = BDR_NOBORDER;
-		BearP.addNext(btnDistanc,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		BearP.addLast(lblDist,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		BearP.addNext(lblBearing,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BearP.addNext(btnDistanc,CellConstants.STRETCH, (CellConstants.FILL));
+		BearP.addLast(lblDist,CellConstants.STRETCH, (CellConstants.FILL));
+		BearP.addNext(lblBearing,CellConstants.STRETCH, (CellConstants.FILL));
 		btnBearing = new mButtonPos("        0");
 		btnBearing.borderStyle = BDR_NOBORDER;
-		BearP.addNext(btnBearing,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
-		BearP.addLast(lblBear,CellConstants.HSTRETCH | CellConstants.VSTRETCH, (CellConstants.HFILL| CellConstants.VFILL));
+		BearP.addNext(btnBearing,CellConstants.STRETCH, (CellConstants.FILL));
+		BearP.addLast(lblBear,CellConstants.STRETCH, (CellConstants.FILL));
 
 		int inpFontSize = ( 4 * pref.fontSize ) / 2;
 		Font inpNewFont = new Font("Helvetica", Font.PLAIN, inpFontSize );
@@ -256,12 +255,12 @@
 
 
 
-		int btnFontSize = ( 3 * pref.fontSize ) / 2;
-		Font btnNewFont = new Font("Helvetica", Font.PLAIN, btnFontSize );
+		// int btnFontSize = ( 3 * pref.fontSize ) / 2;
+		Font btnNewFont = inpNewFont; // new Font("Helvetica", Font.PLAIN, btnFontSize );
 		btn9.setFont(btnNewFont); btn8.setFont(btnNewFont);   btn7.setFont(btnNewFont);
 		btn6.setFont(btnNewFont); btn5.setFont(btnNewFont);   btn4.setFont(btnNewFont);
 		btn3.setFont(btnNewFont); btn2.setFont(btnNewFont);   btn1.setFont(btnNewFont);
-		btn0.setFont(btnNewFont); btnEsc.setFont(btnNewFont); btnOk.setFont(btnNewFont);
+		btn0.setFont(btnNewFont); btnEsc.setFont(btnNewFont); btnOk.setFont(inpNewFont);
 		btnExpert.setFont(btnNewFont); btnBear.setFont(btnNewFont);btnGPS.setFont(btnNewFont);
 
 
@@ -273,7 +272,7 @@
 
 	private void setFocusCoords()
 	{
-		iPosition=POS_NSSS;
+		iPosition=POS_NMM;
 		checkPosition();
 	}
 
@@ -308,7 +307,6 @@
 
 		if (coords.isValid()){
 			strBufTemp.append(coords.toString(TransformCoordinates.CW));
-			String temp = coords.toString(TransformCoordinates.CW);
 			strBufCoords.append(strBufTemp.toString());
 			CoordsInput = coords;
 		} else {
@@ -344,16 +342,19 @@
 				|| iPosition == POS_EMM-1
 				|| iPosition == POS_EDDD-2)	iPosition++;
 
+
 			if(iPosition == POS_EDDD-1)	iPosition++;
 
 			if(iPosition >= strBufCoords.length()){
 				//iPosition = strBufCoords.length();
 				iPosition =POS_NDD;
 				//return;
-			}
-				strBufCoords.setCharAt(iPosition, cValue);
-			    iPosition++;
-			    checkPosition();
+			}			
+			strBufCoords.setCharAt(iPosition, cValue);
+
+			if(iPosition == POS_NSSS+2)	iPosition=POS_EMM-1;
+		    iPosition++;
+		    checkPosition();
 		}
 	}
 



From araber95 at mail.berlios.de  Wed Jul 21 08:51:56 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 21 Jul 2010 08:51:56 PM +0200
Subject: [Cachewolf-svn] r2698 - trunk/res_noewe/exporticons/exporticons
Message-ID: <20100721185158.2A563480B05@sheep.berlios.de>

Author: araber95
Date: 2010-07-21 20:51:56 +0200 (Wed, 21 Jul 2010)
New Revision: 2698

Modified:
   trunk/res_noewe/exporticons/exporticons/Glopus.zip
Log:
updating glopus.zip to actual cachetypes (TomTom-Export for glopus)

Modified: trunk/res_noewe/exporticons/exporticons/Glopus.zip
===================================================================
(Binary files differ)



From araber95 at mail.berlios.de  Thu Jul 22 09:08:04 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Thu, 22 Jul 2010 09:08:04 PM +0200
Subject: [Cachewolf-svn] r2699 - trunk/src/CacheWolf/exp
Message-ID: <20100722190804.CED81480BE7@sheep.berlios.de>

Author: araber95
Date: 2010-07-22 21:08:04 +0200 (Thu, 22 Jul 2010)
New Revision: 2699

Modified:
   trunk/src/CacheWolf/exp/GpxExportNg.java
Log:
changing output order : attributes directly after container

Modified: trunk/src/CacheWolf/exp/GpxExportNg.java
===================================================================
--- trunk/src/CacheWolf/exp/GpxExportNg.java	2010-07-21 18:51:56 UTC (rev 2698)
+++ trunk/src/CacheWolf/exp/GpxExportNg.java	2010-07-22 19:08:04 UTC (rev 2699)
@@ -660,6 +660,9 @@
 		.concat("      <groundspeak:owner id=\"").concat("31415").concat("\">").concat(SafeXML.cleanGPX(ch.getCacheOwner())).concat("</groundspeak:owner>".concat(newLine))
 		.concat("      <groundspeak:type>").concat(CacheType.type2GSTypeTag(ch.getType())).concat("</groundspeak:type>".concat(newLine))
 		.concat("      <groundspeak:container>").concat(CacheSize.cw2ExportString(ch.getCacheSize())).concat("</groundspeak:container>".concat(newLine))
+		.concat("      <groundspeak:attributes>".concat(newLine))
+		.concat(formatAttributes(ch))
+		.concat("      </groundspeak:attributes>".concat(newLine))
 		.concat("      <groundspeak:difficulty>").concat(CacheTerrDiff.shortDT(ch.getHard())).concat("</groundspeak:difficulty>".concat(newLine))
 		.concat("      <groundspeak:terrain>").concat(CacheTerrDiff.shortDT(ch.getTerrain())).concat("</groundspeak:terrain>".concat(newLine))
 		.concat("      <groundspeak:country>").concat(SafeXML.cleanGPX(ch.getCacheDetails(true).Country)).concat("</groundspeak:country>".concat(newLine))
@@ -667,9 +670,6 @@
 		.concat("      <groundspeak:short_description html=\"").concat(ch.is_HTML() ? TRUE : FALSE).concat("\"></groundspeak:short_description>".concat(newLine))
 		.concat("      <groundspeak:long_description html=\"").concat(ch.is_HTML() ? TRUE : FALSE).concat("\">").concat(SafeXML.cleanGPX(formatLongDescription(ch))).concat("</groundspeak:long_description>".concat(newLine))
 		.concat("      <groundspeak:encoded_hints>").concat(SafeXML.cleanGPX(Common.rot13(ch.getCacheDetails(true).Hints))).concat("</groundspeak:encoded_hints>".concat(newLine))
-		.concat("      <groundspeak:attributes>".concat(newLine))
-		.concat(formatAttributes(ch))
-		.concat("      </groundspeak:attributes>".concat(newLine))
 		.concat("      <groundspeak:logs>".concat(newLine))
 		.concat(formatLogs(ch))
 		.concat("      </groundspeak:logs>".concat(newLine))



From araber95 at mail.berlios.de  Sat Jul 24 09:31:53 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sat, 24 Jul 2010 09:31:53 PM +0200
Subject: [Cachewolf-svn] r2700 - trunk/src/CacheWolf
Message-ID: <20100724193153.25479480E63@sheep.berlios.de>

Author: araber95
Date: 2010-07-24 21:31:52 +0200 (Sat, 24 Jul 2010)
New Revision: 2700

Modified:
   trunk/src/CacheWolf/Attribute.java
   trunk/src/CacheWolf/Attributes.java
Log:
doing attribut operations more robust

Modified: trunk/src/CacheWolf/Attribute.java
===================================================================
--- trunk/src/CacheWolf/Attribute.java	2010-07-22 19:08:04 UTC (rev 2699)
+++ trunk/src/CacheWolf/Attribute.java	2010-07-24 19:31:52 UTC (rev 2700)
@@ -62,11 +62,19 @@
     private void setIdBit() {
     	_bit=getIdBit(_Id);
     }
-
+    // checking for array limits (caus -1 is possible value)
+    private static String attRef(int row, int column ) {
+    	if (row > -1 && row < maxAttRef) {
+    		return attRef[row][column];
+    	}
+    	else {
+    		return "";
+    	}
+    }
     // *** public part
     public static long[] getIdBit(int id) {
     	long [] bit = new long[2];
-    	if (id>-1) {
+    	if (id>-1 && id<maxAttRef) {
         	int b = Integer.parseInt(attRef[id][BIT_NR]);
     		bit[0] = b>63 ? 0l : (1L << b);
     		bit[1] = b>63 ? (1L << b-64) : 0;
@@ -80,11 +88,11 @@
     /**
      * get GC_TEXT string
 	 */
-    public String getGCText () { return attRef[_Id][GC_TEXT]; }
+    public String getGCText () { return attRef(_Id,GC_TEXT); }
     /**
      * get GC_ID string
 	 */
-    public String getGCId () { return attRef[_Id][GC_ID]; }
+    public String getGCId () { return attRef(_Id,GC_ID); }
     /**
      * getting attribute given=1,negative=0,not specified=2  
      */
@@ -94,10 +102,15 @@
      */
     public void setInc(int inc) {
     	_Inc=inc;
-		_ImageName=attRef[_Id][PIC_NAME];
-		if (inc==0) _ImageName+="-no.gif";
-		else if (inc==1) _ImageName+="-yes.gif";
-		else _ImageName+="-non.gif";
+    	if (_Id<0 || _Id>=maxAttRef) {
+    		_ImageName="error.gif";
+    	}
+    	else {
+    		_ImageName=attRef(_Id,PIC_NAME);
+    		if (inc==0) _ImageName+="-no.gif";
+    		else if (inc==1) _ImageName+="-yes.gif";
+    		else _ImageName+="-non.gif";
+    	}
     }
     /**
      * getting name of corresponding image stored in attributes subdirectory 

Modified: trunk/src/CacheWolf/Attributes.java
===================================================================
--- trunk/src/CacheWolf/Attributes.java	2010-07-22 19:08:04 UTC (rev 2699)
+++ trunk/src/CacheWolf/Attributes.java	2010-07-24 19:31:52 UTC (rev 2700)
@@ -83,7 +83,7 @@
 			boolean doAdd = true;
 			int replace=0;
 			for (int i = 0; i < _count; i++) {
-				if (attribs[i].getGCId() == attr.getGCId()){
+				if (attribs[i].getGCId().equals(attr.getGCId())){
 					doAdd=false;
 					replace=i;
 					break;



From araber95 at mail.berlios.de  Sat Jul 24 11:54:00 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Sat, 24 Jul 2010 11:54:00 PM +0200
Subject: [Cachewolf-svn] r2701 - in trunk: res_noewe res_noewe/templates
	src/CacheWolf
Message-ID: <20100724215400.A5ED6480E63@sheep.berlios.de>

Author: araber95
Date: 2010-07-24 23:54:00 +0200 (Sat, 24 Jul 2010)
New Revision: 2701

Modified:
   trunk/res_noewe/GCTemplate.html
   trunk/res_noewe/templates/Short documentation for the export via templates.htm
   trunk/src/CacheWolf/CacheHolder.java
Log:
extension and correction for tpl-export

Modified: trunk/res_noewe/GCTemplate.html
===================================================================
--- trunk/res_noewe/GCTemplate.html	2010-07-24 19:31:52 UTC (rev 2700)
+++ trunk/res_noewe/GCTemplate.html	2010-07-24 21:54:00 UTC (rev 2701)
@@ -108,7 +108,7 @@
 				<TH align=left>Coordinate</TH>
 			<tmpl_loop ADDIS>
 			<TR bgColor=#ffffff>
-				<TD vAlign=top align=middle width=16><tmpl_var IMG></TD>
+				<TD vAlign=top align=middle width=16><img src="<tmpl_var IMG>"></TD>
 				<TD vAlign=top align=left><tmpl_var WAYPOINT></TD>
 				<TD vAlign=top align=left><tmpl_var NAME></TD>
 				<TD vAlign=top align=left><tmpl_var LATLON></TD></TR>

Modified: trunk/res_noewe/templates/Short documentation for the export via templates.htm
===================================================================
--- trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-07-24 19:31:52 UTC (rev 2700)
+++ trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-07-24 21:54:00 UTC (rev 2701)
@@ -211,12 +211,13 @@
 class=SpellE>Anzahl</span> logs (-1 = alle)<br>
 &lt;<span class=SpellE>tmpl_par</span> name=&quot;<span class=SpellE>singleFile</span>&quot;
 value=&quot;yes&quot;&gt;<span style='mso-tab-count:3'>??????????????????????????????? </span>one
-<span class=SpellE>outputfile</span> value=?yes? or one file per cache value=?no?
-(use a dummy / not existing name for Out par)<br>
+<span class=SpellE>outputfile</span> value=?yes? or one file per cache
+value=?no? (use a dummy / not existing name for Out par)<br>
 &lt;<span class=SpellE>tmpl_par</span> name=&quot;<span class=SpellE>formatModifier</span>&quot;
-value=&quot;0&quot;&gt;<span style='mso-tab-count:3'>???????????????????????????? </span>0
-is xml as <span class=SpellE>gpx</span> generation before, 1 is html like <span
-class=SpellE>showCacheInBrowser</span>, 2 is html like html-exporter<o:p></o:p></span></p>
+value=&quot;0&quot;&gt;<span style='mso-tab-count:1'>????? </span><span
+style='mso-tab-count:2'>??????????????????????? </span>0 is xml as <span
+class=SpellE>gpx</span> generation before, 1 is html like <span class=SpellE>showCacheInBrowser</span>,
+2 is html like html-exporter<o:p></o:p></span></p>
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
 mso-outline-level:1'><u><span lang=EN-GB style='font-size:10.0pt;font-family:
@@ -243,6 +244,8 @@
 lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>PROGDIR<span
 style='mso-tab-count:8'>?????????????????????????????????????????????????????????????????????????????????????????? </span>:
 <span class=SpellE>FileBase.getProgramDirectory</span>()<br>
+PROFILDIR<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????? </span>:
+<br>
 TYPE<span style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 &lt;type&gt; Type of cache, e.g. Regular, Multi<br>
 TYPENO<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????????? </span>:
@@ -255,8 +258,9 @@
 &lt;<span class=SpellE>groundspeak:type</span>&gt;<br>
 SHORTTYPE<span style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????? </span>:
 First Letter of &lt;type&gt; ???<br>
-SIZE<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
-Size of Cache, e.g. Regular, Micro<br>
+SIZE<span style='mso-tab-count:7'>?????????????????????????????????????????????????????????????????????????? </span><span
+style='mso-tab-count:2'>??????????????????????? </span>: Size of Cache, e.g.
+Regular, Micro<br>
 SHORTSIZE<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????? </span>:
 First letter of size<br>
 </span><span lang=EN-GB style='font-size:10.0pt;font-family:Helvetica;
@@ -285,9 +289,9 @@
 </span><span lang=EN-GB style='font-size:10.0pt;font-family:Helvetica;
 mso-ansi-language:EN-GB'>SHORTDIFFICULTY<span style='mso-tab-count:7'>???????????????????????????????????????????????????????????????????????????? </span>:
 Difficulty mal 10 also 15 <span class=SpellE>statt</span> 1.5<br>
-SHDIFFICULTY<span style='mso-tab-count:8'>?????????????????????????????????????????????????????????????????????????????????? </span>:
-Difficulty <span class=SpellE>abgerundet</span> also 1 <span class=SpellE>statt</span>
-1.5<br>
+SHDIFFICULTY<span style='mso-tab-count:7'>??????????????????????????????????????????????????????????????????????? </span><span
+style='mso-tab-count:1'>??????????? </span>: Difficulty <span class=SpellE>abgerundet</span>
+also 1 <span class=SpellE>statt</span> 1.5<br>
 </span><span lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:
 EN-GB'>TERRAIN<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????????? </span>:<br>
 </span><span lang=EN-GB style='font-size:10.0pt;font-family:Helvetica;
@@ -300,9 +304,9 @@
 Distance calculated in <span class=SpellE>cachelist</span><br>
 BEARING<span style='mso-tab-count:8'>?????????????????????????????????????????????????????????????????????????????????????????? </span>:
 Bearing calculated in <span class=SpellE>cachelist</span><br>
-LATON<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+LATLON<span style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 Coordinates in long format, e.g. N 50? 31.234 E 008? 45.267<br>
-LAT<span style='mso-tab-count:1'>????? </span><span style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+LAT<span style='mso-tab-count:9'>??????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 &lt;<span class=SpellE>wpt</span> lat=?<span class=SpellE>xx.yyyy</span>?
 ??..&gt; Latitude in decimal format, e.g. 50.20147<br>
 LON<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
@@ -310,7 +314,8 @@
 class=SpellE>xx.yyyy</span>? &gt; Longitude in decimal format, e.g. 008.58132<br>
 STATUS<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????????? </span>:<span
 style='mso-spacerun:yes'>? </span>means found<br>
-GC_LOGTYPE<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????? </span>:
+GC_LOGTYPE<span style='mso-tab-count:1'>? </span><span style='mso-tab-count:
+7'>????????????????????????????????????????????????????????????????????????????????? </span>:
 the English Status texts (for <span class=SpellE>gpx</span> ? export)<br>
 STATUS_DATE<span style='mso-tab-count:8'>?????????????????????????????????????????????????????????????????????????????????? </span>:
 Get the date part of the status <br>
@@ -336,13 +341,12 @@
 auf <span class=SpellE>eine</span> in den <span class=SpellE>Einstellungen</span>
 <span class=SpellE>vorgegebene</span> <span class=SpellE>L?nge</span> <span
 class=SpellE>gek?rzt</span> <span class=SpellE>wird</span>. <br>
-<span style='mso-tab-count:7'>????????????????????????????????????????????????????????????????????????????????? </span><span
-style='mso-tab-count:2'>??????????????????????? </span>: (<span class=SpellE>Hintergrund</span>:
-<span class=SpellE>das</span> Notes -<span class=SpellE>Feld</span> <span
-class=SpellE>der</span> <span class=SpellE>meisten</span> <span class=SpellE>Garmins</span>
-<span class=SpellE>kann</span> <span class=SpellE>nur</span> 30 <span
-class=SpellE>Buchstaben</span>)<br>
 <span style='mso-tab-count:9'>????????????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+(<span class=SpellE>Hintergrund</span>: <span class=SpellE>das</span> Notes -<span
+class=SpellE>Feld</span> <span class=SpellE>der</span> <span class=SpellE>meisten</span>
+<span class=SpellE>Garmins</span> <span class=SpellE>kann</span> <span
+class=SpellE>nur</span> 30 <span class=SpellE>Buchstaben</span>)<br>
+<span style='mso-tab-count:9'>????????????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 <span class=SpellE>dann</span> <span class=SpellE>kriegen</span> <span
 class=SpellE>sie</span> <span class=SpellE>noch</span> <span class=SpellE>Infos</span>
 <span class=SpellE>wie</span> Difficulty etc. rein)<br>
@@ -418,6 +422,12 @@
 GCTemplate.html / show cache in browser offline<br>
 ICON<span style='mso-tab-count:9'>????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 name of the log picture<br>
+LOGTYPE<span style='mso-tab-count:8'>?????????????????????????????????????????????????????????????????????????????????????????? </span>:
+<span class=GramE>Text :</span> found it <span
+style='mso-spacerun:yes'>?</span>etc?.(</span><span lang=EN-GB
+style='mso-ansi-language:EN-GB'> </span><span lang=EN-GB style='font-size:10.0pt;
+font-family:Arial;mso-ansi-language:EN-GB'>gc.com compatible string
+representation)<br>
 DATE<span style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 date of the log<br>
 LOGGER<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????????? </span>:
@@ -436,19 +446,31 @@
 Name des <span class=SpellE>Addi</span><br>
 LATLON<span style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 <span class=SpellE>Koordinaten</span> des <span class=SpellE>Addi</span><br>
+LAT<span style='mso-tab-count:9'>??????????????????????????????????????????????????????????????????????????????????????????????????? </span><span
+class=GramE>:</span><br>
+LON<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????????? </span>:<br>
 IMG<span style='mso-tab-count:9'>??????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 Name des <span class=SpellE>Addi</span> Icons <span class=SpellE>png</span>
-(resources <span class=SpellE>oder</span> <span class=SpellE>exporticons</span><span
-class=GramE>)</span><br>
+(resources <span class=SpellE>oder</span> <span class=SpellE>exporticons</span>)<br>
 ICON<span style='mso-tab-count:9'>????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 CW-<span class=SpellE>Typenr</span>, Name des <span class=SpellE>Addi</span>
 Icons (symbols)<br>
 TYPENAME<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????? </span>:
 <span class=SpellE>Typename</span> des <span class=SpellE>Addi</span> <span
 class=SpellE>wie</span> in <span class=SpellE>der</span> GUI<br>
-LONGDESC<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????? </span>:
-<span class=SpellE>Beschreibungstext</span> <span class=SpellE>f?r</span> den
-Addi<o:p></o:p></span></p>
+TYPE<span style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+tag &lt;type&gt; Type of <span class=SpellE>Addi</span> <br>
+TYPENO<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????????? </span>:
+&lt;type&gt; as number string (see <span class=SpellE>CacheType.java</span> <span
+class=SpellE>e.g</span> : ?,50=Parking ?.)<br>
+</span><span style='font-size:10.0pt;font-family:Arial'>SYM<span
+style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+tag &lt;<span class=SpellE>sym</span>&gt;<br>
+GSTYPE<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????????? </span>:
+tag &lt;<span class=SpellE>groundspeak:type</span>&gt;<br>
+LONGDESC<span style='mso-tab-count:4'>???????????????????????????????????????? </span><span
+style='mso-tab-count:4'>?????????????????????????????????????????????? </span>:
+Beschreibungstext f?r den Addi<o:p></o:p></span></p>
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
 mso-outline-level:1'><span lang=EN-GB style='font-size:10.0pt;font-family:Arial;
@@ -501,8 +523,8 @@
 name=TYPE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
 name=SIZE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
 name=WAYPOINT&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
-name=DATE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
-name=URL&gt;&quot;&lt;<span class=SpellE>br</span> /&gt;<br>
+name=DATE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span> name=URL&gt;&quot;&lt;<span
+class=SpellE>br</span> /&gt;<br>
 &lt;/<span class=SpellE>tmpl_loop</span>&gt;<br style='mso-special-character:
 line-break'>
 <![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
@@ -622,9 +644,9 @@
 the if block allows us to display some output if a condition is true<span
 class=GramE>,<span style='mso-spacerun:yes'>? </span>we</span></span><span
 lang=EN-GB style='mso-ansi-language:EN-GB'> </span><span lang=EN-GB
-style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>may also need
-to display content if the condition is false. This can be done by using the
-optional else</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> </span><span
+style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>may also
+need to display content if the condition is false. This can be done by using
+the optional else</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> </span><span
 lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>branch
 of <span class=GramE>the if</span> block.</span><span lang=EN-GB
 style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-07-24 19:31:52 UTC (rev 2700)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-07-24 21:54:00 UTC (rev 2701)
@@ -582,6 +582,7 @@
 		Hashtable varParams = new Hashtable();
 		CacheHolderDetail det = this.getCacheDetails(false);
 		varParams.put("PROGDIR", FileBase.getProgramDirectory());
+		varParams.put("PROFILDIR", Global.getProfile().dataDir);
 		varParams.put("TYPE", CacheType.type2TypeTag(type)); //<type>
 		varParams.put("TYPENO",""+type);
 		varParams.put("SYM", CacheType.type2SymTag(type)); //<sym>
@@ -615,9 +616,16 @@
 		varParams.put("SHTERRAIN", (isAddiWpt() || isCustomWpt() || terrain < 0)?"":sTerrain.substring(0,1));
 		varParams.put("DISTANCE", decSep.replaceAll(getDistance()));
 		varParams.put("BEARING", bearing);
-		varParams.put("LATLON", (pos!=null && pos.isValid())?LatLon:"unknown");
-		varParams.put("LAT", decSep.replaceAll(pos.getLatDeg(CWPoint.DD)));
-		varParams.put("LON", decSep.replaceAll(pos.getLonDeg(CWPoint.DD)));		
+		if ((pos!=null && pos.isValid())) {
+			varParams.put("LATLON", decSep.replaceAll(LatLon));
+			varParams.put("LAT", decSep.replaceAll(pos.getLatDeg(CWPoint.DD)));
+			varParams.put("LON", decSep.replaceAll(pos.getLonDeg(CWPoint.DD)));		
+		}
+		else {
+			varParams.put("LATLON", "unknown");
+			varParams.put("LAT", "");
+			varParams.put("LON", "");		
+		}
 		if (withFoundText) {
 			varParams.put("STATUS",getStatusText());
 		}
@@ -745,10 +753,22 @@
 					CacheHolder ch=(CacheHolder) addiWpts.get(i);
 					addis.put("WAYPOINT",ch.getWayPoint());
 					addis.put("NAME",(ModTyp == 0) ? SafeXML.cleanGPX(ch.getCacheName()) : ch.getCacheName());
-					addis.put("LATLON",ch.getLatLon());
-					addis.put("IMG",(ModTyp == 0) ? CacheType.typeImageForId(ch.getType()) : "<img src=\""+CacheType.typeImageForId(ch.getType())+"\">");
+					if ((ch.pos!=null && ch.pos.isValid())) {
+						addis.put("LATLON",decSep.replaceAll(ch.pos.toString()));
+						addis.put("LAT",decSep.replaceAll(ch.pos.getLatDeg(CWPoint.DD)));
+						addis.put("LON",decSep.replaceAll(ch.pos.getLonDeg(CWPoint.DD)));
+					}
+					else {
+						addis.put("LATLON", "unknown");
+						addis.put("LAT", "");
+						addis.put("LON", "");		
+					}
+					addis.put("IMG",CacheType.typeImageForId(ch.getType()));
 					addis.put("ICON",""+ch.getType());
 					addis.put("TYPENAME", CacheType.type2Gui(ch.getType()));
+					addis.put("TYPE", CacheType.type2TypeTag(ch.getType())); //<type>
+					addis.put("SYM", CacheType.type2SymTag(ch.getType())); //<sym>
+					addis.put("GSTYPE", CacheType.type2GSTypeTag(ch.getType())); //<groundspeak:type>
 					addis.put("LONGDESC",(ModTyp == 0) ? SafeXML.cleanGPX(ch.getCacheDetails(false).LongDescription) : ch.getCacheDetails(false).LongDescription);
 					addiVect.add(addis);
 				}
@@ -761,6 +781,7 @@
 				imgs.put("TEXT",det.images.get(i).getTitle());
 				imgs.put("COMMENT",det.images.get(i).getComment());
 				imgs.put("URL",det.images.get(i).getURL());
+				imgVect.add(imgs);
 			}
 			if (det.images.size()>0) varParams.put("ALLIMGS",imgVect);
 		}



From araber95 at mail.berlios.de  Mon Jul 26 12:32:32 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 26 Jul 2010 12:32:32 AM +0200
Subject: [Cachewolf-svn] r2702 - trunk/src/CacheWolf/exp
Message-ID: <20100725223232.A0C6E480EC8@sheep.berlios.de>

Author: araber95
Date: 2010-07-26 00:32:31 +0200 (Mon, 26 Jul 2010)
New Revision: 2702

Modified:
   trunk/src/CacheWolf/exp/HTMLExporter.java
Log:
added some debug information for gpx-export.

Modified: trunk/src/CacheWolf/exp/HTMLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/HTMLExporter.java	2010-07-24 21:54:00 UTC (rev 2701)
+++ trunk/src/CacheWolf/exp/HTMLExporter.java	2010-07-25 22:32:31 UTC (rev 2702)
@@ -102,7 +102,12 @@
 
 							for(int j = 0; j<det.CacheLogs.size()-1; j++){
 								icon=det.CacheLogs.getLog(j).getIcon();
-								if (logIcons.find(icon)<0) logIcons.add(icon); // Add the icon to list of icons to copy to dest directory
+								if (logIcons.find(icon)<0) {
+									logIcons.add(icon); // Add the icon to list of icons to copy to dest directory
+									if (icon.length() > 20) {
+										icon=det.CacheLogs.getLog(j).getIcon();
+									}
+								}
 							}
 
 							cacheImg.clear();
@@ -113,8 +118,10 @@
 								imgParams.put("TEXT",det.images.get(j).getTitle());
 								if (DataMover.copy(profile.dataDir + imgFile,targetDir + imgFile))
 									cacheImg.add(imgParams);
-								else
+								else {
+									pref.log("Error at "+ch.getWayPoint());
 									exportErrors++;
+								}
 							}
 							page_tpl.setParam("cacheImg", cacheImg);
 
@@ -127,8 +134,10 @@
 								logImgParams.put("TEXT",det.logImages.get(j).getTitle());
 								if (DataMover.copy(profile.dataDir + logImgFile,targetDir + logImgFile))
 									logImg.add(logImgParams);
-								else
+								else {
+									pref.log("Error at "+ch.getWayPoint());
 									exportErrors++;
+								}
 							}
 							page_tpl.setParam("logImg", logImg);
 
@@ -141,8 +150,10 @@
 								usrImgParams.put("TEXT",det.userImages.get(j).getTitle());
 								if (DataMover.copy(profile.dataDir + usrImgFile,targetDir + usrImgFile))
 									usrImg.add(usrImgParams);
-								else
+								else {
+									pref.log("Error at "+ch.getWayPoint());
 									exportErrors++;
+								}
 							}
 							page_tpl.setParam("userImg", usrImg);
 
@@ -159,18 +170,20 @@
 								mapImgParams.put("TEXT",mapImgFile);
 								if (DataMover.copy(profile.dataDir + mapImgFile,targetDir + mapImgFile))
 									mapImg.add(mapImgParams);
-								else
+								else {
+									pref.log("Error at "+ch.getWayPoint());
 									exportErrors++;
-
+								}
 								mapImgParams = new Hashtable();
 								mapImgFile = ch.getWayPoint() + "_map_2.gif";
 								mapImgParams.put("FILE", mapImgFile);
 								mapImgParams.put("TEXT",mapImgFile);
 								if (DataMover.copy(profile.dataDir + mapImgFile,targetDir + mapImgFile))
 									mapImg.add(mapImgParams);
-								else
+								else {
+									pref.log("Error at "+ch.getWayPoint());
 									exportErrors++;
-
+								}
 								page_tpl.setParam("mapImg", mapImg);
 							}
 						} else {
@@ -181,6 +194,7 @@
 							page_tpl.setParam("logImg", ""); // ???
 							page_tpl.setParam("userImg", ""); // ???
 							page_tpl.setParam("mapImg", ""); // ???
+							pref.log("Error at "+ch.getWayPoint());
 							exportErrors++;
 						}
 
@@ -188,12 +202,13 @@
 						pagefile.print(page_tpl.output());
 						pagefile.close();
 					} catch (IllegalArgumentException e) {
+						pref.log("Error at "+ch.getWayPoint());
 						exportErrors++;
 						ch.setIncomplete(true);
-						Global.getPref().log("HTMLExport: "+ch.getWayPoint()+" is incomplete reason: ",e,Global.getPref().debug);
+						pref.log("HTMLExport: "+ch.getWayPoint()+" is incomplete reason: ",e,Global.getPref().debug);
 					} catch(Exception e){
 						exportErrors++;
-						Global.getPref().log("HTMLExport: error wehen exporting "+ch.getWayPoint()+" reason: ",e,Global.getPref().debug);
+						pref.log("HTMLExport: error wehen exporting "+ch.getWayPoint()+" reason: ",e,Global.getPref().debug);
 					}
 				}//if is black, filtered
 			}
@@ -201,12 +216,16 @@
 			// Copy the log-icons to the destination directory
 			for (int j=0; j<logIcons.size(); j++) {
 				icon=(String) logIcons.elementAt(j);
-				if (!DataMover.copy(FileBase.getProgramDirectory() + "/"+icon,targetDir + icon))
+				if (!DataMover.copy(FileBase.getProgramDirectory() + "/"+icon,targetDir + icon)) {
+					pref.log("Error copying logIcons");
 					exportErrors++;
+				}
 
 			}
-			if (!DataMover.copy(FileBase.getProgramDirectory() + "/recommendedlog.gif",targetDir + "recommendedlog.gif"))
-				exportErrors++;
+			if (!DataMover.copy(FileBase.getProgramDirectory() + "/recommendedlog.gif",targetDir + "recommendedlog.gif")) {
+				pref.log("Error copying recommendedlog.gif");
+				exportErrors++;	
+			}
 
 			try{
 				Template tpl = new Template(template_init_index);



From araber95 at mail.berlios.de  Mon Jul 26 12:36:34 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Mon, 26 Jul 2010 12:36:34 AM +0200
Subject: [Cachewolf-svn] r2703 - trunk/src/CacheWolf
Message-ID: <20100725223634.39345480EC4@sheep.berlios.de>

Author: araber95
Date: 2010-07-26 00:36:33 +0200 (Mon, 26 Jul 2010)
New Revision: 2703

Modified:
   trunk/src/CacheWolf/Rebuild.java
Log:
Reading xml - file corrected . stream -- text .(http://www.geoclub.de/viewtopic.php?f=40&t=45615&start=100)

Modified: trunk/src/CacheWolf/Rebuild.java
===================================================================
--- trunk/src/CacheWolf/Rebuild.java	2010-07-25 22:32:31 UTC (rev 2702)
+++ trunk/src/CacheWolf/Rebuild.java	2010-07-25 22:36:33 UTC (rev 2703)
@@ -60,21 +60,9 @@
 					int start=0;
 					boolean doit=true;
 					try {
-						FileInputStream in = new FileInputStream(prof.dataDir + CacheFiles[i]);
-
-						// details=in.readAll();
-						str.setLength(0);
-						while(true){
-							int got = in.read(buff,0,buff.length);
-							if (got == -1) { details = str.toString(); break; }
-							for (int j = 0; j < got; j++) {
-								str.append((char) buff[j]); 
-							}
-
-						}
-						// end readAll substitute
+						FileReader in = new FileReader(prof.dataDir + CacheFiles[i]);
+						details=in.readAll();
 						in.close();
-
 						start = details.indexOf("<CACHE ");
 						if (start < 0) doit=false;
 						else if (details.indexOf("<CACHEDETAILS>") < 0) doit=false;					



From araber95 at mail.berlios.de  Tue Jul 27 12:10:25 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Tue, 27 Jul 2010 12:10:25 PM +0200
Subject: [Cachewolf-svn] r2704 - in trunk: res_noewe/templates src/CacheWolf
	src/CacheWolf/exp src/CacheWolf/imp
Message-ID: <20100727101025.3F178480EC8@sheep.berlios.de>

Author: araber95
Date: 2010-07-27 12:10:25 +0200 (Tue, 27 Jul 2010)
New Revision: 2704

Modified:
   trunk/res_noewe/templates/Short documentation for the export via templates.htm
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/MainForm.java
   trunk/src/CacheWolf/exp/HTMLExporter.java
   trunk/src/CacheWolf/exp/TPLExporter.java
   trunk/src/CacheWolf/imp/SpiderGC.java
Log:
1. correcting tpl doku
2. removed dummy debug code in html-exporter
3. trim spaces from addi description in spider
4. date hidden for addi from main in tpl
5. clearing log.txt on CW start
6. make one file per cache work in tpl




Modified: trunk/res_noewe/templates/Short documentation for the export via templates.htm
===================================================================
--- trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-07-25 22:36:33 UTC (rev 2703)
+++ trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-07-27 10:10:25 UTC (rev 2704)
@@ -376,7 +376,7 @@
 HINTS<span style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 Encrypted hints&nbsp;&nbsp; (<span class=SpellE>badchars</span> are removed,
 see below)<br>
-DESCRYPTEDHINTS<span style='mso-tab-count:7'>?????????????????????????????????????????????????????????????????????????? </span>:
+DECRYPTEDHINTS<span style='mso-tab-count:7'>???????????????????????????????????????????????????????????????????????????? </span>:
 Decrypted hints&nbsp;&nbsp;&nbsp; (<span class=SpellE>badchars</span> are
 removed, see below) <br>
 BUGS<span style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????? </span>:
@@ -423,11 +423,10 @@
 ICON<span style='mso-tab-count:9'>????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 name of the log picture<br>
 LOGTYPE<span style='mso-tab-count:8'>?????????????????????????????????????????????????????????????????????????????????????????? </span>:
-<span class=GramE>Text :</span> found it <span
-style='mso-spacerun:yes'>?</span>etc?.(</span><span lang=EN-GB
-style='mso-ansi-language:EN-GB'> </span><span lang=EN-GB style='font-size:10.0pt;
-font-family:Arial;mso-ansi-language:EN-GB'>gc.com compatible string
-representation)<br>
+<span class=GramE>Text :</span> found it<span style='mso-spacerun:yes'>?
+</span>etc?.(</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> </span><span
+lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>gc.com
+compatible string representation)<br>
 DATE<span style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 date of the log<br>
 LOGGER<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????????? </span>:
@@ -468,8 +467,7 @@
 tag &lt;<span class=SpellE>sym</span>&gt;<br>
 GSTYPE<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????????? </span>:
 tag &lt;<span class=SpellE>groundspeak:type</span>&gt;<br>
-LONGDESC<span style='mso-tab-count:4'>???????????????????????????????????????? </span><span
-style='mso-tab-count:4'>?????????????????????????????????????????????? </span>:
+LONGDESC<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????? </span>:
 Beschreibungstext f?r den Addi<o:p></o:p></span></p>
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
@@ -523,8 +521,8 @@
 name=TYPE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
 name=SIZE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
 name=WAYPOINT&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
-name=DATE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span> name=URL&gt;&quot;&lt;<span
-class=SpellE>br</span> /&gt;<br>
+name=DATE&gt;&quot;;&quot;&lt;<span class=SpellE>tmpl_var</span>
+name=URL&gt;&quot;&lt;<span class=SpellE>br</span> /&gt;<br>
 &lt;/<span class=SpellE>tmpl_loop</span>&gt;<br style='mso-special-character:
 line-break'>
 <![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
@@ -691,8 +689,8 @@
 mso-outline-level:1'><st1:place><u><span lang=EN-GB style='font-size:10.0pt;
  font-family:Arial;mso-ansi-language:EN-GB'>Loop</span></u></st1:place><u><span
 lang=EN-GB style='mso-ansi-language:EN-GB'> </span></u><u><span lang=EN-GB
-style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>context
-variables</span></u><u><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></u></p>
+style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>context variables</span></u><u><span
+lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></u></p>
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
 lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>If

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-07-25 22:36:33 UTC (rev 2703)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-07-27 10:10:25 UTC (rev 2704)
@@ -593,10 +593,12 @@
 		if (isAddiWpt()) {
 			varParams.put("MAINWP",this.mainCache.getWayPoint());
 			varParams.put("MAINWPNAME", this.mainCache.getCacheName());
+			varParams.put("DATE", this.mainCache.dateHidden);
 		}
 		else {
 			varParams.put("MAINWP", "");
 			varParams.put("MAINWPNAME", "");
+			varParams.put("DATE", dateHidden);
 		}
 		if (isCustomWpt()) {
 
@@ -634,7 +636,6 @@
 		varParams.put("GC_LOGTYPE", getGCLogType());
 		varParams.put("STATUS_DATE", getStatusDate());
 		varParams.put("STATUS_TIME", getStatusTime());
-		varParams.put("DATE", dateHidden);
 		varParams.put("CACHE_NAME", cacheName);
 		if (codec instanceof AsciiCodec) { cacheName=Exporter.simplifyString(cacheName);} // use for "NAME"
 		if (badChars != null) { cacheName=badChars.replaceAll(cacheName); } // use for "NAME"

Modified: trunk/src/CacheWolf/MainForm.java
===================================================================
--- trunk/src/CacheWolf/MainForm.java	2010-07-25 22:36:33 UTC (rev 2703)
+++ trunk/src/CacheWolf/MainForm.java	2010-07-27 10:10:25 UTC (rev 2704)
@@ -41,6 +41,7 @@
 
 		pref.debug = dbg;
 		pref.setPathToConfigFile(pathtoprefxml); // in case pathtoprefxml == null the preferences will determine the path itself
+		pref.logInit();
 		doIt();
 	}
 	protected void checkButtons() {

Modified: trunk/src/CacheWolf/exp/HTMLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/HTMLExporter.java	2010-07-25 22:36:33 UTC (rev 2703)
+++ trunk/src/CacheWolf/exp/HTMLExporter.java	2010-07-27 10:10:25 UTC (rev 2704)
@@ -100,13 +100,11 @@
 
 						if (det != null) {
 
+							// Add the icon to list of icons to copy to dest directory
 							for(int j = 0; j<det.CacheLogs.size()-1; j++){
 								icon=det.CacheLogs.getLog(j).getIcon();
 								if (logIcons.find(icon)<0) {
-									logIcons.add(icon); // Add the icon to list of icons to copy to dest directory
-									if (icon.length() > 20) {
-										icon=det.CacheLogs.getLog(j).getIcon();
-									}
+									logIcons.add(icon); 
 								}
 							}
 

Modified: trunk/src/CacheWolf/exp/TPLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/TPLExporter.java	2010-07-25 22:36:33 UTC (rev 2703)
+++ trunk/src/CacheWolf/exp/TPLExporter.java	2010-07-27 10:10:25 UTC (rev 2704)
@@ -211,11 +211,13 @@
 							cache_index.add(varParams);
 						}
 						else {
-							tpl.setParams(varParams);
+							cache_index.add(varParams);
+							tpl.setParam("cache_index", cache_index);
 							String ext = (myFilter.out.substring(myFilter.out.lastIndexOf(".")).toLowerCase()+"    ").trim();
 							PrintWriter pagefile = new PrintWriter(new BufferedWriter(new FileWriter(saveTo.getPath() + ch.getWayPoint() + ext)));
 							pagefile.print(tpl.output());
-							pagefile.close();							
+							pagefile.close();
+							cache_index.clear();
 						}
 					}catch(Exception e){
 						Vm.debug("Problem getting Parameter, Cache: " + ch.getWayPoint());

Modified: trunk/src/CacheWolf/imp/SpiderGC.java
===================================================================
--- trunk/src/CacheWolf/imp/SpiderGC.java	2010-07-25 22:36:33 UTC (rev 2703)
+++ trunk/src/CacheWolf/imp/SpiderGC.java	2010-07-27 10:10:25 UTC (rev 2704)
@@ -2001,7 +2001,7 @@
 				rowBlock = exRowBlock.findNext();
 				descRex.search(rowBlock);
 				if (descRex.didMatch()) {
-					hd.getCacheDetails(false).setLongDescription(descRex.stringMatched(1));
+					hd.getCacheDetails(false).setLongDescription(descRex.stringMatched(1).trim());
 				}
 				else {
 					pref.log("check descRex in spider.def\n"+rowBlock);			



From araber95 at mail.berlios.de  Tue Jul 27 10:33:12 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Tue, 27 Jul 2010 10:33:12 PM +0200
Subject: [Cachewolf-svn] r2705 - in trunk: res_noewe/templates src/CacheWolf
	src/CacheWolf/exp
Message-ID: <20100727203312.36F5E480086@sheep.berlios.de>

Author: araber95
Date: 2010-07-27 22:33:11 +0200 (Tue, 27 Jul 2010)
New Revision: 2705

Added:
   trunk/res_noewe/templates/html_by_KarlKater.tpl
   trunk/res_noewe/templates/html_from_GCTemplate.tpl
Modified:
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/exp/TPLExporter.java
Log:
html output with templates : the first (working) step. Added 2 examples (one from KarlKater thx)

Added: trunk/res_noewe/templates/html_by_KarlKater.tpl
===================================================================
--- trunk/res_noewe/templates/html_by_KarlKater.tpl	                        (rev 0)
+++ trunk/res_noewe/templates/html_by_KarlKater.tpl	2010-07-27 20:33:11 UTC (rev 2705)
@@ -0,0 +1,115 @@
+<tmpl_par name="charset" value="UTF8">
+<tmpl_par name="decsep" value=".">
+<tmpl_par name="newline" value="LF">
+<tmpl_par name="Out" value=".html">
+<tmpl_par name="NrLogs " value="-1">
+<tmpl_par name="singleFile" value="no">
+<tmpl_par name="formatModifier" value="1">
+<tmpl_loop cache_index>
+<html>
+
+<head>
+<title></title>
+<meta name="generator" content="CacheWolf HTML-Export edit by KarlKater">
+<meta http-equiv="content-type" content="text/html; charset=utf-8">
+</head>
+
+<body>
+<table border = "2px" align = "center">
+
+<tr style = "background-color:lightgrey;font-family:sans-serif;font-size:14;">
+<td>
+<tmpl_var TYPE> <tmpl_var WAYPOINT> <tmpl_var NAME> by <tmpl_var OWNER><br>
+Difficulty: <tmpl_var DIFFICULTY>&nbsp;&nbsp;Terrain: <tmpl_var TERRAIN>&nbsp;&nbsp;Size: <tmpl_var SIZE><br>
+Coordinates: <tmpl_var LATLON>
+</td>
+</tr>
+
+<tr style = "font-family:sans-serif;font-size:12;">
+<td>
+<tmpl_loop ATTRIBUTES>
+<img src="../attributes/<tmpl_var IMAGE>" border=0 alt="<tmpl_var INFO>">
+<tmpl_var BR>
+<!--<tmpl_var IMAGE>-->
+<!--<tmpl_var INFO>-->
+</tmpl_loop>
+<br>
+<br>
+<tmpl_var DESCRIPTION>
+</td>
+</tr>
+
+<tmpl_if ADDIS>
+<TABLE cellSpacing=1 cellPadding=1 bgColor=#448e35 border=0>
+<TBODY>
+<TR bgColor=#c6e3c0>
+<TH align=left>Waypoint</TH>
+<TH align=left>Name</TH>
+<TH align=left>Coordinate</TH>
+<tmpl_loop ADDIS>
+<TR bgColor=#ffffff>
+<TD vAlign=top align=left><tmpl_var WAYPOINT></TD>
+<TD vAlign=top align=left><tmpl_var NAME></TD>
+<TD vAlign=top align=left><tmpl_var LATLON></TD></TR>
+<TR bgColor=#ffffff>
+<TD vAlign=top align=left ColSpan=3><tmpl_var LONGDESC></TD>
+</tmpl_loop>
+</TBODY>
+</TABLE><BR/></div>
+</tmpl_if>
+
+<table cellSpacing=1 cellPadding=1 bgColor=#448e35 border=0>
+<tr bgColor=#c6e3c0>
+       <td align=right>Hints:&nbsp;&nbsp;</td>
+       <td><tmpl_var HINTS></td>
+</tr>
+<tr bgColor=#ffffff>
+       <td>Decrypted Hints:&nbsp;&nbsp;</td>
+       <td><tmpl_var DECRYPTEDHINTS></td>
+</tr>
+</table>
+
+<br>
+
+<tr style = "font-family:sans-serif;font-size:12;"><td>
+Logs:<br>
+<tmpl_loop LOGS>
+<img src="<tmpl_var ICON>" border="0">&nbsp;<tmpl_var DATE>&nbsp;by&nbsp;<tmpl_var LOGGER><br><tmpl_var MESSAGE>
+<br>
+</tmpl_loop>
+</td>
+</tr>
+
+<tr style="font-family:sans-serif;font-size:12;">
+<td>
+Notes:<br>
+<tmpl_var NOTES>
+</td>
+</tr>
+
+<tr style = "font-family:sans-serif;font-size:12;"><td>
+Pictures:<br>
+Cache:<br>
+<tmpl_loop cacheImg>
+<a href = "<tmpl_var FILE>"><tmpl_var TEXT></a><br>
+</tmpl_loop>
+User:<br>
+<tmpl_loop userImg>
+<a href = "<tmpl_var FILE>"><tmpl_var TEXT></a><br>
+</tmpl_loop>
+Logs:<br>
+<tmpl_loop logImg>
+<a href = "<tmpl_var FILE>"><tmpl_var TEXT></a><br>
+</tmpl_loop>
+Maps:<br>
+<tmpl_loop mapImg>
+<a href = "<tmpl_var FILE>"><tmpl_var TEXT></a><br>
+</tmpl_loop>
+</td>
+</tr>
+
+<tr style = "font-family:sans-serif;font-size:12;"><td>
+</table>
+</body>
+</html>
+</tmpl_loop>
\ No newline at end of file

Added: trunk/res_noewe/templates/html_from_GCTemplate.tpl
===================================================================
--- trunk/res_noewe/templates/html_from_GCTemplate.tpl	                        (rev 0)
+++ trunk/res_noewe/templates/html_from_GCTemplate.tpl	2010-07-27 20:33:11 UTC (rev 2705)
@@ -0,0 +1,171 @@
+<tmpl_par name="charset" value="UTF8">
+<tmpl_par name="decsep" value=".">
+<tmpl_par name="newline" value="LF">
+<tmpl_par name="Out" value=".html">
+<tmpl_par name="NrLogs " value="-1">
+<tmpl_par name="singleFile" value="no">
+<tmpl_par name="formatModifier" value="1">
+<tmpl_loop cache_index>
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
+<!-- saved from url=(0014)http://localhost/ -->
+<!-- Note: The line above is needed to avoid the warning due to the javascript contained in this page.
+   Using javascript, various sections of the Cache listing can be hidden/unhidden.
+   Try clicking on anything that is underlined.
+-->
+<html>
+<META HTTP-EQUIV="content-type" content="text/html; charset=utf-8" />
+<META HTTP-EQUIV="expires" CONTENT="Wed, 26 Feb 1997 08:21:57 GMT">
+<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
+<script type="text/javascript">
+function toggleDivOL( elemID ) { // Hide or show a DIV
+	var elem = document.getElementById( elemID );
+	if (!elem.style.display || elem.style.display=='block') {
+		elem.style.display='none';
+	} else {
+		elem.style.display='block';
+	}
+}
+var logsVisible=true;
+function toggleAll() {
+	logsVisible=!logsVisible;
+	var logs = document.getElementsByName("log");
+	for (logElem=0; logElem<logs.length; logElem++) {
+		if (logsVisible)
+			logs[logElem].style.display='block';
+		else
+			logs[logElem].style.display='none';
+	}
+}
+</script>
+<style type="text/css">
+body {
+	font-family: Verdana,sans-serif; font-size:80%;
+}
+.notes {
+	padding: 5px;
+	background-color: #EEEEEE;
+	border: 1px solid #000000;
+}
+.solver {
+	padding: 5px;
+	background-color: #EEEEEE;
+	border: 1px dashed #000000;
+}
+.logs {
+	padding: 5px;
+	background-color: #EEEEEE;
+}
+td { font-size:small;  }
+ at media screen {.clickHint {font-family: Arial; font-size:xx-small; padding-left:30px; display:inline; } }
+ at media print {.clickHint {font-family: Arial; font-size:xx-small; display:none; }
+</style>
+<head>
+	<title>Cache: <tmpl_var WAYPOINT> <tmpl_var CACHE_NAME> by <tmpl_var OWNER></title>
+</head>
+
+<body bgcolor="#FFFFFF" LINK="#000000" VLINK="#000000" ALINK="#000000" TEXT="#000000" marginwidth="20" marginheight="0" leftmargin="20" topmargin="0">
+<div style="float:left;">
+	<img src="file://<tmpl_var PROGDIR>/<tmpl_var TYPENO>.gif" BORDER=0 WIDTH=32 HEIGHT=32><FONT face="Verdana" size="4"><strong> <tmpl_var CACHE_NAME></strong></FONT>
+	<FONT face="Verdana" size="2" style="font-size:X-Small;font-weight:bold;"> by <tmpl_var OWNER></FONT>
+	<br/><br/>
+    <strong><tmpl_var LATLON></strong> (WGS84)<br/>
+	Difficulty: <tmpl_var DIFFICULTY> 	Terrain: <tmpl_var TERRAIN>
+	<FONT face="Verdana" size="-2">&nbsp;&nbsp;&nbsp;(ratings out of 5 stars. 1 is easiest, 5 is hardest)</FONT><br/>
+	Container: <strong><tmpl_var SIZE></strong><br/><br/>
+</div>
+<div style="float:right;margin:0; margin-top:10px"><FONT face="Verdana" size="4"><strong><a href="<tmpl_var URL>"><tmpl_var WAYPOINT></a></strong></FONT><br/></div>
+
+<div style="float:left">
+	<div style="float:left;">
+	<table cellpadding=0>
+		<tr><td>Waypoint:</td><td> <tmpl_var WAYPOINT></td></tr>
+		<tr><td>Hidden:</td><td> <tmpl_var DATE></td></tr>
+		<tr><td>Distance:</td><td> <tmpl_var DISTANCE></td></tr>
+		<tr><td>Bearing:</td><td> <tmpl_var BEARING></td></tr>
+		<tr><td>Status:</td><td> <tmpl_var STATUS></td></tr>
+	</table>
+	</div>
+	<div style="float:right;">
+		<tmpl_loop ATTRIBUTES>
+			<img src="file://<tmpl_var PATHANDIMAGE>" border=0 alt="<tmpl_var INFO>">
+			<tmpl_var BR>
+			<!--<tmpl_var IMAGE>-->
+			<!--<tmpl_var INFO>-->
+		</tmpl_loop>
+	</div>
+</div>
+<div style="float:left">
+	<hr>
+<tmpl_if UNAVAILABLE>
+	<FONT face="Verdana" color="red" size="+0">
+	<br/><strong>The cache is not currently available.<br/></strong>
+	</FONT>
+</tmpl_if>
+
+	<br/>
+	<FONT face="Verdana" size="2">
+	<P><BLOCKQUOTE><span id="LongDescription"><tmpl_var DESCRIPTION></span></BLOCKQUOTE>
+	</FONT>
+<tmpl_if ADDIS><a href="javascript:toggleDivOL('addis');"><STRONG>Additional Waypoints</STRONG></a><BR/><br/>
+	<div id="addis"><TABLE cellSpacing=1 cellPadding=4 bgColor=#448e35 border=0>
+		<TBODY>
+			<TR bgColor=#c6e3c0>
+				<TH align=middle width=16>&nbsp;</TH>
+				<TH align=left>Waypoint</TH>
+				<TH align=left>Name</TH>
+				<TH align=left>Coordinate</TH>
+			<tmpl_loop ADDIS>
+			<TR bgColor=#ffffff>
+				<TD vAlign=top align=middle width=16><img src="<tmpl_var IMG>"></TD>
+				<TD vAlign=top align=left><tmpl_var WAYPOINT></TD>
+				<TD vAlign=top align=left><tmpl_var NAME></TD>
+				<TD vAlign=top align=left><tmpl_var LATLON></TD></TR>
+			<TR bgColor=#ffffff>
+				<TD vAlign=top align=middle width=16>Note:</TD>
+				<TD vAlign=top align=left ColSpan=3><tmpl_var LONGDESC></TD>
+			</tmpl_loop>
+		</TBODY>
+	</TABLE><BR/></div>
+</tmpl_if>
+<tmpl_if IMAGES>
+	<tmpl_loop IMAGES>
+		<a href="javascript:toggleDivOL(<tmpl_var I>);"><image src="images.gif" border=0> <tmpl_var IMAGETEXT></a>&nbsp;<i><tmpl_var IMAGECOMMENT></i><br/>
+		<div id=<tmpl_var I> style="display:none"><tmpl_var IMAGE></div>
+	</tmpl_loop>
+</tmpl_if>
+
+<tmpl_if HINT>
+	<br/><br/><STRONG>Additional Hints (Highlight blank area to see)</STRONG><br/>
+	<FONT face="Verdana" color="white" size="1"><tmpl_var HINT></FONT><br/><br/>
+</tmpl_if>
+
+<tmpl_if LOGS>
+	<br/><a href="javascript:toggleDivOL('logs');"><FONT face="Verdana" size="+0"><STRONG>Logs</STRONG></FONT></a><font class="clickHint" onClick="toggleAll();">Click 'Logs' to hide/unhide section; Click this to hide/unhide each log; Click any log to hide/unhide</font><br/><br/>
+	<div id="logs" class="logs">
+	<tmpl_loop LOGS>
+		<a href="javascript:toggleDivOL(<tmpl_var __COUNTER__>);"><img src="<tmpl_var ICON>" border="0">&nbsp;<tmpl_var DATE>&nbsp;by&nbsp;<tmpl_var LOGGER><br></a>
+		<div id=<tmpl_var __COUNTER__> name="log" style="display:block"><font face='Verdana' size='2'><tmpl_var MESSAGE></font><br/>
+		<div><center><div style="width:66%"><hr></div></center></div></div>
+	</tmpl_loop>
+	</div>
+<tmpl_else><br/><STRONG>No logs</STRONG><br/>
+</tmpl_if>
+<tmpl_if BUGS>
+	<hr>
+	<a href="javascript:toggleDivOL('bugs');"><FONT face="Verdana" size="+0"><STRONG>Bugs</STRONG></FONT></a><span class="clickHint">Click to hide/unhide section</span><br/><br/>
+	<div id="bugs" class="bugs"><tmpl_var BUGS></div>
+</tmpl_if>
+<tmpl_if NOTES>
+<tmpl_if BUGS><TMPL_ELSE><hr></tmpl_if>
+    <a href="javascript:toggleDivOL('notes');"><FONT face="Verdana" size="+0"><STRONG>Personal Notes</STRONG></FONT></a><span class="clickHint">Click to hide/unhide section</span><br/><br/>
+	<div id="notes" class="notes"><br/><tmpl_var NOTES></div>
+</tmpl_if>
+<tmpl_if SOLVER>
+    <a href="javascript:toggleDivOL('solver');"><FONT face="Verdana" size="+0"><STRONG>Solver Instructions</STRONG></FONT></a><span class="clickHint">Click to hide/unhide section</span><br/><br/>
+	<div id="solver" class="solver"><br/><tmpl_var SOLVER></div>
+</tmpl_if>
+</div>
+</body>
+</html>
+
+</tmpl_loop>
\ No newline at end of file

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-07-27 10:10:25 UTC (rev 2704)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-07-27 20:33:11 UTC (rev 2705)
@@ -588,16 +588,37 @@
 		varParams.put("SYM", CacheType.type2SymTag(type)); //<sym>
 		varParams.put("GSTYPE", CacheType.type2GSTypeTag(type)); //<groundspeak:type>
 		varParams.put("SHORTTYPE", CacheType.getExportShortId(type));
-		varParams.put("SIZE", CacheSize.cw2ExportString(cacheSize));
-		varParams.put("SHORTSIZE", CacheSize.getExportShortId(cacheSize));
 		if (isAddiWpt()) {
-			varParams.put("MAINWP",this.mainCache.getWayPoint());
-			varParams.put("MAINWPNAME", this.mainCache.getCacheName());
-			varParams.put("DATE", this.mainCache.dateHidden);
+			CacheHolder ch=this.mainCache;
+			varParams.put("MAINWP",ch.getWayPoint());
+			varParams.put("MAINWPNAME", ch.getCacheName());
+			varParams.put("DIFFICULTY", (ch.hard < 0)?"!<!":decSep.replaceAll(CacheTerrDiff.longDT(ch.hard)));
+			String sHard = Integer.toString(ch.hard);
+			varParams.put("SHORTDIFFICULTY", (ch.hard < 0)?"":sHard);
+			varParams.put("SHDIFFICULTY", (ch.hard < 0)?"":sHard.substring(0,1));
+			varParams.put("TERRAIN", (ch.terrain < 0)?"":decSep.replaceAll(CacheTerrDiff.longDT(ch.terrain)));
+			String sTerrain = Integer.toString(ch.terrain);
+			varParams.put("SHORTTERAIN", (ch.terrain < 0)?"":sTerrain);
+			varParams.put("SHTERRAIN", (ch.terrain < 0)?"":sTerrain.substring(0,1));
+			varParams.put("SIZE", CacheSize.cw2ExportString(ch.cacheSize));
+			varParams.put("SHORTSIZE", CacheSize.getExportShortId(ch.cacheSize));
+			varParams.put("OWNER", (ModTyp == 0) ? SafeXML.cleanGPX(ch.cacheOwner) : ch.cacheOwner);
+			varParams.put("DATE", ch.dateHidden);
 		}
 		else {
 			varParams.put("MAINWP", "");
 			varParams.put("MAINWPNAME", "");
+			varParams.put("DIFFICULTY", (isCustomWpt() || hard < 0)?"":decSep.replaceAll(CacheTerrDiff.longDT(hard)));
+			String sHard = Integer.toString(hard);
+			varParams.put("SHORTDIFFICULTY", (isCustomWpt() || hard < 0)?"":sHard);
+			varParams.put("SHDIFFICULTY", (isCustomWpt() || hard < 0)?"":sHard.substring(0,1));
+			varParams.put("TERRAIN", (isCustomWpt() || terrain < 0)?"":decSep.replaceAll(CacheTerrDiff.longDT(terrain)));
+			String sTerrain = Integer.toString(terrain);
+			varParams.put("SHORTTERAIN", (isCustomWpt() || terrain < 0)?"":sTerrain);
+			varParams.put("SHTERRAIN", (isCustomWpt() || terrain < 0)?"":sTerrain.substring(0,1));
+			varParams.put("SIZE", CacheSize.cw2ExportString(cacheSize));
+			varParams.put("SHORTSIZE", CacheSize.getExportShortId(cacheSize));
+			varParams.put("OWNER", (ModTyp == 0) ? SafeXML.cleanGPX(cacheOwner) : cacheOwner);
 			varParams.put("DATE", dateHidden);
 		}
 		if (isCustomWpt()) {
@@ -607,15 +628,6 @@
 		int wpl = wayPoint.length();
 		int wps = (wpl < shortWaypointLength) ? 0 : wpl - shortWaypointLength;
 		varParams.put("SHORTWAYPOINT", wayPoint.substring(wps, wpl));
-		varParams.put("OWNER", (ModTyp == 0) ? SafeXML.cleanGPX(cacheOwner) : cacheOwner);
-		varParams.put("DIFFICULTY", (isAddiWpt() || isCustomWpt() || hard < 0)?"":decSep.replaceAll(CacheTerrDiff.longDT(hard)));
-		String sHard = Integer.toString(hard);
-		varParams.put("SHORTDIFFICULTY", (isAddiWpt() || isCustomWpt() || hard < 0)?"":sHard);
-		varParams.put("SHDIFFICULTY", (isAddiWpt() || isCustomWpt() || hard < 0)?"":sHard.substring(0,1));
-		varParams.put("TERRAIN", (isAddiWpt() || isCustomWpt() || terrain < 0)?"":decSep.replaceAll(CacheTerrDiff.longDT(terrain)));
-		String sTerrain = Integer.toString(terrain);
-		varParams.put("SHORTTERAIN", (isAddiWpt() || isCustomWpt() || terrain < 0)?"":sTerrain);
-		varParams.put("SHTERRAIN", (isAddiWpt() || isCustomWpt() || terrain < 0)?"":sTerrain.substring(0,1));
 		varParams.put("DISTANCE", decSep.replaceAll(getDistance()));
 		varParams.put("BEARING", bearing);
 		if ((pos!=null && pos.isValid())) {

Modified: trunk/src/CacheWolf/exp/TPLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/TPLExporter.java	2010-07-27 10:10:25 UTC (rev 2704)
+++ trunk/src/CacheWolf/exp/TPLExporter.java	2010-07-27 20:33:11 UTC (rev 2705)
@@ -48,7 +48,7 @@
 {
 	private int type=SCALAR;
 	private String newLine="\n";
-	TextCodec codec = new AsciiCodec();
+	TextCodec codec = new AsciiCodec(); // codec = new AsciiCodec(AsciiCodec.STRIP_CR);
 	String badChars;
 	String decSep = ".";
 	int shortNameLength=30;
@@ -60,7 +60,6 @@
 
 
 	public TplFilter(){
-		codec = new AsciiCodec(AsciiCodec.STRIP_CR);
 		return;
 	}
 
@@ -69,25 +68,10 @@
 	}
 
 	public String parse(String t) {
-		//Vm.debug(t);
+
 		Regex rex, rex1;
 		String param, value;
-		// Filter newlines
-		rex = new Regex("(?m)\n$","");
-		t = rex.replaceAll(t);
 
-		// Filter comments <#-- and -->
-		rex = new Regex("<#--.*-->","");
-		t = rex.replaceAll(t);
-
-		// replace <br> or <br /> with newline
-		rex = new Regex("<br.*>","");
-		rex.search(t);
-		if (rex.didMatch()){
-			t = rex.replaceAll(t);
-			t += newLine;
-		}
-
 		// search for parameters
 		rex = new Regex("(?i)<tmpl_par.*>");
 		rex.search(t);
@@ -138,6 +122,26 @@
 			}
 
 		}
+
+		if (formatModifier == 0) {
+			// for gpx output
+			// Filter newlines
+			rex = new Regex("(?m)\n$","");
+			t = rex.replaceAll(t);
+
+			// Filter comments <#-- and -->
+			rex = new Regex("<#--.*-->","");
+			t = rex.replaceAll(t);
+
+			// replace <br> or <br /> with newline
+			rex = new Regex("<br.*>","");
+			rex.search(t);
+			if (rex.didMatch()){
+				t = rex.replaceAll(t);
+				t += newLine;
+			}
+		}
+
 		return t;
 	}
 
@@ -198,7 +202,7 @@
 
 			Regex dec = new Regex("[,.]",myFilter.decSep);
 			if (myFilter.badChars != null) rex = new Regex("["+myFilter.badChars+"]","");
-
+			
 			Vector cache_index = new Vector(); 			
 			for(int i = 0; i<counter;i++){
 				CacheHolder ch = cacheDB.get(i);
@@ -214,9 +218,11 @@
 							cache_index.add(varParams);
 							tpl.setParam("cache_index", cache_index);
 							String ext = (myFilter.out.substring(myFilter.out.lastIndexOf(".")).toLowerCase()+"    ").trim();
-							PrintWriter pagefile = new PrintWriter(new BufferedWriter(new FileWriter(saveTo.getPath() + ch.getWayPoint() + ext)));
-							pagefile.print(tpl.output());
-							pagefile.close();
+							FileWriter fw = new FileWriter(saveTo.getPath() + ch.getWayPoint() + ext);
+							fw.codec = myFilter.codec;
+							PrintWriter detfile = new PrintWriter(new BufferedWriter(fw));
+							tpl.printTo(detfile);
+							detfile.close();
 							cache_index.clear();
 						}
 					}catch(Exception e){
@@ -228,12 +234,11 @@
 			}
 			if (myFilter.single) {
 				tpl.setParam("cache_index", cache_index);
-				PrintWriter detfile;
 				FileWriter fw = new FileWriter(saveTo);
 				fw.codec = myFilter.codec;
-				detfile = new PrintWriter(new BufferedWriter(fw));
+				PrintWriter detfile = new PrintWriter(new BufferedWriter(fw));
 				tpl.printTo(detfile);
-				//detfile.print(tpl.output());
+				// oder detfile.print(tpl.output());
 				detfile.close();
 			}
 		} catch (Exception e) {



From araber95 at mail.berlios.de  Tue Jul 27 11:53:00 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Tue, 27 Jul 2010 11:53:00 PM +0200
Subject: [Cachewolf-svn] r2706 - in trunk/res_noewe: templates webmapservices
Message-ID: <20100727215301.0189E480086@sheep.berlios.de>

Author: araber95
Date: 2010-07-27 23:53:00 +0200 (Tue, 27 Jul 2010)
New Revision: 2706

Added:
   trunk/res_noewe/webmapservices/de-he_p.wms
   trunk/res_noewe/webmapservices/de-he_t25.wms
Removed:
   trunk/res_noewe/webmapservices/de-he_photo.wms
   trunk/res_noewe/webmapservices/de-he_topo_100.wms
   trunk/res_noewe/webmapservices/de-he_topo_50.wms
Modified:
   trunk/res_noewe/templates/Short documentation for the export via templates.htm
Log:
changed wms for Hessen
update of Doku for ADDIS : ICON==TYPENO

Modified: trunk/res_noewe/templates/Short documentation for the export via templates.htm
===================================================================
--- trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-07-27 20:33:11 UTC (rev 2705)
+++ trunk/res_noewe/templates/Short documentation for the export via templates.htm	2010-07-27 21:53:00 UTC (rev 2706)
@@ -416,6 +416,9 @@
 0 .. 2 yes / no / neutral<o:p></o:p></span></p>
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
+lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>
+
+<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
 lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>LOGS<span
 style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 the &lt;<span class=SpellE>tmpl_loop</span> LOGS &gt;, example see
@@ -435,6 +438,9 @@
 <span class=SpellE>logtext</span><o:p></o:p></span></p>
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
+lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>
+
+<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
 lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>ADDIS<span
 style='mso-tab-count:9'>??????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 the &lt;<span class=SpellE>tmpl_loop</span> ADDIS&gt; example see
@@ -451,19 +457,15 @@
 IMG<span style='mso-tab-count:9'>??????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 Name des <span class=SpellE>Addi</span> Icons <span class=SpellE>png</span>
 (resources <span class=SpellE>oder</span> <span class=SpellE>exporticons</span>)<br>
-ICON<span style='mso-tab-count:9'>????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
-CW-<span class=SpellE>Typenr</span>, Name des <span class=SpellE>Addi</span>
-Icons (symbols)<br>
-TYPENAME<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????? </span>:
-<span class=SpellE>Typename</span> des <span class=SpellE>Addi</span> <span
-class=SpellE>wie</span> in <span class=SpellE>der</span> GUI<br>
-TYPE<span style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????? </span>:
-tag &lt;type&gt; Type of <span class=SpellE>Addi</span> <br>
-TYPENO<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????????? </span>:
+ICON<span style='mso-tab-count:1'>??? </span><span style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 &lt;type&gt; as number string (see <span class=SpellE>CacheType.java</span> <span
 class=SpellE>e.g</span> : ?,50=Parking ?.)<br>
-</span><span style='font-size:10.0pt;font-family:Arial'>SYM<span
-style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+</span><span style='font-size:10.0pt;font-family:Arial'>TYPENAME<span
+style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????? </span>:
+Typename des Addi wie in der GUI<br>
+TYPE<span style='mso-tab-count:9'>???????????????????????????????????????????????????????????????????????????????????????????????? </span>:
+tag &lt;<span class=SpellE>type</span>&gt; Type of Addi <br>
+SYM<span style='mso-tab-count:9'>?????????????????????????????????????????????????????????????????????????????????????????????????? </span>:
 tag &lt;<span class=SpellE>sym</span>&gt;<br>
 GSTYPE<span style='mso-tab-count:8'>???????????????????????????????????????????????????????????????????????????????????????????? </span>:
 tag &lt;<span class=SpellE>groundspeak:type</span>&gt;<br>
@@ -472,6 +474,10 @@
 
 <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
 mso-outline-level:1'><span lang=EN-GB style='font-size:10.0pt;font-family:Arial;
+mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>
+
+<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
+mso-outline-level:1'><span lang=EN-GB style='font-size:10.0pt;font-family:Arial;
 mso-ansi-language:EN-GB'>ALLIMGS<span style='mso-tab-count:8'>??????????????????????????????????????????????????????????????????????????????????????????? </span>:
 the &lt;<span class=SpellE>tmpl_loop</span> ALLIMGS&gt;<br>
 FILENAME<span style='mso-tab-count:8'>????????????????????????????????????????????????????????????????????????????????????????? </span>:
@@ -575,8 +581,8 @@
 special characters in URL, e.g. space becomes %20<br>
 </span><span lang=EN-GB style='mso-ansi-language:EN-GB'>&nbsp; </span><span
 lang=EN-GB style='font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB'>quote:&nbsp;
-Change quotation marks:&nbsp;&nbsp; &quot; becomes \&quot;&nbsp; and ' becomes
-\'<br style='mso-special-character:line-break'>
+Change quotation marks:&nbsp;&nbsp; &quot; becomes \&quot;&nbsp; and ' becomes \'<br
+style='mso-special-character:line-break'>
 <![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
 <![endif]></span><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>
 

Added: trunk/res_noewe/webmapservices/de-he_p.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-he_p.wms	                        (rev 0)
+++ trunk/res_noewe/webmapservices/de-he_p.wms	2010-07-27 21:53:00 UTC (rev 2706)
@@ -0,0 +1,21 @@
+TakenFromUrl:       http://www.gds-srv.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-images.ows?
+GetCapabilitiesUrl: http://www.gds-srv.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-images.ows?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
+Name:               DE Hessen photo
+MapType:                        photo
+MainUrl:            http://www.gds-srv.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-images.ows?
+ServiceTypeUrlPart: SERVICE=WMS
+VersionUrlPart:     VERSION=1.1.1
+CoordinateReferenceSystemCacheWolf:  31467
+CoordinateReferenceSystemUrlPart: SRS=EPSG:31467
+RequestUrlPart:     REQUEST=GetMap
+#LayersUrlPart:     LAYERS=free-maps|Hessen Geodaten Luftbild||
+#LayersUrlPart:     LAYERS=adv_dop|DOP|0.39912227874371|79.8244557487419
+LayersUrlPart:     LAYERS=adv_dop
+StylesUrlPart:     STYLES=
+ImageFormatUrlPart:FORMAT=image/png
+BoundingBoxTopLeftWGS84: N 51.6697 E 7.6991
+BoundingBoxButtomRightWGS84: N 49.3455 E 11.3986
+MinScale:   0.4
+MaxScale:   3
+RecommendedScale:    1
+ImageFileExtension: .png

Deleted: trunk/res_noewe/webmapservices/de-he_photo.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-he_photo.wms	2010-07-27 20:33:11 UTC (rev 2705)
+++ trunk/res_noewe/webmapservices/de-he_photo.wms	2010-07-27 21:53:00 UTC (rev 2706)
@@ -1,20 +0,0 @@
-TakenFromUrl:	http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
-GetCapabilitiesUrl:	http://lika.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-images.plx?REQUEST=GetCapabilities&VERSION=1.1.0&SERVICE=WMS
-Name: not available @ 31.3.2010 de.he Luftbild
-MapType:	photo
-MainUrl:	http://lika.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-images.plx?
-ServiceTypeUrlPart:	SERVICE=WMS
-VersionUrlPart:	VERSION=1.1.1
-CoordinateReferenceSystemCacheWolf:	31467
-CoordinateReferenceSystemUrlPart:	SRS=EPSG:31467
-RequestUrlPart:	REQUEST=GetMap
-LayersUrlPart:	LAYERS=DOP04F1
-StylesUrlPart:	STYLES=
-ImageFormatUrlPart:	FORMAT=image/jpeg
-BoundingBoxTopLeftWGS84:	N 51.6697 E 7.69911
-BoundingBoxButtomRightWGS84:	N 49.3455 E 11.3986
-MinScale:   0.399122
-MaxScale:   9.97806
-RecommendedScale:   0.4
-ImageFileExtension: .jpg
-

Added: trunk/res_noewe/webmapservices/de-he_t25.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-he_t25.wms	                        (rev 0)
+++ trunk/res_noewe/webmapservices/de-he_t25.wms	2010-07-27 21:53:00 UTC (rev 2706)
@@ -0,0 +1,23 @@
+TakenFromUrl:       http://www.gds-srv.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-maps.ows?
+GetCapabilitiesUrl: http://www.gds-srv.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-maps.ows?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
+Name:               DE Hessen t25
+MapType:                        topo
+MainUrl:            http://www.gds-srv.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-maps.ows?
+ServiceTypeUrlPart: SERVICE=WMS
+VersionUrlPart:     VERSION=1.1.1
+CoordinateReferenceSystemCacheWolf:  31467
+CoordinateReferenceSystemUrlPart: SRS=EPSG:31467
+RequestUrlPart:     REQUEST=GetMap
+#LayersUrlPart:     LAYERS=free-maps|Hessen Geodaten||
+#LayersUrlPart:     LAYERS=adv_dtk100|DTK 100|1.49670854528891|199.561139371855
+#LayersUrlPart:     LAYERS=adv_dtk50|DTK 50|1.49670854528891|99.7805696859274
+#LayersUrlPart:     LAYERS=adv_dtk25|DTK 25|1.49670854528891|49.8902848429637
+LayersUrlPart:     LAYERS=adv_dtk25
+StylesUrlPart:     STYLES=
+ImageFormatUrlPart:FORMAT=image/png
+BoundingBoxTopLeftWGS84: N 51.6697 E 7.6991
+BoundingBoxButtomRightWGS84: N 49.3455 E 11.3986
+MinScale:   2
+MaxScale:   16
+RecommendedScale:    3 7 10
+ImageFileExtension: .png

Deleted: trunk/res_noewe/webmapservices/de-he_topo_100.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-he_topo_100.wms	2010-07-27 20:33:11 UTC (rev 2705)
+++ trunk/res_noewe/webmapservices/de-he_topo_100.wms	2010-07-27 21:53:00 UTC (rev 2706)
@@ -1,21 +0,0 @@
-TakenFromUrl:	http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
-GetCapabilitiesUrl:	http://lika.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-maps.plx?REQUEST=GetCapabilities&VERSION=1.1.0&SERVICE=WMS
-Name:	not available @ 31.3.2010 de.he Topo 100
-MapType:	topo
-MainUrl:	http://lika.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-maps.plx?
-LayersName:
-ServiceTypeUrlPart:	SERVICE=WMS
-VersionUrlPart:	VERSION=1.1.1
-CoordinateReferenceSystemCacheWolf:	31467
-CoordinateReferenceSystemUrlPart:	SRS=EPSG:31467
-RequestUrlPart:	REQUEST=GetMap
-LayersUrlPart:	LAYERS=ATKPG50-N1
-StylesUrlPart:	STYLES=
-ImageFormatUrlPart:	FORMAT=image/png
-BoundingBoxTopLeftWGS84:	N 51.6697 E 7.69911
-BoundingBoxButtomRightWGS84:	N 49.3455 E 11.3986
-MinScale:	1.49671
-MaxScale:	99.7806
-RecommendedScale:	10.0
-ImageFileExtension: .png
-

Deleted: trunk/res_noewe/webmapservices/de-he_topo_50.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-he_topo_50.wms	2010-07-27 20:33:11 UTC (rev 2705)
+++ trunk/res_noewe/webmapservices/de-he_topo_50.wms	2010-07-27 21:53:00 UTC (rev 2706)
@@ -1,20 +0,0 @@
-TakenFromUrl:	http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
-GetCapabilitiesUrl:	http://lika.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-maps.plx?REQUEST=GetCapabilities&VERSION=1.1.0&SERVICE=WMS
-Name:	not available @ 31.3.2010 de.he Topo 50
-MapType:	topo
-MainUrl:	http://lika.hessen.de/cgi-bin/lika-services/de-viewer/access/ogc-free-maps.plx?
-ServiceTypeUrlPart:	SERVICE=WMS
-VersionUrlPart:	VERSION=1.1.1
-CoordinateReferenceSystemCacheWolf:	31467
-CoordinateReferenceSystemUrlPart:	SRS=EPSG:31467
-RequestUrlPart:	REQUEST=GetMap
-LayersUrlPart:	LAYERS=ATKPG25-N1
-StylesUrlPart:	STYLES=
-ImageFormatUrlPart:	FORMAT=image/png
-BoundingBoxTopLeftWGS84:	N 51.6697 E 7.69911
-BoundingBoxButtomRightWGS84:	N 49.3455 E 11.3986
-MinScale:	1.49671
-MaxScale:	49.8903
-RecommendedScale:	5.0
-ImageFileExtension: .png
-



From araber95 at mail.berlios.de  Wed Jul 28 10:34:44 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 28 Jul 2010 10:34:44 AM +0200
Subject: [Cachewolf-svn] r2707 - trunk/res_noewe/webmapservices
Message-ID: <20100728083444.81E5548054C@sheep.berlios.de>

Author: araber95
Date: 2010-07-28 10:34:44 +0200 (Wed, 28 Jul 2010)
New Revision: 2707

Added:
   trunk/res_noewe/webmapservices/de-by_p.wms
   trunk/res_noewe/webmapservices/de-by_t50.wms
Removed:
   trunk/res_noewe/webmapservices/de-by_photo.wms
   trunk/res_noewe/webmapservices/de-by_topo_50.wms
Log:
wms Bayern works (again)

Copied: trunk/res_noewe/webmapservices/de-by_p.wms (from rev 2706, trunk/res_noewe/webmapservices/de-by_photo.wms)
===================================================================
--- trunk/res_noewe/webmapservices/de-by_p.wms	                        (rev 0)
+++ trunk/res_noewe/webmapservices/de-by_p.wms	2010-07-28 08:34:44 UTC (rev 2707)
@@ -0,0 +1,24 @@
+TakenFromUrl:       http://www.geodaten.bayern.de/ogc/getogc.cgi?
+GetCapabilitiesUrl: http://www.geodaten.bayern.de/ogc/getogc.cgi?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
+Name:               DE Bayern p
+MapType:                        photo
+MainUrl:            http://www.geodaten.bayern.de/ogc/getogc.cgi?
+ServiceTypeUrlPart: SERVICE=WMS
+VersionUrlPart:     VERSION=1.1.1
+CoordinateReferenceSystemCacheWolf:  31468
+CoordinateReferenceSystemUrlPart: SRS=EPSG:31468
+RequestUrlPart:     REQUEST=GetMap
+#LayersUrlPart:     LAYERS=OGC:WMS|Web Map Service der Bayerischen Vermessungsverwaltung||
+#LayersUrlPart:     LAYERS=copyright|Copyrightvermerk||
+#LayersUrlPart:     LAYERS=TK50|Digitale Topographische Karte 1:50000|0.997805696859274|24.9451424214819
+#LayersUrlPart:     LAYERS=UK500|Digitale Topographische Karte 1:500000|14.9670854528891|498.902848429637
+#LayersUrlPart:     LAYERS=DOP|Digitale Orthophotos 2,0m|2.82329121926332|1147.47655138817
+LayersUrlPart:     LAYERS=DOP
+StylesUrlPart:     STYLES=
+ImageFormatUrlPart:FORMAT=image/png
+BoundingBoxTopLeftWGS84: N 50.6269 E 8.8929
+BoundingBoxButtomRightWGS84: N 47.0828 E 13.9782
+MinScale:   2.82
+MaxScale:   11
+RecommendedScale:    3 4 5
+ImageFileExtension: .png

Deleted: trunk/res_noewe/webmapservices/de-by_photo.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-by_photo.wms	2010-07-27 21:53:00 UTC (rev 2706)
+++ trunk/res_noewe/webmapservices/de-by_photo.wms	2010-07-28 08:34:44 UTC (rev 2707)
@@ -1,20 +0,0 @@
-# please refer to readme_wms.txt for an explantion of this file format
-TakenFromUrl:	http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
-GetCapabilitiesUrl:	http://www.geodaten.bayern.de/ogc/getogc.cgi?REQUEST=GetCapabilities&VERSION=1.1.0&SERVICE=WMS
-Name: not available @ 31.3.2010 de.by Luftbild
-MapType:	photo
-MainUrl:	http://www.geodaten.bayern.de/ogc/getogc.cgi?
-ServiceTypeUrlPart:	SERVICE=WMS
-VersionUrlPart:	VERSION=1.1.1
-CoordinateReferenceSystemCacheWolf: 31468
-CoordinateReferenceSystemUrlPart:	SRS=EPSG:31468
-RequestUrlPart:	REQUEST=GetMap
-LayersUrlPart:	LAYERS=DOP
-StylesUrlPart:	STYLES=
-ImageFormatUrlPart:	FORMAT=image/png
-BoundingBoxTopLeftWGS84:	N 50.6269 E 8.89292
-BoundingBoxButtomRightWGS84:	N 47.0828 E 13.9782
-MinScale:	2.82
-MaxScale:	200
-RecommendedScale:	2.0
-ImageFileExtension: .png

Copied: trunk/res_noewe/webmapservices/de-by_t50.wms (from rev 2706, trunk/res_noewe/webmapservices/de-by_topo_50.wms)
===================================================================
--- trunk/res_noewe/webmapservices/de-by_t50.wms	                        (rev 0)
+++ trunk/res_noewe/webmapservices/de-by_t50.wms	2010-07-28 08:34:44 UTC (rev 2707)
@@ -0,0 +1,24 @@
+TakenFromUrl:       http://www.geodaten.bayern.de/ogc/getogc.cgi?
+GetCapabilitiesUrl: http://www.geodaten.bayern.de/ogc/getogc.cgi?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
+Name:               DE Bayern t50
+MapType:                        topo
+MainUrl:            http://www.geodaten.bayern.de/ogc/getogc.cgi?
+ServiceTypeUrlPart: SERVICE=WMS
+VersionUrlPart:     VERSION=1.1.1
+CoordinateReferenceSystemCacheWolf:  31468
+CoordinateReferenceSystemUrlPart: SRS=EPSG:31468
+RequestUrlPart:     REQUEST=GetMap
+#LayersUrlPart:     LAYERS=OGC:WMS|Web Map Service der Bayerischen Vermessungsverwaltung||
+#LayersUrlPart:     LAYERS=copyright|Copyrightvermerk||
+#LayersUrlPart:     LAYERS=TK50|Digitale Topographische Karte 1:50000|0.997805696859274|24.9451424214819
+#LayersUrlPart:     LAYERS=UK500|Digitale Topographische Karte 1:500000|14.9670854528891|498.902848429637
+#LayersUrlPart:     LAYERS=DOP|Digitale Orthophotos 2,0m|2.82329121926332|1147.47655138817
+LayersUrlPart:     LAYERS=TK50
+StylesUrlPart:     STYLES=
+ImageFormatUrlPart:FORMAT=image/png
+BoundingBoxTopLeftWGS84: N 50.6269 E 8.8929
+BoundingBoxButtomRightWGS84: N 47.0828 E 13.9782
+MinScale:   1
+MaxScale:   15
+RecommendedScale:    3 5 7
+ImageFileExtension: .png

Deleted: trunk/res_noewe/webmapservices/de-by_topo_50.wms
===================================================================
--- trunk/res_noewe/webmapservices/de-by_topo_50.wms	2010-07-27 21:53:00 UTC (rev 2706)
+++ trunk/res_noewe/webmapservices/de-by_topo_50.wms	2010-07-28 08:34:44 UTC (rev 2707)
@@ -1,20 +0,0 @@
-# please refere to readme_wms.txt for an explantion of this file format
-TakenFromUrl:	http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
-GetCapabilitiesUrl:	http://www.geodaten.bayern.de/ogc/getogc.cgi?REQUEST=GetCapabilities&VERSION=1.1.0&SERVICE=WMS
-Name: not available @ 31.3.2010 de.by Topo 50
-MapType:	topo
-MainUrl:	http://www.geodaten.bayern.de/ogc/getogc.cgi?
-ServiceTypeUrlPart:	SERVICE=WMS
-VersionUrlPart:	VERSION=1.1.1
-CoordinateReferenceSystemCacheWolf: 31468
-CoordinateReferenceSystemUrlPart:	SRS=EPSG:31468
-RequestUrlPart:	REQUEST=GetMap
-LayersUrlPart:	LAYERS=TK50
-StylesUrlPart:	STYLES=
-ImageFormatUrlPart:	FORMAT=image/png
-BoundingBoxTopLeftWGS84:	N 50.6269 E 8.89292
-BoundingBoxButtomRightWGS84:	N 47.0828 E 13.9782
-MinScale:	0.997806
-MaxScale:	24.9451
-RecommendedScale:	5.0
-ImageFileExtension: .png



From araber95 at mail.berlios.de  Wed Jul 28 11:48:57 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 28 Jul 2010 11:48:57 AM +0200
Subject: [Cachewolf-svn] r2708 - trunk/res_noewe/webmapservices
Message-ID: <20100728094857.4B364480552@sheep.berlios.de>

Author: araber95
Date: 2010-07-28 11:48:57 +0200 (Wed, 28 Jul 2010)
New Revision: 2708

Added:
   trunk/res_noewe/webmapservices/de_t2500.wms
Removed:
   trunk/res_noewe/webmapservices/de_topo_1000.wms
   trunk/res_noewe/webmapservices/de_topo_200.wms
   trunk/res_noewe/webmapservices/de_topo_500.wms
   trunk/res_noewe/webmapservices/eu_t_osm-uni-bonn.wms
Log:
update of wms servers

Added: trunk/res_noewe/webmapservices/de_t2500.wms
===================================================================
--- trunk/res_noewe/webmapservices/de_t2500.wms	                        (rev 0)
+++ trunk/res_noewe/webmapservices/de_t2500.wms	2010-07-28 09:48:57 UTC (rev 2708)
@@ -0,0 +1,20 @@
+TakenFromUrl:       http://gdz.bkg.bund.de/arcgis/services/DTK2500/MapServer/WMSServe
+GetCapabilitiesUrl: http://gdz.bkg.bund.de/wms_dtk2500?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
+Name:               DE t2500
+MapType:                        topo
+MainUrl:            http://gdz.bkg.bund.de/wms_dtk2500?
+ServiceTypeUrlPart: SERVICE=WMS
+VersionUrlPart:     VERSION=1.1.1
+CoordinateReferenceSystemCacheWolf:  31466 31467 31468 31469
+CoordinateReferenceSystemUrlPart: SRS=EPSG:31466 SRS=EPSG:31467 SRS=EPSG:31468 SRS=EPSG:31469
+RequestUrlPart:     REQUEST=GetMap
+#LayersUrlPart:     LAYERS=0|DTK2500||
+LayersUrlPart:     LAYERS=0
+StylesUrlPart:     STYLES=
+ImageFormatUrlPart:FORMAT=image/png
+BoundingBoxTopLeftWGS84: N 55.7319 E 4.6186
+BoundingBoxButtomRightWGS84: N 45.9690 E 16.7118
+MinScale:   50
+MaxScale:   350
+RecommendedScale:    150
+ImageFileExtension: .png

Deleted: trunk/res_noewe/webmapservices/de_topo_1000.wms
===================================================================
--- trunk/res_noewe/webmapservices/de_topo_1000.wms	2010-07-28 08:34:44 UTC (rev 2707)
+++ trunk/res_noewe/webmapservices/de_topo_1000.wms	2010-07-28 09:48:57 UTC (rev 2708)
@@ -1,20 +0,0 @@
-TakenFromUrl:	http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
-GetCapabilitiesUrl:	http://gdz1.leipzig.ifag.de/servlet/com.esri.wms.Esrimap?servicename=dtk200_500_1000_a10_gk4_wms&service=WMS&version=1.1.1&request=GetCapabilities
-Name: not available @ 31.3.2010 de Topo 1000
-MainUrl:	http://gdz1.leipzig.ifag.de/servlet/com.esri.wms.Esrimap?servicename=dtk200_500_1000_a10_gk4_wms&
-MapType:	topo
-ServiceTypeUrlPart:	SERVICE=WMS
-VersionUrlPart:	VERSION=1.1.0
-CoordinateReferenceSystemCacheWolf:	31468
-CoordinateReferenceSystemUrlPart:	SRS=EPSG:31468
-RequestUrlPart:	REQUEST=GetMap
-LayersUrlPart:	LAYERS=DTK1000
-StylesUrlPart:	STYLES=
-ImageFormatUrlPart:	FORMAT=image/png
-BoundingBoxTopLeftWGS84:	N 54.937 E 6.00242837
-BoundingBoxButtomRightWGS84:	N 46.95 E 16.12332498
-# there is no scale hint in the getCapabilities answer :-( --> allow all
-#MinScale:	0.01
-#MaxScale:	40
-RecommendedScale:	100
-ImageFileExtension: .png

Deleted: trunk/res_noewe/webmapservices/de_topo_200.wms
===================================================================
--- trunk/res_noewe/webmapservices/de_topo_200.wms	2010-07-28 08:34:44 UTC (rev 2707)
+++ trunk/res_noewe/webmapservices/de_topo_200.wms	2010-07-28 09:48:57 UTC (rev 2708)
@@ -1,20 +0,0 @@
-TakenFromUrl:	http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
-GetCapabilitiesUrl:	http://gdz1.leipzig.ifag.de/servlet/com.esri.wms.Esrimap?servicename=dtk200_500_1000_a10_gk4_wms&service=WMS&version=1.1.1&request=GetCapabilities
-Name: not available @ 31.3.2010 de Topo 200
-MainUrl:	http://gdz1.leipzig.ifag.de/servlet/com.esri.wms.Esrimap?servicename=dtk200_500_1000_a10_gk4_wms&
-MapType:	topo
-ServiceTypeUrlPart:	SERVICE=WMS
-VersionUrlPart:	VERSION=1.1.0
-CoordinateReferenceSystemCacheWolf:	31468
-CoordinateReferenceSystemUrlPart:	SRS=EPSG:31468
-RequestUrlPart:	REQUEST=GetMap
-LayersUrlPart:	LAYERS=DTK200-V
-StylesUrlPart:	STYLES=
-ImageFormatUrlPart:	FORMAT=image/png
-BoundingBoxTopLeftWGS84:	N 55.0960681 E 6.07358734
-BoundingBoxButtomRightWGS84:	N 47.161701 E 16.05521058
-# there is no scale hint in the getCapabilities answer :-( --> allow all
-#MinScale:	0.01
-#MaxScale:	40
-RecommendedScale:	20
-ImageFileExtension: .png
\ No newline at end of file

Deleted: trunk/res_noewe/webmapservices/de_topo_500.wms
===================================================================
--- trunk/res_noewe/webmapservices/de_topo_500.wms	2010-07-28 08:34:44 UTC (rev 2707)
+++ trunk/res_noewe/webmapservices/de_topo_500.wms	2010-07-28 09:48:57 UTC (rev 2708)
@@ -1,20 +0,0 @@
-TakenFromUrl:	http://deutschlandviewer.bayern.de/deutschlandviewer/D_Viewer_Hilfe/Hilfe_D_Viewer.htm#Geodaten
-GetCapabilitiesUrl:	http://gdz1.leipzig.ifag.de/servlet/com.esri.wms.Esrimap?servicename=dtk200_500_1000_a10_gk4_wms&service=WMS&version=1.1.1&request=GetCapabilities
-Name: not available @ 31.3.2010 de Topo 500
-MainUrl:	http://gdz1.leipzig.ifag.de/servlet/com.esri.wms.Esrimap?servicename=dtk200_500_1000_a10_gk4_wms&
-MapType:	topo
-ServiceTypeUrlPart:	SERVICE=WMS
-VersionUrlPart:	VERSION=1.1.0
-CoordinateReferenceSystemCacheWolf:	31468
-CoordinateReferenceSystemUrlPart:	SRS=EPSG:31468
-RequestUrlPart:	REQUEST=GetMap
-LayersUrlPart:	LAYERS=DTK500-V
-StylesUrlPart:	STYLES=
-ImageFormatUrlPart:	FORMAT=image/png
-BoundingBoxTopLeftWGS84:	N 54.9369973 E 6.00184962
-BoundingBoxButtomRightWGS84:	N 46.959702 E 16.12339886
-# there is no scale hint in the getCapabilities answer :-( --> allow all
-#MinScale:	0.01
-#MaxScale:	40
-RecommendedScale:	50
-ImageFileExtension: .png

Deleted: trunk/res_noewe/webmapservices/eu_t_osm-uni-bonn.wms
===================================================================
--- trunk/res_noewe/webmapservices/eu_t_osm-uni-bonn.wms	2010-07-28 08:34:44 UTC (rev 2707)
+++ trunk/res_noewe/webmapservices/eu_t_osm-uni-bonn.wms	2010-07-28 09:48:57 UTC (rev 2708)
@@ -1,42 +0,0 @@
-TakenFromUrl:       http://services.giub.uni-bonn.de:80/geoserver/wms
-GetCapabilitiesUrl: http://services.giub.uni-bonn.de/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities
-Name: not available @ 31.3.2010 Europa t OSM(Server uni-bonn)
-MapType:                        topo
-MainUrl:            http://services.giub.uni-bonn.de/wms?
-ServiceTypeUrlPart: SERVICE=WMS
-VersionUrlPart:     VERSION=1.1.1
-CoordinateReferenceSystemCacheWolf:  4326
-CoordinateReferenceSystemUrlPart: SRS=EPSG:4326
-#CoordinateReferenceSystemCacheWolf:  3003 3004 4326 31466 31467 31468 31469
-#CoordinateReferenceSystemUrlPart: SRS=EPSG:3003 SRS=EPSG:3004 SRS=EPSG:4326 SRS=EPSG:31466 SRS=EPSG:31467 SRS=EPSG:31468 SRS=EPSG:31469
-RequestUrlPart:     REQUEST=GetMap
-#LayersUrlPart:     LAYERS=osm_auto:CountryAnnotation|CountryAnnotation_Type||
-#LayersUrlPart:     LAYERS=gdi3d:Europe_GK3|Europe_GK3_Type||
-#LayersUrlPart:     LAYERS=hd:Klimaoekoligische_Ausgleichsflaechen|Klimaoekoligische_Ausgleichsflaechen_Type||
-#LayersUrlPart:     LAYERS=hd:Luftbewegung_und_Belueftung|Luftbewegung_und_Belueftung_Type||
-#LayersUrlPart:     LAYERS=osm_auto:buildings|buildings_Type||
-#LayersUrlPart:     LAYERS=hd:hd_geb_dichte|hd_geb_dichte3_Type||
-#LayersUrlPart:     LAYERS=osm_auto:naturals|naturals_Type||
-#LayersUrlPart:     LAYERS=osm_auto:osm_coastlines|osm_coastlines_Type||
-#LayersUrlPart:     LAYERS=osm_auto:places|places_Type||
-#LayersUrlPart:     LAYERS=osm_auto:points|points_Type||
-#LayersUrlPart:     LAYERS=osm_auto:rails|rails_Type||
-#LayersUrlPart:     LAYERS=osm_auto:roads|roads_Type||
-#LayersUrlPart:     LAYERS=osm_auto:waterways|waterways_Type||
-#LayersUrlPart:     LAYERS=osm_auto:world|world_Type||
-#LayersUrlPart:     LAYERS=osm_auto:world_ocean|world_ocean_Type||
-#LayersUrlPart:     LAYERS=osm_auto:srtm_38_02|srtm_38_02 is a A raster file accompanied by a spatial data file||
-#LayersUrlPart:     LAYERS=osm_auto:all|osm_auto:all||
-#LayersUrlPart:     LAYERS=osm_auto:all_Europe_GK3|osm_auto:all_Europe_GK3||
-#LayersUrlPart:     LAYERS=osm_auto:all_new|osm_auto:all_new||
-LayersUrlPart:     LAYERS=osm_auto:all_Europe_GK3
-StylesUrlPart:     STYLES=
-ImageFormatUrlPart:FORMAT=image/png
-BoundingBoxTopLeftWGS84: N 90.0000 W 35.0109
-BoundingBoxButtomRightWGS84: N 16.6632 E 61.1836
-#BBox_Mitte: N 53.3316214825176 E 13.086335159862
-MinScale:   0
-MaxScale:   100
-RecommendedScale:   0,5 5 10
-ImageFileExtension: .png
-# Boundingbox, EPSG, Layerauswahl, Scale sind noch zu pr?fen
\ No newline at end of file



From araber95 at mail.berlios.de  Wed Jul 28 08:12:06 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Wed, 28 Jul 2010 08:12:06 PM +0200
Subject: [Cachewolf-svn] r2709 - trunk/src/CacheWolf/imp
Message-ID: <20100728181207.33829480BA7@sheep.berlios.de>

Author: araber95
Date: 2010-07-28 20:12:06 +0200 (Wed, 28 Jul 2010)
New Revision: 2709

Modified:
   trunk/src/CacheWolf/imp/GPXImporter.java
Log:
gpx with missing/existing cache-id(OC) works now correct. (p.ex. GcTour gpx is without cache-id)

Modified: trunk/src/CacheWolf/imp/GPXImporter.java
===================================================================
--- trunk/src/CacheWolf/imp/GPXImporter.java	2010-07-28 09:48:57 UTC (rev 2708)
+++ trunk/src/CacheWolf/imp/GPXImporter.java	2010-07-28 18:12:06 UTC (rev 2709)
@@ -215,8 +215,14 @@
 			boolean available = false;
 			boolean archived  = false;
 			inCache=true;
-			String ocCacheID = new String(atts.getValue("id"));
-			holder.setOcCacheID(ocCacheID);
+			// get CacheID -- missing p.ex. on GcTour gpx
+			for (int i = 0; i < atts.getLength(); i++) {
+				if (atts.getName(i).equals("id")) {
+					String ocCacheID = atts.getValue("id");
+					holder.setOcCacheID(ocCacheID);
+					break;
+				}
+			}
 			// get status
 			String status = new String(atts.getValue("status"));
 			if (status.equals("Available")) available = true;



From maierkurt at mail.berlios.de  Thu Jul 29 09:51:01 2010
From: maierkurt at mail.berlios.de (maierkurt at mail.berlios.de)
Date: Thu, 29 Jul 2010 09:51:01 AM +0200
Subject: [Cachewolf-svn] r2710 - trunk/src/CacheWolf
Message-ID: <20100729075101.A2B01480A43@sheep.berlios.de>

Author: maierkurt
Date: 2010-07-29 09:51:01 +0200 (Thu, 29 Jul 2010)
New Revision: 2710

Modified:
   trunk/src/CacheWolf/SolverPanel.java
Log:
Exit-Button in InputBox "Direct Command Execution" now works as intended.

Modified: trunk/src/CacheWolf/SolverPanel.java
===================================================================
--- trunk/src/CacheWolf/SolverPanel.java	2010-07-28 18:12:06 UTC (rev 2709)
+++ trunk/src/CacheWolf/SolverPanel.java	2010-07-29 07:51:01 UTC (rev 2710)
@@ -10,6 +10,7 @@
 import ewe.ui.ControlEvent;
 import ewe.ui.DataChangeEvent;
 import ewe.ui.Event;
+import ewe.ui.FormBase;
 import ewe.ui.Gui;
 import ewe.ui.InputBox;
 import ewe.ui.Menu;
@@ -150,7 +151,7 @@
 		InpScreen boxInp=new InpScreen(MyLocale.getMsg(1733,"Input command"));
 		boxInp.input(parent.getFrame(),"",100); //,MyLocale.getScreenWidth()*4/5);
 		String s=boxInp.getInput();
-		if (s.equals("")) return;
+		if (s.equals("") || boxInp.exitValue == FormBase.IDCANCEL) return;
 		processCommand(s);
 	}
 	
@@ -173,9 +174,9 @@
     }
 	
 	public void onEvent(Event ev){
+		if (ev instanceof DataChangeEvent) Global.mainTab.cacheDirty=true;
 		if(ev instanceof ControlEvent && ev.type == ControlEvent.PRESSED){
 			if(ev.target == mBtSolve){
-				saveChanges();
 				processCommand(mText.getText());
 			}
 			if (ev.target==btnWolfLang) {
@@ -189,26 +190,4 @@
 		}
 	}
 	
-	/**
-	 * Saves solver content to file if it is changed. Saving is always done in the main
-	 * cache (if it is an addi waypoint).
-	 */
-	private void saveChanges() {
-		if (isDirty()) {
-			CacheHolder cacheToUpdate;
-			if (ch.mainCache == null) {
-				cacheToUpdate = ch;
-			} else {
-				cacheToUpdate = ch.mainCache;
-			}
-			boolean oldHasSolver = cacheToUpdate.hasSolver();
-			cacheToUpdate.getCacheDetails(false).setSolver(getInstructions());
-			if (oldHasSolver != cacheToUpdate.hasSolver()) { 
-				Global.mainTab.tbP.tc.update(true);
-			}	
-			cacheToUpdate.save();
-			originalInstructions = getInstructions();
-		}		
-	}
-	
 }



From maierkurt at mail.berlios.de  Thu Jul 29 10:12:53 2010
From: maierkurt at mail.berlios.de (maierkurt at mail.berlios.de)
Date: Thu, 29 Jul 2010 10:12:53 AM +0200
Subject: [Cachewolf-svn] r2711 - trunk/src/CacheWolf
Message-ID: <20100729081253.4AB81480A43@sheep.berlios.de>

Author: maierkurt
Date: 2010-07-29 10:12:53 +0200 (Thu, 29 Jul 2010)
New Revision: 2711

Modified:
   trunk/src/CacheWolf/SolverPanel.java
Log:
Exit-Button in InputBox "Direct Command Execution" now works as intended.

Modified: trunk/src/CacheWolf/SolverPanel.java
===================================================================
--- trunk/src/CacheWolf/SolverPanel.java	2010-07-29 07:51:01 UTC (rev 2710)
+++ trunk/src/CacheWolf/SolverPanel.java	2010-07-29 08:12:53 UTC (rev 2711)
@@ -151,7 +151,7 @@
 		InpScreen boxInp=new InpScreen(MyLocale.getMsg(1733,"Input command"));
 		boxInp.input(parent.getFrame(),"",100); //,MyLocale.getScreenWidth()*4/5);
 		String s=boxInp.getInput();
-		if (s.equals("") || boxInp.exitValue == FormBase.IDCANCEL) return;
+		if (s.equals("") || (boxInp.exitValue == FormBase.IDCANCEL)) return;
 		processCommand(s);
 	}
 	
@@ -174,9 +174,9 @@
     }
 	
 	public void onEvent(Event ev){
-		if (ev instanceof DataChangeEvent) Global.mainTab.cacheDirty=true;
 		if(ev instanceof ControlEvent && ev.type == ControlEvent.PRESSED){
 			if(ev.target == mBtSolve){
+				saveChanges();
 				processCommand(mText.getText());
 			}
 			if (ev.target==btnWolfLang) {
@@ -190,4 +190,26 @@
 		}
 	}
 	
+	/**
+	 * Saves solver content to file if it is changed. Saving is always done in the main
+	 * cache (if it is an addi waypoint).
+	 */
+	private void saveChanges() {
+		if (isDirty()) {
+			CacheHolder cacheToUpdate;
+			if (ch.mainCache == null) {
+				cacheToUpdate = ch;
+			} else {
+				cacheToUpdate = ch.mainCache;
+			}
+			boolean oldHasSolver = cacheToUpdate.hasSolver();
+			cacheToUpdate.getCacheDetails(false).setSolver(getInstructions());
+			if (oldHasSolver != cacheToUpdate.hasSolver()) { 
+				Global.mainTab.tbP.tc.update(true);
+			}	
+			cacheToUpdate.save();
+			originalInstructions = getInstructions();
+		}		
+	}
+	
 }



From araber95 at mail.berlios.de  Thu Jul 29 11:43:38 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Thu, 29 Jul 2010 11:43:38 AM +0200
Subject: [Cachewolf-svn] r2712 - trunk/res_noewe
Message-ID: <20100729094338.5B585480BEA@sheep.berlios.de>

Author: araber95
Date: 2010-07-29 11:43:38 +0200 (Thu, 29 Jul 2010)
New Revision: 2712

Modified:
   trunk/res_noewe/spider.def
Log:
update for import from gc after change of gc webpage from 7/29/10

Modified: trunk/res_noewe/spider.def
===================================================================
--- trunk/res_noewe/spider.def	2010-07-29 08:12:53 UTC (rev 2711)
+++ trunk/res_noewe/spider.def	2010-07-29 09:43:38 UTC (rev 2712)
@@ -40,6 +40,7 @@
 # Version 7.1 - 20100528 better description recognition
 # Version 8.0 - 20100604 adaption to new GC-design
 # Version 9.0 - 20100630 adaption to new GC-design
+# Version 10.0 - 20100729 adaption to new GC-design DateHiddenrex , optimized cacheOwnerRex araber95
 #============================================================
 # A suffix of Rex indicates a regular expression
 # A suffix of ExStart indicates the start of an Extractor search pattern
@@ -107,9 +108,8 @@
 shortDescRex       = <span\ id="ctl00_ContentBody_ShortDescription">((?s).*?)</span>
 longDescRex        = tentBody_LongDescription">((?s).*?)<td\ valign="top"\ width="10%">\\s*&nbsp;\\s*</td
 cacheNameRex       = <span\ id="ctl00_ContentBody_CacheName">((?s).*?)</span>
-#cacheOwnerRex      = <strong>\\s*A.*\\s*cache\\s*</strong>\\s*by\ <a\ href=(?:(?s).*?)>((?s).*?)</a>\\s*</td>
-cacheOwnerRex      = by\ <a\ href="http://www.geocaching.com/profile/(?:(?s).*?)>((?s).*?)</a>
-dateHiddenRex      = <td>\\s*<strong>\\s*(?:Hidden|Event\ Date)\\s*:</strong>\\s*((?s).*?)\\s*(?:</td>|<a href=)
+cacheOwnerRex      = &wid(?:(?s).*?)>((?s).*?)<
+dateHiddenRex      = (?:Hidden|Event\ Date)\\s*:\ </strong>\\s*((?s).*?)\\s*<
 hintsRex           = <div id="div_hint" class="HalfLeft">\\s*((?s).*?)\\s*</div>
 sizeRex            = alt="Size:\ ((?s).*?)"\ />&nbsp<small>
 difficultyRex      = <td>\\s*<strong>\\s*Difficulty:</strong>\\s*<img src=.*?alt="(.*?)\ out\ of



From maierkurt at mail.berlios.de  Thu Jul 29 03:28:58 2010
From: maierkurt at mail.berlios.de (maierkurt at mail.berlios.de)
Date: Thu, 29 Jul 2010 03:28:58 PM +0200
Subject: [Cachewolf-svn] r2713 - trunk/src/CacheWolf
Message-ID: <20100729132858.CE3F1480BEE@sheep.berlios.de>

Author: maierkurt
Date: 2010-07-29 15:28:58 +0200 (Thu, 29 Jul 2010)
New Revision: 2713

Modified:
   trunk/src/CacheWolf/InputScreen.java
Log:
Repainting the panel after pressing button "Bearing".

Modified: trunk/src/CacheWolf/InputScreen.java
===================================================================
--- trunk/src/CacheWolf/InputScreen.java	2010-07-29 09:43:38 UTC (rev 2712)
+++ trunk/src/CacheWolf/InputScreen.java	2010-07-29 13:28:58 UTC (rev 2713)
@@ -557,6 +557,7 @@
 					strBufDistanc.delete(0, strBufDistanc.length());
 				    TopSP.setControl(BearP,true);
 				    bBearingPanelOnTop = true;
+				    this.repaint();
 
 				}
 



From maierkurt at mail.berlios.de  Thu Jul 29 03:51:48 2010
From: maierkurt at mail.berlios.de (maierkurt at mail.berlios.de)
Date: Thu, 29 Jul 2010 03:51:48 PM +0200
Subject: [Cachewolf-svn] r2714 - trunk/src/CacheWolf
Message-ID: <20100729135149.104A9480BEE@sheep.berlios.de>

Author: maierkurt
Date: 2010-07-29 15:51:48 +0200 (Thu, 29 Jul 2010)
New Revision: 2714

Modified:
   trunk/src/CacheWolf/InputScreen.java
Log:
disable button "Bearing" after pressing it.

Modified: trunk/src/CacheWolf/InputScreen.java
===================================================================
--- trunk/src/CacheWolf/InputScreen.java	2010-07-29 13:28:58 UTC (rev 2713)
+++ trunk/src/CacheWolf/InputScreen.java	2010-07-29 13:51:48 UTC (rev 2714)
@@ -538,6 +538,7 @@
 				if(bBearingPanelOnTop){
 					enable(btnExpert);
 				    enable(btnGPS);
+				    enable(btnBear);
 				    TopSP.setControl(TopP);
 				    bBearingPanelOnTop = false;
 				    this.repaint();
@@ -553,6 +554,7 @@
 			if (ev.target == btnBear ){
 				    disable(btnExpert);
 				    disable(btnGPS);
+				    disable(btnBear);
 					strBufBear.delete(0, strBufBear.length());
 					strBufDistanc.delete(0, strBufDistanc.length());
 				    TopSP.setControl(BearP,true);



From araber95 at mail.berlios.de  Thu Jul 29 09:54:10 2010
From: araber95 at mail.berlios.de (araber95 at mail.berlios.de)
Date: Thu, 29 Jul 2010 09:54:10 PM +0200
Subject: [Cachewolf-svn] r2715 - in trunk: res_noewe/templates src/CacheWolf
	src/CacheWolf/exp src/CacheWolf/imp
Message-ID: <20100729195410.9A9E6480BF1@sheep.berlios.de>

Author: araber95
Date: 2010-07-29 21:54:10 +0200 (Thu, 29 Jul 2010)
New Revision: 2715

Modified:
   trunk/res_noewe/templates/html_by_KarlKater.tpl
   trunk/res_noewe/templates/html_from_GCTemplate.tpl
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/exp/TPLExporter.java
   trunk/src/CacheWolf/imp/GPXImporter.java
Log:
1. gpx-import owner possibly from tag placed_by additional
2. tpl_var cache_index no longer needed for multi file output


Modified: trunk/res_noewe/templates/html_by_KarlKater.tpl
===================================================================
--- trunk/res_noewe/templates/html_by_KarlKater.tpl	2010-07-29 13:51:48 UTC (rev 2714)
+++ trunk/res_noewe/templates/html_by_KarlKater.tpl	2010-07-29 19:54:10 UTC (rev 2715)
@@ -5,7 +5,6 @@
 <tmpl_par name="NrLogs " value="-1">
 <tmpl_par name="singleFile" value="no">
 <tmpl_par name="formatModifier" value="1">
-<tmpl_loop cache_index>
 <html>
 
 <head>
@@ -112,4 +111,3 @@
 </table>
 </body>
 </html>
-</tmpl_loop>
\ No newline at end of file

Modified: trunk/res_noewe/templates/html_from_GCTemplate.tpl
===================================================================
--- trunk/res_noewe/templates/html_from_GCTemplate.tpl	2010-07-29 13:51:48 UTC (rev 2714)
+++ trunk/res_noewe/templates/html_from_GCTemplate.tpl	2010-07-29 19:54:10 UTC (rev 2715)
@@ -5,7 +5,6 @@
 <tmpl_par name="NrLogs " value="-1">
 <tmpl_par name="singleFile" value="no">
 <tmpl_par name="formatModifier" value="1">
-<tmpl_loop cache_index>
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
 <!-- saved from url=(0014)http://localhost/ -->
 <!-- Note: The line above is needed to avoid the warning due to the javascript contained in this page.
@@ -167,5 +166,3 @@
 </div>
 </body>
 </html>
-
-</tmpl_loop>
\ No newline at end of file

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2010-07-29 13:51:48 UTC (rev 2714)
+++ trunk/src/CacheWolf/CacheHolder.java	2010-07-29 19:54:10 UTC (rev 2715)
@@ -3,7 +3,6 @@
 import CacheWolf.exp.Exporter;
 import CacheWolf.exp.GarminMap;
 import CacheWolf.navi.Metrics;
-
 import com.stevesoft.ewe_pat.Regex;
 
 import ewe.fx.FontMetrics;
@@ -856,27 +855,14 @@
 		int imageNo=0;
 		String imgsrc="";
 		if (ModTypLongDesc==1) imgsrc="file://"+Global.getProfile().dataDir;
-		Regex imgRex = new Regex("src=(?:\\s*[^\"|']*?)(?:\"|')(.*?)(?:\"|')");
 		while (start>=0 && (pos=chD.LongDescription.indexOf("<img",start))>0) {
 			if (imageNo >= chD.images.size()) break;
 			s.append(chD.LongDescription.substring(start,pos));
-			imgRex.searchFrom(chD.LongDescription,pos);
-			String imgUrl=imgRex.stringMatched(1);
-			if (imgUrl.lastIndexOf('.')>0 && imgUrl.toLowerCase().startsWith("http")) {
-				String imgType = (imgUrl.substring(imgUrl.lastIndexOf(".")).toLowerCase()+"    ").substring(0,4).trim();
-				// If we have an image which we stored when spidering, we can display it
-   				if(imgType.startsWith(".png") || imgType.startsWith(".jpg") || imgType.startsWith(".gif")){
-					Object localImageSource = null;
-					if (imageNo < chD.images.size()) {
-						localImageSource = chD.images.get(imageNo).getFilename();
-					}
-					if (localImageSource == null) localImageSource = imgUrl;
-					s.append("<img src=\""+imgsrc+localImageSource+"\">");
-					imageNo++;
-				}
-			}
-			start=chD.LongDescription.indexOf(">",pos);
-			if (start>=0) start++;
+			start=chD.LongDescription.indexOf(">",pos)+1;
+			String oldurl=chD.images.get(imageNo).getURL();
+			String newurl=imgsrc+chD.images.get(imageNo).getFilename();
+			s.append(STRreplace.replace(chD.LongDescription.substring(pos, start),oldurl,newurl));
+			imageNo++;
 		}
 		if (start>=0) s.append(chD.LongDescription.substring(start));
 		return s.toString();

Modified: trunk/src/CacheWolf/exp/TPLExporter.java
===================================================================
--- trunk/src/CacheWolf/exp/TPLExporter.java	2010-07-29 13:51:48 UTC (rev 2714)
+++ trunk/src/CacheWolf/exp/TPLExporter.java	2010-07-29 19:54:10 UTC (rev 2715)
@@ -215,15 +215,13 @@
 							cache_index.add(varParams);
 						}
 						else {
-							cache_index.add(varParams);
-							tpl.setParam("cache_index", cache_index);
+							tpl.setParams(varParams);
 							String ext = (myFilter.out.substring(myFilter.out.lastIndexOf(".")).toLowerCase()+"    ").trim();
 							FileWriter fw = new FileWriter(saveTo.getPath() + ch.getWayPoint() + ext);
 							fw.codec = myFilter.codec;
 							PrintWriter detfile = new PrintWriter(new BufferedWriter(fw));
 							tpl.printTo(detfile);
 							detfile.close();
-							cache_index.clear();
 						}
 					}catch(Exception e){
 						Vm.debug("Problem getting Parameter, Cache: " + ch.getWayPoint());

Modified: trunk/src/CacheWolf/imp/GPXImporter.java
===================================================================
--- trunk/src/CacheWolf/imp/GPXImporter.java	2010-07-29 13:51:48 UTC (rev 2714)
+++ trunk/src/CacheWolf/imp/GPXImporter.java	2010-07-29 19:54:10 UTC (rev 2715)
@@ -447,6 +447,13 @@
 			if(pref.myAlias.equals(strData)) holder.setOwned(true);
 			return;
 		}
+		if (name.equals("groundspeak:placed_by")) {
+			if(holder.getCacheOwner().equals("")) {
+				holder.setCacheOwner(strData);
+				if(pref.myAlias.equals(strData)) holder.setOwned(true);
+			}
+			return;
+		}
 		if (name.equals("groundspeak:difficulty") || name.equals("difficulty") || name.equals("terra:mental_challenge")) {
 			holder.setHard(CacheTerrDiff.v1Converter(strData));
 			return;



