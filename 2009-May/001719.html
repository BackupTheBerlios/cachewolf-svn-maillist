<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Cachewolf-svn] r1801 - in trunk: res_noewe/languages resources	src/CacheWolf src/exp
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cachewolf-svn/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r1801%20-%20in%20trunk%3A%20res_noewe/languages%20resources%0A%09src/CacheWolf%20src/exp&In-Reply-To=%3C200905131700.n4DH0Kb6029512%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001718.html">
   <LINK REL="Next"  HREF="001720.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cachewolf-svn] r1801 - in trunk: res_noewe/languages resources	src/CacheWolf src/exp</H1>
    <B>engywuck at mail.berlios.de</B> 
    <A HREF="mailto:cachewolf-svn%40lists.berlios.de?Subject=Re%3A%20%5BCachewolf-svn%5D%20r1801%20-%20in%20trunk%3A%20res_noewe/languages%20resources%0A%09src/CacheWolf%20src/exp&In-Reply-To=%3C200905131700.n4DH0Kb6029512%40sheep.berlios.de%3E"
       TITLE="[Cachewolf-svn] r1801 - in trunk: res_noewe/languages resources	src/CacheWolf src/exp">engywuck at mail.berlios.de
       </A><BR>
    <I>Wed May 13 19:00:20 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001718.html">[Cachewolf-svn] r1800 - trunk/src/CacheWolf
</A></li>
        <LI>Next message: <A HREF="001720.html">[Cachewolf-svn] r1802 - trunk/src/CacheWolf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1719">[ date ]</a>
              <a href="thread.html#1719">[ thread ]</a>
              <a href="subject.html#1719">[ subject ]</a>
              <a href="author.html#1719">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: engywuck
Date: 2009-05-13 18:59:54 +0200 (Wed, 13 May 2009)
New Revision: 1801

Added:
   trunk/resources/notes_exist.png
   trunk/resources/solver_exists.png
Modified:
   trunk/res_noewe/languages/DE.cfg
   trunk/res_noewe/languages/EN.cfg
   trunk/res_noewe/languages/FR.cfg
   trunk/res_noewe/languages/NL.cfg
   trunk/src/CacheWolf/CacheHolder.java
   trunk/src/CacheWolf/CacheHolderDetail.java
   trunk/src/CacheWolf/DetailsPanel.java
   trunk/src/CacheWolf/MainMenu.java
   trunk/src/CacheWolf/MainTab.java
   trunk/src/CacheWolf/NotesScreen.java
   trunk/src/CacheWolf/Preferences.java
   trunk/src/CacheWolf/PreferencesScreen.java
   trunk/src/CacheWolf/SearchCache.java
   trunk/src/CacheWolf/ShowCacheInBrowser.java
   trunk/src/CacheWolf/SolverPanel.java
   trunk/src/CacheWolf/myTableModel.java
   trunk/src/exp/HTMLExporter.java
   trunk/src/exp/TPLExporter.java
Log:
Introducing new columns for list: You can now display in the list if the cache has solver data or notes.

Modified: trunk/res_noewe/languages/DE.cfg
===================================================================
--- trunk/res_noewe/languages/DE.cfg	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/res_noewe/languages/DE.cfg	2009-05-13 16:59:54 UTC (rev 1801)
@@ -109,6 +109,7 @@
 		217=Spider alle Funde von geocaching.com
 		218=Auch in Beschreibung/Notizen
 		219=Suche...
+		220=Pr%fcfe Notizen und L%f6ser
 		300=Type:
 		301=Gr%f6%dfe:
 		302=Wegpunkt:
@@ -314,6 +315,10 @@
 		1035=M%f6gliche Ursache:
 		1036=Ein Fehler in der Ewe-VM
 		1037=Bitte Geduld bis zu einem Update
+		1038=L
+		1039=L%f6ser vorhanden
+		1040=N
+		1041=Notiz vorhanden
 		1100=Profile
 		1105=Suchen
 		1106=Profil w%e4hlen oder Neu

Modified: trunk/res_noewe/languages/EN.cfg
===================================================================
--- trunk/res_noewe/languages/EN.cfg	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/res_noewe/languages/EN.cfg	2009-05-13 16:59:54 UTC (rev 1801)
@@ -109,6 +109,7 @@
 		217=Spider all finds from geocaching.com
 		218=Also in description/notes
 		219=Searching...
+		220=Check notes and solver
 		300=Type:
 		301=Size:
 		302=Waypoint:
@@ -314,6 +315,10 @@
 		1035=Possible reason:
 		1036=A bug in ewe VM, please be
 		1037=patient for an update
+		1038=S
+		1039=Solver exists
+		1040=N
+		1041=Notes exist
 		1100=Profiles
 		1105=Browse
 		1106=Choose profile or New

Modified: trunk/res_noewe/languages/FR.cfg
===================================================================
--- trunk/res_noewe/languages/FR.cfg	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/res_noewe/languages/FR.cfg	2009-05-13 16:59:54 UTC (rev 1801)
@@ -106,6 +106,7 @@
 		214=Nouveau waypoint
 		218=Aussi dans description/notes
 		219=Cherchant...
+		220=V%e9rifier notes et resoudeur
 		300=Type:
 		301=Gabarit:
 		302=Waypoint:
@@ -303,6 +304,10 @@
 		1035=Cause possible:
 		1036=Un bogue dans le Ewe-VM
 		1037=Merci de patientier pour un mise %e0 jour
+		1038=R
+		1039=Resoudeur existe
+		1040=N
+		1041=Note existe
 		1100=Profils
 		1105=Chercher
 		1106=Choiser profil ou cr%e9er-un 

Modified: trunk/res_noewe/languages/NL.cfg
===================================================================
--- trunk/res_noewe/languages/NL.cfg	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/res_noewe/languages/NL.cfg	2009-05-13 16:59:54 UTC (rev 1801)
@@ -98,6 +98,7 @@
 		214=Nieuwe Waypoint
 		218=Ook in opmerkingen/beschrijving
 		219=Zoeken...
+		220=Onderzoek opmerkingen en oplosser
 		300=Type:
 		301=Grote:
 		302=Waypoint:
@@ -278,6 +279,10 @@
 		1035=Possible reason:
 		1036=A bug in ewe VM, please be
 		1037=patient for an update
+		1038=S
+		1039=Oplosser bestaat
+		1040=N
+		1041=Opmerkingen bestaan
 		1100=Profielen
 		1105=Bladeren
 		1106=Kies profiel of nieuw.

Added: trunk/resources/notes_exist.png
===================================================================
(Binary files differ)


Property changes on: trunk/resources/notes_exist.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/resources/solver_exists.png
===================================================================
(Binary files differ)


Property changes on: trunk/resources/solver_exists.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/src/CacheWolf/CacheHolder.java
===================================================================
--- trunk/src/CacheWolf/CacheHolder.java	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/src/CacheWolf/CacheHolder.java	2009-05-13 16:59:54 UTC (rev 1801)
@@ -127,6 +127,10 @@
 	public CacheHolder mainCache;
 	/** The date this cache was last synced with OC in format yyyyMMddHHmmss */
 	private String lastSyncOC = EMPTY;
+	/** True if cache has solver entry */
+	private boolean hasSolver = false;
+	/** True if a note is entered for the cache */
+	private boolean hasNote = false;
 	public CacheHolderDetail details = null;
 	/** When sorting the cacheDB this field is used. The relevant field is copied here and
 	 *  the sort is always done on this field to speed up the sorting process 
@@ -1333,6 +1337,25 @@
 		Global.getProfile().notifyUnsavedChanges(attributesNo != this.attributesNo);		
     	this.attributesNo = attributesNo;
     }
+	
+	public boolean hasSolver() {
+		return hasSolver;
+	}
+	
+	public void setHasSolver(boolean hasSolver) {
+		Global.getProfile().notifyUnsavedChanges(hasSolver != this.hasSolver);		
+		this.hasSolver = hasSolver;
+	}
 
+	public boolean hasNote() {
+		return hasNote;
+	}
+	
+	public void setHasNote(boolean hasNote) {
+		Global.getProfile().notifyUnsavedChanges(hasNote != this.hasNote);		
+		this.hasNote = hasNote;
+	}
+	
+
 }
 

Modified: trunk/src/CacheWolf/CacheHolderDetail.java
===================================================================
--- trunk/src/CacheWolf/CacheHolderDetail.java	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/src/CacheWolf/CacheHolderDetail.java	2009-05-13 16:59:54 UTC (rev 1801)
@@ -23,7 +23,7 @@
 	  public String LastUpdate = CacheHolder.EMPTY;
 	  public String Hints = CacheHolder.EMPTY;
 	  public LogList CacheLogs=new LogList();
-	  public String CacheNotes = CacheHolder.EMPTY;
+	  private String CacheNotes = CacheHolder.EMPTY;
 	  public Vector Images = new Vector();
 	  public Vector ImagesText = new Vector();
 	  public Vector ImagesInfo = new Vector();
@@ -36,7 +36,7 @@
 	  public TravelbugList Travelbugs=new TravelbugList();
 	  //public String Bugs = EMPTY; Superceded by Travelbugs
 	  public String URL = CacheHolder.EMPTY;
-	  public String Solver = CacheHolder.EMPTY;
+	  private String Solver = CacheHolder.EMPTY;
 	  public String OwnLogId = CacheHolder.EMPTY;
 	  public Log OwnLog = null;
 	  public String Country = CacheHolder.EMPTY;
@@ -72,6 +72,26 @@
 	 	Hints = hints;
 	 }
 	 
+	 public void setSolver(String solver) {
+		 if (!Solver.equals(solver)) getParent().setUpdated(true);
+		 getParent().setHasSolver(!solver.trim().equals(&quot;&quot;));
+		 Solver = solver;
+	 }
+	 
+	 public String getSolver() {
+		 return this.Solver;
+	 }
+
+	 public void setCacheNotes(String notes) {
+		 if (!CacheNotes.equals(notes)) getParent().setUpdated(true);
+		 getParent().setHasNote(!notes.trim().equals(&quot;&quot;));
+		 CacheNotes = notes;
+	 }
+	 
+	 public String getCacheNotes() {
+		 return this.CacheNotes;
+	 }
+	 
 	 public void setCacheLogs(LogList newLogs) {
 		 int size=newLogs.size();
 		 for (int i=size-1; i&gt;=0; i--) { // Loop over all new logs, must start with oldest log
@@ -123,7 +143,7 @@
 		  if (newCh.Country.length()&gt;0) this.Country=newCh.Country;
 		  if (newCh.State.length()&gt;0) this.State=newCh.State;
 		  
-		  if (newCh.Solver.length()&gt;0) this.Solver=newCh.Solver;
+		  if (newCh.getSolver().length()&gt;0) this.setSolver(newCh.getSolver());
 	 	return this;
 	  }
 	  
@@ -285,7 +305,7 @@
 				}
 			}
 			ex = new Extractor(text, &quot;&lt;SOLVER&gt;&lt;![CDATA[&quot;, &quot;]]&gt;&lt;/SOLVER&gt;&quot;, 0, true);
-			Solver=ex.findNext();
+			this.setSolver(ex.findNext());
 		}
 		
 		/**
@@ -376,7 +396,7 @@
 				  //detfile.print(&quot;]]&gt;&lt;/BUGS&gt;\n&quot;);
 				  detfile.print(Travelbugs.toXML());
 				  detfile.print(&quot;&lt;URL&gt;&lt;![CDATA[&quot;+URL+&quot;]]&gt;&lt;/URL&gt;\r\n&quot;);
-				  detfile.print(&quot;&lt;SOLVER&gt;&lt;![CDATA[&quot;+Solver+&quot;]]&gt;&lt;/SOLVER&gt;\r\n&quot;);
+				  detfile.print(&quot;&lt;SOLVER&gt;&lt;![CDATA[&quot;+getSolver()+&quot;]]&gt;&lt;/SOLVER&gt;\r\n&quot;);
 				  detfile.print(getParent().toXML()); // This will allow restoration of index.xml
 				  detfile.print(&quot;&lt;/CACHEDETAILS&gt;\n&quot;);
 				  Global.getPref().log(&quot;Writing file: &quot;+getParent().getWayPoint().toLowerCase() + &quot;.xml&quot;);

Modified: trunk/src/CacheWolf/DetailsPanel.java
===================================================================
--- trunk/src/CacheWolf/DetailsPanel.java	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/src/CacheWolf/DetailsPanel.java	2009-05-13 16:59:54 UTC (rev 1801)
@@ -214,7 +214,7 @@
 		lblTerr.setText((ch.getTerrain().length()&gt;0) ? (MyLocale.getMsg(1001,&quot;T&quot;)+&quot;: &quot;+ch.getTerrain()) : &quot;&quot;);
 		lblDiff.setText((ch.getHard().length()&gt;0)    ? (MyLocale.getMsg(1000,&quot;D&quot;)+&quot;: &quot;+ch.getHard()) : &quot;&quot;); 
 
-		if(isBigScreen)	mNotes.setText(ch.getExistingDetails().CacheNotes);
+		if(isBigScreen)	mNotes.setText(ch.getExistingDetails().getCacheNotes());
 	}
 	
 	
@@ -332,7 +332,7 @@
 				dirty_notes=true; // TODO I think this is redundant, because the notes are saved seperately by the notes screen itself
 				NotesScreen nsc = new NotesScreen(thisCache.getCacheDetails(true));
 				nsc.execute(this.getFrame(), Gui.CENTER_FRAME);
-				if(isBigScreen) mNotes.setText(thisCache.getCacheDetails(true).CacheNotes);
+				if(isBigScreen) mNotes.setText(thisCache.getCacheDetails(true).getCacheNotes());
 			}
 			else if(ev.target == btnShowMap){
 				Global.mainTab.SwitchToMovingMap(thisCache.pos, true);
@@ -362,14 +362,14 @@
 			}
 			else if (ev.target == btnAddDateTime){
 				dirty_notes=true;
-				String note = thisCache.getCacheDetails(true).CacheNotes;
+				String note = thisCache.getCacheDetails(true).getCacheNotes();
 				Time dtm = new Time();
 				dtm.getTime();
 				dtm.setFormat(&quot;E dd.MM.yyyy '/' HH:mm&quot;);
 				if(note.length() &gt; 0)	note = note + &quot;\n&quot; + dtm.toString();
 				else 	note = note + dtm.toString();
 				note = note + &quot;\n&quot;;
-				thisCache.getCacheDetails(true).CacheNotes = note;
+				thisCache.getCacheDetails(true).setCacheNotes(note);
 				thisCache.save();
 			}
 			else if (ev.target == btnAddPicture){

Modified: trunk/src/CacheWolf/MainMenu.java
===================================================================
--- trunk/src/CacheWolf/MainMenu.java	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/src/CacheWolf/MainMenu.java	2009-05-13 16:59:54 UTC (rev 1801)
@@ -31,7 +31,7 @@
 	private MenuItem exportOZI, exportKML, exportTPL, exportExplorist;
 	private MenuItem filtCreate, filtClear, filtInvert, filtSelected, filtNonSelected, filtBlack, filtApply;
 	private MenuItem exportLOC, exportGPS, mnuSeparator;
-	private MenuItem orgNewWP, orgCopy, orgMove, orgDelete,orgRebuild;
+	private MenuItem orgNewWP, orgCopy, orgMove, orgDelete,orgRebuild,orgCheckNotesAndSolver;
 	public MenuItem cacheTour,orgTravelbugs, mnuForceLogin;
 	private MenuItem mnuNewProfile, mnuOpenProfile, mnuEditCenter;
 	private Form father;
@@ -196,17 +196,18 @@
 		///////////////////////////////////////////////////////////////////////
 		// Create the &quot;Organise&quot; pulldown menu
 		///////////////////////////////////////////////////////////////////////
-		MenuItem[] organiseMenuItems=new MenuItem[9];
+		MenuItem[] organiseMenuItems=new MenuItem[10];
 		organiseMenuItems[0] = orgNewWP = new MenuItem(MyLocale.getMsg(214,&quot;New Waypoint&quot;));
 		organiseMenuItems[1] = mnuSeparator;
 		organiseMenuItems[2] = orgCopy  = new MenuItem(MyLocale.getMsg(141,&quot;Copy&quot;)); 
 		organiseMenuItems[3] = orgMove  = new MenuItem(MyLocale.getMsg(142,&quot;Move&quot;)); 
 		organiseMenuItems[4] = orgDelete   = new MenuItem(MyLocale.getMsg(143,&quot;Delete&quot;));
 		organiseMenuItems[5] = orgRebuild   = new MenuItem(MyLocale.getMsg(208,&quot;Rebuild Index&quot;));
-		organiseMenuItems[6] = mnuSeparator;
-		organiseMenuItems[7] = orgTravelbugs = new MenuItem(MyLocale.getMsg(139,&quot;Manage travelbugs&quot;));
+		organiseMenuItems[6] = orgCheckNotesAndSolver = new MenuItem(MyLocale.getMsg(220,&quot;Rebuild Index&quot;));
+		organiseMenuItems[7] = mnuSeparator;
+		organiseMenuItems[8] = orgTravelbugs = new MenuItem(MyLocale.getMsg(139,&quot;Manage travelbugs&quot;));
 		cacheTour = new MenuItem(MyLocale.getMsg(198,&quot;Cachetour&quot;));
-		organiseMenuItems[8] = cacheTour;
+		organiseMenuItems[9] = cacheTour;
 		this.addMenu(new PullDownMenu(MyLocale.getMsg(140,&quot;Organise&quot;),new Menu(organiseMenuItems,null)));
 
 		///////////////////////////////////////////////////////////////////////
@@ -616,6 +617,21 @@
 				rb.rebuild();
 				tbp.refreshTable();
 			}
+			if(mev.selectedItem == orgCheckNotesAndSolver){
+				// Checking every cache if notes or solver data exist
+				CWProgressBar cwp = new CWProgressBar(MyLocale.getMsg(219,&quot;Searching...&quot;), 0, cacheDB.size(), true);
+				cwp.exec();
+				cwp.allowExit(true);
+				for(int i = 0;i &lt; cacheDB.size();i++){
+					cwp.setPosition(i);
+					CacheHolder ch = cacheDB.get(i);
+					ch.setHasNote(!ch.getFreshDetails().getCacheNotes().equals(&quot;&quot;));
+					ch.setHasSolver(!ch.getFreshDetails().getSolver().equals(&quot;&quot;));
+					if (cwp.isClosed()) break;
+				} // for
+				cwp.exit(0);
+				tbp.refreshTable();
+			}
 			if(mev.selectedItem == orgTravelbugs){
 				TravelbugJourneyScreen tbs=new TravelbugJourneyScreen();
 				tbs.setPreferredSize(800,600);

Modified: trunk/src/CacheWolf/MainTab.java
===================================================================
--- trunk/src/CacheWolf/MainTab.java	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/src/CacheWolf/MainTab.java	2009-05-13 16:59:54 UTC (rev 1801)
@@ -166,9 +166,13 @@
 			if (chD!=null &amp;&amp; solverP.isDirty()) {
 				cacheDirty=true;
 				if (chMain==null) {
-					chD.Solver=solverP.getInstructions();
+					boolean oldHasSolver = chD.getParent().hasSolver();
+					chD.setSolver(solverP.getInstructions());
+					if (oldHasSolver != chD.getParent().hasSolver()) tbP.tc.update(true);
 				} else {
-					chMain.getExistingDetails().Solver=solverP.getInstructions();
+					boolean oldHasSolver = chMain.hasSolver();
+					chMain.getExistingDetails().setSolver(solverP.getInstructions());
+					if (oldHasSolver != chMain.hasSolver()) tbP.tc.update(true);
 					chMain.save();//Vm.debug(&quot;mainT:SaveCache &quot;+chMain.wayPoint+&quot;/S:&quot;+chMain.Solver);
 					chMain=null;
 				}

Modified: trunk/src/CacheWolf/NotesScreen.java
===================================================================
--- trunk/src/CacheWolf/NotesScreen.java	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/src/CacheWolf/NotesScreen.java	2009-05-13 16:59:54 UTC (rev 1801)
@@ -25,7 +25,7 @@
 		setPreferredSize(Global.getPref().myAppWidth, Global.getPref().myAppHeight);
 		this.resizeOnSIP = true;
 		chD = ch;
-		wayNotes.setText(chD.CacheNotes);
+		wayNotes.setText(chD.getCacheNotes());
 		addLast(sbp.setTag(CellConstants.SPAN, new Dimension(3,1)),CellConstants.STRETCH, (CellConstants.FILL|CellConstants.WEST));
 		titleControls=new CellPanel();
 		titleControls.addNext(addDateTime,CellConstants.HSTRETCH,CellConstants.HFILL);
@@ -46,12 +46,12 @@
 				wayNotes.setText(note);
 			}
 			if(ev.target == btSave){
-				chD.CacheNotes = wayNotes.getText();
+				chD.setCacheNotes(wayNotes.getText());
 				chD.getParent().save();
 				this.close(0);
 			}
 			if(ev.target == cancelBtn){
-				if ( (!chD.CacheNotes.equals(wayNotes.getText())) ) {
+				if ( (!chD.getCacheNotes().equals(wayNotes.getText())) ) {
 					if ( (new MessageBox(&quot;Warning&quot;, &quot;You will loose any changes made to the notes. Do you want to continue?&quot;
 							, FormBase.YESB|FormBase.NOB)).execute() == FormBase.IDYES) {
 						this.close(0);
@@ -59,10 +59,10 @@
 				} else this.close(0); // no changes -&gt; exit without asking
 			} 
 			if(ev.target == titleOK){
-				if ( (!chD.CacheNotes.equals(wayNotes.getText())) ) {
+				if ( (!chD.getCacheNotes().equals(wayNotes.getText())) ) {
 					if ( (new MessageBox(&quot;Warning&quot;, &quot;Save changes made to the notes?&quot;
 							, FormBase.YESB|FormBase.NOB)).execute() == FormBase.IDYES) {
-						chD.CacheNotes = wayNotes.getText();
+						chD.setCacheNotes(wayNotes.getText());
 						chD.getParent().save();
 					}
 				}

Modified: trunk/src/CacheWolf/Preferences.java
===================================================================
--- trunk/src/CacheWolf/Preferences.java	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/src/CacheWolf/Preferences.java	2009-05-13 16:59:54 UTC (rev 1801)
@@ -319,7 +319,7 @@
 		else if (name.equals(&quot;listview&quot;)) {
 			listColMap=atts.getValue(&quot;colmap&quot;);
 			listColWidth=atts.getValue(&quot;colwidths&quot;)+&quot;,30,30&quot;; // append default values for older versions
-			if((new StringTokenizer(listColWidth,&quot;,&quot;)).countTokens()&lt;15) listColWidth+=&quot;,30,30&quot;; // for older versions
+			if((new StringTokenizer(listColWidth,&quot;,&quot;)).countTokens()&lt;17) listColWidth+=&quot;,30,30&quot;; // for older versions
 		}
 		else if(name.equals(&quot;proxy&quot;)) {
 			myproxy = atts.getValue(&quot;prx&quot;);

Modified: trunk/src/CacheWolf/PreferencesScreen.java
===================================================================
--- trunk/src/CacheWolf/PreferencesScreen.java	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/src/CacheWolf/PreferencesScreen.java	2009-05-13 16:59:54 UTC (rev 1801)
@@ -242,7 +242,10 @@
 				MyLocale.getMsg(613,&quot;Bearing&quot;),
 				MyLocale.getMsg(635,&quot;Size&quot;),
 				MyLocale.getMsg(636,&quot;OC Empfehlungen&quot;),
-				MyLocale.getMsg(637,&quot;OC Index&quot;)},pref.listColMap),MyLocale.getMsg(595,&quot;List&quot;),null);
+				MyLocale.getMsg(637,&quot;OC Index&quot;),
+				MyLocale.getMsg(1039,&quot;Solver exists&quot;),
+				MyLocale.getMsg(1041,&quot;Note exists&quot;),
+				},pref.listColMap),MyLocale.getMsg(595,&quot;List&quot;),null);
 
 		mTab.addCard(tccBugs=new TableColumnChooser(new String[] {
 				MyLocale.getMsg(6000,&quot;Guid&quot;),

Modified: trunk/src/CacheWolf/SearchCache.java
===================================================================
--- trunk/src/CacheWolf/SearchCache.java	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/src/CacheWolf/SearchCache.java	2009-05-13 16:59:54 UTC (rev 1801)
@@ -48,7 +48,7 @@
 				   ch.getCacheStatus().toUpperCase().indexOf(searchStr)&lt;0 &amp;&amp;
 				   (! searchInDescriptionAndNotes || 
 					ch.getExistingDetails().LongDescription.toUpperCase().indexOf(searchStr)&lt;0 &amp;&amp;
-					ch.getExistingDetails().CacheNotes.toUpperCase().indexOf(searchStr)&lt;0)){
+					ch.getExistingDetails().getCacheNotes().toUpperCase().indexOf(searchStr)&lt;0)){
 					ch.is_flaged = false;
 				} else
 					ch.is_flaged=true;

Modified: trunk/src/CacheWolf/ShowCacheInBrowser.java
===================================================================
--- trunk/src/CacheWolf/ShowCacheInBrowser.java	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/src/CacheWolf/ShowCacheInBrowser.java	2009-05-13 16:59:54 UTC (rev 1801)
@@ -111,8 +111,8 @@
 					tpl.setParam(&quot;DATE&quot;, chD.getDateHidden());
 					tpl.setParam(&quot;URL&quot;, chD.getExistingDetails().URL);
 					if (chD.getExistingDetails().Travelbugs.size()&gt;0) tpl.setParam(&quot;BUGS&quot;,chD.getExistingDetails().Travelbugs.toHtml());
-					if (chD.getExistingDetails().CacheNotes!=null &amp;&amp; chD.getExistingDetails().CacheNotes.trim().length()&gt;0) tpl.setParam(&quot;NOTES&quot;, STRreplace.replace(chD.getExistingDetails().CacheNotes,&quot;\n&quot;,&quot;&lt;br/&gt;\n&quot;));
-					if (chD.getExistingDetails().Solver!=null &amp;&amp; chD.getExistingDetails().Solver.trim().length()&gt;0) tpl.setParam(&quot;SOLVER&quot;, STRreplace.replace(chD.getExistingDetails().Solver,&quot;\n&quot;,&quot;&lt;br/&gt;\n&quot;));
+					if (chD.getExistingDetails().getCacheNotes().trim().length()&gt;0) tpl.setParam(&quot;NOTES&quot;, STRreplace.replace(chD.getExistingDetails().getCacheNotes(),&quot;\n&quot;,&quot;&lt;br/&gt;\n&quot;));
+					if (chD.getExistingDetails().getSolver()!=null &amp;&amp; chD.getExistingDetails().getSolver().trim().length()&gt;0) tpl.setParam(&quot;SOLVER&quot;, STRreplace.replace(chD.getExistingDetails().getSolver(),&quot;\n&quot;,&quot;&lt;br/&gt;\n&quot;));
 					// Look for images
 					
 					StringBuffer s=new StringBuffer(chD.getExistingDetails().LongDescription.length());

Modified: trunk/src/CacheWolf/SolverPanel.java
===================================================================
--- trunk/src/CacheWolf/SolverPanel.java	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/src/CacheWolf/SolverPanel.java	2009-05-13 16:59:54 UTC (rev 1801)
@@ -53,7 +53,7 @@
 	 */
 	public void setInstructions(CacheHolder pCh) {
 		if (pCh != null) {
-	        this.setInstructions(pCh.getFreshDetails().Solver);
+	        this.setInstructions(pCh.getFreshDetails().getSolver());
 	        if (!pCh.hasSameMainCache(ch)) {
 		        this.clearOutput();
 	        }

Modified: trunk/src/CacheWolf/myTableModel.java
===================================================================
--- trunk/src/CacheWolf/myTableModel.java	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/src/CacheWolf/myTableModel.java	2009-05-13 16:59:54 UTC (rev 1801)
@@ -14,7 +14,6 @@
 */
 public class myTableModel extends TableModel{
 	
-	public static final int MAXCOLUMNS=14;
 	// Colors for Cache status (BG unless otherwise stated)
 	private static final Color COLOR_FLAGED		= new Color(255,255,0);
 	private static final Color COLOR_FOUND		= new Color(152,251,152);
@@ -33,7 +32,7 @@
 	 * the element j (as per the list below) is visible in column i. 
 	 * [0]TickBox, [1]Type, [2]Distance, [3]Terrain, [4]waypoint, [5]name, [6]coordinates, 
 	 * [7]owner, [8]datehidden, [9]status, [10]distance, [11]bearing, [12] Size, [13] # of OC recommend.
-	 * [14] OC index
+	 * [14] OC index, [15] Solver exists, [16] Note exists
 	 */
 	private int[] colMap;
 	/** The column widths corresponding to the list of columns above */
@@ -42,7 +41,8 @@
 			MyLocale.getMsg(1002,&quot;Waypoint&quot;),&quot;Name&quot;,MyLocale.getMsg(1004,&quot;Location&quot;),
 			MyLocale.getMsg(1005,&quot;Owner&quot;),MyLocale.getMsg(1006,&quot;Hidden&quot;),MyLocale.getMsg(1007,&quot;Status&quot;),
 			MyLocale.getMsg(1008,&quot;Dist&quot;),MyLocale.getMsg(1009,&quot;Bear&quot;),MyLocale.getMsg(1017,&quot;S&quot;),
-			MyLocale.getMsg(1026,&quot;#Rec&quot;),MyLocale.getMsg(1027,&quot;OC-IDX&quot;)};
+			MyLocale.getMsg(1026,&quot;#Rec&quot;),MyLocale.getMsg(1027,&quot;OC-IDX&quot;),MyLocale.getMsg(1038,&quot;S&quot;),
+			MyLocale.getMsg(1040,&quot;N&quot;)};
 	
 	private static Image noFindLogs[] = new Image[4];
 	public static mImage red, blue, yellow, skull; // green
@@ -52,11 +52,12 @@
 	private int sortedBy = -1;
 	private FontMetrics fm;
 //	private mImage picSizeMicro,picSizeSmall,picSizeReg,picSizeLarge,picSizeVLarge,picSizeNonPhysical;
+	private mImage picHasSolver,picHasNotes;
 	private mImage[] sizePics = new mImage[CacheSize.CW_TOTAL_SIZE_IMAGES];
 	/** This is the modifier (Shift &amp; Control key status) for Pen Events
 	 * it is set in myTableControl.onEvent */
 	public int penEventModifiers; 
-	/** The row of the last click where the shift key was pressed */
+	
 //	private int lastRow=-1;
 	private myTableControl tcControl;
 	public boolean showExtraWptInfo=true;
@@ -95,6 +96,8 @@
 			sizePics[i].transparentColor=Color.White;
 		}
 				
+		picHasSolver=new mImage(&quot;solver_exists.png&quot;); picHasSolver.transparentColor=Color.White;
+		picHasNotes=new mImage(&quot;notes_exist.png&quot;); picHasNotes.transparentColor=Color.White;
 //		updateRows();
 	}
 	
@@ -103,7 +106,7 @@
 	 *
 	 */
 	public void setColumnNamesAndWidths() {
-		colMap=TableColumnChooser.str2Array(Global.getPref().listColMap,0,14,0, -1);
+		colMap=TableColumnChooser.str2Array(Global.getPref().listColMap,0,16,0, -1);
 		colWidth=TableColumnChooser.str2Array(Global.getPref().listColWidth,10,1024,50, colMap.length);
 		numCols=colMap.length;
 		clearCellAdjustments();
@@ -340,14 +343,18 @@
 						if (ch.getWayPoint().startsWith(&quot;OC&quot;))
 							return Convert.formatInt(ch.recommendationScore);
 						return null;
+					case 15: // Is solver filled?
+					    if (ch.hasSolver()) return picHasSolver; else return null; 
+					case 16: // Does note exist?
+						if (ch.hasNote()) return picHasNotes; else return null;
 				} // Switch
 			} // if
 		} catch (Exception e) {
 			Global.getPref().log(&quot;Ignored Exception in myTableModel.getCellData()&quot;, e, true);
-			return null; 
-		}
 		return null;
 	}
+		return null;
+	}
 	
 	public boolean penPressed(Point onTable,Point cell){
 		boolean retval = false;
@@ -444,5 +451,5 @@
 		//super.select(row, col, selectOn);
 		tcControl.cursorTo(row, col, true);
 	}
-	
+		
 }

Modified: trunk/src/exp/HTMLExporter.java
===================================================================
--- trunk/src/exp/HTMLExporter.java	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/src/exp/HTMLExporter.java	2009-05-13 16:59:54 UTC (rev 1801)
@@ -130,7 +130,7 @@
 							if (logIcons.find(icon)&lt;0) logIcons.add(icon); // Add the icon to list of icons to copy to dest directory
 						}
 						page_tpl.setParam(&quot;LOGS&quot;, sb.toString());
-						page_tpl.setParam(&quot;NOTES&quot;, STRreplace.replace(det.CacheNotes, &quot;\n&quot;,&quot;&lt;br&gt;&quot;)); 
+						page_tpl.setParam(&quot;NOTES&quot;, STRreplace.replace(det.getCacheNotes(), &quot;\n&quot;,&quot;&lt;br&gt;&quot;)); 
 						// Cache Images
 						cacheImg.clear();
 						for(int j = 0; j&lt;det.Images.size(); j++){

Modified: trunk/src/exp/TPLExporter.java
===================================================================
--- trunk/src/exp/TPLExporter.java	2009-05-13 06:39:01 UTC (rev 1800)
+++ trunk/src/exp/TPLExporter.java	2009-05-13 16:59:54 UTC (rev 1801)
@@ -216,12 +216,12 @@
 						varParams.put(&quot;DESCRIPTION&quot;, det.LongDescription);
 						if (myFilter.badChars != null) {
 							varParams.put(&quot;NAME&quot;, rex.replaceAll(ch.getCacheName()));
-							varParams.put(&quot;NOTES&quot;, rex.replaceAll(det.CacheNotes));
+							varParams.put(&quot;NOTES&quot;, rex.replaceAll(det.getCacheNotes()));
 							varParams.put(&quot;HINTS&quot;, rex.replaceAll(det.Hints));
 							varParams.put(&quot;DECRYPTEDHINTS&quot;, rex.replaceAll(Common.rot13(det.Hints)));
 						} else {
 							varParams.put(&quot;NAME&quot;, ch.getCacheName());
-							varParams.put(&quot;NOTES&quot;, det.CacheNotes);
+							varParams.put(&quot;NOTES&quot;, det.getCacheNotes());
 							varParams.put(&quot;HINTS&quot;, det.Hints);
 							varParams.put(&quot;DECRYPTEDHINTS&quot;, Common.rot13(det.Hints));
 						}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001718.html">[Cachewolf-svn] r1800 - trunk/src/CacheWolf
</A></li>
	<LI>Next message: <A HREF="001720.html">[Cachewolf-svn] r1802 - trunk/src/CacheWolf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1719">[ date ]</a>
              <a href="thread.html#1719">[ thread ]</a>
              <a href="subject.html#1719">[ subject ]</a>
              <a href="author.html#1719">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cachewolf-svn">More information about the Cachewolf-svn
mailing list</a><br>
</body></html>
